import{v as De,e as U,i as Ml,f as cl,j as ql,U as J,M as Al,h as Fl,q as Wl,C as $l,E as Kl,p as Nl,T as kl,w as D,r as Rl,G as Hl,y as jl}from"./msgTip-a00a6396.js";import{E as Ql,a as Gl,u as Ul,c as Zl}from"./index-6998b886.js";import{E as Jl,t as Xl}from"./index-151d4a8e.js";import{cp as Yl,a0 as ke,h as g,a_ as Ve,ar as q,l as A,u as oe,a2 as fl,f as ze,g as X,ac as he,a1 as qe,a9 as xl,V as T,_ as Ae,D as se,m as y,n as $,t as re,q as V,I as Z,v as C,r as B,o as pl,x as ie,a4 as _l,s as hl,ai as en,aj as ln,as as te,cq as me,i as Vl,c as nn,cr as rl,M as Be,L as vl,E as tn,Z as yl,aq as on,al as an,$ as Bl,av as ee,aw as sn,K as ae,C as E,B as K,J as ul,R as Cl,G as z,U as rn,F as Sl,y as un,a3 as Pl,an as be,bq as Pe,bi as ge,bo as Ol,a as dn,aX as cn}from"./index-d45ed081.js";import{e as fn}from"./strings-5238cde9.js";import{i as wl}from"./index-184e15d9.js";import{d as Ll,C as pn}from"./index-b06f2c24.js";const vn=e=>Yl[e||"default"],mn=e=>({focus:()=>{var l,t;(t=(l=e.value)==null?void 0:l.focus)==null||t.call(l)}}),Dl="ElSelectGroup",Fe="ElSelect";function bn(e,l){const t=ke(Fe),d=ke(Dl,{disabled:!1}),s=g(()=>Object.prototype.toString.call(e.value).toLowerCase()==="[object object]"),r=g(()=>t.props.multiple?S(t.props.modelValue,e.value):m(e.value,t.props.modelValue)),a=g(()=>{if(t.props.multiple){const b=t.props.modelValue||[];return!r.value&&b.length>=t.props.multipleLimit&&t.props.multipleLimit>0}else return!1}),f=g(()=>e.label||(s.value?"":e.value)),w=g(()=>e.value||e.label||""),h=g(()=>e.disabled||l.groupDisabled||a.value),v=fl(),S=(b=[],O)=>{if(s.value){const L=t.props.valueKey;return b&&b.some(F=>Ve(q(F,L))===q(O,L))}else return b&&b.includes(O)},m=(b,O)=>{if(s.value){const{valueKey:L}=t.props;return q(b,L)===q(O,L)}else return b===O},c=()=>{!e.disabled&&!d.disabled&&(t.hoverIndex=t.optionsArray.indexOf(v.proxy))};A(()=>f.value,()=>{!e.created&&!t.props.remote&&t.setSelected()}),A(()=>e.value,(b,O)=>{const{remote:L,valueKey:F}=t.props;if(Object.is(b,O)||(t.onOptionDestroy(O,v.proxy),t.onOptionCreate(v.proxy)),!e.created&&!L){if(F&&typeof b=="object"&&typeof O=="object"&&b[F]===O[F])return;t.setSelected()}}),A(()=>d.disabled,()=>{l.groupDisabled=d.disabled},{immediate:!0});const{queryChange:i}=Ve(t);return A(i,b=>{const{query:O}=oe(b),L=new RegExp(fn(O),"i");l.visible=L.test(f.value)||e.created,l.visible||t.filteredOptionsCount--}),{select:t,currentLabel:f,currentValue:w,itemSelected:r,isDisabled:h,hoverItem:c}}const gn=ze({name:"ElOption",componentName:"ElOption",props:{value:{required:!0,type:[String,Number,Boolean,Object]},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},setup(e){const l=X("select"),t=he({index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}),{currentLabel:d,itemSelected:s,isDisabled:r,select:a,hoverItem:f}=bn(e,t),{visible:w,hover:h}=qe(t),v=fl().proxy;a.onOptionCreate(v),xl(()=>{const m=v.value,{selected:c}=a,b=(a.props.multiple?c:[c]).some(O=>O.value===v.value);T(()=>{a.cachedOptions.get(m)===v&&!b&&a.cachedOptions.delete(m)}),a.onOptionDestroy(m,v)});function S(){e.disabled!==!0&&t.groupDisabled!==!0&&a.handleOptionSelect(v,!0)}return{ns:l,currentLabel:d,itemSelected:s,isDisabled:r,select:a,hoverItem:f,visible:w,hover:h,selectOptionClick:S,states:t}}});function hn(e,l,t,d,s,r){return se((y(),$("li",{class:C([e.ns.be("dropdown","item"),e.ns.is("disabled",e.isDisabled),{selected:e.itemSelected,hover:e.hover}]),onMouseenter:l[0]||(l[0]=(...a)=>e.hoverItem&&e.hoverItem(...a)),onClick:l[1]||(l[1]=U((...a)=>e.selectOptionClick&&e.selectOptionClick(...a),["stop"]))},[re(e.$slots,"default",{},()=>[V("span",null,Z(e.currentLabel),1)])],34)),[[De,e.visible]])}var ml=Ae(gn,[["render",hn],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option.vue"]]);const yn=ze({name:"ElSelectDropdown",componentName:"ElSelectDropdown",setup(){const e=ke(Fe),l=X("select"),t=g(()=>e.props.popperClass),d=g(()=>e.props.multiple),s=g(()=>e.props.fitInputWidth),r=B("");function a(){var f;r.value=`${(f=e.selectWrapper)==null?void 0:f.offsetWidth}px`}return pl(()=>{a(),Ml(e.selectWrapper,a)}),{ns:l,minWidth:r,popperClass:t,isMultiple:d,isFitInputWidth:s}}});function Cn(e,l,t,d,s,r){return y(),$("div",{class:C([e.ns.b("dropdown"),e.ns.is("multiple",e.isMultiple),e.popperClass]),style:ie({[e.isFitInputWidth?"width":"minWidth"]:e.minWidth})},[re(e.$slots,"default")],6)}var Sn=Ae(yn,[["render",Cn],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select-dropdown.vue"]]);function On(e){const{t:l}=cl();return he({options:new Map,cachedOptions:new Map,createdLabel:null,createdSelected:!1,selected:e.multiple?[]:{},inputLength:20,inputWidth:0,optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,cachedPlaceHolder:"",currentPlaceholder:l("el.select.placeholder"),menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1,prefixWidth:11,tagInMultiLine:!1,mouseEnter:!1})}const wn=(e,l,t)=>{const{t:d}=cl(),s=X("select");_l({from:"suffixTransition",replacement:"override style scheme",version:"2.3.0",scope:"props",ref:"https://element-plus.org/en-US/component/select.html#select-attributes"},g(()=>e.suffixTransition===!1));const r=B(null),a=B(null),f=B(null),w=B(null),h=B(null),v=B(null),S=B(-1),m=hl({query:""}),c=hl(""),{form:i,formItem:b}=en(),O=g(()=>!e.filterable||e.multiple||!l.visible),L=g(()=>e.disabled||(i==null?void 0:i.disabled)),F=g(()=>{const n=e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length>0:e.modelValue!==void 0&&e.modelValue!==null&&e.modelValue!=="";return e.clearable&&!L.value&&l.inputHovering&&n}),ue=g(()=>e.remote&&e.filterable&&!e.remoteShowSuffix?"":e.suffixIcon),We=g(()=>s.is("reverse",ue.value&&l.visible&&e.suffixTransition)),ye=g(()=>e.remote?300:0),de=g(()=>e.loading?e.loadingText||d("el.select.loading"):e.remote&&l.query===""&&l.options.size===0?!1:e.filterable&&l.query&&l.options.size>0&&l.filteredOptionsCount===0?e.noMatchText||d("el.select.noMatch"):l.options.size===0?e.noDataText||d("el.select.noData"):null),M=g(()=>Array.from(l.options.values())),Ke=g(()=>Array.from(l.cachedOptions.values())),Ne=g(()=>{const n=M.value.filter(o=>!o.created).some(o=>o.currentLabel===l.query);return e.filterable&&e.allowCreate&&l.query!==""&&!n}),le=ln(),Re=g(()=>["small"].includes(le.value)?"small":"default"),He=g({get(){return l.visible&&de.value!==!1},set(n){l.visible=n}});A([()=>L.value,()=>le.value,()=>i==null?void 0:i.size],()=>{T(()=>{W()})}),A(()=>e.placeholder,n=>{l.cachedPlaceHolder=l.currentPlaceholder=n}),A(()=>e.modelValue,(n,o)=>{e.multiple&&(W(),n&&n.length>0||a.value&&l.query!==""?l.currentPlaceholder="":l.currentPlaceholder=l.cachedPlaceHolder,e.filterable&&!e.reserveKeyword&&(l.query="",R(l.query))),ce(),e.filterable&&!e.multiple&&(l.inputLength=20),!wl(n,o)&&e.validateEvent&&(b==null||b.validate("change").catch(u=>ql()))},{flush:"post",deep:!0}),A(()=>l.visible,n=>{var o,u,p;n?((u=(o=f.value)==null?void 0:o.updatePopper)==null||u.call(o),e.filterable&&(l.filteredOptionsCount=l.optionsCount,l.query=e.remote?"":l.selectedLabel,e.multiple?(p=a.value)==null||p.focus():l.selectedLabel&&(l.currentPlaceholder=`${l.selectedLabel}`,l.selectedLabel=""),R(l.query),!e.multiple&&!e.remote&&(m.value.query="",me(m),me(c)))):(e.filterable&&(te(e.filterMethod)&&e.filterMethod(""),te(e.remoteMethod)&&e.remoteMethod("")),a.value&&a.value.blur(),l.query="",l.previousQuery=null,l.selectedLabel="",l.inputLength=20,l.menuVisibleOnFocus=!1,je(),T(()=>{a.value&&a.value.value===""&&l.selected.length===0&&(l.currentPlaceholder=l.cachedPlaceHolder)}),e.multiple||(l.selected&&(e.filterable&&e.allowCreate&&l.createdSelected&&l.createdLabel?l.selectedLabel=l.createdLabel:l.selectedLabel=l.selected.currentLabel,e.filterable&&(l.query=l.selectedLabel)),e.filterable&&(l.currentPlaceholder=l.cachedPlaceHolder))),t.emit("visible-change",n)}),A(()=>l.options.entries(),()=>{var n,o,u;if(!Vl)return;(o=(n=f.value)==null?void 0:n.updatePopper)==null||o.call(n),e.multiple&&W();const p=((u=h.value)==null?void 0:u.querySelectorAll("input"))||[];Array.from(p).includes(document.activeElement)||ce(),e.defaultFirstOption&&(e.filterable||e.remote)&&l.filteredOptionsCount&&Se()},{flush:"post"}),A(()=>l.hoverIndex,n=>{nn(n)&&n>-1?S.value=M.value[n]||{}:S.value={},M.value.forEach(o=>{o.hover=S.value===o})});const W=()=>{e.collapseTags&&!e.filterable||T(()=>{var n,o;if(!r.value)return;const u=r.value.$el.querySelector("input"),p=w.value,I=vn(le.value||(i==null?void 0:i.size));u.style.height=`${(l.selected.length===0?I:Math.max(p?p.clientHeight+(p.clientHeight>I?6:0):0,I))-2}px`,l.tagInMultiLine=Number.parseFloat(u.style.height)>=I,l.visible&&de.value!==!1&&((o=(n=f.value)==null?void 0:n.updatePopper)==null||o.call(n))})},R=async n=>{if(!(l.previousQuery===n||l.isOnComposition)){if(l.previousQuery===null&&(te(e.filterMethod)||te(e.remoteMethod))){l.previousQuery=n;return}l.previousQuery=n,T(()=>{var o,u;l.visible&&((u=(o=f.value)==null?void 0:o.updatePopper)==null||u.call(o))}),l.hoverIndex=-1,e.multiple&&e.filterable&&T(()=>{const o=a.value.value.length*15+20;l.inputLength=e.collapseTags?Math.min(50,o):o,Ce(),W()}),e.remote&&te(e.remoteMethod)?(l.hoverIndex=-1,e.remoteMethod(n)):te(e.filterMethod)?(e.filterMethod(n),me(c)):(l.filteredOptionsCount=l.optionsCount,m.value.query=n,me(m),me(c)),e.defaultFirstOption&&(e.filterable||e.remote)&&l.filteredOptionsCount&&(await T(),Se())}},Ce=()=>{l.currentPlaceholder!==""&&(l.currentPlaceholder=a.value.value?"":l.cachedPlaceHolder)},Se=()=>{const n=M.value.filter(p=>p.visible&&!p.disabled&&!p.states.groupDisabled),o=n.find(p=>p.created),u=n[0];l.hoverIndex=fe(M.value,o||u)},ce=()=>{var n;if(e.multiple)l.selectedLabel="";else{const u=Oe(e.modelValue);(n=u.props)!=null&&n.created?(l.createdLabel=u.props.value,l.createdSelected=!0):l.createdSelected=!1,l.selectedLabel=u.currentLabel,l.selected=u,e.filterable&&(l.query=l.selectedLabel);return}const o=[];Array.isArray(e.modelValue)&&e.modelValue.forEach(u=>{o.push(Oe(u))}),l.selected=o,T(()=>{W()})},Oe=n=>{let o;const u=rl(n).toLowerCase()==="object",p=rl(n).toLowerCase()==="null",I=rl(n).toLowerCase()==="undefined";for(let N=l.cachedOptions.size-1;N>=0;N--){const k=Ke.value[N];if(u?q(k.value,e.valueKey)===q(n,e.valueKey):k.value===n){o={value:n,currentLabel:k.currentLabel,isDisabled:k.isDisabled};break}}if(o)return o;const Q=u?n.label:!p&&!I?n:"",G={value:n,currentLabel:Q};return e.multiple&&(G.hitState=!1),G},je=()=>{setTimeout(()=>{const n=e.valueKey;e.multiple?l.selected.length>0?l.hoverIndex=Math.min.apply(null,l.selected.map(o=>M.value.findIndex(u=>q(u,n)===q(o,n)))):l.hoverIndex=-1:l.hoverIndex=M.value.findIndex(o=>ve(o)===ve(l.selected))},300)},Qe=()=>{var n,o;Ge(),(o=(n=f.value)==null?void 0:n.updatePopper)==null||o.call(n),e.multiple&&!e.filterable&&W()},Ge=()=>{var n;l.inputWidth=(n=r.value)==null?void 0:n.$el.offsetWidth},Ue=()=>{e.filterable&&l.query!==l.selectedLabel&&(l.query=l.selectedLabel,R(l.query))},Ze=Ll(()=>{Ue()},ye.value),Je=Ll(n=>{R(n.target.value)},ye.value),Y=n=>{wl(e.modelValue,n)||t.emit($l,n)},Xe=n=>{if(n.target.value.length<=0&&!pe()){const o=e.modelValue.slice();o.pop(),t.emit(J,o),Y(o)}n.target.value.length===1&&e.modelValue.length===0&&(l.currentPlaceholder=l.cachedPlaceHolder)},Ye=(n,o)=>{const u=l.selected.indexOf(o);if(u>-1&&!L.value){const p=e.modelValue.slice();p.splice(u,1),t.emit(J,p),Y(p),t.emit("remove-tag",o.value)}n.stopPropagation()},x=n=>{n.stopPropagation();const o=e.multiple?[]:"";if(!vl(o))for(const u of l.selected)u.isDisabled&&o.push(u.value);t.emit(J,o),Y(o),l.hoverIndex=-1,l.visible=!1,t.emit("clear")},we=(n,o)=>{var u;if(e.multiple){const p=(e.modelValue||[]).slice(),I=fe(p,n.value);I>-1?p.splice(I,1):(e.multipleLimit<=0||p.length<e.multipleLimit)&&p.push(n.value),t.emit(J,p),Y(p),n.created&&(l.query="",R(""),l.inputLength=20),e.filterable&&((u=a.value)==null||u.focus())}else t.emit(J,n.value),Y(n.value),l.visible=!1;l.isSilentBlur=o,xe(),!l.visible&&T(()=>{H(n)})},fe=(n=[],o)=>{if(!Be(o))return n.indexOf(o);const u=e.valueKey;let p=-1;return n.some((I,Q)=>Ve(q(I,u))===q(o,u)?(p=Q,!0):!1),p},xe=()=>{l.softFocus=!0;const n=a.value||r.value;n&&(n==null||n.focus())},H=n=>{var o,u,p,I,Q;const G=Array.isArray(n)?n[0]:n;let N=null;if(G!=null&&G.value){const k=M.value.filter(Me=>Me.value===G.value);k.length>0&&(N=k[0].$el)}if(f.value&&N){const k=(I=(p=(u=(o=f.value)==null?void 0:o.popperRef)==null?void 0:u.contentRef)==null?void 0:p.querySelector)==null?void 0:I.call(p,`.${s.be("dropdown","wrap")}`);k&&Al(k,N)}(Q=v.value)==null||Q.handleScroll()},_e=n=>{l.optionsCount++,l.filteredOptionsCount++,l.options.set(n.value,n),l.cachedOptions.set(n.value,n)},el=(n,o)=>{l.options.get(n)===o&&(l.optionsCount--,l.filteredOptionsCount--,l.options.delete(n))},ll=n=>{n.code!==Fl.backspace&&pe(!1),l.inputLength=a.value.value.length*15+20,W()},pe=n=>{if(!Array.isArray(l.selected))return;const o=l.selected[l.selected.length-1];if(o)return n===!0||n===!1?(o.hitState=n,n):(o.hitState=!o.hitState,o.hitState)},nl=n=>{const o=n.target.value;if(n.type==="compositionend")l.isOnComposition=!1,T(()=>R(o));else{const u=o[o.length-1]||"";l.isOnComposition=!Wl(u)}},tl=()=>{T(()=>H(l.selected))},j=n=>{l.softFocus?l.softFocus=!1:((e.automaticDropdown||e.filterable)&&(e.filterable&&!l.visible&&(l.menuVisibleOnFocus=!0),l.visible=!0),t.emit("focus",n))},Le=()=>{var n;l.visible=!1,(n=r.value)==null||n.blur()},ol=n=>{T(()=>{l.isSilentBlur?l.isSilentBlur=!1:t.emit("blur",n)}),l.softFocus=!1},Ie=n=>{x(n)},il=()=>{l.visible=!1},al=n=>{l.visible&&(n.preventDefault(),n.stopPropagation(),l.visible=!1)},Ee=n=>{var o;n&&!l.mouseEnter||L.value||(l.menuVisibleOnFocus?l.menuVisibleOnFocus=!1:(!f.value||!f.value.isFocusInsideContent())&&(l.visible=!l.visible),l.visible&&((o=a.value||r.value)==null||o.focus()))},Te=()=>{l.visible?M.value[l.hoverIndex]&&we(M.value[l.hoverIndex],void 0):Ee()},ve=n=>Be(n.value)?q(n.value,e.valueKey):n.value,sl=g(()=>M.value.filter(n=>n.visible).every(n=>n.disabled)),ne=n=>{if(!l.visible){l.visible=!0;return}if(!(l.options.size===0||l.filteredOptionsCount===0)&&!l.isOnComposition&&!sl.value){n==="next"?(l.hoverIndex++,l.hoverIndex===l.options.size&&(l.hoverIndex=0)):n==="prev"&&(l.hoverIndex--,l.hoverIndex<0&&(l.hoverIndex=l.options.size-1));const o=M.value[l.hoverIndex];(o.disabled===!0||o.states.groupDisabled===!0||!o.visible)&&ne(n),T(()=>H(S.value))}};return{optionsArray:M,selectSize:le,handleResize:Qe,debouncedOnInputChange:Ze,debouncedQueryChange:Je,deletePrevTag:Xe,deleteTag:Ye,deleteSelected:x,handleOptionSelect:we,scrollToOption:H,readonly:O,resetInputHeight:W,showClose:F,iconComponent:ue,iconReverse:We,showNewOption:Ne,collapseTagSize:Re,setSelected:ce,managePlaceholder:Ce,selectDisabled:L,emptyText:de,toggleLastOptionHitState:pe,resetInputState:ll,handleComposition:nl,onOptionCreate:_e,onOptionDestroy:el,handleMenuEnter:tl,handleFocus:j,blur:Le,handleBlur:ol,handleClearClick:Ie,handleClose:il,handleKeydownEscape:al,toggleMenu:Ee,selectOption:Te,getValueKey:ve,navigateOptions:ne,dropMenuVisible:He,queryChange:m,groupQueryChange:c,reference:r,input:a,tooltipRef:f,tags:w,selectWrapper:h,scrollbar:v,handleMouseEnter:()=>{l.mouseEnter=!0},handleMouseLeave:()=>{l.mouseEnter=!1}}},Il="ElSelect",Ln=ze({name:Il,componentName:Il,components:{ElInput:Kl,ElSelectMenu:Sn,ElOption:ml,ElTag:Jl,ElScrollbar:Ql,ElTooltip:Gl,ElIcon:tn},directives:{ClickOutside:pn},props:{name:String,id:String,modelValue:{type:[Array,String,Number,Boolean,Object],default:void 0},autocomplete:{type:String,default:"off"},automaticDropdown:Boolean,size:{type:String,validator:Nl},effect:{type:String,default:"light"},disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:{type:String,default:""},remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String},defaultFirstOption:Boolean,reserveKeyword:{type:Boolean,default:!0},valueKey:{type:String,default:"value"},collapseTags:Boolean,collapseTagsTooltip:{type:Boolean,default:!1},teleported:Ul.teleported,persistent:{type:Boolean,default:!0},clearIcon:{type:yl,default:on},fitInputWidth:{type:Boolean,default:!1},suffixIcon:{type:yl,default:an},tagType:{...Xl.type,default:"info"},validateEvent:{type:Boolean,default:!0},remoteShowSuffix:{type:Boolean,default:!1},suffixTransition:{type:Boolean,default:!0},placement:{type:String,values:Zl,default:"bottom-start"}},emits:[J,$l,"remove-tag","clear","visible-change","focus","blur"],setup(e,l){const t=X("select"),d=X("input"),{t:s}=cl(),r=On(e),{optionsArray:a,selectSize:f,readonly:w,handleResize:h,collapseTagSize:v,debouncedOnInputChange:S,debouncedQueryChange:m,deletePrevTag:c,deleteTag:i,deleteSelected:b,handleOptionSelect:O,scrollToOption:L,setSelected:F,resetInputHeight:ue,managePlaceholder:We,showClose:ye,selectDisabled:de,iconComponent:M,iconReverse:Ke,showNewOption:Ne,emptyText:le,toggleLastOptionHitState:Re,resetInputState:He,handleComposition:W,onOptionCreate:R,onOptionDestroy:Ce,handleMenuEnter:Se,handleFocus:ce,blur:Oe,handleBlur:je,handleClearClick:Qe,handleClose:Ge,handleKeydownEscape:Ue,toggleMenu:Ze,selectOption:Je,getValueKey:Y,navigateOptions:Xe,dropMenuVisible:Ye,reference:x,input:we,tooltipRef:fe,tags:xe,selectWrapper:H,scrollbar:_e,queryChange:el,groupQueryChange:ll,handleMouseEnter:pe,handleMouseLeave:nl}=wn(e,r,l),{focus:tl}=mn(x),{inputWidth:j,selected:Le,inputLength:ol,filteredOptionsCount:Ie,visible:il,softFocus:al,selectedLabel:Ee,hoverIndex:Te,query:ve,inputHovering:sl,currentPlaceholder:ne,menuVisibleOnFocus:bl,isOnComposition:gl,isSilentBlur:n,options:o,cachedOptions:u,optionsCount:p,prefixWidth:I,tagInMultiLine:Q}=qe(r),G=g(()=>{const P=[t.b()],_=oe(f);return _&&P.push(t.m(_)),e.disabled&&P.push(t.m("disabled")),P}),N=g(()=>({maxWidth:`${oe(j)-32}px`,width:"100%"})),k=g(()=>({maxWidth:`${oe(j)>123?oe(j)-123:oe(j)-75}px`}));Bl(Fe,he({props:e,options:o,optionsArray:a,cachedOptions:u,optionsCount:p,filteredOptionsCount:Ie,hoverIndex:Te,handleOptionSelect:O,onOptionCreate:R,onOptionDestroy:Ce,selectWrapper:H,selected:Le,setSelected:F,queryChange:el,groupQueryChange:ll})),pl(()=>{r.cachedPlaceHolder=ne.value=e.placeholder||s("el.select.placeholder"),e.multiple&&Array.isArray(e.modelValue)&&e.modelValue.length>0&&(ne.value=""),Ml(H,h),e.remote&&e.multiple&&ue(),T(()=>{const P=x.value&&x.value.$el;if(P&&(j.value=P.getBoundingClientRect().width,l.slots.prefix)){const _=P.querySelector(`.${d.e("prefix")}`);I.value=Math.max(_.getBoundingClientRect().width+5,30)}}),F()}),e.multiple&&!Array.isArray(e.modelValue)&&l.emit(J,[]),!e.multiple&&Array.isArray(e.modelValue)&&l.emit(J,"");const Me=g(()=>{var P,_;return(_=(P=fe.value)==null?void 0:P.popperRef)==null?void 0:_.contentRef});return{tagInMultiLine:Q,prefixWidth:I,selectSize:f,readonly:w,handleResize:h,collapseTagSize:v,debouncedOnInputChange:S,debouncedQueryChange:m,deletePrevTag:c,deleteTag:i,deleteSelected:b,handleOptionSelect:O,scrollToOption:L,inputWidth:j,selected:Le,inputLength:ol,filteredOptionsCount:Ie,visible:il,softFocus:al,selectedLabel:Ee,hoverIndex:Te,query:ve,inputHovering:sl,currentPlaceholder:ne,menuVisibleOnFocus:bl,isOnComposition:gl,isSilentBlur:n,options:o,resetInputHeight:ue,managePlaceholder:We,showClose:ye,selectDisabled:de,iconComponent:M,iconReverse:Ke,showNewOption:Ne,emptyText:le,toggleLastOptionHitState:Re,resetInputState:He,handleComposition:W,handleMenuEnter:Se,handleFocus:ce,blur:Oe,handleBlur:je,handleClearClick:Qe,handleClose:Ge,handleKeydownEscape:Ue,toggleMenu:Ze,selectOption:Je,getValueKey:Y,navigateOptions:Xe,dropMenuVisible:Ye,focus:tl,reference:x,input:we,tooltipRef:fe,popperPaneRef:Me,tags:xe,selectWrapper:H,scrollbar:_e,wrapperKls:G,selectTagsStyle:N,nsSelect:t,tagTextStyle:k,handleMouseEnter:pe,handleMouseLeave:nl}}}),In=["disabled","autocomplete"],En={style:{height:"100%",display:"flex","justify-content":"center","align-items":"center"}};function Tn(e,l,t,d,s,r){const a=ee("el-tag"),f=ee("el-tooltip"),w=ee("el-icon"),h=ee("el-input"),v=ee("el-option"),S=ee("el-scrollbar"),m=ee("el-select-menu"),c=sn("click-outside");return se((y(),$("div",{ref:"selectWrapper",class:C(e.wrapperKls),onMouseenter:l[22]||(l[22]=(...i)=>e.handleMouseEnter&&e.handleMouseEnter(...i)),onMouseleave:l[23]||(l[23]=(...i)=>e.handleMouseLeave&&e.handleMouseLeave(...i)),onClick:l[24]||(l[24]=U((...i)=>e.toggleMenu&&e.toggleMenu(...i),["stop"]))},[ae(f,{ref:"tooltipRef",visible:e.dropMenuVisible,placement:e.placement,teleported:e.teleported,"popper-class":[e.nsSelect.e("popper"),e.popperClass],"fallback-placements":["bottom-start","top-start","right","left"],effect:e.effect,pure:"",trigger:"click",transition:`${e.nsSelect.namespace.value}-zoom-in-top`,"stop-popper-mouse-event":!1,"gpu-acceleration":!1,persistent:e.persistent,onShow:e.handleMenuEnter},{default:E(()=>[V("div",{class:"select-trigger",onMouseenter:l[20]||(l[20]=i=>e.inputHovering=!0),onMouseleave:l[21]||(l[21]=i=>e.inputHovering=!1)},[e.multiple?(y(),$("div",{key:0,ref:"tags",class:C(e.nsSelect.e("tags")),style:ie(e.selectTagsStyle)},[e.collapseTags&&e.selected.length?(y(),$("span",{key:0,class:C([e.nsSelect.b("tags-wrapper"),{"has-prefix":e.prefixWidth&&e.selected.length}])},[ae(a,{closable:!e.selectDisabled&&!e.selected[0].isDisabled,size:e.collapseTagSize,hit:e.selected[0].hitState,type:e.tagType,"disable-transitions":"",onClose:l[0]||(l[0]=i=>e.deleteTag(i,e.selected[0]))},{default:E(()=>[V("span",{class:C(e.nsSelect.e("tags-text")),style:ie(e.tagTextStyle)},Z(e.selected[0].currentLabel),7)]),_:1},8,["closable","size","hit","type"]),e.selected.length>1?(y(),K(a,{key:0,closable:!1,size:e.collapseTagSize,type:e.tagType,"disable-transitions":""},{default:E(()=>[e.collapseTagsTooltip?(y(),K(f,{key:0,disabled:e.dropMenuVisible,"fallback-placements":["bottom","top","right","left"],effect:e.effect,placement:"bottom",teleported:e.teleported},{default:E(()=>[V("span",{class:C(e.nsSelect.e("tags-text"))},"+ "+Z(e.selected.length-1),3)]),content:E(()=>[V("div",{class:C(e.nsSelect.e("collapse-tags"))},[(y(!0),$(ul,null,Cl(e.selected.slice(1),(i,b)=>(y(),$("div",{key:b,class:C(e.nsSelect.e("collapse-tag"))},[(y(),K(a,{key:e.getValueKey(i),class:"in-tooltip",closable:!e.selectDisabled&&!i.isDisabled,size:e.collapseTagSize,hit:i.hitState,type:e.tagType,"disable-transitions":"",style:{margin:"2px"},onClose:O=>e.deleteTag(O,i)},{default:E(()=>[V("span",{class:C(e.nsSelect.e("tags-text")),style:ie({maxWidth:e.inputWidth-75+"px"})},Z(i.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))],2))),128))],2)]),_:1},8,["disabled","effect","teleported"])):(y(),$("span",{key:1,class:C(e.nsSelect.e("tags-text"))},"+ "+Z(e.selected.length-1),3))]),_:1},8,["size","type"])):z("v-if",!0)],2)):z("v-if",!0),z(" <div> "),e.collapseTags?z("v-if",!0):(y(),K(kl,{key:1,onAfterLeave:e.resetInputHeight},{default:E(()=>[V("span",{class:C([e.nsSelect.b("tags-wrapper"),{"has-prefix":e.prefixWidth&&e.selected.length}])},[(y(!0),$(ul,null,Cl(e.selected,i=>(y(),K(a,{key:e.getValueKey(i),closable:!e.selectDisabled&&!i.isDisabled,size:e.collapseTagSize,hit:i.hitState,type:e.tagType,"disable-transitions":"",onClose:b=>e.deleteTag(b,i)},{default:E(()=>[V("span",{class:C(e.nsSelect.e("tags-text")),style:ie({maxWidth:e.inputWidth-75+"px"})},Z(i.currentLabel),7)]),_:2},1032,["closable","size","hit","type","onClose"]))),128))],2)]),_:1},8,["onAfterLeave"])),z(" </div> "),e.filterable?se((y(),$("input",{key:2,ref:"input","onUpdate:modelValue":l[1]||(l[1]=i=>e.query=i),type:"text",class:C([e.nsSelect.e("input"),e.nsSelect.is(e.selectSize)]),disabled:e.selectDisabled,autocomplete:e.autocomplete,style:ie({marginLeft:e.prefixWidth&&!e.selected.length||e.tagInMultiLine?`${e.prefixWidth}px`:"",flexGrow:1,width:`${e.inputLength/(e.inputWidth-32)}%`,maxWidth:`${e.inputWidth-42}px`}),onFocus:l[2]||(l[2]=(...i)=>e.handleFocus&&e.handleFocus(...i)),onBlur:l[3]||(l[3]=(...i)=>e.handleBlur&&e.handleBlur(...i)),onKeyup:l[4]||(l[4]=(...i)=>e.managePlaceholder&&e.managePlaceholder(...i)),onKeydown:[l[5]||(l[5]=(...i)=>e.resetInputState&&e.resetInputState(...i)),l[6]||(l[6]=D(U(i=>e.navigateOptions("next"),["prevent"]),["down"])),l[7]||(l[7]=D(U(i=>e.navigateOptions("prev"),["prevent"]),["up"])),l[8]||(l[8]=D((...i)=>e.handleKeydownEscape&&e.handleKeydownEscape(...i),["esc"])),l[9]||(l[9]=D(U((...i)=>e.selectOption&&e.selectOption(...i),["stop","prevent"]),["enter"])),l[10]||(l[10]=D((...i)=>e.deletePrevTag&&e.deletePrevTag(...i),["delete"])),l[11]||(l[11]=D(i=>e.visible=!1,["tab"]))],onCompositionstart:l[12]||(l[12]=(...i)=>e.handleComposition&&e.handleComposition(...i)),onCompositionupdate:l[13]||(l[13]=(...i)=>e.handleComposition&&e.handleComposition(...i)),onCompositionend:l[14]||(l[14]=(...i)=>e.handleComposition&&e.handleComposition(...i)),onInput:l[15]||(l[15]=(...i)=>e.debouncedQueryChange&&e.debouncedQueryChange(...i))},null,46,In)),[[Rl,e.query]]):z("v-if",!0)],6)):z("v-if",!0),ae(h,{id:e.id,ref:"reference",modelValue:e.selectedLabel,"onUpdate:modelValue":l[16]||(l[16]=i=>e.selectedLabel=i),type:"text",placeholder:e.currentPlaceholder,name:e.name,autocomplete:e.autocomplete,size:e.selectSize,disabled:e.selectDisabled,readonly:e.readonly,"validate-event":!1,class:C([e.nsSelect.is("focus",e.visible)]),tabindex:e.multiple&&e.filterable?-1:void 0,onFocus:e.handleFocus,onBlur:e.handleBlur,onInput:e.debouncedOnInputChange,onPaste:e.debouncedOnInputChange,onCompositionstart:e.handleComposition,onCompositionupdate:e.handleComposition,onCompositionend:e.handleComposition,onKeydown:[l[17]||(l[17]=D(U(i=>e.navigateOptions("next"),["stop","prevent"]),["down"])),l[18]||(l[18]=D(U(i=>e.navigateOptions("prev"),["stop","prevent"]),["up"])),D(U(e.selectOption,["stop","prevent"]),["enter"]),D(e.handleKeydownEscape,["esc"]),l[19]||(l[19]=D(i=>e.visible=!1,["tab"]))]},rn({suffix:E(()=>[e.iconComponent&&!e.showClose?(y(),K(w,{key:0,class:C([e.nsSelect.e("caret"),e.nsSelect.e("icon"),e.iconReverse])},{default:E(()=>[(y(),K(Sl(e.iconComponent)))]),_:1},8,["class"])):z("v-if",!0),e.showClose&&e.clearIcon?(y(),K(w,{key:1,class:C([e.nsSelect.e("caret"),e.nsSelect.e("icon")]),onClick:e.handleClearClick},{default:E(()=>[(y(),K(Sl(e.clearIcon)))]),_:1},8,["class","onClick"])):z("v-if",!0)]),_:2},[e.$slots.prefix?{name:"prefix",fn:E(()=>[V("div",En,[re(e.$slots,"prefix")])])}:void 0]),1032,["id","modelValue","placeholder","name","autocomplete","size","disabled","readonly","class","tabindex","onFocus","onBlur","onInput","onPaste","onCompositionstart","onCompositionupdate","onCompositionend","onKeydown"])],32)]),content:E(()=>[ae(m,null,{default:E(()=>[se(ae(S,{ref:"scrollbar",tag:"ul","wrap-class":e.nsSelect.be("dropdown","wrap"),"view-class":e.nsSelect.be("dropdown","list"),class:C([e.nsSelect.is("empty",!e.allowCreate&&Boolean(e.query)&&e.filteredOptionsCount===0)])},{default:E(()=>[e.showNewOption?(y(),K(v,{key:0,value:e.query,created:!0},null,8,["value"])):z("v-if",!0),re(e.$slots,"default")]),_:3},8,["wrap-class","view-class","class"]),[[De,e.options.size>0&&!e.loading]]),e.emptyText&&(!e.allowCreate||e.loading||e.allowCreate&&e.options.size===0)?(y(),$(ul,{key:0},[e.$slots.empty?re(e.$slots,"empty",{key:0}):(y(),$("p",{key:1,class:C(e.nsSelect.be("dropdown","empty"))},Z(e.emptyText),3))],64)):z("v-if",!0)]),_:3})]),_:3},8,["visible","placement","teleported","popper-class","effect","transition","persistent","onShow"])],34)),[[c,e.handleClose,e.popperPaneRef]])}var Mn=Ae(Ln,[["render",Tn],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/select.vue"]]);const $n=ze({name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},setup(e){const l=X("select"),t=B(!0),d=fl(),s=B([]);Bl(Dl,he({...qe(e)}));const r=ke(Fe);pl(()=>{s.value=a(d.subTree)});const a=w=>{const h=[];return Array.isArray(w.children)&&w.children.forEach(v=>{var S;v.type&&v.type.name==="ElOption"&&v.component&&v.component.proxy?h.push(v.component.proxy):(S=v.children)!=null&&S.length&&h.push(...a(v))}),h},{groupQueryChange:f}=Ve(r);return A(f,()=>{t.value=s.value.some(w=>w.visible===!0)},{flush:"post"}),{visible:t,ns:l}}});function kn(e,l,t,d,s,r){return se((y(),$("ul",{class:C(e.ns.be("group","wrap"))},[V("li",{class:C(e.ns.be("group","title"))},Z(e.label),3),V("li",null,[V("ul",{class:C(e.ns.b("group"))},[re(e.$slots,"default")],2)])],2)),[[De,e.visible]])}var zl=Ae($n,[["render",kn],["__file","/home/runner/work/element-plus/element-plus/packages/components/select/src/option-group.vue"]]);const Hn=un(Mn,{Option:ml,OptionGroup:zl}),jn=Pl(ml),Qn=Pl(zl);function Vn(e){let l;const t=X("loading"),d=B(!1),s=he({...e,originalPosition:"",originalOverflow:"",visible:!1});function r(c){s.text=c}function a(){const c=s.parent;if(!c.vLoadingAddClassList){let i=c.getAttribute("loading-number");i=Number.parseInt(i)-1,i?c.setAttribute("loading-number",i.toString()):(Pe(c,t.bm("parent","relative")),c.removeAttribute("loading-number")),Pe(c,t.bm("parent","hidden"))}f(),S.unmount()}function f(){var c,i;(i=(c=m.$el)==null?void 0:c.parentNode)==null||i.removeChild(m.$el)}function w(){var c;e.beforeClose&&!e.beforeClose()||(d.value=!0,clearTimeout(l),l=window.setTimeout(h,400),s.visible=!1,(c=e.closed)==null||c.call(e))}function h(){if(!d.value)return;const c=s.parent;d.value=!1,c.vLoadingAddClassList=void 0,a()}const S=Hl({name:"ElLoading",setup(){return()=>{const c=s.spinner||s.svg,i=be("svg",{class:"circular",viewBox:s.svgViewBox?s.svgViewBox:"0 0 50 50",...c?{innerHTML:c}:{}},[be("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})]),b=s.text?be("p",{class:t.b("text")},[s.text]):void 0;return be(kl,{name:t.b("fade"),onAfterLeave:h},{default:E(()=>[se(ae("div",{style:{backgroundColor:s.background||""},class:[t.b("mask"),s.customClass,s.fullscreen?"is-fullscreen":""]},[be("div",{class:t.b("spinner")},[i,b])]),[[De,s.visible]])])})}}}),m=S.mount(document.createElement("div"));return{...qe(s),setText:r,removeElLoadingChild:f,close:w,handleAfterLeave:h,vm:m,get $el(){return m.$el}}}let $e;const Bn=function(e={}){if(!Vl)return;const l=Pn(e);if(l.fullscreen&&$e)return $e;const t=Vn({...l,closed:()=>{var s;(s=l.closed)==null||s.call(l),l.fullscreen&&($e=void 0)}});Dn(l,l.parent,t),El(l,l.parent,t),l.parent.vLoadingAddClassList=()=>El(l,l.parent,t);let d=l.parent.getAttribute("loading-number");return d?d=`${Number.parseInt(d)+1}`:d="1",l.parent.setAttribute("loading-number",d),l.parent.appendChild(t.$el),T(()=>t.visible.value=l.visible),l.fullscreen&&($e=t),t},Pn=e=>{var l,t,d,s;let r;return vl(e.target)?r=(l=document.querySelector(e.target))!=null?l:document.body:r=e.target||document.body,{parent:r===document.body||e.body?document.body:r,background:e.background||"",svg:e.svg||"",svgViewBox:e.svgViewBox||"",spinner:e.spinner||!1,text:e.text||"",fullscreen:r===document.body&&((t=e.fullscreen)!=null?t:!0),lock:(d=e.lock)!=null?d:!1,customClass:e.customClass||"",visible:(s=e.visible)!=null?s:!0,target:r}},Dn=async(e,l,t)=>{const{nextZIndex:d}=jl(),s={};if(e.fullscreen)t.originalPosition.value=ge(document.body,"position"),t.originalOverflow.value=ge(document.body,"overflow"),s.zIndex=d();else if(e.parent===document.body){t.originalPosition.value=ge(document.body,"position"),await T();for(const r of["top","left"]){const a=r==="top"?"scrollTop":"scrollLeft";s[r]=`${e.target.getBoundingClientRect()[r]+document.body[a]+document.documentElement[a]-Number.parseInt(ge(document.body,`margin-${r}`),10)}px`}for(const r of["height","width"])s[r]=`${e.target.getBoundingClientRect()[r]}px`}else t.originalPosition.value=ge(l,"position");for(const[r,a]of Object.entries(s))t.$el.style[r]=a},El=(e,l,t)=>{const d=X("loading");["absolute","fixed","sticky"].includes(t.originalPosition.value)?Pe(l,d.bm("parent","relative")):Ol(l,d.bm("parent","relative")),e.fullscreen&&e.lock?Ol(l,d.bm("parent","hidden")):Pe(l,d.bm("parent","hidden"))},dl=Symbol("ElLoading"),Tl=(e,l)=>{var t,d,s,r;const a=l.instance,f=m=>Be(l.value)?l.value[m]:void 0,w=m=>{const c=vl(m)&&(a==null?void 0:a[m])||m;return c&&B(c)},h=m=>w(f(m)||e.getAttribute(`element-loading-${cn(m)}`)),v=(t=f("fullscreen"))!=null?t:l.modifiers.fullscreen,S={text:h("text"),svg:h("svg"),svgViewBox:h("svgViewBox"),spinner:h("spinner"),background:h("background"),customClass:h("customClass"),fullscreen:v,target:(d=f("target"))!=null?d:v?void 0:e,body:(s=f("body"))!=null?s:l.modifiers.body,lock:(r=f("lock"))!=null?r:l.modifiers.lock};e[dl]={options:S,instance:Bn(S)}},zn=(e,l)=>{for(const t of Object.keys(l))dn(l[t])&&(l[t].value=e[t])},Gn={mounted(e,l){l.value&&Tl(e,l)},updated(e,l){const t=e[dl];l.oldValue!==l.value&&(l.value&&!l.oldValue?Tl(e,l):l.value&&l.oldValue?Be(l.value)&&zn(l.value,t.options):t==null||t.instance.close())},unmounted(e){var l;(l=e[dl])==null||l.instance.close()}};export{Hn as E,Bn as L,jn as a,Qn as b,Fe as s,Gn as v};
