/* empty css             *//* empty css                  */import{_ as P}from"./formDrawer-615cee08.js";/* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                *//* empty css                      *//* empty css               *//* empty css                   *//* empty css                        *//* empty css                    *//* empty css                   *//* empty css                  *//* empty css                  */import{b as _,E as z}from"./index-7aff1b23.js";import{u as q,a as G}from"./useCommon-3fca7f65.js";import{t as K}from"./tableHeader-f66fb168.js";import{_ as M}from"./_plugin-vue_export-helper-c27b6911.js";import{v as O}from"./directive-7bc345b5.js";import{a as j,E as A}from"./index-4bd039ef.js";import{E as J}from"./index-d4c13dda.js";import{o as Q,m as y,n as W,K as e,C as l,u as t,D as X,B as Y,q as r,I as Z,H as u,a7 as ee,cG as te,cH as oe}from"./index-d45ed081.js";import{E as le}from"./index-c440b37e.js";import{E as ae}from"./index-61f461ba.js";import{E as ne}from"./msgTip-a00a6396.js";import{a as se,E as re}from"./index-ae57328d.js";import"./index-1cb0abaf.js";import"./js.cookie-cf83ad76.js";/* empty css                */import"./index-6998b886.js";import"./index-151d4a8e.js";import"./strings-5238cde9.js";import"./index-184e15d9.js";import"./_initCloneObject-4b55852b.js";import"./index-b06f2c24.js";const ie=a=>_({url:`/user_level/${a}`,method:"get"}),me=a=>_({url:"/user_level",method:"post",data:a}),de=(a,i)=>_({url:`/user_level/${a}`,method:"post",data:i}),pe=(a,i)=>_({url:`/user_level/${a}/update_status`,method:"post",data:{status:i}}),ue=a=>_({url:`/user_level/${a}/delete`,method:"post"});const c=a=>(te("data-v-88a6a6f7"),a=a(),oe(),a),_e={style:{display:"flex","flex-direction":"column"}},ce={style:{display:"flex"}},fe=c(()=>r("small",{style:{"margin-right":"5px"}},"累计消费满",-1)),he=c(()=>r("small",{style:{color:"#999"}},"设置会员等级所需要的累计消费必须大于等于0,单位：元",-1)),ve={style:{display:"flex","flex-direction":"column"}},ge={style:{display:"flex"}},ye=c(()=>r("small",{style:{"margin-right":"5px"}},"累计次数满",-1)),be=c(()=>r("small",{style:{color:"#999"}},"设置会员等级所需要的购买量必须大于等于0,单位：笔",-1)),xe=c(()=>r("small",{style:{color:"#999"}},"折扣率单位为百分比，如输入90，表示该会员等级的用户可以以商品原价的90%购买",-1)),we={__name:"list",setup(a){const{loading:i,tableData:b,total:x,changePage:w,getData:f,handleDel:V,handleChange:E}=q({del:ue,getList:ie,changeStatus:pe}),{formDrawerRef:C,formRef:k,isEdit:S,Form:n,handleCreate:I,handleEdit:D,onSubmit:L}=G({Form:{name:"",level:0,status:1,discount:0,max_price:0,max_times:0},getData:f,add:me,edit:de});return Q(()=>{f()}),(B,s)=>{const m=j,v=J,g=ee,R=le,U=A,$=ae,F=z,d=ne,p=se,T=re,H=P,N=O;return y(),W("div",null,[e(F,{shadow:"always"},{default:l(()=>[e(K,{onCreate:t(I),onRefresh:t(f)},null,8,["onCreate","onRefresh"]),X((y(),Y(U,{"max-height":"480px",data:t(b),stripe:"",style:{width:"100%"}},{default:l(()=>[e(m,{align:"center",prop:"name",label:"会员等级",width:"220"}),e(m,{align:"center",prop:"content",label:"折扣率",width:"240"},{default:l(({row:o})=>[r("span",null,Z(o.discount)+"%",1)]),_:1}),e(m,{align:"center",prop:"level",label:"等级序号",width:"400"}),e(m,{label:"状态",width:"120"},{default:l(({row:o})=>[e(v,{disabled:o.super==1,onChange:h=>t(E)(h,o),"model-value":o.status,"active-value":1,"inactive-value":0,"active-color":"#4339ca"},null,8,["disabled","onChange","model-value"])]),_:1}),e(m,{fixed:"right",label:"操作",width:"auto",align:"center"},{default:l(o=>[e(g,{link:"",type:"primary",size:"small",onClick:h=>t(D)(o.row)},{default:l(()=>[u("编辑")]),_:2},1032,["onClick"]),e(R,{title:"确认删除吗?","confirm-button-text":"确定","cancel-button-text":"取消",onConfirm:h=>t(V)(o.row.id)},{reference:l(()=>[e(g,{link:"",type:"primary",size:"small"},{default:l(()=>[u("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[N,t(i)]]),e($,{small:"",background:"",layout:"prev, pager, next",total:t(x),onCurrentChange:t(w)},null,8,["total","onCurrentChange"])]),_:1}),e(H,{ref_key:"formDrawerRef",ref:C,title:t(S)?"编辑公告":"新增公告","confirm-text":"提交",destroyOnClose:"",onSubmit:t(L)},{default:l(()=>[e(T,{rules:B.rules,ref_key:"formRef",ref:k,model:t(n),"status-icon":"","label-width":"auto"},{default:l(()=>[e(p,{label:"等级名称",prop:"title"},{default:l(()=>[e(d,{modelValue:t(n).name,"onUpdate:modelValue":s[0]||(s[0]=o=>t(n).name=o),placeholder:"等级名称"},null,8,["modelValue"])]),_:1}),e(p,{label:"等级权重",prop:"content"},{default:l(()=>[e(d,{modelValue:t(n).level,"onUpdate:modelValue":s[1]||(s[1]=o=>t(n).level=o),rows:5,placeholder:"等级权重"},null,8,["modelValue"])]),_:1}),e(p,{label:"是否启用"},{default:l(()=>[e(v,{modelValue:t(n).status,"onUpdate:modelValue":s[2]||(s[2]=o=>t(n).status=o),"active-value":1,"inactive-value":0,"active-color":"#4339ca"},null,8,["modelValue"])]),_:1}),e(p,{label:"升级条件"},{default:l(()=>[r("div",_e,[r("div",ce,[fe,e(d,{type:"number",style:{width:"40%"},modelValue:t(n).max_price,"onUpdate:modelValue":s[3]||(s[3]=o=>t(n).max_price=o),"controls-position":"right"},{append:l(()=>[u("元")]),_:1},8,["modelValue"])]),he]),r("div",ve,[r("div",ge,[ye,e(d,{type:"number",style:{width:"40%"},modelValue:t(n).max_times,"onUpdate:modelValue":s[4]||(s[4]=o=>t(n).max_times=o),"controls-position":"right"},{append:l(()=>[u("次")]),_:1},8,["modelValue"])]),be])]),_:1}),e(p,{label:"折扣率"},{default:l(()=>[e(d,{type:"number",style:{width:"40%"},modelValue:t(n).discount,"onUpdate:modelValue":s[5]||(s[5]=o=>t(n).discount=o),"controls-position":"right",placeholder:"折扣率"},{append:l(()=>[u("%")]),_:1},8,["modelValue"]),xe]),_:1})]),_:1},8,["rules","model"])]),_:1},8,["title","onSubmit"])])}}},nt=M(we,[["__scopeId","data-v-88a6a6f7"]]);export{nt as default};
