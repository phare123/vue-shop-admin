/* empty css             *//* empty css                  */import{_ as Q}from"./formDrawer-615cee08.js";/* empty css                *//* empty css                 *//* empty css               *//* empty css                   *//* empty css                        */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                      *//* empty css                        *//* empty css                    *//* empty css                   *//* empty css                  *//* empty css                  *//* empty css                  */import{e as W,v as X,E as Y}from"./msgTip-a00a6396.js";import{b as p,E as Z}from"./index-7aff1b23.js";import{q as ee}from"./queryParams-4c57c9da.js";import{S as te}from"./selectImg-a97347d8.js";import{u as ae,a as oe}from"./useCommon-3fca7f65.js";import{t as le}from"./tableHeader-f66fb168.js";import{_ as re}from"./_plugin-vue_export-helper-c27b6911.js";import{v as ne,a as se,E as ie}from"./directive-7bc345b5.js";import{E as me}from"./index-4c63a36d.js";import{a as de,E as pe}from"./index-4bd039ef.js";import{E as ue}from"./index-d4c13dda.js";import{r as ce,o as _e,m as _,n as x,K as t,C as o,q as i,u as a,D as V,B as k,I as g,H as S,J as fe,R as ve,a7 as he}from"./index-d45ed081.js";import{E as ge}from"./index-c440b37e.js";import{E as be}from"./index-61f461ba.js";import{a as Ee,E as Ce}from"./index-ae57328d.js";import{E as we}from"./index-d6a34864.js";import"./index-1cb0abaf.js";import"./js.cookie-cf83ad76.js";/* empty css                  *//* empty css                *//* empty css                */import"./imageMain-c67a0093.js";/* empty css                        */import"./index-6998b886.js";import"./index-f79087c0.js";import"./index-226dc19b.js";import"./index-ebc90b42.js";/* empty css               */import"./index-184e15d9.js";import"./_initCloneObject-4b55852b.js";import"./index-90167cc1.js";import"./index-30c8e164.js";import"./index-fcefa1a6.js";import"./refs-726771dd.js";import"./index-151d4a8e.js";import"./strings-5238cde9.js";import"./index-b06f2c24.js";function ye(r,s={}){let f=ee(s);return p.get(`/manager/${r}${f}`)}const xe=r=>p({url:`/manager/${r}/delete`,method:"post"}),Ve=(r,s)=>p({url:`manager/${r}/update_status`,method:"post",data:{status:s}}),ke=(r,s)=>p({url:`/manager/${r}`,method:"post",data:s}),Se=r=>p({url:"/manager",method:"post",data:r});const Ie={class:"search"},De={class:"avatarItem"},Fe={class:"l-content"},Re={class:"r-content"},$e={__name:"list",setup(r){const s=ce([]),{loading:f,tableData:b,total:E,searchForm:C,changePage:I,getData:u,handleDel:D,handleChange:F}=ae({getList:ye,del:xe,searchForm:{keyword:""},changeStatus:Ve,onGetListSuccess:m=>{s.value=m.data.roles,E.value=m.data.totalCount,b.value=m.data.list}}),{formDrawerRef:R,formRef:$,isEdit:B,Form:l,handleCreate:M,handleEdit:L,onSubmit:U}=oe({Form:{username:"",password:"",role_id:0,status:1,avatar:""},getData:u,add:Se,edit:ke}),z=m=>{l.value.avatar=m.value[0].url};return _e(()=>{u()}),(m,n)=>{const v=Y,P=me,c=de,w=ue,y=he,T=ge,q=pe,N=be,H=Z,d=Ee,O=we,A=se,G=ie,J=Ce,K=Q,j=ne;return _(),x("div",null,[t(H,{shadow:"always"},{default:o(()=>[i("div",Ie,[t(v,{"prefix-icon":"Search",modelValue:a(C).keyword,"onUpdate:modelValue":n[0]||(n[0]=e=>a(C).keyword=e),placeholder:"管理员名称",clearable:"",onChange:a(u)},null,8,["modelValue","onChange"])]),t(le,{onCreate:a(M),onRefresh:a(u)},null,8,["onCreate","onRefresh"]),V((_(),k(q,{"max-height":"450px",data:a(b),stripe:"",style:{width:"100%"}},{default:o(()=>[t(c,{label:"管理员",width:"320"},{default:o(({row:e})=>[i("div",De,[i("div",Fe,[t(P,{size:40,src:e.avatar!=""?e.avatar:"https://cube.elemecdn.com/3/7c/3ea6beec64369c2642b92c6726f1epng.png"},null,8,["src"])]),i("div",Re,[i("span",null,g(e.username),1),i("span",null,"ID: "+g(e.id),1)])])]),_:1}),t(c,{label:"所属角色",width:"340"},{default:o(({row:e})=>[i("span",null,g(e.role.name?e.role.name:"-"),1)]),_:1}),t(c,{label:"状态",width:"120"},{default:o(({row:e})=>[t(w,{disabled:e.super==1,onChange:h=>a(F)(h,e),"model-value":e.status,"active-value":1,"inactive-value":0,"active-color":"#4339ca"},null,8,["disabled","onChange","model-value"])]),_:1}),t(c,{fixed:"right",label:"操作",width:"420",align:"center"},{default:o(e=>[t(y,{disabled:e.row.super==1,link:"",type:"primary",size:"small",onClick:W(h=>a(L)(e.row),["stop"])},{default:o(()=>[S("编辑")]),_:2},1032,["disabled","onClick"]),t(T,{title:"确认删除吗?","confirm-button-text":"确定","cancel-button-text":"取消",onConfirm:h=>a(D)(e.row.id)},{reference:o(()=>[t(y,{disabled:e.row.super==1,link:"",type:"primary",size:"small"},{default:o(()=>[S("删除")]),_:2},1032,["disabled"])]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[j,a(f)]]),t(N,{small:"",background:"",layout:"prev, pager, next",total:a(E),onCurrentChange:a(I)},null,8,["total","onCurrentChange"])]),_:1}),t(K,{ref_key:"formDrawerRef",ref:R,title:a(B)?"编辑公告":"新增公告","confirm-text":"提交",destroyOnClose:"",onSubmit:a(U)},{default:o(()=>[t(J,{ref_key:"formRef",ref:$,model:a(l),"status-icon":"","label-width":"auto"},{default:o(()=>[t(d,{label:"用户名"},{default:o(()=>[t(v,{modelValue:a(l).username,"onUpdate:modelValue":n[1]||(n[1]=e=>a(l).username=e),placeholder:"请输入名称"},null,8,["modelValue"])]),_:1}),t(d,{label:"密码"},{default:o(()=>[t(v,{modelValue:a(l).password,"onUpdate:modelValue":n[2]||(n[2]=e=>a(l).password=e),placeholder:"请输入密码"},null,8,["modelValue"])]),_:1}),t(d,{label:"头像",style:{display:"flex"}},{default:o(()=>[V(t(O,{style:{width:"100px",height:"100px","margin-right":"10px"},lazy:"",src:a(l).avatar,fit:"cover"},null,8,["src"]),[[X,a(l).avatar]]),t(te,{onChoose:z})]),_:1}),t(d,{label:"所属角色"},{default:o(()=>[t(G,{modelValue:a(l).role_id,"onUpdate:modelValue":n[3]||(n[3]=e=>a(l).role_id=e),placeholder:"请选择所属角色"},{default:o(()=>[(_(!0),x(fe,null,ve(a(s),e=>(_(),k(A,{key:e.id,label:e.name,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),t(d,{label:"状态"},{default:o(()=>[t(w,{modelValue:a(l).status,"onUpdate:modelValue":n[4]||(n[4]=e=>a(l).status=e),"active-value":1,"inactive-value":0,"active-color":"#4339ca"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","onSubmit"])])}}},Bt=re($e,[["__scopeId","data-v-dbca15fb"]]);export{Bt as default};
