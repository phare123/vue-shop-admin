/* empty css             *//* empty css                  */import{_ as G}from"./formDrawer-615cee08.js";/* empty css                *//* empty css                  *//* empty css               */import{w as Q,E as F}from"./msgTip-a00a6396.js";import{E as W}from"./index-151d4a8e.js";import{r as f,m as p,n as I,J as B,R as X,B as E,C as a,H as w,I as Y,u as t,V as Z,a7 as U,o as ee,K as e,D as te}from"./index-d45ed081.js";/* empty css                        *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                      *//* empty css                   *//* empty css                        *//* empty css                    *//* empty css                   *//* empty css                  */import{t as oe}from"./tableHeader-f66fb168.js";import{b as v,E as le}from"./index-7aff1b23.js";import{u as ae,a as ne}from"./useCommon-3fca7f65.js";import{_ as re}from"./_plugin-vue_export-helper-c27b6911.js";import{v as se}from"./directive-7bc345b5.js";import{a as ue,E as me}from"./index-4bd039ef.js";import{E as ie}from"./index-d4c13dda.js";import{E as pe}from"./index-c440b37e.js";import{E as de}from"./index-61f461ba.js";import{a as ce,E as _e}from"./index-ae57328d.js";import{E as fe}from"./index-226dc19b.js";import"./index-1cb0abaf.js";/* empty css                */import"./index-6998b886.js";import"./js.cookie-cf83ad76.js";import"./strings-5238cde9.js";import"./index-184e15d9.js";import"./_initCloneObject-4b55852b.js";import"./index-b06f2c24.js";import"./index-ebc90b42.js";const ve={__name:"tagInput",props:{modelValue:{type:String}},emits:["update:modelValue"],setup(o,{emit:s}){const g=o,u=f(""),m=f(g.modelValue?g.modelValue.slice(","):[]),c=f(!1),b=f(),_=y=>{m.value.splice(m.value.indexOf(y),1)},h=()=>{c.value=!0,Z(()=>{b.value.input.focus()})},k=()=>{u.value&&(m.value.push(u.value),s("update:modelValue",m.value.join(","))),c.value=!1,u.value=""};return(y,C)=>{const x=W,r=U;return p(),I(B,null,[(p(!0),I(B,null,X(m.value,i=>(p(),E(x,{key:i,class:"mx-1",closable:"","disable-transitions":!1,onClose:D=>_(i)},{default:a(()=>[w(Y(i),1)]),_:2},1032,["onClose"]))),128)),c.value?(p(),E(t(F),{key:0,ref_key:"InputRef",ref:b,modelValue:u.value,"onUpdate:modelValue":C[0]||(C[0]=i=>u.value=i),class:"ml-1 w-20",size:"small",onKeyup:Q(k,["enter"]),onBlur:k},null,8,["modelValue","onKeyup"])):(p(),E(r,{key:1,class:"button-new-tag ml-1",size:"small",onClick:h},{default:a(()=>[w(" + 添加规格 ")]),_:1}))],64)}}},ge=o=>v({url:`/skus/${o}`,method:"get"}),be=o=>v({url:"/skus",method:"post",data:o}),he=(o,s)=>v({url:`/skus/${o}`,method:"post",data:s}),ke=(o,s)=>v({url:`/skus/${o}/update_status`,method:"post",data:{status:s}});function ye(o){return o=Array.isArray(o)?o:[o],v.post("/skus/delete_all",{ids:o})}const Ce={__name:"list",setup(o){const s=f([]),g={title:[{required:!0,message:"标题不能为空",trigger:"blur"}],content:[{required:!0,message:"内容不能为空",trigger:"blur"}]},{loading:u,tableData:m,total:c,changePage:b,getData:_,handleDel:h,handleChange:k}=ae({changeStatus:ke,del:ye,getList:ge}),{formDrawerRef:y,formRef:C,isEdit:x,Form:r,handleCreate:i,handleEdit:D,onSubmit:z}=ne({Form:{name:"",status:1,default:"",order:50},getData:_,add:be,edit:he}),K=R=>{s.value=R.map(n=>n.id)};return ee(()=>{_()}),(R,n)=>{const d=ue,$=ie,T=U,L=pe,N=me,P=de,q=le,A=F,V=ce,H=fe,O=ve,j=_e,J=G,M=se;return p(),I("div",null,[e(q,{shadow:"always"},{default:a(()=>[e(oe,{layout:"create,delete,refresh",onDelete:n[0]||(n[0]=l=>t(h)(s.value)),onCreate:t(i),onRefresh:t(_)},null,8,["onCreate","onRefresh"]),te((p(),E(N,{"max-height":"480px",data:t(m),stripe:"",style:{width:"100%"},onSelectionChange:K},{default:a(()=>[e(d,{type:"selection"}),e(d,{prop:"name",label:"规格名称",width:"230"}),e(d,{prop:"default",label:"规格值",width:"270"}),e(d,{prop:"order",label:"排序",width:"240"}),e(d,{label:"状态",width:"200"},{default:a(({row:l})=>[e($,{disabled:l.super==1,onChange:S=>t(k)(S,l),"model-value":l.status,"active-value":1,"inactive-value":0,"active-color":"#4339ca"},null,8,["disabled","onChange","model-value"])]),_:1}),e(d,{fixed:"right",label:"操作",width:"200",align:"center"},{default:a(l=>[e(T,{link:"",type:"primary",size:"small",onClick:S=>t(D)(l.row)},{default:a(()=>[w("编辑")]),_:2},1032,["onClick"]),e(L,{title:"确认删除吗?","confirm-button-text":"确定","cancel-button-text":"取消",onConfirm:S=>t(h)(l.row.id)},{reference:a(()=>[e(T,{link:"",type:"primary",size:"small"},{default:a(()=>[w("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[M,t(u)]]),e(P,{small:"",background:"",layout:"prev, pager, next",total:t(c),onCurrentChange:t(b)},null,8,["total","onCurrentChange"])]),_:1}),e(J,{ref_key:"formDrawerRef",ref:y,title:t(x)?"编辑":"新增","confirm-text":"提交",destroyOnClose:"",onSubmit:t(z)},{default:a(()=>[e(j,{rules:g,ref_key:"formRef",ref:C,model:t(r),"status-icon":"","label-width":"auto"},{default:a(()=>[e(V,{label:"规格名称",prop:"name"},{default:a(()=>[e(A,{modelValue:t(r).name,"onUpdate:modelValue":n[1]||(n[1]=l=>t(r).name=l),placeholder:"请输入规格名称"},null,8,["modelValue"])]),_:1}),e(V,{label:"排序"},{default:a(()=>[e(H,{modelValue:t(r).order,"onUpdate:modelValue":n[2]||(n[2]=l=>t(r).order=l),min:0,max:1e3},null,8,["modelValue"])]),_:1}),e(V,{label:"状态"},{default:a(()=>[e($,{modelValue:t(r).status,"onUpdate:modelValue":n[3]||(n[3]=l=>t(r).status=l),"active-value":1,"inactive-value":0,"active-color":"#4339ca"},null,8,["modelValue"])]),_:1}),e(V,{prop:"defalut",label:"规格"},{default:a(()=>[e(O,{modelValue:t(r).default,"onUpdate:modelValue":n[4]||(n[4]=l=>t(r).default=l)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","onSubmit"])])}}},ut=re(Ce,[["__scopeId","data-v-4887f821"]]);export{ut as default};
