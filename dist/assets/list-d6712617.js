/* empty css             *//* empty css                  */import{_ as JZ}from"./formDrawer-615cee08.js";/* empty css                *//* empty css                       *//* empty css                 */import"./el-form-item-4ed993c7.js";/* empty css                *//* empty css                      *//* empty css                 *//* empty css               *//* empty css                   *//* empty css                        *//* empty css                    *//* empty css                        *//* empty css                *//* empty css                  *//* empty css                    */import{v as hF,e as QZ,F as UW,E as ej}from"./msgTip-a00a6396.js";import{S as YV}from"./selectImg-a97347d8.js";import{t as tj}from"./tableHeader-f66fb168.js";import{g as nj,d as oj,a as sj,e as WW,b as rj,c as ZW,s as aj,r as cj,f as ij}from"./goods-6bf41e91.js";import{u as lj,a as uj}from"./useCommon-3fca7f65.js";import{l as eO,f as dj,a1 as mj,r as If,V as jW,o as XW,a9 as fj,bv as gj,bu as hj,an as GW,m as Hd,n as Kg,K as Ro,u as Ls,J as Q4,av as GV,C as $s,R as pF,q as Ff,D as J4,B as qV,H as Al,I as O0,x as KV,a7 as pj,E as bj}from"./index-d45ed081.js";import{_ as vj}from"./_plugin-vue_export-helper-c27b6911.js";import{v as yj,a as wj,E as Cj}from"./directive-7bc345b5.js";import{a as Sj,E as xj}from"./index-3276a6b0.js";import{a as kj,E as Tj}from"./index-4bd039ef.js";import{E as Ej}from"./index-d6a34864.js";import{E as _j}from"./index-151d4a8e.js";import{E as Aj}from"./index-61f461ba.js";import{E as Oj}from"./index-7aff1b23.js";import{a as Dj,E as Rj}from"./index-ae57328d.js";import{E as Mj,b as Nj}from"./index-83c7d896.js";import"./index-1cb0abaf.js";/* empty css                  *//* empty css                */import"./imageMain-c67a0093.js";/* empty css                        *//* empty css                   */import"./index-6998b886.js";import"./index-c440b37e.js";import"./index-f79087c0.js";import"./index-226dc19b.js";import"./index-ebc90b42.js";/* empty css               */import"./index-184e15d9.js";import"./_initCloneObject-4b55852b.js";import"./index-90167cc1.js";import"./index-30c8e164.js";import"./index-fcefa1a6.js";import"./refs-726771dd.js";import"./queryParams-4c57c9da.js";import"./strings-5238cde9.js";import"./index-b06f2c24.js";import"./js.cookie-cf83ad76.js";var XV={},Bj={get exports(){return XV},set exports(Ht){XV=Ht}};(function(Ht){(function(){var yn=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var n=typeof e;return n==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":n==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":n},dn=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},Sn=function(e,n){var o=Array.prototype.slice.call(e);return o.sort(n)},Qt=function(e,n){return Dn(function(o,r){return e.eq(n(o),n(r))})},Dn=function(e){return{eq:e}},xn=Dn(function(e,n){return e===n}),Nt=xn,Et=function(e){return Dn(function(n,o){if(n.length!==o.length)return!1;for(var r=n.length,c=0;c<r;c++)if(!e.eq(n[c],o[c]))return!1;return!0})},pt=function(e,n){return Qt(Et(e),function(o){return Sn(o,n)})},hn=function(e){return Dn(function(n,o){var r=Object.keys(n),c=Object.keys(o);if(!pt(Nt).eq(r,c))return!1;for(var u=r.length,f=0;f<u;f++){var b=r[f];if(!e.eq(n[b],o[b]))return!1}return!0})},rn=Dn(function(e,n){if(e===n)return!0;var o=yn(e),r=yn(n);return o!==r?!1:dn(o)?e===n:o==="array"?Et(rn).eq(e,n):o==="object"?hn(rn).eq(e,n):!1});const Ut=Object.getPrototypeOf,Ct=(e,n,o)=>{var r;return o(e,n.prototype)?!0:((r=e.constructor)===null||r===void 0?void 0:r.name)===n.name},Mt=e=>{const n=typeof e;return e===null?"null":n==="object"&&Array.isArray(e)?"array":n==="object"&&Ct(e,String,(o,r)=>r.isPrototypeOf(o))?"string":n},cn=e=>n=>Mt(n)===e,Ze=e=>n=>typeof n===e,st=e=>n=>e===n,Te=(e,n)=>ht(e)&&Ct(e,n,(o,r)=>Ut(o)===r),Q=cn("string"),ht=cn("object"),It=e=>Te(e,Object),yt=cn("array"),Y=st(null),Ot=Ze("boolean"),Bn=st(void 0),$t=e=>e==null,ye=e=>!$t(e),ee=Ze("function"),at=Ze("number"),Le=(e,n)=>{if(yt(e)){for(let o=0,r=e.length;o<r;++o)if(!n(e[o]))return!1;return!0}return!1},Me=()=>{},Rt=(e,n)=>(...o)=>e(n.apply(null,o)),_=(e,n)=>o=>e(n(o)),he=e=>()=>e,Ue=e=>e,Oe=(e,n)=>e===n;function fe(e,...n){return(...o)=>{const r=n.concat(o);return e.apply(null,r)}}const Kt=e=>n=>!e(n),nn=e=>()=>{throw new Error(e)},Fe=e=>e(),Vt=e=>{e()},kt=he(!1),Ie=he(!0);class R{constructor(n,o){this.tag=n,this.value=o}static some(n){return new R(!0,n)}static none(){return R.singletonNone}fold(n,o){return this.tag?o(this.value):n()}isSome(){return this.tag}isNone(){return!this.tag}map(n){return this.tag?R.some(n(this.value)):R.none()}bind(n){return this.tag?n(this.value):R.none()}exists(n){return this.tag&&n(this.value)}forall(n){return!this.tag||n(this.value)}filter(n){return!this.tag||n(this.value)?this:R.none()}getOr(n){return this.tag?this.value:n}or(n){return this.tag?this:n}getOrThunk(n){return this.tag?this.value:n()}orThunk(n){return this.tag?this:n()}getOrDie(n){if(this.tag)return this.value;throw new Error(n??"Called getOrDie on None")}static from(n){return ye(n)?R.some(n):R.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(n){this.tag&&n(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}R.singletonNone=new R(!1);const Hn=Array.prototype.slice,Ae=Array.prototype.indexOf,Se=Array.prototype.push,We=(e,n)=>Ae.call(e,n),Ee=(e,n)=>{const o=We(e,n);return o===-1?R.none():R.some(o)},ae=(e,n)=>We(e,n)>-1,se=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return!0}return!1},re=(e,n)=>{const o=e.length,r=new Array(o);for(let c=0;c<o;c++){const u=e[c];r[c]=n(u,c)}return r},H=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];n(c,o)}},q=(e,n)=>{for(let o=e.length-1;o>=0;o--){const r=e[o];n(r,o)}},z=(e,n)=>{const o=[],r=[];for(let c=0,u=e.length;c<u;c++){const f=e[c];(n(f,c)?o:r).push(f)}return{pass:o,fail:r}},Z=(e,n)=>{const o=[];for(let r=0,c=e.length;r<c;r++){const u=e[r];n(u,r)&&o.push(u)}return o},Ne=(e,n,o)=>(q(e,(r,c)=>{o=n(o,r,c)}),o),Pe=(e,n,o)=>(H(e,(r,c)=>{o=n(o,r,c)}),o),Wt=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++){const u=e[r];if(n(u,r))return R.some(u);if(o(u,r))break}return R.none()},ot=(e,n)=>Wt(e,n,kt),Qn=(e,n)=>{for(let o=0,r=e.length;o<r;o++){const c=e[o];if(n(c,o))return R.some(o)}return R.none()},uo=e=>{const n=[];for(let o=0,r=e.length;o<r;++o){if(!yt(e[o]))throw new Error("Arr.flatten item "+o+" was not an array, input: "+e);Se.apply(n,e[o])}return n},eo=(e,n)=>uo(re(e,n)),kn=(e,n)=>{for(let o=0,r=e.length;o<r;++o){const c=e[o];if(n(c,o)!==!0)return!1}return!0},ao=e=>{const n=Hn.call(e,0);return n.reverse(),n},Re=(e,n)=>Z(e,o=>!ae(n,o)),Ye=(e,n)=>{const o={};for(let r=0,c=e.length;r<c;r++){const u=e[r];o[String(u)]=n(u,r)}return o},Bt=(e,n)=>{const o=Hn.call(e,0);return o.sort(n),o},an=(e,n)=>n>=0&&n<e.length?R.some(e[n]):R.none(),An=e=>an(e,0),Tn=e=>an(e,e.length-1),Do=ee(Array.from)?Array.from:e=>Hn.call(e),ks=(e,n)=>{for(let o=0;o<e.length;o++){const r=n(e[o],o);if(r.isSome())return r}return R.none()},qe=(e,n)=>{const o=[],r=ee(n)?c=>se(o,u=>n(u,c)):c=>ae(o,c);for(let c=0,u=e.length;c<u;c++){const f=e[c];r(f)||o.push(f)}return o},ze=Object.keys,sn=Object.hasOwnProperty,on=(e,n)=>{const o=ze(e);for(let r=0,c=o.length;r<c;r++){const u=o[r],f=e[u];n(f,u)}},qt=(e,n)=>Kn(e,(o,r)=>({k:r,v:n(o,r)})),Kn=(e,n)=>{const o={};return on(e,(r,c)=>{const u=n(r,c);o[u.k]=u.v}),o},Ts=e=>(n,o)=>{e[o]=n},_r=(e,n,o,r)=>{on(e,(c,u)=>{(n(c,u)?o:r)(c,u)})},ga=(e,n)=>{const o={},r={};return _r(e,n,Ts(o),Ts(r)),{t:o,f:r}},bs=(e,n)=>{const o={};return _r(e,n,Ts(o),Me),o},wc=(e,n)=>{const o=[];return on(e,(r,c)=>{o.push(n(r,c))}),o},ys=e=>wc(e,Ue),cs=(e,n)=>go(e,n)?R.from(e[n]):R.none(),go=(e,n)=>sn.call(e,n),gr=(e,n)=>go(e,n)&&e[n]!==void 0&&e[n]!==null,Gr=(e,n,o=rn)=>hn(o).eq(e,n),Hs=e=>{const n={};return H(e,o=>{n[o]={}}),ze(n)},ha=e=>e.length!==void 0,qr=Array.isArray,cc=e=>{if(qr(e))return e;{const n=[];for(let o=0,r=e.length;o<r;o++)n[o]=e[o];return n}},Qs=(e,n,o)=>{if(!e)return!1;if(o=o||e,ha(e)){for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e)===!1)return!1}else for(const r in e)if(go(e,r)&&n.call(o,e[r],r,e)===!1)return!1;return!0},_a=(e,n)=>{const o=[];return Qs(e,(r,c)=>{o.push(n(r,c,e))}),o},we=(e,n)=>{const o=[];return Qs(e,(r,c)=>{(!n||n(r,c,e))&&o.push(r)}),o},K=(e,n)=>{if(e){for(let o=0,r=e.length;o<r;o++)if(e[o]===n)return o}return-1},ct=(e,n,o,r)=>{let c=Bn(o)?e[0]:o;for(let u=0;u<e.length;u++)c=n.call(r,c,e[u],u);return c},vt=(e,n,o)=>{for(let r=0,c=e.length;r<c;r++)if(n.call(o,e[r],r,e))return r;return-1},jn=e=>e[e.length-1],to=e=>{let n=!1,o;return(...r)=>(n||(n=!0,o=e.apply(null,r)),o)},In=(e,n,o,r)=>{const c=e.isiOS()&&/ipad/i.test(o)===!0,u=e.isiOS()&&!c,f=e.isiOS()||e.isAndroid(),b=f||r("(pointer:coarse)"),y=c||!u&&f&&r("(min-device-width:768px)"),x=u||f&&!y,M=n.isSafari()&&e.isiOS()&&/safari/i.test(o)===!1,P=!x&&!y&&!M;return{isiPad:he(c),isiPhone:he(u),isTablet:he(y),isPhone:he(x),isTouch:he(b),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:he(M),isDesktop:he(P)}},is=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o];if(r.test(n))return r}},ts=(e,n)=>{const o=is(e,n);if(!o)return{major:0,minor:0};const r=c=>Number(n.replace(o,"$"+c));return Lt(r(1),r(2))},xo=(e,n)=>{const o=String(n).toLowerCase();return e.length===0?ir():ts(e,o)},ir=()=>Lt(0,0),Lt=(e,n)=>({major:e,minor:n}),ge={nu:Lt,detect:xo,unknown:ir},be=(e,n)=>ks(n.brands,o=>{const r=o.brand.toLowerCase();return ot(e,c=>{var u;return r===((u=c.brand)===null||u===void 0?void 0:u.toLowerCase())}).map(c=>({current:c.name,version:ge.nu(parseInt(o.version,10),0)}))}),_t=(e,n)=>{const o=String(n).toLowerCase();return ot(e,r=>r.search(o))},tn=(e,n)=>_t(e,n).map(o=>{const r=ge.detect(o.versionRegexes,n);return{current:o.name,version:r}}),un=(e,n)=>_t(e,n).map(o=>{const r=ge.detect(o.versionRegexes,n);return{current:o.name,version:r}}),Pn=(e,n)=>e.substring(n),pn=(e,n,o)=>n===""||e.length>=n.length&&e.substr(o,o+n.length)===n,zn=(e,n)=>wo(e,n)?Pn(e,n.length):e,oo=(e,n,o=0,r)=>{const c=e.indexOf(n,o);return c!==-1?Bn(r)?!0:c+n.length<=r:!1},wo=(e,n)=>pn(e,n,0),Os=(e,n)=>pn(e,n,e.length-n.length),hr=e=>n=>n.replace(e,""),qo=hr(/^\s+|\s+$/g),Xc=hr(/^\s+/g),ls=hr(/\s+$/g),Cs=e=>e.length>0,xs=e=>!Cs(e),Lr=(e,n)=>n<=0?"":new Array(n+1).join(e),Br=(e,n=10)=>{const o=parseInt(e,n);return isNaN(o)?R.none():R.some(o)},Fc=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,La=e=>n=>oo(n,e),Jc=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>oo(e,"edge/")&&oo(e,"chrome")&&oo(e,"safari")&&oo(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Fc],search:e=>oo(e,"chrome")&&!oo(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>oo(e,"msie")||oo(e,"trident")},{name:"Opera",versionRegexes:[Fc,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:La("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:La("firefox")},{name:"Safari",versionRegexes:[Fc,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(oo(e,"safari")||oo(e,"mobile/"))&&oo(e,"applewebkit")}],_i=[{name:"Windows",search:La("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>oo(e,"iphone")||oo(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:La("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:La("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:La("linux"),versionRegexes:[]},{name:"Solaris",search:La("sunos"),versionRegexes:[]},{name:"FreeBSD",search:La("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:La("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Qc={browsers:he(Jc),oses:he(_i)},zi="Edge",Us="Chromium",gi="IE",pa="Opera",ic="Firefox",hi="Safari",Ic=()=>aa({current:void 0,version:ge.unknown()}),aa=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isEdge:r(zi),isChromium:r(Us),isIE:r(gi),isOpera:r(pa),isFirefox:r(ic),isSafari:r(hi)}},Ai={unknown:Ic,nu:aa,edge:he(zi),chromium:he(Us),ie:he(gi),opera:he(pa),firefox:he(ic),safari:he(hi)},Cc="Windows",Vi="iOS",er="Android",ba="Linux",X="macOS",xe="Solaris",He="FreeBSD",wt="ChromeOS",Gt=()=>mo({current:void 0,version:ge.unknown()}),mo=e=>{const n=e.current,o=e.version,r=c=>()=>n===c;return{current:n,version:o,isWindows:r(Cc),isiOS:r(Vi),isAndroid:r(er),isMacOS:r(X),isLinux:r(ba),isSolaris:r(xe),isFreeBSD:r(He),isChromeOS:r(wt)}},Ko={unknown:Gt,nu:mo,windows:he(Cc),ios:he(Vi),android:he(er),linux:he(ba),macos:he(X),solaris:he(xe),freebsd:he(He),chromeos:he(wt)},zs={detect:(e,n,o)=>{const r=Qc.browsers(),c=Qc.oses(),u=n.bind(y=>be(r,y)).orThunk(()=>tn(r,e)).fold(Ai.unknown,Ai.nu),f=un(c,e).fold(Ko.unknown,Ko.nu),b=In(f,u,e,o);return{browser:u,os:f,deviceType:b}}},$r=e=>window.matchMedia(e).matches;let Or=to(()=>zs.detect(navigator.userAgent,R.from(navigator.userAgentData),$r));const Pr=()=>Or(),Ha=navigator.userAgent,Kr=Pr(),ta=Kr.browser,ei=Kr.os,ti=Kr.deviceType,ko=Ha.indexOf("Windows Phone")!==-1,us={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:ta.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!ta.isIE(),windowsPhone:ko,browser:{current:ta.current,version:ta.version,isChromium:ta.isChromium,isEdge:ta.isEdge,isFirefox:ta.isFirefox,isIE:ta.isIE,isOpera:ta.isOpera,isSafari:ta.isSafari},os:{current:ei.current,version:ei.version,isAndroid:ei.isAndroid,isChromeOS:ei.isChromeOS,isFreeBSD:ei.isFreeBSD,isiOS:ei.isiOS,isLinux:ei.isLinux,isMacOS:ei.isMacOS,isSolaris:ei.isSolaris,isWindows:ei.isWindows},deviceType:{isDesktop:ti.isDesktop,isiPad:ti.isiPad,isiPhone:ti.isiPhone,isPhone:ti.isPhone,isTablet:ti.isTablet,isTouch:ti.isTouch,isWebView:ti.isWebView}},ar=/^\s*|\s*$/g,$=e=>$t(e)?"":(""+e).replace(ar,""),J=(e,n)=>n?n==="array"&&qr(e)?!0:typeof e===n:e!==void 0,de=(e,n,o={})=>{const r=Q(e)?e.split(n||","):e||[];let c=r.length;for(;c--;)o[r[c]]={};return o},Xe=go,Nn=(e,...n)=>{for(let o=0;o<n.length;o++){const r=n[o];for(const c in r)if(go(r,c)){const u=r[c];u!==void 0&&(e[c]=u)}}return e},Mo=function(e,n,o,r){r=r||this,e&&(o&&(e=e[o]),Qs(e,(c,u)=>n.call(r,c,u,o)===!1?!1:(Mo(c,n,o,r),!0)))},Dt={trim:$,isArray:qr,is:J,toArray:cc,makeMap:de,each:Qs,map:_a,grep:we,inArray:K,hasOwn:Xe,extend:Nn,walk:Mo,resolve:(e,n=window)=>{const o=e.split(".");for(let r=0,c=o.length;r<c&&(n=n[o[r]],!!n);r++);return n},explode:(e,n)=>yt(e)?e:e===""?[]:_a(e.split(n||","),$),_addCacheSuffix:e=>{const n=us.cacheSuffix;return n&&(e+=(e.indexOf("?")===-1?"?":"&")+n),e}},ca=(e,n,o=Oe)=>e.exists(r=>o(r,n)),tr=e=>{const n=[],o=r=>{n.push(r)};for(let r=0;r<e.length;r++)e[r].each(o);return n},Zr=(e,n,o)=>e.isSome()&&n.isSome()?R.some(o(e.getOrDie(),n.getOrDie())):R.none(),sl=(e,n,o,r)=>e.isSome()&&n.isSome()&&o.isSome()?R.some(r(e.getOrDie(),n.getOrDie(),o.getOrDie())):R.none(),Po=(e,n)=>e?R.some(n):R.none();typeof window<"u"||Function("return this;")();const ne=8,me=9,Qe=11,dt=1,Un=3,so=e=>e.dom.nodeName.toLowerCase(),Ys=e=>e.dom.nodeType,Yo=e=>n=>Ys(n)===e,Ui=e=>Ys(e)===ne||so(e)==="#comment",Qo=Yo(dt),Ds=Yo(Un),Aa=Yo(me),lc=Yo(Qe),Wi=e=>n=>Qo(n)&&so(n)===e,br=(e,n,o)=>{if(Q(o)||Ot(o)||at(o))e.setAttribute(n,o+"");else throw console.error("Invalid call to Attribute.set. Key ",n,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple")},rr=(e,n,o)=>{br(e.dom,n,o)},Rs=(e,n)=>{const o=e.dom;on(n,(r,c)=>{br(o,c,r)})},zr=(e,n)=>{const o=e.dom.getAttribute(n);return o===null?void 0:o},Sc=(e,n)=>R.from(zr(e,n)),Ol=(e,n)=>{const o=e.dom;return o&&o.hasAttribute?o.hasAttribute(n):!1},Yr=(e,n)=>{e.dom.removeAttribute(n)},Yl=e=>{const n=e.dom.attributes;return n==null||n.length===0},Su=e=>Pe(e.dom.attributes,(n,o)=>(n[o.name]=o.value,n),{}),uc=(e,n)=>{const o=zr(e,n);return o===void 0||o===""?[]:o.split(" ")},xu=(e,n,o)=>{const c=uc(e,n).concat([o]);return rr(e,n,c.join(" ")),!0},Yg=(e,n,o)=>{const r=Z(uc(e,n),c=>c!==o);return r.length>0?rr(e,n,r.join(" ")):Yr(e,n),!1},Lc=e=>e.dom.classList!==void 0,Dl=e=>uc(e,"class"),cd=(e,n)=>xu(e,"class",n),za=(e,n)=>Yg(e,"class",n),rl=(e,n)=>ae(Dl(e),n)?za(e,n):cd(e,n),ku=(e,n)=>{Lc(e)?e.dom.classList.add(n):cd(e,n)},zd=e=>{(Lc(e)?e.dom.classList:Dl(e)).length===0&&Yr(e,"class")},Xl=(e,n)=>{Lc(e)?e.dom.classList.remove(n):za(e,n),zd(e)},Mm=(e,n)=>{const o=Lc(e)?e.dom.classList.toggle(n):rl(e,n);return zd(e),o},Vd=(e,n)=>Lc(e)&&e.dom.classList.contains(n),Oi=e=>e.style!==void 0&&ee(e.style.getPropertyValue),Xg=(e,n)=>{const r=(n||document).createElement("div");if(r.innerHTML=e,!r.hasChildNodes()||r.childNodes.length>1){const c="HTML does not have a single root node";throw console.error(c,e),new Error(c)}return Ud(r.childNodes[0])},Nm=(e,n)=>{const r=(n||document).createElement(e);return Ud(r)},Tu=(e,n)=>{const r=(n||document).createTextNode(e);return Ud(r)},Ud=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},ve={fromHtml:Xg,fromTag:Nm,fromText:Tu,fromDom:Ud,fromPoint:(e,n,o)=>R.from(e.dom.elementFromPoint(n,o)).map(Ud)},Jl=(e,n)=>{const o=[],r=u=>(o.push(u),n(u));let c=n(e);do c=c.bind(r);while(c.isSome());return o},Ri=(e,n)=>{const o=e.dom;if(o.nodeType!==dt)return!1;{const r=o;if(r.matches!==void 0)return r.matches(n);if(r.msMatchesSelector!==void 0)return r.msMatchesSelector(n);if(r.webkitMatchesSelector!==void 0)return r.webkitMatchesSelector(n);if(r.mozMatchesSelector!==void 0)return r.mozMatchesSelector(n);throw new Error("Browser lacks native selectors")}},Bm=e=>e.nodeType!==dt&&e.nodeType!==me&&e.nodeType!==Qe||e.childElementCount===0,$m=(e,n)=>{const o=n===void 0?document:n.dom;return Bm(o)?[]:re(o.querySelectorAll(e),ve.fromDom)},Jg=(e,n)=>{const o=n===void 0?document:n.dom;return Bm(o)?R.none():R.from(o.querySelector(e)).map(ve.fromDom)},Ps=(e,n)=>e.dom===n.dom,Ya=(e,n)=>{const o=e.dom,r=n.dom;return o===r?!1:o.contains(r)},Lf=e=>ve.fromDom(e.dom.ownerDocument),Zi=e=>Aa(e)?e:Lf(e),Pm=e=>ve.fromDom(Zi(e).dom.documentElement),Eu=e=>ve.fromDom(Zi(e).dom.defaultView),xc=e=>R.from(e.dom.parentNode).map(ve.fromDom),Hf=e=>R.from(e.dom.parentElement).map(ve.fromDom),id=(e,n)=>{const o=ee(n)?n:kt;let r=e.dom;const c=[];for(;r.parentNode!==null&&r.parentNode!==void 0;){const u=r.parentNode,f=ve.fromDom(u);if(c.push(f),o(f)===!0)break;r=u}return c},Qg=e=>{const n=o=>Z(o,r=>!Ps(e,r));return xc(e).map(va).map(n).getOr([])},Hc=e=>R.from(e.dom.previousSibling).map(ve.fromDom),Wd=e=>R.from(e.dom.nextSibling).map(ve.fromDom),Fm=e=>ao(Jl(e,Hc)),ld=e=>Jl(e,Wd),va=e=>re(e.dom.childNodes,ve.fromDom),Zd=(e,n)=>{const o=e.dom.childNodes;return R.from(o[n]).map(ve.fromDom)},zf=e=>Zd(e,0),Im=e=>Zd(e,e.dom.childNodes.length-1),_u=e=>e.dom.childNodes.length,eh=e=>{const n=e.dom.head;if(n==null)throw new Error("Head is not available yet");return ve.fromDom(n)},Lm=e=>lc(e)&&ye(e.dom.host),kc=ee(Element.prototype.attachShadow)&&ee(Node.prototype.getRootNode),th=he(kc),al=kc?e=>ve.fromDom(e.dom.getRootNode()):Zi,ud=e=>Lm(e)?e:eh(Zi(e)),Ql=e=>Lm(e)?e:ve.fromDom(Zi(e).dom.body),ji=e=>{const n=al(e);return Lm(n)?R.some(n):R.none()},nh=e=>ve.fromDom(e.dom.host),oh=e=>{if(th()&&ye(e.target)){const n=ve.fromDom(e.target);if(Qo(n)&&Vf(n)&&e.composed&&e.composedPath){const o=e.composedPath();if(o)return An(o)}}return R.from(e.target)},Vf=e=>ye(e.dom.shadowRoot),cl=e=>{const n=Ds(e)?e.dom.parentNode:e.dom;if(n==null||n.ownerDocument===null)return!1;const o=n.ownerDocument;return ji(ve.fromDom(n)).fold(()=>o.body.contains(n),_(cl,nh))},E=(e,n,o)=>{if(!Q(o))throw console.error("Invalid call to CSS.set. Property ",n,":: Value ",o,":: Element ",e),new Error("CSS value must be a string: "+o);Oi(e)&&e.style.setProperty(n,o)},B=(e,n)=>{Oi(e)&&e.style.removeProperty(n)},j=(e,n,o)=>{const r=e.dom;E(r,n,o)},ke=(e,n)=>{const o=e.dom;on(n,(r,c)=>{E(o,c,r)})},Ve=(e,n)=>{const o=e.dom,c=window.getComputedStyle(o).getPropertyValue(n);return c===""&&!cl(e)?bn(o,n):c},bn=(e,n)=>Oi(e)?e.style.getPropertyValue(n):"",Co=(e,n)=>{const o=e.dom,r=bn(o,n);return R.from(r).filter(c=>c.length>0)},ns=e=>{const n={},o=e.dom;if(Oi(o))for(let r=0;r<o.style.length;r++){const c=o.style.item(r);n[c]=o.style[c]}return n},jo=(e,n)=>{const o=e.dom;B(o,n),ca(Sc(e,"style").map(qo),"")&&Yr(e,"style")},no=e=>e.dom.offsetWidth,os=(e,n)=>{xc(e).each(r=>{r.dom.insertBefore(n.dom,e.dom)})},Dr=(e,n)=>{Wd(e).fold(()=>{xc(e).each(c=>{na(c,n)})},r=>{os(r,n)})},Xa=(e,n)=>{zf(e).fold(()=>{na(e,n)},r=>{e.dom.insertBefore(n.dom,r.dom)})},na=(e,n)=>{e.dom.appendChild(n.dom)},Hm=(e,n)=>{os(e,n),na(n,e)},D0=(e,n)=>{H(n,(o,r)=>{const c=r===0?e:n[r-1];Dr(c,o)})},Fo=(e,n)=>{H(n,o=>{na(e,o)})},Vr=e=>{e.dom.textContent="",H(va(e),n=>{Fs(n)})},Fs=e=>{const n=e.dom;n.parentNode!==null&&n.parentNode.removeChild(n)},dc=e=>{const n=va(e);n.length>0&&D0(e,n),Fs(e)},Va=(e,n)=>{const r=(n||document).createElement("div");return r.innerHTML=e,va(ve.fromDom(r))},Uf=e=>re(e,ve.fromDom),Wf=e=>e.dom.innerHTML,sh=(e,n)=>{const r=Lf(e).dom,c=ve.fromDom(r.createDocumentFragment()),u=Va(n,r);Fo(c,u),Vr(e),na(e,c)},eu=e=>{const n=ve.fromTag("div"),o=ve.fromDom(e.dom.cloneNode(!0));return na(n,o),Wf(n)},Zf=(e,n,o,r,c,u,f)=>({target:e,x:n,y:o,stop:r,prevent:c,kill:u,raw:f}),R0=e=>{const n=ve.fromDom(oh(e).getOr(e.target)),o=()=>e.stopPropagation(),r=()=>e.preventDefault(),c=Rt(r,o);return Zf(n,e.clientX,e.clientY,o,r,c,e)},DC=(e,n)=>o=>{e(o)&&n(R0(o))},Xr=(e,n,o,r,c)=>{const u=DC(o,r);return e.dom.addEventListener(n,u,c),{unbind:fe(u1,e,n,u,c)}},rh=(e,n,o,r)=>Xr(e,n,o,r,!1),u1=(e,n,o,r)=>{e.dom.removeEventListener(n,o,r)},Sp=(e,n)=>({left:e,top:n,translate:(r,c)=>Sp(e+r,n+c)}),jf=Sp,d1=e=>{const n=e.getBoundingClientRect();return jf(n.left,n.top)},dd=(e,n)=>e!==void 0?e:n!==void 0?n:0,vr=e=>{const n=e.dom.ownerDocument,o=n.body,r=n.defaultView,c=n.documentElement;if(o===e.dom)return jf(o.offsetLeft,o.offsetTop);const u=dd(r==null?void 0:r.pageYOffset,c.scrollTop),f=dd(r==null?void 0:r.pageXOffset,c.scrollLeft),b=dd(c.clientTop,o.clientTop),y=dd(c.clientLeft,o.clientLeft);return Ho(e).translate(f-y,u-b)},Ho=e=>{const n=e.dom,r=n.ownerDocument.body;return r===n?jf(r.offsetLeft,r.offsetTop):cl(e)?d1(n):jf(0,0)},mc=e=>{const n=e!==void 0?e.dom:document,o=n.body.scrollLeft||n.documentElement.scrollLeft,r=n.body.scrollTop||n.documentElement.scrollTop;return jf(o,r)},tu=(e,n,o)=>{const c=(o!==void 0?o.dom:document).defaultView;c&&c.scrollTo(e,n)},Au=(e,n)=>{Pr().browser.isSafari()&&ee(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(n)},ah=e=>{const n=e===void 0?window:e;return Pr().browser.isFirefox()?R.none():R.from(n.visualViewport)},zm=(e,n,o,r)=>({x:e,y:n,width:o,height:r,right:e+o,bottom:n+r}),m1=e=>{const n=e===void 0?window:e,o=n.document,r=mc(ve.fromDom(o));return ah(n).fold(()=>{const c=n.document.documentElement,u=c.clientWidth,f=c.clientHeight;return zm(r.left,r.top,u,f)},c=>zm(Math.max(c.pageLeft,r.left),Math.max(c.pageTop,r.top),c.width,c.height))},f1=(e,n)=>Z(va(e),n),Vm=(e,n)=>{let o=[];return H(va(e),r=>{n(r)&&(o=o.concat([r])),o=o.concat(Vm(r,n))}),o};var ch=(e,n,o,r,c)=>e(o,r)?R.some(o):ee(c)&&c(o)?R.none():n(o,r,c);const Um=(e,n,o)=>{let r=e.dom;const c=ee(o)?o:kt;for(;r.parentNode;){r=r.parentNode;const u=ve.fromDom(r);if(n(u))return R.some(u);if(c(u))break}return R.none()},Rl=(e,n,o)=>ch((c,u)=>u(c),Um,e,n,o),Ml=(e,n)=>{const o=e.dom;return o.parentNode?M0(ve.fromDom(o.parentNode),r=>!Ps(e,r)&&n(r)):R.none()},M0=(e,n)=>{const o=c=>n(ve.fromDom(c));return ot(e.dom.childNodes,o).map(ve.fromDom)},md=(e,n)=>{const o=r=>{for(let c=0;c<r.childNodes.length;c++){const u=ve.fromDom(r.childNodes[c]);if(n(u))return R.some(u);const f=o(r.childNodes[c]);if(f.isSome())return f}return R.none()};return o(e.dom)},Ou=(e,n,o)=>Um(e,r=>Ri(r,n),o),Gf=(e,n)=>Jg(n,e),fd=(e,n,o)=>ch((c,u)=>Ri(c,u),Ou,e,n,o),ih=(e,n,o)=>Ou(e,n,o).isSome();class ya{constructor(n,o){this.node=n,this.rootNode=o,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(n){return this.node=this.findSibling(this.node,"firstChild","nextSibling",n),this.node}prev(n){return this.node=this.findSibling(this.node,"lastChild","previousSibling",n),this.node}prev2(n){return this.node=this.findPreviousNode(this.node,n),this.node}findSibling(n,o,r,c){if(n){if(!c&&n[o])return n[o];if(n!==this.rootNode){let u=n[r];if(u)return u;for(let f=n.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(u=f[r],u)return u}}}findPreviousNode(n,o){if(n){const r=n.previousSibling;if(this.rootNode&&r===this.rootNode)return;if(r){if(!o){for(let u=r.lastChild;u;u=u.lastChild)if(!u.lastChild)return u}return r}const c=n.parentNode;if(c&&c!==this.rootNode)return c}}}const Gi=e=>n=>!!n&&n.nodeType===e,Wm=e=>!!e&&!Object.getPrototypeOf(e),$n=Gi(1),Zm=e=>{const n=e.toLowerCase();return o=>ye(o)&&o.nodeName.toLowerCase()===n},il=e=>{const n=e.map(o=>o.toLowerCase());return o=>{if(o&&o.nodeName){const r=o.nodeName.toLowerCase();return ae(n,r)}return!1}},lh=(e,n)=>{const o=n.toLowerCase().split(" ");return r=>{if($n(r)){const c=r.ownerDocument.defaultView;if(c)for(let u=0;u<o.length;u++){const f=c.getComputedStyle(r,null);if((f?f.getPropertyValue(e):null)===o[u])return!0}}return!1}},uh=e=>n=>$n(n)&&n.hasAttribute(e),RC=(e,n)=>o=>$n(o)&&o.getAttribute(e)===n,Du=e=>$n(e)&&e.hasAttribute("data-mce-bogus"),oT=e=>$n(e)&&e.getAttribute("data-mce-bogus")==="all",Ja=e=>$n(e)&&e.tagName==="TABLE",lo=e=>n=>!!($n(n)&&(n.contentEditable===e||n.getAttribute("data-mce-contenteditable")===e)),ni=il(["textarea","input"]),Zt=Gi(3),g1=Gi(4),h1=Gi(7),ll=Gi(8),oi=Gi(9),jm=Gi(11),jr=Zm("br"),Oa=Zm("img"),si=lo("true"),lr=lo("false"),Ru=il(["td","th"]),p1=il(["td","th","caption"]),nu=il(["video","audio","object","embed"]),dh=Zm("li"),Gm="\uFEFF",ia=" ",mh=e=>e===Gm,qm=e=>e.replace(/\uFEFF/g,""),Ms=(e,n)=>$m(n,e),Tc=((e,n)=>{const o=u=>{if(!e(u))throw new Error("Can only get "+n+" value of a "+n+" node");return r(u).getOr("")},r=u=>e(u)?R.from(u.dom.nodeValue):R.none();return{get:o,getOption:r,set:(u,f)=>{if(!e(u))throw new Error("Can only set raw "+n+" value of a "+n+" node");u.dom.nodeValue=f}}})(Ds,"text"),su=e=>Tc.get(e),pi=e=>Tc.getOption(e),b1=["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"],Qa=["td","th"],Ec=["thead","tbody","tfoot"],xp=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],At=["h1","h2","h3","h4","h5","h6"],Mi=["li","dd","dt"],N0=["ul","ol","dl"],la=["pre","script","textarea","style"],qf=["pre"].concat(At),gd=e=>{let n;return o=>(n=n||Ye(e,Ie),go(n,so(o)))},wa=gd(b1),B0=e=>so(e)==="table",ul=e=>Qo(e)&&!wa(e),ru=e=>Qo(e)&&so(e)==="br",bi=gd(xp),Ns=gd(N0),qi=gd(Mi),jd=gd(Ec),ec=gd(Qa),Kf=gd(la),Yf=gd(qf),Xf=e=>Yf(e)||ul(e),vi=e=>{const n=[];let o=e.dom;for(;o;)n.push(ve.fromDom(o)),o=o.lastChild;return n},kp=e=>{const n=Ms(e,"br"),o=Z(vi(e).slice(-1),ru);n.length===o.length&&H(o,Fs)},Ke=()=>{const e=ve.fromTag("br");return rr(e,"data-mce-bogus","1"),e},Da=e=>{Vr(e),na(e,Ke())},v1=e=>{Im(e).each(n=>{Hc(n).each(o=>{wa(e)&&ru(n)&&wa(o)&&Fs(n)})})},Sr=Gm,dl=mh,Ra=qm,Ma=$n,C=Zt,k=e=>(C(e)&&(e=e.parentNode),Ma(e)&&e.hasAttribute("data-mce-caret")),I=e=>C(e)&&dl(e.data),V=e=>k(e)||I(e),_e=e=>e.firstChild!==e.lastChild||!jr(e.firstChild),mt=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Sr),u=e.parentNode;if(n){const f=e.previousSibling;if(C(f)){if(V(f))return f;if(ur(f))return f.splitText(f.data.length-1)}u==null||u.insertBefore(c,e)}else{const f=e.nextSibling;if(C(f)){if(V(f))return f;if(Go(f))return f.splitText(1),f}e.nextSibling?u==null||u.insertBefore(c,e.nextSibling):u==null||u.appendChild(c)}return c},jt=e=>{const n=e.container();return Zt(n)?n.data.charAt(e.offset())===Sr||e.isAtStart()&&I(n.previousSibling):!1},Mn=e=>{const n=e.container();return Zt(n)?n.data.charAt(e.offset()-1)===Sr||e.isAtEnd()&&I(n.nextSibling):!1},Lo=(e,n,o)=>{var r;const u=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement(e);u.setAttribute("data-mce-caret",o?"before":"after"),u.setAttribute("data-mce-bogus","all"),u.appendChild(Ke().dom);const f=n.parentNode;return o?f==null||f.insertBefore(u,n):n.nextSibling?f==null||f.insertBefore(u,n.nextSibling):f==null||f.appendChild(u),u},Go=e=>C(e)&&e.data[0]===Sr,ur=e=>C(e)&&e.data[e.data.length-1]===Sr,js=e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Du(r)&&((n=r.parentNode)===null||n===void 0||n.removeChild(r))},nr=e=>e&&e.hasAttribute("data-mce-caret")?(js(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,ri=e=>k(e.startContainer),ml=si,Mu=lr,hd=jr,fh=Zt,pd=il(["script","style","textarea"]),Nu=il(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Km=il(["table"]),Bu=V,yi=e=>Bu(e)?!1:fh(e)?!pd(e.parentNode):Nu(e)||hd(e)||Km(e)||Tp(e),gh=e=>$n(e)&&e.getAttribute("unselectable")==="true",Tp=e=>!gh(e)&&Mu(e),$0=(e,n)=>{for(let o=e.parentNode;o&&o!==n;o=o.parentNode){if(Tp(o))return!1;if(ml(o))return!0}return!0},_o=e=>Tp(e)?!Pe(Do(e.getElementsByTagName("*")),(n,o)=>n||ml(o),!1):!1,or=e=>Nu(e)||_o(e),Ua=(e,n)=>yi(e)&&$0(e,n),zc=/^[ \t\r\n]*$/,Nl=e=>zc.test(e),Vc=e=>" \f	\v".indexOf(e)!==-1,Ni=e=>e===`
`||e==="\r",$u=(e,n)=>n<e.length&&n>=0?Ni(e[n]):!1,Ep=(e,n=4,o=!0,r=!0)=>{const c=Lr(" ",n),u=e.replace(/\t/g,c);return Pe(u,(b,y)=>Vc(y)||y===ia?b.pcIsSpace||b.str===""&&o||b.str.length===u.length-1&&r||$u(u,b.str.length+1)?{pcIsSpace:!1,str:b.str+ia}:{pcIsSpace:!0,str:b.str+" "}:{pcIsSpace:Ni(y),str:b.str+y},{pcIsSpace:!1,str:""}).str},Gd=(e,n)=>{const o=ve.fromDom(n),r=ve.fromDom(e);return ih(r,"pre,code",fe(Ps,o))},Ym=(e,n)=>Zt(e)&&Nl(e.data)&&!Gd(e,n),sT=e=>$n(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),Xm=(e,n)=>yi(e)&&!Ym(e,n)||sT(e)||rT(e),rT=uh("data-mce-bookmark"),Jf=uh("data-mce-bogus"),_p=RC("data-mce-bogus","all"),Ap=(e,n)=>{let o=0;if(Xm(e,e))return!1;{let r=e.firstChild;if(!r)return!0;const c=new ya(r,e);do{if(n){if(_p(r)){r=c.next(!0);continue}if(Jf(r)){r=c.next();continue}}if(jr(r)){o++,r=c.next();continue}if(Xm(r,e))return!1;r=c.next()}while(r);return o<=1}},Ca=(e,n=!0)=>Ap(e.dom,n),qd="data-mce-block",aT=e=>Z(ze(e),n=>!/[A-Z]/.test(n)),y1=e=>aT(e).join(","),oa=(e,n)=>ye(n.querySelector(e))?(n.setAttribute(qd,"true"),n.getAttribute("data-mce-selected")==="inline-boundary"&&n.removeAttribute("data-mce-selected"),!0):(n.removeAttribute(qd),!1),MC=(e,n)=>{const o=y1(e.getTransparentElements()),r=y1(e.getBlockElements());return Z(n.querySelectorAll(o),c=>oa(r,c))},Kd=(e,n)=>{var o;const r=n?"lastChild":"firstChild";for(let c=e[r];c;c=c[r])if(Ca(ve.fromDom(c))){(o=c.parentNode)===null||o===void 0||o.removeChild(c);return}},Op=(e,n)=>{const o=document.createRange(),r=e.parentNode;if(r){o.setStartBefore(e),o.setEndBefore(n);const c=o.extractContents();Kd(c,!0),o.setStartAfter(n),o.setEndAfter(e);const u=o.extractContents();Kd(u,!1),Ca(ve.fromDom(c))||r.insertBefore(c,e),Ca(ve.fromDom(n))||r.insertBefore(n,e),Ca(ve.fromDom(u))||r.insertBefore(u,e),r.removeChild(e)}},P0=(e,n,o)=>{const r=e.getBlockElements(),c=ve.fromDom(n),u=b=>so(b)in r,f=b=>Ps(b,c);H(Uf(o),b=>{Um(b,u,f).each(y=>{const x=f1(b,M=>u(M)&&!e.isValidChild(so(y),so(M)));if(x.length>0){const M=Hf(y);H(x,P=>{Um(P,u,f).each(L=>{Op(L.dom,P.dom)})}),M.each(P=>MC(e,P.dom))}})})},au=(e,n)=>{const o=MC(e,n);P0(e,n,o)},fl=(e,n)=>{if(Dp(e,n)){const o=y1(e.getBlockElements());oa(o,n)}},Jm=(e,n,o)=>{const r=u=>Ps(u,ve.fromDom(n)),c=id(ve.fromDom(o),r);an(c,c.length-2).filter(Qo).fold(()=>au(e,n),u=>au(e,u.dom))},hh=e=>e.hasAttribute(qd),w1=(e,n)=>go(e.getTransparentElements(),n),Dp=(e,n)=>$n(n)&&w1(e,n.nodeName),Qf=(e,n)=>Dp(e,n)&&hh(n),C1=(e,n)=>n.type===1&&w1(e,n.name)&&Q(n.attr(qd)),NC=(e,n)=>n.type===1&&w1(e,n.name)&&Bn(n.attr(qd)),cT=Pr().browser,S1=e=>ot(e,Qo),Rp=e=>cT.isFirefox()&&so(e)==="table"?S1(va(e)).filter(n=>so(n)==="caption").bind(n=>S1(ld(n)).map(o=>{const r=o.dom.offsetTop,c=n.dom.offsetTop,u=n.dom.offsetHeight;return r<=c?-u:0})).getOr(0):0,bd=(e,n)=>e.children&&ae(e.children,n),ph=(e,n,o)=>{let r=0,c=0;const u=e.ownerDocument;if(o=o||e,n){if(o===e&&n.getBoundingClientRect&&Ve(ve.fromDom(e),"position")==="static"){const b=n.getBoundingClientRect();return r=b.left+(u.documentElement.scrollLeft||e.scrollLeft)-u.documentElement.clientLeft,c=b.top+(u.documentElement.scrollTop||e.scrollTop)-u.documentElement.clientTop,{x:r,y:c}}let f=n;for(;f&&f!==o&&f.nodeType&&!bd(f,o);){const b=f;r+=b.offsetLeft||0,c+=b.offsetTop||0,f=b.offsetParent}for(f=n.parentNode;f&&f!==o&&f.nodeType&&!bd(f,o);)r-=f.scrollLeft||0,c-=f.scrollTop||0,f=f.parentNode;c+=Rp(ve.fromDom(n))}return{x:r,y:c}},Yd=(e,n={})=>{let o=0;const r={},c=ve.fromDom(e),u=Zi(c),f=te=>{n.referrerPolicy=te},b=te=>{n.contentCssCors=te},y=te=>{na(ud(c),te)},x=te=>{const ue=ud(c);Gf(ue,"#"+te).each(Fs)},M=te=>cs(r,te).getOrThunk(()=>({id:"mce-u"+o++,passed:[],failed:[],count:0})),P=te=>new Promise((ue,Be)=>{let De;const Ge=Dt._addCacheSuffix(te),et=M(Ge);r[Ge]=et,et.count++;const Tt=(Je,Rn)=>{H(Je,Vt),et.status=Rn,et.passed=[],et.failed=[],De&&(De.onload=null,De.onerror=null,De=null)},gn=()=>Tt(et.passed,2),en=()=>Tt(et.failed,3);if(ue&&et.passed.push(ue),Be&&et.failed.push(Be),et.status===1)return;if(et.status===2){gn();return}if(et.status===3){en();return}et.status=1;const ut=ve.fromTag("link",u.dom);Rs(ut,{rel:"stylesheet",type:"text/css",id:et.id}),n.contentCssCors&&rr(ut,"crossOrigin","anonymous"),n.referrerPolicy&&rr(ut,"referrerpolicy",n.referrerPolicy),De=ut.dom,De.onload=gn,De.onerror=en,y(ut),rr(ut,"href",Ge)}),L=te=>Promise.allSettled(re(te,Be=>P(Be).then(he(Be)))).then(Be=>{const De=z(Be,Ge=>Ge.status==="fulfilled");return De.fail.length>0?Promise.reject(re(De.fail,Ge=>Ge.reason)):re(De.pass,Ge=>Ge.value)}),ce=te=>{const ue=Dt._addCacheSuffix(te);cs(r,ue).each(Be=>{--Be.count===0&&(delete r[ue],x(Be.id))})};return{load:P,loadAll:L,unload:ce,unloadAll:te=>{H(te,ue=>{ce(ue)})},_setReferrerPolicy:f,_setContentCssCors:b}},Mp=(()=>{const e=new WeakMap;return{forElement:(o,r)=>{const u=al(o).dom;return R.from(e.get(u)).getOrThunk(()=>{const f=Yd(u,r);return e.set(u,f),f})}}})(),F0=e=>e.nodeName.toLowerCase()==="span",k1=(e,n)=>ye(e)&&(Xm(e,n)||ul(ve.fromDom(e))),BC=(e,n)=>{const o=new ya(e,n).prev(!1),r=new ya(e,n).next(!1),c=Bn(o)||k1(o,n),u=Bn(r)||k1(r,n);return c&&u},I0=e=>F0(e)&&e.getAttribute("data-mce-type")==="bookmark",T1=(e,n)=>Zt(e)&&e.data.length>0&&BC(e,n),Ws=e=>$n(e)?e.childNodes.length>0:!1,vo=e=>jm(e)||oi(e),Xd=(e,n,o)=>{var r;const c=o||n;if($n(n)&&I0(n))return n;const u=n.childNodes;for(let f=u.length-1;f>=0;f--)Xd(e,u[f],c);if($n(n)){const f=n.childNodes;f.length===1&&I0(f[0])&&((r=n.parentNode)===null||r===void 0||r.insertBefore(f[0],n))}return!vo(n)&&!Xm(n,c)&&!Ws(n)&&!T1(n,c)&&e.remove(n),n},L0=Dt.makeMap,Jd=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,E1=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,$C=/[<>&\"\']/g,dr=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,PC={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},Qd={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},FC={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},zt=e=>{const n=ve.fromTag("div").dom;return n.innerHTML=e,n.textContent||n.innerText||e},vd=(e,n)=>{const o={};if(e){const r=e.split(",");n=n||10;for(let c=0;c<r.length;c+=2){const u=String.fromCharCode(parseInt(r[c],n));if(!Qd[u]){const f="&"+r[c+1]+";";o[u]=f,o[f]=u}}return o}else return},bh=vd("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Np=(e,n)=>e.replace(n?Jd:E1,o=>Qd[o]||o),iT=e=>(""+e).replace($C,n=>Qd[n]||n),eg=(e,n)=>e.replace(n?Jd:E1,o=>o.length>1?"&#"+((o.charCodeAt(0)-55296)*1024+(o.charCodeAt(1)-56320)+65536)+";":Qd[o]||"&#"+o.charCodeAt(0)+";"),vh=(e,n,o)=>{const r=o||bh;return e.replace(n?Jd:E1,c=>Qd[c]||r[c]||c)},tc={encodeRaw:Np,encodeAllRaw:iT,encodeNumeric:eg,encodeNamed:vh,getEncodeFunc:(e,n)=>{const o=vd(n)||bh,r=(f,b)=>f.replace(b?Jd:E1,y=>Qd[y]!==void 0?Qd[y]:o[y]!==void 0?o[y]:y.length>1?"&#"+((y.charCodeAt(0)-55296)*1024+(y.charCodeAt(1)-56320)+65536)+";":"&#"+y.charCodeAt(0)+";"),c=(f,b)=>vh(f,b,o),u=L0(e.replace(/\+/g,","));return u.named&&u.numeric?r:u.named?n?c:vh:u.numeric?eg:Np},decode:e=>e.replace(dr,(n,o)=>o?(o.charAt(0).toLowerCase()==="x"?o=parseInt(o.substr(1),16):o=parseInt(o,10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(o&1023))):PC[o]||String.fromCharCode(o)):FC[n]||bh[n]||zt(n))},Ur={},Bl={},lT={},gl=Dt.makeMap,ai=Dt.each,em=Dt.extend,Qm=Dt.explode,LC=Dt.inArray,_c=(e,n)=>(e=Dt.trim(e),e?e.split(n||" "):[]),HC=(e,n={})=>{const o=gl(e," ",gl(e.toUpperCase()," "));return em(o,n)},zC=e=>HC("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),ef=e=>{const n={};let o,r,c,u;const f=(y,x="",M="")=>{const P=_c(M),L=_c(y);let ce=L.length;for(;ce--;){const ie=_c([o,x].join(" "));n[L[ce]]={attributes:Ye(ie,()=>({})),attributesOrder:ie,children:Ye(P,he(lT))}}},b=(y,x)=>{const M=_c(y),P=_c(x);let L=M.length;for(;L--;){const ce=n[M[L]];for(let ie=0,te=P.length;ie<te;ie++)ce.attributes[P[ie]]={},ce.attributesOrder.push(P[ie])}};if(Ur[e])return Ur[e];if(o="id accesskey class dir lang style tabindex title role",r="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",c="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"){const y="a ins del canvas map";o+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",r+=" article aside details dialog figure main header footer hgroup section nav "+y,c+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"}if(e!=="html5-strict"){o+=" xml:lang";const y="acronym applet basefont big font strike tt";c=[c,y].join(" "),ai(_c(y),M=>{f(M,"",c)});const x="center dir isindex noframes";r=[r,x].join(" "),u=[r,c].join(" "),ai(_c(x),M=>{f(M,"",u)})}return u=u||[r,c].join(" "),f("html","manifest","head body"),f("head","","base command link meta noscript script style title"),f("title hr noscript br"),f("base","href target"),f("link","href rel media hreflang type sizes hreflang"),f("meta","name http-equiv content charset"),f("style","media type scoped"),f("script","src async defer type charset"),f("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),f("address dt dd div caption","",u),f("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),f("blockquote","cite",u),f("ol","reversed start type","li"),f("ul","","li"),f("li","value",u),f("dl","","dt dd"),f("a","href target rel media hreflang type",u),f("q","cite",c),f("ins del","cite datetime",u),f("img","src sizes srcset alt usemap ismap width height"),f("iframe","src name width height",u),f("embed","src type width height"),f("object","data type typemustmatch name usemap form width height",[u,"param"].join(" ")),f("param","name value"),f("map","name",[u,"area"].join(" ")),f("area","alt coords shape href target rel media hreflang type"),f("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),f("colgroup","span","col"),f("col","span"),f("tbody thead tfoot","","tr"),f("tr","","td th"),f("td","colspan rowspan headers",u),f("th","colspan rowspan headers scope abbr",u),f("form","accept-charset action autocomplete enctype method name novalidate target",u),f("fieldset","disabled form name",[u,"legend"].join(" ")),f("label","form for",c),f("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),f("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?u:c),f("select","disabled form multiple name required size","option optgroup"),f("optgroup","disabled label","option"),f("option","disabled label selected value"),f("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),f("menu","type label",[u,"li"].join(" ")),f("noscript","",u),e!=="html4"&&(f("wbr"),f("ruby","",[c,"rt rp"].join(" ")),f("figcaption","",u),f("mark rt rp summary bdi","",c),f("canvas","width height",u),f("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[u,"track source"].join(" ")),f("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[u,"track source"].join(" ")),f("picture","","img source"),f("source","src srcset type media sizes"),f("track","kind src srclang label default"),f("datalist","",[c,"option"].join(" ")),f("article section nav aside main header footer","",u),f("hgroup","","h1 h2 h3 h4 h5 h6"),f("figure","",[u,"figcaption"].join(" ")),f("time","datetime",c),f("dialog","open",u),f("command","type label icon disabled checked radiogroup command"),f("output","for form name",c),f("progress","value max",c),f("meter","value min max low high optimum",c),f("details","open",[u,"summary"].join(" ")),f("keygen","autofocus challenge disabled form keytype name")),e!=="html5-strict"&&(b("script","language xml:space"),b("style","xml:space"),b("object","declare classid code codebase codetype archive standby align border hspace vspace"),b("embed","align name hspace vspace"),b("param","valuetype type"),b("a","charset name rev shape coords"),b("br","clear"),b("applet","codebase archive code object alt name width height align hspace vspace"),b("img","name longdesc align border hspace vspace"),b("iframe","longdesc frameborder marginwidth marginheight scrolling align"),b("font basefont","size color face"),b("input","usemap align"),b("select"),b("textarea"),b("h1 h2 h3 h4 h5 h6 div p legend caption","align"),b("ul","type compact"),b("li","type"),b("ol dl menu dir","compact"),b("pre","width xml:space"),b("hr","align noshade size width"),b("isindex","prompt"),b("table","summary width frame rules cellspacing cellpadding align bgcolor"),b("col","width align char charoff valign"),b("colgroup","width align char charoff valign"),b("thead","align char charoff valign"),b("tr","align char charoff valign bgcolor"),b("th","axis align char charoff valign nowrap bgcolor width height"),b("form","accept"),b("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),b("tfoot","align char charoff valign"),b("tbody","align char charoff valign"),b("area","nohref"),b("body","background bgcolor text link vlink alink")),e!=="html4"&&(b("input button select textarea","autofocus"),b("input textarea","placeholder"),b("a","download"),b("link script img","crossorigin"),b("img","loading"),b("iframe","sandbox seamless allow allowfullscreen loading")),e!=="html4"&&H([n.video,n.audio],y=>{delete y.children.audio,delete y.children.video}),ai(_c("a form meter progress dfn"),y=>{n[y]&&delete n[y].children[y]}),delete n.caption.children.table,delete n.script,Ur[e]=n,n},H0=(e,n)=>{if(e){const o={};return Q(e)&&(e={"*":e}),ai(e,(r,c)=>{o[c]=o[c.toUpperCase()]=n==="map"?gl(r,/[, ]/):Qm(r,/[, ]/)}),o}else return},Pu=(e={})=>{var n;const o={},r={};let c=[];const u={},f={},b=(No,Is,Ea)=>{const Cr=e[No];if(Cr)return gl(Cr,/[, ]/,gl(Cr.toUpperCase(),/[, ]/));{let Qr=Bl[No];return Qr||(Qr=HC(Is,Ea),Bl[No]=Qr),Qr}},y=(n=e.schema)!==null&&n!==void 0?n:"html5",x=ef(y);e.verify_html===!1&&(e.valid_elements="*[*]");const M=H0(e.valid_styles),P=H0(e.invalid_styles,"map"),L=H0(e.valid_classes,"map"),ce=b("whitespace_elements","pre script noscript style textarea video audio iframe object code"),ie=b("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),te=b("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),ue=b("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),Be="td th iframe video audio object script code",De=b("non_empty_elements",Be+" pre",te),Ge=b("move_caret_before_on_enter_elements",Be+" table",te),et=b("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),Tt=b("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",et),gn=b("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),en=b("transparent_elements","a ins del canvas map");ai("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),No=>{f[No]=new RegExp("</"+No+"[^>]*>","gi")});const ut=No=>new RegExp("^"+No.replace(/([?+*])/g,".$1")+"$"),Je=No=>{const Is=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,Ea=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Cr=/[*?+]/;if(No){const Qr=_c(No,",");let fa,Ir;o["@"]&&(fa=o["@"].attributes,Ir=o["@"].attributesOrder);for(let Fa=0,vu=Qr.length;Fa<vu;Fa++){let fi=Is.exec(Qr[Fa]);if(fi){const _m=fi[1],yu=fi[2],s1=fi[3],r1=fi[5],Am={},Id=[],ea={attributes:Am,attributesOrder:Id};if(_m==="#"&&(ea.paddEmpty=!0),_m==="-"&&(ea.removeEmpty=!0),fi[4]==="!"&&(ea.removeEmptyAttrs=!0),fa&&(on(fa,(nd,Om)=>{Am[Om]=nd}),Ir&&Id.push(...Ir)),r1){const nd=_c(r1,"|");for(let Om=0,od=nd.length;Om<od;Om++)if(fi=Ea.exec(nd[Om]),fi){const sd={},Dm=fi[1],Pc=fi[2].replace(/[\\:]:/g,":"),Rm=fi[3],Pf=fi[4];if(Dm==="!"&&(ea.attributesRequired=ea.attributesRequired||[],ea.attributesRequired.push(Pc),sd.required=!0),Dm==="-"){delete Am[Pc],Id.splice(LC(Id,Pc),1);continue}if(Rm&&(Rm==="="&&(ea.attributesDefault=ea.attributesDefault||[],ea.attributesDefault.push({name:Pc,value:Pf}),sd.defaultValue=Pf),Rm==="~"&&(ea.attributesForced=ea.attributesForced||[],ea.attributesForced.push({name:Pc,value:Pf}),sd.forcedValue=Pf),Rm==="<"&&(sd.validValues=gl(Pf,"?"))),Cr.test(Pc)){const rd=sd;ea.attributePatterns=ea.attributePatterns||[],rd.pattern=ut(Pc),ea.attributePatterns.push(rd)}else Am[Pc]||Id.push(Pc),Am[Pc]=sd}}if(!fa&&yu==="@"&&(fa=Am,Ir=Id),s1&&(ea.outputName=yu,o[s1]=ea),Cr.test(yu)){const nd=ea;nd.pattern=ut(yu),c.push(nd)}else o[yu]=ea}}}},Rn=No=>{c=[],H(ze(o),Is=>{delete o[Is]}),Je(No),ai(x,(Is,Ea)=>{r[Ea]=Is.children})},co=No=>{const Is=/^(~)?(.+)$/;No&&(delete Bl.text_block_elements,delete Bl.block_elements,ai(_c(No,","),Ea=>{const Cr=Is.exec(Ea);if(Cr){const Qr=Cr[1]==="~",fa=Qr?"span":"div",Ir=Cr[2];if(r[Ir]=r[fa],u[Ir]=fa,De[Ir.toUpperCase()]={},De[Ir]={},Qr||(Tt[Ir.toUpperCase()]={},Tt[Ir]={}),!o[Ir]){let Fa=o[fa];Fa=em({},Fa),delete Fa.removeEmptyAttrs,delete Fa.removeEmpty,o[Ir]=Fa}ai(r,(Fa,vu)=>{Fa[fa]&&(r[vu]=Fa=em({},r[vu]),Fa[Ir]=Fa[fa])})}}))},fo=No=>{const Is=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete Ur[y],No&&ai(_c(No,","),Ea=>{const Cr=Is.exec(Ea);if(Cr){const Qr=Cr[1];let fa;Qr?fa=r[Cr[2]]:fa=r[Cr[2]]={"#comment":{}},fa=r[Cr[2]],ai(_c(Cr[3],"|"),Ir=>{Qr==="-"?delete fa[Ir]:fa[Ir]={}})}})},Uo=No=>{const Is=o[No];if(Is)return Is;let Ea=c.length;for(;Ea--;){const Cr=c[Ea];if(Cr.pattern.test(No))return Cr}};e.valid_elements?Rn(e.valid_elements):(ai(x,(No,Is)=>{o[Is]={attributes:No.attributes,attributesOrder:No.attributesOrder},r[Is]=No.children}),ai(_c("strong/b em/i"),No=>{const Is=_c(No,"/");o[Is[1]].outputName=Is[0]}),ai(gn,(No,Is)=>{o[Is]&&(e.padd_empty_block_inline_children&&(o[Is].paddInEmptyBlock=!0),o[Is].removeEmpty=!0)}),ai(_c("ol ul blockquote a table tbody"),No=>{o[No]&&(o[No].removeEmpty=!0)}),ai(_c("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),No=>{o[No].paddEmpty=!0}),ai(_c("span"),No=>{o[No].removeEmptyAttrs=!0})),co(e.custom_elements),fo(e.valid_children),Je(e.extended_valid_elements),fo("+ol[ul|ol],+ul[ul|ol]"),ai({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(No,Is)=>{o[Is]&&(o[Is].parentsRequired=_c(No))}),e.invalid_elements&&ai(Qm(e.invalid_elements),No=>{o[No]&&delete o[No]}),Uo("span")||Je("span[!data-mce-type|*]");const vs=he(M),Ks=he(P),Gs=he(L),Pa=he(ue),Ti=he(Tt),Xt=he(et),Wo=he(gn),po=he(Object.seal(te)),Mr=he(ie),On=he(De),Oo=he(Ge),So=he(ce),Cn=he(en),gs=he(Object.seal(f)),as=(No,Is)=>{const Ea=r[No.toLowerCase()];return!!(Ea&&Ea[Is.toLowerCase()])},ac=(No,Is)=>{const Ea=Uo(No);if(Ea)if(Is){if(Ea.attributes[Is])return!0;const Cr=Ea.attributePatterns;if(Cr){let Qr=Cr.length;for(;Qr--;)if(Cr[Qr].pattern.test(Is))return!0}}else return!0;return!1},Tr=he(u);return{type:y,children:r,elements:o,getValidStyles:vs,getValidClasses:Gs,getBlockElements:Ti,getInvalidStyles:Ks,getVoidElements:po,getTextBlockElements:Xt,getTextInlineElements:Wo,getBoolAttrs:Pa,getElementRule:Uo,getSelfClosingElements:Mr,getNonEmptyElements:On,getMoveCaretBeforeOnEnterElements:Oo,getWhitespaceElements:So,getTransparentElements:Cn,getSpecialElements:gs,isValidChild:as,isValid:ac,getCustomElements:Tr,addValidElements:Je,setValidElements:Rn,addCustomElements:co,addValidChildren:fo}},_1=(e={},n)=>{const o=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,r=/\s*([^:]+):\s*([^;]+);?/g,c=/\s+$/,u={};let f,b;const y=Gm;n&&(f=n.getValidStyles(),b=n.getInvalidStyles());const x=(`\\" \\' \\; \\: ; : `+y).split(" ");for(let P=0;P<x.length;P++)u[x[P]]=y+P,u[y+P]=x[P];const M={parse:P=>{const L={};let ce=!1;const ie=e.url_converter,te=e.url_converter_scope||M,ue=(ut,Je,Rn)=>{const co=L[ut+"-top"+Je];if(!co)return;const fo=L[ut+"-right"+Je];if(!fo)return;const Uo=L[ut+"-bottom"+Je];if(!Uo)return;const vs=L[ut+"-left"+Je];if(!vs)return;const Ks=[co,fo,Uo,vs];let Gs=Ks.length-1;for(;Gs--&&Ks[Gs]===Ks[Gs+1];);Gs>-1&&Rn||(L[ut+Je]=Gs===-1?Ks[0]:Ks.join(" "),delete L[ut+"-top"+Je],delete L[ut+"-right"+Je],delete L[ut+"-bottom"+Je],delete L[ut+"-left"+Je])},Be=ut=>{const Je=L[ut];if(!Je)return;const Rn=Je.split(" ");let co=Rn.length;for(;co--;)if(Rn[co]!==Rn[0])return!1;return L[ut]=Rn[0],!0},De=(ut,Je,Rn,co)=>{Be(Je)&&Be(Rn)&&Be(co)&&(L[ut]=L[Je]+" "+L[Rn]+" "+L[co],delete L[Je],delete L[Rn],delete L[co])},Ge=ut=>(ce=!0,u[ut]),et=(ut,Je)=>(ce&&(ut=ut.replace(/\uFEFF[0-9]/g,Rn=>u[Rn])),Je||(ut=ut.replace(/\\([\'\";:])/g,"$1")),ut),Tt=ut=>String.fromCharCode(parseInt(ut.slice(1),16)),gn=ut=>ut.replace(/\\[0-9a-f]+/gi,Tt),en=(ut,Je,Rn,co,fo,Uo)=>{if(fo=fo||Uo,fo)return fo=et(fo),"'"+fo.replace(/\'/g,"\\'")+"'";if(Je=et(Je||Rn||co||""),!e.allow_script_urls){const vs=Je.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(vs)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(vs))return""}return ie&&(Je=ie.call(te,Je,"style")),"url('"+Je.replace(/\'/g,"\\'")+"')"};if(P){P=P.replace(/[\u0000-\u001F]/g,""),P=P.replace(/\\[\"\';:\uFEFF]/g,Ge).replace(/\"[^\"]+\"|\'[^\']+\'/g,Je=>Je.replace(/[;:]/g,Ge));let ut;for(;ut=r.exec(P);){r.lastIndex=ut.index+ut[0].length;let Je=ut[1].replace(c,"").toLowerCase(),Rn=ut[2].replace(c,"");if(Je&&Rn){if(Je=gn(Je),Rn=gn(Rn),Je.indexOf(y)!==-1||Je.indexOf('"')!==-1||!e.allow_script_urls&&(Je==="behavior"||/expression\s*\(|\/\*|\*\//.test(Rn)))continue;Je==="font-weight"&&Rn==="700"?Rn="bold":(Je==="color"||Je==="background-color")&&(Rn=Rn.toLowerCase()),Rn=Rn.replace(o,en),L[Je]=ce?et(Rn,!0):Rn}}ue("border","",!0),ue("border","-width"),ue("border","-color"),ue("border","-style"),ue("padding",""),ue("margin",""),De("border","border-width","border-style","border-color"),L.border==="medium none"&&delete L.border,L["border-image"]==="none"&&delete L["border-image"]}return L},serialize:(P,L)=>{let ce="";const ie=(ue,Be)=>{const De=Be[ue];if(De)for(let Ge=0,et=De.length;Ge<et;Ge++){const Tt=De[Ge],gn=P[Tt];gn&&(ce+=(ce.length>0?" ":"")+Tt+": "+gn+";")}},te=(ue,Be)=>{if(!b||!Be)return!0;let De=b["*"];return De&&De[ue]?!1:(De=b[Be],!(De&&De[ue]))};return L&&f?(ie("*",f),ie(L,f)):on(P,(ue,Be)=>{ue&&te(Be,L)&&(ce+=(ce.length>0?" ":"")+Be+": "+ue+";")}),ce}};return M},z0={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Yn=e=>e instanceof Event||ee(e.initEvent),uT=e=>e.isDefaultPrevented===Ie||e.isDefaultPrevented===kt,VC=e=>$t(e.preventDefault)||Yn(e),A1=(e,n)=>{const o=n??{};for(const r in e)go(z0,r)||(o[r]=e[r]);return ye(e.composedPath)&&(o.composedPath=()=>e.composedPath()),o},wh=(e,n,o,r)=>{var c;const u=A1(n,r);return u.type=e,$t(u.target)&&(u.target=(c=u.srcElement)!==null&&c!==void 0?c:o),VC(n)&&(u.preventDefault=()=>{u.defaultPrevented=!0,u.isDefaultPrevented=Ie,ee(n.preventDefault)&&n.preventDefault()},u.stopPropagation=()=>{u.cancelBubble=!0,u.isPropagationStopped=Ie,ee(n.stopPropagation)&&n.stopPropagation()},u.stopImmediatePropagation=()=>{u.isImmediatePropagationStopped=Ie,u.stopPropagation()},uT(u)||(u.isDefaultPrevented=u.defaultPrevented===!0?Ie:kt,u.isPropagationStopped=u.cancelBubble===!0?Ie:kt,u.isImmediatePropagationStopped=kt)),u},O1="mce-data-",Ch=/^(?:mouse|contextmenu)|click/,tg=(e,n,o,r)=>{e.addEventListener(n,o,r||!1)},yd=(e,n,o,r)=>{e.removeEventListener(n,o,r||!1)},V0=e=>ye(e)&&Ch.test(e.type),tf=(e,n)=>{const o=wh(e.type,e,document,n);if(V0(e)&&Bn(e.pageX)&&!Bn(e.clientX)){const r=o.target.ownerDocument||document,c=r.documentElement,u=r.body,f=o;f.pageX=e.clientX+(c&&c.scrollLeft||u&&u.scrollLeft||0)-(c&&c.clientLeft||u&&u.clientLeft||0),f.pageY=e.clientY+(c&&c.scrollTop||u&&u.scrollTop||0)-(c&&c.clientTop||u&&u.clientTop||0)}return o},dT=(e,n,o)=>{const r=e.document,c={type:"ready"};if(o.domLoaded){n(c);return}const u=()=>r.readyState==="complete"||r.readyState==="interactive"&&r.body,f=()=>{yd(e,"DOMContentLoaded",f),yd(e,"load",f),o.domLoaded||(o.domLoaded=!0,n(c)),e=null};u()?f():tg(e,"DOMContentLoaded",f),o.domLoaded||tg(e,"load",f)};class tm{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=O1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(n,o,r,c){const u=this;let f;const b=window,y=L=>{u.executeHandlers(tf(L||b.event),x)};if(!n||Zt(n)||ll(n))return r;let x;n[u.expando]?x=n[u.expando]:(x=u.count++,n[u.expando]=x,u.events[x]={}),c=c||n;const M=o.split(" ");let P=M.length;for(;P--;){let L=M[P],ce=y,ie=!1,te=!1;if(L==="DOMContentLoaded"&&(L="ready"),u.domLoaded&&L==="ready"&&n.readyState==="complete"){r.call(c,tf({type:L}));continue}!u.hasFocusIn&&(L==="focusin"||L==="focusout")&&(ie=!0,te=L==="focusin"?"focus":"blur",ce=ue=>{const Be=tf(ue||b.event);Be.type=Be.type==="focus"?"focusin":"focusout",u.executeHandlers(Be,x)}),f=u.events[x][L],f?L==="ready"&&u.domLoaded?r(tf({type:L})):f.push({func:r,scope:c}):(u.events[x][L]=f=[{func:r,scope:c}],f.fakeName=te,f.capture=ie,f.nativeHandler=ce,L==="ready"?dT(n,ce,u):tg(n,te||L,ce,ie))}return n=f=null,r}unbind(n,o,r){if(!n||Zt(n)||ll(n))return this;const c=n[this.expando];if(c){let u=this.events[c];if(o){const f=o.split(" ");let b=f.length;for(;b--;){const y=f[b],x=u[y];if(x){if(r){let M=x.length;for(;M--;)if(x[M].func===r){const P=x.nativeHandler,L=x.fakeName,ce=x.capture,ie=x.slice(0,M).concat(x.slice(M+1));ie.nativeHandler=P,ie.fakeName=L,ie.capture=ce,u[y]=ie}}(!r||x.length===0)&&(delete u[y],yd(n,x.fakeName||y,x.nativeHandler,x.capture))}}}else on(u,(f,b)=>{yd(n,f.fakeName||b,f.nativeHandler,f.capture)}),u={};for(const f in u)if(go(u,f))return this;delete this.events[c];try{delete n[this.expando]}catch{n[this.expando]=null}}return this}fire(n,o,r){return this.dispatch(n,o,r)}dispatch(n,o,r){if(!n||Zt(n)||ll(n))return this;const c=tf({type:o,target:n},r);do{const u=n[this.expando];u&&this.executeHandlers(c,u),n=n.parentNode||n.ownerDocument||n.defaultView||n.parentWindow}while(n&&!c.isPropagationStopped());return this}clean(n){if(!n||Zt(n)||ll(n))return this;if(n[this.expando]&&this.unbind(n),n.getElementsByTagName||(n=n.document),n&&n.getElementsByTagName){this.unbind(n);const o=n.getElementsByTagName("*");let r=o.length;for(;r--;)n=o[r],n[this.expando]&&this.unbind(n)}return this}destroy(){this.events={}}cancel(n){return n&&(n.preventDefault(),n.stopImmediatePropagation()),!1}executeHandlers(n,o){const r=this.events[o],c=r&&r[n.type];if(c)for(let u=0,f=c.length;u<f;u++){const b=c[u];if(b&&b.func.call(b.scope,n)===!1&&n.preventDefault(),n.isImmediatePropagationStopped())return}}}tm.Event=new tm;const ng=Dt.each,D1=Dt.grep,R1="data-mce-style",Bp=Dt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),$p=(e,n,o)=>{$t(o)||o===""?Yr(e,n):rr(e,n,o)},mT=e=>e.replace(/[A-Z]/g,n=>"-"+n.toLowerCase()),Fu=(e,n)=>{let o=0;if(e)for(let r=e.nodeType,c=e.previousSibling;c;c=c.previousSibling){const u=c.nodeType;n&&Zt(c)&&(u===r||!c.data.length)||(o++,r=u)}return o},Sh=(e,n)=>{const o=zr(n,"style"),r=e.serialize(e.parse(o),so(n));$p(n,R1,r)},cu=(e,n)=>at(e)?go(Bp,n)?e+"":e+"px":e,Bi=(e,n,o)=>{const r=mT(n);$t(o)||o===""?jo(e,r):j(e,r,cu(o,r))},Pp=(e,n,o)=>{const r=n.keep_values,c={set:(f,b,y)=>{const x=ve.fromDom(f);ee(n.url_converter)&&ye(b)&&(b=n.url_converter.call(n.url_converter_scope||o(),String(b),y,f));const M="data-mce-"+y;$p(x,M,b),$p(x,y,b)},get:(f,b)=>{const y=ve.fromDom(f);return zr(y,"data-mce-"+b)||zr(y,b)}},u={style:{set:(f,b)=>{const y=ve.fromDom(f);r&&$p(y,R1,b),Yr(y,"style"),Q(b)&&ke(y,e.parse(b))},get:f=>{const b=ve.fromDom(f),y=zr(b,R1)||zr(b,"style");return e.serialize(e.parse(y),so(b))}}};return r&&(u.href=u.src=c),u},yr=(e,n={})=>{const o={},r=window,c={};let u=0;const f=!0,b=!0,y=Mp.forElement(ve.fromDom(e),{contentCssCors:n.contentCssCors,referrerPolicy:n.referrerPolicy}),x=[],M=n.schema?n.schema:Pu({}),P=_1({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),L=n.ownEvents?new tm:tm.Event,ce=M.getBlockElements(),ie=tt=>Q(tt)?go(ce,tt):$n(tt)&&(go(ce,tt.nodeName)||Qf(M,tt)),te=tt=>tt&&e&&Q(tt)?e.getElementById(tt):tt,ue=tt=>{const it=te(tt);return ye(it)?ve.fromDom(it):null},Be=(tt,it,Yt="")=>{let Ft;const ro=ue(tt);if(ye(ro)&&Qo(ro)){const _s=Cp[it];_s&&_s.get?Ft=_s.get(ro.dom,it):Ft=zr(ro,it)}return ye(Ft)?Ft:Yt},De=tt=>{const it=te(tt);return $t(it)?[]:it.attributes},Ge=(tt,it,Yt)=>{po(tt,Ft=>{if($n(Ft)){const ro=ve.fromDom(Ft),_s=Yt===""?null:Yt,Fr=zr(ro,it),sr=Cp[it];sr&&sr.set?sr.set(ro.dom,_s,it):$p(ro,it,_s),Fr!==_s&&n.onSetAttrib&&n.onSetAttrib({attrElm:ro.dom,attrName:it,attrValue:_s})}})},et=(tt,it)=>tt.cloneNode(it),Tt=()=>n.root_element||e.body,gn=tt=>{const it=m1(tt);return{x:it.x,y:it.y,w:it.width,h:it.height}},en=(tt,it)=>ph(e.body,te(tt),it),ut=(tt,it,Yt)=>{po(tt,Ft=>{const ro=ve.fromDom(Ft);Bi(ro,it,Yt),n.update_styles&&Sh(P,ro)})},Je=(tt,it)=>{po(tt,Yt=>{const Ft=ve.fromDom(Yt);on(it,(ro,_s)=>{Bi(Ft,_s,ro)}),n.update_styles&&Sh(P,Ft)})},Rn=(tt,it,Yt)=>{const Ft=te(tt);if(!($t(Ft)||!$n(Ft)))return Yt?Ve(ve.fromDom(Ft),mT(it)):(it=it.replace(/-(\D)/g,(ro,_s)=>_s.toUpperCase()),it==="float"&&(it="cssFloat"),Ft.style?Ft.style[it]:void 0)},co=tt=>{const it=te(tt);if(!it)return{w:0,h:0};let Yt=Rn(it,"width"),Ft=Rn(it,"height");return(!Yt||Yt.indexOf("px")===-1)&&(Yt="0"),(!Ft||Ft.indexOf("px")===-1)&&(Ft="0"),{w:parseInt(Yt,10)||it.offsetWidth||it.clientWidth,h:parseInt(Ft,10)||it.offsetHeight||it.clientHeight}},fo=tt=>{const it=te(tt),Yt=en(it),Ft=co(it);return{x:Yt.x,y:Yt.y,w:Ft.w,h:Ft.h}},Uo=(tt,it)=>{if(!tt)return!1;const Yt=yt(tt)?tt:[tt];return se(Yt,Ft=>Ri(ve.fromDom(Ft),it))},vs=(tt,it,Yt,Ft)=>{const ro=[];let _s=te(tt);Ft=Ft===void 0;const Fr=Yt||(Tt().nodeName!=="BODY"?Tt().parentNode:null);if(Q(it))if(it==="*")it=$n;else{const sr=it;it=wu=>Uo(wu,sr)}for(;_s&&!(_s===Fr||$t(_s.nodeType)||oi(_s)||jm(_s));){if(!it||it(_s))if(Ft)ro.push(_s);else return[_s];_s=_s.parentNode}return Ft?ro:null},Ks=(tt,it,Yt)=>{const Ft=vs(tt,it,Yt,!1);return Ft&&Ft.length>0?Ft[0]:null},Gs=(tt,it,Yt)=>{let Ft=it;if(tt){Q(it)&&(Ft=ro=>Uo(ro,it));for(let ro=tt[Yt];ro;ro=ro[Yt])if(ee(Ft)&&Ft(ro))return ro}return null},Pa=(tt,it)=>Gs(tt,it,"nextSibling"),Ti=(tt,it)=>Gs(tt,it,"previousSibling"),Xt=tt=>ee(tt.querySelectorAll),Wo=(tt,it)=>{var Yt,Ft;const ro=(Ft=(Yt=te(it))!==null&&Yt!==void 0?Yt:n.root_element)!==null&&Ft!==void 0?Ft:e;return Xt(ro)?Do(ro.querySelectorAll(tt)):[]},po=function(tt,it,Yt){const Ft=Yt??this;if(yt(tt)){const ro=[];return ng(tt,(_s,Fr)=>{const sr=te(_s);sr&&ro.push(it.call(Ft,sr,Fr))}),ro}else{const ro=te(tt);return ro?it.call(Ft,ro):!1}},Mr=(tt,it)=>{po(tt,Yt=>{on(it,(Ft,ro)=>{Ge(Yt,ro,Ft)})})},On=(tt,it)=>{po(tt,Yt=>{const Ft=ve.fromDom(Yt);sh(Ft,it)})},Oo=(tt,it,Yt,Ft,ro)=>po(tt,_s=>{const Fr=Q(it)?e.createElement(it):it;return ye(Yt)&&Mr(Fr,Yt),Ft&&(!Q(Ft)&&Ft.nodeType?Fr.appendChild(Ft):Q(Ft)&&On(Fr,Ft)),ro?Fr:_s.appendChild(Fr)}),So=(tt,it,Yt)=>Oo(e.createElement(tt),tt,it,Yt,!0),Cn=tc.decode,gs=tc.encodeAllRaw,as=(tt,it,Yt="")=>{let Ft="<"+tt;for(const ro in it)gr(it,ro)&&(Ft+=" "+ro+'="'+gs(it[ro])+'"');return xs(Yt)&&go(M.getVoidElements(),tt)?Ft+" />":Ft+">"+Yt+"</"+tt+">"},ac=tt=>{const it=e.createElement("div"),Yt=e.createDocumentFragment();Yt.appendChild(it),tt&&(it.innerHTML=tt);let Ft;for(;Ft=it.firstChild;)Yt.appendChild(Ft);return Yt.removeChild(it),Yt},Tr=(tt,it)=>po(tt,Yt=>{const Ft=ve.fromDom(Yt);return it&&H(va(Ft),ro=>{Ds(ro)&&ro.dom.length===0?Fs(ro):os(Ft,ro)}),Fs(Ft),Ft.dom}),No=tt=>po(tt,it=>{const Yt=it.attributes;for(let Ft=Yt.length-1;Ft>=0;Ft--)it.removeAttributeNode(Yt.item(Ft))}),Is=tt=>P.parse(tt),Ea=(tt,it)=>P.serialize(tt,it),Cr=tt=>{if(jg!==yr.DOM&&e===document){if(o[tt])return;o[tt]=!0}let it=e.getElementById("mceDefaultStyles");if(!it){it=e.createElement("style"),it.id="mceDefaultStyles",it.type="text/css";const Yt=e.head;Yt.firstChild?Yt.insertBefore(it,Yt.firstChild):Yt.appendChild(it)}it.styleSheet?it.styleSheet.cssText+=tt:it.appendChild(e.createTextNode(tt))},Qr=tt=>{tt||(tt=""),H(tt.split(","),it=>{c[it]=!0,y.load(it).catch(Me)})},fa=(tt,it,Yt)=>{po(tt,Ft=>{if($n(Ft)){const ro=ve.fromDom(Ft),_s=it.split(" ");H(_s,Fr=>{ye(Yt)?(Yt?ku:Xl)(ro,Fr):Mm(ro,Fr)})}})},Ir=(tt,it)=>{fa(tt,it,!0)},Fa=(tt,it)=>{fa(tt,it,!1)},vu=(tt,it)=>{const Yt=ue(tt),Ft=it.split(" ");return ye(Yt)&&kn(Ft,ro=>Vd(Yt,ro))},fi=tt=>{po(tt,it=>jo(ve.fromDom(it),"display"))},_m=tt=>{po(tt,it=>j(ve.fromDom(it),"display","none"))},yu=tt=>{const it=ue(tt);return ye(it)&&ca(Co(it,"display"),"none")},s1=tt=>(tt||"mce_")+u++,r1=tt=>{const it=ue(tt);return ye(it)?$n(it.dom)?it.dom.outerHTML:eu(it):""},Am=(tt,it)=>{po(tt,Yt=>{$n(Yt)&&(Yt.outerHTML=it)})},Id=(tt,it)=>{const Yt=te(it);return po(tt,Ft=>{const ro=Yt==null?void 0:Yt.parentNode,_s=Yt==null?void 0:Yt.nextSibling;return ro&&(_s?ro.insertBefore(Ft,_s):ro.appendChild(Ft)),Ft})},ea=(tt,it,Yt)=>po(it,Ft=>{var ro;const _s=yt(it)?tt.cloneNode(!0):tt;return Yt&&ng(D1(Ft.childNodes),Fr=>{_s.appendChild(Fr)}),(ro=Ft.parentNode)===null||ro===void 0||ro.replaceChild(_s,Ft),Ft}),nd=(tt,it)=>{if(tt.nodeName!==it.toUpperCase()){const Yt=So(it);return ng(De(tt),Ft=>{Ge(Yt,Ft.nodeName,Be(tt,Ft.nodeName))}),ea(Yt,tt,!0),Yt}else return tt},Om=(tt,it)=>{let Yt=tt;for(;Yt;){let Ft=it;for(;Ft&&Yt!==Ft;)Ft=Ft.parentNode;if(Yt===Ft)break;Yt=Yt.parentNode}return!Yt&&tt.ownerDocument?tt.ownerDocument.documentElement:Yt},od=tt=>{if($n(tt)){const it=tt.nodeName.toLowerCase()==="a"&&!Be(tt,"href")&&Be(tt,"id");if(Be(tt,"name")||Be(tt,"data-mce-bookmark")||it)return!0}return!1},sd=(tt,it)=>{let Yt=0;if(od(tt))return!1;const Ft=tt.firstChild;if(Ft){const ro=new ya(Ft,tt),_s=M?M.getWhitespaceElements():{},Fr=it||(M?M.getNonEmptyElements():null);let sr=Ft;do{if($n(sr)){const wu=sr.getAttribute("data-mce-bogus");if(wu){sr=ro.next(wu==="all");continue}const SC=sr.nodeName.toLowerCase();if(Fr&&Fr[SC]){if(SC==="br"){Yt++,sr=ro.next();continue}return!1}if(od(sr))return!1}if(ll(sr)||Zt(sr)&&!Nl(sr.data)||Zt(sr)&&sr.parentNode&&_s[sr.parentNode.nodeName]&&Nl(sr.data))return!1;sr=ro.next()}while(sr)}return Yt<=1},Dm=()=>e.createRange(),Pc=(tt,it,Yt)=>{let Ft=Dm(),ro,_s;if(tt&&it&&tt.parentNode&&it.parentNode){const Fr=tt.parentNode;return Ft.setStart(Fr,Fu(tt)),Ft.setEnd(it.parentNode,Fu(it)),ro=Ft.extractContents(),Ft=Dm(),Ft.setStart(it.parentNode,Fu(it)+1),Ft.setEnd(Fr,Fu(tt)+1),_s=Ft.extractContents(),Fr.insertBefore(Xd(jg,ro),tt),Yt?Fr.insertBefore(Yt,tt):Fr.insertBefore(it,tt),Fr.insertBefore(Xd(jg,_s),tt),Tr(tt),Yt||it}else return},Rm=(tt,it,Yt,Ft)=>{if(yt(tt)){let ro=tt.length;const _s=[];for(;ro--;)_s[ro]=Rm(tt[ro],it,Yt,Ft);return _s}else return n.collect&&(tt===e||tt===r)&&x.push([tt,it,Yt,Ft]),L.bind(tt,it,Yt,Ft||jg)},Pf=(tt,it,Yt)=>{if(yt(tt)){let Ft=tt.length;const ro=[];for(;Ft--;)ro[Ft]=Pf(tt[Ft],it,Yt);return ro}else{if(x.length>0&&(tt===e||tt===r)){let Ft=x.length;for(;Ft--;){const[ro,_s,Fr]=x[Ft];tt===ro&&(!it||it===_s)&&(!Yt||Yt===Fr)&&L.unbind(ro,_s,Fr)}}return L.unbind(tt,it,Yt)}},rd=(tt,it,Yt)=>L.dispatch(tt,it,Yt),Zg=(tt,it,Yt)=>L.dispatch(tt,it,Yt),Gk=tt=>{if(tt&&$n(tt)){const it=tt.getAttribute("data-mce-contenteditable");return it&&it!=="inherit"?it:tt.contentEditable!=="inherit"?tt.contentEditable:null}else return null},jg={doc:e,settings:n,win:r,files:c,stdMode:f,boxModel:b,styleSheetLoader:y,boundEvents:x,styles:P,schema:M,events:L,isBlock:ie,root:null,clone:et,getRoot:Tt,getViewPort:gn,getRect:fo,getSize:co,getParent:Ks,getParents:vs,get:te,getNext:Pa,getPrev:Ti,select:Wo,is:Uo,add:Oo,create:So,createHTML:as,createFragment:ac,remove:Tr,setStyle:ut,getStyle:Rn,setStyles:Je,removeAllAttribs:No,setAttrib:Ge,setAttribs:Mr,getAttrib:Be,getPos:en,parseStyle:Is,serializeStyle:Ea,addStyle:Cr,loadCSS:Qr,addClass:Ir,removeClass:Fa,hasClass:vu,toggleClass:fa,show:fi,hide:_m,isHidden:yu,uniqueId:s1,setHTML:On,getOuterHTML:r1,setOuterHTML:Am,decode:Cn,encode:gs,insertAfter:Id,replace:ea,rename:nd,findCommonAncestor:Om,run:po,getAttribs:De,isEmpty:sd,createRng:Dm,nodeIndex:Fu,split:Pc,bind:Rm,unbind:Pf,fire:Zg,dispatch:rd,getContentEditable:Gk,getContentEditableParent:tt=>{const it=Tt();let Yt=null;for(let Ft=tt;Ft&&Ft!==it&&(Yt=Gk(Ft),Yt===null);Ft=Ft.parentNode);return Yt},destroy:()=>{if(x.length>0){let tt=x.length;for(;tt--;){const[it,Yt,Ft]=x[tt];L.unbind(it,Yt,Ft)}}on(c,(tt,it)=>{y.unload(it),delete c[it]})},isChildOf:(tt,it)=>tt===it||it.contains(tt),dumpRng:tt=>"startContainer: "+tt.startContainer.nodeName+", startOffset: "+tt.startOffset+", endContainer: "+tt.endContainer.nodeName+", endOffset: "+tt.endOffset},Cp=Pp(P,n,he(jg));return jg};yr.DOM=yr(document),yr.nodeIndex=Fu;const fT=yr.DOM,UC=0,iu=1,M1=2,WC=3;class wd{constructor(n={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=n}_setReferrerPolicy(n){this.settings.referrerPolicy=n}loadScript(n){return new Promise((o,r)=>{const c=fT;let u;const f=()=>{c.remove(x),u&&(u.onerror=u.onload=u=null)},b=()=>{f(),o()},y=()=>{f(),r("Failed to load script: "+n)},x=c.uniqueId();u=document.createElement("script"),u.id=x,u.type="text/javascript",u.src=Dt._addCacheSuffix(n),this.settings.referrerPolicy&&c.setAttrib(u,"referrerpolicy",this.settings.referrerPolicy),u.onload=b,u.onerror=y,(document.getElementsByTagName("head")[0]||document.body).appendChild(u)})}isDone(n){return this.states[n]===M1}markDone(n){this.states[n]=M1}add(n){const o=this;return o.queue.push(n),o.states[n]===void 0&&(o.states[n]=UC),new Promise((c,u)=>{o.scriptLoadedCallbacks[n]||(o.scriptLoadedCallbacks[n]=[]),o.scriptLoadedCallbacks[n].push({resolve:c,reject:u})})}load(n){return this.add(n)}remove(n){delete this.states[n],delete this.scriptLoadedCallbacks[n]}loadQueue(){const n=this.queue;return this.queue=[],this.loadScripts(n)}loadScripts(n){const o=this,r=(y,x)=>{cs(o.scriptLoadedCallbacks,x).each(M=>{H(M,P=>P[y](x))}),delete o.scriptLoadedCallbacks[x]},c=y=>{const x=Z(y,M=>M.status==="rejected");return x.length>0?Promise.reject(eo(x,({reason:M})=>yt(M)?M:[M])):Promise.resolve()},u=y=>Promise.allSettled(re(y,x=>o.states[x]===M1?(r("resolve",x),Promise.resolve()):o.states[x]===WC?(r("reject",x),Promise.reject(x)):(o.states[x]=iu,o.loadScript(x).then(()=>{o.states[x]=M1,r("resolve",x);const M=o.queue;return M.length>0?(o.queue=[],u(M).then(c)):Promise.resolve()},()=>(o.states[x]=WC,r("reject",x),Promise.reject(x)))))),f=y=>(o.loading=!0,u(y).then(x=>{o.loading=!1;const M=o.queueLoadedCallbacks.shift();return R.from(M).each(Vt),c(x)})),b=Hs(n);return o.loading?new Promise((y,x)=>{o.queueLoadedCallbacks.push(()=>f(b).then(y,x))}):f(b)}}wd.ScriptLoader=new wd;const fc=e=>{let n=e;return{get:()=>n,set:c=>{n=c}}},gT=e=>ht(e)&&go(e,"raw"),Fp=e=>yt(e)&&e.length>1,og={},xh=fc("en"),N1=()=>cs(og,xh.get()),Wc={getData:()=>qt(og,e=>({...e})),setCode:e=>{e&&xh.set(e)},getCode:()=>xh.get(),add:(e,n)=>{let o=og[e];o||(og[e]=o={}),on(n,(r,c)=>{o[c.toLowerCase()]=r})},translate:e=>{const n=N1().getOr({}),o=f=>ee(f)?Object.prototype.toString.call(f):r(f)?"":""+f,r=f=>f===""||f===null||f===void 0,c=f=>{const b=o(f);return cs(n,b.toLowerCase()).map(o).getOr(b)},u=f=>f.replace(/{context:\w+}$/,"");if(r(e))return"";if(gT(e))return o(e.raw);if(Fp(e)){const f=e.slice(1),b=c(e[0]).replace(/\{([0-9]+)\}/g,(y,x)=>go(f,x)?o(f[x]):y);return u(b)}return u(c(e))},isRtl:()=>N1().bind(e=>cs(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>go(og,e)},wi=()=>{const e=[],n={},o={},r=[],c=(te,ue)=>{const Be=Z(r,De=>De.name===te&&De.state===ue);H(Be,De=>De.resolve())},u=te=>go(n,te),f=te=>go(o,te),b=te=>{if(o[te])return o[te].instance},y=(te,ue)=>{const Be=Wc.getCode(),De=","+(ue||"")+",";!Be||ue&&De.indexOf(","+Be+",")===-1||wd.ScriptLoader.add(n[te]+"/langs/"+Be+".js")},x=(te,ue)=>{wi.languageLoad!==!1&&(u(te)?y(te,ue):ie(te,"loaded").then(()=>y(te,ue)))},M=(te,ue)=>(e.push(ue),o[te]={instance:ue},c(te,"added"),ue),P=te=>{delete n[te],delete o[te]},L=(te,ue)=>Q(ue)?Q(te)?{prefix:"",resource:ue,suffix:""}:{prefix:te.prefix,resource:ue,suffix:te.suffix}:ue,ce=(te,ue)=>{if(n[te])return Promise.resolve();let Be=Q(ue)?ue:ue.prefix+ue.resource+ue.suffix;Be.indexOf("/")!==0&&Be.indexOf("://")===-1&&(Be=wi.baseURL+"/"+Be),n[te]=Be.substring(0,Be.lastIndexOf("/"));const De=()=>(c(te,"loaded"),Promise.resolve());return o[te]?De():wd.ScriptLoader.add(Be).then(De)},ie=(te,ue="added")=>ue==="added"&&f(te)||ue==="loaded"&&u(te)?Promise.resolve():new Promise(Be=>{r.push({name:te,state:ue,resolve:Be})});return{items:e,urls:n,lookup:o,get:b,requireLangPack:x,add:M,remove:P,createUrl:L,load:ce,waitFor:ie}};wi.languageLoad=!0,wi.baseURL="",wi.PluginManager=wi(),wi.ThemeManager=wi(),wi.ModelManager=wi();const GC=e=>{const n=fc(R.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(R.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(R.some(b))}}},hT=e=>{const n=fc(R.none()),o=()=>n.get().each(b=>clearInterval(b));return{clear:()=>{o(),n.set(R.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:b=>{o(),n.set(R.some(setInterval(b,e)))}}},nf=()=>{const e=GC(Me);return{...e,on:o=>e.get().each(o)}},kh=(e,n)=>{let o=null;return{cancel:()=>{Y(o)||(clearTimeout(o),o=null)},throttle:(...u)=>{Y(o)&&(o=setTimeout(()=>{o=null,e.apply(null,u)},n))}}},B1=(e,n)=>{let o=null;const r=()=>{Y(o)||(clearTimeout(o),o=null)};return{cancel:r,throttle:(...u)=>{r(),o=setTimeout(()=>{o=null,e.apply(null,u)},n)}}},Ip=he("mce-annotation"),Iu=he("data-mce-annotation"),sg=he("data-mce-annotation-uid"),Th=he("data-mce-annotation-active"),Eh=he("data-mce-annotation-classes"),Sa=he("data-mce-annotation-attrs"),Lp=e=>n=>Ps(n,e),ua=(e,n)=>{const o=e.selection.getRng(),r=ve.fromDom(o.startContainer),c=ve.fromDom(e.getBody()),u=n.fold(()=>"."+Ip(),y=>`[${Iu()}="${y}"]`),f=Zd(r,o.startOffset).getOr(r);return fd(f,u,Lp(c)).bind(y=>Sc(y,`${sg()}`).bind(x=>Sc(y,`${Iu()}`).map(M=>{const P=pl(e,x);return{uid:x,name:M,elements:P}})))},Ki=e=>Qo(e)&&Vd(e,Ip()),nm=(e,n)=>Ol(e,"data-mce-bogus")||ih(e,'[data-mce-bogus="all"]',Lp(n)),pl=(e,n)=>{const o=ve.fromDom(e.getBody()),r=Ms(o,`[${sg()}="${n}"]`);return Z(r,c=>!nm(c,o))},qC=(e,n)=>{const o=ve.fromDom(e.getBody()),r=Ms(o,`[${Iu()}="${n}"]`),c={};return H(r,u=>{if(!nm(u,o)){const f=zr(u,sg()),b=cs(c,f).getOr([]);c[f]=b.concat([u])}}),c},pT=(e,n)=>{const o=fc({}),r=()=>({listeners:[],previous:nf()}),c=(P,L)=>{u(P,ce=>(L(ce),ce))},u=(P,L)=>{const ce=o.get(),ie=cs(ce,P).getOrThunk(r),te=L(ie);ce[P]=te,o.set(ce)},f=(P,L,ce)=>{c(P,ie=>{H(ie.listeners,te=>te(!0,P,{uid:L,nodes:re(ce,ue=>ue.dom)}))})},b=P=>{c(P,L=>{H(L.listeners,ce=>ce(!1,P))})},y=(P,L)=>{H(pl(e,P),ce=>{L?rr(ce,Th(),"true"):Yr(ce,Th())})},x=B1(()=>{const P=Bt(n.getNames());H(P,L=>{u(L,ce=>{const ie=ce.previous.get();return ua(e,R.some(L)).fold(()=>{ie.each(te=>{b(L),ce.previous.clear(),y(te,!1)})},({uid:te,name:ue,elements:Be})=>{ca(ie,te)||(ie.each(De=>y(De,!1)),f(ue,te,Be),ce.previous.set(te),y(te,!0))}),{previous:ce.previous,listeners:ce.listeners}})})},30);return e.on("remove",()=>{x.cancel()}),e.on("NodeChange",()=>{x.throttle()}),{addListener:(P,L)=>{u(P,ce=>({previous:ce.previous,listeners:ce.listeners.concat([L])}))}}},bT=(e,n)=>{const o=Iu(),r=u=>R.from(u.attr(o)).bind(n.lookup),c=u=>{var f,b;u.attr(sg(),null),u.attr(Iu(),null),u.attr(Th(),null);const y=R.from(u.attr(Sa())).map(L=>L.split(",")).getOr([]),x=R.from(u.attr(Eh())).map(L=>L.split(",")).getOr([]);H(y,L=>u.attr(L,null));const M=(b=(f=u.attr("class"))===null||f===void 0?void 0:f.split(" "))!==null&&b!==void 0?b:[],P=Re(M,[Ip()].concat(x));u.attr("class",P.length>0?P.join(" "):null),u.attr(Eh(),null),u.attr(Sa(),null)};e.serializer.addTempAttr(Th()),e.serializer.addAttributeFilter(o,u=>{for(const f of u)r(f).each(b=>{b.persistent===!1&&(f.name==="span"?f.unwrap():c(f))})})},bl=()=>{const e={};return{register:(c,u)=>{e[c]={name:c,settings:u}},lookup:c=>cs(e,c).map(u=>u.settings),getNames:()=>ze(e)}};let of=0;const KC=e=>{const o=new Date().getTime(),r=Math.floor(Math.random()*1e9);return of++,e+"_"+r+of+String(o)},YC=(e,n)=>{H(n,o=>{ku(e,o)})},U0=(e,n)=>{H(n,o=>{Xl(e,o)})},W0=(e,n)=>ve.fromDom(e.dom.cloneNode(n)),rg=e=>W0(e,!1),Z0=e=>W0(e,!0),XC=(e,n)=>{const o=ve.fromTag(n),r=Su(e);return Rs(o,r),o},JC=(e,n)=>{const o=XC(e,n);Dr(e,o);const r=va(e);return Fo(o,r),Fs(e),o},QC=(e,n,o=kt)=>{const r=new ya(e,n),c=u=>{let f;do f=r[u]();while(f&&!Zt(f)&&!o(f));return R.from(f).filter(Zt)};return{current:()=>R.from(r.current()).filter(Zt),next:()=>c("next"),prev:()=>c("prev"),prev2:()=>c("prev2")}},sf=(e,n)=>{const o=n||(f=>e.isBlock(f)||jr(f)||lr(f)),r=(f,b,y,x)=>{if(Zt(f)){const M=x(f,b,f.data);if(M!==-1)return R.some({container:f,offset:M})}return y().bind(M=>r(M.container,M.offset,y,x))};return{backwards:(f,b,y,x)=>{const M=QC(f,x??e.getRoot(),o);return r(f,b,()=>M.prev().map(P=>({container:P,offset:P.length})),y).getOrNull()},forwards:(f,b,y,x)=>{const M=QC(f,x??e.getRoot(),o);return r(f,b,()=>M.next().map(P=>({container:P,offset:0})),y).getOrNull()}}},_h=Math.round,ag=e=>e?{left:_h(e.left),top:_h(e.top),bottom:_h(e.bottom),right:_h(e.right),width:_h(e.width),height:_h(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},e2=(e,n)=>(e=ag(e),n||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),vT=(e,n)=>e.left===n.left&&e.top===n.top&&e.bottom===n.bottom&&e.right===n.right,j0=(e,n,o)=>e>=0&&e<=Math.min(n.height,o.height)/2,Hp=(e,n)=>{const o=Math.min(n.height/2,e.height/2);return e.bottom-o<n.top?!0:e.top>n.bottom?!1:j0(n.top-e.bottom,e,n)},zp=(e,n)=>e.top>n.bottom?!0:e.bottom<n.top?!1:j0(n.bottom-e.top,e,n),t2=(e,n,o)=>n>=e.left&&n<=e.right&&o>=e.top&&o<=e.bottom,yT=e=>Pe(e,(n,o)=>n.fold(()=>R.some(o),r=>{const c=Math.min(o.left,r.left),u=Math.min(o.top,r.top),f=Math.max(o.right,r.right),b=Math.max(o.bottom,r.bottom);return R.some({top:u,right:f,bottom:b,left:c,width:f-c,height:b-u})}),R.none()),n2=(e,n,o)=>{const r=Math.max(Math.min(n,e.left+e.width),e.left),c=Math.max(Math.min(o,e.top+e.height),e.top);return Math.sqrt((n-r)*(n-r)+(o-c)*(o-c))},Wa=(e,n)=>Math.max(0,Math.min(e.bottom,n.bottom)-Math.max(e.top,n.top)),$1=(e,n,o)=>Math.min(Math.max(e,n),o),Vp=e=>{const n=e.startContainer,o=e.startOffset;return n===e.endContainer&&n.hasChildNodes()&&e.endOffset===o+1?n.childNodes[o]:null},rf=(e,n)=>{if($n(e)&&e.hasChildNodes()){const o=e.childNodes,r=$1(n,0,o.length-1);return o[r]}else return e},P1=(e,n)=>{if(!(n<0&&$n(e)&&e.hasChildNodes()))return rf(e,n)},Ci=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),vl=e=>Q(e)&&e.charCodeAt(0)>=768&&Ci.test(e),wT=(...e)=>n=>{for(let o=0;o<e.length;o++)if(e[o](n))return!0;return!1},af=(...e)=>n=>{for(let o=0;o<e.length;o++)if(!e[o](n))return!1;return!0},o2=$n,Ah=yi,s2=lh("display","block table"),r2=lh("float","left right"),om=af(o2,Ah,Kt(r2)),CT=Kt(lh("white-space","pre pre-line pre-wrap")),da=Zt,$l=jr,Oh=yr.nodeIndex,F1=P1,I1=e=>e?e.createRange():yr.DOM.createRng(),Up=e=>Q(e)&&/[\r\n\t ]/.test(e),sm=e=>!!e.setStart&&!!e.setEnd,L1=e=>{const n=e.startContainer,o=e.startOffset;if(Up(e.toString())&&CT(n.parentNode)&&Zt(n)){const r=n.data;if(Up(r[o-1])||Up(r[o+1]))return!0}return!1},Dh=e=>{const n=e.ownerDocument,o=I1(n),r=n.createTextNode(ia),c=e.parentNode;c.insertBefore(r,e),o.setStart(r,0),o.setEnd(r,1);const u=ag(o.getBoundingClientRect());return c.removeChild(r),u},G0=e=>{const n=e.startContainer,o=e.endContainer,r=e.startOffset,c=e.endOffset;if(n===o&&Zt(o)&&r===0&&c===1){const u=e.cloneRange();return u.setEndAfter(o),rm(u)}else return null},cg=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,rm=e=>{var n;let o;const r=e.getClientRects();return r.length>0?o=ag(r[0]):o=ag(e.getBoundingClientRect()),!sm(e)&&$l(e)&&cg(o)?Dh(e):cg(o)&&sm(e)&&(n=G0(e))!==null&&n!==void 0?n:o},cf=(e,n)=>{const o=e2(e,n);return o.width=1,o.right=o.left+1,o},a2=e=>{const n=[],o=f=>{f.height!==0&&(n.length>0&&vT(f,n[n.length-1])||n.push(f))},r=(f,b)=>{const y=I1(f.ownerDocument);if(b<f.data.length){if(vl(f.data[b]))return;if(vl(f.data[b-1])&&(y.setStart(f,b),y.setEnd(f,b+1),!L1(y))){o(cf(rm(y),!1));return}}b>0&&(y.setStart(f,b-1),y.setEnd(f,b),L1(y)||o(cf(rm(y),!1))),b<f.data.length&&(y.setStart(f,b),y.setEnd(f,b+1),L1(y)||o(cf(rm(y),!0)))},c=e.container(),u=e.offset();if(da(c))return r(c,u),n;if(o2(c))if(e.isAtEnd()){const f=F1(c,u);da(f)&&r(f,f.data.length),om(f)&&!$l(f)&&o(cf(rm(f),!1))}else{const f=F1(c,u);if(da(f)&&r(f,0),om(f)&&e.isAtEnd())return o(cf(rm(f),!1)),n;const b=F1(e.container(),e.offset()-1);om(b)&&!$l(b)&&(s2(b)||s2(f)||!om(f))&&o(cf(rm(b),!1)),om(f)&&o(cf(rm(f),!0))}return n},bt=(e,n,o)=>{const r=()=>(da(e),n===0),c=()=>da(e)?n>=e.data.length:n>=e.childNodes.length,u=()=>{const M=I1(e.ownerDocument);return M.setStart(e,n),M.setEnd(e,n),M},f=()=>(o||(o=a2(bt(e,n))),o),b=()=>f().length>0,y=M=>M&&e===M.container()&&n===M.offset(),x=M=>F1(e,M?n-1:n);return{container:he(e),offset:he(n),toRange:u,getClientRects:f,isVisible:b,isAtStart:r,isAtEnd:c,isEqual:y,getNode:x}};bt.fromRangeStart=e=>bt(e.startContainer,e.startOffset),bt.fromRangeEnd=e=>bt(e.endContainer,e.endOffset),bt.after=e=>bt(e.parentNode,Oh(e)+1),bt.before=e=>bt(e.parentNode,Oh(e)),bt.isAbove=(e,n)=>Zr(An(n.getClientRects()),Tn(e.getClientRects()),Hp).getOr(!1),bt.isBelow=(e,n)=>Zr(Tn(n.getClientRects()),An(e.getClientRects()),zp).getOr(!1),bt.isAtStart=e=>e?e.isAtStart():!1,bt.isAtEnd=e=>e?e.isAtEnd():!1,bt.isTextPosition=e=>e?Zt(e.container()):!1,bt.isElementPosition=e=>!bt.isTextPosition(e);const Rh=(e,n)=>{Zt(n)&&n.data.length===0&&e.remove(n)},ST=(e,n,o)=>{n.insertNode(o),Rh(e,o.previousSibling),Rh(e,o.nextSibling)},q0=(e,n,o)=>{const r=R.from(o.firstChild),c=R.from(o.lastChild);n.insertNode(o),r.each(u=>Rh(e,u.previousSibling)),c.each(u=>Rh(e,u.nextSibling))},H1=(e,n,o)=>{jm(o)?q0(e,n,o):ST(e,n,o)},xa=Zt,c2=Du,i2=yr.nodeIndex,Wp=e=>{const n=e.parentNode;return c2(n)?Wp(n):n},am=e=>e?ct(e.childNodes,(n,o)=>(c2(o)&&o.nodeName!=="BR"?n=n.concat(am(o)):n.push(o),n),[]):[],Mh=(e,n)=>{let o=e;for(;(o=o.previousSibling)&&xa(o);)n+=o.data.length;return n},ds=e=>n=>e===n,Yi=e=>{let n,o;n=am(Wp(e)),o=vt(n,ds(e),e),n=n.slice(0,o+1);const r=ct(n,(c,u,f)=>(xa(u)&&xa(n[f-1])&&c++,c),0);return n=we(n,il([e.nodeName])),o=vt(n,ds(e),e),o-r},lf=e=>(xa(e)?"text()":e.nodeName.toLowerCase())+"["+Yi(e)+"]",K0=(e,n,o)=>{const r=[];for(let c=n.parentNode;c&&c!==e&&!(o&&o(c));c=c.parentNode)r.push(c);return r},wr=(e,n)=>{let o=[],r=n.container(),c=n.offset(),u;if(xa(r))u=Mh(r,c);else{const b=r.childNodes;c>=b.length?(u="after",c=b.length-1):u="before",r=b[c]}o.push(lf(r));let f=K0(e,r);return f=we(f,Kt(Du)),o=o.concat(_a(f,b=>lf(b))),o.reverse().join("/")+","+u},Y0=(e,n,o)=>{let r=am(e);return r=we(r,(c,u)=>!xa(c)||!xa(r[u-1])),r=we(r,il([n])),r[o]},Zp=(e,n)=>{let o=e,r=0;for(;xa(o);){const c=o.data.length;if(n>=r&&n<=r+c){e=o,n=n-r;break}if(!xa(o.nextSibling)){e=o,n=c;break}r+=c,o=o.nextSibling}return xa(e)&&n>e.data.length&&(n=e.data.length),bt(e,n)},gc=(e,n)=>{if(!n)return null;const o=n.split(","),r=o[0].split("/"),c=o.length>1?o[1]:"before",u=ct(r,(f,b)=>{const y=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(b);return y?(y[1]==="text()"&&(y[1]="#text"),Y0(f,y[1],parseInt(y[2],10))):null},e);if(!u)return null;if(!xa(u)&&u.parentNode){let f;return c==="after"?f=i2(u)+1:f=i2(u),bt(u.parentNode,f)}return Zp(u,parseInt(c,10))},Lu=lr,$i=(e,n,o)=>{let r=e(n.data.slice(0,o)).length;for(let c=n.previousSibling;c&&Zt(c);c=c.previousSibling)r+=e(c.data).length;return r},jp=(e,n,o,r,c)=>{const u=c?r.startContainer:r.endContainer;let f=c?r.startOffset:r.endOffset;const b=[],y=e.getRoot();if(Zt(u))b.push(o?$i(n,u,f):f);else{let x=0;const M=u.childNodes;f>=M.length&&M.length&&(x=1,f=Math.max(0,M.length-1)),b.push(e.nodeIndex(M[f],o)+x)}for(let x=u;x&&x!==y;x=x.parentNode)b.push(e.nodeIndex(x,o));return b},xT=(e,n,o,r)=>{const c=n.dom,u=jp(c,e,o,r,!0),f=n.isForward(),b=ri(r)?{isFakeCaret:!0}:{};if(n.isCollapsed())return{start:u,forward:f,...b};{const y=jp(c,e,o,r,!1);return{start:u,end:y,forward:f,...b}}},Nh=(e,n,o)=>{let r=0;return Dt.each(e.select(n),c=>{if(c.getAttribute("data-mce-bogus")!=="all"){if(c===o)return!1;r++;return}}),r},z1=(e,n)=>{let o=n?e.startContainer:e.endContainer,r=n?e.startOffset:e.endOffset;if($n(o)&&o.nodeName==="TR"){const c=o.childNodes;o=c[Math.min(n?r:r-1,c.length-1)],o&&(r=n?0:o.childNodes.length,n?e.setStart(o,r):e.setEnd(o,r))}},V1=e=>(z1(e,!0),z1(e,!1),e),U1=(e,n)=>{if($n(e)&&(e=rf(e,n),Lu(e)))return e;if(V(e)){Zt(e)&&k(e)&&(e=e.parentNode);let o=e.previousSibling;if(Lu(o)||(o=e.nextSibling,Lu(o)))return o}},l2=e=>U1(e.startContainer,e.startOffset)||U1(e.endContainer,e.endOffset),X0=(e,n,o)=>{const r=o.getNode(),c=o.getRng();if(r.nodeName==="IMG"||Lu(r)){const f=r.nodeName;return{name:f,index:Nh(o.dom,f,r)}}const u=l2(c);if(u){const f=u.tagName;return{name:f,index:Nh(o.dom,f,u)}}return xT(e,o,n,c)},u2=e=>{const n=e.getRng();return{start:wr(e.dom.getRoot(),bt.fromRangeStart(n)),end:wr(e.dom.getRoot(),bt.fromRangeEnd(n)),forward:e.isForward()}},W1=e=>({rng:e.getRng(),forward:e.isForward()}),ig=(e,n,o)=>{const r={"data-mce-type":"bookmark",id:n,style:"overflow:hidden;line-height:0px"};return o?e.create("span",r,"&#xFEFF;"):e.create("span",r)},yl=(e,n)=>{const o=e.dom;let r=e.getRng();const c=o.uniqueId(),u=e.isCollapsed(),f=e.getNode(),b=f.nodeName,y=e.isForward();if(b==="IMG")return{name:b,index:Nh(o,b,f)};const x=V1(r.cloneRange());if(!u){x.collapse(!1);const P=ig(o,c+"_end",n);H1(o,x,P)}r=V1(r),r.collapse(!0);const M=ig(o,c+"_start",n);return H1(o,r,M),e.moveToBookmark({id:c,keep:!0,forward:y}),{id:c,forward:y}},kT=(e,n,o=!1)=>n===2?X0(Ra,o,e):n===3?u2(e):n?W1(e):yl(e,!1),nc=fe(X0,Ue,!0),d2=e=>{const n=u=>u(e),o=he(e),r=()=>c,c={tag:!0,inner:e,fold:(u,f)=>f(e),isValue:Ie,isError:kt,map:u=>Si.value(u(e)),mapError:r,bind:n,exists:n,forall:n,getOr:o,or:r,getOrThunk:o,orThunk:r,getOrDie:o,each:u=>{u(e)},toOptional:()=>R.some(e)};return c},cm=e=>{const n=()=>o,o={tag:!1,inner:e,fold:(r,c)=>r(e),isValue:kt,isError:Ie,map:n,mapError:r=>Si.error(r(e)),bind:n,exists:kt,forall:Ie,getOr:Ue,or:Ue,getOrThunk:Fe,orThunk:Fe,getOrDie:nn(String(e)),each:Me,toOptional:R.none};return o},Si={value:d2,error:cm,fromOption:(e,n)=>e.fold(()=>cm(n),d2)},lu={generate:e=>{if(!yt(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const n=[],o={};return H(e,(r,c)=>{const u=ze(r);if(u.length!==1)throw new Error("one and only one name per case");const f=u[0],b=r[f];if(o[f]!==void 0)throw new Error("duplicate key detected:"+f);if(f==="cata")throw new Error("cannot have a case named cata (sorry)");if(!yt(b))throw new Error("case arguments must be an array");n.push(f),o[f]=(...y)=>{const x=y.length;if(x!==b.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+b.length+" ("+b+"), got "+x);return{fold:(...P)=>{if(P.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+P.length);return P[c].apply(null,y)},match:P=>{const L=ze(P);if(n.length!==L.length)throw new Error("Wrong number of arguments to match. Expected: "+n.join(",")+`
Actual: `+L.join(","));if(!kn(n,ie=>ae(L,ie)))throw new Error("Not all branches were specified when using match. Specified: "+L.join(", ")+`
Required: `+n.join(", "));return P[f].apply(null,y)},log:P=>{console.log(P,{constructors:n,constructor:f,params:y})}}}}),o}};lu.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const J0=e=>{const n=[],o=[];return H(e,r=>{r.fold(c=>{n.push(c)},c=>{o.push(c)})}),{errors:n,values:o}},m2=e=>e.type==="inline-command"||e.type==="inline-format",ET=e=>e.type==="block-command"||e.type==="block-format",_T=e=>{const n=r=>Si.error({message:r,pattern:e}),o=(r,c,u)=>{if(e.format!==void 0){let f;if(yt(e.format)){if(!kn(e.format,Q))return n(r+" pattern has non-string items in the `format` array");f=e.format}else if(Q(e.format))f=[e.format];else return n(r+" pattern has non-string `format` parameter");return Si.value(c(f))}else return e.cmd!==void 0?Q(e.cmd)?Si.value(u(e.cmd,e.value)):n(r+" pattern has non-string `cmd` parameter"):n(r+" pattern is missing both `format` and `cmd` parameters")};if(!ht(e))return n("Raw pattern is not an object");if(!Q(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!Q(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let r=e.start,c=e.end;return c.length===0&&(c=r,r=""),o("Inline",u=>({type:"inline-format",start:r,end:c,format:u}),(u,f)=>({type:"inline-command",start:r,end:c,cmd:u,value:f}))}else return e.replacement!==void 0?Q(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):Si.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter"):e.start.length===0?n("Block pattern has empty `start` parameter"):o("Block",r=>({type:"block-format",start:e.start,format:r[0]}),(r,c)=>({type:"block-command",start:e.start,cmd:r,value:c}))},Ac=e=>Z(e,ET),Oc=e=>Z(e,m2),ci=(e,n)=>({inlinePatterns:Oc(e),blockPatterns:Ac(e),dynamicPatternsLookup:n}),Zc=e=>{const n=J0(re(e,_T));return H(n.errors,o=>console.error(o.message,o.pattern)),n.values},Xi=e=>n=>{const o=e(n);return Zc(o)},Za=Pr().deviceType,j1=Za.isTouch(),G1=yr.DOM,f2=e=>{const n=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Pe(n,(o,r)=>{const c=r.split("="),u=c[0],f=c.length>1?c[1]:u;return o[qo(u)]=qo(f),o},{})},q1=e=>Te(e,RegExp),Wn=e=>n=>n.options.get(e),lg=e=>Q(e)||ht(e),K1=(e,n="")=>o=>{const r=Q(o);if(r)if(o.indexOf("=")!==-1){const c=f2(o);return{value:cs(c,e.id).getOr(n),valid:r}}else return{value:o,valid:r};else return{valid:!1,message:"Must be a string."}},Q0=e=>{const n=e.options.register;n("id",{processor:"string",default:e.id}),n("selector",{processor:"string"}),n("target",{processor:"object"}),n("suffix",{processor:"string"}),n("cache_suffix",{processor:"string"}),n("base_url",{processor:"string"}),n("referrer_policy",{processor:"string",default:""}),n("language_load",{processor:"boolean",default:!0}),n("inline",{processor:"boolean",default:!1}),n("iframe_attrs",{processor:"object",default:{}}),n("doctype",{processor:"string",default:"<!DOCTYPE html>"}),n("document_base_url",{processor:"string",default:e.documentBaseUrl}),n("body_id",{processor:K1(e,"tinymce"),default:"tinymce"}),n("body_class",{processor:K1(e),default:""}),n("content_security_policy",{processor:"string",default:""}),n("br_in_pre",{processor:"boolean",default:!0}),n("forced_root_block",{processor:o=>{const r=Q(o)&&Cs(o);return r?{value:o,valid:r}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),n("forced_root_block_attrs",{processor:"object",default:{}}),n("newline_behavior",{processor:o=>{const r=ae(["block","linebreak","invert","default"],o);return r?{value:o,valid:r}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),n("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),n("no_newline_selector",{processor:"string",default:""}),n("keep_styles",{processor:"boolean",default:!0}),n("end_container_on_empty_block",{processor:o=>Ot(o)?{valid:!0,value:o}:Q(o)?{valid:!0,value:o}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),n("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),n("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),n("font_size_classes",{processor:"string",default:""}),n("automatic_uploads",{processor:"boolean",default:!0}),n("images_reuse_filename",{processor:"boolean",default:!1}),n("images_replace_blob_uris",{processor:"boolean",default:!0}),n("icons",{processor:"string",default:""}),n("icons_url",{processor:"string",default:""}),n("images_upload_url",{processor:"string",default:""}),n("images_upload_base_path",{processor:"string",default:""}),n("images_upload_credentials",{processor:"boolean",default:!1}),n("images_upload_handler",{processor:"function"}),n("language",{processor:"string",default:"en"}),n("language_url",{processor:"string",default:""}),n("entity_encoding",{processor:"string",default:"named"}),n("indent",{processor:"boolean",default:!0}),n("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),n("indent_use_margin",{processor:"boolean",default:!1}),n("indentation",{processor:"string",default:"40px"}),n("content_css",{processor:o=>{const r=o===!1||Q(o)||Le(o,Q);return r?Q(o)?{value:re(o.split(","),qo),valid:r}:yt(o)?{value:o,valid:r}:o===!1?{value:[],valid:r}:{value:o,valid:r}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:ry(e)?[]:["default"]}),n("content_style",{processor:"string"}),n("content_css_cors",{processor:"boolean",default:!1}),n("font_css",{processor:o=>{const r=Q(o)||Le(o,Q);return r?{value:yt(o)?o:re(o.split(","),qo),valid:r}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),n("inline_boundaries",{processor:"boolean",default:!0}),n("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),n("object_resizing",{processor:o=>{const r=Ot(o)||Q(o);return r?o===!1||Za.isiPhone()||Za.isiPad()?{value:"",valid:r}:{value:o===!0?"table,img,figure.image,div,video,iframe":o,valid:r}:{valid:!1,message:"Must be boolean or a string"}},default:!j1}),n("resize_img_proportional",{processor:"boolean",default:!0}),n("event_root",{processor:"object"}),n("service_message",{processor:"string"}),n("theme",{processor:o=>o===!1||Q(o)||ee(o),default:"silver"}),n("theme_url",{processor:"string"}),n("formats",{processor:"object"}),n("format_empty_lines",{processor:"boolean",default:!1}),n("format_noneditable_selector",{processor:"string",default:""}),n("preview_styles",{processor:o=>{const r=o===!1||Q(o);return r?{value:o===!1?"":o,valid:r}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),n("custom_ui_selector",{processor:"string",default:""}),n("hidden_input",{processor:"boolean",default:!0}),n("submit_patch",{processor:"boolean",default:!0}),n("encoding",{processor:"string"}),n("add_form_submit_trigger",{processor:"boolean",default:!0}),n("add_unload_trigger",{processor:"boolean",default:!0}),n("custom_undo_redo_levels",{processor:"number",default:0}),n("disable_nodechange",{processor:"boolean",default:!1}),n("readonly",{processor:"boolean",default:!1}),n("plugins",{processor:"string[]",default:[]}),n("external_plugins",{processor:"object"}),n("forced_plugins",{processor:"string[]"}),n("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),n("model_url",{processor:"string"}),n("block_unsupported_drop",{processor:"boolean",default:!0}),n("visual",{processor:"boolean",default:!0}),n("visual_table_class",{processor:"string",default:"mce-item-table"}),n("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),n("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),n("setup",{processor:"function"}),n("init_instance_callback",{processor:"function"}),n("url_converter",{processor:"function",default:e.convertURL}),n("url_converter_scope",{processor:"object",default:e}),n("urlconverter_callback",{processor:"function"}),n("allow_conditional_comments",{processor:"boolean",default:!1}),n("allow_html_data_urls",{processor:"boolean",default:!1}),n("allow_svg_data_urls",{processor:"boolean"}),n("allow_html_in_named_anchor",{processor:"boolean",default:!1}),n("allow_script_urls",{processor:"boolean",default:!1}),n("allow_unsafe_link_target",{processor:"boolean",default:!1}),n("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),n("fix_list_elements",{processor:"boolean",default:!1}),n("preserve_cdata",{processor:"boolean",default:!1}),n("remove_trailing_brs",{processor:"boolean"}),n("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),n("element_format",{processor:"string",default:"html"}),n("entities",{processor:"string"}),n("schema",{processor:"string",default:"html5"}),n("convert_urls",{processor:"boolean",default:!0}),n("relative_urls",{processor:"boolean",default:!0}),n("remove_script_host",{processor:"boolean",default:!0}),n("custom_elements",{processor:"string"}),n("extended_valid_elements",{processor:"string"}),n("invalid_elements",{processor:"string"}),n("invalid_styles",{processor:lg}),n("valid_children",{processor:"string"}),n("valid_classes",{processor:lg}),n("valid_elements",{processor:"string"}),n("valid_styles",{processor:lg}),n("verify_html",{processor:"boolean",default:!0}),n("auto_focus",{processor:o=>Q(o)||o===!0}),n("browser_spellcheck",{processor:"boolean",default:!1}),n("protect",{processor:"array"}),n("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),n("deprecation_warnings",{processor:"boolean",default:!0}),n("a11y_advanced_options",{processor:"boolean",default:!1}),n("api_key",{processor:"string"}),n("paste_block_drop",{processor:"boolean",default:!1}),n("paste_data_images",{processor:"boolean",default:!0}),n("paste_preprocess",{processor:"function"}),n("paste_postprocess",{processor:"function"}),n("paste_webkit_styles",{processor:"string",default:"none"}),n("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),n("paste_merge_formats",{processor:"boolean",default:!0}),n("smart_paste",{processor:"boolean",default:!0}),n("paste_as_text",{processor:"boolean",default:!1}),n("paste_tab_spaces",{processor:"number",default:4}),n("text_patterns",{processor:o=>Le(o,ht)||o===!1?{value:Zc(o===!1?[]:o),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),n("text_patterns_lookup",{processor:o=>ee(o)?{value:Xi(o),valid:!0}:{valid:!1,message:"Must be a single function"},default:o=>[]}),n("noneditable_class",{processor:"string",default:"mceNonEditable"}),n("editable_class",{processor:"string",default:"mceEditable"}),n("noneditable_regexp",{processor:o=>Le(o,q1)?{value:o,valid:!0}:q1(o)?{value:[o],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),n("table_tab_navigation",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{n("directionality",{processor:"string",default:Wc.isRtl()?"rtl":void 0}),n("placeholder",{processor:"string",default:G1.getAttrib(e.getElement(),"placeholder")})})},AT=Wn("iframe_attrs"),sO=Wn("doctype"),g2=Wn("document_base_url"),OT=Wn("body_id"),DT=Wn("body_class"),Y1=Wn("content_security_policy"),RT=Wn("br_in_pre"),wl=Wn("forced_root_block"),Gp=Wn("forced_root_block_attrs"),MT=Wn("newline_behavior"),h2=Wn("br_newline_selector"),mn=Wn("no_newline_selector"),NT=Wn("keep_styles"),hc=Wn("end_container_on_empty_block"),p2=Wn("automatic_uploads"),ey=Wn("images_reuse_filename"),BT=Wn("images_replace_blob_uris"),Pl=Wn("icons"),rO=Wn("icons_url"),$T=Wn("images_upload_url"),im=Wn("images_upload_base_path"),b2=Wn("images_upload_credentials"),ty=Wn("images_upload_handler"),Ji=Wn("content_css_cors"),Fl=Wn("referrer_policy"),X1=Wn("language"),Hu=Wn("language_url"),v2=Wn("indent_use_margin"),qp=Wn("indentation"),ja=Wn("content_css"),y2=Wn("content_style"),uf=Wn("font_css"),J1=Wn("directionality"),w2=Wn("inline_boundaries_selector"),ny=Wn("object_resizing"),PT=Wn("resize_img_proportional"),FT=Wn("placeholder"),oy=Wn("event_root"),IT=Wn("service_message"),ug=Wn("theme"),Kp=Wn("theme_url"),Q1=Wn("model"),sy=Wn("model_url"),dg=Wn("inline_boundaries"),mg=Wn("formats"),Bh=Wn("preview_styles"),Yp=Wn("format_empty_lines"),LT=Wn("format_noneditable_selector"),C2=Wn("custom_ui_selector"),ry=Wn("inline"),ay=Wn("hidden_input"),HT=Wn("submit_patch"),fg=Wn("add_form_submit_trigger"),Wr=Wn("add_unload_trigger"),cy=Wn("custom_undo_redo_levels"),ii=Wn("disable_nodechange"),iy=Wn("readonly"),ly=Wn("content_css_cors"),Xp=Wn("plugins"),ev=Wn("external_plugins"),Jp=Wn("block_unsupported_drop"),S2=Wn("visual"),aO=Wn("visual_table_class"),df=Wn("visual_anchor_class"),zT=Wn("iframe_aria_text"),VT=Wn("setup"),UT=Wn("init_instance_callback"),WT=Wn("urlconverter_callback"),x2=Wn("auto_focus"),uy=Wn("browser_spellcheck"),ZT=Wn("protect"),jT=Wn("paste_block_drop"),tv=Wn("paste_data_images"),GT=Wn("paste_preprocess"),k2=Wn("paste_postprocess"),qT=Wn("paste_webkit_styles"),Qp=Wn("paste_remove_styles_if_webkit"),dy=Wn("paste_merge_formats"),T2=Wn("smart_paste"),E2=Wn("paste_as_text"),_2=Wn("paste_tab_spaces"),gg=Wn("allow_html_data_urls"),hg=Wn("text_patterns"),mf=Wn("text_patterns_lookup"),$h=Wn("noneditable_class"),A2=Wn("editable_class"),lm=Wn("noneditable_regexp"),my=Wn("preserve_cdata"),KT=e=>e.options.isSet("text_patterns_lookup"),ff=e=>Dt.explode(e.options.get("font_size_style_values")),nv=e=>Dt.explode(e.options.get("font_size_classes")),YT=e=>e.options.get("encoding")==="xml",fy=e=>Dt.explode(e.options.get("images_file_types")),XT=Wn("table_tab_navigation"),JT=$n,gy=Zt,O2=e=>{const n=e.parentNode;n&&n.removeChild(e)},D2=e=>{const n=Ra(e);return{count:e.length-n.length,text:n}},hy=e=>{let n;for(;(n=e.data.lastIndexOf(Sr))!==-1;)e.deleteData(n,1)},R2=(e,n)=>(Cd(e),n),M2=(e,n)=>{const o=D2(e.data.substr(0,n.offset())),r=D2(e.data.substr(n.offset()));return(o.text+r.text).length>0?(hy(e),bt(e,n.offset()-o.count)):n},QT=(e,n)=>{const o=n.container(),r=Ee(Do(o.childNodes),e).map(c=>c<n.offset()?bt(o,n.offset()-1):n).getOr(n);return Cd(e),r},ov=(e,n)=>gy(e)&&n.container()===e?M2(e,n):R2(e,n),N2=(e,n)=>n.container()===e.parentNode?QT(e,n):R2(e,n),sv=(e,n)=>bt.isTextPosition(n)?ov(e,n):N2(e,n),Cd=e=>{JT(e)&&V(e)&&(_e(e)?e.removeAttribute("data-mce-caret"):O2(e)),gy(e)&&(hy(e),e.data.length===0&&O2(e))},py=lr,by=nu,B2=Ru,$2="*[contentEditable=false],video,audio,embed,object",vy=(e,n,o)=>{const r=e2(n.getBoundingClientRect(),o);let c,u;if(e.tagName==="BODY"){const b=e.ownerDocument.documentElement;c=e.scrollLeft||b.scrollLeft,u=e.scrollTop||b.scrollTop}else{const b=e.getBoundingClientRect();c=e.scrollLeft-b.left,u=e.scrollTop-b.top}r.left+=c,r.right+=c,r.top+=u,r.bottom+=u,r.width=1;let f=n.offsetWidth-n.clientWidth;return f>0&&(o&&(f*=-1),r.left+=f,r.right+=f),r},cO=e=>{var n,o;const r=Ms(ve.fromDom(e),$2);for(let c=0;c<r.length;c++){const u=r[c].dom;let f=u.previousSibling;if(ur(f)){const b=f.data;b.length===1?(n=f.parentNode)===null||n===void 0||n.removeChild(f):f.deleteData(b.length-1,1)}f=u.nextSibling,Go(f)&&(f.data.length===1?(o=f.parentNode)===null||o===void 0||o.removeChild(f):f.deleteData(0,1))}},rv=(e,n,o,r)=>{const c=nf();let u,f;const b=wl(e),y=e.dom,x=(te,ue)=>{let Be;if(M(),B2(ue))return null;if(o(ue)){const De=Lo(b,ue,te),Ge=vy(n,ue,te);y.setStyle(De,"top",Ge.top),f=De;const et=y.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});y.setStyles(et,{...Ge}),y.add(n,et),c.set({caret:et,element:ue,before:te}),te&&y.addClass(et,"mce-visual-caret-before"),P(),Be=ue.ownerDocument.createRange(),Be.setStart(De,0),Be.setEnd(De,0)}else return f=mt(ue,te),Be=ue.ownerDocument.createRange(),tb(f.nextSibling)?(Be.setStart(f,0),Be.setEnd(f,0)):(Be.setStart(f,1),Be.setEnd(f,1)),Be;return Be},M=()=>{cO(n),f&&(Cd(f),f=null),c.on(te=>{y.remove(te.caret),c.clear()}),u&&(clearInterval(u),u=void 0)},P=()=>{u=setInterval(()=>{c.on(te=>{r()?y.toggleClass(te.caret,"mce-visual-caret-hidden"):y.addClass(te.caret,"mce-visual-caret-hidden")})},500)};return{show:x,hide:M,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{c.on(te=>{const ue=vy(n,te.element,te.before);y.setStyles(te.caret,{...ue})})},destroy:()=>clearInterval(u)}},eb=()=>us.browser.isFirefox(),tb=e=>py(e)||by(e),pg=e=>tb(e)||Ja(e)&&eb(),eE=si,yy=lr,tE=nu,av=lh("display","block table table-cell table-caption list-item"),nb=V,P2=k,nE=$n,oE=Zt,sE=yi,oc=e=>e>0,Ph=e=>e<0,um=(e,n)=>{let o;for(;o=e(n);)if(!P2(o))return o;return null},dm=(e,n,o,r,c)=>{const u=new ya(e,r),f=yy(e)||P2(e);let b;if(Ph(n)){if(f&&(b=um(u.prev.bind(u),!0),o(b)))return b;for(;b=um(u.prev.bind(u),c);)if(o(b))return b}if(oc(n)){if(f&&(b=um(u.next.bind(u),!0),o(b)))return b;for(;b=um(u.next.bind(u),c);)if(o(b))return b}return null},rE=(e,n)=>{const o=c=>eE(c.dom),r=c=>c.dom===n;return Um(ve.fromDom(e),o,r).map(c=>c.dom).getOr(n)},gf=(e,n)=>{for(;e&&e!==n;){if(av(e))return e;e=e.parentNode}return null},zu=(e,n,o)=>gf(e.container(),o)===gf(n.container(),o),cv=(e,n)=>{if(!n)return R.none();const o=n.container(),r=n.offset();return nE(o)?R.from(o.childNodes[r+e]):R.none()},iv=(e,n)=>{var o;const c=((o=n.ownerDocument)!==null&&o!==void 0?o:document).createRange();return e?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)),c},wy=(e,n,o)=>gf(n,e)===gf(o,e),F2=(e,n,o)=>{const r=e?"previousSibling":"nextSibling";let c=o;for(;c&&c!==n;){let u=c[r];if(u&&nb(u)&&(u=u[r]),yy(u)||tE(u)){if(wy(n,u,c))return u;break}if(sE(u))break;c=c.parentNode}return null},mm=fe(iv,!0),Sd=fe(iv,!1),lv=(e,n,o)=>{let r;const c=fe(F2,!0,n),u=fe(F2,!1,n),f=o.startContainer,b=o.startOffset;if(k(f)){const y=oE(f)?f.parentNode:f,x=y.getAttribute("data-mce-caret");if(x==="before"&&(r=y.nextSibling,pg(r)))return mm(r);if(x==="after"&&(r=y.previousSibling,pg(r)))return Sd(r)}if(!o.collapsed)return o;if(Zt(f)){if(nb(f)){if(e===1){if(r=u(f),r)return mm(r);if(r=c(f),r)return Sd(r)}if(e===-1){if(r=c(f),r)return Sd(r);if(r=u(f),r)return mm(r)}return o}if(ur(f)&&b>=f.data.length-1)return e===1&&(r=u(f),r)?mm(r):o;if(Go(f)&&b<=1)return e===-1&&(r=c(f),r)?Sd(r):o;if(b===f.data.length)return r=u(f),r?mm(r):o;if(b===0)return r=c(f),r?Sd(r):o}return o},I2=(e,n)=>cv(e?0:-1,n).filter(yy),ob=(e,n,o)=>{const r=lv(e,n,o);return e===-1?bt.fromRangeStart(r):bt.fromRangeEnd(r)},Fh=e=>R.from(e.getNode()).map(ve.fromDom),jc=e=>R.from(e.getNode(!0)).map(ve.fromDom),L2=(e,n)=>{let o=n;for(;o=e(o);)if(o.isVisible())return o;return o},hf=(e,n)=>{const o=zu(e,n);return!o&&jr(e.getNode())?!0:o};var Dc;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Dc||(Dc={}));const Cy=lr,Vu=Zt,sb=$n,uv=jr,bg=yi,aE=or,Ih=Ua,H2=(e,n)=>{const o=[];let r=e;for(;r&&r!==n;)o.push(r),r=r.parentNode;return o},xd=(e,n)=>e.hasChildNodes()&&n<e.childNodes.length?e.childNodes[n]:null,Lh=(e,n)=>{if(oc(e)){if(bg(n.previousSibling)&&!Vu(n.previousSibling))return bt.before(n);if(Vu(n))return bt(n,0)}if(Ph(e)){if(bg(n.nextSibling)&&!Vu(n.nextSibling))return bt.after(n);if(Vu(n))return bt(n,n.data.length)}return Ph(e)?uv(n)?bt.before(n):bt.after(n):bt.before(n)},z2=(e,n)=>{const o=n.nextSibling;return o&&bg(o)?Vu(o)?bt(o,0):bt.before(o):rb(Dc.Forwards,bt.after(n),e)},rb=(e,n,o)=>{let r,c,u,f;if(!sb(o)||!n)return null;if(n.isEqual(bt.after(o))&&o.lastChild){if(f=bt.after(o.lastChild),Ph(e)&&bg(o.lastChild)&&sb(o.lastChild))return uv(o.lastChild)?bt.before(o.lastChild):f}else f=n;const b=f.container();let y=f.offset();if(Vu(b)){if(Ph(e)&&y>0)return bt(b,--y);if(oc(e)&&y<b.length)return bt(b,++y);r=b}else{if(Ph(e)&&y>0&&(c=xd(b,y-1),bg(c)))return!aE(c)&&(u=dm(c,e,Ih,c),u)?Vu(u)?bt(u,u.data.length):bt.after(u):Vu(c)?bt(c,c.data.length):bt.before(c);if(oc(e)&&y<b.childNodes.length&&(c=xd(b,y),bg(c)))return uv(c)?z2(o,c):!aE(c)&&(u=dm(c,e,Ih,c),u)?Vu(u)?bt(u,0):bt.before(u):Vu(c)?bt(c,0):bt.after(c);r=c||f.getNode()}if(r&&(oc(e)&&f.isAtEnd()||Ph(e)&&f.isAtStart())&&(r=dm(r,e,Ie,o,!0),Ih(r,o)))return Lh(e,r);c=r&&dm(r,e,Ih,o);const x=jn(Z(H2(b,o),Cy));return x&&(!c||!x.contains(c))?(oc(e)?f=bt.after(x):f=bt.before(x),f):c?Lh(e,c):null},fm=e=>({next:n=>rb(Dc.Forwards,n,e),prev:n=>rb(Dc.Backwards,n,e)}),iO=(e,n,o)=>{const r=e?bt.before(o):bt.after(o);return Cl(e,n,r)},ab=e=>jr(e)?bt.before(e):bt.after(e),cb=e=>bt.isTextPosition(e)?e.offset()===0:yi(e.getNode()),Sy=e=>{if(bt.isTextPosition(e)){const n=e.container();return e.offset()===n.data.length}else return yi(e.getNode(!0))},xy=(e,n)=>!bt.isTextPosition(e)&&!bt.isTextPosition(n)&&e.getNode()===n.getNode(!0),ky=e=>!bt.isTextPosition(e)&&jr(e.getNode()),V2=(e,n,o)=>e?!xy(n,o)&&!ky(n)&&Sy(n)&&cb(o):!xy(o,n)&&cb(n)&&Sy(o),Cl=(e,n,o)=>{const r=fm(n);return R.from(e?r.next(o):r.prev(o))},Hh=(e,n,o)=>Cl(e,n,o).bind(r=>zu(o,r,n)&&V2(e,o,r)?Cl(e,n,r):R.some(r)),dv=(e,n,o,r)=>Hh(e,n,o).bind(c=>r(c)?dv(e,n,c,r):R.some(c)),kd=(e,n)=>{const o=e?n.firstChild:n.lastChild;return Zt(o)?R.some(bt(o,e?0:o.data.length)):o?yi(o)?R.some(e?bt.before(o):ab(o)):iO(e,n,o):R.none()},xi=fe(Cl,!0),Sl=fe(Cl,!1),Pi=fe(kd,!0),Td=fe(kd,!1),Ty="_mce_caret",xl=e=>$n(e)&&e.id===Ty,vg=(e,n)=>{let o=n;for(;o&&o!==e;){if(xl(o))return o;o=o.parentNode}return null},cE=e=>Q(e.start),lO=e=>go(e,"rng"),uO=e=>go(e,"id"),yg=e=>go(e,"name"),Ey=e=>Dt.isArray(e.start),ib=e=>!yg(e)&&Ot(e.forward)?e.forward:!0,iE=(e,n)=>($n(n)&&e.isBlock(n)&&!n.innerHTML&&(n.innerHTML='<br data-mce-bogus="1" />'),n),U2=(e,n)=>{const o=R.from(gc(e.getRoot(),n.start)),r=R.from(gc(e.getRoot(),n.end));return Zr(o,r,(c,u)=>{const f=e.createRng();return f.setStart(c.container(),c.offset()),f.setEnd(u.container(),u.offset()),{range:f,forward:ib(n)}})},_y=(e,n)=>{var o;const c=((o=e.ownerDocument)!==null&&o!==void 0?o:document).createTextNode(Sr);e.appendChild(c),n.setStart(c,0),n.setEnd(c,0)},dO=e=>!e.hasChildNodes(),lE=(e,n)=>Td(e).fold(kt,o=>(n.setStart(o.container(),o.offset()),n.setEnd(o.container(),o.offset()),!0)),li=(e,n,o)=>dO(n)&&vg(e,n)?(_y(n,o),!0):!1,mv=(e,n,o,r)=>{const c=o[n?"start":"end"],u=e.getRoot();if(c){let f=u,b=c[0];for(let y=c.length-1;f&&y>=1;y--){const x=f.childNodes;if(li(u,f,r))return!0;if(c[y]>x.length-1)return li(u,f,r)?!0:lE(f,r);f=x[c[y]]}Zt(f)&&(b=Math.min(c[0],f.data.length)),$n(f)&&(b=Math.min(c[0],f.childNodes.length)),n?r.setStart(f,b):r.setEnd(f,b)}return!0},wg=e=>Zt(e)&&e.data.length>0,gm=(e,n,o)=>{const r=e.get(o.id+"_"+n),c=r==null?void 0:r.parentNode,u=o.keep;if(r&&c){let f,b;if(n==="start"?u?r.hasChildNodes()?(f=r.firstChild,b=1):wg(r.nextSibling)?(f=r.nextSibling,b=0):wg(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)+1):(f=c,b=e.nodeIndex(r)):u?r.hasChildNodes()?(f=r.firstChild,b=1):wg(r.previousSibling)?(f=r.previousSibling,b=r.previousSibling.data.length):(f=c,b=e.nodeIndex(r)):(f=c,b=e.nodeIndex(r)),!u){const y=r.previousSibling,x=r.nextSibling;Dt.each(Dt.grep(r.childNodes),P=>{Zt(P)&&(P.data=P.data.replace(/\uFEFF/g,""))});let M;for(;M=e.get(o.id+"_"+n);)e.remove(M,!0);if(Zt(x)&&Zt(y)&&!us.browser.isOpera()){const P=y.data.length;y.appendData(x.data),e.remove(x),f=y,b=P}}return R.some(bt(f,b))}else return R.none()},lb=(e,n)=>{const o=e.createRng();return mv(e,!0,n,o)&&mv(e,!1,n,o)?R.some({range:o,forward:ib(n)}):R.none()},fv=(e,n)=>{const o=gm(e,"start",n),r=gm(e,"end",n);return Zr(o,r.or(o),(c,u)=>{const f=e.createRng();return f.setStart(iE(e,c.container()),c.offset()),f.setEnd(iE(e,u.container()),u.offset()),{range:f,forward:ib(n)}})},W2=(e,n)=>R.from(e.select(n.name)[n.index]).map(o=>{const r=e.createRng();return r.selectNode(o),{range:r,forward:!0}}),uE=(e,n)=>{const o=e.dom;if(n){if(Ey(n))return lb(o,n);if(cE(n))return U2(o,n);if(uO(n))return fv(o,n);if(yg(n))return W2(o,n);if(lO(n))return R.some({range:n.rng,forward:ib(n)})}return R.none()},dE=(e,n,o)=>kT(e,n,o),gv=(e,n)=>{uE(e,n).each(({range:o,forward:r})=>{e.setRng(o,r)})},Rc=e=>$n(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",zh=(e=>n=>e===n)(ia),Mc=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,hv=e=>!Mc(e)&&!zh(e)&&!mh(e),uu=e=>({value:e}),Ay=e=>{const n=e.toString(16);return(n.length===1?"0"+n:n).toUpperCase()},Oy=e=>{const n=Ay(e.red)+Ay(e.green)+Ay(e.blue);return uu(n)},mE=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,fE=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Dy=(e,n,o,r)=>({red:e,green:n,blue:o,alpha:r}),j2=(e,n,o,r)=>{const c=parseInt(e,10),u=parseInt(n,10),f=parseInt(o,10),b=parseFloat(r);return Dy(c,u,f,b)},gE=e=>{if(e==="transparent")return R.some(Dy(0,0,0,0));const n=mE.exec(e);if(n!==null)return R.some(j2(n[1],n[2],n[3],"1"));const o=fE.exec(e);return o!==null?R.some(j2(o[1],o[2],o[3],o[4])):R.none()},ub=e=>gE(e).map(Oy).map(n=>"#"+n.value).getOr(e),Vh=e=>{const n=[];if(e)for(let o=0;o<e.rangeCount;o++)n.push(e.getRangeAt(o));return n},hE=e=>eo(e,n=>{const o=Vp(n);return o?[ve.fromDom(o)]:[]}),G2=e=>Vh(e).length>1,Ry=e=>Z(hE(e),ec),pE=e=>Ms(e,"td[data-mce-selected],th[data-mce-selected]"),My=(e,n)=>{const o=pE(n);return o.length>0?o:Ry(e)},pf=e=>My(Vh(e.selection.getSel()),ve.fromDom(e.getBody())),Cg=(e,n)=>Ou(e,"table",n),q2=e=>{const n=e.startContainer,o=e.startOffset;return Zt(n)?o===0?R.some(ve.fromDom(n)):R.none():R.from(n.childNodes[o]).map(ve.fromDom)},mO=e=>{const n=e.endContainer,o=e.endOffset;return Zt(n)?o===n.data.length?R.some(ve.fromDom(n)):R.none():R.from(n.childNodes[o-1]).map(ve.fromDom)},K2=e=>zf(e).fold(he([e]),n=>[e].concat(K2(n))),Ny=e=>Im(e).fold(he([e]),n=>so(n)==="br"?Hc(n).map(o=>[e].concat(Ny(o))).getOr([]):[e].concat(Ny(n))),By=(e,n)=>Zr(q2(n),mO(n),(o,r)=>{const c=ot(K2(e),fe(Ps,o)),u=ot(Ny(e),fe(Ps,r));return c.isSome()&&u.isSome()}).getOr(!1),pv=(e,n,o,r)=>{const c=o,u=new ya(o,c),f=bs(e.schema.getMoveCaretBeforeOnEnterElements(),(y,x)=>!ae(["td","th","table"],x.toLowerCase()));let b=o;do{if(Zt(b)&&Dt.trim(b.data).length!==0){r?n.setStart(b,0):n.setEnd(b,b.data.length);return}if(f[b.nodeName]){r?n.setStartBefore(b):b.nodeName==="BR"?n.setEndBefore(b):n.setEndAfter(b);return}}while(b=r?u.next():u.prev());c.nodeName==="BODY"&&(r?n.setStart(c,0):n.setEnd(c,c.childNodes.length))},ms=e=>{const n=e.selection.getSel();return ye(n)&&n.rangeCount>0},Ed=(e,n)=>{const o=pf(e);o.length>0?H(o,r=>{const c=r.dom,u=e.dom.createRng();u.setStartBefore(c),u.setEndAfter(c),n(u,!0)}):n(e.selection.getRng(),!1)},bf=(e,n,o)=>{const r=yl(e,n);o(r),e.moveToBookmark(r)},vf=e=>at(e==null?void 0:e.nodeType),$y=e=>$n(e)&&!Rc(e)&&!xl(e)&&!Du(e),Uh=(e,n)=>{if($y(n)&&!/^(TD|TH)$/.test(n.nodeName)){const o=e.getAttrib(n,"data-mce-selected"),r=parseInt(o,10);return!isNaN(r)&&r>0}else return!1},yf=e=>e.isContentEditable===!0,bv=(e,n,o)=>{const{selection:r,dom:c}=e,u=r.getNode(),f=lr(u);bf(r,!0,()=>{n()}),f&&lr(u)&&c.isChildOf(u,e.getBody())?e.selection.select(u):o(r.getStart())&&vv(c,r)},vv=(e,n)=>{var o,r;const c=n.getRng(),{startContainer:u,startOffset:f}=c,b=n.getNode();if(!Uh(e,b)&&$n(u)){const y=u.childNodes,x=e.getRoot();let M;if(f<y.length){const P=y[f];M=new ya(P,(o=e.getParent(P,e.isBlock))!==null&&o!==void 0?o:x)}else{const P=y[y.length-1];M=new ya(P,(r=e.getParent(P,e.isBlock))!==null&&r!==void 0?r:x),M.next(!0)}for(let P=M.current();P;P=M.next()){if(e.getContentEditable(P)==="false")return;if(Zt(P)&&!db(P)){c.setStart(P,0),n.setRng(c);return}}}},yv=(e,n,o)=>{if(e){const r=n?"nextSibling":"previousSibling";for(e=o?e:e[r];e;e=e[r])if($n(e)||!db(e))return e}},Sg=(e,n)=>!!e.getTextBlockElements()[n.nodeName.toLowerCase()]||Qf(e,n),xg=(e,n,o)=>e.schema.isValidChild(n,o),db=(e,n=!1)=>{if(ye(e)&&Zt(e)){const o=n?e.data.replace(/ /g," "):e.data;return Nl(o)}else return!1},wv=e=>ye(e)&&Zt(e)&&e.length===0,fO=(e,n)=>{const o="[data-mce-cef-wrappable]",r=LT(e),c=xs(r)?o:`${o},${r}`;return Ri(ve.fromDom(n),c)},Y2=(e,n)=>{const o=e.dom;return $y(n)&&o.getContentEditable(n)==="false"&&fO(e,n)&&o.select('[contenteditable="true"]',n).length===0},hm=(e,n)=>ee(e)?e(n):(ye(n)&&(e=e.replace(/%(\w+)/g,(o,r)=>n[r]||o)),e),Py=(e,n)=>(e=e||"",n=n||"",e=""+(e.nodeName||e),n=""+(n.nodeName||n),e.toLowerCase()===n.toLowerCase()),kg=(e,n)=>{if($t(e))return null;{let o=String(e);return(n==="color"||n==="backgroundColor")&&(o=ub(o)),n==="fontWeight"&&e===700&&(o="bold"),n==="fontFamily"&&(o=o.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),o}},Fy=(e,n,o)=>{const r=e.getStyle(n,o);return kg(r,o)},X2=(e,n)=>{let o;return e.getParent(n,r=>$n(r)?(o=e.getStyle(r,"text-decoration"),!!o&&o!=="none"):!1),o},mb=(e,n,o)=>e.getParents(n,o,e.getRoot()),Iy=(e,n,o)=>{const r=e.formatter.get(n);return ye(r)&&se(r,o)},bE=(e,n)=>Iy(e,n,r=>{const c=u=>ee(u)||u.length>1&&u.charAt(0)==="%";return se(["styles","attributes"],u=>cs(r,u).exists(f=>{const b=yt(f)?f:ys(f);return se(b,c)}))}),vE=(e,n,o)=>{const r=["inline","block","selector","attributes","styles","classes"],c=u=>bs(u,(f,b)=>se(r,y=>y===b));return Iy(e,n,u=>{const f=c(u);return Iy(e,o,b=>{const y=c(b);return Gr(f,y)})})},_d=e=>gr(e,"block"),Wh=e=>_d(e)&&e.wrapper===!0,yE=e=>_d(e)&&e.wrapper!==!0,Il=e=>gr(e,"selector"),sc=e=>gr(e,"inline"),wE=e=>Il(e)&&sc(e)&&ca(cs(e,"mixed"),!0),Zh=e=>Il(e)&&e.expand!==!1&&!sc(e),jh=Rc,J2=mb,Q2=db,CE=Sg,En=e=>jr(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,Na=(e,n)=>{let o=n;for(;o;){if($n(o)&&e.getContentEditable(o))return e.getContentEditable(o)==="false"?o:n;o=o.parentNode}return n},Tg=(e,n,o,r)=>{const c=n.data;if(e){for(let u=o;u>0;u--)if(r(c.charAt(u-1)))return u}else for(let u=o;u<c.length;u++)if(r(c.charAt(u)))return u;return-1},pc=(e,n,o)=>Tg(e,n,o,r=>zh(r)||Mc(r)),Ll=(e,n,o)=>Tg(e,n,o,hv),Cv=(e,n,o,r,c,u)=>{let f;const b=e.getParent(o,e.isBlock)||n,y=(M,P,L)=>{const ce=sf(e),ie=c?ce.backwards:ce.forwards;return R.from(ie(M,P,(te,ue)=>jh(te.parentNode)?-1:(f=te,L(c,te,ue)),b))};return y(o,r,pc).bind(M=>u?y(M.container,M.offset+(c?-1:0),Ll):R.some(M)).orThunk(()=>f?R.some({container:f,offset:c?0:f.length}):R.none())},Gh=(e,n,o,r,c)=>{const u=r[c];Zt(r)&&xs(r.data)&&u&&(r=u);const f=J2(e,r);for(let b=0;b<f.length;b++)for(let y=0;y<n.length;y++){const x=n[y];if(!(ye(x.collapsed)&&x.collapsed!==o.collapsed)&&Il(x)&&e.is(f[b],x.selector))return f[b]}return r},fb=(e,n,o,r)=>{var c;let u=o;const f=e.getRoot(),b=n[0];if(_d(b)&&(u=b.wrapper?null:e.getParent(o,b.block,f)),!u){const y=(c=e.getParent(o,"LI,TD,TH"))!==null&&c!==void 0?c:f;u=e.getParent(Zt(o)?o.parentNode:o,x=>x!==f&&CE(e.schema,x),y)}if(u&&_d(b)&&b.wrapper&&(u=J2(e,u,"ul,ol").reverse()[0]||u),!u)for(u=o;u&&u[r]&&!e.isBlock(u[r])&&(u=u[r],!Py(u,"br")););return u||o},eS=(e,n,o,r)=>{const c=o.parentNode;return ye(o[r])?!1:c===n||$t(c)||e.isBlock(c)?!0:eS(e,n,c,r)},gb=(e,n,o,r,c)=>{let u=o;const f=c?"previousSibling":"nextSibling",b=e.getRoot();if(Zt(o)&&!Q2(o)&&(c?r>0:r<o.data.length))return o;for(;u;){if(!n[0].block_expand&&e.isBlock(u))return u;for(let y=u[f];y;y=y[f]){const x=Zt(y)&&!eS(e,b,y,f);if(!jh(y)&&!En(y)&&!Q2(y,x))return u}if(u===b||u.parentNode===b){o=u;break}u=u.parentNode}return o},Ly=e=>jh(e.parentNode)||jh(e),wf=(e,n,o,r=!1)=>{let{startContainer:c,startOffset:u,endContainer:f,endOffset:b}=n;const y=o[0];return $n(c)&&c.hasChildNodes()&&(c=rf(c,u),Zt(c)&&(u=0)),$n(f)&&f.hasChildNodes()&&(f=rf(f,n.collapsed?b:b-1),Zt(f)&&(b=f.data.length)),c=Na(e,c),f=Na(e,f),Ly(c)&&(c=jh(c)?c:c.parentNode,n.collapsed?c=c.previousSibling||c:c=c.nextSibling||c,Zt(c)&&(u=n.collapsed?c.length:0)),Ly(f)&&(f=jh(f)?f:f.parentNode,n.collapsed?f=f.nextSibling||f:f=f.previousSibling||f,Zt(f)&&(b=n.collapsed?0:f.length)),n.collapsed&&(Cv(e,e.getRoot(),c,u,!0,r).each(({container:P,offset:L})=>{c=P,u=L}),Cv(e,e.getRoot(),f,b,!1,r).each(({container:P,offset:L})=>{f=P,b=L})),(sc(y)||y.block_expand)&&((!sc(y)||!Zt(c)||u===0)&&(c=gb(e,o,c,u,!0)),(!sc(y)||!Zt(f)||b===f.data.length)&&(f=gb(e,o,f,b,!1))),Zh(y)&&(c=Gh(e,o,n,c,"previousSibling"),f=Gh(e,o,n,f,"nextSibling")),(_d(y)||Il(y))&&(c=fb(e,o,c,"previousSibling"),f=fb(e,o,f,"nextSibling"),_d(y)&&(e.isBlock(c)||(c=gb(e,o,c,u,!0)),e.isBlock(f)||(f=gb(e,o,f,b,!1)))),$n(c)&&c.parentNode&&(u=e.nodeIndex(c),c=c.parentNode),$n(f)&&f.parentNode&&(b=e.nodeIndex(f)+1,f=f.parentNode),{startContainer:c,startOffset:u,endContainer:f,endOffset:b}},hb=(e,n,o)=>{var r;const c=n.startOffset,u=rf(n.startContainer,c),f=n.endOffset,b=rf(n.endContainer,f-1),y=ue=>{const Be=ue[0];Zt(Be)&&Be===u&&c>=Be.data.length&&ue.splice(0,1);const De=ue[ue.length-1];return f===0&&ue.length>0&&De===b&&Zt(De)&&ue.splice(ue.length-1,1),ue},x=(ue,Be,De)=>{const Ge=[];for(;ue&&ue!==De;ue=ue[Be])Ge.push(ue);return Ge},M=(ue,Be)=>e.getParent(ue,De=>De.parentNode===Be,Be),P=(ue,Be,De)=>{const Ge=De?"nextSibling":"previousSibling";for(let et=ue,Tt=et.parentNode;et&&et!==Be;et=Tt){Tt=et.parentNode;const gn=x(et===ue?et:et[Ge],Ge);gn.length&&(De||gn.reverse(),o(y(gn)))}};if(u===b)return o(y([u]));const L=(r=e.findCommonAncestor(u,b))!==null&&r!==void 0?r:e.getRoot();if(e.isChildOf(u,b))return P(u,L,!0);if(e.isChildOf(b,u))return P(b,L);const ce=M(u,L)||u,ie=M(b,L)||b;P(u,ce,!0);const te=x(ce===u?ce:ce.nextSibling,"nextSibling",ie===b?ie.nextSibling:ie);te.length&&o(y(te)),P(b,ie)},SE=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],tS=e=>Ds(e)&&su(e)===Sr,Hy=(e,n,o,r)=>xc(n).fold(()=>"skipping",c=>r==="br"||tS(n)?"valid":Ki(n)?"existing":xl(n.dom)?"caret":se(SE,u=>Ri(n,u))?"valid-block":!xg(e,o,r)||!xg(e,so(c),o)?"invalid-child":"valid"),Eg=(e,n)=>{const o=wf(e.dom,n,[{inline:"span"}]);n.setStart(o.startContainer,o.startOffset),n.setEnd(o.endContainer,o.endOffset),e.selection.setRng(n)},pb=(e,n,o,r,c,u)=>{const{uid:f=n,...b}=o;ku(e,Ip()),rr(e,`${sg()}`,f),rr(e,`${Iu()}`,r);const{attributes:y={},classes:x=[]}=c(f,b);if(Rs(e,y),YC(e,x),u){x.length>0&&rr(e,`${Eh()}`,x.join(","));const M=ze(y);M.length>0&&rr(e,`${Sa()}`,M.join(","))}},Sv=e=>{Xl(e,Ip()),Yr(e,`${sg()}`),Yr(e,`${Iu()}`),Yr(e,`${Th()}`);const n=Sc(e,`${Sa()}`).map(r=>r.split(",")).getOr([]),o=Sc(e,`${Eh()}`).map(r=>r.split(",")).getOr([]);H(n,r=>Yr(e,r)),U0(e,o),Yr(e,`${Eh()}`),Yr(e,`${Sa()}`)},xv=(e,n,o,r,c)=>{const u=ve.fromTag("span",e);return pb(u,n,o,r,c,!1),u},qh=(e,n,o,r,c,u)=>{const f=[],b=xv(e.getDoc(),o,u,r,c),y=nf(),x=()=>{y.clear()},M=()=>y.get().getOrThunk(()=>{const ie=rg(b);return f.push(ie),y.set(ie),ie}),P=ie=>{H(ie,L)},L=ie=>{switch(Hy(e,ie,"span",so(ie))){case"invalid-child":{x();const ue=va(ie);P(ue),x();break}case"valid-block":{x(),pb(ie,o,u,r,c,!0);break}case"valid":{const ue=M();Hm(ie,ue);break}}},ce=ie=>{const te=re(ie,ve.fromDom);P(te)};return hb(e.dom,n,ie=>{x(),ce(ie)}),f},zy=(e,n,o,r)=>{e.undoManager.transact(()=>{const c=e.selection,u=c.getRng(),f=pf(e).length>0,b=KC("mce-annotation");if(u.collapsed&&!f&&Eg(e,u),c.getRng().collapsed&&!f){const y=xv(e.getDoc(),b,r,n,o.decorate);sh(y,ia),c.getRng().insertNode(y.dom),c.select(y.dom)}else bf(c,!1,()=>{Ed(e,y=>{qh(e,y,b,n,o.decorate,r)})})})},nS=e=>{const n=bl();bT(e,n);const o=pT(e,n),r=Wi("span"),c=u=>{H(u,f=>{r(f)?dc(f):Sv(f)})};return{register:(u,f)=>{n.register(u,f)},annotate:(u,f)=>{n.lookup(u).each(b=>{zy(e,u,b,f)})},annotationChanged:(u,f)=>{o.addListener(u,f)},remove:u=>{const f=e.selection.getBookmark();ua(e,R.some(u)).each(({elements:b})=>{c(b)}),e.selection.moveToBookmark(f)},removeAll:u=>{const f=e.selection.getBookmark();on(qC(e,u),(b,y)=>{c(b)}),e.selection.moveToBookmark(f)},getAll:u=>{const f=qC(e,u);return qt(f,b=>re(b,y=>y.dom))}}},Uu=e=>({getBookmark:fe(dE,e),moveToBookmark:fe(gv,e)});Uu.isBookmarkNode=Rc;const bb=(e,n,o)=>o.collapsed?!1:se(o.getClientRects(),r=>t2(r,e,n)),xE=(e,n)=>e.dispatch("PreProcess",n),kE=(e,n)=>e.dispatch("PostProcess",n),pm=e=>{e.dispatch("remove")},TE=e=>{e.dispatch("detach")},oS=(e,n)=>{e.dispatch("SwitchMode",{mode:n})},kv=(e,n,o,r,c)=>{e.dispatch("ObjectResizeStart",{target:n,width:o,height:r,origin:c})},EE=(e,n,o,r,c)=>{e.dispatch("ObjectResized",{target:n,width:o,height:r,origin:c})},Tv=e=>{e.dispatch("PreInit")},Gc=e=>{e.dispatch("PostRender")},Wu=e=>{e.dispatch("Init")},du=(e,n)=>{e.dispatch("PlaceholderToggle",{state:n})},vb=(e,n,o)=>{e.dispatch(n,o)},Ev=(e,n,o,r)=>{e.dispatch("FormatApply",{format:n,node:o,vars:r})},sS=(e,n,o,r)=>{e.dispatch("FormatRemove",{format:n,node:o,vars:r})},Vy=(e,n)=>e.dispatch("BeforeSetContent",n),rS=(e,n)=>e.dispatch("SetContent",n),Uy=(e,n)=>e.dispatch("BeforeGetContent",n),aS=(e,n)=>e.dispatch("GetContent",n),Wy=(e,n)=>{e.dispatch("AutocompleterStart",n)},cS=(e,n)=>{e.dispatch("AutocompleterUpdate",n)},iS=e=>{e.dispatch("AutocompleterEnd")},_v=(e,n,o)=>e.dispatch("PastePreProcess",{content:n,internal:o}),Zy=(e,n,o)=>e.dispatch("PastePostProcess",{node:n,internal:o}),cr=(e,n)=>e.dispatch("PastePlainTextToggle",{state:n}),Zn={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||Zn.metaKeyPressed(e),metaKeyPressed:e=>us.os.isMacOS()||us.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},Cf="data-mce-selected",lS="table,img,figure.image,hr,video,span.mce-preview-object",Sf=Math.abs,Ad=Math.round,Kh={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},jy=e=>e.type==="longpress"||e.type.indexOf("touch")===0,Hl=(e,n)=>{const o=n.dom,r=n.getDoc(),c=document,u=n.getBody();let f,b,y,x,M,P,L,ce,ie,te,ue,Be,De,Ge,et,Tt,gn;const en=Cn=>ye(Cn)&&(Oa(Cn)||o.is(Cn,"figure.image")),ut=Cn=>nu(Cn)||o.hasClass(Cn,"mce-preview-object"),Je=(Cn,gs)=>{if(jy(Cn)){const as=Cn.touches[0];return en(Cn.target)&&!bb(as.clientX,as.clientY,gs)}else return en(Cn.target)&&!bb(Cn.clientX,Cn.clientY,gs)},Rn=Cn=>{const gs=Cn.target;Je(Cn,n.selection.getRng())&&!Cn.isDefaultPrevented()&&n.selection.select(gs)},co=Cn=>o.hasClass(Cn,"mce-preview-object")&&ye(Cn.firstElementChild)?[Cn,Cn.firstElementChild]:o.is(Cn,"figure.image")?[Cn.querySelector("img")]:[Cn],fo=Cn=>{const gs=ny(n);return!gs||Cn.getAttribute("data-mce-resize")==="false"||Cn===n.getBody()?!1:o.hasClass(Cn,"mce-preview-object")&&ye(Cn.firstElementChild)?Ri(ve.fromDom(Cn.firstElementChild),gs):Ri(ve.fromDom(Cn),gs)},Uo=Cn=>ut(Cn)?o.create("img",{src:us.transparentSrc}):Cn.cloneNode(!0),vs=(Cn,gs,as)=>{if(ye(as)){const ac=co(Cn);H(ac,Tr=>{Tr.style[gs]||!n.schema.isValid(Tr.nodeName.toLowerCase(),gs)?o.setStyle(Tr,gs,as):o.setAttrib(Tr,gs,""+as)})}},Ks=(Cn,gs,as)=>{vs(Cn,"width",gs),vs(Cn,"height",as)},Gs=Cn=>{let gs,as,ac,Tr,No;gs=Cn.screenX-P,as=Cn.screenY-L,Ge=gs*x[2]+te,et=as*x[3]+ue,Ge=Ge<5?5:Ge,et=et<5?5:et,(en(f)||ut(f))&&PT(n)!==!1?ac=!Zn.modifierPressed(Cn):ac=Zn.modifierPressed(Cn),ac&&(Sf(gs)>Sf(as)?(et=Ad(Ge*Be),Ge=Ad(et/Be)):(Ge=Ad(et/Be),et=Ad(Ge*Be))),Ks(b,Ge,et),Tr=x.startPos.x+gs,No=x.startPos.y+as,Tr=Tr>0?Tr:0,No=No>0?No:0,o.setStyles(y,{left:Tr,top:No,display:"block"}),y.innerHTML=Ge+" &times; "+et,x[2]<0&&b.clientWidth<=Ge&&o.setStyle(b,"left",ce+(te-Ge)),x[3]<0&&b.clientHeight<=et&&o.setStyle(b,"top",ie+(ue-et)),gs=u.scrollWidth-Tt,as=u.scrollHeight-gn,gs+as!==0&&o.setStyles(y,{left:Tr-gs,top:No-as}),De||(kv(n,f,te,ue,"corner-"+x.name),De=!0)},Pa=()=>{const Cn=De;De=!1,Cn&&(vs(f,"width",Ge),vs(f,"height",et)),o.unbind(r,"mousemove",Gs),o.unbind(r,"mouseup",Pa),c!==r&&(o.unbind(c,"mousemove",Gs),o.unbind(c,"mouseup",Pa)),o.remove(b),o.remove(y),o.remove(M),Ti(f),Cn&&(EE(n,f,Ge,et,"corner-"+x.name),o.setAttrib(f,"style",o.getAttrib(f,"style"))),n.nodeChanged()},Ti=Cn=>{On();const gs=o.getPos(Cn,u),as=gs.x,ac=gs.y,Tr=Cn.getBoundingClientRect(),No=Tr.width||Tr.right-Tr.left,Is=Tr.height||Tr.bottom-Tr.top;f!==Cn&&(Wo(),f=Cn,Ge=et=0);const Ea=n.dispatch("ObjectSelected",{target:Cn});fo(Cn)&&!Ea.isDefaultPrevented()?on(Kh,(Cr,Qr)=>{const fa=Fa=>{const vu=co(f)[0];P=Fa.screenX,L=Fa.screenY,te=vu.clientWidth,ue=vu.clientHeight,Be=ue/te,x=Cr,x.name=Qr,x.startPos={x:No*Cr[0]+as,y:Is*Cr[1]+ac},Tt=u.scrollWidth,gn=u.scrollHeight,M=o.add(u,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),o.setStyles(M,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),b=Uo(f),o.addClass(b,"mce-clonedresizable"),o.setAttrib(b,"data-mce-bogus","all"),b.contentEditable="false",o.setStyles(b,{left:as,top:ac,margin:0}),Ks(b,No,Is),b.removeAttribute(Cf),u.appendChild(b),o.bind(r,"mousemove",Gs),o.bind(r,"mouseup",Pa),c!==r&&(o.bind(c,"mousemove",Gs),o.bind(c,"mouseup",Pa)),y=o.add(u,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},te+" &times; "+ue)};let Ir=o.get("mceResizeHandle"+Qr);Ir&&o.remove(Ir),Ir=o.add(u,"div",{id:"mceResizeHandle"+Qr,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+Qr+"-resize; margin:0; padding:0"}),o.bind(Ir,"mousedown",Fa=>{Fa.stopImmediatePropagation(),Fa.preventDefault(),fa(Fa)}),Cr.elm=Ir,o.setStyles(Ir,{left:No*Cr[0]+as-Ir.offsetWidth/2,top:Is*Cr[1]+ac-Ir.offsetHeight/2})}):Wo(!1)},Xt=kh(Ti,0),Wo=(Cn=!0)=>{Xt.cancel(),On(),f&&Cn&&f.removeAttribute(Cf),on(Kh,(gs,as)=>{const ac=o.get("mceResizeHandle"+as);ac&&(o.unbind(ac),o.remove(ac))})},po=(Cn,gs)=>o.isChildOf(Cn,gs),Mr=Cn=>{if(De||n.removed||n.composing)return;const gs=Cn.type==="mousedown"?Cn.target:e.getNode(),as=fd(ve.fromDom(gs),lS).map(Tr=>Tr.dom).getOrUndefined(),ac=ye(as)?o.getAttrib(as,Cf,"1"):"1";if(H(o.select(`img[${Cf}],hr[${Cf}]`),Tr=>{Tr.removeAttribute(Cf)}),ye(as)&&po(as,u)){Oo();const Tr=e.getStart(!0);if(po(Tr,as)&&po(e.getEnd(!0),as)){o.setAttrib(as,Cf,ac),Xt.throttle(as);return}}Wo()},On=()=>{on(Kh,Cn=>{Cn.elm&&(o.unbind(Cn.elm),delete Cn.elm)})},Oo=()=>{try{n.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return n.on("init",()=>{Oo(),n.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Mr),n.on("keyup compositionend",Cn=>{f&&f.nodeName==="TABLE"&&Mr(Cn)}),n.on("hide blur",Wo),n.on("contextmenu longpress",Rn,!0)}),n.on("remove",On),{isResizable:fo,showResizeRect:Ti,hideResizeRect:Wo,updateResizeRect:Mr,destroy:()=>{Xt.cancel(),f=b=M=null}}},_g=(e,n)=>{n.fold(o=>{e.setStartBefore(o.dom)},(o,r)=>{e.setStart(o.dom,r)},o=>{e.setStartAfter(o.dom)})},uS=(e,n)=>{n.fold(o=>{e.setEndBefore(o.dom)},(o,r)=>{e.setEnd(o.dom,r)},o=>{e.setEndAfter(o.dom)})},Yh=(e,n,o)=>{const r=e.document.createRange();return _g(r,n),uS(r,o),r},yb=(e,n,o,r,c)=>{const u=e.document.createRange();return u.setStart(n.dom,o),u.setEnd(r.dom,c),u},wb=lu.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Gy=(e,n,o)=>n(ve.fromDom(o.startContainer),o.startOffset,ve.fromDom(o.endContainer),o.endOffset),_E=(e,n)=>n.match({domRange:o=>({ltr:he(o),rtl:R.none}),relative:(o,r)=>({ltr:to(()=>Yh(e,o,r)),rtl:to(()=>R.some(Yh(e,r,o)))}),exact:(o,r,c,u)=>({ltr:to(()=>yb(e,o,r,c,u)),rtl:to(()=>R.some(yb(e,c,u,o,r)))})}),AE=(e,n)=>{const o=n.ltr();return o.collapsed?n.rtl().filter(c=>c.collapsed===!1).map(c=>wb.rtl(ve.fromDom(c.endContainer),c.endOffset,ve.fromDom(c.startContainer),c.startOffset)).getOrThunk(()=>Gy(e,wb.ltr,o)):Gy(e,wb.ltr,o)},OE=(e,n)=>{const o=_E(e,n);return AE(e,o)};wb.ltr,wb.rtl;const qc={create:(e,n,o,r)=>({start:e,soffset:n,finish:o,foffset:r})},xf=(e,n,o)=>{var r,c;return R.from((c=(r=e.dom).caretPositionFromPoint)===null||c===void 0?void 0:c.call(r,n,o)).bind(u=>{if(u.offsetNode===null)return R.none();const f=e.dom.createRange();return f.setStart(u.offsetNode,u.offset),f.collapse(),R.some(f)})},gO=(e,n,o)=>{var r,c;return R.from((c=(r=e.dom).caretRangeFromPoint)===null||c===void 0?void 0:c.call(r,n,o))},DE=(()=>document.caretPositionFromPoint?xf:document.caretRangeFromPoint?gO:R.none)(),RE=(e,n,o)=>{const r=ve.fromDom(e.document);return DE(r,n,o).map(c=>qc.create(ve.fromDom(c.startContainer),c.startOffset,ve.fromDom(c.endContainer),c.endOffset))},ss=lu.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ME=(e,n,o,r)=>e.fold(n,o,r),dS=e=>e.fold(Ue,Ue,Ue),qy=ss.before,mS=ss.on,hO=ss.after,Od={before:qy,on:mS,after:hO,cata:ME,getStart:dS},Av=lu.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),pO=e=>Av.exact(e.start,e.soffset,e.finish,e.foffset),bO=e=>e.match({domRange:n=>ve.fromDom(n.startContainer),relative:(n,o)=>Od.getStart(n),exact:(n,o,r,c)=>n}),fS=Av.domRange,gS=Av.relative,hS=Av.exact,vO=e=>{const n=bO(e);return Eu(n)},yO=qc.create,kf={domRange:fS,relative:gS,exact:hS,exactFromRange:pO,getWin:vO,range:yO},Ky=(e,n)=>{const o=so(e);return o==="input"?Od.after(e):ae(["br","img"],o)?n===0?Od.before(e):Od.after(e):Od.on(e,n)},NE=(e,n)=>{const o=e.fold(Od.before,Ky,Od.after),r=n.fold(Od.before,Ky,Od.after);return kf.relative(o,r)},pS=(e,n,o,r)=>{const c=Ky(e,n),u=Ky(o,r);return kf.relative(c,u)},To=e=>e.match({domRange:n=>{const o=ve.fromDom(n.startContainer),r=ve.fromDom(n.endContainer);return pS(o,n.startOffset,r,n.endOffset)},relative:NE,exact:pS}),Xh=(e,n)=>{const r=(n||document).createDocumentFragment();return H(e,c=>{r.appendChild(c.dom)}),ve.fromDom(r)},bS=e=>{const n=kf.getWin(e).dom,o=(c,u,f,b)=>yb(n,c,u,f,b),r=To(e);return OE(n,r).match({ltr:o,rtl:o})},vS=(e,n,o)=>RE(e,n,o),Ag=(e,n,o)=>{const r=Eu(ve.fromDom(o));return vS(r.dom,e,n).map(c=>{const u=o.createRange();return u.setStart(c.start.dom,c.soffset),u.setEnd(c.finish.dom,c.foffset),u}).getOrUndefined()},Yy=(e,n)=>ye(e)&&ye(n)&&e.startContainer===n.startContainer&&e.startOffset===n.startOffset&&e.endContainer===n.endContainer&&e.endOffset===n.endOffset,BE=(e,n,o)=>{let r=e;for(;r&&r!==n;){if(o(r))return r;r=r.parentNode}return null},Ov=(e,n,o)=>BE(e,n,o)!==null,yS=(e,n,o)=>Ov(e,n,r=>r.nodeName===o),Xy=(e,n)=>V(e)&&!Ov(e,n,xl),wS=(e,n,o)=>{const r=n.parentNode;if(r){const c=new ya(n,e.getParent(r,e.isBlock)||e.getRoot());let u;for(;u=c[o?"prev":"next"]();)if(jr(u))return!0}return!1},$E=(e,n)=>{var o;return((o=e.previousSibling)===null||o===void 0?void 0:o.nodeName)===n},Dv=(e,n)=>{let o=n;for(;o&&o!==e;){if(lr(o))return!0;o=o.parentNode}return!1},Cb=(e,n,o,r,c)=>{const u=e.getRoot(),f=e.schema.getNonEmptyElements(),b=c.parentNode;let y,x;if(!b)return R.none();const M=e.getParent(b,e.isBlock)||u;if(r&&jr(c)&&n&&e.isEmpty(M))return R.some(bt(b,e.nodeIndex(c)));const P=new ya(c,M);for(;x=P[r?"prev":"next"]();){if(e.getContentEditableParent(x)==="false"||Xy(x,u))return R.none();if(Zt(x)&&x.data.length>0)return yS(x,u,"A")?R.none():R.some(bt(x,r?x.data.length:0));if(e.isBlock(x)||f[x.nodeName.toLowerCase()])return R.none();y=x}return ll(y)?R.none():o&&y?R.some(bt(y,0)):R.none()},Jy=(e,n,o,r)=>{const c=e.getRoot();let u,f=!1,b=o?r.startContainer:r.endContainer,y=o?r.startOffset:r.endOffset;const x=$n(b)&&y===b.childNodes.length,M=e.schema.getNonEmptyElements();let P=o;if(V(b))return R.none();if($n(b)&&y>b.childNodes.length-1&&(P=!1),oi(b)&&(b=c,y=0),b===c){if(P&&(u=b.childNodes[y>0?y-1:0],u&&(V(u)||M[u.nodeName]||Ja(u))))return R.none();if(b.hasChildNodes()){if(y=Math.min(!P&&y>0?y-1:y,b.childNodes.length-1),b=b.childNodes[y],y=Zt(b)&&x?b.data.length:0,!n&&b===c.lastChild&&Ja(b)||Dv(c,b)||V(b))return R.none();if(b.hasChildNodes()&&!Ja(b)){u=b;const L=new ya(b,c);do{if(lr(u)||V(u)){f=!1;break}if(Zt(u)&&u.data.length>0){y=P?0:u.data.length,b=u,f=!0;break}if(M[u.nodeName.toLowerCase()]&&!p1(u)){y=e.nodeIndex(u),b=u.parentNode,P||y++,f=!0;break}}while(u=P?L.next():L.prev())}}}return n&&(Zt(b)&&y===0&&Cb(e,x,n,!0,b).each(L=>{b=L.container(),y=L.offset(),f=!0}),$n(b)&&(u=b.childNodes[y],u||(u=b.childNodes[y-1]),u&&jr(u)&&!$E(u,"A")&&!wS(e,u,!1)&&!wS(e,u,!0)&&Cb(e,x,n,!0,u).each(L=>{b=L.container(),y=L.offset(),f=!0}))),P&&!n&&Zt(b)&&y===b.data.length&&Cb(e,x,n,!1,b).each(L=>{b=L.container(),y=L.offset(),f=!0}),f&&b?R.some(bt(b,y)):R.none()},Rv=(e,n)=>{const o=n.collapsed,r=n.cloneRange(),c=bt.fromRangeStart(n);return Jy(e,o,!0,r).each(u=>{(!o||!bt.isAbove(c,u))&&r.setStart(u.container(),u.offset())}),o||Jy(e,o,!1,r).each(u=>{r.setEnd(u.container(),u.offset())}),o&&r.collapse(!0),Yy(n,r)?R.none():R.some(r)},Mv=(e,n)=>e.splitText(n),Sb=e=>{let n=e.startContainer,o=e.startOffset,r=e.endContainer,c=e.endOffset;if(n===r&&Zt(n)){if(o>0&&o<n.data.length)if(r=Mv(n,o),n=r.previousSibling,c>o){c=c-o;const u=Mv(r,c).previousSibling;n=r=u,c=u.data.length,o=0}else c=0}else if(Zt(n)&&o>0&&o<n.data.length&&(n=Mv(n,o),o=0),Zt(r)&&c>0&&c<r.data.length){const u=Mv(r,c).previousSibling;r=u,c=u.data.length}return{startContainer:n,startOffset:o,endContainer:r,endOffset:c}},Og=e=>({walk:(u,f)=>hb(e,u,f),split:Sb,expand:(u,f={type:"word"})=>{if(f.type==="word"){const b=wf(e,u,[{inline:"span"}]),y=e.createRng();return y.setStart(b.startContainer,b.startOffset),y.setEnd(b.endContainer,b.endOffset),y}return u},normalize:u=>Rv(e,u).fold(kt,f=>(u.setStart(f.startContainer,f.startOffset),u.setEnd(f.endContainer,f.endOffset),!0))});Og.compareRanges=Yy,Og.getCaretRangeFromPoint=Ag,Og.getSelectedNode=Vp,Og.getNode=rf;const Vs=((e,n)=>{const o=(b,y)=>{if(!at(y)&&!y.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+y);const x=b.dom;Oi(x)&&(x.style[e]=y+"px")},r=b=>{const y=n(b);if(y<=0||y===null){const x=Ve(b,e);return parseFloat(x)||0}return y},c=r,u=(b,y)=>Pe(y,(x,M)=>{const P=Ve(b,M),L=P===void 0?0:parseInt(P,10);return isNaN(L)?x:x+L},0);return{set:o,get:r,getOuter:c,aggregate:u,max:(b,y,x)=>{const M=u(b,x);return y>M?y-M:0}}})("height",e=>{const n=e.dom;return cl(e)?n.getBoundingClientRect().height:n.offsetHeight}),PE=e=>Vs.get(e),Tf=()=>ve.fromDom(document),Dd=(e,n)=>e.view(n).fold(he([]),r=>{const c=e.owner(r),u=Dd(e,c);return[r].concat(u)}),Qy=(e,n)=>{const o=n.owner(e);return Dd(n,o)};var xb=Object.freeze({__proto__:null,view:e=>{var n;return(e.dom===document?R.none():R.from((n=e.dom.defaultView)===null||n===void 0?void 0:n.frameElement)).map(ve.fromDom)},owner:e=>Zi(e)});const Nv=e=>{const n=Tf(),o=mc(n),r=Qy(e,xb),c=Ho(e),u=Ne(r,(f,b)=>{const y=Ho(b);return{left:f.left+y.left,top:f.top+y.top}},{left:0,top:0});return jf(u.left+c.left+o.left,u.top+c.top+o.top)},bm=e=>so(e)==="textarea",tw=(e,n)=>e.dispatch("ScrollIntoView",n).isDefaultPrevented(),FE=(e,n)=>{e.dispatch("AfterScrollIntoView",n)},IE=(e,n)=>{const o=va(e);if(o.length===0||bm(e))return{element:e,offset:n};if(n<o.length&&!bm(o[n]))return{element:o[n],offset:0};{const r=o[o.length-1];return bm(r)?{element:e,offset:n}:so(r)==="img"?{element:r,offset:1}:Ds(r)?{element:r,offset:su(r).length}:{element:r,offset:va(r).length}}},CS=(e,n)=>{const o=vr(e),r=PE(e);return{element:e,bottom:o.top+r,height:r,pos:o,cleanup:n}},Ss=(e,n)=>{const o=IE(e,n),r=ve.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Sr+"</span>");return os(o.element,r),CS(r,()=>Fs(r))},Zu=e=>CS(ve.fromDom(e),Me),Dg=(e,n,o,r)=>{v(e,(c,u)=>m(e,n,o,r),o)},l=(e,n,o,r,c)=>{const u={elm:r.element.dom,alignToTop:c};if(tw(e,u))return;const f=mc(n).top;o(n,f,r,c),FE(e,u)},m=(e,n,o,r)=>{const c=ve.fromDom(e.getBody()),u=ve.fromDom(e.getDoc());no(c);const f=Ss(ve.fromDom(o.startContainer),o.startOffset);l(e,u,n,f,r),f.cleanup()},h=(e,n,o,r)=>{const c=ve.fromDom(e.getDoc());l(e,c,o,Zu(n),r)},v=(e,n,o)=>{const r=o.startContainer,c=o.startOffset,u=o.endContainer,f=o.endOffset;n(ve.fromDom(r),ve.fromDom(u));const b=e.dom.createRng();b.setStart(r,c),b.setEnd(u,f),e.selection.setRng(o)},S=(e,n,o,r)=>{const c=e.pos;if(o)tu(c.left,c.top,r);else{const u=c.top-n+e.height;tu(c.left,u,r)}},O=(e,n,o,r,c)=>{const u=o+n,f=r.pos.top,b=r.bottom,y=b-f>=o;f<n?S(r,o,c!==!1,e):f>u?S(r,o,y?c!==!1:c===!0,e):b>u&&!y&&S(r,o,c===!0,e)},F=(e,n,o,r)=>{const c=Eu(e).dom.innerHeight;O(e,n,c,o,r)},G=(e,n,o,r)=>{const c=Eu(e).dom.innerHeight;O(e,n,c,o,r);const u=Nv(o.element),f=m1(window);u.top<f.y?Au(o.element,r!==!1):u.top>f.bottom&&Au(o.element,r===!0)},oe=(e,n,o)=>Dg(e,F,n,o),Ce=(e,n,o)=>h(e,n,F,o),je=(e,n,o)=>Dg(e,G,n,o),Pt=(e,n,o)=>h(e,n,G,o),fn=(e,n,o)=>{(e.inline?Ce:Pt)(e,n,o)},Jt=(e,n,o)=>{(e.inline?oe:je)(e,n,o)},St=e=>e.dom.focus(),vn=e=>{const n=al(e).dom;return e.dom===n.activeElement},xt=(e=Tf())=>R.from(e.dom.activeElement).map(ve.fromDom),Xn=e=>xt(al(e)).filter(n=>e.dom.contains(n.dom)),Eo=(e,n)=>{const o=Ds(n)?su(n).length:va(n).length+1;return e>o?o:e<0?0:e},Vo=e=>kf.range(e.start,Eo(e.soffset,e.start),e.finish,Eo(e.foffset,e.finish)),Rr=(e,n)=>!Wm(n.dom)&&(Ya(e,n)||Ps(e,n)),bc=e=>n=>Rr(e,n.start)&&Rr(e,n.finish),ma=e=>e.inline||us.browser.isFirefox(),Fi=e=>kf.range(ve.fromDom(e.startContainer),e.startOffset,ve.fromDom(e.endContainer),e.endOffset),Ef=e=>{const n=e.getSelection();return(!n||n.rangeCount===0?R.none():R.from(n.getRangeAt(0))).map(Fi)},kb=e=>{const n=Eu(e);return Ef(n.dom).filter(bc(e))},Bv=(e,n)=>R.from(n).filter(bc(e)).map(Vo),$v=e=>{const n=document.createRange();try{return n.setStart(e.start.dom,e.soffset),n.setEnd(e.finish.dom,e.foffset),R.some(n)}catch{return R.none()}},Xs=e=>{const n=ma(e)?kb(ve.fromDom(e.getBody())):R.none();e.bookmark=n.isSome()?n:e.bookmark},Nc=e=>(e.bookmark?e.bookmark:R.none()).bind(o=>Bv(ve.fromDom(e.getBody()),o)).bind($v),Bc=e=>{Nc(e).each(n=>e.selection.setRng(n))},el={isEditorUIElement:e=>{const n=e.className.toString();return n.indexOf("tox-")!==-1||n.indexOf("mce-")!==-1}},Jh=(e,n)=>(at(n)||(n=0),setTimeout(e,n)),ui=(e,n)=>(at(n)||(n=0),setInterval(e,n)),Ii={setEditorTimeout:(e,n,o)=>Jh(()=>{e.removed||n()},o),setEditorInterval:(e,n,o)=>{const r=ui(()=>{e.removed?clearInterval(r):n()},o);return r}},Qh=e=>e.type==="nodechange"&&e.selectionChange,Gu=(e,n)=>{const o=()=>{n.throttle()};yr.DOM.bind(document,"mouseup",o),e.on("remove",()=>{yr.DOM.unbind(document,"mouseup",o)})},$c=(e,n)=>{e.on("mouseup touchend",o=>{n.throttle()})},LE=(e,n)=>{$c(e,n),e.on("keyup NodeChange AfterSetSelectionRange",o=>{Qh(o)||Xs(e)})},HE=e=>{const n=kh(()=>{Xs(e)},0);e.on("init",()=>{e.inline&&Gu(e,n),LE(e,n)}),e.on("remove",()=>{n.cancel()})};let ep;const nw=yr.DOM,zE=e=>$n(e)&&el.isEditorUIElement(e),ow=e=>{const n=e.classList;return n!==void 0?n.contains("tox-edit-area")||n.contains("tox-edit-area__iframe")||n.contains("mce-content-body"):!1},Pv=(e,n)=>{const o=C2(e);return nw.getParent(n,c=>zE(c)||(o?e.dom.is(c,o):!1))!==null},Tb=e=>{try{const n=al(ve.fromDom(e.getElement()));return xt(n).fold(()=>document.body,o=>o.dom)}catch{return document.body}},SS=(e,n)=>{const o=n.editor;HE(o),o.on("focusin",()=>{const r=e.focusedEditor;r!==o&&(r&&r.dispatch("blur",{focusedEditor:o}),e.setActive(o),e.focusedEditor=o,o.dispatch("focus",{blurredEditor:r}),o.focus(!0))}),o.on("focusout",()=>{Ii.setEditorTimeout(o,()=>{const r=e.focusedEditor;!Pv(o,Tb(o))&&r===o&&(o.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),ep||(ep=r=>{const c=e.activeEditor;c&&oh(r).each(u=>{const f=u;f.ownerDocument===document&&f!==document.body&&!Pv(c,f)&&e.focusedEditor===c&&(c.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},nw.bind(document,"focusin",ep))},CO=(e,n)=>{e.focusedEditor===n.editor&&(e.focusedEditor=null),!e.activeEditor&&ep&&(nw.unbind(document,"focusin",ep),ep=null)},bF=e=>{e.on("AddEditor",fe(SS,e)),e.on("RemoveEditor",fe(CO,e))},SO=(e,n)=>e.dom.getParent(n,o=>e.dom.getContentEditable(o)==="true"),xO=e=>e.collapsed?R.from(rf(e.startContainer,e.startOffset)).map(ve.fromDom):R.none(),vF=(e,n)=>xO(n).bind(o=>jd(o)?R.some(o):Ya(e,o)?R.none():R.some(e)),kO=(e,n)=>{vF(ve.fromDom(e.getBody()),n).bind(o=>Pi(o.dom)).fold(()=>{e.selection.normalize()},o=>e.selection.setRng(o.toRange()))},VE=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},yF=e=>vn(e)||Xn(e).isSome(),wF=e=>ye(e.iframeElement)&&vn(ve.fromDom(e.iframeElement)),xS=e=>{const n=e.getBody();return n&&yF(ve.fromDom(n))},CF=e=>{const n=al(ve.fromDom(e.getElement()));return xt(n).filter(o=>!ow(o.dom)&&Pv(e,o.dom)).isSome()},Eb=e=>e.inline?xS(e):wF(e),UE=e=>Eb(e)||CF(e),SF=e=>{const n=e.selection,o=e.getBody();let r=n.getRng();e.quirks.refreshContentEditable(),ye(e.bookmark)&&!Eb(e)&&Nc(e).each(u=>{e.selection.setRng(u),r=u});const c=SO(e,n.getNode());if(c&&e.dom.isChildOf(c,o)){VE(c),kO(e,r),kS(e);return}e.inline||(us.browser.isOpera()||VE(o),e.getWin().focus()),(us.browser.isFirefox()||e.inline)&&(VE(o),kO(e,r)),kS(e)},kS=e=>e.editorManager.setActive(e),TO=(e,n)=>{e.removed||(n?kS(e):SF(e))},WE=(e,n,o,r,c)=>{const u=o?n.startContainer:n.endContainer,f=o?n.startOffset:n.endOffset;return R.from(u).map(ve.fromDom).map(b=>!r||!n.collapsed?Zd(b,c(b,f)).getOr(b):b).bind(b=>Qo(b)?R.some(b):xc(b).filter(Qo)).map(b=>b.dom).getOr(e)},EO=(e,n,o=!1)=>WE(e,n,!0,o,(r,c)=>Math.min(_u(r),c)),_O=(e,n,o=!1)=>WE(e,n,!1,o,(r,c)=>c>0?c-1:c),AO=(e,n)=>{const o=e;for(;e&&Zt(e)&&e.length===0;)e=n?e.nextSibling:e.previousSibling;return e||o},xF=(e,n)=>{if(!n)return e;let o=n.startContainer,r=n.endContainer;const c=n.startOffset,u=n.endOffset;let f=n.commonAncestorContainer;n.collapsed||(o===r&&u-c<2&&o.hasChildNodes()&&(f=o.childNodes[c]),Zt(o)&&Zt(r)&&(o.length===c?o=AO(o.nextSibling,!0):o=o.parentNode,u===0?r=AO(r.previousSibling,!1):r=r.parentNode,o&&o===r&&(f=o)));const b=Zt(f)?f.parentNode:f;return $n(b)?b:e},TS=(e,n,o,r)=>{const c=[],u=e.getRoot(),f=e.getParent(o||EO(u,n,n.collapsed),e.isBlock),b=e.getParent(r||_O(u,n,n.collapsed),e.isBlock);if(f&&f!==u&&c.push(f),f&&b&&f!==b){let y=f;const x=new ya(f,u);for(;(y=x.next())&&y!==b;)e.isBlock(y)&&c.push(y)}return b&&f!==b&&b!==u&&c.push(b),c},OO=(e,n,o)=>R.from(n).bind(r=>R.from(r.parentNode).map(c=>{const u=e.nodeIndex(r),f=e.createRng();return f.setStart(c,u),f.setEnd(c,u+1),o&&(pv(e,f,r,!0),pv(e,f,r,!1)),f})),ES=(e,n)=>re(n,o=>{const r=e.dispatch("GetSelectionRange",{range:o});return r.range!==o?r.range:o}),DO=e=>so(e)==="img"?1:pi(e).fold(()=>va(e).length,n=>n.length),RO=e=>pi(e).filter(n=>n.trim().length!==0||n.indexOf(ia)>-1).isSome(),kF=["img","br"],MO=e=>RO(e)||ae(kF,so(e)),TF=e=>md(e,MO),EF=e=>_F(e,MO),_F=(e,n)=>{const o=r=>{const c=va(r);for(let u=c.length-1;u>=0;u--){const f=c[u];if(n(f))return R.some(f);const b=o(f);if(b.isSome())return b}return R.none()};return o(e)},NO="[data-mce-autocompleter]",AF=(e,n)=>{if(BO(ve.fromDom(e.getBody())).isNone()){const o=ve.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());na(o,ve.fromDom(n.extractContents())),n.insertNode(o.dom),xc(o).each(r=>r.dom.normalize()),EF(o).map(r=>{e.selection.setCursorLocation(r.dom,DO(r))})}},OF=e=>fd(e,NO),BO=e=>Gf(e,NO),DF=(e,n)=>BO(n).each(o=>{const r=e.selection.getBookmark();dc(o),e.selection.moveToBookmark(r)}),RF={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},_S=(e,n,o)=>{const r=o?"lastChild":"firstChild",c=o?"prev":"next";if(e[r])return e[r];if(e!==n){let u=e[c];if(u)return u;for(let f=e.parent;f&&f!==n;f=f.parent)if(u=f[c],u)return u}},AS=e=>{var n;const o=(n=e.value)!==null&&n!==void 0?n:"";if(!Nl(o))return!1;const r=e.parent;return!(r&&(r.name!=="span"||r.attr("style"))&&/^[ ]+$/.test(o))},ZE=e=>{const n=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||n};class tl{constructor(n,o){this.name=n,this.type=o,o===1&&(this.attributes=[],this.attributes.map={})}static create(n,o){const r=new tl(n,RF[n]||1);return o&&on(o,(c,u)=>{r.attr(u,c)}),r}replace(n){const o=this;return n.parent&&n.remove(),o.insert(n,o),o.remove(),o}attr(n,o){const r=this;if(!Q(n))return ye(n)&&on(n,(u,f)=>{r.attr(f,u)}),r;const c=r.attributes;if(c){if(o!==void 0){if(o===null){if(n in c.map){delete c.map[n];let u=c.length;for(;u--;)if(c[u].name===n)return c.splice(u,1),r}return r}if(n in c.map){let u=c.length;for(;u--;)if(c[u].name===n){c[u].value=o;break}}else c.push({name:n,value:o});return c.map[n]=o,r}return c.map[n]}}clone(){const n=this,o=new tl(n.name,n.type),r=n.attributes;if(r){const c=[];c.map={};for(let u=0,f=r.length;u<f;u++){const b=r[u];b.name!=="id"&&(c[c.length]={name:b.name,value:b.value},c.map[b.name]=b.value)}o.attributes=c}return o.value=n.value,o}wrap(n){const o=this;return o.parent&&(o.parent.insert(n,o),n.append(o)),o}unwrap(){const n=this;for(let o=n.firstChild;o;){const r=o.next;n.insert(o,n,!0),o=r}n.remove()}remove(){const n=this,o=n.parent,r=n.next,c=n.prev;return o&&(o.firstChild===n?(o.firstChild=r,r&&(r.prev=null)):c&&(c.next=r),o.lastChild===n?(o.lastChild=c,c&&(c.next=null)):r&&(r.prev=c),n.parent=n.next=n.prev=null),n}append(n){const o=this;n.parent&&n.remove();const r=o.lastChild;return r?(r.next=n,n.prev=r,o.lastChild=n):o.lastChild=o.firstChild=n,n.parent=o,n}insert(n,o,r){n.parent&&n.remove();const c=o.parent||this;return r?(o===c.firstChild?c.firstChild=n:o.prev&&(o.prev.next=n),n.prev=o.prev,n.next=o,o.prev=n):(o===c.lastChild?c.lastChild=n:o.next&&(o.next.prev=n),n.next=o.next,n.prev=o,o.next=n),n.parent=c,n}getAll(n){const o=this,r=[];for(let c=o.firstChild;c;c=_S(c,o))c.name===n&&r.push(c);return r}children(){const n=this,o=[];for(let r=n.firstChild;r;r=r.next)o.push(r);return o}empty(){const n=this;if(n.firstChild){const o=[];for(let c=n.firstChild;c;c=_S(c,n))o.push(c);let r=o.length;for(;r--;){const c=o[r];c.parent=c.firstChild=c.lastChild=c.next=c.prev=null}}return n.firstChild=n.lastChild=null,n}isEmpty(n,o={},r){var c;const u=this;let f=u.firstChild;if(ZE(u))return!1;if(f)do{if(f.type===1){if(f.attr("data-mce-bogus"))continue;if(n[f.name]||ZE(f))return!1}if(f.type===8||f.type===3&&!AS(f)||f.type===3&&f.parent&&o[f.parent.name]&&Nl((c=f.value)!==null&&c!==void 0?c:"")||r&&r(f))return!1}while(f=_S(f,u));return!0}walk(n){return _S(this,null,n)}}const MF=(e,n)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(e.substr(n)),$O=(e,n,o=0)=>{const r=e.toLowerCase();if(r.indexOf("[if ",o)!==-1&&MF(r,o)){const c=r.indexOf("[endif]",o);return r.indexOf(">",c)}else if(n){const c=r.indexOf(">",o);return c!==-1?c:r.length}else{const c=/--!?>/g;c.lastIndex=o;const u=c.exec(e);return u?u.index+u[0].length:r.length}},NF=(e,n,o)=>{const r=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,c=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,u=e.getVoidElements();let f=1,b=o;for(;f!==0;)for(r.lastIndex=b;;){const y=r.exec(n);if(y===null)return b;if(y[1]==="!"){wo(y[2],"--")?b=$O(n,!1,y.index+3):b=$O(n,!0,y.index+1);break}else{c.lastIndex=r.lastIndex;const x=c.exec(n);if(Y(x)||x.index!==r.lastIndex)continue;y[1]==="/"?f-=1:go(u,y[2])||(f+=1),b=r.lastIndex+x[0].length;break}}return b},BF=(e,n)=>{const o=new RegExp(["\\s?("+e.join("|")+')="[^"]+"'].join("|"),"gi");return n.replace(o,"")},PO=(e,n)=>{const o=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,r=e.schema;let c=BF(e.getTempAttrs(),n);const u=r.getVoidElements();let f;for(;f=o.exec(c);){const b=o.lastIndex,y=f[0].length;let x;u[f[1]]?x=b:x=NF(r,c,b),c=c.substring(0,b-y)+c.substring(x),o.lastIndex=b-y}return Ra(c)},$F=PO,jE=e=>{const n=Ms(e,"[data-mce-bogus]");H(n,o=>{zr(o,"data-mce-bogus")==="all"?Fs(o):ru(o)?(os(o,ve.fromText(Gm)),Fs(o)):dc(o)})},FO=e=>{const n=Ms(e,"input");H(n,o=>{Yr(o,"name")})},IO=(e,n)=>{const o=wl(e),r=new RegExp(`^(<${o}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${o}>[\r
]*|<br \\/>[\r
]*)$`);return n.replace(r,"")},LO=(e,n)=>{const o=e.getDoc(),r=al(ve.fromDom(e.getBody())),c=ve.fromTag("div",o);rr(c,"data-mce-bogus","all"),ke(c,{position:"fixed",left:"-9999999px",top:"0"}),sh(c,n.innerHTML),jE(c),FO(c);const u=Ql(r);na(u,c);const f=Ra(c.dom.innerText);return Fs(c),f},PF=(e,n,o)=>{let r;return n.format==="raw"?r=Dt.trim($F(e.serializer,o.innerHTML)):n.format==="text"?r=LO(e,o):n.format==="tree"?r=e.serializer.serialize(o,n):r=IO(e,e.serializer.serialize(o,n)),n.format!=="text"&&!Kf(ve.fromDom(o))&&Q(r)?Dt.trim(r):r},FF=(e,n)=>R.from(e.getBody()).fold(he(n.format==="tree"?new tl("body",11):""),o=>PF(e,n,o)),HO=Dt.makeMap,zO=e=>{const n=[];e=e||{};const o=e.indent,r=HO(e.indent_before||""),c=HO(e.indent_after||""),u=tc.getEncodeFunc(e.entity_encoding||"raw",e.entities),f=e.element_format!=="xhtml";return{start:(b,y,x)=>{if(o&&r[b]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}if(n.push("<",b),y)for(let M=0,P=y.length;M<P;M++){const L=y[M];n.push(" ",L.name,'="',u(L.value,!0),'"')}if(!x||f?n[n.length]=">":n[n.length]=" />",x&&o&&c[b]&&n.length>0){const M=n[n.length-1];M.length>0&&M!==`
`&&n.push(`
`)}},end:b=>{let y;n.push("</",b,">"),o&&c[b]&&n.length>0&&(y=n[n.length-1],y.length>0&&y!==`
`&&n.push(`
`))},text:(b,y)=>{b.length>0&&(n[n.length]=y?b:u(b))},cdata:b=>{n.push("<![CDATA[",b,"]]>")},comment:b=>{n.push("<!--",b,"-->")},pi:(b,y)=>{y?n.push("<?",b," ",u(y),"?>"):n.push("<?",b,"?>"),o&&n.push(`
`)},doctype:b=>{n.push("<!DOCTYPE",b,">",o?`
`:"")},reset:()=>{n.length=0},getContent:()=>n.join("").replace(/\n$/,"")}},tp=(e={},n=Pu())=>{const o=zO(e);return e.validate="validate"in e?e.validate:!0,{serialize:c=>{const u=e.validate,f={3:y=>{var x;o.text((x=y.value)!==null&&x!==void 0?x:"",y.raw)},8:y=>{var x;o.comment((x=y.value)!==null&&x!==void 0?x:"")},7:y=>{o.pi(y.name,y.value)},10:y=>{var x;o.doctype((x=y.value)!==null&&x!==void 0?x:"")},4:y=>{var x;o.cdata((x=y.value)!==null&&x!==void 0?x:"")},11:y=>{let x=y;if(x=x.firstChild)do b(x);while(x=x.next)}};o.reset();const b=y=>{var x;const M=f[y.type];if(M)M(y);else{const P=y.name,L=P in n.getVoidElements();let ce=y.attributes;if(u&&ce&&ce.length>1){const ie=[];ie.map={};const te=n.getElementRule(y.name);if(te){for(let ue=0,Be=te.attributesOrder.length;ue<Be;ue++){const De=te.attributesOrder[ue];if(De in ce.map){const Ge=ce.map[De];ie.map[De]=Ge,ie.push({name:De,value:Ge})}}for(let ue=0,Be=ce.length;ue<Be;ue++){const De=ce[ue].name;if(!(De in ie.map)){const Ge=ce.map[De];ie.map[De]=Ge,ie.push({name:De,value:Ge})}}ce=ie}}if(o.start(P,ce,L),!L){let ie=y.firstChild;if(ie){(P==="pre"||P==="textarea")&&ie.type===3&&((x=ie.value)===null||x===void 0?void 0:x[0])===`
`&&o.text(`
`,!0);do b(ie);while(ie=ie.next)}o.end(P)}}};return c.type===1&&!e.inner?b(c):c.type===3?f[3](c):f[11](c),o.getContent()}}},VO=new Set;H(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],n=>{VO.add(n)});const UO=["font","text-decoration","text-emphasis"],GE=(e,n)=>ze(e.parseStyle(e.getAttrib(n,"style"))),IF=e=>VO.has(e),LF=(e,n)=>kn(GE(e,n),o=>!IF(o)),HF=e=>Z(e,n=>se(UO,o=>wo(n,o))),zF=(e,n,o)=>{const r=GE(e,n),c=GE(e,o),u=f=>{var b,y;const x=(b=e.getStyle(n,f))!==null&&b!==void 0?b:"",M=(y=e.getStyle(o,f))!==null&&y!==void 0?y:"";return Cs(x)&&Cs(M)&&x!==M};return se(r,f=>{const b=y=>se(y,x=>x===f);if(!b(c)&&b(UO)){const y=HF(c);return se(y,u)}else return u(f)})},WO=(e,n,o)=>R.from(o.container()).filter(Zt).exists(r=>{const c=e?0:-1;return n(r.data.charAt(o.offset()+c))}),qE=fe(WO,!0,Mc),KE=fe(WO,!1,Mc),VF=e=>{const n=e.container();return Zt(n)&&(n.data.length===0||dl(n.data)&&Uu.isBookmarkNode(n.parentNode))},np=(e,n)=>o=>cv(e?0:-1,o).filter(n).isSome(),ZO=e=>Oa(e)&&Ve(ve.fromDom(e),"display")==="block",jO=e=>lr(e)&&!oT(e),ho=np(!0,ZO),GO=np(!1,ZO),Fv=np(!0,nu),sw=np(!1,nu),OS=np(!0,Ja),qO=np(!1,Ja),op=np(!0,jO),sp=np(!1,jO),UF=e=>e.slice(0,-1),WF=(e,n,o)=>Ya(n,e)?UF(id(e,r=>o(r)||Ps(r,n))):[],rw=(e,n)=>WF(e,n,kt),_f=(e,n)=>[e].concat(rw(e,n)),KO=(e,n,o)=>dv(e,n,o,VF),YO=(e,n)=>ot(_f(ve.fromDom(n.container()),e),wa),zo=(e,n,o)=>KO(e,n.dom,o).forall(r=>YO(n,o).fold(()=>!zu(r,o,n.dom),c=>!zu(r,o,n.dom)&&Ya(c,ve.fromDom(r.container())))),XO=(e,n,o)=>YO(n,o).fold(()=>KO(e,n.dom,o).forall(r=>!zu(r,o,n.dom)),r=>KO(e,r.dom,o).isNone()),fs=fe(XO,!1),YE=fe(XO,!0),JV=fe(zo,!1),QV=fe(zo,!0),ZF=e=>Fh(e).exists(ru),XE=(e,n,o)=>{const r=Z(_f(ve.fromDom(o.container()),n),wa),c=An(r).getOr(n);return Cl(e,c.dom,o).filter(ZF)},JO=(e,n)=>Fh(n).exists(ru)||XE(!0,e,n).isSome(),JE=(e,n)=>jc(n).exists(ru)||XE(!1,e,n).isSome(),jF=fe(XE,!1),Ao=fe(XE,!0),QO=e=>bt.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),eD=(e,n)=>{const o=Z(_f(ve.fromDom(n.container()),e),wa);return An(o).getOr(e)},tD=(e,n)=>QO(n)?KE(n):KE(n)||Sl(eD(e,n).dom,n).exists(KE),Iv=(e,n)=>QO(n)?qE(n):qE(n)||xi(eD(e,n).dom,n).exists(qE),nD=e=>ae(["pre","pre-wrap"],e),QE=e=>Fh(e).bind(n=>Rl(n,Qo)).exists(n=>nD(Ve(n,"white-space"))),GF=(e,n)=>Sl(e.dom,n).isNone(),qF=(e,n)=>xi(e.dom,n).isNone(),oD=(e,n)=>GF(e,n)||qF(e,n)||fs(e,n)||YE(e,n)||JE(e,n)||JO(e,n),KF=e=>ye(e)&&lr(e)&&av(e),YF=(e,n)=>o=>KF(new ya(o,e)[n]()),eU=(e,n)=>{const o=xi(e.dom,n).getOr(n),r=YF(e.dom,"next");return n.isAtEnd()&&(r(n.container())||r(o.container()))},XF=(e,n)=>{const o=Sl(e.dom,n).getOr(n),r=YF(e.dom,"prev");return n.isAtStart()&&(r(n.container())||r(o.container()))},JF=(e,n)=>QE(n)?!1:oD(e,n)||tD(e,n)||Iv(e,n),aw=(e,n)=>QE(n)?!1:fs(e,n)||JV(e,n)||JE(e,n)||tD(e,n)||XF(e,n),QF=e=>{const n=e.container(),o=e.offset();return Zt(n)&&o<n.data.length?bt(n,o+1):e},Lv=(e,n)=>QE(n)?!1:YE(e,n)||QV(e,n)||JO(e,n)||Iv(e,n)||eU(e,n),e_=(e,n)=>aw(e,n)||Lv(e,QF(n)),Es=(e,n)=>zh(e.charAt(n)),t_=(e,n)=>Mc(e.charAt(n)),DS=e=>{const n=e.container();return Zt(n)&&oo(n.data,ia)},sD=e=>{const n=e.split("");return re(n,(o,r)=>zh(o)&&r>0&&r<n.length-1&&hv(n[r-1])&&hv(n[r+1])?" ":o).join("")},n_=(e,n,o)=>{const r=n.data,c=bt(n,0);return!o&&Es(r,0)&&!e_(e,c)?(n.data=" "+r.slice(1),!0):o&&t_(r,0)&&aw(e,c)?(n.data=ia+r.slice(1),!0):!1},rD=e=>{const n=e.data,o=sD(n);return o!==n?(e.data=o,!0):!1},o_=(e,n,o)=>{const r=n.data,c=bt(n,r.length-1);return!o&&Es(r,r.length-1)&&!e_(e,c)?(n.data=r.slice(0,-1)+" ",!0):o&&t_(r,r.length-1)&&Lv(e,c)?(n.data=r.slice(0,-1)+ia,!0):!1},aD=(e,n)=>{const o=n.container();if(!Zt(o))return R.none();if(DS(n)){const r=n_(e,o,!1)||rD(o)||o_(e,o,!1);return Po(r,n)}else if(e_(e,n)){const r=n_(e,o,!0)||o_(e,o,!0);return Po(r,n)}else return R.none()},e5=e=>{const n=ve.fromDom(e.getBody());e.selection.isCollapsed()&&aD(n,bt.fromRangeStart(e.selection.getRng())).each(o=>{e.selection.setRng(o.toRange())})},s_=(e,n,o)=>{if(o===0)return;const r=ve.fromDom(e),c=Um(r,wa).getOr(r),u=e.data.slice(n,n+o),f=n+o>=e.data.length&&Lv(c,bt(e,e.data.length)),b=n===0&&aw(c,bt(e,0));e.replaceData(n,o,Ep(u,4,b,f))},RS=(e,n)=>{const o=e.data.slice(n),r=o.length-Xc(o).length;s_(e,n,r)},r_=(e,n)=>{const o=e.data.slice(0,n),r=o.length-ls(o).length;s_(e,n-r,r)},a_=(e,n,o,r=!0)=>{const c=ls(e.data).length,u=r?e:n,f=r?n:e;return r?u.appendData(f.data):u.insertData(0,f.data),Fs(ve.fromDom(f)),o&&RS(u,c),u},t5=(e,n)=>{const o=e.container(),r=e.offset();return!bt.isTextPosition(e)&&o===n.parentNode&&r>bt.before(n).offset()},n5=(e,n)=>t5(n,e)?bt(n.container(),n.offset()-1):n,o5=e=>Zt(e)?bt(e,0):bt.before(e),s5=e=>Zt(e)?bt(e,e.data.length):bt.after(e),cD=e=>yi(e.previousSibling)?R.some(s5(e.previousSibling)):e.previousSibling?Td(e.previousSibling):R.none(),MS=e=>yi(e.nextSibling)?R.some(o5(e.nextSibling)):e.nextSibling?Pi(e.nextSibling):R.none(),c_=(e,n)=>R.from(n.previousSibling?n.previousSibling:n.parentNode).bind(o=>Sl(e,bt.before(o))).orThunk(()=>xi(e,bt.after(n))),r5=(e,n)=>xi(e,bt.after(n)).orThunk(()=>Sl(e,bt.before(n))),a5=(e,n)=>cD(n).orThunk(()=>MS(n)).orThunk(()=>c_(e,n)),c5=(e,n)=>MS(n).orThunk(()=>cD(n)).orThunk(()=>r5(e,n)),i5=(e,n,o)=>e?c5(n,o):a5(n,o),l5=(e,n,o)=>i5(e,n,o).map(fe(n5,o)),iD=(e,n,o)=>{o.fold(()=>{e.focus()},r=>{e.selection.setRng(r.toRange(),n)})},u5=e=>n=>n.dom===e,d5=(e,n)=>n&&go(e.schema.getBlockElements(),so(n)),lD=e=>{if(Ca(e)){const n=ve.fromHtml('<br data-mce-bogus="1">');return Vr(e),na(e,n),R.some(bt.before(n.dom))}else return R.none()},m5=(e,n,o)=>{const r=Hc(e).filter(Ds),c=Wd(e).filter(Ds);return Fs(e),sl(r,c,n,(u,f,b)=>{const y=u.dom,x=f.dom,M=y.data.length;return a_(y,x,o),b.container()===x?bt(y,M):b}).orThunk(()=>(o&&(r.each(u=>r_(u.dom,u.dom.length)),c.each(u=>RS(u.dom,0))),n))},f5=(e,n)=>go(e.schema.getTextInlineElements(),so(n)),qu=(e,n,o,r=!0)=>{const c=l5(n,e.getBody(),o.dom),u=Um(o,fe(d5,e),u5(e.getBody())),f=m5(o,c,f5(e,o));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind(lD).fold(()=>{r&&iD(e,n,f)},b=>{r&&iD(e,n,R.some(b))})},g5=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,uD=e=>g5.test(e),_b=(e,n)=>Ri(ve.fromDom(n),w2(e))&&!Qf(e.schema,n),h5=e=>{var n;return yr.DOM.getStyle(e,"direction",!0)==="rtl"||uD((n=e.textContent)!==null&&n!==void 0?n:"")},dD=(e,n,o)=>Z(yr.DOM.getParents(o.container(),"*",n),e),Rg=(e,n,o)=>{const r=dD(e,n,o);return R.from(r[r.length-1])},mD=(e,n,o)=>{const r=gf(n,e),c=gf(o,e);return ye(r)&&r===c},fD=e=>jt(e)||Mn(e),sa=(e,n)=>{const o=n.container(),r=n.offset();return e?I(o)?Zt(o.nextSibling)?bt(o.nextSibling,0):bt.after(o):jt(n)?bt(o,r+1):n:I(o)?Zt(o.previousSibling)?bt(o.previousSibling,o.previousSibling.data.length):bt.before(o):Mn(n)?bt(o,r-1):n},gD=fe(sa,!0),hD=fe(sa,!1),pD=(e,n)=>{const o=r=>r.stopImmediatePropagation();e.on("beforeinput input",o,!0),e.getDoc().execCommand(n),e.off("beforeinput input",o)},p5=e=>{e.execCommand("delete")},bD=e=>pD(e,"Delete"),Ab=e=>pD(e,"ForwardDelete"),b5=e=>n=>ca(xc(n),e,Ps),v5=e=>bi(e)||qi(e),Jr=(e,n)=>Ya(e,n)?Rl(n,v5,b5(e)):R.none(),Hv=(e,n=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!n})},tU=(e,n,o)=>Zr(Pi(o),Td(o),(r,c)=>{const u=sa(!0,r),f=sa(!1,c),b=sa(!1,n);return e?xi(o,b).exists(y=>y.isEqual(f)&&n.isEqual(u)):Sl(o,b).exists(y=>y.isEqual(u)&&n.isEqual(f))}).getOr(!0),nl=e=>(Ui(e)?Hc(e):Im(e)).bind(nl).orThunk(()=>R.some(e)),xr=(e,n,o,r=!0)=>{var c;n.deleteContents();const u=nl(o).getOr(o),f=ve.fromDom((c=e.dom.getParent(u.dom,e.dom.isBlock))!==null&&c!==void 0?c:o.dom);if(f.dom===e.getBody()?Hv(e,r):Ca(f)&&(Da(f),r&&e.selection.setCursorLocation(f.dom,0)),!Ps(o,f)){const b=ca(xc(f),o)?[]:Qg(f);H(b.concat(va(o)),y=>{!Ps(y,f)&&!Ya(y,f)&&Ca(y)&&Fs(y)})}},Rd=e=>n=>Ps(e,n),i_=e=>Ms(e,"td,th"),vD=(e,n)=>{const o=x=>Cg(ve.fromDom(x),n),r=o(e.startContainer),c=o(e.endContainer),u=r.isSome(),f=c.isSome(),b=Zr(r,c,Ps).getOr(!1);return{startTable:r,endTable:c,isStartInTable:u,isEndInTable:f,isSameTable:b,isMultiTable:!b&&u&&f}},cw=(e,n)=>({start:e,end:n}),l_=(e,n,o)=>({rng:e,table:n,cells:o}),zv=lu.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),iw=(e,n)=>fd(ve.fromDom(e),"td,th",n),yD=e=>!Ps(e.start,e.end),wD=(e,n)=>Cg(e.start,n).bind(o=>Cg(e.end,n).bind(r=>Po(Ps(o,r),o))),u_=(e,n)=>!yD(e)&&wD(e,n).exists(o=>{const r=o.dom.rows;return r.length===1&&r[0].cells.length===1}),CD=(e,n)=>{const o=iw(e.startContainer,n),r=iw(e.endContainer,n);return Zr(o,r,cw)},vm=e=>n=>Cg(n,e).bind(o=>Tn(i_(o)).map(r=>cw(n,r))),y5=e=>n=>Cg(n,e).bind(o=>An(i_(o)).map(r=>cw(r,n))),d_=e=>n=>wD(n,e).map(o=>l_(n,o,i_(o))),w5=(e,n,o,r)=>{if(o.collapsed||!e.forall(yD))return R.none();if(n.isSameTable){const c=e.bind(d_(r));return R.some({start:c,end:c})}else{const c=iw(o.startContainer,r),u=iw(o.endContainer,r),f=c.bind(vm(r)).bind(d_(r)),b=u.bind(y5(r)).bind(d_(r));return R.some({start:f,end:b})}},NS=(e,n)=>Qn(e,o=>Ps(o,n)),m_=e=>Zr(NS(e.cells,e.rng.start),NS(e.cells,e.rng.end),(n,o)=>e.cells.slice(n,o+1)),lw=(e,n,o)=>e.exists(r=>u_(r,o)&&By(r.start,n)),SD=(e,n)=>{const{startTable:o,endTable:r}=n,c=e.cloneRange();return o.each(u=>c.setStartAfter(u.dom)),r.each(u=>c.setEndBefore(u.dom)),c},Vv=(e,n,o,r)=>w5(e,n,o,r).bind(({start:c,end:u})=>c.or(u)).bind(c=>{const{isSameTable:u}=n,f=m_(c).getOr([]);if(u&&c.cells.length===f.length)return R.some(zv.fullTable(c.table));if(f.length>0){if(u)return R.some(zv.partialTable(f,R.none()));{const b=SD(o,n);return R.some(zv.partialTable(f,R.some({...n,rng:b})))}}else return R.none()}),Ku=(e,n,o,r)=>w5(e,n,o,r).bind(({start:c,end:u})=>{const f=c.bind(m_).getOr([]),b=u.bind(m_).getOr([]);if(f.length>0&&b.length>0){const y=SD(o,n);return R.some(zv.multiTable(f,b,y))}else return R.none()}),uw=(e,n)=>{const o=Rd(e),r=CD(n,o),c=vD(n,o);return lw(r,n,o)?r.map(u=>zv.singleCellTable(n,u.start)):c.isMultiTable?Ku(r,c,n,o):Vv(r,c,n,o)},kr=e=>H(e,n=>{Yr(n,"contenteditable"),Da(n)}),dw=(e,n)=>R.from(e.dom.getParent(n,e.dom.isBlock)).map(ve.fromDom),xD=(e,n,o)=>{o.each(r=>{n?Fs(r):(Da(r),e.selection.setCursorLocation(r.dom,0))})},BS=(e,n,o,r)=>{const c=o.cloneRange();r?(c.setStart(o.startContainer,o.startOffset),c.setEndAfter(n.dom.lastChild)):(c.setStartBefore(n.dom.firstChild),c.setEnd(o.endContainer,o.endOffset)),mw(e,c,n,!1).each(u=>u())},$S=e=>{const n=pf(e),o=ve.fromDom(e.selection.getNode());Ru(o.dom)&&Ca(o)?e.selection.setCursorLocation(o.dom,0):e.selection.collapse(!0),n.length>1&&se(n,r=>Ps(r,o))&&rr(o,"data-mce-selected","1")},PS=(e,n,o)=>R.some(()=>{const r=e.selection.getRng(),c=o.bind(({rng:u,isStartInTable:f})=>{const b=dw(e,f?u.endContainer:u.startContainer);u.deleteContents(),xD(e,f,b.filter(Ca));const y=f?n[0]:n[n.length-1];return BS(e,y,r,f),Ca(y)?R.none():R.some(f?n.slice(1):n.slice(0,-1))}).getOr(n);kr(c),$S(e)}),f_=(e,n,o,r)=>R.some(()=>{const c=e.selection.getRng(),u=n[0],f=o[o.length-1];BS(e,u,c,!0),BS(e,f,c,!1);const b=Ca(u)?n:n.slice(1),y=Ca(f)?o:o.slice(0,-1);kr(b.concat(y)),r.deleteContents(),$S(e)}),mw=(e,n,o,r=!0)=>R.some(()=>{xr(e,n,o,r)}),FS=(e,n)=>R.some(()=>qu(e,!1,n)),g_=(e,n,o)=>uw(n,o).bind(r=>r.fold(fe(mw,e),fe(FS,e),fe(PS,e),fe(f_,e))),kD=(e,n)=>fw(e,n),TD=(e,n,o,r)=>IS(n,r).fold(()=>g_(e,n,o),c=>kD(e,c)),ED=(e,n,o)=>{const r=ve.fromDom(e.getBody()),c=e.selection.getRng();return o.length!==0?PS(e,o,R.none()):TD(e,r,c,n)},h_=(e,n)=>ot(_f(n,e),ec),IS=(e,n)=>ot(_f(n,e),Wi("caption")),Uv=(e,n,o,r,c)=>Hh(o,e.getBody(),c).bind(u=>h_(n,ve.fromDom(u.getNode())).bind(f=>Ps(f,r)?R.none():R.some(Me))),fw=(e,n)=>R.some(()=>{Da(n),e.selection.setCursorLocation(n.dom,0)}),p_=(e,n,o,r)=>Pi(e.dom).bind(c=>Td(e.dom).map(u=>n?o.isEqual(c)&&r.isEqual(u):o.isEqual(u)&&r.isEqual(c))).getOr(!0),C5=(e,n)=>fw(e,n),S5=(e,n,o)=>IS(e,ve.fromDom(o.getNode())).fold(()=>R.some(Me),r=>Po(!Ps(r,n),Me)),_D=(e,n,o,r,c)=>Hh(o,e.getBody(),c).fold(()=>R.some(Me),u=>p_(r,o,c,u)?C5(e,r):S5(n,r,u)),AD=(e,n,o,r)=>{const c=bt.fromRangeStart(e.selection.getRng());return h_(o,r).bind(u=>Ca(u)?fw(e,u):Uv(e,o,n,u,c))},OD=(e,n,o,r)=>{const c=bt.fromRangeStart(e.selection.getRng());return Ca(r)?fw(e,r):_D(e,o,n,r,c)},gw=(e,n)=>e?OS(n):qO(n),DD=(e,n)=>{const o=bt.fromRangeStart(e.selection.getRng());return gw(n,o)||Cl(n,e.getBody(),o).exists(r=>gw(n,r))},RD=(e,n,o)=>{const r=ve.fromDom(e.getBody());return IS(r,o).fold(()=>AD(e,n,r,o).orThunk(()=>Po(DD(e,n),Me)),c=>OD(e,n,r,c))},LS=(e,n)=>{const o=ve.fromDom(e.selection.getStart(!0)),r=pf(e);return e.selection.isCollapsed()&&r.length===0?RD(e,n,o):ED(e,o,r)},rp=(e,n)=>{let o=n;for(;o&&o!==e;){if(si(o)||lr(o))return o;o=o.parentNode}return null},MD=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],ND=Dt.each,HS=e=>{const n=e.dom,o=new Set(e.serializer.getTempAttrs()),r=(u,f)=>{if(u.nodeName!==f.nodeName||u.nodeType!==f.nodeType)return!1;const b=x=>{const M={};return ND(n.getAttribs(x),P=>{const L=P.nodeName.toLowerCase();L!=="style"&&!c(L)&&(M[L]=n.getAttrib(x,L))}),M},y=(x,M)=>{for(const P in x)if(go(x,P)){const L=M[P];if(Bn(L)||x[P]!==L)return!1;delete M[P]}for(const P in M)if(go(M,P))return!1;return!0};return $n(u)&&$n(f)&&(!y(b(u),b(f))||!y(n.parseStyle(n.getAttrib(u,"style")),n.parseStyle(n.getAttrib(f,"style"))))?!1:!Rc(u)&&!Rc(f)},c=u=>se(MD,f=>wo(u,f))||o.has(u);return{compare:r,isAttributeInternal:c}},BD=(e,n)=>{let o=e;for(;o=o.walk();)n(o)},b_=(e,n,o,r)=>{const c=o.name;for(let u=0,f=e.length;u<f;u++){const b=e[u];if(b.name===c){const y=r.nodes[c];y?y.nodes.push(o):r.nodes[c]={filter:b,nodes:[o]}}}if(o.attributes)for(let u=0,f=n.length;u<f;u++){const b=n[u],y=b.name;if(y in o.attributes.map){const x=r.attributes[y];x?x.nodes.push(o):r.attributes[y]={filter:b,nodes:[o]}}}},$D=(e,n,o)=>{const r={nodes:{},attributes:{}};return o.firstChild&&BD(o,c=>{b_(e,n,c,r)}),r},v_=(e,n)=>{const o=(r,c)=>{on(r,u=>{const f=Do(u.nodes);H(u.filter.callbacks,b=>{for(let y=f.length-1;y>=0;y--){const x=f[y];(!(c?x.attr(u.filter.name)!==void 0:x.name===u.filter.name)||$t(x.parent))&&f.splice(y,1)}f.length>0&&b(f,u.filter.name,n)})})};o(e.nodes,!1),o(e.attributes,!0)},y_=(e,n,o,r={})=>{const c=$D(e,n,o);v_(c,r)},zS=(e,n,o)=>{if(e.insert&&n(o)){const r=new tl("br",1);r.attr("data-mce-bogus","1"),o.empty().append(r)}else o.empty().append(new tl("#text",3)).value=ia},PD=e=>{var n;return VS(e,"#text")&&((n=e==null?void 0:e.firstChild)===null||n===void 0?void 0:n.value)===ia},VS=(e,n)=>{const o=e==null?void 0:e.firstChild;return ye(o)&&o===e.lastChild&&o.name===n},US=(e,n)=>{const o=e.getElementRule(n.name);return(o==null?void 0:o.paddEmpty)===!0},Wv=(e,n,o,r)=>r.isEmpty(n,o,c=>US(e,c)),FD=(e,n)=>ye(e)&&(n(e)||e.name==="br"),Zv=(e,n,o=e.parent)=>{if(n.getSpecialElements()[e.name])e.empty().remove();else{const r=e.children();for(const c of r)o&&!n.isValidChild(o.name,c.name)&&Zv(c,n,o);e.unwrap()}},hw=(e,n,o=Me)=>{const r=n.getTextBlockElements(),c=n.getNonEmptyElements(),u=n.getWhitespaceElements(),f=Dt.makeMap("tr,td,th,tbody,thead,tfoot,table"),b=new Set;for(let y=0;y<e.length;y++){const x=e[y];let M,P,L;if(!x.parent||b.has(x))continue;if(r[x.name]&&x.parent.name==="li"){let ie=x.next;for(;ie&&r[ie.name];){ie.name="li",b.add(ie),x.parent.insert(ie,x.parent);ie=ie.next}x.unwrap();continue}const ce=[x];for(M=x.parent;M&&!n.isValidChild(M.name,x.name)&&!f[M.name];M=M.parent)ce.push(M);if(M&&ce.length>1)if(n.isValidChild(M.name,x.name)){ce.reverse(),P=ce[0].clone(),o(P);let ie=P;for(let te=0;te<ce.length-1;te++){n.isValidChild(ie.name,ce[te].name)?(L=ce[te].clone(),o(L),ie.append(L)):L=ie;for(let ue=ce[te].firstChild;ue&&ue!==ce[te+1];){const Be=ue.next;L.append(ue),ue=Be}ie=L}Wv(n,c,u,P)?M.insert(x,ce[0],!0):(M.insert(P,ce[0],!0),M.insert(x,P)),M=ce[0],(Wv(n,c,u,M)||VS(M,"br"))&&M.empty().remove()}else Zv(x,n);else if(x.parent){if(x.name==="li"){let ie=x.prev;if(ie&&(ie.name==="ul"||ie.name==="ol")){ie.append(x);continue}if(ie=x.next,ie&&(ie.name==="ul"||ie.name==="ol")&&ie.firstChild){ie.insert(x,ie.firstChild,!0);continue}const te=new tl("ul",1);o(te),x.wrap(te);continue}if(n.isValidChild(x.parent.name,"div")&&n.isValidChild("div",x.name)){const ie=new tl("div",1);o(ie),x.wrap(ie)}else Zv(x,n)}}},pw=(e,n)=>{let o=e;for(;o;){if(o.name===n)return!0;o=o.parent}return!1},WS=(e,n,o=n.parent)=>o&&e.children[n.name]&&!e.isValidChild(o.name,n.name)?!0:!!(o&&n.name==="a"&&pw(o,"a")),ID=(e,n,o,r)=>{const c=document.createRange();return c.setStart(e,n),c.setEnd(o,r),c},bw=e=>{const n=bt.fromRangeStart(e),o=bt.fromRangeEnd(e),r=e.commonAncestorContainer;return Cl(!1,r,o).map(c=>!zu(n,o,r)&&zu(n,c,r)?ID(n.container(),n.offset(),c.container(),c.offset()):e).getOr(e)},vw=e=>e.collapsed?e:bw(e),w_=e=>ye(e.firstChild)&&e.firstChild===e.lastChild,yw=e=>e.name==="br"||e.value===ia,LD=(e,n)=>e.getBlockElements()[n.name]&&w_(n)&&yw(n.firstChild),x5=(e,n)=>{const o=e.getNonEmptyElements();return ye(n)&&(n.isEmpty(o)||LD(e,n))},HD=(e,n)=>{let o=n.firstChild,r=n.lastChild;return o&&o.name==="meta"&&(o=o.next),r&&r.attr("id")==="mce_marker"&&(r=r.prev),x5(e,r)&&(r=r==null?void 0:r.prev),!o||o!==r?!1:o.name==="ul"||o.name==="ol"},zD=e=>{var n,o;const r=e.firstChild,c=e.lastChild;return r&&r.nodeName==="META"&&((n=r.parentNode)===null||n===void 0||n.removeChild(r)),c&&c.id==="mce_marker"&&((o=c.parentNode)===null||o===void 0||o.removeChild(c)),e},k5=(e,n,o)=>{const r=n.serialize(o),c=e.createFragment(r);return zD(c)},nU=e=>{var n;return Z((n=e==null?void 0:e.childNodes)!==null&&n!==void 0?n:[],o=>o.nodeName==="LI")},T5=e=>e.data===ia||jr(e),C_=e=>ye(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&T5(e.firstChild),ym=e=>!e.firstChild||C_(e),S_=e=>e.length>0&&ym(e[e.length-1])?e.slice(0,-1):e,jv=(e,n)=>{const o=e.getParent(n,e.isBlock);return o&&o.nodeName==="LI"?o:null},x_=(e,n)=>!!jv(e,n),E5=(e,n)=>{const o=n.cloneRange(),r=n.cloneRange();return o.setStartBefore(e),r.setEndAfter(e),[o.cloneContents(),r.cloneContents()]},VD=(e,n)=>{const o=bt.before(e),c=fm(n).next(o);return c?c.toRange():null},UD=(e,n)=>{const o=bt.after(e),c=fm(n).prev(o);return c?c.toRange():null},WD=(e,n,o,r)=>{const c=E5(e,r),u=e.parentNode;return u&&(u.insertBefore(c[0],e),Dt.each(n,f=>{u.insertBefore(f,e)}),u.insertBefore(c[1],e),u.removeChild(e)),UD(n[n.length-1],o)},k_=(e,n,o)=>{const r=e.parentNode;return r&&Dt.each(n,c=>{r.insertBefore(c,e)}),VD(e,o)},_5=(e,n,o,r)=>(r.insertAfter(n.reverse(),e),UD(n[0],o)),ZD=(e,n,o,r)=>{const c=k5(n,e,r),u=jv(n,o.startContainer),f=S_(nU(c.firstChild)),b=1,y=2,x=n.getRoot(),M=P=>{const L=bt.fromRangeStart(o),ce=fm(n.getRoot()),ie=P===b?ce.prev(L):ce.next(L),te=ie==null?void 0:ie.getNode();return te?jv(n,te)!==u:!0};return u?M(b)?k_(u,f,x):M(y)?_5(u,f,x,n):WD(u,f,x,o):null},A5=["pre"],ww=(e,n,o,r)=>{var c;const u=n.firstChild,f=n.lastChild,b=f.attr("data-mce-type")==="bookmark"?f.prev:f,y=u===b,x=ae(A5,u.name);if(y&&x){const M=u.attr("contenteditable")!=="false",P=((c=e.getParent(o,e.isBlock))===null||c===void 0?void 0:c.nodeName.toLowerCase())===u.name,L=R.from(rp(r,o)).forall(si);return M&&P&&L}else return!1},ZS=Ru,O5=(e,n,o)=>{if(ye(o)){const r=e.getParent(n.endContainer,ZS);return o===r&&By(ve.fromDom(o),n)}else return!1},jD=(e,n,o)=>{var r;if(o.getAttribute("data-mce-bogus")==="all")(r=o.parentNode)===null||r===void 0||r.insertBefore(e.dom.createFragment(n),o);else{const c=o.firstChild,u=o.lastChild;!c||c===u&&c.nodeName==="BR"?e.dom.setHTML(o,n):e.selection.setContent(n,{no_events:!0})}},D5=(e,n)=>{R.from(e.getParent(n,"td,th")).map(ve.fromDom).each(v1)},R5=(e,n)=>{const o=e.schema.getTextInlineElements(),r=e.dom;if(n){const c=e.getBody(),u=HS(e);Dt.each(r.select("*[data-mce-fragment]"),f=>{if(ye(o[f.nodeName.toLowerCase()])&&LF(r,f)){for(let y=f.parentElement;ye(y)&&y!==c&&!zF(r,f,y);y=y.parentElement)if(u.compare(y,f)){r.remove(f,!0);break}}})}},M5=e=>{let n=e;for(;n=n.walk();)n.type===1&&n.attr("data-mce-fragment","1")},N5=e=>{Dt.each(e.getElementsByTagName("*"),n=>{n.removeAttribute("data-mce-fragment")})},B5=e=>!!e.getAttribute("data-mce-fragment"),GD=(e,n)=>ye(n)&&!e.schema.getVoidElements()[n.nodeName],$5=(e,n)=>{var o,r,c;let u;const f=e.dom,b=e.selection;if(!n)return;b.scrollIntoView(n);const y=rp(e.getBody(),n);if(y&&f.getContentEditable(y)==="false"){f.remove(n),b.select(y);return}let x=f.createRng();const M=n.previousSibling;if(Zt(M)){x.setStart(M,(r=(o=M.nodeValue)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0);const ce=n.nextSibling;Zt(ce)&&(M.appendData(ce.data),(c=ce.parentNode)===null||c===void 0||c.removeChild(ce))}else x.setStartBefore(n),x.setEndBefore(n);const P=ce=>{let ie=bt.fromRangeStart(ce);return ie=fm(e.getBody()).next(ie),ie==null?void 0:ie.toRange()},L=f.getParent(n,f.isBlock);f.remove(n),L&&f.isEmpty(L)&&(Vr(ve.fromDom(L)),x.setStart(L,0),x.setEnd(L,0),!ZS(L)&&!B5(L)&&(u=P(x))?(x=u,f.remove(L)):f.add(L,f.create("br",{"data-mce-bogus":"1"}))),b.setRng(x)},T_=e=>{const n=e.dom,o=vw(e.selection.getRng());e.selection.setRng(o);const r=n.getParent(o.startContainer,ZS);O5(n,o,r)?mw(e,o,ve.fromDom(r)):o.startContainer===o.endContainer&&o.endOffset-o.startOffset===1&&Zt(o.startContainer.childNodes[o.startOffset])?o.deleteContents():e.getDoc().execCommand("Delete",!1)},Ob=(e,n,o)=>{var r,c;const u=e.selection,f=e.dom,b=e.parser,y=o.merge,x=tp({validate:!0},e.schema),M='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.indexOf("{$caret}")===-1&&(n+="{$caret}"),n=n.replace(/\{\$caret\}/,M);let P=u.getRng();const L=P.startContainer,ce=e.getBody();L===ce&&u.isCollapsed()&&f.isBlock(ce.firstChild)&&GD(e,ce.firstChild)&&f.isEmpty(ce.firstChild)&&(P=f.createRng(),P.setStart(ce.firstChild,0),P.setEnd(ce.firstChild,0),u.setRng(P)),u.isCollapsed()||T_(e);const ie=u.getNode(),te={context:ie.nodeName.toLowerCase(),data:o.data,insert:!0},ue=b.parse(n,te);if(o.paste===!0&&HD(e.schema,ue)&&x_(f,ie))return P=ZD(x,f,u.getRng(),ue),P&&u.setRng(P),n;o.paste===!0&&ww(f,ue,ie,e.getBody())&&((r=ue.firstChild)===null||r===void 0||r.unwrap()),M5(ue);let Be=ue.lastChild;if(Be&&Be.attr("id")==="mce_marker"){const De=Be;for(Be=Be.prev;Be;Be=Be.walk(!0))if(Be.type===3||!f.isBlock(Be.name)){Be.parent&&e.schema.isValidChild(Be.parent.name,"span")&&Be.parent.insert(De,Be,Be.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(ie),!te.invalid)n=x.serialize(ue),jD(e,n,ie);else{e.selection.setContent(M);let De=u.getNode(),Ge;const et=e.getBody();for(oi(De)?De=Ge=et:Ge=De;Ge&&Ge!==et;)De=Ge,Ge=Ge.parentNode;n=De===et?et.innerHTML:f.getOuterHTML(De);const Tt=b.parse(n);for(let Je=Tt;Je;Je=Je.walk())if(Je.attr("id")==="mce_marker"){Je.replace(ue);break}const gn=ue.children(),en=(c=ue.parent)!==null&&c!==void 0?c:Tt;ue.unwrap();const ut=Z(gn,Je=>WS(e.schema,Je,en));hw(ut,e.schema),y_(b.getNodeFilters(),b.getAttributeFilters(),Tt),n=x.serialize(Tt),De===et?f.setHTML(et,n):f.setOuterHTML(De,n)}return R5(e,y),$5(e,f.get("mce_marker")),N5(e.getBody()),D5(f,u.getStart()),Jm(e.schema,e.getBody(),u.getStart()),n},jS=e=>e instanceof tl,P5=e=>{Eb(e)&&Pi(e.getBody()).each(n=>{const o=n.getNode(),r=Ja(o)?Pi(o).getOr(n):n;e.selection.setRng(r.toRange())})},Gv=(e,n,o)=>{e.dom.setHTML(e.getBody(),n),o!==!0&&P5(e)},qD=(e,n,o,r)=>{if(o.length===0||/^\s+$/.test(o)){const c='<br data-mce-bogus="1">';n.nodeName==="TABLE"?o="<tr><td>"+c+"</td></tr>":/^(UL|OL)$/.test(n.nodeName)&&(o="<li>"+c+"</li>");const u=wl(e);return e.schema.isValidChild(n.nodeName.toLowerCase(),u.toLowerCase())?(o=c,o=e.dom.createHTML(u,Gp(e),o)):o||(o=c),Gv(e,o,r.no_selection),{content:o,html:o}}else{r.format!=="raw"&&(o=tp({validate:!1},e.schema).serialize(e.parser.parse(o,{isRootContent:!0,insert:!0})));const c=Kf(ve.fromDom(n))?o:Dt.trim(o);return Gv(e,c,r.no_selection),{content:c,html:c}}},KD=(e,n,o,r)=>{y_(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),o);const c=tp({validate:!1},e.schema).serialize(o),u=Kf(ve.fromDom(n))?c:Dt.trim(c);return Gv(e,u,r.no_selection),{content:o,html:u}},F5=(e,n,o)=>R.from(e.getBody()).map(r=>jS(n)?KD(e,r,n,o):qD(e,r,n,o)).getOr({content:n,html:jS(o.content)?"":o.content}),YD=(e,n)=>Ml(e,n).isSome(),XD=e=>ee(e)?e:kt,qv=(e,n,o)=>{let r=e.dom;const c=XD(o);for(;r.parentNode;){r=r.parentNode;const u=ve.fromDom(r),f=n(u);if(f.isSome())return f;if(c(u))break}return R.none()},GS=(e,n,o)=>{const r=n(e),c=XD(o);return r.orThunk(()=>c(e)?R.none():qv(e,n,c))},qS=Py,E_=(e,n,o)=>{const r=e.formatter.get(o);if(r)for(let c=0;c<r.length;c++){const u=r[c];if(Il(u)&&u.inherit===!1&&e.dom.is(n,u.selector))return!0}return!1},Kv=(e,n,o,r,c)=>{const u=e.dom.getRoot();if(n===u)return!1;const f=e.dom.getParent(n,b=>E_(e,b,o)?!0:b.parentNode===u||!!wm(e,b,o,r,!0));return!!wm(e,f,o,r,c)},Cw=(e,n,o)=>sc(o)&&qS(n,o.inline)||_d(o)&&qS(n,o.block)?!0:Il(o)?$n(n)&&e.is(n,o.selector):!1,JD=(e,n,o,r,c,u)=>{const f=o[r],b=r==="attributes";if(ee(o.onmatch))return o.onmatch(n,o,r);if(f){if(ha(f)){for(let y=0;y<f.length;y++)if(b?e.getAttrib(n,f[y]):Fy(e,n,f[y]))return!0}else for(const y in f)if(go(f,y)){const x=b?e.getAttrib(n,y):Fy(e,n,y),M=hm(f[y],u),P=$t(x)||xs(x);if(P&&$t(M))continue;if(c&&P&&!o.exact||(!c||o.exact)&&!qS(x,kg(M,y)))return!1}}return!0},wm=(e,n,o,r,c)=>{const u=e.formatter.get(o),f=e.dom;if(u&&$n(n))for(let b=0;b<u.length;b++){const y=u[b];if(Cw(e.dom,n,y)&&JD(f,n,y,"attributes",c,r)&&JD(f,n,y,"styles",c,r)){const x=y.classes;if(x){for(let M=0;M<x.length;M++)if(!e.dom.hasClass(n,hm(x[M],r)))return}return y}}},__=(e,n,o,r,c)=>{if(r)return Kv(e,r,n,o,c);if(r=e.selection.getNode(),Kv(e,r,n,o,c))return!0;const u=e.selection.getStart();return!!(u!==r&&Kv(e,u,n,o,c))},I5=(e,n,o)=>{const r=[],c={},u=e.selection.getStart();return e.dom.getParent(u,f=>{for(let b=0;b<n.length;b++){const y=n[b];!c[y]&&wm(e,f,y,o)&&(c[y]=!0,r.push(y))}},e.dom.getRoot()),r},KS=(e,n)=>{const o=c=>Ps(c,ve.fromDom(e.getBody())),r=(c,u)=>wm(e,c.dom,u)?R.some(u):R.none();return R.from(e.selection.getStart(!0)).bind(c=>GS(ve.fromDom(c),u=>ks(n,f=>r(u,f)),o)).getOrNull()},QD=(e,n)=>{const o=e.formatter.get(n),r=e.dom;if(o){const c=e.selection.getStart(),u=mb(r,c);for(let f=o.length-1;f>=0;f--){const b=o[f];if(!Il(b))return!0;for(let y=u.length-1;y>=0;y--)if(r.is(u[y],b.selector))return!0}}return!1},A_=(e,n,o)=>Pe(o,(r,c)=>{const u=bE(e,c);return e.formatter.matchNode(n,c,{},u)?r.concat([c]):r},[]),Yv=Sr,L5=(e,n)=>e.importNode(n,!0),eR=e=>{const n=[];let o=e;for(;o;){if(Zt(o)&&o.data!==Yv||o.childNodes.length>1)return[];$n(o)&&n.push(o),o=o.firstChild}return n},YS=e=>eR(e).length>0,O_=e=>{if(e){const n=new ya(e,e);for(let o=n.current();o;o=n.next())if(Zt(o))return o}return null},D_=e=>{const n=ve.fromTag("span");return Rs(n,{id:Ty,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&na(n,ve.fromText(Yv)),n},H5=e=>{const n=O_(e);return n&&n.data.charAt(0)===Yv&&n.deleteData(0,1),n},R_=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(YS(n))qu(e,!1,ve.fromDom(n),o);else{const u=c.getRng(),f=r.getParent(n,r.isBlock),b=u.startContainer,y=u.startOffset,x=u.endContainer,M=u.endOffset,P=H5(n);r.remove(n,!0),b===P&&y>0&&u.setStart(P,y-1),x===P&&M>0&&u.setEnd(P,M-1),f&&r.isEmpty(f)&&Da(ve.fromDom(f)),c.setRng(u)}},Xv=(e,n,o=!0)=>{const r=e.dom,c=e.selection;if(n)R_(e,n,o);else if(n=vg(e.getBody(),c.getStart()),!n)for(;n=r.get(Ty);)R_(e,n,!1)},Mg=(e,n,o)=>{var r,c;const u=e.dom,f=u.getParent(o,fe(Sg,e.schema));f&&u.isEmpty(f)?(r=o.parentNode)===null||r===void 0||r.replaceChild(n,o):(kp(ve.fromDom(o)),u.isEmpty(o)?(c=o.parentNode)===null||c===void 0||c.replaceChild(n,o):u.insertAfter(n,o))},tR=(e,n)=>(e.appendChild(n),n),XS=(e,n)=>{var o;const r=Ne(e,(u,f)=>tR(u,f.cloneNode(!1)),n),c=(o=r.ownerDocument)!==null&&o!==void 0?o:document;return tR(r,c.createTextNode(Yv))},Ba=(e,n,o,r,c,u)=>{const f=e.formatter,b=e.dom,y=Z(ze(f.get()),P=>P!==r&&!oo(P,"removeformat")),x=A_(e,o,y);if(Z(x,P=>!vE(e,P,r)).length>0){const P=o.cloneNode(!1);return b.add(n,P),f.remove(r,c,P,u),b.remove(P),R.some(P)}else return R.none()},M_=(e,n,o)=>{let r;const c=e.selection,u=e.formatter.get(n);if(!u)return;const f=c.getRng();let b=f.startOffset;const x=f.startContainer.nodeValue;r=vg(e.getBody(),c.getStart());const M=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&b>0&&b<x.length&&M.test(x.charAt(b))&&M.test(x.charAt(b-1))){const P=c.getBookmark();f.collapse(!0);let L=wf(e.dom,f,u);L=Sb(L),e.formatter.apply(n,o,L),c.moveToBookmark(P)}else{let P=r?O_(r):null;(!r||(P==null?void 0:P.data)!==Yv)&&(r=L5(e.getDoc(),D_(!0).dom),P=r.firstChild,f.insertNode(r),b=1),e.formatter.apply(n,o,r),c.setCursorLocation(P,b)}},N_=(e,n,o,r)=>{const c=e.dom,u=e.selection;let f=!1;const b=e.formatter.get(n);if(!b)return;const y=u.getRng(),x=y.startContainer,M=y.startOffset;let P=x;Zt(x)&&(M!==x.data.length&&(f=!0),P=P.parentNode);const L=[];let ce;for(;P;){if(wm(e,P,n,o,r)){ce=P;break}P.nextSibling&&(f=!0),L.push(P),P=P.parentNode}if(ce)if(f){const ie=u.getBookmark();y.collapse(!0);let te=wf(c,y,b,!0);te=Sb(te),e.formatter.remove(n,o,te,r),u.moveToBookmark(ie)}else{const ie=vg(e.getBody(),ce),te=D_(!1).dom;Mg(e,te,ie??ce);const ue=Ba(e,te,ce,n,o,r),Be=XS(L.concat(ue.toArray()),te);ie&&R_(e,ie,!1),u.setCursorLocation(Be,1),c.isEmpty(ce)&&c.remove(ce)}},Ng=(e,n)=>{const o=e.selection,r=e.getBody();Xv(e,null,!1),(n===8||n===46)&&o.isCollapsed()&&o.getStart().innerHTML===Yv&&Xv(e,vg(r,o.getStart())),(n===37||n===39)&&Xv(e,vg(r,o.getStart()))},z5=e=>{e.on("mouseup keydown",n=>{Ng(e,n.keyCode)})},nR=(e,n)=>{const o=D_(!1),r=XS(n,o.dom);return os(ve.fromDom(e),o),Fs(ve.fromDom(e)),bt(r,0)},Sw=(e,n)=>{const o=e.schema.getTextInlineElements();return go(o,so(n))&&!xl(n.dom)&&!Du(n.dom)},V5=e=>xl(e.dom)&&YS(e.dom),xw={},Db=il(["pre"]),U5=(e,n)=>{xw[e]||(xw[e]=[]),xw[e].push(n)},Rb=(e,n)=>{go(xw,e)&&H(xw[e],o=>{o(n)})};U5("pre",e=>{const n=e.selection.getRng(),o=c=>u=>{const f=u.previousSibling;return Db(f)&&ae(c,f)},r=(c,u)=>{const f=ve.fromDom(u),b=Zi(f).dom;Fs(f),Fo(ve.fromDom(c),[ve.fromTag("br",b),ve.fromTag("br",b),...va(f)])};if(!n.collapsed){const c=e.selection.getSelectedBlocks(),u=Z(Z(c,Db),o(c));H(u,f=>{r(f.previousSibling,f)})}});const oR=["fontWeight","fontStyle","color","fontSize","fontFamily"],Jv=e=>ht(e.styles)&&se(ze(e.styles),n=>ae(oR,n)),Cm=e=>ot(e,n=>sc(n)&&n.inline==="span"&&Jv(n)),kw=(e,n)=>{const o=e.get(n);return yt(o)?Cm(o):R.none()},JS=(e,n)=>Sl(n,bt.fromRangeStart(e)).isNone(),sR=(e,n)=>xi(n,bt.fromRangeEnd(e)).exists(o=>!jr(o.getNode())||xi(n,o).isSome())===!1,rR=e=>n=>dh(n)&&e.getContentEditableParent(n)!=="false",QS=e=>{const n=e.getSelectedBlocks(),o=e.getRng();if(e.isCollapsed())return[];if(n.length===1)return JS(o,n[0])&&sR(o,n[0])?n:[];{const r=An(n).filter(f=>JS(o,f)).toArray(),c=Tn(n).filter(f=>sR(o,f)).toArray(),u=n.slice(1,-1);return r.concat(u).concat(c)}},W5=e=>Z(QS(e),rR(e.dom)),Yu=e=>Z(e.getSelectedBlocks(),rR(e.dom)),Qv=Dt.each,ex=e=>$n(e)&&!Rc(e)&&!xl(e)&&!Du(e),tx=(e,n)=>{for(let o=e;o;o=o[n]){if(Zt(o)&&Cs(o.data))return e;if($n(o)&&!Rc(o))return o}return e},nx=(e,n,o)=>{const r=HS(e),c=$n(n)&&yf(n),u=$n(o)&&yf(o);if(c&&u){const f=tx(n,"previousSibling"),b=tx(o,"nextSibling");if(r.compare(f,b)){for(let y=f.nextSibling;y&&y!==b;){const x=y;y=y.nextSibling,f.appendChild(x)}return e.dom.remove(b),Dt.each(Dt.grep(b.childNodes),y=>{f.appendChild(y)}),f}}return o},ap=(e,n,o,r)=>{var c;if(r&&n.merge_siblings!==!1){const u=(c=nx(e,yv(r),r))!==null&&c!==void 0?c:r;nx(e,u,yv(u,!0))}},B_=(e,n,o)=>{if(n.clear_child_styles){const r=n.links?"*:not(a)":"*";Qv(e.select(r,o),c=>{ex(c)&&yf(c)&&Qv(n.styles,(u,f)=>{e.setStyle(c,f,"")})})}},$_=(e,n,o)=>{Qv(e.childNodes,r=>{ex(r)&&(n(r)&&o(r),r.hasChildNodes()&&$_(r,n,o))})},aR=(e,n)=>{n.nodeName==="SPAN"&&e.getAttribs(n).length===0&&e.remove(n,!0)},cR=(e,n)=>o=>!!(o&&Fy(e,o,n)),iR=(e,n,o)=>r=>{e.setStyle(r,n,o),r.getAttribute("style")===""&&r.removeAttribute("style"),aR(e,r)},Mb=lu.generate([{keep:[]},{rename:["name"]},{removed:[]}]),Z5=/^(src|href|style)$/,Nb=Dt.each,ox=Py,lR=e=>/^(TR|TH|TD)$/.test(e.nodeName),sx=(e,n,o)=>e.isChildOf(n,o)&&n!==o&&!e.isBlock(o),uR=(e,n,o)=>{let r=n[o?"startContainer":"endContainer"],c=n[o?"startOffset":"endOffset"];if($n(r)){const u=r.childNodes.length-1;!o&&c&&c--,r=r.childNodes[c>u?u:c]}return Zt(r)&&o&&c>=r.data.length&&(r=new ya(r,e.getBody()).next()||r),Zt(r)&&!o&&c===0&&(r=new ya(r,e.getBody()).prev()||r),r},P_=(e,n)=>{const o=n?"firstChild":"lastChild",r=e[o];return lR(e)&&r?e.nodeName==="TR"&&r[o]||r:e},rx=(e,n,o,r)=>{var c;const u=e.create(o,r);return(c=n.parentNode)===null||c===void 0||c.insertBefore(u,n),u.appendChild(n),u},dR=(e,n,o,r,c)=>{const u=ve.fromDom(n),f=ve.fromDom(e.create(r,c)),b=o?ld(u):Fm(u);return Fo(f,b),o?(os(u,f),Xa(f,u)):(Dr(u,f),na(f,u)),f.dom},j5=(e,n)=>n.links&&e.nodeName==="A",mR=(e,n,o)=>{const r=n.parentNode;let c;const u=e.dom,f=wl(e);_d(o)&&r===u.getRoot()&&(!o.list_block||!ox(n,o.list_block))&&H(Do(n.childNodes),b=>{xg(e,f,b.nodeName.toLowerCase())?c?c.appendChild(b):(c=rx(u,b,f),u.setAttribs(c,Gp(e))):c=null}),!(wE(o)&&!ox(o.inline,n))&&u.remove(n,!0)},fR=(e,n,o)=>at(e)?{name:n,value:null}:{name:e,value:hm(n,o)},gR=(e,n)=>{e.getAttrib(n,"style")===""&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style"))},hR=(e,n,o,r,c)=>{let u=!1;Nb(o.styles,(f,b)=>{const{name:y,value:x}=fR(b,f,r),M=kg(x,y);(o.remove_similar||Y(x)||!$n(c)||ox(Fy(e,c,y),M))&&e.setStyle(n,y,""),u=!0}),u&&gR(e,n)},G5=(e,n,o)=>{n==="removeformat"?H(Yu(e.selection),r=>{H(oR,c=>e.dom.setStyle(r,c,"")),gR(e.dom,r)}):kw(e.formatter,n).each(r=>{H(Yu(e.selection),c=>hR(e.dom,c,r,o,null))})},pR=(e,n,o,r,c)=>{const u=e.dom,f=HS(e),b=e.schema;if(sc(n)&&w1(b,n.inline)&&Qf(b,r)&&r.parentElement===e.getBody())return mR(e,r,n),Mb.removed();if(!n.ceFalseOverride&&r&&u.getContentEditableParent(r)==="false"||r&&!Cw(u,r,n)&&!j5(r,n))return Mb.keep();const y=r,x=n.preserve_attributes;if(sc(n)&&n.remove==="all"&&yt(x)){const M=Z(u.getAttribs(y),P=>ae(x,P.name.toLowerCase()));if(u.removeAllAttribs(y),H(M,P=>u.setAttrib(y,P.name,P.value)),M.length>0)return Mb.rename("span")}if(n.remove!=="all"){hR(u,y,n,o,c),Nb(n.attributes,(P,L)=>{const{name:ce,value:ie}=fR(L,P,o);if(n.remove_similar||Y(ie)||!$n(c)||ox(u.getAttrib(c,ce),ie)){if(ce==="class"){const te=u.getAttrib(y,ce);if(te){let ue="";if(H(te.split(/\s+/),Be=>{/mce\-\w+/.test(Be)&&(ue+=(ue?" ":"")+Be)}),ue){u.setAttrib(y,ce,ue);return}}}if(Z5.test(ce)&&y.removeAttribute("data-mce-"+ce),ce==="style"&&il(["li"])(y)&&u.getStyle(y,"list-style-type")==="none"){y.removeAttribute(ce),u.setStyle(y,"list-style-type","none");return}ce==="class"&&y.removeAttribute("className"),y.removeAttribute(ce)}}),Nb(n.classes,P=>{P=hm(P,o),(!$n(c)||u.hasClass(c,P))&&u.removeClass(y,P)});const M=u.getAttribs(y);for(let P=0;P<M.length;P++){const L=M[P].nodeName;if(!f.isAttributeInternal(L))return Mb.keep()}}return n.remove!=="none"?(mR(e,y,n),Mb.removed()):Mb.keep()},Tw=(e,n,o,r,c)=>pR(e,n,o,r,c).fold(kt,u=>(e.dom.rename(r,u),!0),Ie),q5=(e,n,o,r,c)=>{let u;return n.parentNode&&H(mb(e.dom,n.parentNode).reverse(),f=>{if(!u&&$n(f)&&f.id!=="_start"&&f.id!=="_end"){const b=wm(e,f,o,r,c);b&&b.split!==!1&&(u=f)}}),u},K5=(e,n,o,r)=>pR(e,n,o,r,r).fold(he(r),c=>(e.dom.createFragment().appendChild(r),e.dom.rename(r,c)),he(null)),Y5=(e,n,o,r,c,u,f,b)=>{var y,x;let M,P;const L=e.dom;if(o){const ce=o.parentNode;for(let ie=r.parentNode;ie&&ie!==ce;ie=ie.parentNode){let te=L.clone(ie,!1);for(let ue=0;ue<n.length&&(te=K5(e,n[ue],b,te),te!==null);ue++);te&&(M&&te.appendChild(M),P||(P=te),M=te)}u&&(!f.mixed||!L.isBlock(o))&&(r=(y=L.split(o,r))!==null&&y!==void 0?y:r),M&&P&&((x=c.parentNode)===null||x===void 0||x.insertBefore(M,c),P.appendChild(c),sc(f)&&ap(e,f,b,M))}return r},bR=(e,n,o,r,c)=>{const u=e.formatter.get(n),f=u[0],b=e.dom,y=e.selection,x=te=>{const ue=q5(e,te,n,o,c);return Y5(e,u,ue,te,te,!0,f,o)},M=te=>Rc(te)&&$n(te)&&(te.id==="_start"||te.id==="_end"),P=te=>se(u,ue=>Tw(e,ue,o,te,te)),L=te=>{const ue=Do(te.childNodes),De=P(te)||se(u,Tt=>Cw(b,te,Tt)),Ge=te.parentNode;if(!De&&ye(Ge)&&Zh(f)&&P(Ge),f.deep&&ue.length)for(let Tt=0;Tt<ue.length;Tt++)L(ue[Tt]);H(["underline","line-through","overline"],Tt=>{$n(te)&&e.dom.getStyle(te,"text-decoration")===Tt&&te.parentNode&&X2(b,te.parentNode)===Tt&&Tw(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:Tt}},void 0,te)})},ce=te=>{const ue=b.get(te?"_start":"_end");if(ue){let Be=ue[te?"firstChild":"lastChild"];return M(Be)&&(Be=Be[te?"firstChild":"lastChild"]),Zt(Be)&&Be.data.length===0&&(Be=te?ue.previousSibling||ue.nextSibling:ue.nextSibling||ue.previousSibling),b.remove(ue,!0),Be}else return null},ie=te=>{let ue,Be,De=wf(b,te,u,te.collapsed);if(f.split){if(De=Sb(De),ue=uR(e,De,!0),Be=uR(e,De),ue!==Be){if(ue=P_(ue,!0),Be=P_(Be,!1),sx(b,ue,Be)){const et=R.from(ue.firstChild).getOr(ue);x(dR(b,et,!0,"span",{id:"_start","data-mce-type":"bookmark"})),ce(!0);return}if(sx(b,Be,ue)){const et=R.from(Be.lastChild).getOr(Be);x(dR(b,et,!1,"span",{id:"_end","data-mce-type":"bookmark"})),ce(!1);return}ue=rx(b,ue,"span",{id:"_start","data-mce-type":"bookmark"}),Be=rx(b,Be,"span",{id:"_end","data-mce-type":"bookmark"});const Ge=b.createRng();Ge.setStartAfter(ue),Ge.setEndBefore(Be),hb(b,Ge,et=>{H(et,Tt=>{!Rc(Tt)&&!Rc(Tt.parentNode)&&x(Tt)})}),x(ue),x(Be),ue=ce(!0),Be=ce()}else ue=Be=x(ue);De.startContainer=ue.parentNode?ue.parentNode:ue,De.startOffset=b.nodeIndex(ue),De.endContainer=Be.parentNode?Be.parentNode:Be,De.endOffset=b.nodeIndex(Be)+1}hb(b,De,Ge=>{H(Ge,L)})};if(r){if(vf(r)){const te=b.createRng();te.setStartBefore(r),te.setEndAfter(r),ie(te)}else ie(r);sS(e,n,r,o);return}!y.isCollapsed()||!sc(f)||pf(e).length?(bv(e,()=>Ed(e,ie),te=>sc(f)&&__(e,n,o,te)),e.nodeChanged()):N_(e,n,o,c),G5(e,n,o),sS(e,n,r,o)},F_=Dt.each,X5=(e,n,o,r)=>{const c=u=>{if($n(u)&&$n(u.parentNode)&&yf(u)){const f=X2(e,u.parentNode);e.getStyle(u,"color")&&f?e.setStyle(u,"text-decoration",f):e.getStyle(u,"text-decoration")===f&&e.setStyle(u,"text-decoration",null)}};n.styles&&(n.styles.color||n.styles.textDecoration)&&(Dt.walk(r,c,"childNodes"),c(r))},e0=(e,n,o,r)=>{if(n.styles&&n.styles.backgroundColor){const c=cR(e,"fontSize");$_(r,u=>c(u)&&yf(u),iR(e,"backgroundColor",hm(n.styles.backgroundColor,o)))}},J5=(e,n,o,r)=>{if(sc(n)&&(n.inline==="sub"||n.inline==="sup")){const c=cR(e,"fontSize");$_(r,f=>c(f)&&yf(f),iR(e,"fontSize",""));const u=Z(e.select(n.inline==="sup"?"sub":"sup",r),yf);e.remove(u,!0)}},Q5=(e,n,o,r)=>{F_(n,c=>{sc(c)&&F_(e.dom.select(c.inline,r),u=>{ex(u)&&Tw(e,c,o,u,c.exact?u:null)}),B_(e.dom,c,r)})},eI=(e,n,o,r,c)=>{const u=c.parentNode;wm(e,u,o,r)&&Tw(e,n,r,c)||n.merge_with_parents&&u&&e.dom.getParent(u,f=>wm(e,f,o,r)?(Tw(e,n,r,c),!0):!1)},ax=Dt.each,vR=(e,n,o,r)=>{if(Yp(e)&&sc(n)&&o.parentNode){const c=zC(e.schema),u=YD(ve.fromDom(o),f=>xl(f.dom));return gr(c,r)&&Ca(ve.fromDom(o.parentNode),!1)&&!u}else return!1},yR=(e,n,o,r)=>{if(ax(o.styles,(c,u)=>{e.setStyle(n,u,hm(c,r))}),o.styles){const c=e.getAttrib(n,"style");c&&e.setAttrib(n,"data-mce-style",c)}},wR=(e,n,o,r)=>{const c=e.formatter.get(n),u=c[0],f=!r&&e.selection.isCollapsed(),b=e.dom,y=e.selection,x=(ie,te=u)=>{ee(te.onformat)&&te.onformat(ie,te,o,r),yR(b,ie,te,o),ax(te.attributes,(ue,Be)=>{b.setAttrib(ie,Be,hm(ue,o))}),ax(te.classes,ue=>{const Be=hm(ue,o);b.hasClass(ie,Be)||b.addClass(ie,Be)})},M=(ie,te)=>{let ue=!1;return ax(ie,Be=>Il(Be)?b.getContentEditable(te)==="false"&&!Be.ceFalseOverride||ye(Be.collapsed)&&Be.collapsed!==f?!0:b.is(te,Be.selector)&&!xl(te)?(x(te,Be),ue=!0,!1):!0:!1),ue},P=ie=>{if(Q(ie)){const te=b.create(ie);return x(te),te}else return null},L=(ie,te,ue)=>{const Be=[];let De=!0;const Ge=u.inline||u.block,et=P(Ge),Tt=ut=>Wh(u)&&wm(e,ut,n,o),gn=(ut,Je,Rn)=>{const co=yE(u)&&Sg(e.schema,ut)&&xg(e,Je,Ge);return Rn&&co},en=(ut,Je,Rn,co)=>{const fo=ut.nodeName.toLowerCase(),Uo=xg(e,Ge,fo)&&xg(e,Je,Ge),vs=!ue&&Zt(ut)&&dl(ut.data),Ks=xl(ut),Gs=!sc(u)||!ie.isBlock(ut);return(Rn||co)&&Uo&&!vs&&!Ks&&Gs};hb(ie,te,ut=>{let Je;const Rn=co=>{let fo=!1,Uo=De,vs=!1;const Ks=co.parentNode,Gs=Ks.nodeName.toLowerCase(),Pa=ie.getContentEditable(co);ye(Pa)&&(Uo=De,De=Pa==="true",fo=!0,vs=Y2(e,co));const Ti=De&&!fo;if(jr(co)&&!vR(e,u,co,Gs)){Je=null,_d(u)&&ie.remove(co);return}if(Tt(co)){Je=null;return}if(gn(co,Gs,Ti)){const Xt=ie.rename(co,Ge);x(Xt),Be.push(Xt),Je=null;return}if(Il(u)){let Xt=M(c,co);if(!Xt&&ye(Ks)&&Zh(u)&&(Xt=M(c,Ks)),!sc(u)||Xt){Je=null;return}}ye(et)&&en(co,Gs,Ti,vs)?(Je||(Je=ie.clone(et,!1),Ks.insertBefore(Je,co),Be.push(Je)),vs&&fo&&(De=Uo),Je.appendChild(co)):(Je=null,H(Do(co.childNodes),Rn),fo&&(De=Uo),Je=null)};H(ut,Rn)}),u.links===!0&&H(Be,ut=>{const Je=Rn=>{Rn.nodeName==="A"&&x(Rn,u),H(Do(Rn.childNodes),Je)};Je(ut)}),H(Be,ut=>{const Je=fo=>{let Uo=0;return H(fo.childNodes,vs=>{!wv(vs)&&!Rc(vs)&&Uo++}),Uo},Rn=fo=>ot(fo.childNodes,$y).filter(vs=>ie.getContentEditable(vs)!=="false"&&Cw(ie,vs,u)).map(vs=>{const Ks=ie.clone(vs,!1);return x(Ks),ie.replace(Ks,fo,!0),ie.remove(vs,!0),Ks}).getOr(fo),co=Je(ut);if((Be.length>1||!ie.isBlock(ut))&&co===0){ie.remove(ut,!0);return}(sc(u)||_d(u)&&u.wrapper)&&(!u.exact&&co===1&&(ut=Rn(ut)),Q5(e,c,o,ut),eI(e,u,n,o,ut),e0(ie,u,o,ut),X5(ie,u,o,ut),J5(ie,u,o,ut),ap(e,u,o,ut))})},ce=vf(r)?r:y.getNode();if(b.getContentEditable(ce)==="false"&&!Y2(e,ce)){r=ce,M(c,r),Ev(e,n,r,o);return}if(u){if(r)if(vf(r)){if(!M(c,r)){const ie=b.createRng();ie.setStartBefore(r),ie.setEndAfter(r),L(b,wf(b,ie,c),!0)}}else L(b,r,!0);else!f||!sc(u)||pf(e).length?(y.setRng(vw(y.getRng())),bv(e,()=>{Ed(e,(ie,te)=>{const ue=te?ie:wf(b,ie,c);L(b,ue,!1)})},Ie),e.nodeChanged()):M_(e,n,o),kw(e.formatter,n).each(ie=>{H(W5(e.selection),te=>yR(b,te,ie,o))});Rb(n,e)}Ev(e,n,r,o)},CR=e=>go(e,"vars"),tI=(e,n)=>{e.set({}),n.on("NodeChange",o=>{TR(n,o.element,e.get())}),n.on("FormatApply FormatRemove",o=>{const r=R.from(o.node).map(c=>vf(c)?c:c.startContainer).bind(c=>$n(c)?R.some(c):R.from(c.parentElement)).getOrThunk(()=>SR(n));TR(n,r,e.get())})},SR=e=>e.selection.getStart(),xR=(e,n,o,r,c)=>Wt(n,b=>{const y=e.formatter.matchNode(b,o,c??{},r);return!Bn(y)},b=>E_(e,b,o)?!0:r?!1:ye(e.formatter.matchNode(b,o,c,!0))),kR=(e,n)=>{const o=n??SR(e);return Z(mb(e.dom,o),r=>$n(r)&&!Du(r))},TR=(e,n,o)=>{const r=kR(e,n);on(o,(c,u)=>{const f=b=>{const y=xR(e,r,u,b.similar,CR(b)?b.vars:void 0),x=y.isSome();if(b.state.get()!==x){b.state.set(x);const M=y.getOr(n);CR(b)?b.callback(x,{node:M,format:u,parents:r}):H(b.callbacks,P=>P(x,{node:M,format:u,parents:r}))}};H([c.withSimilar,c.withoutSimilar],f),H(c.withVars,f)})},nI=(e,n,o,r,c,u)=>{const f=n.get();H(o.split(","),b=>{const y=cs(f,b).getOrThunk(()=>{const M={withSimilar:{state:fc(!1),similar:!0,callbacks:[]},withoutSimilar:{state:fc(!1),similar:!1,callbacks:[]},withVars:[]};return f[b]=M,M}),x=()=>{const M=kR(e);return xR(e,M,b,c,u).isSome()};if(Bn(u)){const M=c?y.withSimilar:y.withoutSimilar;M.callbacks.push(r),M.callbacks.length===1&&M.state.set(x())}else y.withVars.push({state:fc(x()),similar:c,vars:u,callback:r})}),n.set(f)},oI=(e,n,o)=>{const r=e.get();H(n.split(","),c=>cs(r,c).each(u=>{r[c]={withSimilar:{...u.withSimilar,callbacks:Z(u.withSimilar.callbacks,f=>f!==o)},withoutSimilar:{...u.withoutSimilar,callbacks:Z(u.withoutSimilar.callbacks,f=>f!==o)},withVars:Z(u.withVars,f=>f.callback!==o)}})),e.set(r)},I_=(e,n,o,r,c,u)=>(nI(e,n,o,r,c,u),{unbind:()=>oI(n,o,r)}),ER=(e,n,o,r)=>{const c=e.formatter.get(n);c&&(__(e,n,o,r)&&(!("toggle"in c[0])||c[0].toggle)?bR(e,n,o,r):wR(e,n,o,r))};function t0(e){return t0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t0(e)}function Bb(e,n){return Bb=Object.setPrototypeOf||function(r,c){return r.__proto__=c,r},Bb(e,n)}function _R(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cp(e,n,o){return _R()?cp=Reflect.construct:cp=function(c,u,f){var b=[null];b.push.apply(b,u);var y=Function.bind.apply(c,b),x=new y;return f&&Bb(x,f.prototype),x},cp.apply(null,arguments)}function Vl(e){return AR(e)||oU(e)||sI(e)||rI()}function AR(e){if(Array.isArray(e))return OR(e)}function oU(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sI(e,n){if(e){if(typeof e=="string")return OR(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);if(o==="Object"&&e.constructor&&(o=e.constructor.name),o==="Map"||o==="Set")return Array.from(e);if(o==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return OR(e,n)}}function OR(e,n){(n==null||n>e.length)&&(n=e.length);for(var o=0,r=new Array(n);o<n;o++)r[o]=e[o];return r}function rI(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var aI=Object.hasOwnProperty,cI=Object.setPrototypeOf,iI=Object.isFrozen,DR=Object.getPrototypeOf,lI=Object.getOwnPropertyDescriptor,kl=Object.freeze,Af=Object.seal,cx=Object.create,L_=typeof Reflect<"u"&&Reflect,ka=L_.apply,RR=L_.construct;ka||(ka=function(n,o,r){return n.apply(o,r)}),kl||(kl=function(n){return n}),Af||(Af=function(n){return n}),RR||(RR=function(n,o){return cp(n,Vl(o))});var sU=Tl(Array.prototype.forEach),rU=Tl(Array.prototype.pop),ix=Tl(Array.prototype.push),Ul=Tl(String.prototype.toLowerCase),lx=Tl(String.prototype.match),Md=Tl(String.prototype.replace),Ew=Tl(String.prototype.indexOf),uI=Tl(String.prototype.trim),Wl=Tl(RegExp.prototype.test),$b=n0(TypeError);function Tl(e){return function(n){for(var o=arguments.length,r=new Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];return ka(e,n,r)}}function n0(e){return function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return RR(e,o)}}function mr(e,n){cI&&cI(e,null);for(var o=n.length;o--;){var r=n[o];if(typeof r=="string"){var c=Ul(r);c!==r&&(iI(n)||(n[o]=c),r=c)}e[r]=!0}return e}function Bg(e){var n=cx(null),o;for(o in e)ka(aI,e,[o])&&(n[o]=e[o]);return n}function _w(e,n){for(;e!==null;){var o=lI(e,n);if(o){if(o.get)return Tl(o.get);if(typeof o.value=="function")return Tl(o.value)}e=DR(e)}function r(c){return console.warn("fallback value for",c),null}return r}var H_=kl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),z_=kl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),V_=kl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),MR=kl(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),U_=kl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),dI=kl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),NR=kl(["#text"]),BR=kl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),W_=kl(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Z_=kl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ux=kl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Aw=Af(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$R=Af(/<%[\w\W]*|[\w\W]*%>/gm),mI=Af(/^data-[\-\w.\u00B7-\uFFFF]/),PR=Af(/^aria-[\-\w]+$/),fI=Af(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),FR=Af(/^(?:\w+script|data):/i),gI=Af(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),hI=Af(/^html$/i),IR=function(){return typeof window>"u"?null:window},LR=function(n,o){if(t0(n)!=="object"||typeof n.createPolicy!="function")return null;var r=null,c="data-tt-policy-suffix";o.currentScript&&o.currentScript.hasAttribute(c)&&(r=o.currentScript.getAttribute(c));var u="dompurify"+(r?"#"+r:"");try{return n.createPolicy(u,{createHTML:function(b){return b}})}catch{return console.warn("TrustedTypes policy "+u+" could not be created."),null}};function j_(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:IR(),n=function(ft){return j_(ft)};if(n.version="2.3.8",n.removed=[],!e||!e.document||e.document.nodeType!==9)return n.isSupported=!1,n;var o=e.document,r=e.document,c=e.DocumentFragment,u=e.HTMLTemplateElement,f=e.Node,b=e.Element,y=e.NodeFilter,x=e.NamedNodeMap,M=x===void 0?e.NamedNodeMap||e.MozNamedAttrMap:x,P=e.HTMLFormElement,L=e.DOMParser,ce=e.trustedTypes,ie=b.prototype,te=_w(ie,"cloneNode"),ue=_w(ie,"nextSibling"),Be=_w(ie,"childNodes"),De=_w(ie,"parentNode");if(typeof u=="function"){var Ge=r.createElement("template");Ge.content&&Ge.content.ownerDocument&&(r=Ge.content.ownerDocument)}var et=LR(ce,o),Tt=et?et.createHTML(""):"",gn=r,en=gn.implementation,ut=gn.createNodeIterator,Je=gn.createDocumentFragment,Rn=gn.getElementsByTagName,co=o.importNode,fo={};try{fo=Bg(r).documentMode?r.documentMode:{}}catch{}var Uo={};n.isSupported=typeof De=="function"&&en&&typeof en.createHTMLDocument<"u"&&fo!==9;var vs=Aw,Ks=$R,Gs=mI,Pa=PR,Ti=FR,Xt=gI,Wo=fI,po=null,Mr=mr({},[].concat(Vl(H_),Vl(z_),Vl(V_),Vl(U_),Vl(NR))),On=null,Oo=mr({},[].concat(Vl(BR),Vl(W_),Vl(Z_),Vl(ux))),So=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Cn=null,gs=null,as=!0,ac=!0,Tr=!1,No=!1,Is=!1,Ea=!1,Cr=!1,Qr=!1,fa=!1,Ir=!1,Fa=!0,vu=!0,fi=!1,_m={},yu=null,s1=mr({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),r1=null,Am=mr({},["audio","video","img","source","image","track"]),Id=null,ea=mr({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),nd="http://www.w3.org/1998/Math/MathML",Om="http://www.w3.org/2000/svg",od="http://www.w3.org/1999/xhtml",sd=od,Dm=!1,Pc,Rm=["application/xhtml+xml","text/html"],Pf="text/html",rd,Zg=null,Gk=r.createElement("form"),wC=function(ft){return ft instanceof RegExp||ft instanceof Function},CC=function(ft){Zg&&Zg===ft||((!ft||t0(ft)!=="object")&&(ft={}),ft=Bg(ft),po="ALLOWED_TAGS"in ft?mr({},ft.ALLOWED_TAGS):Mr,On="ALLOWED_ATTR"in ft?mr({},ft.ALLOWED_ATTR):Oo,Id="ADD_URI_SAFE_ATTR"in ft?mr(Bg(ea),ft.ADD_URI_SAFE_ATTR):ea,r1="ADD_DATA_URI_TAGS"in ft?mr(Bg(Am),ft.ADD_DATA_URI_TAGS):Am,yu="FORBID_CONTENTS"in ft?mr({},ft.FORBID_CONTENTS):s1,Cn="FORBID_TAGS"in ft?mr({},ft.FORBID_TAGS):{},gs="FORBID_ATTR"in ft?mr({},ft.FORBID_ATTR):{},_m="USE_PROFILES"in ft?ft.USE_PROFILES:!1,as=ft.ALLOW_ARIA_ATTR!==!1,ac=ft.ALLOW_DATA_ATTR!==!1,Tr=ft.ALLOW_UNKNOWN_PROTOCOLS||!1,No=ft.SAFE_FOR_TEMPLATES||!1,Is=ft.WHOLE_DOCUMENT||!1,Qr=ft.RETURN_DOM||!1,fa=ft.RETURN_DOM_FRAGMENT||!1,Ir=ft.RETURN_TRUSTED_TYPE||!1,Cr=ft.FORCE_BODY||!1,Fa=ft.SANITIZE_DOM!==!1,vu=ft.KEEP_CONTENT!==!1,fi=ft.IN_PLACE||!1,Wo=ft.ALLOWED_URI_REGEXP||Wo,sd=ft.NAMESPACE||od,ft.CUSTOM_ELEMENT_HANDLING&&wC(ft.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(So.tagNameCheck=ft.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ft.CUSTOM_ELEMENT_HANDLING&&wC(ft.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(So.attributeNameCheck=ft.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ft.CUSTOM_ELEMENT_HANDLING&&typeof ft.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(So.allowCustomizedBuiltInElements=ft.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Pc=Rm.indexOf(ft.PARSER_MEDIA_TYPE)===-1?Pc=Pf:Pc=ft.PARSER_MEDIA_TYPE,rd=Pc==="application/xhtml+xml"?function(Gn){return Gn}:Ul,No&&(ac=!1),fa&&(Qr=!0),_m&&(po=mr({},Vl(NR)),On=[],_m.html===!0&&(mr(po,H_),mr(On,BR)),_m.svg===!0&&(mr(po,z_),mr(On,W_),mr(On,ux)),_m.svgFilters===!0&&(mr(po,V_),mr(On,W_),mr(On,ux)),_m.mathMl===!0&&(mr(po,U_),mr(On,Z_),mr(On,ux))),ft.ADD_TAGS&&(po===Mr&&(po=Bg(po)),mr(po,ft.ADD_TAGS)),ft.ADD_ATTR&&(On===Oo&&(On=Bg(On)),mr(On,ft.ADD_ATTR)),ft.ADD_URI_SAFE_ATTR&&mr(Id,ft.ADD_URI_SAFE_ATTR),ft.FORBID_CONTENTS&&(yu===s1&&(yu=Bg(yu)),mr(yu,ft.FORBID_CONTENTS)),vu&&(po["#text"]=!0),Is&&mr(po,["html","head","body"]),po.table&&(mr(po,["tbody"]),delete Cn.tbody),kl&&kl(ft),Zg=ft)},qk=mr({},["mi","mo","mn","ms","mtext"]),Kk=mr({},["foreignobject","desc","title","annotation-xml"]),jg=mr({},["title","style","font","a","script"]),Cp=mr({},z_);mr(Cp,V_),mr(Cp,MR);var tt=mr({},U_);mr(tt,dI);var it=function(ft){var Gn=De(ft);(!Gn||!Gn.tagName)&&(Gn={namespaceURI:od,tagName:"template"});var Bo=Ul(ft.tagName),Js=Ul(Gn.tagName);return ft.namespaceURI===Om?Gn.namespaceURI===od?Bo==="svg":Gn.namespaceURI===nd?Bo==="svg"&&(Js==="annotation-xml"||qk[Js]):Boolean(Cp[Bo]):ft.namespaceURI===nd?Gn.namespaceURI===od?Bo==="math":Gn.namespaceURI===Om?Bo==="math"&&Kk[Js]:Boolean(tt[Bo]):ft.namespaceURI===od?Gn.namespaceURI===Om&&!Kk[Js]||Gn.namespaceURI===nd&&!qk[Js]?!1:!tt[Bo]&&(jg[Bo]||!Cp[Bo]):!1},Yt=function(ft){ix(n.removed,{element:ft});try{ft.parentNode.removeChild(ft)}catch{try{ft.outerHTML=Tt}catch{ft.remove()}}},Ft=function(ft,Gn){try{ix(n.removed,{attribute:Gn.getAttributeNode(ft),from:Gn})}catch{ix(n.removed,{attribute:null,from:Gn})}if(Gn.removeAttribute(ft),ft==="is"&&!On[ft])if(Qr||fa)try{Yt(Gn)}catch{}else try{Gn.setAttribute(ft,"")}catch{}},ro=function(ft){var Gn,Bo;if(Cr)ft="<remove></remove>"+ft;else{var Js=lx(ft,/^[\r\n\t ]+/);Bo=Js&&Js[0]}Pc==="application/xhtml+xml"&&(ft='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ft+"</body></html>");var yc=et?et.createHTML(ft):ft;if(sd===od)try{Gn=new L().parseFromString(yc,Pc)}catch{}if(!Gn||!Gn.documentElement){Gn=en.createDocument(sd,"template",null);try{Gn.documentElement.innerHTML=Dm?"":yc}catch{}}var _l=Gn.body||Gn.documentElement;return ft&&Bo&&_l.insertBefore(r.createTextNode(Bo),_l.childNodes[0]||null),sd===od?Rn.call(Gn,Is?"html":"body")[0]:Is?Gn.documentElement:_l},_s=function(ft){return ut.call(ft.ownerDocument||ft,ft,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT,null,!1)},Fr=function(ft){return ft instanceof P&&(typeof ft.nodeName!="string"||typeof ft.textContent!="string"||typeof ft.removeChild!="function"||!(ft.attributes instanceof M)||typeof ft.removeAttribute!="function"||typeof ft.setAttribute!="function"||typeof ft.namespaceURI!="string"||typeof ft.insertBefore!="function")},sr=function(ft){return t0(f)==="object"?ft instanceof f:ft&&t0(ft)==="object"&&typeof ft.nodeType=="number"&&typeof ft.nodeName=="string"},wu=function(ft,Gn,Bo){Uo[ft]&&sU(Uo[ft],function(Js){Js.call(n,Gn,Bo,Zg)})},SC=function(ft){var Gn;if(wu("beforeSanitizeElements",ft,null),Fr(ft)||Wl(/[\u0080-\uFFFF]/,ft.nodeName))return Yt(ft),!0;var Bo=rd(ft.nodeName);if(wu("uponSanitizeElement",ft,{tagName:Bo,allowedTags:po}),ft.hasChildNodes()&&!sr(ft.firstElementChild)&&(!sr(ft.content)||!sr(ft.content.firstElementChild))&&Wl(/<[/\w]/g,ft.innerHTML)&&Wl(/<[/\w]/g,ft.textContent)||Bo==="select"&&Wl(/<template/i,ft.innerHTML))return Yt(ft),!0;if(!po[Bo]||Cn[Bo]){if(!Cn[Bo]&&Yk(Bo)&&(So.tagNameCheck instanceof RegExp&&Wl(So.tagNameCheck,Bo)||So.tagNameCheck instanceof Function&&So.tagNameCheck(Bo)))return!1;if(vu&&!yu[Bo]){var Js=De(ft)||ft.parentNode,yc=Be(ft)||ft.childNodes;if(yc&&Js)for(var _l=yc.length,Hi=_l-1;Hi>=0;--Hi)Js.insertBefore(te(yc[Hi],!0),ue(ft))}return Yt(ft),!0}return ft instanceof b&&!it(ft)||(Bo==="noscript"||Bo==="noembed")&&Wl(/<\/no(script|embed)/i,ft.innerHTML)?(Yt(ft),!0):(No&&ft.nodeType===3&&(Gn=ft.textContent,Gn=Md(Gn,vs," "),Gn=Md(Gn,Ks," "),ft.textContent!==Gn&&(ix(n.removed,{element:ft.cloneNode()}),ft.textContent=Gn)),wu("afterSanitizeElements",ft,null),!1)},nF=function(ft,Gn,Bo){if(Fa&&(Gn==="id"||Gn==="name")&&(Bo in r||Bo in Gk))return!1;if(!(ac&&!gs[Gn]&&Wl(Gs,Gn))){if(!(as&&Wl(Pa,Gn))){if(!On[Gn]||gs[Gn]){if(!(Yk(ft)&&(So.tagNameCheck instanceof RegExp&&Wl(So.tagNameCheck,ft)||So.tagNameCheck instanceof Function&&So.tagNameCheck(ft))&&(So.attributeNameCheck instanceof RegExp&&Wl(So.attributeNameCheck,Gn)||So.attributeNameCheck instanceof Function&&So.attributeNameCheck(Gn))||Gn==="is"&&So.allowCustomizedBuiltInElements&&(So.tagNameCheck instanceof RegExp&&Wl(So.tagNameCheck,Bo)||So.tagNameCheck instanceof Function&&So.tagNameCheck(Bo))))return!1}else if(!Id[Gn]){if(!Wl(Wo,Md(Bo,Xt,""))){if(!((Gn==="src"||Gn==="xlink:href"||Gn==="href")&&ft!=="script"&&Ew(Bo,"data:")===0&&r1[ft])){if(!(Tr&&!Wl(Ti,Md(Bo,Xt,"")))){if(Bo)return!1}}}}}}return!0},Yk=function(ft){return ft.indexOf("-")>0},oF=function(ft){var Gn,Bo,Js,yc;wu("beforeSanitizeAttributes",ft,null);var _l=ft.attributes;if(_l){var Hi={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:On};for(yc=_l.length;yc--;){Gn=_l[yc];var a1=Gn,Ei=a1.name,sF=a1.namespaceURI;Bo=Ei==="value"?Gn.value:uI(Gn.value),Js=rd(Ei);var OV=Bo;if(Hi.attrName=Js,Hi.attrValue=Bo,Hi.keepAttr=!0,Hi.forceKeepAttr=void 0,wu("uponSanitizeAttribute",ft,Hi),Bo=Hi.attrValue,!Hi.forceKeepAttr){if(!Hi.keepAttr){Ft(Ei,ft);continue}if(Wl(/\/>/i,Bo)){Ft(Ei,ft);continue}No&&(Bo=Md(Bo,vs," "),Bo=Md(Bo,Ks," "));var xC=rd(ft.nodeName);if(!nF(xC,Js,Bo)){Ft(Ei,ft);continue}if(Bo!==OV)try{sF?ft.setAttributeNS(sF,Ei,Bo):ft.setAttribute(Ei,Bo)}catch{Ft(Ei,ft)}}}wu("afterSanitizeAttributes",ft,null)}},AV=function Xo(ft){var Gn,Bo=_s(ft);for(wu("beforeSanitizeShadowDOM",ft,null);Gn=Bo.nextNode();)wu("uponSanitizeShadowNode",Gn,null),!SC(Gn)&&(Gn.content instanceof c&&Xo(Gn.content),oF(Gn));wu("afterSanitizeShadowDOM",ft,null)};return n.sanitize=function(Xo,ft){var Gn,Bo,Js,yc,_l;if(Dm=!Xo,Dm&&(Xo="<!-->"),typeof Xo!="string"&&!sr(Xo)){if(typeof Xo.toString!="function")throw $b("toString is not a function");if(Xo=Xo.toString(),typeof Xo!="string")throw $b("dirty is not a string, aborting")}if(!n.isSupported){if(t0(e.toStaticHTML)==="object"||typeof e.toStaticHTML=="function"){if(typeof Xo=="string")return e.toStaticHTML(Xo);if(sr(Xo))return e.toStaticHTML(Xo.outerHTML)}return Xo}if(Ea||CC(ft),n.removed=[],typeof Xo=="string"&&(fi=!1),fi){if(Xo.nodeName){var Hi=rd(Xo.nodeName);if(!po[Hi]||Cn[Hi])throw $b("root node is forbidden and cannot be sanitized in-place")}}else if(Xo instanceof f)Gn=ro("<!---->"),Bo=Gn.ownerDocument.importNode(Xo,!0),Bo.nodeType===1&&Bo.nodeName==="BODY"||Bo.nodeName==="HTML"?Gn=Bo:Gn.appendChild(Bo);else{if(!Qr&&!No&&!Is&&Xo.indexOf("<")===-1)return et&&Ir?et.createHTML(Xo):Xo;if(Gn=ro(Xo),!Gn)return Qr?null:Ir?Tt:""}Gn&&Cr&&Yt(Gn.firstChild);for(var a1=_s(fi?Xo:Gn);Js=a1.nextNode();)Js.nodeType===3&&Js===yc||SC(Js)||(Js.content instanceof c&&AV(Js.content),oF(Js),yc=Js);if(yc=null,fi)return Xo;if(Qr){if(fa)for(_l=Je.call(Gn.ownerDocument);Gn.firstChild;)_l.appendChild(Gn.firstChild);else _l=Gn;return On.shadowroot&&(_l=co.call(o,_l,!0)),_l}var Ei=Is?Gn.outerHTML:Gn.innerHTML;return Is&&po["!doctype"]&&Gn.ownerDocument&&Gn.ownerDocument.doctype&&Gn.ownerDocument.doctype.name&&Wl(hI,Gn.ownerDocument.doctype.name)&&(Ei="<!DOCTYPE "+Gn.ownerDocument.doctype.name+`>
`+Ei),No&&(Ei=Md(Ei,vs," "),Ei=Md(Ei,Ks," ")),et&&Ir?et.createHTML(Ei):Ei},n.setConfig=function(Xo){CC(Xo),Ea=!0},n.clearConfig=function(){Zg=null,Ea=!1},n.isValidAttribute=function(Xo,ft,Gn){Zg||CC({});var Bo=rd(Xo),Js=rd(ft);return nF(Bo,Js,Gn)},n.addHook=function(Xo,ft){typeof ft=="function"&&(Uo[Xo]=Uo[Xo]||[],ix(Uo[Xo],ft))},n.removeHook=function(Xo){if(Uo[Xo])return rU(Uo[Xo])},n.removeHooks=function(Xo){Uo[Xo]&&(Uo[Xo]=[])},n.removeAllHooks=function(){Uo={}},n}var HR=j_();const G_=Dt.explode,zR=()=>{const e={};return{addFilter:(c,u)=>{H(G_(c),f=>{go(e,f)||(e[f]={name:f,callbacks:[]}),e[f].callbacks.push(u)})},getFilters:()=>ys(e),removeFilter:(c,u)=>{H(G_(c),f=>{if(go(e,f))if(ye(u)){const b=e[f],y=Z(b.callbacks,x=>x!==u);y.length>0?b.callbacks=y:delete e[f]}else delete e[f]})}}},pI=(e,n)=>{H(n,o=>{e.attr(o,null)})},bI=(e,n,o)=>{e.addNodeFilter("font",r=>{H(r,c=>{const u=n.parse(c.attr("style")),f=c.attr("color"),b=c.attr("face"),y=c.attr("size");f&&(u.color=f),b&&(u["font-family"]=b),y&&Br(y).each(x=>{u["font-size"]=o[x-1]}),c.name="span",c.attr("style",n.serialize(u)),pI(c,["color","face","size"])})})},vI=(e,n,o)=>{e.addNodeFilter("strike",r=>{const c=n.type!=="html4";H(r,u=>{if(c)u.name="s";else{const f=o.parse(u.attr("style"));f["text-decoration"]="line-through",u.name="span",u.attr("style",o.serialize(f))}})})},q_=(e,n,o)=>{var r;const c=_1();n.convert_fonts_to_spans&&bI(e,c,Dt.explode((r=n.font_size_legacy_values)!==null&&r!==void 0?r:"")),vI(e,o,c)},Ow=(e,n,o)=>{n.inline_styles&&q_(e,n,o)},VR=e=>fetch(e).then(n=>n.ok?n.blob():Promise.reject()).catch(()=>Promise.reject(`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`)),UR=e=>{const n=/([a-z0-9+\/=\s]+)/i.exec(e);return n?n[1]:""},o0=e=>{const[n,...o]=e.split(","),r=o.join(","),c=/data:([^/]+\/[^;]+)(;.+)?/.exec(n);if(c){const u=c[2]===";base64",f=u?UR(r):decodeURIComponent(r);return R.some({type:c[1],data:f,base64Encoded:u})}else return R.none()},WR=(e,n,o=!0)=>{let r=n;if(o)try{r=atob(n)}catch{return R.none()}const c=new Uint8Array(r.length);for(let u=0;u<c.length;u++)c[u]=r.charCodeAt(u);return R.some(new Blob([c],{type:e}))},yI=e=>new Promise((n,o)=>{o0(e).bind(({type:r,data:c,base64Encoded:u})=>WR(r,c,u)).fold(()=>o("Invalid data URI"),n)}),ip=e=>wo(e,"blob:")?VR(e):wo(e,"data:")?yI(e):Promise.reject("Unknown URI format"),dx=e=>new Promise((n,o)=>{const r=new FileReader;r.onloadend=()=>{n(r.result)},r.onerror=()=>{var c;o((c=r.error)===null||c===void 0?void 0:c.message)},r.readAsDataURL(e)});let ZR=0;const Dw=e=>(e||"blobid")+ZR++,K_=(e,n,o)=>o0(e).bind(({data:r,type:c,base64Encoded:u})=>{if(n&&!u)return R.none();{const f=u?r:btoa(r);return o(f,c)}}),Y_=(e,n,o)=>{const r=e.create(Dw(),n,o);return e.add(r),r},X_=(e,n,o=!1)=>K_(n,o,(r,c)=>R.from(e.getByData(r,c)).orThunk(()=>WR(c,r).map(u=>Y_(e,u,r)))),jR=(e,n)=>{const o=()=>Promise.reject("Invalid data URI");if(wo(n,"blob:")){const r=e.getByUri(n);return ye(r)?Promise.resolve(r):ip(n).then(c=>dx(c).then(u=>K_(u,!1,f=>R.some(Y_(e,c,f))).getOrThunk(o)))}else return wo(n,"data:")?X_(e,n).fold(o,r=>Promise.resolve(r)):Promise.reject("Unknown image data format")},wI=e=>ye(e.attr("data-mce-bogus")),CI=e=>e.attr("src")===us.transparentSrc||ye(e.attr("data-mce-placeholder")),SI=(e,n)=>{const{blob_cache:o}=n;if(o){const r=c=>{const u=c.attr("src");CI(c)||wI(c)||$t(u)||X_(o,u,!0).each(f=>{c.attr("src",f.blobUri())})};e.addAttributeFilter("src",c=>H(c,r))}},J_=(e,n)=>{const o=e.schema;n.remove_trailing_brs&&e.addNodeFilter("br",(c,u,f)=>{const b=Dt.extend({},o.getBlockElements()),y=o.getNonEmptyElements(),x=o.getWhitespaceElements();b.body=1;const M=P=>P.name in b&&NC(o,P);for(let P=0,L=c.length;P<L;P++){let ce=c[P],ie=ce.parent;if(ie&&b[ie.name]&&ce===ie.lastChild){let te=ce.prev;for(;te;){const ue=te.name;if(ue!=="span"||te.attr("data-mce-type")!=="bookmark"){ue==="br"&&(ce=null);break}te=te.prev}if(ce&&(ce.remove(),Wv(o,y,x,ie))){const ue=o.getElementRule(ie.name);ue&&(ue.removeEmpty?ie.remove():ue.paddEmpty&&zS(f,M,ie))}}else{let te=ce;for(;ie&&ie.firstChild===te&&ie.lastChild===te&&(te=ie,!b[ie.name]);)ie=ie.parent;if(te===ie){const ue=new tl("#text",3);ue.value=ia,ce.replace(ue)}}}}),e.addAttributeFilter("href",c=>{let u=c.length;const f=y=>y.split(" ").filter(M=>M.length>0).concat(["noopener"]).sort().join(" "),b=y=>{const x=y?Dt.trim(y):"";return/\b(noopener)\b/g.test(x)?x:f(x)};if(!n.allow_unsafe_link_target)for(;u--;){const y=c[u];y.name==="a"&&y.attr("target")==="_blank"&&y.attr("rel",b(y.attr("rel")))}}),n.allow_html_in_named_anchor||e.addAttributeFilter("id,name",c=>{let u=c.length,f,b,y,x;for(;u--;)if(x=c[u],x.name==="a"&&x.firstChild&&!x.attr("href"))for(y=x.parent,f=x.lastChild;f&&y;)b=f.prev,y.insert(f,x),f=b}),n.fix_list_elements&&e.addNodeFilter("ul,ol",c=>{let u=c.length,f,b;for(;u--;)if(f=c[u],b=f.parent,b&&(b.name==="ul"||b.name==="ol"))if(f.prev&&f.prev.name==="li")f.prev.append(f);else{const y=new tl("li",1);y.attr("style","list-style-type: none"),f.wrap(y)}});const r=o.getValidClasses();n.validate&&r&&e.addAttributeFilter("class",c=>{var u;let f=c.length;for(;f--;){const b=c[f],y=(u=b.attr("class"))!==null&&u!==void 0?u:"",x=Dt.explode(y," ");let M="";for(let P=0;P<x.length;P++){const L=x[P];let ce=!1,ie=r["*"];ie&&ie[L]&&(ce=!0),ie=r[b.name],!ce&&ie&&ie[L]&&(ce=!0),ce&&(M&&(M+=" "),M+=L)}M.length||(M=null),b.attr("class",M)}}),SI(e,n)},GR=Dt.each,xI=Dt.trim,kI=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],TI={ftp:21,http:80,https:443,mailto:25},EI=["img","video"],Pb=(e,n)=>ye(e)?!e:ye(n)?!ae(EI,n):!0,qR=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},KR=(e,n,o)=>{const r=qR(n);return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(r)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(r)?Pb(e.allow_svg_data_urls,o)&&/^data:image\/svg\+xml/i.test(r):/^data:/i.test(r)};class Nd{constructor(n,o={}){this.path="",this.directory="",n=xI(n),this.settings=o;const r=o.base_uri,c=this;if(/^([\w\-]+):([^\/]{2})/i.test(n)||/^\s*#/.test(n)){c.source=n;return}const u=n.indexOf("//")===0;if(n.indexOf("/")===0&&!u&&(n=(r&&r.protocol||"http")+"://mce_host"+n),!/^[\w\-]*:?\/\//.test(n)){const b=r?r.path:new Nd(document.location.href).directory;if((r==null?void 0:r.protocol)==="")n="//mce_host"+c.toAbsPath(b,n);else{const y=/([^#?]*)([#?]?.*)/.exec(n);y&&(n=(r&&r.protocol||"http")+"://mce_host"+c.toAbsPath(b,y[1])+y[2])}}n=n.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(n);f&&GR(kI,(b,y)=>{let x=f[y];x&&(x=x.replace(/\(mce_at\)/g,"@@")),c[b]=x}),r&&(c.protocol||(c.protocol=r.protocol),c.userInfo||(c.userInfo=r.userInfo),!c.port&&c.host==="mce_host"&&(c.port=r.port),(!c.host||c.host==="mce_host")&&(c.host=r.host),c.source=""),u&&(c.protocol="")}static parseDataUri(n){let o;const r=decodeURIComponent(n).split(","),c=/data:([^;]+)/.exec(r[0]);return c&&(o=c[1]),{type:o,data:r[1]}}static isDomSafe(n,o,r={}){if(r.allow_script_urls)return!0;{const c=tc.decode(n).replace(/[\s\u0000-\u001F]+/g,"");return!KR(r,c,o)}}static getDocumentBaseUrl(n){var o;let r;return n.protocol.indexOf("http")!==0&&n.protocol!=="file:"?r=(o=n.href)!==null&&o!==void 0?o:"":r=n.protocol+"//"+n.host+n.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/")),r}setPath(n){const o=/^(.*?)\/?(\w+)?$/.exec(n);o&&(this.path=o[0],this.directory=o[1],this.file=o[2]),this.source="",this.getURI()}toRelative(n){if(n==="./")return n;const o=new Nd(n,{base_uri:this});if(o.host!=="mce_host"&&this.host!==o.host&&o.host||this.port!==o.port||this.protocol!==o.protocol&&o.protocol!=="")return o.getURI();const r=this.getURI(),c=o.getURI();if(r===c||r.charAt(r.length-1)==="/"&&r.substr(0,r.length-1)===c)return r;let u=this.toRelPath(this.path,o.path);return o.query&&(u+="?"+o.query),o.anchor&&(u+="#"+o.anchor),u}toAbsolute(n,o){const r=new Nd(n,{base_uri:this});return r.getURI(o&&this.isSameOrigin(r))}isSameOrigin(n){if(this.host==n.host&&this.protocol==n.protocol){if(this.port==n.port)return!0;const o=this.protocol?TI[this.protocol]:null;if(o&&(this.port||o)==(n.port||o))return!0}return!1}toRelPath(n,o){let r=0,c="",u,f;const b=n.substring(0,n.lastIndexOf("/")).split("/"),y=o.split("/");if(b.length>=y.length){for(u=0,f=b.length;u<f;u++)if(u>=y.length||b[u]!==y[u]){r=u+1;break}}if(b.length<y.length){for(u=0,f=y.length;u<f;u++)if(u>=b.length||b[u]!==y[u]){r=u+1;break}}if(r===1)return o;for(u=0,f=b.length-(r-1);u<f;u++)c+="../";for(u=r-1,f=y.length;u<f;u++)u!==r-1?c+="/"+y[u]:c+=y[u];return c}toAbsPath(n,o){let r=0;const c=/\/$/.test(o)?"/":"",u=n.split("/"),f=o.split("/"),b=[];GR(u,P=>{P&&b.push(P)});const y=[];for(let P=f.length-1;P>=0;P--)if(!(f[P].length===0||f[P]===".")){if(f[P]===".."){r++;continue}if(r>0){r--;continue}y.push(f[P])}const x=b.length-r;let M;return x<=0?M=ao(y).join("/"):M=b.slice(0,x).join("/")+"/"+ao(y).join("/"),M.indexOf("/")!==0&&(M="/"+M),c&&M.lastIndexOf("/")!==M.length-1&&(M+=c),M}getURI(n=!1){let o;return(!this.source||n)&&(o="",n||(this.protocol?o+=this.protocol+"://":o+="//",this.userInfo&&(o+=this.userInfo+"@"),this.host&&(o+=this.host),this.port&&(o+=":"+this.port)),this.path&&(o+=this.path),this.query&&(o+="?"+this.query),this.anchor&&(o+="#"+this.anchor),this.source=o),this.source}}const YR=Dt.makeMap,Q_=Dt.extend,Rw={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},eA=Dt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),tA="data-mce-type",XR=(e,n)=>{const o={...Rw};return o.PARSER_MEDIA_TYPE=n,e.allow_script_urls?o.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(o.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),o},_I=(e,n)=>{const o=HR(),r=n.getSpecialElements(),c=e.validate;let u=0;return o.addHook("uponSanitizeElement",(f,b)=>{var y,x,M;f.nodeType===ne&&!e.allow_conditional_comments&&/^\[if/i.test((y=f.nodeValue)!==null&&y!==void 0?y:"")&&(f.nodeValue=" "+f.nodeValue);const P=b.tagName;if(f.nodeType!==dt||P==="body")return;const L=ve.fromDom(f),ce=P.toLowerCase(),ie=Ol(L,tA),te=zr(L,"data-mce-bogus");if(!ie&&Q(te)){te==="all"?Fs(L):dc(L);return}const ue=n.getElementRule(ce);if(c&&!ue){go(r,ce)?Fs(L):dc(L);return}else b.allowedTags[P]=!0;if(c&&ue&&!ie){if(H((x=ue.attributesForced)!==null&&x!==void 0?x:[],Be=>{rr(L,Be.name,Be.value==="{$uid}"?`mce_${u++}`:Be.value)}),H((M=ue.attributesDefault)!==null&&M!==void 0?M:[],Be=>{Ol(L,Be.name)||rr(L,Be.name,Be.value==="{$uid}"?`mce_${u++}`:Be.value)}),ue.attributesRequired&&!se(ue.attributesRequired,Be=>Ol(L,Be))){dc(L);return}if(ue.removeEmptyAttrs&&Yl(L)){dc(L);return}ue.outputName&&ue.outputName!==ce&&JC(L,ue.outputName)}}),o.addHook("uponSanitizeAttribute",(f,b)=>{const y=f.tagName.toLowerCase(),{attrName:x,attrValue:M}=b;b.keepAttr=!c||n.isValid(y,x)||wo(x,"data-")||wo(x,"aria-"),x in eA&&KR(e,M,y)&&(b.keepAttr=!1),b.keepAttr?(b.allowedAttributes[x]=!0,x in n.getBoolAttrs()&&(b.attrValue=x),e.allow_svg_data_urls&&wo(M,"data:image/svg+xml")&&(b.forceKeepAttr=!0)):f.hasAttribute(tA)&&(x==="id"||x==="class"||x==="style")&&(b.forceKeepAttr=!0)}),o},mx=(e,n,o)=>{const r=e.name,c=r in o&&r!=="title"&&r!=="textarea",u=n.childNodes;for(let f=0,b=u.length;f<b;f++){const y=u[f],x=new tl(y.nodeName.toLowerCase(),y.nodeType);if($n(y)){const M=y.attributes;for(let P=0,L=M.length;P<L;P++){const ce=M[P];x.attr(ce.name,ce.value)}}else Zt(y)?(x.value=y.data,c&&(x.raw=!0)):(ll(y)||g1(y)||h1(y))&&(x.value=y.data);mx(x,y,o),e.append(x)}},nA=(e,n,o)=>{const r=[];for(let c=e,u=c;c;u=c,c=c.walk()){const f=c;H(n,b=>b(f)),$t(f.parent)&&f!==e?c=u:r.push(f)}for(let c=r.length-1;c>=0;c--){const u=r[c];H(o,f=>f(u))}},oA=(e,n,o,r)=>{const c=o.validate,u=n.getNonEmptyElements(),f=n.getWhitespaceElements(),b=Q_(YR("script,style,head,html,body,title,meta,param"),n.getBlockElements()),y=zC(n),x=/[ \t\r\n]+/g,M=/^[ \t\r\n]+/,P=/[ \t\r\n]+$/,L=De=>{let Ge=De.parent;for(;ye(Ge);){if(Ge.name in f)return!0;Ge=Ge.parent}return!1},ce=De=>{let Ge=De;for(;ye(Ge);){if(Ge.name in y)return Wv(n,u,f,Ge);Ge=Ge.parent}return!1},ie=De=>De.name in b&&!NC(n,De),te=(De,Ge)=>{const et=Ge?De.prev:De.next;return ye(et)||$t(De.parent)?!1:ie(De.parent)&&(De.parent!==e||r.isRootContent===!0)};return[De=>{var Ge;if(De.type===3&&!L(De)){let et=(Ge=De.value)!==null&&Ge!==void 0?Ge:"";et=et.replace(x," "),(FD(De.prev,ie)||te(De,!0))&&(et=et.replace(M,"")),et.length===0?De.remove():De.value=et}},De=>{var Ge;if(De.type===1){const et=n.getElementRule(De.name);if(c&&et){const Tt=Wv(n,u,f,De);et.paddInEmptyBlock&&Tt&&ce(De)?zS(r,ie,De):et.removeEmpty&&Tt?ie(De)?De.remove():De.unwrap():et.paddEmpty&&(Tt||PD(De))&&zS(r,ie,De)}}else if(De.type===3&&!L(De)){let et=(Ge=De.value)!==null&&Ge!==void 0?Ge:"";(De.next&&ie(De.next)||te(De,!1))&&(et=et.replace(P,"")),et.length===0?De.remove():De.value=et}}]},AI=(e,n)=>{var o;const r=(o=n.forced_root_block)!==null&&o!==void 0?o:e.forced_root_block;return r===!1?"":r===!0?"p":r},mu=(e={},n=Pu())=>{const o=zR(),r=zR(),c={validate:!0,root_name:"body",...e},u=new DOMParser,f=_I(c,n),b=(Ge,et,Tt="html")=>{const gn=Tt==="xhtml"?"application/xhtml+xml":"text/html",en=go(n.getSpecialElements(),et.toLowerCase()),ut=en?`<${et}>${Ge}</${et}>`:Ge,Je=Tt==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ut}</body></html>`:`<body>${ut}</body>`,Rn=u.parseFromString(Je,gn).body;return f.sanitize(Rn,XR(c,gn)),f.removed=[],en?Rn.firstChild:Rn},y=o.addFilter,x=o.getFilters,M=o.removeFilter,P=r.addFilter,L=r.getFilters,ce=r.removeFilter,ie=(Ge,et)=>{WS(n,Ge)&&et.push(Ge)},te=(Ge,et)=>{const Tt=Q(et.attr(tA)),gn=et.type===1&&!go(Ge,et.name)&&!C1(n,et);return et.type===3||gn&&!Tt},ue=(Ge,et)=>{const Tt=Q_(YR("script,style,head,html,body,title,meta,param"),n.getBlockElements()),gn=/^[ \t\r\n]+/,en=/[ \t\r\n]+$/;let ut=Ge.firstChild,Je=null;const Rn=co=>{var fo,Uo;co&&(ut=co.firstChild,ut&&ut.type===3&&(ut.value=(fo=ut.value)===null||fo===void 0?void 0:fo.replace(gn,"")),ut=co.lastChild,ut&&ut.type===3&&(ut.value=(Uo=ut.value)===null||Uo===void 0?void 0:Uo.replace(en,"")))};if(n.isValidChild(Ge.name,et.toLowerCase())){for(;ut;){const co=ut.next;te(Tt,ut)?(Je||(Je=new tl(et,1),Je.attr(c.forced_root_block_attrs),Ge.insert(Je,ut)),Je.append(ut)):(Rn(Je),Je=null),ut=co}Rn(Je)}},De={schema:n,addAttributeFilter:P,getAttributeFilters:L,removeAttributeFilter:ce,addNodeFilter:y,getNodeFilters:x,removeNodeFilter:M,parse:(Ge,et={})=>{var Tt;const gn=c.validate,en=(Tt=et.context)!==null&&Tt!==void 0?Tt:c.root_name,ut=b(Ge,en,et.format);au(n,ut);const Je=new tl(en,11);mx(Je,ut,n.getSpecialElements()),ut.innerHTML="";const[Rn,co]=oA(Je,n,c,et),fo=[],Uo=gn?Pa=>ie(Pa,fo):Me,vs={nodes:{},attributes:{}},Ks=Pa=>b_(x(),L(),Pa,vs);if(nA(Je,[Rn,Ks],[co,Uo]),fo.reverse(),gn&&fo.length>0)if(et.context){const{pass:Pa,fail:Ti}=z(fo,Xt=>Xt.parent===Je);hw(Ti,n,Ks),et.invalid=Pa.length>0}else hw(fo,n,Ks);const Gs=AI(c,et);return Gs&&(Je.name==="body"||et.isRootContent)&&ue(Je,Gs),et.invalid||v_(vs,et),Je}};return J_(De,c),Ow(De,c,n),De},sA=e=>jS(e)?tp({validate:!1}).serialize(e):e,JR=(e,n)=>{const o=sA(e),r=n(o);if(r.isDefaultPrevented())return r;if(jS(e))if(r.content!==o){const c=mu({validate:!1,forced_root_block:!1}).parse(r.content,{context:e.name});return{...r,content:c}}else return{...r,content:e};else return r},rA=(e,n)=>{if(n.no_events)return Si.value(n);{const o=Uy(e,n);return o.isDefaultPrevented()?Si.error(aS(e,{content:"",...o}).content):Si.value(o)}},aA=(e,n,o)=>o.no_events?n:JR(n,c=>aS(e,{...o,content:c})).content,Fb=(e,n)=>{if(n.no_events)return Si.value(n);{const o=JR(n.content,r=>Vy(e,{...n,content:r}));return o.isDefaultPrevented()?(rS(e,o),Si.error(void 0)):Si.value(o)}},cA=(e,n,o)=>{o.no_events||rS(e,{...o,content:n})},iA=(e,n,o)=>({element:e,width:n,rows:o}),lA=(e,n)=>({element:e,cells:n}),OI=(e,n)=>({x:e,y:n}),QR=(e,n)=>Sc(e,n).bind(Br).getOr(1),DI=(e,n,o,r,c)=>{const u=QR(c,"rowspan"),f=QR(c,"colspan"),b=e.rows;for(let y=o;y<o+u;y++){b[y]||(b[y]=lA(Z0(r),[]));for(let x=n;x<n+f;x++){const M=b[y].cells;M[x]=y===o&&x===n?c:rg(c)}}},eM=(e,n,o)=>{const r=e.rows;return!!(r[o]?r[o].cells:[])[n]},uA=(e,n,o)=>{for(;eM(e,n,o);)n++;return n},dA=e=>Pe(e,(n,o)=>o.cells.length>n?o.cells.length:n,0),mA=(e,n)=>{const o=e.rows;for(let r=0;r<o.length;r++){const c=o[r].cells;for(let u=0;u<c.length;u++)if(Ps(c[u],n))return R.some(OI(u,r))}return R.none()},fA=(e,n,o,r,c)=>{const u=[],f=e.rows;for(let b=o;b<=c;b++){const y=f[b].cells,x=n<r?y.slice(n,r+1):y.slice(r,n+1);u.push(lA(f[b].element,x))}return u},tM=(e,n,o)=>{const r=n.x,c=n.y,u=o.x,f=o.y,b=c<f?fA(e,r,c,u,f):fA(e,r,f,u,c);return iA(e.element,dA(b),b)},nM=(e,n)=>{const o=rg(e.element),r=ve.fromTag("tbody");return Fo(r,n),na(o,r),o},oM=e=>re(e.rows,n=>{const o=re(n.cells,c=>{const u=Z0(c);return Yr(u,"colspan"),Yr(u,"rowspan"),u}),r=rg(n.element);return Fo(r,o),r}),RI=e=>{const n=iA(rg(e),0,[]);return H(Ms(e,"tr"),(o,r)=>{H(Ms(o,"td,th"),(c,u)=>{DI(n,uA(n,u,r),r,o,c)})}),iA(n.element,dA(n.rows),n.rows)},gA=e=>nM(e,oM(e)),MI=(e,n,o)=>mA(e,n).bind(r=>mA(e,o).map(c=>tM(e,r,c))),fx=e=>ot(e,n=>so(n)==="ul"||so(n)==="ol"),NI=(e,n)=>ot(e,o=>so(o)==="li"&&By(o,n)).fold(he([]),o=>fx(e).map(r=>{const c=ve.fromTag(so(r)),u=bs(ns(r),(f,b)=>wo(b,"list-style"));return ke(c,u),[ve.fromTag("li"),c]}).getOr([])),BI=(e,n)=>{const o=Pe(n,(r,c)=>(na(c,r),c),e);return n.length>0?Xh([o]):o},$I=e=>qi(e)?xc(e).filter(Ns).fold(he([]),n=>[e,n]):Ns(e)?[e]:[],sM=(e,n)=>{const o=ve.fromDom(n.commonAncestorContainer),r=_f(o,e),c=Z(r,Xf),u=NI(r,n),f=c.concat(u.length?u:$I(o));return re(f,rg)},hA=()=>Xh([]),PI=(e,n)=>BI(ve.fromDom(n.cloneContents()),sM(e,n)),FI=(e,n)=>Ou(n,"table",fe(Ps,e)),II=(e,n)=>FI(e,n[0]).bind(o=>{const r=n[0],c=n[n.length-1],u=RI(o);return MI(u,r,c).map(f=>Xh([gA(f)]))}).getOrThunk(hA),LI=(e,n)=>n.length>0&&n[0].collapsed?hA():PI(e,n[0]),rM=(e,n)=>{const o=My(n,e);return o.length>0?II(e,o):LI(e,n)},pA=(e,n)=>n>=0&&n<e.length&&Mc(e.charAt(n)),aM=e=>Ra(e.innerText),HI=e=>e.map(n=>n.nodeName).getOr("div").toLowerCase(),zI=e=>R.from(e.selection.getRng()).map(n=>{var o;const r=R.from(e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock)),c=e.getBody(),u=HI(r),f=ve.fromDom(n.cloneContents());jE(f),FO(f);const b=e.dom.add(c,u,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},f.dom),y=aM(b),x=Ra((o=b.textContent)!==null&&o!==void 0?o:"");if(e.dom.remove(b),pA(x,0)||pA(x,x.length-1)){const M=r.getOr(c),P=aM(M),L=P.indexOf(y);if(L===-1)return y;{const ce=pA(P,L-1),ie=pA(P,L+y.length);return(ce?" ":"")+y+(ie?" ":"")}}else return y}).getOr(""),VI=(e,n)=>{const o=e.selection.getRng(),r=e.dom.create("body"),c=e.selection.getSel(),u=ES(e,Vh(c)),f=n.contextual?rM(ve.fromDom(e.getBody()),u).dom:o.cloneContents();return f&&r.appendChild(f),e.selection.serializer.serialize(r,n)},UI=(e,n)=>{if(n.format==="text")return zI(e);{const o=VI(e,n);return n.format==="tree"?o:e.selection.isCollapsed()?"":o}},WI=(e,n)=>({...e,format:n,get:!0,selection:!0,getInner:!0}),ZI=(e,n,o={})=>{const r=WI(o,n);return rA(e,r).fold(Ue,c=>{const u=UI(e,c);return aA(e,u,c)})},gx=0,cM=1,iM=2,jI=(e,n)=>{const o=e.length+n.length+2,r=new Array(o),c=new Array(o),u=(M,P,L)=>({start:M,end:P,diag:L}),f=(M,P,L,ce,ie)=>{const te=y(M,P,L,ce);if(te===null||te.start===P&&te.diag===P-ce||te.end===M&&te.diag===M-L){let ue=M,Be=L;for(;ue<P||Be<ce;)ue<P&&Be<ce&&e[ue]===n[Be]?(ie.push([gx,e[ue]]),++ue,++Be):P-M>ce-L?(ie.push([iM,e[ue]]),++ue):(ie.push([cM,n[Be]]),++Be)}else{f(M,te.start,L,te.start-te.diag,ie);for(let ue=te.start;ue<te.end;++ue)ie.push([gx,e[ue]]);f(te.end,P,te.end-te.diag,ce,ie)}},b=(M,P,L,ce)=>{let ie=M;for(;ie-P<ce&&ie<L&&e[ie]===n[ie-P];)++ie;return u(M,ie,P)},y=(M,P,L,ce)=>{const ie=P-M,te=ce-L;if(ie===0||te===0)return null;const ue=ie-te,Be=te+ie,De=(Be%2===0?Be:Be+1)/2;r[1+De]=M,c[1+De]=P+1;let Ge,et,Tt,gn,en;for(Ge=0;Ge<=De;++Ge){for(et=-Ge;et<=Ge;et+=2){for(Tt=et+De,et===-Ge||et!==Ge&&r[Tt-1]<r[Tt+1]?r[Tt]=r[Tt+1]:r[Tt]=r[Tt-1]+1,gn=r[Tt],en=gn-M+L-et;gn<P&&en<ce&&e[gn]===n[en];)r[Tt]=++gn,++en;if(ue%2!==0&&ue-Ge<=et&&et<=ue+Ge&&c[Tt-ue]<=r[Tt])return b(c[Tt-ue],et+M-L,P,ce)}for(et=ue-Ge;et<=ue+Ge;et+=2){for(Tt=et+De-ue,et===ue-Ge||et!==ue+Ge&&c[Tt+1]<=c[Tt-1]?c[Tt]=c[Tt+1]-1:c[Tt]=c[Tt-1],gn=c[Tt]-1,en=gn-M+L-et;gn>=M&&en>=L&&e[gn]===n[en];)c[Tt]=gn--,en--;if(ue%2===0&&-Ge<=et&&et<=Ge&&c[Tt]<=r[Tt+ue])return b(c[Tt],et+M-L,P,ce)}}return null},x=[];return f(0,e.length,0,n.length,x),x},lM=e=>$n(e)?e.outerHTML:Zt(e)?tc.encodeRaw(e.data,!1):ll(e)?"<!--"+e.data+"-->":"",GI=e=>{let n;const o=document.createElement("div"),r=document.createDocumentFragment();for(e&&(o.innerHTML=e);n=o.firstChild;)r.appendChild(n);return r},aU=(e,n,o)=>{const r=GI(n);if(e.hasChildNodes()&&o<e.childNodes.length){const c=e.childNodes[o];e.insertBefore(r,c)}else e.appendChild(r)},cU=(e,n)=>{if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.removeChild(o)}},qI=(e,n)=>{let o=0;H(e,r=>{r[0]===gx?o++:r[0]===cM?(aU(n,r[1],o),o++):r[0]===iM&&cU(n,o)})},KI=e=>Z(re(Do(e.childNodes),lM),n=>n.length>0),iU=(e,n)=>{const o=re(Do(n.childNodes),lM);return qI(jI(o,e),n),n},YI=to(()=>document.implementation.createHTMLDocument("undo")),ra=e=>e.indexOf("</iframe>")!==-1,bA=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),lU=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),hx=e=>{const n=KI(e.getBody()),o=eo(n,c=>{const u=PO(e.serializer,c);return u.length>0?[u]:[]}),r=o.join("");return ra(r)?bA(o):lU(r)},vA=(e,n,o)=>{const r=o?n.beforeBookmark:n.bookmark;n.type==="fragmented"?iU(n.fragments,e.getBody()):e.setContent(n.content,{format:"raw",no_selection:ye(r)&&Ey(r)?!r.isFakeCaret:!0}),r&&(e.selection.moveToBookmark(r),e.selection.scrollIntoView())},lp=e=>e.type==="fragmented"?e.fragments.join(""):e.content,XI=e=>{const n=ve.fromTag("body",YI());return sh(n,lp(e)),H(Ms(n,"*[data-mce-bogus]"),dc),Wf(n)},uU=(e,n)=>lp(e)===lp(n),di=(e,n)=>XI(e)===XI(n),px=(e,n)=>!e||!n?!1:uU(e,n)?!0:di(e,n),bx=e=>e.get()===0,Mw=(e,n,o)=>{bx(o)&&(e.typing=n)},uM=(e,n)=>{e.typing&&(Mw(e,!1,n),e.add())},JI=e=>{e.typing&&(e.typing=!1,e.add())},vx=(e,n,o)=>{bx(n)&&o.set(nc(e.selection))},QI=(e,n,o,r,c,u,f)=>{const b=hx(e),y=Dt.extend(u||{},b);if(!bx(r)||e.removed)return null;const x=n.data[o.get()];if(e.dispatch("BeforeAddUndo",{level:y,lastLevel:x,originalEvent:f}).isDefaultPrevented()||x&&px(x,y))return null;n.data[o.get()]&&c.get().each(L=>{n.data[o.get()].beforeBookmark=L});const M=cy(e);if(M&&n.data.length>M){for(let L=0;L<n.data.length-1;L++)n.data[L]=n.data[L+1];n.data.length--,o.set(n.data.length)}y.bookmark=nc(e.selection),o.get()<n.data.length-1&&(n.data.length=o.get()+1),n.data.push(y),o.set(n.data.length-1);const P={level:y,lastLevel:x,originalEvent:f};return o.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",P),e.dispatch("change",P)):e.dispatch("AddUndo",P),y},yA=(e,n,o)=>{n.data=[],o.set(0),n.typing=!1,e.dispatch("ClearUndos")},e8=(e,n,o,r,c)=>{if(n.transact(r)){const u=n.data[o.get()].bookmark,f=n.data[o.get()-1];vA(e,f,!0),n.transact(c)&&(n.data[o.get()-1].beforeBookmark=u)}},dM=(e,n,o)=>{let r;return n.get()<o.length-1&&(n.set(n.get()+1),r=o[n.get()],vA(e,r,!1),e.setDirty(!0),e.dispatch("Redo",{level:r})),r},mM=(e,n,o,r)=>{let c;return n.typing&&(n.add(),n.typing=!1,Mw(n,!1,o)),r.get()>0&&(r.set(r.get()-1),c=n.data[r.get()],vA(e,c,!0),e.setDirty(!0),e.dispatch("Undo",{level:c})),c},wA=e=>{e.clear(),e.add()},fM=(e,n,o)=>o.get()>0||n.typing&&n.data[0]&&!px(hx(e),n.data[0]),CA=(e,n)=>n.get()<e.data.length-1&&!e.typing,t8=(e,n,o)=>(uM(e,n),e.beforeChange(),e.ignore(o),e.add()),n8=(e,n)=>{try{e.set(e.get()+1),n()}finally{e.set(e.get()-1)}},o8=(e,n)=>{const o=e.dom,r=ye(n)?n:e.getBody();H(o.select("table,a",r),c=>{switch(c.nodeName){case"TABLE":const u=aO(e),f=o.getAttrib(c,"border");(!f||f==="0")&&e.hasVisual?o.addClass(c,u):o.removeClass(c,u);break;case"A":if(!o.getAttrib(c,"href")){const b=o.getAttrib(c,"name")||c.id,y=df(e);b&&e.hasVisual?o.addClass(c,y):o.removeClass(c,y)}break}}),e.dispatch("VisualAid",{element:n,hasVisual:e.hasVisual})},fu=e=>({init:{bindEvents:Me},undoManager:{beforeChange:(n,o)=>vx(e,n,o),add:(n,o,r,c,u,f)=>QI(e,n,o,r,c,u,f),undo:(n,o,r)=>mM(e,n,o,r),redo:(n,o)=>dM(e,n,o),clear:(n,o)=>yA(e,n,o),reset:n=>wA(n),hasUndo:(n,o)=>fM(e,n,o),hasRedo:(n,o)=>CA(n,o),transact:(n,o,r)=>t8(n,o,r),ignore:(n,o)=>n8(n,o),extra:(n,o,r,c)=>e8(e,n,o,r,c)},formatter:{match:(n,o,r,c)=>__(e,n,o,r,c),matchAll:(n,o)=>I5(e,n,o),matchNode:(n,o,r,c)=>wm(e,n,o,r,c),canApply:n=>QD(e,n),closest:n=>KS(e,n),apply:(n,o,r)=>wR(e,n,o,r),remove:(n,o,r,c)=>bR(e,n,o,r,c),toggle:(n,o,r)=>ER(e,n,o,r),formatChanged:(n,o,r,c,u)=>I_(e,n,o,r,c,u)},editor:{getContent:n=>FF(e,n),setContent:(n,o)=>F5(e,n,o),insertContent:(n,o)=>Ob(e,n,o),addVisual:n=>o8(e,n)},selection:{getContent:(n,o)=>ZI(e,n,o)},autocompleter:{addDecoration:n=>AF(e,n),removeDecoration:()=>DF(e,ve.fromDom(e.getBody()))},raw:{getModel:()=>R.none()}}),s8=e=>{const n=x=>ht(x)?x:{},{init:o,undoManager:r,formatter:c,editor:u,selection:f,autocompleter:b,raw:y}=e;return{init:{bindEvents:o.bindEvents},undoManager:{beforeChange:r.beforeChange,add:r.add,undo:r.undo,redo:r.redo,clear:r.clear,reset:r.reset,hasUndo:r.hasUndo,hasRedo:r.hasRedo,transact:(x,M,P)=>r.transact(P),ignore:(x,M)=>r.ignore(M),extra:(x,M,P,L)=>r.extra(P,L)},formatter:{match:(x,M,P,L)=>c.match(x,n(M),L),matchAll:c.matchAll,matchNode:c.matchNode,canApply:x=>c.canApply(x),closest:x=>c.closest(x),apply:(x,M,P)=>c.apply(x,n(M)),remove:(x,M,P,L)=>c.remove(x,n(M)),toggle:(x,M,P)=>c.toggle(x,n(M)),formatChanged:(x,M,P,L,ce)=>c.formatChanged(M,P,L,ce)},editor:{getContent:x=>u.getContent(x),setContent:(x,M)=>({content:u.setContent(x,M),html:""}),insertContent:(x,M)=>(u.insertContent(x),""),addVisual:u.addVisual},selection:{getContent:(x,M)=>f.getContent(M)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>R.some(y.getRawModel())}}},r8=()=>{const e=he(null),n=he("");return{init:{bindEvents:Me},undoManager:{beforeChange:Me,add:e,undo:e,redo:e,clear:Me,reset:Me,hasUndo:kt,hasRedo:kt,transact:e,ignore:Me,extra:Me},formatter:{match:kt,matchAll:he([]),matchNode:he(void 0),canApply:kt,closest:n,apply:Me,remove:Me,toggle:Me,formatChanged:he({unbind:Me})},editor:{getContent:n,setContent:he({content:"",html:""}),insertContent:he(""),addVisual:Me},selection:{getContent:n},autocompleter:{addDecoration:Me,removeDecoration:Me},raw:{getModel:he(R.none())}}},Of=e=>go(e.plugins,"rtc"),a8=e=>cs(e.plugins,"rtc").bind(n=>R.from(n.setup)),c8=e=>{const n=e;return a8(e).fold(()=>(n.rtcInstance=fu(e),R.none()),o=>(n.rtcInstance=r8(),R.some(()=>o().then(r=>(n.rtcInstance=s8(r),r.rtc.isRemote)))))},yx=e=>e.rtcInstance?e.rtcInstance:fu(e),Ga=e=>{const n=e.rtcInstance;if(n)return n;throw new Error("Failed to get RTC instance not yet initialized.")},i8=(e,n,o)=>{Ga(e).undoManager.beforeChange(n,o)},l8=(e,n,o,r,c,u,f)=>Ga(e).undoManager.add(n,o,r,c,u,f),wx=(e,n,o,r)=>Ga(e).undoManager.undo(n,o,r),u8=(e,n,o)=>Ga(e).undoManager.redo(n,o),d8=(e,n,o)=>{Ga(e).undoManager.clear(n,o)},gM=(e,n)=>{Ga(e).undoManager.reset(n)},SA=(e,n,o)=>Ga(e).undoManager.hasUndo(n,o),m8=(e,n,o)=>Ga(e).undoManager.hasRedo(n,o),f8=(e,n,o,r)=>Ga(e).undoManager.transact(n,o,r),dU=(e,n,o)=>{Ga(e).undoManager.ignore(n,o)},g8=(e,n,o,r,c)=>{Ga(e).undoManager.extra(n,o,r,c)},Nw=(e,n,o,r,c)=>Ga(e).formatter.match(n,o,r,c),hM=(e,n,o)=>Ga(e).formatter.matchAll(n,o),pM=(e,n,o,r,c)=>Ga(e).formatter.matchNode(n,o,r,c),h8=(e,n)=>Ga(e).formatter.canApply(n),bM=(e,n)=>Ga(e).formatter.closest(n),p8=(e,n,o,r)=>{Ga(e).formatter.apply(n,o,r)},b8=(e,n,o,r,c)=>{Ga(e).formatter.remove(n,o,r,c)},v8=(e,n,o,r)=>{Ga(e).formatter.toggle(n,o,r)},y8=(e,n,o,r,c,u)=>Ga(e).formatter.formatChanged(n,o,r,c,u),vM=(e,n)=>yx(e).editor.getContent(n),w8=(e,n,o)=>yx(e).editor.setContent(n,o),C8=(e,n,o)=>yx(e).editor.insertContent(n,o),Bw=(e,n,o)=>Ga(e).selection.getContent(n,o),yM=(e,n)=>Ga(e).editor.addVisual(n),xA=e=>Ga(e).init.bindEvents(),S8=(e,n)=>Ga(e).autocompleter.addDecoration(n),x8=e=>Ga(e).autocompleter.removeDecoration(),k8=(e,n={})=>{const o=n.format?n.format:"html";return Bw(e,o,n)},kA=e=>e.dom.length===0?(Fs(e),R.none()):R.some(e),T8=(e,n)=>e.filter(o=>Uu.isBookmarkNode(o.dom)).bind(n?Wd:Hc),E8=(e,n,o,r)=>{const c=e.dom,u=n.dom,f=r?c.length:u.length;r?(a_(c,u,!1,!r),o.setStart(u,f)):(a_(u,c,!1,!r),o.setEnd(u,f))},_8=(e,n)=>{xc(e).each(o=>{const r=e.dom;n&&aw(o,bt(r,0))?RS(r,0):!n&&Lv(o,bt(r,r.length))&&r_(r,r.length)})},wM=(e,n,o,r)=>{e.bind(c=>((r?r_:RS)(c.dom,r?c.dom.length:0),n.filter(Ds).map(f=>E8(c,f,o,r)))).orThunk(()=>T8(n,r).or(n).filter(Ds).map(u=>_8(u,r)))},mU=(e,n)=>{const o=R.from(n.firstChild).map(ve.fromDom),r=R.from(n.lastChild).map(ve.fromDom);e.deleteContents(),e.insertNode(n);const c=o.bind(Hc).filter(Ds).bind(kA),u=r.bind(Wd).filter(Ds).bind(kA);wM(c,o,e,!0),wM(u,r,e,!1),e.collapse(!1)},Sm=(e,n)=>({format:"html",...e,set:!0,selection:!0,content:n}),CM=(e,n)=>{if(n.format!=="raw"){const o=e.selection.getRng(),r=e.dom.getParent(o.commonAncestorContainer,e.dom.isBlock),c=r?{context:r.nodeName.toLowerCase()}:{},u=e.parser.parse(n.content,{forced_root_block:!1,...c,...n});return tp({validate:!1},e.schema).serialize(u)}else return n.content},A8=(e,n,o={})=>{const r=Sm(o,n);Fb(e,r).each(c=>{const u=CM(e,c),f=e.selection.getRng();mU(f,f.createContextualFragment(u)),e.selection.setRng(f),Jt(e,f),cA(e,u,c)})},SM=(e,n,o)=>{if(go(e,n)){const r=Z(e[n],c=>c!==o);r.length===0?delete e[n]:e[n]=r}};var O8=(e,n)=>{let o,r;const c=(b,y)=>ot(y,x=>e.is(x,b)),u=b=>e.getParents(b,void 0,e.getRoot()),f=()=>{o={},r={},n.on("NodeChange",b=>{const y=b.element,x=u(y),M={};on(o,(P,L)=>{c(L,x).each(ce=>{r[L]||(H(P,ie=>{ie(!0,{node:ce,selector:L,parents:x})}),r[L]=P),M[L]=P})}),on(r,(P,L)=>{M[L]||(delete r[L],H(P,ce=>{ce(!1,{node:y,selector:L,parents:x})}))})})};return{selectorChangedWithUnbind:(b,y)=>(o||f(),o[b]||(o[b]=[]),o[b].push(y),c(b,u(n.selection.getStart())).each(()=>{r[b]=o[b]}),{unbind:()=>{SM(o,b,y),SM(r,b,y)}})}};const xM=e=>!!(e&&e.ownerDocument)&&Ya(ve.fromDom(e.ownerDocument),ve.fromDom(e)),Zs=e=>e?xM(e.startContainer)&&xM(e.endContainer):!1,D8=(e,n,o,r)=>{let c,u;const{selectorChangedWithUnbind:f}=O8(e,r),b=(Xt,Wo)=>{const po=e.createRng();ye(Xt)&&ye(Wo)?(po.setStart(Xt,Wo),po.setEnd(Xt,Wo),Ge(po),ue(!1)):(pv(e,po,r.getBody(),!0),Ge(po))},y=Xt=>k8(r,Xt),x=(Xt,Wo)=>A8(r,Xt,Wo),M=Xt=>EO(r.getBody(),De(),Xt),P=Xt=>_O(r.getBody(),De(),Xt),L=(Xt,Wo)=>Pa.getBookmark(Xt,Wo),ce=Xt=>Pa.moveToBookmark(Xt),ie=(Xt,Wo)=>(OO(e,Xt,Wo).each(Ge),Xt),te=()=>{const Xt=De(),Wo=Be();return!Xt||Xt.item?!1:Xt.compareEndPoints?Xt.compareEndPoints("StartToEnd",Xt)===0:!Wo||Xt.collapsed},ue=Xt=>{const Wo=De();Wo.collapse(!!Xt),Ge(Wo)},Be=()=>n.getSelection?n.getSelection():n.document.selection,De=()=>{let Xt;const Wo=(Mr,On,Oo)=>{try{return On.compareBoundaryPoints(Mr,Oo)}catch{return-1}},po=n.document;if(ye(r.bookmark)&&!Eb(r)){const Mr=Nc(r);if(Mr.isSome())return Mr.map(On=>ES(r,[On])[0]).getOr(po.createRange())}try{const Mr=Be();Mr&&!Wm(Mr.anchorNode)&&(Mr.rangeCount>0?Xt=Mr.getRangeAt(0):Xt=po.createRange(),Xt=ES(r,[Xt])[0])}catch{}if(Xt||(Xt=po.createRange()),oi(Xt.startContainer)&&Xt.collapsed){const Mr=e.getRoot();Xt.setStart(Mr,0),Xt.setEnd(Mr,0)}return c&&u&&(Wo(Xt.START_TO_START,Xt,c)===0&&Wo(Xt.END_TO_END,Xt,c)===0?Xt=u:(c=null,u=null)),Xt},Ge=(Xt,Wo)=>{if(!Zs(Xt))return;const po=Be();if(Xt=r.dispatch("SetSelectionRange",{range:Xt,forward:Wo}).range,po){u=Xt;try{po.removeAllRanges(),po.addRange(Xt)}catch{}Wo===!1&&po.extend&&(po.collapse(Xt.endContainer,Xt.endOffset),po.extend(Xt.startContainer,Xt.startOffset)),c=po.rangeCount>0?po.getRangeAt(0):null}if(!Xt.collapsed&&Xt.startContainer===Xt.endContainer&&(po!=null&&po.setBaseAndExtent)&&Xt.endOffset-Xt.startOffset<2&&Xt.startContainer.hasChildNodes()){const On=Xt.startContainer.childNodes[Xt.startOffset];On&&On.nodeName==="IMG"&&(po.setBaseAndExtent(Xt.startContainer,Xt.startOffset,Xt.endContainer,Xt.endOffset),(po.anchorNode!==Xt.startContainer||po.focusNode!==Xt.endContainer)&&po.setBaseAndExtent(On,0,On,1))}r.dispatch("AfterSetSelectionRange",{range:Xt,forward:Wo})},et=Xt=>(x(e.getOuterHTML(Xt)),Xt),Tt=()=>xF(r.getBody(),De()),gn=(Xt,Wo)=>TS(e,De(),Xt,Wo),en=()=>{const Xt=Be(),Wo=Xt==null?void 0:Xt.anchorNode,po=Xt==null?void 0:Xt.focusNode;if(!Xt||!Wo||!po||Wm(Wo)||Wm(po))return!0;const Mr=e.createRng(),On=e.createRng();try{Mr.setStart(Wo,Xt.anchorOffset),Mr.collapse(!0),On.setStart(po,Xt.focusOffset),On.collapse(!0)}catch{return!0}return Mr.compareBoundaryPoints(Mr.START_TO_START,On)<=0},Gs={dom:e,win:n,serializer:o,editor:r,expand:(Xt={type:"word"})=>Ge(Og(e).expand(De(),Xt)),collapse:ue,setCursorLocation:b,getContent:y,setContent:x,getBookmark:L,moveToBookmark:ce,select:ie,isCollapsed:te,isForward:en,setNode:et,getNode:Tt,getSel:Be,setRng:Ge,getRng:De,getStart:M,getEnd:P,getSelectedBlocks:gn,normalize:()=>{const Xt=De(),Wo=Be();if(!G2(Wo)&&ms(r)){const po=Rv(e,Xt);return po.each(Mr=>{Ge(Mr,en())}),po.getOr(Xt)}return Xt},selectorChanged:(Xt,Wo)=>(f(Xt,Wo),Gs),selectorChangedWithUnbind:f,getScrollContainer:()=>{let Xt,Wo=e.getRoot();for(;Wo&&Wo.nodeName!=="BODY";){if(Wo.scrollHeight>Wo.clientHeight){Xt=Wo;break}Wo=Wo.parentNode}return Xt},scrollIntoView:(Xt,Wo)=>{ye(Xt)?fn(r,Xt,Wo):Jt(r,De(),Wo)},placeCaretAt:(Xt,Wo)=>Ge(Ag(Xt,Wo,r.getDoc())),getBoundingClientRect:()=>{const Xt=De();return Xt.collapsed?bt.fromRangeStart(Xt).getClientRects()[0]:Xt.getBoundingClientRect()},destroy:()=>{n=c=u=null,Ti.destroy()}},Pa=Uu(Gs),Ti=Hl(Gs,r);return Gs.bookmarkManager=Pa,Gs.controlSelection=Ti,Gs},R8=(e,n,o)=>{e.addAttributeFilter("data-mce-tabindex",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(c,null)}}),e.addAttributeFilter("src,href,style",(r,c)=>{const u="data-mce-"+c,f=n.url_converter,b=n.url_converter_scope;let y=r.length;for(;y--;){const x=r[y];let M=x.attr(u);M!==void 0?(x.attr(c,M.length>0?M:null),x.attr(u,null)):(M=x.attr(c),c==="style"?M=o.serializeStyle(o.parseStyle(M),x.name):f&&(M=f.call(b,M,c,x.name)),x.attr(c,M.length>0?M:null))}}),e.addAttributeFilter("class",r=>{let c=r.length;for(;c--;){const u=r[c];let f=u.attr("class");f&&(f=f.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",f.length>0?f:null))}}),e.addAttributeFilter("data-mce-type",(r,c,u)=>{let f=r.length;for(;f--;){const b=r[f];b.attr("data-mce-type")==="bookmark"&&!u.cleanup&&(R.from(b.firstChild).exists(x=>{var M;return!dl((M=x.value)!==null&&M!==void 0?M:"")})?b.unwrap():b.remove())}}),e.addNodeFilter("noscript",r=>{var c;let u=r.length;for(;u--;){const f=r[u].firstChild;f&&(f.value=tc.decode((c=f.value)!==null&&c!==void 0?c:""))}}),e.addNodeFilter("script,style",(r,c)=>{var u;const f=y=>y.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let b=r.length;for(;b--;){const y=r[b],x=y.firstChild,M=(u=x==null?void 0:x.value)!==null&&u!==void 0?u:"";if(c==="script"){const P=y.attr("type");P&&y.attr("type",P==="mce-no/type"?null:P.replace(/^mce\-/,"")),n.element_format==="xhtml"&&x&&M.length>0&&(x.value=`// <![CDATA[
`+f(M)+`
// ]]>`)}else n.element_format==="xhtml"&&x&&M.length>0&&(x.value=`<!--
`+f(M)+`
-->`)}}),e.addNodeFilter("#comment",r=>{let c=r.length;for(;c--;){const u=r[c],f=u.value;n.preserve_cdata&&(f==null?void 0:f.indexOf("[CDATA["))===0?(u.name="#cdata",u.type=4,u.value=o.decode(f.replace(/^\[CDATA\[|\]\]$/g,""))):(f==null?void 0:f.indexOf("mce:protected "))===0&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(f).substr(14))}}),e.addNodeFilter("xml:namespace,input",(r,c)=>{let u=r.length;for(;u--;){const f=r[u];f.type===7?f.remove():f.type===1&&c==="input"&&!f.attr("type")&&f.attr("type","text")}}),e.addAttributeFilter("data-mce-type",r=>{H(r,c=>{c.attr("data-mce-type")==="format-caret"&&(c.isEmpty(e.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)})},M8=e=>{const n=r=>(r==null?void 0:r.name)==="br",o=e.lastChild;if(n(o)){const r=o.prev;n(r)&&(o.remove(),r.remove())}},Ta=(e,n,o)=>{let r;const c=e.dom;let u=n.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const b=f.createHTMLDocument("");Dt.each(u.nodeName==="BODY"?u.childNodes:[u],y=>{b.body.appendChild(b.importNode(y,!0))}),u.nodeName!=="BODY"?u=b.body.firstChild:u=b.body,r=c.doc,c.doc=b}return xE(e,{...o,node:u}),r&&(c.doc=r),u},N8=(e,n)=>ye(e)&&e.hasEventListeners("PreProcess")&&!n.no_events,$w=(e,n,o)=>N8(e,o)?Ta(e,n,o):n,B8=(e,n,o)=>{Dt.inArray(n,o)===-1&&(e.addAttributeFilter(o,(r,c)=>{let u=r.length;for(;u--;)r[u].attr(c,null)}),n.push(o))},$8=(e,n,o)=>!n.no_events&&e?kE(e,{...n,content:o}).content:o,P8=(e,n,o)=>{const r=Ra(o.getInner?n.innerHTML:e.getOuterHTML(n));return o.selection||Kf(ve.fromDom(n))?r:Dt.trim(r)},kM=(e,n,o)=>{const r=o.selection?{forced_root_block:!1,...o}:o,c=e.parse(n,r);return M8(c),c},up=(e,n,o)=>tp(e,n).serialize(o),Zl=(e,n,o,r,c)=>{const u=up(n,o,r);return $8(e,c,u)},Pw=(e,n)=>{const o=["data-mce-selected"],r=n&&n.dom?n.dom:yr.DOM,c=n&&n.schema?n.schema:Pu(e);e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0;const u=mu(e,c);R8(u,e,r);const f=(b,y={})=>{const x={format:"html",...y},M=$w(n,b,x),P=P8(r,M,x),L=kM(u,P,x);return x.format==="tree"?L:Zl(n,e,c,L,x)};return{schema:c,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:f,addRules:c.addValidElements,setRules:c.setValidElements,addTempAttr:fe(B8,u,o),getTempAttrs:he(o),getNodeFilters:u.getNodeFilters,getAttributeFilters:u.getAttributeFilters,removeNodeFilter:u.removeNodeFilter,removeAttributeFilter:u.removeAttributeFilter}},dp=(e,n)=>{const o=Pw(e,n);return{schema:o.schema,addNodeFilter:o.addNodeFilter,addAttributeFilter:o.addAttributeFilter,serialize:o.serialize,addRules:o.addRules,setRules:o.setRules,addTempAttr:o.addTempAttr,getTempAttrs:o.getTempAttrs,getNodeFilters:o.getNodeFilters,getAttributeFilters:o.getAttributeFilters,removeNodeFilter:o.removeNodeFilter,removeAttributeFilter:o.removeAttributeFilter}},$g="html",Fw=(e,n)=>({...e,format:n,get:!0,getInner:!0}),TA=(e,n={})=>{const o=n.format?n.format:$g,r=Fw(n,o);return rA(e,r).fold(Ue,c=>{const u=vM(e,c);return aA(e,u,c)})},EA="html",TM=(e,n)=>({format:EA,...e,set:!0,content:n}),Cx=(e,n,o={})=>{const r=TM(o,n);return Fb(e,r).map(c=>{const u=w8(e,c.content,c);return cA(e,u.html,c),u.content}).getOr(n)},F8="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),I8="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),EM=e=>{const n=Z(F8,r=>go(e,r)),o=e.forced_root_block;return(o===!1||o==="")&&n.push("forced_root_block (false only)"),Bt(n)},_M=e=>{const n=Dt.makeMap(e.plugins," "),r=Z(I8,c=>go(n,c));return Bt(r)},AM=(e,n)=>{const o=EM(e),r=_M(n),c=r.length>0,u=o.length>0,f=n.theme==="mobile";if(c||u||f){const b=`
- `,y=f?`

Themes:${b}mobile`:"",x=c?`

Plugins:${b}${r.join(b)}`:"",M=u?`

Options:${b}${o.join(b)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+y+x+M)}},OM=(e,n)=>{AM(e,n)},s0=yr.DOM,fU=e=>{s0.setStyle(e.id,"display",e.orgDisplay)},Sx=e=>R.from(e).each(n=>n.destroy()),gU=e=>{const n=e;n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null;const o=e.selection;if(o){const r=o.dom;n.selection=o.win=o.dom=r.doc=null}},L8=e=>{const n=e.formElement;n&&(n._mceOldSubmit&&(n.submit=n._mceOldSubmit,delete n._mceOldSubmit),s0.unbind(n,"submit reset",e.formEventDelegate))},H8=e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),c=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&ye(c==null?void 0:c.nextSibling)&&s0.remove(c.nextSibling),pm(e),e.editorManager.remove(e),!e.inline&&r&&fU(e),TE(e),s0.remove(e.getContainer()),Sx(n),Sx(o),e.destroy()}},Df=(e,n)=>{const{selection:o,dom:r}=e;if(!e.destroyed){if(!n&&!e.removed){e.remove();return}n||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),Sx(o),Sx(r)),L8(e),gU(e),e.destroyed=!0}},_A=(()=>{const e={};return{add:(c,u)=>{e[c]=u},get:c=>e[c]?e[c]:{icons:{}},has:c=>go(e,c)}})(),r0=wi.ModelManager,a0=(e,n)=>n.dom[e],DM=(e,n)=>parseInt(Ve(n,e),10),RM=fe(a0,"clientWidth"),MM=fe(a0,"clientHeight"),NM=fe(DM,"margin-top"),z8=fe(DM,"margin-left"),V8=e=>e.dom.getBoundingClientRect(),mp=(e,n,o)=>{const r=RM(e),c=MM(e);return n>=0&&o>=0&&n<=r&&o<=c},U8=(e,n,o,r)=>{const c=V8(n),u=e?c.left+n.dom.clientLeft+z8(n):0,f=e?c.top+n.dom.clientTop+NM(n):0,b=o-u,y=r-f;return{x:b,y}},W8=(e,n,o)=>{const r=ve.fromDom(e.getBody()),c=e.inline?r:Pm(r),u=U8(e.inline,c,n,o);return mp(c,u.x,u.y)},Z8=e=>R.from(e).map(ve.fromDom),j8=e=>{const n=e.inline?e.getBody():e.getContentAreaContainer();return Z8(n).map(cl).getOr(!1)};var G8=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const BM=e=>{const n=[],o=()=>{const L=e.theme;return L&&L.getNotificationManagerImpl?L.getNotificationManagerImpl():G8()},r=()=>R.from(n[0]),c=(L,ce)=>L.type===ce.type&&L.text===ce.text&&!L.progressBar&&!L.timeout&&!ce.progressBar&&!ce.timeout,u=()=>{H(n,L=>{L.reposition()})},f=L=>{n.push(L)},b=L=>{Qn(n,ce=>ce===L).each(ce=>{n.splice(ce,1)})},y=(L,ce=!0)=>e.removed||!j8(e)?{}:(ce&&e.dispatch("BeforeOpenNotification",{notification:L}),ot(n,ie=>c(o().getArgs(ie),L)).getOrThunk(()=>{e.editorManager.setActive(e);const ie=o().open(L,()=>{b(ie),u(),r().fold(()=>e.focus(),te=>St(ve.fromDom(te.getEl())))});return f(ie),u(),e.dispatch("OpenNotification",{notification:{...ie}}),ie})),x=()=>{r().each(L=>{o().close(L),b(L),u()})},M=he(n);return(L=>{L.on("SkinLoaded",()=>{const ce=IT(L);ce&&y({text:ce,type:"warning",timeout:0},!1),u()}),L.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(u)}),L.on("remove",()=>{H(n.slice(),ce=>{o().close(ce)})})})(e),{open:y,close:x,getNotifications:M}},c0=wi.PluginManager,Ib=wi.ThemeManager;var q8=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const $M=e=>{let n=[];const o=()=>{const te=e.theme;return te&&te.getWindowManagerImpl?te.getWindowManagerImpl():q8()},r=(te,ue)=>(...Be)=>ue?ue.apply(te,Be):void 0,c=te=>{e.dispatch("OpenWindow",{dialog:te})},u=te=>{e.dispatch("CloseWindow",{dialog:te})},f=te=>{n.push(te),c(te)},b=te=>{u(te),n=Z(n,ue=>ue!==te),n.length===0&&e.focus()},y=()=>R.from(n[n.length-1]),x=te=>{e.editorManager.setActive(e),Xs(e),e.ui.show();const ue=te();return f(ue),ue},M=(te,ue)=>x(()=>o().open(te,ue,b)),P=te=>x(()=>o().openUrl(te,b)),L=(te,ue,Be)=>{const De=o();De.alert(te,r(Be||De,ue))},ce=(te,ue,Be)=>{const De=o();De.confirm(te,r(Be||De,ue))},ie=()=>{y().each(te=>{o().close(te),b(te)})};return e.on("remove",()=>{H(n,te=>{o().close(te)})}),{open:M,openUrl:P,alert:L,confirm:ce,close:ie}},PM=(e,n)=>{e.notificationManager.open({type:"error",text:n})},AA=(e,n)=>{e._skinLoaded?PM(e,n):e.on("SkinLoaded",()=>{PM(e,n)})},Iw=(e,n)=>{AA(e,Wc.translate(["Failed to upload image: {0}",n]))},Lw=(e,n,o)=>{vb(e,n,{message:o}),console.error(o)},Lb=(e,n,o)=>o?`Failed to load ${e}: ${o} from url ${n}`:`Failed to load ${e} url: ${n}`,K8=(e,n,o)=>{Lw(e,"PluginLoadError",Lb("plugin",n,o))},Y8=(e,n,o)=>{Lw(e,"IconsLoadError",Lb("icons",n,o))},X8=(e,n,o)=>{Lw(e,"LanguageLoadError",Lb("language",n,o))},J8=(e,n,o)=>{Lw(e,"ThemeLoadError",Lb("theme",n,o))},Hb=(e,n,o)=>{Lw(e,"ModelLoadError",Lb("model",n,o))},zb=(e,n,o)=>{const r=Wc.translate(["Failed to initialize plugin: {0}",n]);vb(e,"PluginLoadError",{message:r}),Vb(r,o),AA(e,r)},Vb=(e,...n)=>{const o=window.console;o&&(o.error?o.error(e,...n):o.log(e,...n))},xx=e=>/^[a-z0-9\-]+$/i.test(e),Ub=e=>Hw(e,ja(e)),Wb=e=>Hw(e,uf(e)),Hw=(e,n)=>{const o=e.editorManager.baseURL+"/skins/content",c=`content${e.editorManager.suffix}.css`;return re(n,u=>xx(u)&&!e.inline?`${o}/${u}/${c}`:e.documentBaseURI.toAbsolute(u))},kx=e=>{e.contentCSS=e.contentCSS.concat(Ub(e),Wb(e))},FM=Ie,OA=(e,n,o)=>rh(e,n,FM,o),DA=e=>e?Do(e.getElementsByTagName("img")):[],IM=(e,n)=>{const o={};return{findAll:(c,u=Ie)=>{const f=Z(DA(c),y=>{const x=y.src;return y.hasAttribute("data-mce-bogus")||y.hasAttribute("data-mce-placeholder")||!x||x===us.transparentSrc?!1:wo(x,"blob:")?!e.isUploaded(x)&&u(y):wo(x,"data:")?u(y):!1}),b=re(f,y=>{const x=y.src;if(go(o,x))return o[x].then(M=>Q(M)?M:{image:y,blobInfo:M.blobInfo});{const M=jR(n,x).then(P=>(delete o[x],{image:y,blobInfo:P})).catch(P=>(delete o[x],P));return o[x]=M,M}});return Promise.all(b)}}},RA=()=>{let o={};const r=(L,ce)=>({status:L,resultUri:ce}),c=L=>L in o;return{hasBlobUri:c,getResultUri:L=>{const ce=o[L];return ce?ce.resultUri:null},isPending:L=>c(L)?o[L].status===1:!1,isUploaded:L=>c(L)?o[L].status===2:!1,markPending:L=>{o[L]=r(1,null)},markUploaded:(L,ce)=>{o[L]=r(2,ce)},removeFailed:L=>{delete o[L]},destroy:()=>{o={}}}};let i0=0;const LM=()=>{const e=()=>Math.round(Math.random()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},HM=e=>e+i0+++LM(),zM=()=>{let e=[];const n=P=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[P.toLowerCase()]||"dat",o=(P,L,ce,ie,te)=>{if(Q(P))return r({id:P,name:ie,filename:te,blob:L,base64:ce});if(ht(P))return r(P);throw new Error("Unknown input type")},r=P=>{if(!P.blob||!P.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const L=P.id||HM("blobid"),ce=P.name||L,ie=P.blob;return{id:he(L),name:he(ce),filename:he(P.filename||ce+"."+n(ie.type)),blob:he(ie),base64:he(P.base64),blobUri:he(P.blobUri||URL.createObjectURL(ie)),uri:he(P.uri)}},c=P=>{f(P.id())||e.push(P)},u=P=>ot(e,P).getOrUndefined(),f=P=>u(L=>L.id()===P);return{create:o,add:c,get:f,getByUri:P=>u(L=>L.blobUri()===P),getByData:(P,L)=>u(ce=>ce.base64()===P&&ce.blob().type===L),findFirst:u,removeByUri:P=>{e=Z(e,L=>L.blobUri()===P?(URL.revokeObjectURL(L.blobUri()),!1):!0)},destroy:()=>{H(e,P=>{URL.revokeObjectURL(P.blobUri())}),e=[]}}},Tx=(e,n)=>{const o={},r=(te,ue)=>te?te.replace(/\/$/,"")+"/"+ue.replace(/^\//,""):ue,c=(te,ue)=>new Promise((Be,De)=>{const Ge=new XMLHttpRequest;Ge.open("POST",n.url),Ge.withCredentials=n.credentials,Ge.upload.onprogress=Tt=>{ue(Tt.loaded/Tt.total*100)},Ge.onerror=()=>{De("Image upload failed due to a XHR Transport error. Code: "+Ge.status)},Ge.onload=()=>{if(Ge.status<200||Ge.status>=300){De("HTTP Error: "+Ge.status);return}const Tt=JSON.parse(Ge.responseText);if(!Tt||!Q(Tt.location)){De("Invalid JSON: "+Ge.responseText);return}Be(r(n.basePath,Tt.location))};const et=new FormData;et.append("file",te.blob(),te.filename()),Ge.send(et)}),u=ee(n.handler)?n.handler:c,f=()=>new Promise(te=>{te([])}),b=(te,ue)=>({url:ue,blobInfo:te,status:!0}),y=(te,ue)=>({url:"",blobInfo:te,status:!1,error:ue}),x=(te,ue)=>{Dt.each(o[te],Be=>{Be(ue)}),delete o[te]},M=(te,ue,Be)=>(e.markPending(te.blobUri()),new Promise(De=>{let Ge,et;try{const Tt=()=>{Ge&&(Ge.close(),et=Me)},gn=ut=>{Tt(),e.markUploaded(te.blobUri(),ut),x(te.blobUri(),b(te,ut)),De(b(te,ut))},en=ut=>{Tt(),e.removeFailed(te.blobUri()),x(te.blobUri(),y(te,ut)),De(y(te,ut))};et=ut=>{ut<0||ut>100||R.from(Ge).orThunk(()=>R.from(Be).map(Fe)).each(Je=>{Ge=Je,Je.progressBar.value(ut)})},ue(te,et).then(gn,ut=>{en(Q(ut)?{message:ut}:ut)})}catch(Tt){De(y(te,Tt))}})),P=te=>te===c,L=te=>{const ue=te.blobUri();return new Promise(Be=>{o[ue]=o[ue]||[],o[ue].push(Be)})},ce=(te,ue)=>(te=Dt.grep(te,Be=>!e.isUploaded(Be.blobUri())),Promise.all(Dt.map(te,Be=>e.isPending(Be.blobUri())?L(Be):M(Be,u,ue))));return{upload:(te,ue)=>!n.url&&P(u)?f():ce(te,ue)}},MA=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),NA=(e,n)=>Tx(n,{url:$T(e),basePath:im(e),credentials:b2(e),handler:ty(e)}),VM=e=>{const n=RA(),o=NA(e,n);return{upload:(r,c=!0)=>o.upload(r,c?MA(e):void 0)}},UM=e=>{const n=zM();let o,r;const c=RA(),u=[],f=Ge=>et=>e.selection?Ge(et):[],b=Ge=>Ge+(Ge.indexOf("?")===-1?"?":"&")+new Date().getTime(),y=(Ge,et,Tt)=>{let gn=0;do gn=Ge.indexOf(et,gn),gn!==-1&&(Ge=Ge.substring(0,gn)+Tt+Ge.substr(gn+et.length),gn+=Tt.length-et.length+1);while(gn!==-1);return Ge},x=(Ge,et,Tt)=>{const gn=`src="${Tt}"${Tt===us.transparentSrc?' data-mce-placeholder="1"':""}`;return Ge=y(Ge,`src="${et}"`,gn),Ge=y(Ge,'data-mce-src="'+et+'"','data-mce-src="'+Tt+'"'),Ge},M=(Ge,et)=>{H(e.undoManager.data,Tt=>{Tt.type==="fragmented"?Tt.fragments=re(Tt.fragments,gn=>x(gn,Ge,et)):Tt.content=x(Tt.content,Ge,et)})},P=(Ge,et)=>{const Tt=e.convertURL(et,"src");M(Ge.src,et),Rs(ve.fromDom(Ge),{src:ey(e)?b(et):et,"data-mce-src":Tt})},L=()=>(o||(o=NA(e,c)),ue().then(f(Ge=>{const et=re(Ge,Tt=>Tt.blobInfo);return o.upload(et,MA(e)).then(f(Tt=>{const gn=[];let en=!1;const ut=re(Tt,(Je,Rn)=>{const{blobInfo:co,image:fo}=Ge[Rn];let Uo=!1;return Je.status&&BT(e)?(Je.url&&!oo(fo.src,Je.url)&&(en=!0),n.removeByUri(fo.src),Of(e)||P(fo,Je.url)):Je.error&&(Je.error.remove&&(M(fo.src,us.transparentSrc),gn.push(fo),Uo=!0),Iw(e,Je.error.message)),{element:fo,status:Je.status,uploadUri:Je.url,blobInfo:co,removed:Uo}});return gn.length>0&&!Of(e)?e.undoManager.transact(()=>{H(gn,Je=>{e.dom.remove(Je),n.removeByUri(Je.src)})}):en&&e.undoManager.dispatchChange(),ut}))}))),ce=()=>p2(e)?L():Promise.resolve([]),ie=Ge=>kn(u,et=>et(Ge)),te=Ge=>{u.push(Ge)},ue=()=>(r||(r=IM(c,n)),r.findAll(e.getBody(),ie).then(f(Ge=>{const et=Z(Ge,Tt=>Q(Tt)?(AA(e,Tt),!1):!0);return Of(e)||H(et,Tt=>{M(Tt.image.src,Tt.blobInfo.blobUri()),Tt.image.src=Tt.blobInfo.blobUri(),Tt.image.removeAttribute("data-mce-src")}),et}))),Be=()=>{n.destroy(),c.destroy(),r=o=null},De=Ge=>Ge.replace(/src="(blob:[^"]+)"/g,(et,Tt)=>{const gn=c.getResultUri(Tt);if(gn)return'src="'+gn+'"';let en=n.getByUri(Tt);return en||(en=Pe(e.editorManager.get(),(ut,Je)=>ut||Je.editorUpload&&Je.editorUpload.blobCache.getByUri(Tt),void 0)),en?'src="data:'+en.blob().type+";base64,"+en.base64()+'"':et});return e.on("SetContent",()=>{p2(e)?ce():ue()}),e.on("RawSaveContent",Ge=>{Ge.content=De(Ge.content)}),e.on("GetContent",Ge=>{Ge.source_view||Ge.format==="raw"||Ge.format==="tree"||(Ge.content=De(Ge.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",Ge=>{H(Ge,et=>{const Tt=et.attr("src");if(!Tt||n.getByUri(Tt))return;const gn=c.getResultUri(Tt);gn&&et.attr("src",gn)})})}),{blobCache:n,addFilter:te,uploadImages:L,uploadImagesAuto:ce,scanForImages:ue,destroy:Be}},Pg=e=>{const n=e.dom,o=e.schema.type,r={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{n.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return o!=="html4"?[f,c,u]:[c,f,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,f)=>$n(c)&&c.hasAttribute("href"),onformat:(c,u,f)=>{Dt.each(f,(b,y)=>{n.setAttrib(c,y,b)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return(u=c==null?void 0:c.customValue)!==null&&u!==void 0?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Dt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{r[c]={block:c,remove:"all"}}),r},Fg={remove_similar:!0,inherit:!1},ol={selector:"td,th",...Fg},Q8={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...ol},tablecellverticalalign:{styles:{"vertical-align":"%value"},...ol},tablecellbordercolor:{styles:{borderColor:"%value"},...ol},tablecellclass:{classes:["%value"],...ol},tableclass:{selector:"table",classes:["%value"],...Fg},tablecellborderstyle:{styles:{borderStyle:"%value"},...ol},tablecellborderwidth:{styles:{borderWidth:"%value"},...ol}},e6=he(Q8),t6=e=>{const n={},o=f=>ye(f)?n[f]:n,r=f=>go(n,f),c=(f,b)=>{f&&(Q(f)?(yt(b)||(b=[b]),H(b,y=>{Bn(y.deep)&&(y.deep=!Il(y)),Bn(y.split)&&(y.split=!Il(y)||sc(y)),Bn(y.remove)&&Il(y)&&!sc(y)&&(y.remove="none"),Il(y)&&sc(y)&&(y.mixed=!0,y.block_expand=!0),Q(y.classes)&&(y.classes=y.classes.split(/\s+/))}),n[f]=b):on(f,(y,x)=>{c(x,y)}))},u=f=>(f&&n[f]&&delete n[f],n);return c(Pg(e)),c(e6()),c(mg(e)),{get:o,has:r,register:c,unregister:u}},Ex=Dt.each,Xu=yr.DOM,BA=e=>ye(e)&&ht(e),WM=(e,n)=>{const o=n&&n.schema||Pu({}),r=(y,x)=>{x.classes.length>0&&Xu.addClass(y,x.classes.join(" ")),Xu.setAttribs(y,x.attrs)},c=y=>{const x=Q(y)?{name:y,classes:[],attrs:{}}:y,M=Xu.create(x.name);return r(M,x),M},u=(y,x)=>{const M=o.getElementRule(y.nodeName.toLowerCase()),P=M==null?void 0:M.parentsRequired;return P&&P.length?x&&ae(P,x)?x:P[0]:!1},f=(y,x,M)=>{let P;const L=x[0],ce=BA(L)?L.name:void 0,ie=u(y,ce);if(ie)ce===ie?(P=L,x=x.slice(1)):P=ie;else if(L)P=L,x=x.slice(1);else if(!M)return y;const te=P?c(P):Xu.create("div");te.appendChild(y),M&&Dt.each(M,Be=>{const De=c(Be);te.insertBefore(De,y)});const ue=BA(P)?P.siblings:void 0;return f(te,x,ue)},b=Xu.create("div");if(e.length>0){const y=e[0],x=c(y),M=BA(y)?y.siblings:void 0;b.appendChild(f(x,e.slice(1),M))}return b},n6=e=>{e=Dt.trim(e);let n="div";const o={name:n,classes:[],attrs:{},selector:e};return e!=="*"&&(n=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(r,c,u,f,b)=>{switch(c){case"#":o.attrs.id=u;break;case".":o.classes.push(u);break;case":":Dt.inArray("checked disabled enabled read-only required".split(" "),u)!==-1&&(o.attrs[u]=u);break}if(f==="["){const y=b.match(/([\w\-]+)(?:\=\"([^\"]+))?/);y&&(o.attrs[y[1]]=y[2])}return""})),o.name=n||"div",o},o6=e=>Q(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Dt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),n=>{const o=Dt.map(n.split(/(?:~\+|~|\+)/),n6),r=o.pop();return o.length&&(r.siblings=o),r}).reverse()):[],s6=(e,n)=>{let o="",r=Bh(e);if(r==="")return"";const c=L=>Q(L)?L.replace(/%(\w+)/g,""):"",u=(L,ce)=>Xu.getStyle(ce??e.getBody(),L,!0);if(Q(n)){const L=e.formatter.get(n);if(!L)return"";n=L[0]}if("preview"in n){const L=n.preview;if(L===!1)return"";r=L||r}let f=n.block||n.inline||"span",b;const y=o6(n.selector);y.length>0?(y[0].name||(y[0].name=f),f=n.selector,b=WM(y,e)):b=WM([f],e);const x=Xu.select(f,b)[0]||b.firstChild;Ex(n.styles,(L,ce)=>{const ie=c(L);ie&&Xu.setStyle(x,ce,ie)}),Ex(n.attributes,(L,ce)=>{const ie=c(L);ie&&Xu.setAttrib(x,ce,ie)}),Ex(n.classes,L=>{const ce=c(L);Xu.hasClass(x,ce)||Xu.addClass(x,ce)}),e.dispatch("PreviewFormats"),Xu.setStyles(b,{position:"absolute",left:-65535}),e.getBody().appendChild(b);const M=u("fontSize"),P=/px$/.test(M)?parseInt(M,10):0;return Ex(r.split(" "),L=>{let ce=u(L,x);if(!(L==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(ce)&&(ce=u(L),ub(ce).toLowerCase()==="#ffffff"))&&!(L==="color"&&ub(ce).toLowerCase()==="#000000")){if(L==="font-size"&&/em|%$/.test(ce)){if(P===0)return;ce=parseFloat(ce)/(/%$/.test(ce)?100:1)*P+"px"}L==="border"&&ce&&(o+="padding:0 2px;"),o+=L+":"+ce+";"}}),e.dispatch("AfterPreviewFormats"),Xu.remove(b),o},r6=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let n=1;n<=6;n++)e.addShortcut("access+"+n,"",["FormatBlock",!1,"h"+n]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},ZM=e=>{const n=t6(e),o=fc({});return r6(e),z5(e),Of(e)||tI(o,e),{get:n.get,has:n.has,register:n.register,unregister:n.unregister,apply:(r,c,u)=>{p8(e,r,c,u)},remove:(r,c,u,f)=>{b8(e,r,c,u,f)},toggle:(r,c,u)=>{v8(e,r,c,u)},match:(r,c,u,f)=>Nw(e,r,c,u,f),closest:r=>bM(e,r),matchAll:(r,c)=>hM(e,r,c),matchNode:(r,c,u,f)=>pM(e,r,c,u,f),canApply:r=>h8(e,r),formatChanged:(r,c,u,f)=>y8(e,o,r,c,u,f),getCssText:fe(s6,e)}},_x=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},$A=(e,n,o)=>{const r=fc(!1),c=y=>{Mw(n,!1,o),n.add({},y)};e.on("init",()=>{n.add()}),e.on("BeforeExecCommand",y=>{const x=y.command;_x(x)||(uM(n,o),n.beforeChange())}),e.on("ExecCommand",y=>{const x=y.command;_x(x)||c(y)}),e.on("ObjectResizeStart cut",()=>{n.beforeChange()}),e.on("SaveContent ObjectResized blur",c),e.on("dragend",c),e.on("keyup",y=>{const x=y.keyCode;y.isDefaultPrevented()||((x>=33&&x<=36||x>=37&&x<=40||x===45||y.ctrlKey)&&(c(),e.nodeChanged()),(x===46||x===8)&&e.nodeChanged(),r.get()&&n.typing&&!px(hx(e),n.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),r.set(!1),e.nodeChanged()))}),e.on("keydown",y=>{const x=y.keyCode;if(y.isDefaultPrevented())return;if(x>=33&&x<=36||x>=37&&x<=40||x===45){n.typing&&c(y);return}const M=y.ctrlKey&&!y.altKey||y.metaKey;(x<16||x>20)&&x!==224&&x!==91&&!n.typing&&!M&&(n.beforeChange(),Mw(n,!0,o),n.add({},y),r.set(!0))}),e.on("mousedown",y=>{n.typing&&c(y)});const u=y=>y.inputType==="insertReplacementText",f=y=>y.inputType==="insertText"&&y.data===null,b=y=>y.inputType==="insertFromPaste"||y.inputType==="insertFromDrop";e.on("input",y=>{y.inputType&&(u(y)||f(y)||b(y))&&c(y)}),e.on("AddUndo Undo Redo ClearUndos",y=>{y.isDefaultPrevented()||e.nodeChanged()})},jM=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},GM=e=>{const n=nf(),o=fc(0),r=fc(0),c={data:[],typing:!1,beforeChange:()=>{i8(e,o,n)},add:(u,f)=>l8(e,c,r,o,n,u,f),dispatchChange:()=>{e.setDirty(!0);const u=hx(e);u.bookmark=nc(e.selection),e.dispatch("change",{level:u,lastLevel:an(c.data,r.get()).getOrUndefined()})},undo:()=>wx(e,c,o,r),redo:()=>u8(e,r,c.data),clear:()=>{d8(e,c,r)},reset:()=>{gM(e,c)},hasUndo:()=>SA(e,c,r),hasRedo:()=>m8(e,c,r),transact:u=>f8(e,c,o,u),ignore:u=>{dU(e,o,u)},extra:(u,f)=>{g8(e,c,r,u,f)}};return Of(e)||$A(e,c,o),jM(e),c},a6=[9,27,Zn.HOME,Zn.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Zn.DOWN,Zn.UP,Zn.LEFT,Zn.RIGHT].concat(us.browser.isFirefox()?[224]:[]),PA="data-mce-placeholder",FA=e=>e.type==="keydown"||e.type==="keyup",Ax=e=>{const n=e.keyCode;return n===Zn.BACKSPACE||n===Zn.DELETE},qM=e=>{if(FA(e)){const n=e.keyCode;return!Ax(e)&&(Zn.metaKeyPressed(e)||e.altKey||n>=112&&n<=123||ae(a6,n))}else return!1},KM=e=>FA(e)&&!(Ax(e)||e.type==="keyup"&&e.keyCode===229),IA=(e,n,o)=>{if(Ca(ve.fromDom(n),!1)){const r=n.firstElementChild;return r?e.getStyle(n.firstElementChild,"padding-left")||e.getStyle(n.firstElementChild,"padding-right")?!1:o===r.nodeName.toLowerCase():!0}else return!1},c6=e=>{var n;const o=e.dom,r=wl(e),c=(n=FT(e))!==null&&n!==void 0?n:"",u=(f,b)=>{if(qM(f))return;const y=e.getBody(),x=KM(f)?!1:IA(o,y,r);(o.getAttrib(y,PA)!==""!==x||b)&&(o.setAttrib(y,PA,x?c:null),o.setAttrib(y,"aria-placeholder",x?c:null),du(e,x),e.on(x?"keydown":"keyup",u),e.off(x?"keyup":"keydown",u))};Cs(c)&&e.on("init",f=>{u(f,!0),e.on("change SetContent ExecCommand",u),e.on("paste",b=>Ii.setEditorTimeout(e,()=>u(b)))})},i6=(e,n)=>({block:e,position:n}),Rf=(e,n)=>({from:e,to:n}),gu=(e,n)=>{const o=ve.fromDom(e),r=ve.fromDom(n.container());return Jr(o,r).map(c=>i6(c,n))},Ox=e=>!Ps(e.from.block,e.to.block),LA=(e,n)=>Rl(n,c=>ec(c)||si(c.dom),c=>Ps(c,e)).filter(Qo).getOr(e),Dx=(e,n)=>{const o=ve.fromDom(e);return Ps(LA(o,n.from.block),LA(o,n.to.block))},YM=e=>lr(e.from.block.dom)===!1&&lr(e.to.block.dom)===!1,XM=e=>{const n=o=>bi(o)||hh(o.dom);return n(e.from.block)&&n(e.to.block)},JM=(e,n,o)=>jr(o.position.getNode())&&!Ca(o.block)?kd(!1,o.block.dom).bind(r=>r.isEqual(o.position)?Cl(n,e,r).bind(c=>gu(e,c)):R.some(o)).getOr(o):o,QM=(e,n,o)=>{const r=gu(e,bt.fromRangeStart(o)),c=r.bind(u=>Cl(n,e,u.position).bind(f=>gu(e,f).map(b=>JM(e,n,b))));return Zr(r,c,Rf).filter(u=>Ox(u)&&Dx(e,u)&&YM(u)&&XM(u))},eN=(e,n,o)=>o.collapsed?QM(e,n,o):R.none(),tN=e=>{const n=va(e);return Qn(n,wa).fold(he(n),o=>n.slice(0,o))},zw=e=>{const n=tN(e);return H(n,Fs),n},Rx=(e,n)=>{const o=_f(n,e);return ot(o.reverse(),r=>Ca(r)).each(Fs)},l6=e=>Z(Fm(e),n=>!Ca(n)).length===0,u6=(e,n,o,r)=>{if(Ca(o))return Da(o),Pi(o.dom);l6(r)&&Ca(n)&&os(r,ve.fromTag("br"));const c=Sl(o.dom,bt.before(r.dom));return H(zw(n),u=>{os(r,u)}),Rx(e,n),c},d6=(e,n,o)=>{if(Ca(o))return Fs(o),Ca(n)&&Da(n),Pi(n.dom);const r=Td(o.dom);return H(zw(n),c=>{na(o,c)}),Rx(e,n),r},m6=(e,n)=>{const o=_f(n,e);return R.from(o[o.length-1])},nN=(e,n)=>Ya(n,e)?m6(n,e):R.none(),oN=(e,n)=>{kd(e,n.dom).bind(o=>R.from(o.getNode())).map(ve.fromDom).filter(ru).each(Fs)},sN=(e,n,o)=>(oN(!0,n),oN(!1,o),nN(n,o).fold(fe(d6,e,n,o),fe(u6,e,n,o))),Mx=(e,n,o,r)=>n?sN(e,r,o):sN(e,o,r),HA=(e,n)=>{const o=ve.fromDom(e.getBody());return eN(o.dom,n,e.selection.getRng()).map(c=>()=>{Mx(o,n,c.from.block,c.to.block).each(u=>{e.selection.setRng(u.toRange())})})},f6=(e,n)=>{const o=n.getRng();return Zr(Jr(e,ve.fromDom(o.startContainer)),Jr(e,ve.fromDom(o.endContainer)),(r,c)=>Ps(r,c)?R.none():R.some(()=>{o.deleteContents(),Mx(e,!0,r,c).each(u=>{n.setRng(u.toRange())})})).getOr(R.none())},rN=(e,n)=>{const o=ve.fromDom(n),r=fe(Ps,e);return Um(o,ec,r).isSome()},g6=(e,n)=>rN(e,n.startContainer)||rN(e,n.endContainer),h6=(e,n)=>{const o=Sl(e.dom,bt.fromRangeStart(n)).isNone(),r=xi(e.dom,bt.fromRangeEnd(n)).isNone();return!g6(e,n)&&o&&r},p6=e=>R.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),b6=e=>{const n=ve.fromDom(e.getBody()),o=e.selection.getRng();return h6(n,o)?p6(e):f6(n,e.selection)},l0=(e,n)=>e.selection.isCollapsed()?R.none():b6(e),xm=(e,n,o,r,c)=>R.from(n._selectionOverrides.showCaret(e,o,r,c)),v6=e=>{const n=e.ownerDocument.createRange();return n.selectNode(e),n},Vw=(e,n)=>e.dispatch("BeforeObjectSelected",{target:n}).isDefaultPrevented()?R.none():R.some(v6(n)),y6=(e,n,o)=>{const r=lv(1,e.getBody(),n),c=bt.fromRangeStart(r),u=c.getNode();if(tb(u))return xm(1,e,u,!c.isAtEnd(),!1);const f=c.getNode(!0);if(tb(f))return xm(1,e,f,!1,!1);const b=rp(e.dom.getRoot(),c.getNode());return tb(b)?xm(1,e,b,!1,o):R.none()},zA=(e,n,o)=>n.collapsed?y6(e,n,o).getOr(n):n,aN=e=>op(e)||Fv(e),w6=e=>sp(e)||sw(e),C6=(e,n)=>{Zt(n)&&n.data.length===0&&e.remove(n)},Nx=(e,n,o,r,c,u)=>{xm(r,e,u.getNode(!c),c,!0).each(f=>{if(n.collapsed){const b=n.cloneRange();c?b.setEnd(f.startContainer,f.startOffset):b.setStart(f.endContainer,f.endOffset),b.deleteContents()}else n.deleteContents();e.selection.setRng(f)}),C6(e.dom,o)},S6=(e,n)=>{const o=e.selection.getRng();if(!Zt(o.commonAncestorContainer))return R.none();const r=n?Dc.Forwards:Dc.Backwards,c=fm(e.getBody()),u=fe(L2,n?c.next:c.prev),f=n?aN:w6,b=ob(r,e.getBody(),o),y=u(b),x=y&&sa(n,y);if(!x||!hf(b,x))return R.none();if(f(x))return R.some(()=>Nx(e,o,b.getNode(),r,n,x));const M=u(x);return M&&f(M)&&hf(x,M)?R.some(()=>Nx(e,o,b.getNode(),r,n,M)):R.none()},VA=(e,n)=>S6(e,n),UA=(e,n)=>{const o=e.getBody();return n?Pi(o).filter(op):Td(o).filter(sp)},WA=e=>{const n=e.selection.getRng();return!n.collapsed&&(UA(e,!0).exists(o=>o.isEqual(bt.fromRangeStart(n)))||UA(e,!1).exists(o=>o.isEqual(bt.fromRangeEnd(n))))},x6=e=>ye(e)&&(ec(ve.fromDom(e))||qi(ve.fromDom(e))),hu=lu.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),k6=(e,n)=>{const o=n.getNode(!e),r=e?"after":"before";return $n(o)&&o.getAttribute("data-mce-caret")===r},Bx=(e,n,o,r)=>{const c=u=>ul(ve.fromDom(u))&&!zu(o,r,e);return I2(!n,o).fold(()=>I2(n,r).fold(kt,c),c)},Uw=(e,n,o,r)=>{const c=r.getNode(!n);return Jr(ve.fromDom(e),ve.fromDom(o.getNode())).map(u=>Ca(u)?hu.remove(u.dom):hu.moveToElement(c)).orThunk(()=>R.some(hu.moveToElement(c)))},cN=(e,n,o)=>Cl(n,e,o).bind(r=>x6(r.getNode())||Bx(e,n,o,r)?R.none():n&&lr(r.getNode())||!n&&lr(r.getNode(!0))?Uw(e,n,o,r):n&&sp(o)||!n&&op(o)?R.some(hu.moveToPosition(r)):R.none()),T6=(e,n)=>$t(n)?R.none():e&&lr(n.nextSibling)?R.some(hu.moveToElement(n.nextSibling)):!e&&lr(n.previousSibling)?R.some(hu.moveToElement(n.previousSibling)):R.none(),$x=(e,n,o)=>o.fold(r=>R.some(hu.remove(r)),r=>R.some(hu.moveToElement(r)),r=>zu(n,r,e)?R.none():R.some(hu.moveToPosition(r))),E6=(e,n,o)=>k6(n,o)?T6(n,o.getNode(!n)).orThunk(()=>cN(e,n,o)):cN(e,n,o).bind(r=>$x(e,o,r)),_6=(e,n,o)=>{const r=lv(n?1:-1,e,o),c=bt.fromRangeStart(r),u=ve.fromDom(e);return!n&&sp(c)?R.some(hu.remove(c.getNode(!0))):n&&op(c)?R.some(hu.remove(c.getNode())):!n&&op(c)&&JE(u,c)?jF(u,c).map(f=>hu.remove(f.getNode())):n&&sp(c)&&JO(u,c)?Ao(u,c).map(f=>hu.remove(f.getNode())):E6(e,n,c)},A6=(e,n)=>o=>(e._selectionOverrides.hideFakeCaret(),qu(e,n,ve.fromDom(o)),!0),O6=(e,n)=>o=>{const r=n?bt.before(o):bt.after(o);return e.selection.setRng(r.toRange()),!0},D6=e=>n=>(e.selection.setRng(n.toRange()),!0),iN=(e,n)=>R.from(rp(e.getBody(),n)),R6=(e,n)=>{const o=e.selection.getNode();return iN(e,o).filter(lr).fold(()=>_6(e.getBody(),n,e.selection.getRng()).map(r=>()=>r.fold(A6(e,n),O6(e,n),D6(e))),()=>R.some(Me))},M6=e=>{H(Ms(e,".mce-offscreen-selection"),Fs)},N6=(e,n)=>{const o=e.selection.getNode();return lr(o)&&!Ru(o)?iN(e,o.parentNode).filter(lr).fold(()=>R.some(()=>{M6(ve.fromDom(e.getBody())),qu(e,n,ve.fromDom(e.selection.getNode())),Hv(e)}),()=>R.some(Me)):WA(e)?R.some(()=>{xr(e,e.selection.getRng(),ve.fromDom(e.getBody()))}):R.none()},lN=e=>{const n=e.dom,o=e.selection,r=rp(e.getBody(),o.getNode());if(si(r)&&n.isBlock(r)&&n.isEmpty(r)){const c=n.create("br",{"data-mce-bogus":"1"});n.setHTML(r,""),r.appendChild(c),o.setRng(bt.before(c).toRange())}return!0},ZA=(e,n)=>e.selection.isCollapsed()?R6(e,n):N6(e,n),hU=(e,n)=>{const o=bt.fromRangeStart(e.selection.getRng());return Cl(n,e.getBody(),o).filter(r=>n?ho(r):GO(r)).bind(r=>cv(n?0:-1,r)).map(r=>()=>e.selection.select(r))},pu=(e,n)=>e.selection.isCollapsed()?hU(e,n):R.none(),fp=Zt,jA=e=>fp(e)&&e.data[0]===Sr,GA=e=>fp(e)&&e.data[e.data.length-1]===Sr,uN=e=>{var n;return((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Sr)},dN=e=>{var n;if(fp(e.previousSibling))return GA(e.previousSibling)||e.previousSibling.appendData(Sr),e.previousSibling;if(fp(e))return jA(e)||e.insertData(0,Sr),e;{const o=uN(e);return(n=e.parentNode)===null||n===void 0||n.insertBefore(o,e),o}},B6=e=>{var n,o;if(fp(e.nextSibling))return jA(e.nextSibling)||e.nextSibling.insertData(0,Sr),e.nextSibling;if(fp(e))return GA(e)||e.appendData(Sr),e;{const r=uN(e);return e.nextSibling?(n=e.parentNode)===null||n===void 0||n.insertBefore(r,e.nextSibling):(o=e.parentNode)===null||o===void 0||o.appendChild(r),r}},Ww=(e,n)=>e?dN(n):B6(n),$6=fe(Ww,!0),P6=fe(Ww,!1),mN=(e,n)=>Zt(e.container())?Ww(n,e.container()):Ww(n,e.getNode()),Zb=(e,n)=>{const o=n.get();return o&&e.container()===o&&I(o)},Px=(e,n)=>n.fold(o=>{Cd(e.get());const r=$6(o);return e.set(r),R.some(bt(r,r.length-1))},o=>Pi(o).map(r=>{if(Zb(r,e)){const c=e.get();return bt(c,1)}else{Cd(e.get());const c=mN(r,!0);return e.set(c),bt(c,1)}}),o=>Td(o).map(r=>{if(Zb(r,e)){const c=e.get();return bt(c,c.length-1)}else{Cd(e.get());const c=mN(r,!1);return e.set(c),bt(c,c.length-1)}}),o=>{Cd(e.get());const r=P6(o);return e.set(r),R.some(bt(r,1))}),qA=(e,n)=>{for(let o=0;o<e.length;o++){const r=e[o].apply(null,n);if(r.isSome())return r}return R.none()},Li=lu.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Fx=(e,n)=>{const o=gf(n,e);return o||e},F6=(e,n,o)=>{const r=gD(o),c=Fx(n,r.container());return Rg(e,c,r).fold(()=>xi(c,r).bind(fe(Rg,e,c)).map(u=>Li.before(u)),R.none)},I6=(e,n)=>vg(e,n)===null,fN=(e,n,o)=>Rg(e,n,o).filter(fe(I6,n)),pU=(e,n,o)=>{const r=hD(o);return fN(e,n,r).bind(c=>Sl(c,r).isNone()?R.some(Li.start(c)):R.none())},bU=(e,n,o)=>{const r=gD(o);return fN(e,n,r).bind(c=>xi(c,r).isNone()?R.some(Li.end(c)):R.none())},vU=(e,n,o)=>{const r=hD(o),c=Fx(n,r.container());return Rg(e,c,r).fold(()=>Sl(c,r).bind(fe(Rg,e,c)).map(u=>Li.after(u)),R.none)},Ju=e=>!h5(KA(e)),Mf=(e,n,o)=>qA([F6,pU,bU,vU],[e,n,o]).filter(Ju),KA=e=>e.fold(Ue,Ue,Ue,Ue),YA=e=>e.fold(he("before"),he("start"),he("end"),he("after")),u0=e=>e.fold(Li.before,Li.before,Li.after,Li.after),gN=e=>e.fold(Li.start,Li.start,Li.end,Li.end),yU=(e,n)=>YA(e)===YA(n)&&KA(e)===KA(n),wU=(e,n,o,r,c,u)=>Zr(Rg(n,o,r),Rg(n,o,c),(f,b)=>f!==b&&mD(o,f,b)?Li.after(e?f:b):u).getOr(u),Qu=(e,n)=>e.fold(Ie,o=>!yU(o,n)),L6=(e,n,o,r,c)=>{const u=sa(e,c);return Cl(e,o,u).map(fe(sa,e)).fold(()=>r.map(u0),y=>Mf(n,o,y).map(fe(wU,e,n,o,u,y)).filter(fe(Qu,r))).filter(Ju)},H6=(e,n)=>e?n.fold(Rt(R.some,Li.start),R.none,Rt(R.some,Li.after),R.none):n.fold(R.none,Rt(R.some,Li.before),R.none,Rt(R.some,Li.end)),z6=(e,n,o,r)=>{const c=sa(e,r),u=Mf(n,o,c);return Mf(n,o,c).bind(fe(H6,e)).orThunk(()=>L6(e,n,o,u,r))},V6=e=>ee(e.selection.getSel().modify),hN=(e,n,o)=>{const r=e?1:-1;return n.setRng(bt(o.container(),o.offset()+r).toRange()),n.getSel().modify("move",e?"forward":"backward","word"),!0},U6=(e,n)=>{const o=n.selection.getRng(),r=e?bt.fromRangeEnd(o):bt.fromRangeStart(o);return V6(n)?e&&jt(r)?hN(!0,n.selection,r):!e&&Mn(r)?hN(!1,n.selection,r):!1:!1};var El;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(El||(El={}));const Ix=(e,n)=>e===Dc.Backwards?ao(n):n,W6=(e,n,o)=>e===Dc.Forwards?n.next(o):n.prev(o),Z6=(e,n,o,r)=>jr(r.getNode(n===Dc.Forwards))?El.Br:zu(o,r)===!1?El.Block:El.Wrap,Lx=(e,n,o,r)=>{const c=fm(o);let u=r;const f=[];for(;u;){const b=W6(n,c,u);if(!b)break;if(jr(b.getNode(!1)))return n===Dc.Forwards?{positions:Ix(n,f).concat([b]),breakType:El.Br,breakAt:R.some(b)}:{positions:Ix(n,f),breakType:El.Br,breakAt:R.some(b)};if(!b.isVisible()){u=b;continue}if(e(u,b)){const y=Z6(o,n,u,b);return{positions:Ix(n,f),breakType:y,breakAt:R.some(b)}}f.push(b),u=b}return{positions:Ix(n,f),breakType:El.Eol,breakAt:R.none()}},Hx=(e,n,o,r)=>n(o,r).breakAt.map(c=>{const u=n(o,c).positions;return e===Dc.Backwards?u.concat(c):[c].concat(u)}).getOr([]),zx=(e,n)=>Pe(e,(o,r)=>o.fold(()=>R.some(r),c=>Zr(An(c.getClientRects()),An(r.getClientRects()),(u,f)=>{const b=Math.abs(n-u.left);return Math.abs(n-f.left)<=b?r:c}).or(o)),R.none()),Zw=(e,n)=>An(n.getClientRects()).bind(o=>zx(e,o.left)),d0=fe(Lx,bt.isAbove,-1),jw=fe(Lx,bt.isBelow,1),m0=fe(Hx,-1,d0),pN=fe(Hx,1,jw),j6=(e,n)=>d0(e,n).breakAt.isNone(),G6=(e,n)=>jw(e,n).breakAt.isNone(),q6=e=>Pi(e).map(n=>[n].concat(jw(e,n).positions)).getOr([]),K6=e=>Td(e).map(n=>d0(e,n).positions.concat(n)).getOr([]),Y6=(e,n)=>Zw(m0(e,n),n),X6=(e,n)=>Zw(pN(e,n),n),bN=lr,vN=(e,n)=>Math.abs(e.left-n),XA=(e,n)=>Math.abs(e.right-n),yN=e=>gr(e,"node"),Gw=(e,n)=>ct(e,(o,r)=>{const c=Math.min(vN(o,n),XA(o,n)),u=Math.min(vN(r,n),XA(r,n));return u===c&&yN(r)&&bN(r.node)||u<c?r:o}),wN=e=>{const n=o=>re(o,r=>{const c=ag(r);return c.node=e,c});if($n(e))return n(e.getClientRects());if(Zt(e)){const o=e.ownerDocument.createRange();return o.setStart(e,0),o.setEnd(e,e.data.length),n(o.getClientRects())}else return[]},Vx=e=>eo(e,wN);var Nf;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(Nf||(Nf={}));const CN=(e,n,o,r)=>{let c=r;for(;c=dm(c,e,Ua,n);)if(o(c))return},Ux=(e,n,o,r,c,u)=>{let f=0;const b=[],y=P=>{let L=Vx([P]);e===-1&&(L=L.reverse());for(let ce=0;ce<L.length;ce++){const ie=L[ce];if(!o(ie,x)){if(b.length>0&&n(ie,jn(b))&&f++,ie.line=f,c(ie))return!0;b.push(ie)}}return!1},x=jn(u.getClientRects());if(!x)return b;const M=u.getNode();return M&&(y(M),CN(e,r,y,M)),b},J6=(e,n)=>n.line>e,SN=(e,n)=>n.line===e,Q6=fe(Ux,Nf.Up,Hp,zp),eL=fe(Ux,Nf.Down,zp,Hp),xN=e=>jn(e.getClientRects()),tL=(e,n,o,r)=>{const c=fm(n);let u,f,b,y;const x=[];let M=0;e===1?(u=c.next,f=zp,b=Hp,y=bt.after(r)):(u=c.prev,f=Hp,b=zp,y=bt.before(r));const P=xN(y);do{if(!y.isVisible())continue;const L=xN(y);if(b(L,P))continue;x.length>0&&f(L,jn(x))&&M++;const ce=ag(L);if(ce.position=y,ce.line=M,o(ce))return x;x.push(ce)}while(y=u(y));return x},kN=e=>n=>J6(e,n),Wx=e=>n=>SN(e,n),Ig=(e,n)=>{e.selection.setRng(n),Jt(e,e.selection.getRng())},JA=(e,n,o)=>R.some(zA(e,n,o)),jb=(e,n,o,r,c,u)=>{const f=n===Dc.Forwards,b=fm(e.getBody()),y=fe(L2,f?b.next:b.prev),x=f?r:c;if(!o.collapsed){const ie=Vp(o);if(u(ie))return xm(n,e,ie,n===Dc.Backwards,!1);if(WA(e)){const te=o.cloneRange();return te.collapse(n===Dc.Backwards),R.from(te)}}const M=ob(n,e.getBody(),o);if(x(M))return Vw(e,M.getNode(!f));let P=y(M);const L=ri(o);if(P)P=sa(f,P);else return L?R.some(o):R.none();if(x(P))return xm(n,e,P.getNode(!f),f,!1);const ce=y(P);return ce&&x(ce)&&hf(P,ce)?xm(n,e,ce.getNode(!f),f,!1):L?JA(e,P.toRange(),!1):R.none()},Zx=(e,n,o,r,c,u)=>{const f=ob(n,e.getBody(),o),b=jn(f.getClientRects()),y=n===Nf.Down,x=e.getBody();if(!b)return R.none();if(WA(e)){const ue=y?bt.fromRangeEnd(o):bt.fromRangeStart(o);return(y?X6:Y6)(x,ue).orThunk(()=>R.from(ue)).map(De=>De.toRange())}const P=(y?eL:Q6)(x,kN(1),f),L=Z(P,Wx(1)),ce=b.left,ie=Gw(L,ce);if(ie&&u(ie.node)){const ue=Math.abs(ce-ie.left),Be=Math.abs(ce-ie.right);return xm(n,e,ie.node,ue<Be,!1)}let te;if(r(f)?te=f.getNode():c(f)?te=f.getNode(!0):te=Vp(o),te){const ue=tL(n,x,kN(1),te);let Be=Gw(Z(ue,Wx(1)),ce);if(Be||(Be=jn(Z(ue,Wx(0))),Be))return JA(e,Be.position.toRange(),!1)}return L.length===0?jx(e,y).filter(y?c:r).map(ue=>zA(e,ue.toRange(),!1)):R.none()},jx=(e,n)=>{const o=e.selection.getRng(),r=n?bt.fromRangeEnd(o):bt.fromRangeStart(o),c=rE(r.container(),e.getBody());if(n){const u=jw(c,r);return Tn(u.positions)}else{const u=d0(c,r);return An(u.positions)}},QA=(e,n,o)=>jx(e,n).filter(o).exists(r=>(e.selection.setRng(r.toRange()),!0)),f0=(e,n)=>{const o=e.dom.createRng();o.setStart(n.container(),n.offset()),o.setEnd(n.container(),n.offset()),e.selection.setRng(o)},TN=(e,n)=>{e?n.setAttribute("data-mce-selected","inline-boundary"):n.removeAttribute("data-mce-selected")},EN=(e,n,o)=>Px(n,o).map(r=>(f0(e,r),o)),nL=(e,n,o)=>{const r=bt.fromRangeStart(e);if(e.collapsed)return r;{const c=bt.fromRangeEnd(e);return o?Sl(n,c).getOr(c):xi(n,r).getOr(r)}},oL=(e,n,o)=>{const r=e.getBody(),c=nL(e.selection.getRng(),r,o),u=fe(_b,e);return z6(o,u,r,c).bind(b=>EN(e,n,b))},sL=(e,n,o)=>{const r=re(Ms(ve.fromDom(n.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),c=Z(r,e),u=Z(o,e);H(Re(c,u),fe(TN,!1)),H(Re(u,c),fe(TN,!0))},rL=(e,n)=>{const o=n.get();if(e.selection.isCollapsed()&&!e.composing&&o){const r=bt.fromRangeStart(e.selection.getRng());bt.isTextPosition(r)&&!fD(r)&&(f0(e,sv(o,r)),n.set(null))}},aL=(e,n,o,r)=>{if(n.selection.isCollapsed()){const c=Z(r,e);H(c,u=>{const f=bt.fromRangeStart(n.selection.getRng());Mf(e,n.getBody(),f).bind(b=>EN(n,o,b))})}},e3=(e,n,o)=>dg(e)?oL(e,n,o).isSome():!1,_N=(e,n,o)=>dg(n)?U6(e,n):!1,cL=e=>{const n=fc(null),o=fe(_b,e);return e.on("NodeChange",r=>{dg(e)&&(sL(o,e.dom,r.parents),rL(e,n),aL(o,e,n,r.parents))}),n},bu=fe(_N,!0),iL=fe(_N,!1),g0=(e,n,o)=>{if(dg(e)){const r=jx(e,n).getOrThunk(()=>{const c=e.selection.getRng();return n?bt.fromRangeEnd(c):bt.fromRangeStart(c)});return Mf(fe(_b,e),e.getBody(),r).exists(c=>{const u=u0(c);return Px(o,u).exists(f=>(f0(e,f),!0))})}else return!1},AN=(e,n)=>{const o=document.createRange();return o.setStart(e.container(),e.offset()),o.setEnd(n.container(),n.offset()),o},t3=e=>Zr(Pi(e),Td(e),(n,o)=>{const r=sa(!0,n),c=sa(!1,o);return xi(e,r).forall(u=>u.isEqual(c))}).getOr(!0),ON=(e,n)=>o=>Px(n,o).map(r=>()=>f0(e,r)),DN=(e,n,o,r)=>{const c=e.getBody(),u=fe(_b,e);e.undoManager.ignore(()=>{e.selection.setRng(AN(o,r)),bD(e),Mf(u,c,bt.fromRangeStart(e.selection.getRng())).map(gN).bind(ON(e,n)).each(Vt)}),e.nodeChanged()},lL=(e,n)=>{const o=gf(n,e);return o||e},uL=(e,n,o,r)=>{const c=lL(e.getBody(),r.container()),u=fe(_b,e),f=Mf(u,c,r);return f.bind(y=>o?y.fold(he(R.some(gN(y))),R.none,he(R.some(u0(y))),R.none):y.fold(R.none,he(R.some(u0(y))),R.none,he(R.some(gN(y))))).map(ON(e,n)).getOrThunk(()=>{const y=Hh(o,c,r),x=y.bind(M=>Mf(u,c,M));return Zr(f,x,()=>Rg(u,c,r).bind(M=>t3(M)?R.some(()=>{qu(e,o,ve.fromDom(M))}):R.none())).getOrThunk(()=>x.bind(()=>y.map(M=>()=>{o?DN(e,n,r,M):DN(e,n,M,r)})))})},n3=(e,n,o)=>{if(e.selection.isCollapsed()&&dg(e)){const r=bt.fromRangeStart(e.selection.getRng());return uL(e,n,o,r)}return R.none()},RN=(e,n)=>{const o=_f(n,e);return Qn(o,wa).fold(he(o),r=>o.slice(0,r))},dL=e=>_u(e)===1,mL=(e,n,o,r)=>{const c=fe(Sw,n),u=re(Z(r,c),f=>f.dom);if(u.length===0)qu(n,e,o);else{const f=nR(o.dom,u);n.selection.setRng(f.toRange())}},CU=(e,n)=>{const o=ve.fromDom(e.getBody()),r=ve.fromDom(e.selection.getStart()),c=Z(RN(o,r),dL);return Tn(c).bind(u=>{const f=bt.fromRangeStart(e.selection.getRng());return tU(n,f,u.dom)&&!V5(u)?R.some(()=>mL(n,e,u,c)):R.none()})},o3=(e,n)=>e.selection.isCollapsed()?CU(e,n):R.none(),s3=(e,n,o)=>ye(o)?R.some(()=>{e._selectionOverrides.hideFakeCaret(),qu(e,n,ve.fromDom(o))}):R.none(),MN=(e,n)=>{const o=n?Fv:sw,r=n?Dc.Forwards:Dc.Backwards,c=ob(r,e.getBody(),e.selection.getRng());return o(c)?s3(e,n,c.getNode(!n)):R.from(sa(n,c)).filter(u=>o(u)&&hf(c,u)).bind(u=>s3(e,n,u.getNode(!n)))},NN=(e,n)=>{const o=e.selection.getNode();return nu(o)?s3(e,n,o):R.none()},BN=(e,n)=>e.selection.isCollapsed()?MN(e,n):NN(e,n),fL=e=>Rl(e,n=>si(n.dom)||lr(n.dom)).exists(n=>si(n.dom)),r3=e=>Br(e??"").getOr(0),$N=(e,n)=>{const o=e||B0(n)?"margin":"padding",r=Ve(n,"direction")==="rtl"?"-right":"-left";return o+r},a3=(e,n,o,r,c,u)=>{const f=$N(o,ve.fromDom(u)),b=r3(e.getStyle(u,f));if(n==="outdent"){const y=Math.max(0,b-r);e.setStyle(u,f,y?y+c:"")}else{const y=b+r+c;e.setStyle(u,f,y)}},Gx=(e,n)=>kn(n,o=>{const r=$N(v2(e),o),c=Co(o,r).map(r3).getOr(0);return e.dom.getContentEditable(o.dom)!=="false"&&c>0}),c3=e=>{const n=PN(e);return!e.mode.isReadOnly()&&(n.length>1||Gx(e,n))},i3=e=>Ns(e)||qi(e),gL=e=>xc(e).exists(i3),PN=e=>Z(Uf(e.selection.getSelectedBlocks()),n=>!i3(n)&&!gL(n)&&fL(n)),qx=(e,n)=>{var o,r;const{dom:c}=e,u=qp(e),f=(r=(o=/[a-z%]+$/i.exec(u))===null||o===void 0?void 0:o[0])!==null&&r!==void 0?r:"px",b=r3(u),y=v2(e);H(PN(e),x=>{a3(c,n,y,b,f,x.dom)})},hL=e=>qx(e,"indent"),FN=e=>qx(e,"outdent"),IN=e=>{if(e.selection.isCollapsed()&&c3(e)){const n=e.dom,o=e.selection.getRng(),r=bt.fromRangeStart(o),c=n.getParent(o.startContainer,n.isBlock);if(c!==null&&fs(ve.fromDom(c),r))return R.some(()=>FN(e))}return R.none()},LN=(e,n,o)=>ks([IN,ZA,VA,(r,c)=>n3(r,n,c),HA,LS,pu,BN,l0,o3],r=>r(e,o)),Bd=(e,n)=>{LN(e,n,!1).fold(()=>{bD(e),Hv(e)},Vt)},HN=(e,n)=>{LN(e,n,!0).fold(()=>Ab(e),Vt)},zN=(e,n)=>{e.addCommand("delete",()=>{Bd(e,n)}),e.addCommand("forwardDelete",()=>{HN(e,n)})},pL=5,SU=400,bL=e=>e.touches===void 0||e.touches.length!==1?R.none():R.some(e.touches[0]),xU=(e,n)=>{const o=Math.abs(e.clientX-n.x),r=Math.abs(e.clientY-n.y);return o>pL||r>pL},vL=e=>{const n=nf(),o=fc(!1),r=B1(c=>{e.dispatch("longpress",{...c,type:"longpress"}),o.set(!0)},SU);e.on("touchstart",c=>{bL(c).each(u=>{r.cancel();const f={x:u.clientX,y:u.clientY,target:c.target};r.throttle(c),o.set(!1),n.set(f)})},!0),e.on("touchmove",c=>{r.cancel(),bL(c).each(u=>{n.on(f=>{xU(u,f)&&(n.clear(),o.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",c=>{r.cancel(),c.type!=="touchcancel"&&n.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{o.get()?c.preventDefault():e.dispatch("tap",{...c,type:"tap"})})},!0)},l3=(e,n)=>go(e,n.nodeName),u3=(e,n)=>Zt(n)?!0:$n(n)?!l3(e.getBlockElements(),n)&&!Rc(n)&&!Qf(e,n):!1,yL=(e,n,o)=>se(rw(ve.fromDom(o),ve.fromDom(n)),r=>l3(e,r.dom)),VN=(e,n)=>{if(Zt(n)){if(n.data.length===0)return!0;if(/^\s+$/.test(n.data)&&(!n.nextSibling||l3(e,n.nextSibling)))return!0}return!1},UN=e=>e.dom.create(wl(e),Gp(e)),wL=e=>{const n=e.dom,o=e.selection,r=e.schema,c=r.getBlockElements(),u=o.getStart(),f=e.getBody();let b,y,x=!1;const M=wl(e);if(!u||!$n(u))return;const P=f.nodeName.toLowerCase();if(!r.isValidChild(P,M.toLowerCase())||yL(c,f,u))return;const L=o.getRng(),{startContainer:ce,startOffset:ie,endContainer:te,endOffset:ue}=L,Be=Eb(e);let De=f.firstChild;for(;De;)if($n(De)&&fl(r,De),u3(r,De)){if(VN(c,De)){y=De,De=De.nextSibling,n.remove(y);continue}b||(b=UN(e),f.insertBefore(b,De),x=!0),y=De,De=De.nextSibling,b.appendChild(y)}else b=null,De=De.nextSibling;x&&Be&&(L.setStart(ce,ie),L.setEnd(te,ue),o.setRng(L),e.nodeChanged())},d3=(e,n,o)=>{const r=ve.fromDom(UN(e)),c=Ke();na(r,c),o(n,r);const u=document.createRange();return u.setStartBefore(c.dom),u.setEndBefore(c.dom),u},m3=e=>{e.on("NodeChange",fe(wL,e))},f3=e=>n=>(" "+n.attr("class")+" ").indexOf(e)!==-1,CL=(e,n,o)=>function(r){const c=arguments,u=c[c.length-2],f=u>0?n.charAt(u-1):"";if(f==='"')return r;if(f===">"){const b=n.lastIndexOf("<",u);if(b!==-1&&n.substring(b,u).indexOf('contenteditable="false"')!==-1)return r}return'<span class="'+o+'" data-mce-content="'+e.dom.encode(c[0])+'">'+e.dom.encode(typeof c[1]=="string"?c[1]:c[0])+"</span>"},SL=(e,n,o)=>{let r=n.length,c=o.content;if(o.format!=="raw"){for(;r--;)c=c.replace(n[r],CL(e,c,$h(e)));o.content=c}},Kx=e=>{const n="contenteditable",o=" "+Dt.trim(A2(e))+" ",r=" "+Dt.trim($h(e))+" ",c=f3(o),u=f3(r),f=lm(e);f.length>0&&e.on("BeforeSetContent",b=>{SL(e,f,b)}),e.parser.addAttributeFilter("class",b=>{let y=b.length;for(;y--;){const x=b[y];c(x)?x.attr(n,"true"):u(x)&&x.attr(n,"false")}}),e.serializer.addAttributeFilter(n,b=>{let y=b.length;for(;y--;){const x=b[y];!c(x)&&!u(x)||(f.length>0&&x.attr("data-mce-content")?(x.name="#text",x.type=3,x.raw=!0,x.value=x.attr("data-mce-content")):x.attr(n,null))}})},xL=e=>Gf(ve.fromDom(e.getBody()),"*[data-mce-caret]").map(n=>n.dom).getOrNull(),WN=(e,n)=>{n.hasAttribute("data-mce-caret")&&(nr(n),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(n))},kL=(e,n)=>{const o=xL(e);if(o){if(n.type==="compositionstart"){n.preventDefault(),n.stopPropagation(),WN(e,o);return}_e(o)&&(WN(e,o),e.undoManager.add())}},g3=e=>{e.on("keyup compositionstart",fe(kL,e))},ZN=lr,TL=(e,n,o)=>jb(n,e,o,op,sp,ZN),jN=(e,n,o)=>Zx(n,e,o,u=>op(u)||OS(u),u=>sp(u)||qO(u),ZN),EL=e=>{const n=e.dom.create(wl(e));return n.innerHTML='<br data-mce-bogus="1">',n},GN=(e,n,o)=>{const r=fm(e.getBody()),c=fe(L2,n===1?r.next:r.prev);if(o.collapsed){const u=e.dom.getParent(o.startContainer,"PRE");if(!u)return;if(!c(bt.fromRangeStart(o))){const b=ve.fromDom(EL(e));n===1?Dr(ve.fromDom(u),b):os(ve.fromDom(u),b),e.selection.select(b.dom,!0),e.selection.collapse()}}},_L=(e,n)=>{const o=n?Dc.Forwards:Dc.Backwards,r=e.selection.getRng();return TL(o,e,r).orThunk(()=>(GN(e,o,r),R.none()))},AL=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return jN(o,e,r).orThunk(()=>(GN(e,o,r),R.none()))},qN=(e,n)=>_L(e,n).exists(o=>(Ig(e,o),!0)),KN=(e,n)=>AL(e,n).exists(o=>(Ig(e,o),!0)),Yx=(e,n)=>QA(e,n,n?sp:op),Xx=(e,n)=>UA(e,!n).map(o=>{const r=o.toRange(),c=e.selection.getRng();return n?r.setStart(c.startContainer,c.startOffset):r.setEnd(c.endContainer,c.endOffset),r}).exists(o=>(Ig(e,o),!0)),YN=e=>ae(["figcaption"],so(e)),OL=(e,n)=>{const o=fe(Ps,n);return Rl(ve.fromDom(e.container()),wa,o).filter(YN)},DL=(e,n,o)=>n?G6(e.dom,o):j6(e.dom,o),RL=(e,n)=>{const o=ve.fromDom(e.getBody()),r=bt.fromRangeStart(e.selection.getRng());return OL(r,o).exists(()=>{if(DL(o,n,r)){const u=d3(e,o,n?na:Xa);return e.selection.setRng(u),!0}else return!1})},XN=(e,n)=>e.selection.isCollapsed()?RL(e,n):!1,JN={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},ML=e=>re(e,n=>({...JN,...n})),vc=e=>re(e,n=>({...JN,...n})),QN=(e,n)=>n.keyCode===e.keyCode&&n.shiftKey===e.shiftKey&&n.altKey===e.altKey&&n.ctrlKey===e.ctrlKey&&n.metaKey===e.metaKey,NL=(e,n)=>eo(ML(e),o=>QN(o,n)?[o]:[]),BL=(e,n)=>eo(vc(e),o=>QN(o,n)?[o]:[]),rs=(e,...n)=>()=>e.apply(null,n),Gb=(e,n)=>ot(NL(e,n),o=>o.action()),h3=(e,n)=>ks(BL(e,n),o=>o.action()),Lg=(e,n)=>{const o=n?Dc.Forwards:Dc.Backwards,r=e.selection.getRng();return jb(e,o,r,Fv,sw,nu).exists(c=>(Ig(e,c),!0))},Jx=(e,n)=>{const o=n?1:-1,r=e.selection.getRng();return Zx(e,o,r,Fv,sw,nu).exists(c=>(Ig(e,c),!0))},p3=(e,n)=>QA(e,n,n?sw:Fv),Qx=lu.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),qb={...Qx,none:e=>Qx.none(e)},tB=(e,n)=>qw(e,n,Ie),qw=(e,n,o)=>eo(va(e),r=>Ri(r,n)?o(r)?[r]:[]:qw(r,n,o)),ek=(e,n,o=kt)=>{if(o(n))return R.none();if(ae(e,so(n)))return R.some(n);const r=c=>Ri(c,"table")||o(c);return Ou(n,e.join(","),r)},Kw=(e,n)=>ek(["td","th"],e,n),Yw=e=>tB(e,"th,td"),km=(e,n)=>fd(e,"table",n),Kb=(e,n,o,r,c=Ie)=>{const u=r===1;if(!u&&o<=0)return qb.first(e[0]);if(u&&o>=e.length-1)return qb.last(e[e.length-1]);{const f=o+r,b=e[f];return c(b)?qb.middle(n,b):Kb(e,n,f,r,c)}},b3=(e,n)=>km(e,n).bind(o=>{const r=Yw(o);return Qn(r,u=>Ps(e,u)).map(u=>({index:u,all:r}))}),nB=(e,n,o)=>b3(e,o).fold(()=>qb.none(e),c=>Kb(c.all,e,c.index,1,n)),$L=(e,n,o)=>b3(e,o).fold(()=>qb.none(),c=>Kb(c.all,e,c.index,-1,n)),oB=e=>fd(e,"[contenteditable]"),sB=(e,n=!1)=>cl(e)?e.dom.isContentEditable:oB(e).fold(he(n),o=>PL(o)==="true"),PL=e=>e.dom.contentEditable,rB=(e,n)=>({left:e.left-n,top:e.top-n,right:e.right+n*2,bottom:e.bottom+n*2,width:e.width+n,height:e.height+n}),FL=(e,n)=>eo(n,o=>{const r=rB(ag(o.getBoundingClientRect()),-1);return[{x:r.left,y:e(r),cell:o},{x:r.right,y:e(r),cell:o}]}),IL=(e,n,o)=>Pe(e,(r,c)=>r.fold(()=>R.some(c),u=>{const f=Math.sqrt(Math.abs(u.x-n)+Math.abs(u.y-o)),b=Math.sqrt(Math.abs(c.x-n)+Math.abs(c.y-o));return R.some(b<f?c:u)}),R.none()),aB=(e,n,o,r,c)=>{const u=Ms(ve.fromDom(o),"td,th,caption").map(b=>b.dom),f=Z(FL(e,u),b=>n(b,c));return IL(f,r,c).map(b=>b.cell)},LL=e=>e.bottom,HL=e=>e.top,zL=(e,n)=>e.y<n,VL=(e,n)=>e.y>n,UL=fe(aB,LL,zL),WL=fe(aB,HL,VL),ZL=(e,n)=>An(n.getClientRects()).bind(o=>UL(e,o.left,o.top)).bind(o=>Zw(K6(o),n)),jL=(e,n)=>Tn(n.getClientRects()).bind(o=>WL(e,o.left,o.top)).bind(o=>Zw(q6(o),n)),GL=(e,n,o)=>o.breakAt.exists(r=>e(n,r).breakAt.isSome()),qL=e=>e.breakType===El.Wrap&&e.positions.length===0,cB=e=>e.breakType===El.Br&&e.positions.length===1,v3=(e,n,o)=>{const r=e(n,o);return qL(r)||!jr(o.getNode())&&cB(r)?!GL(e,n,r):r.breakAt.isNone()},iB=fe(v3,d0),KL=fe(v3,jw),YL=(e,n,o)=>{const r=bt.fromRangeStart(n);return kd(!e,o).exists(c=>c.isEqual(r))},XL=(e,n,o,r)=>{const c=e.selection.getRng(),u=n?1:-1;return eb()&&YL(n,c,o)?(xm(u,e,o,!n,!1).each(f=>{Ig(e,f)}),!0):!1},JL=(e,n,o)=>ZL(n,o).orThunk(()=>An(o.getClientRects()).bind(r=>zx(m0(e,bt.before(n)),r.left))).getOr(bt.before(n)),lB=(e,n,o)=>jL(n,o).orThunk(()=>An(o.getClientRects()).bind(r=>zx(pN(e,bt.after(n)),r.left))).getOr(bt.after(n)),uB=(e,n)=>{const o=n.getNode(e);return Ja(o)?R.some(o):R.none()},dB=(e,n,o)=>{n.undoManager.transact(()=>{const r=e?Dr:os,c=d3(n,ve.fromDom(o),r);Ig(n,c)})},mB=(e,n,o)=>{const r=uB(!!n,o),c=n===!1;r.fold(()=>Ig(e,o.toRange()),u=>kd(c,e.getBody()).filter(f=>f.isEqual(o)).fold(()=>Ig(e,o.toRange()),f=>dB(n,e,u)))},fB=(e,n,o,r)=>{const c=e.selection.getRng(),u=bt.fromRangeStart(c),f=e.getBody();if(!n&&iB(r,u)){const b=JL(f,o,u);return mB(e,n,b),!0}else if(n&&KL(r,u)){const b=lB(f,o,u);return mB(e,n,b),!0}else return!1},y3=(e,n,o)=>R.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(r=>R.from(e.dom.getParent(r,"table")).map(c=>o(e,n,c,r))).getOr(!1),gB=(e,n)=>y3(e,n,XL),hB=(e,n)=>y3(e,n,fB),QL=e=>{const n=kf.exact(e,0,e,0);return bS(n)},w3=(e,n,o)=>o.fold(R.none,R.none,(r,c)=>TF(c).map(u=>QL(u)),r=>(e.execCommand("mceTableInsertRowAfter"),pB(e,n,r))),pB=(e,n,o)=>w3(e,n,nB(o,sB)),e7=(e,n,o)=>w3(e,n,$L(o,sB)),C3=(e,n)=>{const o=["table","li","dl"],r=ve.fromDom(e.getBody()),c=b=>{const y=so(b);return Ps(b,r)||ae(o,y)},u=e.selection.getRng(),f=ve.fromDom(n?u.endContainer:u.startContainer);return Kw(f,c).map(b=>(km(b,c).each(M=>{e.model.table.clearSelectedCells(M.dom)}),e.selection.collapse(!n),(n?pB:e7)(e,c,b).each(M=>{e.selection.setRng(M)}),!0)).getOr(!1)},t7=(e,n,o)=>{const r=us.os.isMacOS()||us.os.isiOS();Gb([{keyCode:Zn.RIGHT,action:rs(qN,e,!0)},{keyCode:Zn.LEFT,action:rs(qN,e,!1)},{keyCode:Zn.UP,action:rs(KN,e,!1)},{keyCode:Zn.DOWN,action:rs(KN,e,!0)},...r?[{keyCode:Zn.UP,action:rs(Xx,e,!1),metaKey:!0,shiftKey:!0},{keyCode:Zn.DOWN,action:rs(Xx,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:Zn.RIGHT,action:rs(gB,e,!0)},{keyCode:Zn.LEFT,action:rs(gB,e,!1)},{keyCode:Zn.UP,action:rs(hB,e,!1)},{keyCode:Zn.DOWN,action:rs(hB,e,!0)},{keyCode:Zn.RIGHT,action:rs(Lg,e,!0)},{keyCode:Zn.LEFT,action:rs(Lg,e,!1)},{keyCode:Zn.UP,action:rs(Jx,e,!1)},{keyCode:Zn.DOWN,action:rs(Jx,e,!0)},{keyCode:Zn.RIGHT,action:rs(e3,e,n,!0)},{keyCode:Zn.LEFT,action:rs(e3,e,n,!1)},{keyCode:Zn.RIGHT,ctrlKey:!r,altKey:r,action:rs(bu,e,n)},{keyCode:Zn.LEFT,ctrlKey:!r,altKey:r,action:rs(iL,e,n)},{keyCode:Zn.UP,action:rs(XN,e,!1)},{keyCode:Zn.DOWN,action:rs(XN,e,!0)}],o).each(c=>{o.preventDefault()})},n7=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||t7(e,n,o)})},$d=(e,n)=>({container:e,offset:n}),tk=yr.DOM,nk=e=>n=>e===n?-1:0,o7=e=>n=>e.isBlock(n)||ae(["BR","IMG","HR","INPUT"],n.nodeName)||e.getContentEditable(n)==="false",ok=(e,n,o)=>{if(Zt(e)&&n>=0)return R.some($d(e,n));{const r=sf(tk);return R.from(r.backwards(e,n,nk(e),o)).map(c=>$d(c.container,c.container.data.length))}},bB=(e,n,o)=>{if(Zt(e)&&n>=e.length)return R.some($d(e,n));{const r=sf(tk);return R.from(r.forwards(e,n,nk(e),o)).map(c=>$d(c.container,0))}},S3=(e,n,o)=>{if(!Zt(e))return R.none();const r=e.data;if(n>=0&&n<=r.length)return R.some($d(e,n));{const c=sf(tk);return R.from(c.backwards(e,n,nk(e),o)).bind(u=>{const f=u.container.data;return S3(u.container,n+f.length,o)})}},vB=(e,n,o)=>{if(!Zt(e))return R.none();const r=e.data;if(n<=r.length)return R.some($d(e,n));{const c=sf(tk);return R.from(c.forwards(e,n,nk(e),o)).bind(u=>vB(u.container,n-r.length,o))}},x3=(e,n,o,r,c)=>{const u=sf(e,o7(e));return R.from(u.backwards(n,o,r,c))},s7=e=>e.collapsed&&Zt(e.startContainer),yB=e=>Ra(e.toString().replace(/\u00A0/g," ")),wB=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,k3=(e,n)=>e.substring(n.length),r7=(e,n,o)=>{let r;const c=o.charAt(0);for(r=n-1;r>=0;r--){const u=e.charAt(r);if(wB(u))return R.none();if(c===u&&oo(e,o,r,n))break}return R.some(r)},kU=(e,n,o,r=0)=>{if(!s7(n))return R.none();const c={text:"",offset:0},u=(b,y,x)=>(c.text=x+c.text,c.offset+=y,r7(c.text,c.offset,o).getOr(y)),f=e.getParent(n.startContainer,e.isBlock)||e.getRoot();return x3(e,n.startContainer,n.startOffset,u,f).bind(b=>{const y=n.cloneRange();if(y.setStart(b.container,b.offset),y.setEnd(n.endContainer,n.endOffset),y.collapsed)return R.none();const x=yB(y);return x.lastIndexOf(o)!==0||k3(x,o).length<r?R.none():R.some({text:k3(x,o),range:y,trigger:o})})},CB=(e,n,o,r=0)=>OF(ve.fromDom(n.startContainer)).fold(()=>kU(e,n,o,r),c=>{const u=e.createRng();u.selectNode(c.dom);const f=yB(u);return R.some({range:u,text:k3(f,o),trigger:o})}),sk=e=>e.nodeType===Un,SB=e=>e.nodeType===dt,T3=e=>{if(sk(e))return $d(e,e.data.length);{const n=e.childNodes;return n.length>0?T3(n[n.length-1]):$d(e,n.length)}},xB=(e,n)=>{const o=e.childNodes;return o.length>0&&n<o.length?xB(o[n],0):o.length>0&&SB(e)&&o.length===n?T3(o[o.length-1]):$d(e,n)},kB=(e,n)=>{var o;const r=(o=e.getParent(n.container,e.isBlock))!==null&&o!==void 0?o:e.getRoot();return x3(e,n.container,n.offset,(c,u)=>u===0?-1:u,r).filter(c=>{const u=c.container.data.charAt(c.offset-1);return!wB(u)}).isSome()},TB=e=>n=>{const o=xB(n.startContainer,n.startOffset);return!kB(e,o)},a7=(e,n,o)=>ks(o.triggers,r=>CB(e,n,r)),c7=(e,n)=>{const o=n(),r=e.selection.getRng();return a7(e.dom,r,o).bind(c=>EB(e,n,c))},EB=(e,n,o,r={})=>{var c;const u=n(),b=(c=e.selection.getRng().startContainer.nodeValue)!==null&&c!==void 0?c:"",y=Z(u.lookupByTrigger(o.trigger),M=>o.text.length>=M.minChars&&M.matches.getOrThunk(()=>TB(e.dom))(o.range,b,o.text));if(y.length===0)return R.none();const x=Promise.all(re(y,M=>M.fetch(o.text,M.maxResults,r).then(L=>({matchText:o.text,items:L,columns:M.columns,onAction:M.onAction,highlightOn:M.highlightOn}))));return R.some({lookupData:x,context:o})};var Pd;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Pd||(Pd={}));const E3=(e,n,o)=>e.stype===Pd.Error?n(e.serror):o(e.svalue),_3=e=>{const n=[],o=[];return H(e,r=>{E3(r,c=>o.push(c),c=>n.push(c))}),{values:n,errors:o}},i7=(e,n)=>e.stype===Pd.Error?{stype:Pd.Error,serror:n(e.serror)}:e,l7=(e,n)=>e.stype===Pd.Value?{stype:Pd.Value,svalue:n(e.svalue)}:e,u7=(e,n)=>e.stype===Pd.Value?n(e.svalue):e,_B=(e,n)=>e.stype===Pd.Error?n(e.serror):e,AB=e=>({stype:Pd.Value,svalue:e}),OB=e=>({stype:Pd.Error,serror:e}),mi={fromResult:e=>e.fold(OB,AB),toResult:e=>E3(e,Si.error,Si.value),svalue:AB,partition:_3,serror:OB,bind:u7,bindError:_B,map:l7,mapError:i7,fold:E3},rc=e=>ht(e)&&ze(e).length>100?" removed due to size":JSON.stringify(e,null,2),Bf=e=>{const n=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:he("... (only showing first ten failures)")}]):e;return re(n,o=>"Failed path: ("+o.path.join(" > ")+`)
`+o.getErrorInfo())},rk=(e,n)=>mi.serror([{path:e,getErrorInfo:n}]),_U=(e,n,o)=>rk(e,()=>'Could not find valid *required* value for "'+n+'" in '+rc(o)),d7=(e,n)=>rk(e,()=>'Choice schema did not contain choice key: "'+n+'"'),m7=(e,n,o)=>rk(e,()=>'The chosen schema: "'+o+'" did not exist in branches: '+rc(n)),f7=(e,n)=>rk(e,he(n)),g7=(e,n,o,r)=>cs(o,r).fold(()=>m7(e,o,r),u=>u.extract(e.concat(["branch: "+r]),n)),DB=(e,n)=>({extract:(c,u)=>cs(u,e).fold(()=>d7(c,e),b=>g7(c,u,n,b)),toString:()=>"chooseOn("+e+"). Possible values: "+ze(n)}),h0=(e,n)=>n,AU=(e,n)=>It(e)&&It(n)?ak(e,n):n,RB=e=>(...n)=>{if(n.length===0)throw new Error("Can't merge zero objects");const o={};for(let r=0;r<n.length;r++){const c=n[r];for(const u in c)go(c,u)&&(o[u]=e(o[u],c[u]))}return o},ak=RB(AU),Tm=RB(h0),MB=()=>({tag:"required",process:{}}),h7=e=>({tag:"defaultedThunk",process:e}),A3=e=>h7(he(e)),p7=()=>({tag:"option",process:{}}),NB=(e,n)=>e.length>0?mi.svalue(ak(n,Tm.apply(void 0,e))):mi.svalue(n),O3=e=>Rt(mi.serror,uo)(e),b7={consolidateObj:(e,n)=>{const o=mi.partition(e);return o.errors.length>0?O3(o.errors):NB(o.values,n)},consolidateArr:e=>{const n=mi.partition(e);return n.errors.length>0?O3(n.errors):mi.svalue(n.values)}},v7=(e,n,o,r)=>({tag:"field",key:e,newKey:n,presence:o,prop:r}),y7=(e,n)=>({tag:"custom",newKey:e,instantiator:n}),$B=(e,n,o)=>{switch(e.tag){case"field":return n(e.key,e.newKey,e.presence,e.prop);case"custom":return o(e.newKey,e.instantiator)}},ck=e=>{const n=(r,c)=>mi.bindError(e(c),u=>f7(r,u)),o=he("val");return{extract:n,toString:o}},PB=ck(mi.svalue),w7=(e,n,o,r)=>cs(n,o).fold(()=>_U(e,o,n),r),D3=(e,n,o,r)=>{const c=cs(e,n).getOrThunk(()=>o(e));return r(c)},C7=(e,n,o)=>o(cs(e,n)),S7=(e,n,o,r)=>{const c=cs(e,n).map(u=>u===!0?o(e):u);return r(c)},x7=(e,n,o,r,c)=>{const u=b=>c.extract(n.concat([r]),b),f=b=>b.fold(()=>mi.svalue(R.none()),y=>{const x=c.extract(n.concat([r]),y);return mi.map(x,R.some)});switch(e.tag){case"required":return w7(n,o,r,u);case"defaultedThunk":return D3(o,r,e.process,u);case"option":return C7(o,r,f);case"defaultedOptionThunk":return S7(o,r,e.process,f);case"mergeWithThunk":return D3(o,r,he({}),b=>{const y=ak(e.process(o),b);return u(y)})}},k7=(e,n,o)=>{const r={},c=[];for(const u of o)$B(u,(f,b,y,x)=>{const M=x7(y,e,n,f,x);mi.fold(M,P=>{c.push(...P)},P=>{r[b]=P})},(f,b)=>{r[f]=b(n)});return c.length>0?mi.serror(c):mi.svalue(r)},ik=e=>({extract:(r,c)=>k7(r,c,e),toString:()=>`obj{
`+re(e,c=>$B(c,(u,f,b,y)=>u+" -> "+y.toString(),(u,f)=>"state("+u+")")).join(`
`)+"}"}),lk=e=>({extract:(r,c)=>{const u=re(c,(f,b)=>e.extract(r.concat(["["+b+"]"]),f));return b7.consolidateArr(u)},toString:()=>"array("+e.toString()+")"}),FB=e=>ck(n=>e(n).fold(mi.serror,mi.svalue)),T7=(e,n,o)=>{const r=n.extract([e],o);return mi.mapError(r,c=>({input:o,errors:c}))},E7=(e,n,o)=>mi.toResult(T7(e,n,o)),R3=e=>`Errors: 
`+Bf(e.errors).join(`
`)+`

Input object: `+rc(e.input),M3=(e,n)=>DB(e,qt(n,ik)),DU=he(PB),N3=(e,n)=>ck(o=>{const r=typeof o;return e(o)?mi.svalue(o):mi.serror(`Expected type: ${n} but got: ${r}`)}),RU=N3(at,"number"),uk=N3(Q,"string"),MU=N3(Ot,"boolean"),B3=N3(ee,"function"),Xw=v7,_7=y7,A7=e=>FB(n=>ae(e,n)?Si.value(n):Si.error(`Unsupported value: "${n}", choose one of "${e.join(", ")}".`)),ki=(e,n)=>Xw(e,e,MB(),n),dk=e=>ki(e,uk),Em=e=>ki(e,B3),IB=(e,n)=>Xw(e,e,MB(),lk(n)),mk=(e,n)=>Xw(e,e,p7(),n),fk=e=>mk(e,uk),$3=e=>mk(e,B3),P3=(e,n)=>Xw(e,e,A3(n),DU()),Yb=(e,n,o)=>Xw(e,e,A3(n),o),F3=(e,n)=>Yb(e,n,RU),O7=(e,n)=>Yb(e,n,uk),LB=(e,n,o)=>Yb(e,n,A7(o)),I3=(e,n)=>Yb(e,n,MU),L3=(e,n)=>Yb(e,n,B3),D7=(e,n,o)=>Yb(e,n,lk(o)),HB=dk("type"),R7=Em("fetch"),H3=Em("onAction"),M7=L3("onSetup",()=>Me),N7=fk("text"),B7=fk("icon"),$7=fk("tooltip"),zB=fk("label"),P7=I3("active",!1),F7=I3("enabled",!0),I7=I3("primary",!1),z3=e=>P3("columns",e),Jw=e=>O7("type",e),L7=ik([HB,dk("trigger"),F3("minChars",1),z3(1),F3("maxResults",10),$3("matches"),R7,H3,D7("highlightOn",[],uk)]),H7=e=>E7("Autocompleter",L7,{trigger:e.ch,...e}),Xb=[F7,$7,B7,N7,M7],$f=[P7].concat(Xb),Jb=[L3("predicate",kt),LB("scope","node",["node","editor"]),LB("position","selection",["node","selection","line"])],gk=Xb.concat([Jw("contextformbutton"),I7,H3,_7("original",Ue)]),V3=$f.concat([Jw("contextformbutton"),I7,H3,_7("original",Ue)]),U3=Xb.concat([Jw("contextformbutton")]),VB=$f.concat([Jw("contextformtogglebutton")]),z7=M3("type",{contextformbutton:gk,contextformtogglebutton:V3});ik([Jw("contextform"),L3("initValue",he("")),zB,IB("commands",z7),mk("launch",M3("type",{contextformbutton:U3,contextformtogglebutton:VB}))].concat(Jb));const UB=e=>{const n=e.ui.registry.getAll().popups,o=qt(n,f=>H7(f).fold(b=>{throw new Error(R3(b))},Ue)),r=Hs(wc(o,f=>f.trigger)),c=ys(o);return{dataset:o,triggers:r,lookupByTrigger:f=>Z(c,b=>b.trigger===f)}},WB=(e,n)=>{const o=B1(n.load,50);e.on("keypress compositionend",r=>{r.which!==27&&o.throttle()}),e.on("keydown",r=>{const c=r.which;c===8?o.throttle():c===27&&n.cancelIfNecessary()}),e.on("remove",o.cancel)},V7=e=>{const n=nf(),o=fc(!1),r=n.isSet,c=()=>{r()&&(x8(e),iS(e),o.set(!1),n.clear())},u=x=>{r()||(S8(e,x.range),n.set({trigger:x.trigger,matchLength:x.text.length}))},f=to(()=>UB(e)),b=x=>n.get().map(M=>CB(e.dom,e.selection.getRng(),M.trigger).bind(P=>EB(e,f,P,x))).getOrThunk(()=>c7(e,f)),y=x=>{b(x).fold(c,M=>{u(M.context),M.lookupData.then(P=>{n.get().map(L=>{const ce=M.context;L.trigger===ce.trigger&&(ce.text.length-L.matchLength>=10?c():(n.set({...L,matchLength:ce.text.length}),o.get()?cS(e,{lookupData:P}):(o.set(!0),Wy(e,{lookupData:P}))))})})})};e.addCommand("mceAutocompleterReload",(x,M)=>{const P=ht(M)?M.fetchOptions:{};y(P)}),e.addCommand("mceAutocompleterClose",c),WB(e,{cancelIfNecessary:c,load:y})},ZB=e=>(n,o,r={})=>{const c=n.getBody(),u={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:c,currentTarget:c,eventPhase:Event.AT_TARGET,originalTarget:c,explicitOriginalTarget:c,isTrusted:!1,srcElement:c,cancelable:!1,preventDefault:Me,inputType:o},f=A1(new InputEvent(e));return n.dispatch(e,{...f,...u,...r})},W3=ZB("input"),Z3=ZB("beforeinput"),U7=(e,n,o)=>{const r=o.keyCode===Zn.BACKSPACE?"deleteContentBackward":"deleteContentForward";h3([{keyCode:Zn.BACKSPACE,action:rs(IN,e)},{keyCode:Zn.BACKSPACE,action:rs(ZA,e,!1)},{keyCode:Zn.DELETE,action:rs(ZA,e,!0)},{keyCode:Zn.BACKSPACE,action:rs(VA,e,!1)},{keyCode:Zn.DELETE,action:rs(VA,e,!0)},{keyCode:Zn.BACKSPACE,action:rs(n3,e,n,!1)},{keyCode:Zn.DELETE,action:rs(n3,e,n,!0)},{keyCode:Zn.BACKSPACE,action:rs(LS,e,!1)},{keyCode:Zn.DELETE,action:rs(LS,e,!0)},{keyCode:Zn.BACKSPACE,action:rs(pu,e,!1)},{keyCode:Zn.DELETE,action:rs(pu,e,!0)},{keyCode:Zn.BACKSPACE,action:rs(BN,e,!1)},{keyCode:Zn.DELETE,action:rs(BN,e,!0)},{keyCode:Zn.BACKSPACE,action:rs(l0,e,!1)},{keyCode:Zn.DELETE,action:rs(l0,e,!0)},{keyCode:Zn.BACKSPACE,action:rs(HA,e,!1)},{keyCode:Zn.DELETE,action:rs(HA,e,!0)},{keyCode:Zn.BACKSPACE,action:rs(o3,e,!1)},{keyCode:Zn.DELETE,action:rs(o3,e,!0)}],o).each(c=>{o.preventDefault(),Z3(e,r).isDefaultPrevented()||(c(),W3(e,r))})},W7=(e,n)=>{Gb([{keyCode:Zn.BACKSPACE,action:rs(lN,e)},{keyCode:Zn.DELETE,action:rs(lN,e)}],n)},jB=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||U7(e,n,o)}),e.on("keyup",o=>{o.isDefaultPrevented()||W7(e,o)})},GB=e=>{for(;e;){if($n(e)||Zt(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},hk=(e,n)=>{const o=e.dom,r=e.schema.getMoveCaretBeforeOnEnterElements();if(!n)return;if(/^(LI|DT|DD)$/.test(n.nodeName)){const u=GB(n.firstChild);u&&/^(UL|OL|DL)$/.test(u.nodeName)&&n.insertBefore(o.doc.createTextNode(ia),n.firstChild)}const c=o.createRng();if(n.normalize(),n.hasChildNodes()){const u=new ya(n,n);let f=n,b;for(;b=u.current();){if(Zt(b)){c.setStart(b,0),c.setEnd(b,0);break}if(r[b.nodeName.toLowerCase()]){c.setStartBefore(b),c.setEndBefore(b);break}f=b,b=u.next()}b||(c.setStart(f,0),c.setEnd(f,0))}else jr(n)?n.nextSibling&&o.isBlock(n.nextSibling)?(c.setStartBefore(n),c.setEndBefore(n)):(c.setStartAfter(n),c.setEndAfter(n)):(c.setStart(n,0),c.setEnd(n,0));e.selection.setRng(c),Jt(e,c)},j3=(e,n)=>{const o=e.getRoot();let r,c=n;for(;c!==o&&c&&e.getContentEditable(c)!=="false";)e.getContentEditable(c)==="true"&&(r=c),c=c.parentNode;return c!==o?r:o},qB=e=>R.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),Z7=e=>qB(e).fold(he(""),n=>n.nodeName.toUpperCase()),NU=e=>qB(e).filter(n=>qi(ve.fromDom(n))).isSome(),BU=(e,n)=>e.firstChild&&e.firstChild.nodeName===n,j7=e=>{var n;return((n=e.parentNode)===null||n===void 0?void 0:n.firstChild)===e},KB=(e,n)=>{const o=e==null?void 0:e.parentNode;return ye(o)&&o.nodeName===n},G7=e=>ye(e)&&/^(OL|UL|LI)$/.test(e.nodeName),q7=e=>ye(e)&&/^(LI|DT|DD)$/.test(e.nodeName),Fd=e=>G7(e)&&G7(e.parentNode),Qw=e=>{const n=e.parentNode;return q7(n)?n:e},pk=(e,n,o)=>{let r=e[o?"firstChild":"lastChild"];for(;r&&!$n(r);)r=r[o?"nextSibling":"previousSibling"];return r===n},YB=(e,n,o,r,c)=>{const u=e.dom,f=e.selection.getRng(),b=o.parentNode;if(o===e.getBody()||!b)return;Fd(o)&&(c="LI");let y=n(c);if(pk(o,r,!0)&&pk(o,r,!1))if(KB(o,"LI")){const x=Qw(o);u.insertAfter(y,x),j7(o)?u.remove(x):u.remove(o)}else u.replace(y,o);else if(pk(o,r,!0))KB(o,"LI")?(u.insertAfter(y,Qw(o)),y.appendChild(u.doc.createTextNode(" ")),y.appendChild(o)):b.insertBefore(y,o),u.remove(r);else if(pk(o,r,!1))u.insertAfter(y,Qw(o)),u.remove(r);else{o=Qw(o);const x=f.cloneRange();x.setStartAfter(r),x.setEndAfter(o);const M=x.extractContents();c==="LI"&&BU(M,"LI")?(y=M.firstChild,u.insertAfter(M,o)):(u.insertAfter(M,o),u.insertAfter(y,o)),u.remove(r)}hk(e,y)},K7=e=>{H(Vm(ve.fromDom(e),Ds),n=>{const o=n.dom;o.nodeValue=Ra(o.data)})},Y7=(e,n)=>{const o=e.dom.getParent(n,"ol,ul,dl");return o!==null&&e.dom.getContentEditableParent(o)==="false"},$U=(e,n)=>n&&n.nodeName==="A"&&e.isEmpty(n),Kc=e=>{e.innerHTML='<br data-mce-bogus="1">'},G3=(e,n)=>e.nodeName===n||e.previousSibling&&e.previousSibling.nodeName===n,XB=(e,n)=>ye(n)&&e.isBlock(n)&&!/^(TD|TH|CAPTION|FORM)$/.test(n.nodeName)&&!/^(fixed|absolute)/i.test(n.style.position)&&e.getContentEditable(n)!=="true",X7=(e,n,o)=>{var r;const c=[];if(!o)return;let u=o;for(;u=u.firstChild;){if(e.isBlock(u))return;$n(u)&&!n[u.nodeName.toLowerCase()]&&c.push(u)}let f=c.length;for(;f--;)u=c[f],(!u.hasChildNodes()||u.firstChild===u.lastChild&&((r=u.firstChild)===null||r===void 0?void 0:r.nodeValue)===""||$U(e,u))&&e.remove(u)},q3=(e,n,o)=>Zt(n)?e?o===1&&n.data.charAt(o-1)===Sr?0:o:o===n.data.length-1&&n.data.charAt(o)===Sr?n.data.length:o:o,J7=e=>{const n=e.cloneRange();return n.setStart(e.startContainer,q3(!0,e.startContainer,e.startOffset)),n.setEnd(e.endContainer,q3(!1,e.endContainer,e.endOffset)),n},Q7=e=>{let n=e;do Zt(n)&&(n.data=n.data.replace(/^[\r\n]+/,"")),n=n.firstChild;while(n)},eH=(e,n,o)=>{const r=e.dom;R.from(o.style).map(r.parseStyle).each(y=>{const M={...ns(ve.fromDom(n)),...y};r.setStyles(n,M)});const c=R.from(o.class).map(y=>y.split(/\s+/)),u=R.from(n.className).map(y=>Z(y.split(/\s+/),x=>x!==""));Zr(c,u,(y,x)=>{const M=Z(x,L=>!ae(y,L)),P=[...y,...M];r.setAttrib(n,"class",P.join(" "))});const f=["style","class"],b=bs(o,(y,x)=>!ae(f,x));r.setAttribs(n,b)},eC=(e,n)=>{if(wl(e).toLowerCase()===n.tagName.toLowerCase()){const r=Gp(e);eH(e,n,r)}},tH=(e,n,o,r,c)=>{var u;const f=e.dom,b=(u=j3(f,r))!==null&&u!==void 0?u:f.getRoot();let y=f.getParent(r,f.isBlock);if(!y||!XB(f,y)){y=y||b;let x;if(y===e.getBody()||p1(y)?x=y.nodeName.toLowerCase():y.parentNode?x=y.parentNode.nodeName.toLowerCase():x="",!y.hasChildNodes()){const L=f.create(n);return eC(e,L),y.appendChild(L),o.setStart(L,0),o.setEnd(L,0),L}let M=r;for(;M&&M.parentNode!==y;)M=M.parentNode;let P;for(;M&&!f.isBlock(M);)P=M,M=M.previousSibling;if(P&&e.schema.isValidChild(x,n.toLowerCase())){const L=P.parentNode,ce=f.create(n);for(eC(e,ce),L.insertBefore(ce,P),M=P;M&&!f.isBlock(M);){const ie=M.nextSibling;ce.appendChild(M),M=ie}o.setStart(r,c),o.setEnd(r,c)}}return r},K3=(e,n)=>{n.normalize();const o=n.lastChild;(!o||$n(o)&&/^(left|right)$/gi.test(e.getStyle(o,"float",!0)))&&e.add(n,"br")},Y3=(e,n)=>{const o=hc(e);return $t(n)?!1:Q(o)?ae(Dt.explode(o),n.nodeName.toLowerCase()):o},nH={insert:(e,n)=>{let o,r,c,u,f=!1;const b=e.dom,y=e.schema,x=y.getNonEmptyElements(),M=e.selection.getRng(),P=wl(e),L=gn=>{let en=o;const ut=y.getTextInlineElements();let Je;gn||c==="TABLE"||c==="HR"?Je=b.create(gn||P):Je=De.cloneNode(!1);let Rn=Je;if(NT(e)===!1)b.setAttrib(Je,"style",null),b.setAttrib(Je,"class",null);else do if(ut[en.nodeName]){if(xl(en)||Rc(en))continue;const co=en.cloneNode(!1);b.setAttrib(co,"id",""),Je.hasChildNodes()?(co.appendChild(Je.firstChild),Je.appendChild(co)):(Rn=co,Je.appendChild(co))}while((en=en.parentNode)&&en!==Be);return eC(e,Je),Kc(Rn),Je},ce=gn=>{const en=q3(gn,o,r);if(Zt(o)&&(gn?en>0:en<o.data.length))return!1;if(o.parentNode===De&&f&&!gn||gn&&$n(o)&&o===De.firstChild)return!0;if(G3(o,"TABLE")||G3(o,"HR"))return f&&!gn||!f&&gn;const ut=new ya(o,De);Zt(o)&&(gn&&en===0?ut.prev():!gn&&en===o.data.length&&ut.next());let Je;for(;Je=ut.current();){if($n(Je)){if(!Je.getAttribute("data-mce-bogus")){const Rn=Je.nodeName.toLowerCase();if(x[Rn]&&Rn!=="br")return!1}}else if(Zt(Je)&&!Nl(Je.data))return!1;gn?ut.prev():ut.next()}return!0},ie=()=>{let gn;return/^(H[1-6]|PRE|FIGURE)$/.test(c)&&Ge!=="HGROUP"?gn=L(P):gn=L(),Y3(e,u)&&XB(b,u)&&b.isEmpty(De)?gn=b.split(u,De):b.insertAfter(gn,De),hk(e,gn),gn};Rv(b,M).each(gn=>{M.setStart(gn.startContainer,gn.startOffset),M.setEnd(gn.endContainer,gn.endOffset)}),o=M.startContainer,r=M.startOffset;const te=!!(n&&n.shiftKey),ue=!!(n&&n.ctrlKey);$n(o)&&o.hasChildNodes()&&(f=r>o.childNodes.length-1,o=o.childNodes[Math.min(r,o.childNodes.length-1)]||o,f&&Zt(o)?r=o.data.length:r=0);const Be=j3(b,o);if(!Be||Y7(e,o))return;te||(o=tH(e,P,M,o,r));let De=b.getParent(o,b.isBlock)||b.getRoot();u=ye(De==null?void 0:De.parentNode)?b.getParent(De.parentNode,b.isBlock):null,c=De?De.nodeName.toUpperCase():"";const Ge=u?u.nodeName.toUpperCase():"";if(Ge==="LI"&&!ue){const gn=u;De=gn,u=gn.parentNode,c=Ge}if(/^(LI|DT|DD)$/.test(c)&&$n(u)&&b.isEmpty(De)){YB(e,L,u,De,P);return}if(De===e.getBody())return;const et=De.parentNode;let Tt;if(k(De))Tt=nr(De),b.isEmpty(De)&&Kc(De),eC(e,Tt),hk(e,Tt);else if(ce(!1))Tt=ie();else if(ce(!0)&&et)Tt=et.insertBefore(L(),De),hk(e,G3(De,"HR")?Tt:De);else{const gn=J7(M).cloneRange();gn.setEndAfter(De);const en=gn.extractContents();K7(en),Q7(en),Tt=en.firstChild,b.insertAfter(en,De),X7(b,x,Tt),K3(b,De),b.isEmpty(De)&&Kc(De),Tt.normalize(),b.isEmpty(Tt)?(b.remove(Tt),ie()):(eC(e,Tt),hk(e,Tt))}b.setAttrib(Tt,"id",""),e.dispatch("NewBlock",{newBlock:Tt})},fakeEventName:"insertParagraph"},oH=(e,n,o)=>{const r=new ya(n,o);let c;const u=e.getNonEmptyElements();for(;c=r.next();)if(u[c.nodeName.toLowerCase()]||Zt(c)&&c.length>0)return!0;return!1},JB=(e,n,o)=>{const r=e.dom.createRng();o?(r.setStartBefore(n),r.setEndBefore(n)):(r.setStartAfter(n),r.setEndAfter(n)),e.selection.setRng(r),Jt(e,r)},FU=(e,n)=>{const o=e.selection,r=e.dom,c=o.getRng();let u,f=!1;Rv(r,c).each(ce=>{c.setStart(ce.startContainer,ce.startOffset),c.setEnd(ce.endContainer,ce.endOffset)});let b=c.startOffset,y=c.startContainer;if($n(y)&&y.hasChildNodes()){const ce=b>y.childNodes.length-1;y=y.childNodes[Math.min(b,y.childNodes.length-1)]||y,ce&&Zt(y)?b=y.data.length:b=0}let x=r.getParent(y,r.isBlock);const M=x&&x.parentNode?r.getParent(x.parentNode,r.isBlock):null,P=M?M.nodeName.toUpperCase():"",L=!!(n&&n.ctrlKey);P==="LI"&&!L&&(x=M),Zt(y)&&b>=y.data.length&&(oH(e.schema,y,x||r.getRoot())||(u=r.create("br"),c.insertNode(u),c.setStartAfter(u),c.setEndAfter(u),f=!0)),u=r.create("br"),H1(r,c,u),JB(e,u,f),e.undoManager.add()},sH=(e,n)=>{const o=ve.fromTag("br");os(ve.fromDom(n),o),e.undoManager.add()},Hg=(e,n)=>{aH(e.getBody(),n)||Dr(ve.fromDom(n),ve.fromTag("br"));const o=ve.fromTag("br");Dr(ve.fromDom(n),o),JB(e,o.dom,!1),e.undoManager.add()},rH=e=>jr(e.getNode()),aH=(e,n)=>rH(bt.after(n))?!0:xi(e,bt.after(n)).map(o=>jr(o.getNode())).getOr(!1),zg=e=>e&&e.nodeName==="A"&&"href"in e,cH=e=>e.fold(kt,zg,zg,kt),QB=e=>{const n=fe(_b,e),o=bt.fromRangeStart(e.selection.getRng());return Mf(n,e.getBody(),o).filter(cH)},iH=(e,n)=>{n.fold(Me,fe(sH,e),fe(Hg,e),Me)},e$={insert:(e,n)=>{const o=QB(e);o.isSome()?o.each(fe(iH,e)):FU(e,n)},fakeEventName:"insertLineBreak"},t$=(e,n)=>qB(e).filter(o=>n.length>0&&Ri(ve.fromDom(o),n)).isSome(),lH=e=>t$(e,h2(e)),uH=e=>t$(e,mn(e)),jl=lu.generate([{br:[]},{block:[]},{none:[]}]),n$=(e,n)=>uH(e),tC=e=>(n,o)=>NU(n)===e,o$=(e,n)=>(o,r)=>Z7(o)===e.toUpperCase()===n,dH=e=>{const n=j3(e.dom,e.selection.getStart());return $t(n)},nC=e=>o$("pre",e),mH=()=>o$("summary",!0),bk=e=>(n,o)=>RT(n)===e,s$=(e,n)=>lH(e),vk=(e,n)=>n,r$=e=>{const n=wl(e),o=j3(e.dom,e.selection.getStart());return ye(o)&&e.schema.isValidChild(o.nodeName,n)},ed=(e,n)=>(o,r)=>Pe(e,(u,f)=>u&&f(o,r),!0)?R.some(n):R.none(),fH=(e,n)=>qA([ed([n$],jl.none()),ed([nC(!0),dH],jl.none()),ed([mH()],jl.br()),ed([nC(!0),bk(!1),vk],jl.br()),ed([nC(!0),bk(!1)],jl.block()),ed([nC(!0),bk(!0),vk],jl.block()),ed([nC(!0),bk(!0)],jl.br()),ed([tC(!0),vk],jl.br()),ed([tC(!0)],jl.block()),ed([s$],jl.br()),ed([vk],jl.br()),ed([r$],jl.block())],[e,!!(n&&n.shiftKey)]).getOr(jl.none()),yk=(e,n,o)=>{n.selection.isCollapsed()||p5(n),!(ye(o)&&Z3(n,e.fakeEventName).isDefaultPrevented())&&(e.insert(n,o),ye(o)&&W3(n,e.fakeEventName))},wk=(e,n)=>{const o=()=>yk(e$,e,n),r=()=>yk(nH,e,n),c=fH(e,n);switch(MT(e)){case"linebreak":c.fold(o,o,Me);break;case"block":c.fold(r,r,Me);break;case"invert":c.fold(r,o,Me);break;default:c.fold(o,r,Me);break}},gH=(e,n)=>{n.isDefaultPrevented()||(n.preventDefault(),JI(e.undoManager),e.undoManager.transact(()=>{wk(e,n)}))},hH=e=>{e.on("keydown",n=>{n.keyCode===Zn.ENTER&&gH(e,n)})},a$=(e,n,o)=>{const r=us.os.isMacOS()||us.os.isiOS();Gb([{keyCode:Zn.END,action:rs(Yx,e,!0)},{keyCode:Zn.HOME,action:rs(Yx,e,!1)},...r?[]:[{keyCode:Zn.HOME,action:rs(Xx,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:Zn.END,action:rs(Xx,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:Zn.END,action:rs(p3,e,!0)},{keyCode:Zn.HOME,action:rs(p3,e,!1)},{keyCode:Zn.END,action:rs(g0,e,!0,n)},{keyCode:Zn.HOME,action:rs(g0,e,!1,n)}],o).each(c=>{o.preventDefault()})},X3=(e,n)=>{e.on("keydown",o=>{o.isDefaultPrevented()||a$(e,n,o)})},c$=e=>{e.on("input",n=>{n.isComposing||e5(e)})},pH=Pr(),HU=(e,n,o)=>{Gb([{keyCode:Zn.PAGE_UP,action:rs(g0,e,!1,n)},{keyCode:Zn.PAGE_DOWN,action:rs(g0,e,!0,n)}],o)},gp=e=>e.stopImmediatePropagation(),i$=e=>e.keyCode===Zn.PAGE_UP||e.keyCode===Zn.PAGE_DOWN,l$=(e,n,o)=>{o&&!e.get()?n.on("NodeChange",gp,!0):!o&&e.get()&&n.off("NodeChange",gp),e.set(o)},bH=(e,n)=>{if(pH.os.isMacOS())return;const o=fc(!1);e.on("keydown",r=>{i$(r)&&l$(o,e,!0)}),e.on("keyup",r=>{r.isDefaultPrevented()||HU(e,n,r),i$(r)&&o.get()&&(l$(o,e,!1),e.nodeChanged())})},oC=(e,n)=>{const o=n.container(),r=n.offset();return Zt(o)?(o.insertData(r,e),R.some(bt(o,r+e.length))):Fh(n).map(c=>{const u=ve.fromText(e);return n.isAtEnd()?Dr(c,u):os(c,u),bt(u.dom,e.length)})},u$=fe(oC,ia),d$=fe(oC," "),vH=e=>n=>n.fold(o=>Sl(e.dom,bt.before(o)),o=>Pi(o),o=>Td(o),o=>xi(e.dom,bt.after(o))),m$=(e,n)=>o=>JF(e,o)?u$(n):d$(n),yH=e=>n=>(e.selection.setRng(n.toRange()),e.nodeChanged(),!0),wH=e=>{const n=bt.fromRangeStart(e.selection.getRng()),o=ve.fromDom(e.getBody());if(e.selection.isCollapsed()){const r=fe(_b,e),c=bt.fromRangeStart(e.selection.getRng());return Mf(r,e.getBody(),c).bind(vH(o)).map(u=>()=>m$(o,n)(u).each(yH(e)))}else return R.none()},CH=(e,n)=>{h3([{keyCode:Zn.SPACEBAR,action:rs(wH,e)}],n).each(o=>{n.preventDefault(),Z3(e,"insertText",{data:" "}).isDefaultPrevented()||(o(),W3(e,"insertText",{data:" "}))})},f$=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||CH(e,n)})},J3=e=>XT(e)?[{keyCode:Zn.TAB,action:rs(C3,e,!0)},{keyCode:Zn.TAB,shiftKey:!0,action:rs(C3,e,!1)}]:[],SH=(e,n)=>{Gb([...J3(e)],n).each(o=>{n.preventDefault()})},Q3=e=>{e.on("keydown",n=>{n.isDefaultPrevented()||SH(e,n)})},g$=e=>{if(e.addShortcut("Meta+P","","mcePrint"),V7(e),Of(e))return fc(null);{const n=cL(e);return g3(e),n7(e,n),jB(e,n),hH(e),f$(e),c$(e),Q3(e),X3(e,n),bH(e,n),n}};class Ck{constructor(n){this.lastPath=[],this.editor=n;let o;const r=this;"onselectionchange"in n.getDoc()||n.on("NodeChange click mouseup keyup focus",c=>{const u=n.selection.getRng(),f={startContainer:u.startContainer,startOffset:u.startOffset,endContainer:u.endContainer,endOffset:u.endOffset};(c.type==="nodechange"||!Yy(f,o))&&n.dispatch("SelectionChange"),o=f}),n.on("contextmenu",()=>{n.dispatch("SelectionChange")}),n.on("SelectionChange",()=>{const c=n.selection.getStart(!0);c&&ms(n)&&!r.isSameElementPath(c)&&n.dom.isChildOf(c,n.getBody())&&n.nodeChanged({selectionChange:!0})}),n.on("mouseup",c=>{!c.isDefaultPrevented()&&ms(n)&&(n.selection.getNode().nodeName==="IMG"?Ii.setEditorTimeout(n,()=>{n.nodeChanged()}):n.nodeChanged())})}nodeChanged(n={}){const o=this.editor.selection;let r;if(this.editor.initialized&&o&&!ii(this.editor)&&!this.editor.mode.isReadOnly()){const c=this.editor.getBody();r=o.getStart(!0)||c,(r.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(r,c))&&(r=c);const u=[];this.editor.dom.getParent(r,f=>f===c?!0:(u.push(f),!1)),this.editor.dispatch("NodeChange",{...n,element:r,parents:u})}}isSameElementPath(n){let o;const r=this.editor,c=ao(r.dom.getParents(n,Ie,r.getBody()));if(c.length===this.lastPath.length){for(o=c.length;o>=0&&c[o]===this.lastPath[o];o--);if(o===-1)return this.lastPath=c,!0}return this.lastPath=c,!1}}const e4="x-tinymce/html",sC=he(e4),t4="<!-- "+e4+" -->",xH=e=>t4+e,Sk=e=>e.replace(t4,""),h$=e=>e.indexOf(t4)!==-1,kH=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),TH=(e,n)=>{let o="<"+e;const r=wc(n,(c,u)=>u+'="'+tc.encodeAllRaw(c)+'"');return r.length&&(o+=" "+r.join(" ")),o+">"},EH=(e,n,o)=>{const r=e.split(/\n\n/),c=TH(n,o),u="</"+n+">",f=re(r,y=>y.split(/\n/).join("<br />")),b=y=>c+y+u;return f.length===1?f[0]:re(f,b).join("")},p$="%MCEPASTEBIN%",_H=(e,n)=>{const{dom:o,selection:r}=e,c=e.getBody();n.set(r.getRng());const u=o.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},p$);us.browser.isFirefox()&&o.setStyle(u,"left",o.getStyle(c,"direction",!0)==="rtl"?65535:-65535),o.bind(u,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),u.focus(),r.select(u,!0)},AH=(e,n)=>{const o=e.dom;if(n4(e)){let r;const c=n.get();for(;r=n4(e);)o.remove(r),o.unbind(r);c&&e.selection.setRng(c)}n.set(null)},n4=e=>e.dom.get("mcepastebin"),p0=e=>ye(e)&&e.id==="mcepastebin",OH=e=>{const n=e.dom,o=(f,b)=>{f.appendChild(b),n.remove(b,!0)},[r,...c]=Z(e.getBody().childNodes,p0);H(c,f=>{o(r,f)});const u=n.select("div[id=mcepastebin]",r);for(let f=u.length-1;f>=0;f--){const b=n.create("div");r.insertBefore(b,u[f]),o(b,u[f])}return r?r.innerHTML:""},b$=e=>e===p$,v$=e=>{const n=fc(null);return{create:()=>_H(e,n),remove:()=>AH(e,n),getEl:()=>n4(e),getHtml:()=>OH(e),getLastRng:n.get}},y$=(e,n)=>(Dt.each(n,o=>{Te(o,RegExp)?e=e.replace(o,""):e=e.replace(o[0],o[1])}),e),DH=e=>{const n=Pu(),o=mu({},n);let r="";const c=n.getVoidElements(),u=Dt.makeMap("script noscript style textarea video audio iframe object"," "),f=n.getBlockElements(),b=y=>{const x=y.name,M=y;if(x==="br"){r+=`
`;return}if(x!=="wbr"){if(c[x]&&(r+=" "),u[x]){r+=" ";return}if(y.type===3&&(r+=y.value),!(y.name in n.getVoidElements())){let P=y.firstChild;if(P)do b(P);while(P=P.next)}f[x]&&M.next&&(r+=`
`,x==="p"&&(r+=`
`))}};return e=y$(e,[/<!\[[^\]]+\]>/g]),b(o.parse(e)),r},w$=e=>(e=y$(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(o,r,c)=>!r&&!c?" ":ia],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),C$=e=>{let n=0;return()=>e+n++},RH=e=>{const n=e.toLowerCase(),o={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Dt.hasOwn(o,n)?"image/"+o[n]:"image/"+n},MH=(e,n)=>{const o=mu({},e.schema);o.addNodeFilter("meta",c=>{Dt.each(c,u=>{u.remove()})});const r=o.parse(n,{forced_root_block:!1,isRootContent:!0});return tp({validate:!0},e.schema).serialize(r)},NH=(e,n)=>({content:e,cancelled:n}),xk=(e,n,o)=>{const r=e.dom.create("div",{style:"display:none"},n),c=Zy(e,r,o);return NH(c.node.innerHTML,c.isDefaultPrevented())},BH=(e,n,o)=>{const r=_v(e,n,o),c=MH(e,r.content);return e.hasEventListeners("PastePostProcess")&&!r.isDefaultPrevented()?xk(e,c,o):NH(c,r.isDefaultPrevented())},$H=(e,n,o)=>BH(e,n,o),o4=(e,n)=>(e.insertContent(n,{merge:dy(e),paste:!0}),!0),s4=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),PH=(e,n)=>s4(n)&&se(fy(e),o=>Os(n.toLowerCase(),`.${o.toLowerCase()}`)),FH=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.insertContent('<img src="'+n+'">')}),!0),IH=(e,n,o)=>(e.undoManager.extra(()=>{o(e,n)},()=>{e.execCommand("mceInsertLink",!1,n)}),!0),LH=(e,n,o)=>!e.selection.isCollapsed()&&s4(n)?IH(e,n,o):!1,HH=(e,n,o)=>PH(e,n)?FH(e,n,o):!1,zH=(e,n)=>{Dt.each([LH,HH,o4],o=>!o(e,n,o4))},VH=(e,n,o)=>{o||!T2(e)?o4(e,n):zH(e,n)},UH=C$("mceclip"),S$=(e,n,o,r)=>{const c=$H(e,n,o);c.cancelled||VH(e,c.content,r)},fr=(e,n,o)=>{const r=o||h$(n);S$(e,Sk(n),r,!1)},r4=(e,n)=>{const o=e.dom.encode(n).replace(/\r\n/g,`
`),r=Ep(o,_2(e)),c=EH(r,wl(e),Gp(e));S$(e,c,!1,!0)},a4=e=>{const n={};if(e&&e.types)for(let o=0;o<e.types.length;o++){const r=e.types[o];try{n[r]=e.getData(r)}catch{n[r]=""}}return n},b0=(e,n)=>n in e&&e[n].length>0,kk=e=>b0(e,"text/html")||b0(e,"text/plain"),x$=(e,n)=>{const o=n.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return ye(o)?e.dom.encode(o[1]):void 0},k$=(e,n,o,r)=>{const c=UH(),u=ey(e)&&ye(o.name),f=u?x$(e,o.name):c,b=u?o.name:void 0,y=n.create(c,o,r,f,b);return n.add(y),y},WH=(e,n)=>{o0(n.uri).each(({data:o,type:r,base64Encoded:c})=>{const u=c?o:btoa(o),f=n.file,b=e.editorUpload.blobCache,y=b.getByData(u,r),x=y??k$(e,b,f,u);fr(e,`<img src="${x.blobUri()}">`,!1)})},T$=e=>e.type==="paste",ZH=e=>Promise.all(re(e,n=>dx(n).then(o=>({file:n,uri:o})))),jH=e=>{const n=fy(e);return o=>wo(o.type,"image/")&&se(n,r=>RH(r)===o.type)},E$=(e,n)=>{const o=n.items?eo(Do(n.items),c=>c.kind==="file"?[c.getAsFile()]:[]):[],r=n.files?Do(n.files):[];return Z(o.length>0?o:r,jH(e))},_$=(e,n,o)=>{const r=T$(n)?n.clipboardData:n.dataTransfer;if(tv(e)&&r){const c=E$(e,r);if(c.length>0)return n.preventDefault(),ZH(c).then(u=>{o&&e.selection.setRng(o),H(u,f=>{WH(e,f)})}),!0}return!1},GH=e=>{var n,o;return us.os.isAndroid()&&((o=(n=e.clipboardData)===null||n===void 0?void 0:n.items)===null||o===void 0?void 0:o.length)===0},Tk=e=>Zn.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,rC=(e,n,o,r)=>{let c=w$(o);const u=b0(n,sC())||h$(o),f=!u&&kH(c),b=s4(c);(b$(c)||!c.length||f&&!b)&&(r=!0),(r||b)&&(b0(n,"text/plain")&&f?c=n["text/plain"]:c=DH(c)),!b$(c)&&(r?r4(e,c):fr(e,c,u))},A$=(e,n,o)=>{let r;const c=()=>n.getLastRng()||e.selection.getRng();e.on("keydown",u=>{Tk(u)&&!u.isDefaultPrevented()&&(r=u.shiftKey&&u.keyCode===86)}),e.on("paste",u=>{if(u.isDefaultPrevented()||GH(u))return;const f=o.get()==="text"||r;r=!1;const b=a4(u.clipboardData);!kk(b)&&_$(e,u,c())||(b0(b,"text/html")?(u.preventDefault(),rC(e,b,b["text/html"],f)):(n.create(),Ii.setEditorTimeout(e,()=>{const y=n.getHtml();n.remove(),rC(e,b,y,f)},0)))})},td=e=>{const n=c=>wo(c,"webkit-fake-url"),o=c=>wo(c,"data:"),r=c=>{var u;return((u=c.data)===null||u===void 0?void 0:u.paste)===!0};e.parser.addNodeFilter("img",(c,u,f)=>{if(!tv(e)&&r(f))for(const b of c){const y=b.attr("src");Q(y)&&!b.attr("data-mce-object")&&y!==us.transparentSrc&&(n(y)||!gg(e)&&o(y))&&b.remove()}})},qH=(e,n,o)=>{A$(e,n,o),td(e)},v0=(e,n)=>{n.get()==="text"?(n.set("html"),cr(e,!1)):(n.set("text"),cr(e,!0)),e.focus()},aC=(e,n)=>{e.addCommand("mceTogglePlainTextPaste",()=>{v0(e,n)}),e.addCommand("mceInsertClipboardContent",(o,r)=>{r.html&&fr(e,r.html,r.internal),r.text&&r4(e,r.text)})},KH=(e,n,o)=>{if(e)try{return e.clearData(),e.setData("text/html",n),e.setData("text/plain",o),e.setData(sC(),n),!0}catch{return!1}else return!1},O$=(e,n,o,r)=>{KH(e.clipboardData,n.html,n.text)?(e.preventDefault(),r()):o(n.html,r)},Qb=e=>(n,o)=>{const{dom:r,selection:c}=e,u=r.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=r.create("div",{contenteditable:"true"},n);r.setStyles(u,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),u.appendChild(f),r.add(e.getBody(),u);const b=c.getRng();f.focus();const y=r.createRng();y.selectNodeContents(f),c.setRng(y),Ii.setEditorTimeout(e,()=>{c.setRng(b),r.remove(u),o()},0)},D$=e=>({html:xH(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),c4=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),Ek=e=>!e.selection.isCollapsed()||c4(e),R$=e=>n=>{!n.isDefaultPrevented()&&Ek(e)&&O$(n,D$(e),Qb(e),()=>{if(us.browser.isChromium()||us.browser.isFirefox()){const o=e.selection.getRng();Ii.setEditorTimeout(e,()=>{e.selection.setRng(o),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},YH=e=>n=>{!n.isDefaultPrevented()&&Ek(e)&&O$(n,D$(e),Qb(e),Me)},XH=e=>{e.on("cut",R$(e)),e.on("copy",YH(e))},i4=(e,n)=>{var o,r;return Og.getCaretRangeFromPoint((o=n.clientX)!==null&&o!==void 0?o:0,(r=n.clientY)!==null&&r!==void 0?r:0,e.getDoc())},M$=e=>{const n=e["text/plain"];return n?n.indexOf("file://")===0:!1},N$=(e,n)=>{e.focus(),n&&e.selection.setRng(n)},JH=e=>se(e.files,n=>/^image\//.test(n.type)),QH=(e,n)=>{jT(e)&&e.on("dragend dragover draggesture dragdrop drop drag",o=>{o.preventDefault(),o.stopPropagation()}),tv(e)||e.on("drop",o=>{const r=o.dataTransfer;r&&JH(r)&&o.preventDefault()}),e.on("drop",o=>{if(o.isDefaultPrevented()||n.get())return;const r=i4(e,o);if($t(r))return;const c=a4(o.dataTransfer),u=b0(c,sC());if((!kk(c)||M$(c))&&_$(e,o,r))return;const f=c[sC()],b=f||c["text/html"]||c["text/plain"];b&&(o.preventDefault(),Ii.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{f&&e.execCommand("Delete"),N$(e,r);const y=w$(b);c["text/html"]?fr(e,y,u):r4(e,y)})}))}),e.on("dragstart",o=>{n.set(!0)}),e.on("dragover dragend",o=>{tv(e)&&!n.get()&&(o.preventDefault(),N$(e,i4(e,o))),o.type==="dragend"&&n.set(!1)})},B$=e=>{const n=c=>u=>{c(e,u)},o=GT(e);ee(o)&&e.on("PastePreProcess",n(o));const r=k2(e);ee(r)&&e.on("PastePostProcess",n(r))},e9=(e,n)=>{e.on("PastePreProcess",o=>{o.content=n(e,o.content,o.internal)})},$$=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,P$=e=>Dt.trim(e).replace($$,ub).toLowerCase(),t9=(e,n,o)=>{const r=qT(e);if(o||r==="all"||!Qp(e))return n;const c=r?r.split(/[, ]/):[];if(c&&r!=="none"){const u=e.dom,f=e.selection.getNode();n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(b,y,x,M)=>{const P=u.parseStyle(u.decode(x)),L={};for(let ie=0;ie<c.length;ie++){const te=P[c[ie]];let ue=te,Be=u.getStyle(f,c[ie],!0);/color/.test(c[ie])&&(ue=P$(ue),Be=P$(Be)),Be!==ue&&(L[c[ie]]=te)}const ce=u.serializeStyle(L,"span");return ce?y+' style="'+ce+'"'+M:y+M})}else n=n.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return n=n.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(u,f,b,y)=>f+' style="'+b+'"'+y),n},n9=e=>{(us.browser.isChromium()||us.browser.isSafari())&&e9(e,t9)},o9=e=>{const n=fc(!1),o=fc(E2(e)?"text":"html"),r=v$(e);n9(e),aC(e,o),B$(e),e.on("PreInit",()=>{XH(e),QH(e,n),qH(e,r,o)})},s9=e=>{e.on("click",n=>{e.dom.getParent(n.target,"details")&&n.preventDefault()})},r9=e=>{e.parser.addNodeFilter("details",n=>{H(n,o=>{o.attr("data-mce-open",o.attr("open")),o.attr("open","open")})}),e.serializer.addNodeFilter("details",n=>{H(n,o=>{const r=o.attr("data-mce-open");o.attr("open",Q(r)?r:null),o.attr("data-mce-open",null)})})},a9=e=>{s9(e),r9(e)},F$=jr,I$=Zt,c9=e=>lr(e.dom),L$=e=>si(e.dom),H$=e=>n=>Ps(ve.fromDom(e),n),i9=(e,n)=>Rl(ve.fromDom(e),o=>L$(o)||wa(o),H$(n)).getOr(ve.fromDom(n)).dom,l9=(e,n)=>Rl(ve.fromDom(e),c9,H$(n)),z$=(e,n,o)=>{const r=new ya(e,n),c=o?r.next.bind(r):r.prev.bind(r);let u=e;for(let f=o?e:c();f&&!F$(f);f=c())yi(f)&&(u=f);return u},zU=(e,n)=>{const r=bt.fromRangeStart(e).getNode(),c=i9(r,n),u=z$(r,c,!1),f=z$(r,c,!0),b=document.createRange();return l9(u,c).fold(()=>{I$(u)?b.setStart(u,0):b.setStartBefore(u)},y=>b.setStartBefore(y.dom)),l9(f,c).fold(()=>{I$(f)?b.setEnd(f,f.data.length):b.setEndAfter(f)},y=>b.setEndAfter(y.dom)),b},u9=e=>{const n=zU(e.selection.getRng(),e.getBody());e.selection.setRng(vw(n))},d9=e=>{e.on("mousedown",n=>{n.detail>=3&&(n.preventDefault(),u9(e))})};var cC;(function(e){e.Before="before",e.After="after"})(cC||(cC={}));const m9=(e,n)=>Math.abs(e.left-n),Gl=(e,n)=>Math.abs(e.right-n),f9=(e,n)=>e>=n.top&&e<=n.bottom,g9=(e,n)=>e.top<n.bottom&&e.bottom>n.top,h9=(e,n)=>{const o=Wa(e,n)/Math.min(e.height,n.height);return g9(e,n)&&o>.5},p9=(e,n)=>{const o=Z(e,r=>f9(n,r));return yT(o).fold(()=>[[],e],r=>{const{pass:c,fail:u}=z(e,f=>h9(f,r));return[c,u]})},b9=(e,n)=>({node:e.node,position:m9(e,n)<Gl(e,n)?cC.Before:cC.After}),_k=(e,n,o)=>n>e.left&&n<e.right?0:Math.min(Math.abs(e.left-n),Math.abs(e.right-n)),l4=(e,n,o)=>{const r=M=>yi(M.node)?R.some(M):$n(M.node)?l4(Do(M.node.childNodes),n,o):R.none(),c=(M,P)=>{if(M.length>=2){const L=r(M[0]).getOr(M[0]),ce=r(M[1]).getOr(M[1]);if(Math.abs(P(L,n,o)-P(ce,n,o))<2){if(Zt(L.node))return R.some(L);if(Zt(ce.node))return R.some(ce)}}return R.none()},u=(M,P)=>{const L=Bt(M,(ce,ie)=>P(ce,n,o)-P(ie,n,o));return c(L,P).orThunk(()=>ks(L,r))},[f,b]=p9(Vx(e),o),{pass:y,fail:x}=z(b,M=>M.top<o);return u(f,_k).orThunk(()=>u(x,n2)).orThunk(()=>u(y,n2))},v9=(e,n,o,r)=>{const c=(u,f)=>{const b=x=>$n(x)&&x.classList.contains("mce-drag-container"),y=Z(u.dom.childNodes,Kt(b));return f.fold(()=>l4(y,o,r),x=>{const M=Z(y,P=>P!==x.dom);return l4(M,o,r)}).orThunk(()=>(Ps(u,e)?R.none():Hf(u)).bind(M=>c(M,R.some(u))))};return c(n,R.none())},V$=(e,n,o)=>{const r=ve.fromDom(e),c=Zi(r),f=ve.fromPoint(c,n,o).filter(b=>Ya(r,b)).getOr(r);return v9(r,f,n,o)},u4=(e,n,o)=>V$(e,n,o).filter(r=>pg(r.node)).map(r=>b9(r,n)),Ak=e=>{var n,o;const r=e.getBoundingClientRect(),c=e.ownerDocument,u=c.documentElement,f=c.defaultView;return{top:r.top+((n=f==null?void 0:f.scrollY)!==null&&n!==void 0?n:0)-u.clientTop,left:r.left+((o=f==null?void 0:f.scrollX)!==null&&o!==void 0?o:0)-u.clientLeft}},y9=e=>e.inline?Ak(e.getBody()):{left:0,top:0},U$=e=>{const n=e.getBody();return e.inline?{left:n.scrollLeft,top:n.scrollTop}:{left:0,top:0}},w9=e=>{const n=e.getBody(),o=e.getDoc().documentElement,r={left:n.scrollLeft,top:n.scrollTop},c={left:n.scrollLeft||o.scrollLeft,top:n.scrollTop||o.scrollTop};return e.inline?r:c},W$=(e,n)=>{if(n.target.ownerDocument!==e.getDoc()){const o=Ak(e.getContentAreaContainer()),r=w9(e);return{left:n.pageX-o.left+r.left,top:n.pageY-o.top+r.top}}return{left:n.pageX,top:n.pageY}},C9=(e,n,o)=>({pageX:o.left-e.left+n.left,pageY:o.top-e.top+n.top}),Z$=(e,n)=>C9(y9(e),U$(e),W$(e,n)),Ok=32,S9=100,Dk=8,hp=16,d4=lr,x9=wT(d4,si),j$=(e,n)=>d4(n)&&n!==e,k9=(e,n,o)=>$t(n)||n===o||e.dom.isChildOf(n,o)?!1:!d4(n),T9=e=>{const n=e.cloneNode(!0);return n.removeAttribute("data-mce-selected"),n},E9=(e,n,o,r)=>{const c=e.dom,u=n.cloneNode(!0);c.setStyles(u,{width:o,height:r}),c.setAttrib(u,"data-mce-selected",null);const f=c.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return c.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:o,height:r}),c.setStyles(u,{margin:0,boxSizing:"border-box"}),f.appendChild(u),f},_9=(e,n)=>{e.parentNode!==n&&n.appendChild(e)},Rk=(e,n)=>o=>()=>{const r=e==="left"?o.scrollX:o.scrollY;o.scroll({[e]:r+n,behavior:"smooth"})},iC=Rk("left",-Ok),m4=Rk("left",Ok),f4=Rk("top",-Ok),G$=Rk("top",Ok),A9=(e,n,o,r,c,u,f,b,y,x,M,P)=>{let L=0,ce=0;e.style.left=n.pageX+"px",e.style.top=n.pageY+"px",n.pageX+o>c&&(L=n.pageX+o-c),n.pageY+r>u&&(ce=n.pageY+r-u),e.style.width=o-L+"px",e.style.height=r-ce+"px";const ie=y.clientHeight,te=y.clientWidth,ue=f+y.getBoundingClientRect().top,Be=b+y.getBoundingClientRect().left;M.on(De=>{De.intervalId.clear(),De.dragging&&P&&(f+Dk>=ie?De.intervalId.set(G$(x)):f-Dk<=0?De.intervalId.set(f4(x)):b+Dk>=te?De.intervalId.set(m4(x)):b-Dk<=0?De.intervalId.set(iC(x)):ue+hp>=window.innerHeight?De.intervalId.set(G$(window)):ue-hp<=0?De.intervalId.set(f4(window)):Be+hp>=window.innerWidth?De.intervalId.set(m4(window)):Be-hp<=0&&De.intervalId.set(iC(window)))})},q$=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},VU=e=>e.button===0,O9=(e,n)=>({pageX:n.pageX-e.relX,pageY:n.pageY+5}),g4=(e,n)=>o=>{if(VU(o)){const r=ot(n.dom.getParents(o.target),x9).getOr(null);if(ye(r)&&j$(n.getBody(),r)){const c=n.dom.getPos(r),u=n.getBody(),f=n.getDoc().documentElement;e.set({element:r,dragging:!1,screenX:o.screenX,screenY:o.screenY,maxX:(n.inline?u.scrollWidth:f.offsetWidth)-2,maxY:(n.inline?u.scrollHeight:f.offsetHeight)-2,relX:o.pageX-c.x,relY:o.pageY-c.y,width:r.offsetWidth,height:r.offsetHeight,ghost:E9(n,r,r.offsetWidth,r.offsetHeight),intervalId:hT(S9)})}}},h4=(e,n)=>{const o=kh((c,u)=>{n._selectionOverrides.hideFakeCaret(),u4(n.getBody(),c,u).fold(()=>n.selection.placeCaretAt(c,u),f=>{const b=n._selectionOverrides.showCaret(1,f.node,f.position===cC.Before,!1);b?n.selection.setRng(b):n.selection.placeCaretAt(c,u)})},0);n.on("remove",o.cancel);const r=e;return c=>e.on(u=>{const f=Math.max(Math.abs(c.screenX-u.screenX),Math.abs(c.screenY-u.screenY));if(!u.dragging&&f>10){if(n.dispatch("dragstart",{target:u.element}).isDefaultPrevented())return;u.dragging=!0,n.focus()}if(u.dragging){const b=c.currentTarget===n.getDoc().documentElement,y=O9(u,Z$(n,c));_9(u.ghost,n.getBody()),A9(u.ghost,y,u.width,u.height,u.maxX,u.maxY,c.clientY,c.clientX,n.getContentAreaContainer(),n.getWin(),r,b),o.throttle(c.clientX,c.clientY)}})},Mk=e=>{const n=e.getSel();if(ye(n)){const r=n.getRangeAt(0).startContainer;return Zt(r)?r.parentNode:r}else return null},D9=(e,n)=>o=>{e.on(r=>{if(r.intervalId.clear(),r.dragging){if(k9(n,Mk(n.selection),r.element)){const c=T9(r.element);n.dispatch("drop",{clientX:o.clientX,clientY:o.clientY}).isDefaultPrevented()||n.undoManager.transact(()=>{q$(r.element),n.insertContent(n.dom.getOuterHTML(c)),n._selectionOverrides.hideFakeCaret()})}n.dispatch("dragend")}}),p4(e)},R9=(e,n)=>()=>{e.on(o=>{o.intervalId.clear(),o.dragging&&n.dispatch("dragend")}),p4(e)},p4=e=>{e.on(n=>{n.intervalId.clear(),q$(n.ghost)}),e.clear()},M9=e=>{const n=nf(),o=yr.DOM,r=document,c=g4(n,e),u=h4(n,e),f=D9(n,e),b=R9(n,e);e.on("mousedown",c),e.on("mousemove",u),e.on("mouseup",f),o.bind(r,"mousemove",u),o.bind(r,"mouseup",b),e.on("remove",()=>{o.unbind(r,"mousemove",u),o.unbind(r,"mouseup",b)}),e.on("keydown",y=>{y.keyCode===Zn.ESC&&b()})},b4=e=>{const n=c=>{if(!c.isDefaultPrevented()){const u=c.dataTransfer;u&&(ae(u.types,"Files")||u.files.length>0)&&(c.preventDefault(),c.type==="drop"&&AA(e,"Dropped file type is not supported"))}},o=c=>{Pv(e,c.target)&&n(c)},r=()=>{const c=yr.DOM,u=e.dom,f=document,b=e.inline?e.getBody():e.getDoc(),y=["drop","dragover"];H(y,x=>{c.bind(f,x,o),u.bind(b,x,n)}),e.on("remove",()=>{H(y,x=>{c.unbind(f,x,o),u.unbind(b,x,n)})})};e.on("init",()=>{Ii.setEditorTimeout(e,r,0)})},K$=e=>{M9(e),Jp(e)&&b4(e)},N9=e=>{const n=kh(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const o=e.selection.getRng();if(o.collapsed){const r=zA(e,o,!1);e.selection.setRng(r)}}},0);e.on("focus",()=>{n.throttle()}),e.on("blur",()=>{n.cancel()})},Y$=e=>{e.on("init",()=>{e.on("focusin",n=>{const o=n.target;if(nu(o)){const r=rp(e.getBody(),o),c=lr(r)?r:o;e.selection.getNode()!==c&&Vw(e,c).each(u=>e.selection.setRng(u))}})})},y0=lr,v4=(e,n)=>rp(e.getBody(),n),UU=e=>{const n=e.selection,o=e.dom,r=e.getBody(),c=rv(e,r,o.isBlock,()=>Eb(e)),u="sel-"+o.uniqueId(),f="data-mce-selected";let b;const y=en=>ye(en)&&o.hasClass(en,"mce-offscreen-selection"),x=en=>en!==r&&(y0(en)||nu(en))&&o.isChildOf(en,r),M=en=>{en&&n.setRng(en)},P=(en,ut,Je,Rn=!0)=>e.dispatch("ShowCaret",{target:ut,direction:en,before:Je}).isDefaultPrevented()?null:(Rn&&n.scrollIntoView(ut,en===-1),c.show(Je,ut)),L=en=>{en.hasAttribute("data-mce-caret")&&(nr(en),n.scrollIntoView(en))},ce=()=>{e.on("click",ut=>{const Je=v4(e,ut.target);Je&&y0(Je)&&(ut.preventDefault(),e.focus())}),e.on("blur NewBlock",et),e.on("ResizeWindow FullscreenStateChanged",c.reposition),e.on("tap",ut=>{const Je=ut.target,Rn=v4(e,Je);y0(Rn)?(ut.preventDefault(),Vw(e,Rn).each(Ge)):x(Je)&&Vw(e,Je).each(Ge)},!0),e.on("mousedown",ut=>{const Je=ut.target;if(Je!==r&&Je.nodeName!=="HTML"&&!o.isChildOf(Je,r)||!W8(e,ut.clientX,ut.clientY))return;et(),gn();const Rn=v4(e,Je);y0(Rn)?(ut.preventDefault(),Vw(e,Rn).each(Ge)):u4(r,ut.clientX,ut.clientY).each(co=>{ut.preventDefault();const fo=P(1,co.node,co.position===cC.Before,!1);M(fo),$n(Rn)?Rn.focus():e.getBody().focus()})}),e.on("keypress",ut=>{Zn.modifierPressed(ut)||y0(n.getNode())&&ut.preventDefault()}),e.on("GetSelectionRange",ut=>{let Je=ut.range;if(b){if(!b.parentNode){b=null;return}Je=Je.cloneRange(),Je.selectNode(b),ut.range=Je}}),e.on("SetSelectionRange",ut=>{ut.range=ue(ut.range);const Je=Ge(ut.range,ut.forward);Je&&(ut.range=Je)});const en=ut=>$n(ut)&&ut.id==="mcepastebin";e.on("AfterSetSelectionRange",ut=>{const Je=ut.range,Rn=Je.startContainer.parentElement;!te(Je)&&!en(Rn)&&gn(),y(Rn)||et()}),K$(e),N9(e),Y$(e)},ie=en=>V(en)||Go(en)||ur(en),te=en=>ie(en.startContainer)||ie(en.endContainer),ue=en=>{const ut=e.schema.getVoidElements(),Je=o.createRng(),Rn=en.startContainer,co=en.startOffset,fo=en.endContainer,Uo=en.endOffset;return go(ut,Rn.nodeName.toLowerCase())?co===0?Je.setStartBefore(Rn):Je.setStartAfter(Rn):Je.setStart(Rn,co),go(ut,fo.nodeName.toLowerCase())?Uo===0?Je.setEndBefore(fo):Je.setEndAfter(fo):Je.setEnd(fo,Uo),Je},Be=(en,ut)=>{const Je=ve.fromDom(e.getBody()),Rn=e.getDoc(),co=Gf(Je,"#"+u).getOrThunk(()=>{const vs=ve.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',Rn);return rr(vs,"id",u),na(Je,vs),vs}),fo=o.createRng();Vr(co),Fo(co,[ve.fromText(ia,Rn),ve.fromDom(ut),ve.fromText(ia,Rn)]),fo.setStart(co.dom.firstChild,1),fo.setEnd(co.dom.lastChild,0),ke(co,{top:o.getPos(en,e.getBody()).y+"px"}),St(co);const Uo=n.getSel();return Uo&&(Uo.removeAllRanges(),Uo.addRange(fo)),fo},De=en=>{const ut=en.cloneNode(!0),Je=e.dispatch("ObjectSelected",{target:en,targetClone:ut});if(Je.isDefaultPrevented())return null;const Rn=Be(en,Je.targetClone),co=ve.fromDom(en);return H(Ms(ve.fromDom(e.getBody()),`*[${f}]`),fo=>{Ps(co,fo)||Yr(fo,f)}),o.getAttrib(en,f)||en.setAttribute(f,"1"),b=en,gn(),Rn},Ge=(en,ut)=>{if(!en)return null;if(en.collapsed){if(!te(en)){const fo=ut?1:-1,Uo=ob(fo,r,en),vs=Uo.getNode(!ut);if(ye(vs)){if(pg(vs))return P(fo,vs,ut?!Uo.isAtEnd():!1,!1);if(I(vs)&&lr(vs.nextSibling)){const Gs=o.createRng();return Gs.setStart(vs,0),Gs.setEnd(vs,0),Gs}}const Ks=Uo.getNode(ut);if(ye(Ks)){if(pg(Ks))return P(fo,Ks,ut?!1:!Uo.isAtEnd(),!1);if(I(Ks)&&lr(Ks.previousSibling)){const Gs=o.createRng();return Gs.setStart(Ks,1),Gs.setEnd(Ks,1),Gs}}}return null}let Je=en.startContainer,Rn=en.startOffset;const co=en.endOffset;if(Zt(Je)&&Rn===0&&y0(Je.parentNode)&&(Je=Je.parentNode,Rn=o.nodeIndex(Je),Je=Je.parentNode),!$n(Je))return null;if(co===Rn+1&&Je===en.endContainer){const fo=Je.childNodes[Rn];if(x(fo))return De(fo)}return null},et=()=>{b&&b.removeAttribute(f),Gf(ve.fromDom(e.getBody()),"#"+u).each(Fs),b=null},Tt=()=>{c.destroy(),b=null},gn=()=>{c.hide()};return Of(e)||ce(),{showCaret:P,showBlockCaretContainer:L,hideFakeCaret:gn,destroy:Tt}},B9=(e,n)=>{let o=n;for(let r=e.previousSibling;Zt(r);r=r.previousSibling)o+=r.data.length;return o},X$=(e,n,o,r,c)=>{if(Zt(o)&&(r<0||r>o.data.length))return[];const u=c&&Zt(o)?[B9(o,r)]:[r];let f=o;for(;f!==n&&f.parentNode;)u.push(e.nodeIndex(f,c)),f=f.parentNode;return f===n?u.reverse():[]},y4=(e,n,o,r,c,u,f=!1)=>{const b=X$(e,n,o,r,f),y=X$(e,n,c,u,f);return{start:b,end:y}},w4=(e,n)=>{const o=n.slice(),r=o.pop();return at(r)?Pe(o,(u,f)=>u.bind(b=>R.from(b.childNodes[f])),R.some(e)).bind(u=>Zt(u)&&(r<0||r>u.data.length)?R.none():R.some({node:u,offset:r})):R.none()},J$=(e,n)=>w4(e,n.start).bind(({node:o,offset:r})=>w4(e,n.end).map(({node:c,offset:u})=>{const f=document.createRange();return f.setStart(o,r),f.setEnd(c,u),f})),Q$=(e,n,o,r=!1)=>y4(e,n,o.startContainer,o.startOffset,o.endContainer,o.endOffset,r),w0=(e,n,o)=>{if(n&&e.isEmpty(n)&&!o(n)){const r=n.parentNode;e.remove(n),w0(e,r,o)}},Nk=(e,n,o,r=!0)=>{const c=n.startContainer.parentNode,u=n.endContainer.parentNode;n.deleteContents(),r&&!o(n.startContainer)&&(Zt(n.startContainer)&&n.startContainer.data.length===0&&e.remove(n.startContainer),Zt(n.endContainer)&&n.endContainer.data.length===0&&e.remove(n.endContainer),w0(e,c,o),c!==u&&w0(e,u,o))},C4=(e,n)=>R.from(e.dom.getParent(n.startContainer,e.dom.isBlock)),eP=(e,n,o)=>{const r=e.dynamicPatternsLookup({text:o,block:n});return{...e,blockPatterns:Ac(r).concat(e.blockPatterns),inlinePatterns:Oc(r).concat(e.inlinePatterns)}},tP=(e,n,o,r)=>{const c=e.createRng();return c.setStart(n,0),c.setEnd(o,r),c.toString()},S4=(e,n,o)=>{bB(n,0,n).each(c=>{const u=c.container;vB(u,o.start.length,n).each(f=>{const b=e.createRng();b.setStart(u,0),b.setEnd(f.container,f.offset),Nk(e,b,y=>y===n)})})},WU=(e,n)=>{const o=e.dom,r=n.pattern,c=J$(o.getRoot(),n.range).getOrDie("Unable to resolve path range"),u=(f,b)=>{const y=b.get(f);return yt(y)&&An(y).exists(x=>go(x,"block"))};return C4(e,c).each(f=>{r.type==="block-format"?u(r.format,e.formatter)&&e.undoManager.transact(()=>{S4(e.dom,f,r),e.formatter.apply(r.format)}):r.type==="block-command"&&e.undoManager.transact(()=>{S4(e.dom,f,r),e.execCommand(r.cmd,!1,r.value)})}),!0},$9=e=>Bt(e,(n,o)=>o.start.length-n.start.length),nP=(e,n)=>{const o=$9(e),r=n.replace(ia," ");return ot(o,c=>n.indexOf(c.start)===0||r.indexOf(c.start)===0)},P9=(e,n,o,r)=>{var c;const u=e.dom,f=wl(e);if(!u.is(n,f))return[];const b=(c=n.textContent)!==null&&c!==void 0?c:"";return nP(o.blockPatterns,b).map(y=>Dt.trim(b).length===y.start.length?[]:[{pattern:y,range:y4(u,u.getRoot(),n,0,n,0,r)}]).getOr([])},x4=(e,n)=>{if(n.length===0)return;const o=e.selection.getBookmark();H(n,r=>WU(e,r)),e.selection.moveToBookmark(o)},oP=(e,n)=>e.create("span",{"data-mce-type":"bookmark",id:n}),Bk=(e,n)=>{const o=e.createRng();return o.setStartAfter(n.start),o.setEndBefore(n.end),o},sP=(e,n,o)=>{const r=J$(e.getRoot(),o).getOrDie("Unable to resolve path range"),c=r.startContainer,u=r.endContainer,f=r.endOffset===0?u:u.splitText(r.endOffset),b=r.startOffset===0?c:c.splitText(r.startOffset),y=b.parentNode,x=f.parentNode;return{prefix:n,end:x.insertBefore(oP(e,n+"-end"),f),start:y.insertBefore(oP(e,n+"-start"),b)}},k4=(e,n,o)=>{w0(e,e.get(n.prefix+"-end"),o),w0(e,e.get(n.prefix+"-start"),o)},C0=e=>e.start.length===0,rP=e=>(n,o)=>{const c=n.data.substring(0,o),u=c.lastIndexOf(e.charAt(e.length-1)),f=c.lastIndexOf(e);return f!==-1?f+e.length:u!==-1?u+1:-1},T4=(e,n,o,r)=>{const c=n.start;return x3(e,r.container,r.offset,rP(c),o).bind(f=>{var b,y;const x=(y=(b=o.textContent)===null||b===void 0?void 0:b.indexOf(c))!==null&&y!==void 0?y:-1;if(x!==-1&&f.offset>=x+c.length){const P=e.createRng();return P.setStart(f.container,f.offset-c.length),P.setEnd(f.container,f.offset),R.some(P)}else{const P=f.offset-c.length;return S3(f.container,P,o).map(L=>{const ce=e.createRng();return ce.setStart(L.container,L.offset),ce.setEnd(f.container,f.offset),ce}).filter(L=>L.toString()===c).orThunk(()=>T4(e,n,o,$d(f.container,0)))}})},F9=(e,n,o,r,c,u=!1)=>{if(n.start.length===0&&!u){const f=e.createRng();return f.setStart(o,r),f.setEnd(o,r),R.some(f)}return ok(o,r,c).bind(f=>T4(e,n,c,f).bind(y=>{var x;if(u){if(y.endContainer===f.container&&y.endOffset===f.offset)return R.none();if(f.offset===0&&((x=y.endContainer.textContent)===null||x===void 0?void 0:x.length)===y.endOffset)return R.none()}return R.some(y)}))},I9=(e,n,o,r)=>{const c=e.dom,u=c.getRoot(),f=o.pattern,b=o.position.container,y=o.position.offset;return S3(b,y-o.pattern.end.length,n).bind(x=>{const M=y4(c,u,x.container,x.offset,b,y,r);if(C0(f))return R.some({matches:[{pattern:f,startRng:M,endRng:M}],position:x});{const P=lC(e,o.remainingPatterns,x.container,x.offset,n,r),L=P.getOr({matches:[],position:x}),ce=L.position;return F9(c,f,ce.container,ce.offset,n,P.isNone()).map(te=>{const ue=Q$(c,u,te,r);return{matches:L.matches.concat([{pattern:f,startRng:ue,endRng:M}]),position:$d(te.startContainer,te.startOffset)}})}})},lC=(e,n,o,r,c,u)=>{const f=e.dom;return ok(o,r,f.getRoot()).bind(b=>{const y=tP(f,c,o,r);for(let x=0;x<n.length;x++){const M=n[x];if(!Os(y,M.end))continue;const P=n.slice();P.splice(x,1);const L=I9(e,c,{pattern:M,remainingPatterns:P,position:b},u);if(L.isNone()&&r>0)return lC(e,n,o,r-1,c,u);if(L.isSome())return L}return R.none()})},aP=(e,n,o)=>{e.selection.setRng(o),n.type==="inline-format"?H(n.format,r=>{e.formatter.apply(r)}):e.execCommand(n.cmd,!1,n.value)},L9=(e,n,o,r)=>{const c=Bk(e.dom,o);Nk(e.dom,c,r),aP(e,n,c)},H9=(e,n,o,r,c)=>{const u=e.dom,f=Bk(u,r),b=Bk(u,o);Nk(u,b,c),Nk(u,f,c);const y={prefix:o.prefix,start:o.end,end:r.start},x=Bk(u,y);aP(e,n,x)},E4=(e,n)=>{const o=KC("mce_textpattern"),r=Ne(n,(c,u)=>{const f=sP(e,o+`_end${c.length}`,u.endRng);return c.concat([{...u,endMarker:f}])},[]);return Ne(r,(c,u)=>{const f=r.length-c.length-1,b=C0(u.pattern)?u.endMarker:sP(e,o+`_start${f}`,u.startRng);return c.concat([{...u,startMarker:b}])},[])},z9=e=>Bt(e,(n,o)=>o.end.length-n.end.length),V9=(e,n)=>{const o=kn(e,r=>se(n,c=>r.pattern.start===c.pattern.start&&r.pattern.end===c.pattern.end));return e.length===n.length?o?e:n:e.length>n.length?e:n},cP=(e,n,o,r,c,u)=>{const f=lC(e,c.inlinePatterns,o,r,n,u).fold(()=>[],y=>y.matches),b=lC(e,z9(c.inlinePatterns),o,r,n,u).fold(()=>[],y=>y.matches);return V9(f,b)},iP=(e,n)=>{if(n.length===0)return;const o=e.dom,r=e.selection.getBookmark(),c=E4(o,n);H(c,u=>{const f=o.getParent(u.startMarker.start,o.isBlock),b=y=>y===f;C0(u.pattern)?L9(e,u.pattern,u.endMarker,b):H9(e,u.pattern,u.startMarker,u.endMarker,b),k4(o,u.endMarker,b),k4(o,u.startMarker,b)}),e.selection.moveToBookmark(r)},U9=(e,n)=>{const o=e.selection.getRng();return C4(e,o).map(r=>{var c;const u=Math.max(0,o.startOffset),f=eP(n,r,(c=r.textContent)!==null&&c!==void 0?c:""),b=cP(e,r,o.startContainer,u,f,!0),y=P9(e,r,f,!0);return y.length>0||b.length>0?(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{e.insertContent(Gm),iP(e,b),x4(e,y);const x=e.selection.getRng(),M=ok(x.startContainer,x.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),M.each(P=>{const L=P.container;L.data.charAt(P.offset-1)===Gm&&(L.deleteData(P.offset-1,1),w0(e.dom,L.parentNode,ce=>ce===e.dom.getRoot()))})}),!0):!1}).getOr(!1)},W9=(e,n)=>{const o=e.selection.getRng();C4(e,o).map(r=>{const c=Math.max(0,o.startOffset-1),u=tP(e.dom,r,o.startContainer,c),f=eP(n,r,u),b=cP(e,r,o.startContainer,c,f,!1);b.length>0&&e.undoManager.transact(()=>{iP(e,b)})})},_4=(e,n,o)=>{for(let r=0;r<e.length;r++)if(o(e[r],n))return!0;return!1},lP=(e,n)=>_4(e,n,(o,r)=>o===r.keyCode&&!Zn.modifierPressed(r)),A4=(e,n)=>_4(e,n,(o,r)=>o.charCodeAt(0)===r.charCode),O4=e=>{const n=[",",".",";",":","!","?"],o=[32],r=()=>ci(hg(e),mf(e)),c=()=>KT(e);e.on("keydown",f=>{if(f.keyCode===13&&!Zn.modifierPressed(f)&&e.selection.isCollapsed()){const b=r();(b.inlinePatterns.length>0||b.blockPatterns.length>0||c())&&U9(e,b)&&f.preventDefault()}},!0);const u=()=>{if(e.selection.isCollapsed()){const f=r();(f.inlinePatterns.length>0||c())&&W9(e,f)}};e.on("keyup",f=>{lP(o,f)&&u()}),e.on("keypress",f=>{A4(n,f)&&Ii.setEditorTimeout(e,u)})},Z9=e=>{O4(e)},D4=e=>{const n=Dt.each,o=Zn.BACKSPACE,r=Zn.DELETE,c=e.dom,u=e.selection,f=e.parser,b=us.browser,y=b.isFirefox(),x=b.isChromium()||b.isSafari(),M=us.deviceType.isiPhone()||us.deviceType.isiPad(),P=us.os.isMacOS()||us.os.isiOS(),L=(On,Oo)=>{try{e.getDoc().execCommand(On,!1,String(Oo))}catch{}},ce=On=>On.isDefaultPrevented(),ie=()=>{const On=So=>{const Cn=c.create("body"),gs=So.cloneContents();return Cn.appendChild(gs),u.serializer.serialize(Cn,{format:"html"})},Oo=So=>{const Cn=On(So),gs=c.createRng();gs.selectNode(e.getBody());const as=On(gs);return Cn===as};e.on("keydown",So=>{const Cn=So.keyCode;if(!ce(So)&&(Cn===r||Cn===o)){const gs=e.selection.isCollapsed(),as=e.getBody();if(gs&&!c.isEmpty(as)||!gs&&!Oo(e.selection.getRng()))return;So.preventDefault(),e.setContent(""),as.firstChild&&c.isBlock(as.firstChild)?e.selection.setCursorLocation(as.firstChild,0):e.selection.setCursorLocation(as,0),e.nodeChanged()}})},te=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},ue=()=>{e.inline||c.bind(e.getDoc(),"mousedown mouseup",On=>{let Oo;if(On.target===e.getDoc().documentElement)if(Oo=u.getRng(),e.getBody().focus(),On.type==="mousedown"){if(V(Oo.startContainer))return;u.placeCaretAt(On.clientX,On.clientY)}else u.setRng(Oo)})},Be=()=>{e.on("keydown",On=>{if(!ce(On)&&On.keyCode===o){if(!e.getBody().getElementsByTagName("hr").length)return;if(u.isCollapsed()&&u.getRng().startOffset===0){const Oo=u.getNode(),So=Oo.previousSibling;if(Oo.nodeName==="HR"){c.remove(Oo),On.preventDefault();return}So&&So.nodeName&&So.nodeName.toLowerCase()==="hr"&&(c.remove(So),On.preventDefault())}}})},De=()=>{Range.prototype.getClientRects||e.on("mousedown",On=>{if(!ce(On)&&On.target.nodeName==="HTML"){const Oo=e.getBody();Oo.blur(),Ii.setEditorTimeout(e,()=>{Oo.focus()})}})},Ge=()=>{const On=df(e);e.on("click",Oo=>{const So=Oo.target;/^(IMG|HR)$/.test(So.nodeName)&&c.getContentEditableParent(So)!=="false"&&(Oo.preventDefault(),e.selection.select(So),e.nodeChanged()),So.nodeName==="A"&&c.hasClass(So,On)&&So.childNodes.length===0&&(Oo.preventDefault(),u.select(So))})},et=()=>{const On=()=>{const So=c.getAttribs(u.getStart().cloneNode(!1));return()=>{const Cn=u.getStart();Cn!==e.getBody()&&(c.setAttrib(Cn,"style",null),n(So,gs=>{Cn.setAttributeNode(gs.cloneNode(!0))}))}},Oo=()=>!u.isCollapsed()&&c.getParent(u.getStart(),c.isBlock)!==c.getParent(u.getEnd(),c.isBlock);e.on("keypress",So=>{let Cn;return!ce(So)&&(So.keyCode===8||So.keyCode===46)&&Oo()?(Cn=On(),e.getDoc().execCommand("delete",!1),Cn(),So.preventDefault(),!1):!0}),c.bind(e.getDoc(),"cut",So=>{if(!ce(So)&&Oo()){const Cn=On();Ii.setEditorTimeout(e,()=>{Cn()})}})},Tt=()=>{e.on("keydown",On=>{if(!ce(On)&&On.keyCode===o&&u.isCollapsed()&&u.getRng().startOffset===0){const Oo=u.getNode().previousSibling;if(Oo&&Oo.nodeName&&Oo.nodeName.toLowerCase()==="table")return On.preventDefault(),!1}return!0})},gn=()=>{e.on("keydown",On=>{if(ce(On)||On.keyCode!==Zn.BACKSPACE)return;let Oo=u.getRng();const So=Oo.startContainer,Cn=Oo.startOffset,gs=c.getRoot();let as=So;if(!(!Oo.collapsed||Cn!==0)){for(;as.parentNode&&as.parentNode.firstChild===as&&as.parentNode!==gs;)as=as.parentNode;as.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,as),Oo=c.createRng(),Oo.setStart(So,0),Oo.setEnd(So,0),u.setRng(Oo))}})},en=()=>{const On=()=>{L("StyleWithCSS",!1),L("enableInlineTableEditing",!1),ny(e)||L("enableObjectResizing",!1)};iy(e)||e.on("BeforeExecCommand mousedown",On)},ut=()=>{const On=()=>{n(c.select("a:not([data-mce-block])"),Oo=>{var So;let Cn=Oo.parentNode;const gs=c.getRoot();if((Cn==null?void 0:Cn.lastChild)===Oo){for(;Cn&&!c.isBlock(Cn);){if(((So=Cn.parentNode)===null||So===void 0?void 0:So.lastChild)!==Cn||Cn===gs)return;Cn=Cn.parentNode}c.add(Cn,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",Oo=>{(Oo.type==="setcontent"||Oo.command==="mceInsertLink")&&On()})},Je=()=>{e.on("init",()=>{L("DefaultParagraphSeparator",wl(e))})},Rn=On=>{const Oo=On.getBody(),So=On.selection.getRng();return So.startContainer===So.endContainer&&So.startContainer===Oo&&So.startOffset===0&&So.endOffset===Oo.childNodes.length},co=()=>{e.on("keyup focusin mouseup",On=>{!Zn.modifierPressed(On)&&!Rn(e)&&u.normalize()},!0)},fo=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Uo=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},vs=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",On=>{let Oo;On.target.nodeName==="HTML"&&(Oo=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(Oo),e.selection.normalize(),e.nodeChanged())}))},Ks=()=>{P&&e.on("keydown",On=>{Zn.metaKeyPressed(On)&&!On.shiftKey&&(On.keyCode===37||On.keyCode===39)&&(On.preventDefault(),e.selection.getSel().modify("move",On.keyCode===37?"backward":"forward","lineboundary"))})},Gs=()=>{e.on("click",On=>{let Oo=On.target;do if(Oo.tagName==="A"){On.preventDefault();return}while(Oo=Oo.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},Pa=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",On=>{On.preventDefault()})})},Ti=()=>{f.addNodeFilter("br",On=>{let Oo=On.length;for(;Oo--;)On[Oo].attr("class")==="Apple-interchange-newline"&&On[Oo].remove()})},Xt=Me,Wo=()=>{if(!y||e.removed)return!1;const On=e.selection.getSel();return!On||!On.rangeCount||On.rangeCount===0},po=()=>{x&&(ue(),Ge(),Pa(),te(),M&&(Uo(),vs(),Gs())),y&&(De(),en(),fo(),Ks())},Mr=()=>{gn(),ie(),us.windowsPhone||co(),x&&(ue(),Ge(),Je(),Pa(),Tt(),Ti(),M?(Uo(),vs(),Gs()):te()),y&&(Be(),De(),et(),en(),ut(),fo(),Ks(),Tt())};return Of(e)?po():Mr(),{refreshContentEditable:Xt,isHidden:Wo}},R4=yr.DOM,j9=(e,n)=>{const o=ve.fromDom(e.getBody()),r=ud(al(o)),c=ve.fromTag("style");rr(c,"type","text/css"),na(c,ve.fromText(n)),na(r,c),e.on("remove",()=>{Fs(c)})},G9=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,M4=e=>bs(e,n=>Bn(n)===!1),uP=e=>{const n=e.options.get,o=e.editorUpload.blobCache;return M4({allow_conditional_comments:n("allow_conditional_comments"),allow_html_data_urls:n("allow_html_data_urls"),allow_svg_data_urls:n("allow_svg_data_urls"),allow_html_in_named_anchor:n("allow_html_in_named_anchor"),allow_script_urls:n("allow_script_urls"),allow_unsafe_link_target:n("allow_unsafe_link_target"),convert_fonts_to_spans:n("convert_fonts_to_spans"),fix_list_elements:n("fix_list_elements"),font_size_legacy_values:n("font_size_legacy_values"),forced_root_block:n("forced_root_block"),forced_root_block_attrs:n("forced_root_block_attrs"),preserve_cdata:n("preserve_cdata"),remove_trailing_brs:n("remove_trailing_brs"),inline_styles:n("inline_styles"),root_name:G9(e),validate:!0,blob_cache:o,document:e.getDoc()})},dP=e=>{const n=e.options.get;return M4({custom_elements:n("custom_elements"),extended_valid_elements:n("extended_valid_elements"),invalid_elements:n("invalid_elements"),invalid_styles:n("invalid_styles"),schema:n("schema"),valid_children:n("valid_children"),valid_classes:n("valid_classes"),valid_elements:n("valid_elements"),valid_styles:n("valid_styles"),verify_html:n("verify_html"),padd_empty_block_inline_children:n("format_empty_lines")})},q9=e=>{const n=e.options.get;return{...uP(e),...dP(e),...M4({url_converter:n("url_converter"),url_converter_scope:n("url_converter_scope"),element_format:n("element_format"),entities:n("entities"),entity_encoding:n("entity_encoding"),indent:n("indent"),indent_after:n("indent_after"),indent_before:n("indent_before")})}},mP=e=>{const n=mu(uP(e),e.schema);return n.addAttributeFilter("src,href,style,tabindex",(o,r)=>{const c=e.dom,u="data-mce-"+r;let f=o.length;for(;f--;){const b=o[f];let y=b.attr(r);if(y&&!b.attr(u)){if(y.indexOf("data:")===0||y.indexOf("blob:")===0)continue;r==="style"?(y=c.serializeStyle(c.parseStyle(y),b.name),y.length||(y=null),b.attr(u,y),b.attr(r,y)):r==="tabindex"?(b.attr(u,y),b.attr(r,null)):b.attr(u,e.convertURL(y,r,b.name))}}}),n.addNodeFilter("script",o=>{let r=o.length;for(;r--;){const c=o[r],u=c.attr("type")||"no/type";u.indexOf("mce-")!==0&&c.attr("type","mce-"+u)}}),my(e)&&n.addNodeFilter("#cdata",o=>{var r;let c=o.length;for(;c--;){const u=o[c];u.type=8,u.name="#comment",u.value="[CDATA["+e.dom.encode((r=u.value)!==null&&r!==void 0?r:"")+"]]"}}),n.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",o=>{let r=o.length;const c=e.schema.getNonEmptyElements();for(;r--;){const u=o[r];u.isEmpty(c)&&u.getAll("br").length===0&&u.append(new tl("br",1))}}),n},K9=e=>{const n=x2(e);n&&Ii.setEditorTimeout(e,()=>{let o;n===!0?o=e:o=e.editorManager.get(n),o&&!o.destroyed&&(o.focus(),o.selection.scrollIntoView())},100)},Y9=e=>{const n=e.dom.getRoot();!e.inline&&(!ms(e)||e.selection.getStart(!0)===n)&&Pi(n).each(o=>{const r=o.getNode(),c=Ja(r)?Pi(r).getOr(o):o;e.selection.setRng(c.toRange())})},X9=e=>{e.bindPendingEventDelegates(),e.initialized=!0,Wu(e),e.focus(!0),Y9(e),e.nodeChanged({initial:!0});const n=UT(e);ee(n)&&n.call(e,e),K9(e)},fP=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,J9=(e,n,o)=>{const r=[fP(e).loadAll(n)];return e.inline?r:r.concat([e.ui.styleSheetLoader.loadAll(o)])},gP=e=>{const n=fP(e),o=uf(e),r=e.contentCSS,c=()=>{n.unloadAll(r),e.inline||e.ui.styleSheetLoader.unloadAll(o)},u=()=>{e.removed?c():e.on("remove",c)};if(e.contentStyles.length>0){let y="";Dt.each(e.contentStyles,x=>{y+=x+`\r
`}),e.dom.addStyle(y)}const f=Promise.all(J9(e,r,o)).then(u).catch(u),b=y2(e);return b&&j9(e,b),f},Q9=e=>{const n=e.getDoc(),o=e.getBody();Tv(e),uy(e)||(n.body.spellcheck=!1,R4.setAttrib(o,"spellcheck","false")),e.quirks=D4(e),Gc(e);const r=J1(e);r!==void 0&&(o.dir=r);const c=ZT(e);c&&e.on("BeforeSetContent",u=>{Dt.each(c,f=>{u.content=u.content.replace(f,b=>"<!--mce:protected "+escape(b)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",u=>{e.composing=u.type==="compositionstart"})},hP=e=>{Of(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},N4=e=>{e.removed!==!0&&(hP(e),X9(e))},$k=e=>{const n=e.getElement();let o=e.getDoc();e.inline&&(R4.addClass(n,"mce-content-body"),e.contentDocument=o=document,e.contentWindow=window,e.bodyElement=n,e.contentAreaContainer=n);const r=e.getBody();r.disabled=!0,e.readonly=iy(e),e.readonly||(e.inline&&R4.getStyle(r,"position",!0)==="static"&&(r.style.position="relative"),r.contentEditable="true"),r.disabled=!1,e.editorUpload=UM(e),e.schema=Pu(dP(e)),e.dom=yr(o,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Ji(e),referrerPolicy:Fl(e),onSetAttrib:f=>{e.dispatch("SetAttrib",f)}}),e.parser=mP(e),e.serializer=dp(q9(e),e),e.selection=D8(e.dom,e.getWin(),e.serializer,e),e.annotator=nS(e),e.formatter=ZM(e),e.undoManager=GM(e),e._nodeChangeDispatcher=new Ck(e),e._selectionOverrides=UU(e),vL(e),a9(e),Kx(e),Of(e)||(d9(e),Z9(e));const c=g$(e);zN(e,c),m3(e),c6(e),o9(e);const u=c8(e);Q9(e),u.fold(()=>{gP(e).then(()=>N4(e))},f=>{e.setProgressState(!0),gP(e).then(()=>{f().then(b=>{e.setProgressState(!1),N4(e),xA(e)},b=>{e.notificationManager.open({type:"error",text:String(b)}),N4(e),xA(e)})})})},pP=(e,n)=>{if(e.inline||(e.getElement().style.visibility=e.orgVisibility),!n&&!e.inline){const o=e.iframeElement,r=OA(ve.fromDom(o),"load",()=>{r.unbind(),e.contentDocument=o.contentDocument,$k(e)});if(us.browser.isFirefox()){const c=e.getDoc();c.open(),c.write(e.iframeHTML),c.close()}else o.srcdoc=e.iframeHTML}else $k(e)},B4=yr.DOM,ez=(e,n,o,r)=>{const c=ve.fromTag("iframe");return r.each(u=>rr(c,"tabindex",u)),Rs(c,o),Rs(c,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:n}),ku(c,"tox-edit-area__iframe"),c},tz=e=>{let n=sO(e)+"<html><head>";g2(e)!==e.documentBaseUrl&&(n+='<base href="'+e.documentBaseURI.getURI()+'" />'),n+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const o=OT(e),r=DT(e),c=e.translate(zT(e));return Y1(e)&&(n+='<meta http-equiv="Content-Security-Policy" content="'+Y1(e)+'" />'),n+=`</head><body id="${o}" class="mce-content-body ${r}" data-id="${e.id}" aria-label="${c}"><br></body></html>`,n},nz=(e,n)=>{const o=e.translate("Rich Text Area"),r=Sc(ve.fromDom(e.getElement()),"tabindex").bind(Br),c=ez(e.id,o,AT(e),r).dom;c.onload=()=>{c.onload=null,e.dispatch("load")},e.contentAreaContainer=n.iframeContainer,e.iframeElement=c,e.iframeHTML=tz(e),B4.add(n.iframeContainer,c)},oz=(e,n)=>{nz(e,n),n.editorContainer&&(n.editorContainer.style.display=e.orgDisplay,e.hidden=B4.isHidden(n.editorContainer)),e.getElement().style.display="none",B4.setAttrib(e.id,"aria-hidden","true"),pP(e)},uC=yr.DOM,sz=(e,n,o)=>{const r=c0.get(o),c=c0.urls[o]||e.documentBaseUrl.replace(/\/$/,"");if(o=Dt.trim(o),r&&Dt.inArray(n,o)===-1){if(e.plugins[o])return;try{const u=r(e,c)||{};e.plugins[o]=u,ee(u.init)&&(u.init(e,c),n.push(o))}catch(u){zb(e,o,u)}}},rz=e=>e.replace(/^\-/,""),az=e=>{const n=[];H(Xp(e),o=>{sz(e,n,rz(o))})},cz=e=>{const n=Dt.trim(Pl(e)),o=e.ui.registry.getAll().icons,r={..._A.get("default").icons,..._A.get(n).icons};on(r,(c,u)=>{go(o,u)||e.ui.registry.addIcon(u,c)})},iz=e=>{const n=ug(e);if(Q(n)){const o=Ib.get(n);e.theme=o(e,Ib.urls[n])||{},ee(e.theme.init)&&e.theme.init(e,Ib.urls[n]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},lz=e=>{const n=Q1(e),o=r0.get(n);e.model=o(e,r0.urls[n])},uz=e=>{const n=e.theme.renderUI;return n?n():yP(e)},dz=e=>{const n=e.getElement(),r=ug(e)(e,n);return r.editorContainer.nodeType&&(r.editorContainer.id=r.editorContainer.id||e.id+"_parent"),r.iframeContainer&&r.iframeContainer.nodeType&&(r.iframeContainer.id=r.iframeContainer.id||e.id+"_iframecontainer"),r.height=r.iframeHeight?r.iframeHeight:n.offsetHeight,r},bP=(e,n)=>({editorContainer:e,iframeContainer:n,api:{}}),vP=e=>{const n=uC.create("div");return uC.insertAfter(n,e),bP(n,n)},yP=e=>{const n=e.getElement();return e.inline?bP(null):vP(n)},wP=e=>{const n=e.getElement();return e.orgDisplay=n.style.display,Q(ug(e))?uz(e):ee(ug(e))?dz(e):yP(e)},mz=(e,n)=>{const o={show:R.from(n.show).getOr(Me),hide:R.from(n.hide).getOr(Me),isEnabled:R.from(n.isEnabled).getOr(Ie),setEnabled:r=>{e.mode.isReadOnly()||R.from(n.setEnabled).each(c=>c(r))}};e.ui={...e.ui,...o}},fz=e=>{e.dispatch("ScriptsLoaded"),cz(e),iz(e),lz(e),az(e);const n=wP(e);mz(e,R.from(n.api).getOr({})),e.editorContainer=n.editorContainer,kx(e),e.inline?pP(e):oz(e,{editorContainer:n.editorContainer,iframeContainer:n.iframeContainer})},pp=yr.DOM,S0=e=>e.charAt(0)==="-",gz=(e,n)=>{const o=X1(n),r=Hu(n);if(!Wc.hasCode(o)&&o!=="en"){const c=Cs(r)?r:`${n.editorManager.baseURL}/langs/${o}.js`;e.add(c).catch(()=>{X8(n,c,o)})}},CP=(e,n)=>{const o=ug(e);if(Q(o)&&!S0(o)&&!go(Ib.urls,o)){const r=Kp(e),c=r?e.documentBaseURI.toAbsolute(r):`themes/${o}/theme${n}.js`;Ib.load(o,c).catch(()=>{J8(e,c,o)})}},hz=(e,n)=>{const o=Q1(e);if(o!=="plugin"&&!go(r0.urls,o)){const r=sy(e),c=Q(r)?e.documentBaseURI.toAbsolute(r):`models/${o}/model${n}.js`;r0.load(o,c).catch(()=>{Hb(e,c,o)})}},pz=e=>R.from(rO(e)).filter(Cs).map(n=>({url:n,name:R.none()})),SP=(e,n,o)=>R.from(n).filter(r=>Cs(r)&&!_A.has(r)).map(r=>({url:`${e.editorManager.baseURL}/icons/${r}/icons${o}.js`,name:R.some(r)})),bz=(e,n,o)=>{const r=SP(n,"default",o),c=pz(n).orThunk(()=>SP(n,Pl(n),""));H(tr([r,c]),u=>{e.add(u.url).catch(()=>{Y8(n,u.url,u.name.getOrUndefined())})})},xP=(e,n)=>{const o=(r,c)=>{c0.load(r,c).catch(()=>{K8(e,c,r)})};on(ev(e),(r,c)=>{o(c,r),e.options.set("plugins",Xp(e).concat(c))}),H(Xp(e),r=>{r=Dt.trim(r),r&&!c0.urls[r]&&!S0(r)&&o(r,`plugins/${r}/plugin${n}.js`)})},vz=e=>{const n=ug(e);return!Q(n)||ye(Ib.get(n))},kP=e=>{const n=Q1(e);return ye(r0.get(n))},yz=(e,n)=>{const o=wd.ScriptLoader,r=()=>{!e.removed&&vz(e)&&kP(e)&&fz(e)};CP(e,n),hz(e,n),gz(o,e),bz(o,e,n),xP(e,n),o.loadQueue().then(r,r)},wz=(e,n)=>Mp.forElement(e,{contentCssCors:ly(n),referrerPolicy:Fl(n)}),Cz=e=>{const n=e.id;Wc.setCode(X1(e));const o=()=>{pp.unbind(window,"ready",o),e.render()};if(!tm.Event.domLoaded){pp.bind(window,"ready",o);return}if(!e.getElement())return;const r=ve.fromDom(e.getElement()),c=Su(r);e.on("remove",()=>{q(r.dom.attributes,f=>Yr(r,f.name)),Rs(r,c)}),e.ui.styleSheetLoader=wz(r,e),ry(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const u=e.getElement().form||pp.getParent(n,"form");u&&(e.formElement=u,ay(e)&&!ni(e.getElement())&&(pp.insertAfter(pp.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=f=>{e.dispatch(f.type,f)},pp.bind(u,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),HT(e)&&!u.submit.nodeType&&!u.submit.length&&!u._mceOldSubmit&&(u._mceOldSubmit=u.submit,u.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),u._mceOldSubmit(u)))),e.windowManager=$M(e),e.notificationManager=BM(e),YT(e)&&e.on("GetContent",f=>{f.save&&(f.content=pp.encode(f.content))}),fg(e)&&e.on("submit",()=>{e.initialized&&e.save()}),Wr(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),yz(e,e.suffix)},Sz=(e,n)=>({sections:he(e),options:he(n)}),TP=Pr().deviceType,EP=TP.isPhone(),xz=TP.isTablet(),dC=e=>{if($t(e))return[];{const n=yt(e)?e:e.split(/[ ,]/),o=re(n,qo);return Z(o,Cs)}},kz=(e,n)=>{const o=ga(n,(r,c)=>ae(e,c));return Sz(o.t,o.f)},_P=(e,n,o={})=>{const r=e.sections(),c=cs(r,n).getOr({});return Dt.extend({},o,c)},mC=(e,n)=>go(e.sections(),n),AP=(e,n)=>mC(e,n)?e.sections()[n]:{},OP=(e,n)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:cs(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...n?{menubar:!1}:{}}),Tz=(e,n)=>{var o;const r=(o=n.external_plugins)!==null&&o!==void 0?o:{};return e&&e.external_plugins?Dt.extend({},e.external_plugins,r):r},Ez=(e,n)=>[...dC(e),...dC(n)],_z=(e,n,o,r)=>e&&mC(n,"mobile")?r:o,DP=(e,n,o,r)=>{const c=dC(o.forced_plugins),u=dC(r.plugins),f=AP(n,"mobile"),b=f.plugins?dC(f.plugins):u,y=_z(e,n,u,b),x=Ez(c,y);return Dt.extend(r,{forced_plugins:c,plugins:x})},RP=(e,n)=>e&&mC(n,"mobile"),Az=(e,n,o,r,c)=>{var u;const f=e?{mobile:OP((u=c.mobile)!==null&&u!==void 0?u:{},n)}:{},b=kz(["mobile"],ak(f,c)),y=Dt.extend(o,r,b.options(),RP(e,b)?_P(b,"mobile"):{},{external_plugins:Tz(r,b.options())});return DP(e,b,r,y)},Oz=(e,n)=>Az(EP||xz,EP,n,e,n),$4=(e,n)=>yM(e,n),Pk=e=>{const n=(r,c)=>{e.formatter.toggle(r,c),e.nodeChanged()},o=r=>()=>{H("left,center,right,justify".split(","),c=>{r!==c&&e.formatter.remove("align"+c)}),r!=="none"&&n("align"+r)};e.editorCommands.addCommands({JustifyLeft:o("left"),JustifyCenter:o("center"),JustifyRight:o("right"),JustifyFull:o("justify"),JustifyNone:o("none")})},Fk=e=>{const n=o=>()=>{const r=e.selection,c=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return se(c,u=>ye(e.formatter.matchNode(u,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")},Vg=e=>{Pk(e),Fk(e)},Ik=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if(n==="paste"&&!o.queryCommandEnabled(n)&&(r=!0),r||!o.queryCommandSupported(n)){let c=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(us.os.isMacOS()||us.os.isiOS())&&(c=c.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:c,type:"error"})}}})},x0=(e,n,o)=>{const r=ve.fromDom(e.getRoot());return aw(r,bt.fromRangeStart(n))?o=o.replace(/^ /,"&nbsp;"):o=o.replace(/^&nbsp;/," "),Lv(r,bt.fromRangeEnd(n))?o=o.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):o=o.replace(/&nbsp;(<br( \/)?>)?$/," "),o},MP=e=>{if(typeof e!="string"){const n=Dt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:n}}return{content:e,details:{}}},Dz=(e,n)=>{const o=e.selection,r=e.dom;return/^ | $/.test(n)?x0(r,o.getRng(),n):n},Lk=(e,n)=>{const{content:o,details:r}=MP(n);Fb(e,{...r,content:Dz(e,o),format:"html",set:!1,selection:!0}).each(c=>{const u=C8(e,c.content,r);cA(e,u,c),e.addVisual()})},NP=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{Lk(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{Lk(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{Lk(e,r)},mceInsertContent:(n,o,r)=>{Lk(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})},Rz={"font-size":"size","font-family":"face"},P4=Wi("font"),Hk=(e,n,o)=>{const r=u=>Co(u,e).orThunk(()=>P4(u)?cs(Rz,e).bind(f=>Sc(u,f)):R.none()),c=u=>Ps(ve.fromDom(n),u);return GS(ve.fromDom(o),u=>r(u),c)},bp=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),e1=(e,n)=>R.from(yr.DOM.getStyle(n,e,!0)),F4=e=>(n,o)=>R.from(o).map(ve.fromDom).filter(Qo).bind(r=>Hk(e,n,r.dom).or(e1(e,r.dom))).getOr(""),Mz=F4("font-size"),Nz=Rt(bp,F4("font-family")),Bz=e=>Pi(e.getBody()).bind(n=>{const o=n.container();return R.from(Zt(o)?o.parentNode:o)}),$z=e=>R.from(e.selection.getRng()).bind(n=>{const o=e.getBody();return n.startContainer===o&&n.startOffset===0?R.none():R.from(e.selection.getStart(!0))}),Pz=(e,n)=>$z(e).orThunk(fe(Bz,e)).map(ve.fromDom).filter(Qo).bind(n),I4=(e,n)=>Pz(e,_(R.some,n)),L4=(e,n)=>{if(/^[0-9.]+$/.test(n)){const o=parseInt(n,10);if(o>=1&&o<=7){const r=ff(e),c=nv(e);return c.length>0?c[o-1]||n:r[o-1]||n}else return n}else return n},Fz=e=>{const n=e.split(/\s*,\s*/);return re(n,o=>o.indexOf(" ")!==-1&&!(wo(o,'"')||wo(o,"'"))?`'${o}'`:o).join(",")},Iz=(e,n)=>{const o=L4(e,n);e.formatter.toggle("fontname",{value:Fz(o)}),e.nodeChanged()},Lz=e=>I4(e,n=>Nz(e.getBody(),n.dom)).getOr(""),ZU=(e,n)=>{e.formatter.toggle("fontsize",{value:L4(e,n)}),e.nodeChanged()},Hz=e=>I4(e,n=>Mz(e.getBody(),n.dom)).getOr(""),H4=e=>I4(e,n=>{const o=ve.fromDom(e.getBody()),r=GS(n,u=>Co(u,"line-height"),fe(Ps,o)),c=()=>{const u=parseFloat(Ve(n,"line-height")),f=parseFloat(Ve(n,"font-size"));return String(u/f)};return r.getOrThunk(c)}).getOr(""),zz=(e,n)=>{e.formatter.toggle("lineheight",{value:String(n)}),e.nodeChanged()},Vz=e=>{const n=(o,r)=>{e.formatter.toggle(o,r),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>{n(o)},"ForeColor,HiliteColor":(o,r,c)=>{n(o,{value:c})},BackColor:(o,r,c)=>{n("hilitecolor",{value:c})},FontName:(o,r,c)=>{Iz(e,c)},FontSize:(o,r,c)=>{ZU(e,c)},LineHeight:(o,r,c)=>{zz(e,c)},Lang:(o,r,c)=>{var u;n(o,{value:c.code,customValue:(u=c.customCode)!==null&&u!==void 0?u:null})},RemoveFormat:o=>{e.formatter.remove(o)},mceBlockQuote:()=>{n("blockquote")},FormatBlock:(o,r,c)=>{n(Q(c)?c:"p")},mceToggleFormat:(o,r,c)=>{n(c)}})},BP=e=>{const n=o=>e.formatter.match(o);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":o=>n(o),mceBlockQuote:()=>n("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>Lz(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>Hz(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>H4(e))},Uz=e=>{Vz(e),BP(e)},$P=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},Wz=e=>{e.editorCommands.addCommands({Indent:()=>{hL(e)},Outdent:()=>{FN(e)}}),e.editorCommands.addCommands({Outdent:()=>c3(e)},"state")},z4=e=>{const n=(o,r,c)=>{const u=Q(c)?{href:c}:c,f=e.dom.getParent(e.selection.getNode(),"a");ht(u)&&Q(u.href)&&(u.href=u.href.replace(/ /g,"%20"),(!f||!u.href)&&e.formatter.remove("link"),u.href&&e.formatter.apply("link",u,f))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0);return}e.formatter.remove("link")},mceInsertLink:n,createLink:n})},Zz=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{e.getDoc().execCommand(n);const o=e.dom.getParent(e.selection.getNode(),"ol,ul");if(o){const r=o.parentNode;if(r&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(r.nodeName)){const c=e.selection.getBookmark();e.dom.split(r,o),e.selection.moveToBookmark(c)}}}})},jz=e=>{e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":n=>{const o=e.dom.getParent(e.selection.getNode(),"ul,ol");return o&&(n==="insertunorderedlist"&&o.tagName==="UL"||n==="insertorderedlist"&&o.tagName==="OL")}},"state")},Gz=e=>{Zz(e),jz(e)},qz=e=>{e.editorCommands.addCommands({insertParagraph:()=>{yk(nH,e)},mceInsertNewLine:(n,o,r)=>{wk(e,r)},InsertLineBreak:(n,o,r)=>{yk(e$,e)}})},PP=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let c=0;e.dom.getParent(e.selection.getNode(),u=>$n(u)&&c++===r?(e.selection.select(u),!1):!0,e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),si);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})},V4=e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const c=r??e.selection.getNode();if(c!==e.getBody()){const u=e.selection.getBookmark();e.dom.remove(c,!0),e.selection.moveToBookmark(u)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{TO(e,r===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},FP=e=>{Vg(e),Ik(e),$P(e),PP(e),NP(e),z4(e),Wz(e),qz(e),Gz(e),Uz(e),V4(e)},U4=["toggleview"],IP=e=>ae(U4,e.toLowerCase());class Kz{constructor(n){this.commands={state:{},exec:{},value:{}},this.editor=n}execCommand(n,o=!1,r,c){const u=this.editor,f=n.toLowerCase(),b=c==null?void 0:c.skip_focus;if(u.removed||(f!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)&&!b?u.focus():Bc(u)),u.dispatch("BeforeExecCommand",{command:n,ui:o,value:r}).isDefaultPrevented()))return!1;const x=this.commands.exec[f];return ee(x)?(x(f,o,r),u.dispatch("ExecCommand",{command:n,ui:o,value:r}),!0):!1}queryCommandState(n){if(!IP(n)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const o=n.toLowerCase(),r=this.commands.state[o];return ee(r)?r(o):!1}queryCommandValue(n){if(!IP(n)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const o=n.toLowerCase(),r=this.commands.value[o];return ee(r)?r(o):""}addCommands(n,o="exec"){const r=this.commands;on(n,(c,u)=>{H(u.toLowerCase().split(","),f=>{r[o][f]=c})})}addCommand(n,o,r){const c=n.toLowerCase();this.commands.exec[c]=(u,f,b)=>o.call(r??this.editor,f,b)}queryCommandSupported(n){const o=n.toLowerCase();return!!this.commands.exec[o]}addQueryStateHandler(n,o,r){this.commands.state[n.toLowerCase()]=()=>o.call(r??this.editor)}addQueryValueHandler(n,o,r){this.commands.value[n.toLowerCase()]=()=>o.call(r??this.editor)}}const k0="data-mce-contenteditable",Yz=(e,n,o)=>{Vd(e,n)&&!o?Xl(e,n):o&&ku(e,n)},zk=(e,n,o)=>{try{e.getDoc().execCommand(n,!1,String(o))}catch{}},Vk=(e,n)=>{e.dom.contentEditable=n?"true":"false"},Xz=e=>{H(Ms(e,'*[contenteditable="true"]'),n=>{rr(n,k0,"true"),Vk(n,!1)})},Jz=e=>{H(Ms(e,`*[${k0}="true"]`),n=>{Yr(n,k0),Vk(n,!0)})},jU=e=>{R.from(e.selection.getNode()).each(n=>{n.removeAttribute("data-mce-selected")})},GU=e=>{e.selection.setRng(e.selection.getRng())},LP=(e,n)=>{const o=ve.fromDom(e.getBody());Yz(o,"mce-content-readonly",n),n?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),jU(e),e.readonly=!0,Vk(o,!1),Xz(o)):(e.readonly=!1,Vk(o,!0),Jz(o),zk(e,"StyleWithCSS",!1),zk(e,"enableInlineTableEditing",!1),zk(e,"enableObjectResizing",!1),UE(e)&&e.focus(),GU(e),e.nodeChanged())},vp=e=>e.readonly,HP=e=>{e.parser.addAttributeFilter("contenteditable",n=>{vp(e)&&H(n,o=>{o.attr(k0,o.attr("contenteditable")),o.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(k0,n=>{vp(e)&&H(n,o=>{o.attr("contenteditable",o.attr(k0))})}),e.serializer.addTempAttr(k0)},Qz=e=>{e.serializer?HP(e):e.on("PreInit",()=>{HP(e)})},eV=e=>e.type==="click",qU=["copy"],KU=e=>ae(qU,e.type),YU=(e,n)=>fd(n,"a",r=>Ps(r,ve.fromDom(e.getBody()))).bind(r=>Sc(r,"href")),tV=(e,n)=>{if(eV(n)&&!Zn.metaKeyPressed(n)){const o=ve.fromDom(n.target);YU(e,o).each(r=>{if(n.preventDefault(),/^#/.test(r)){const c=e.dom.select(`${r},[name="${zn(r,"#")}"]`);c.length&&e.selection.scrollIntoView(c[0],!0)}else window.open(r,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else KU(n)&&e.dispatch(n.type,n)},XU=e=>{e.on("ShowCaret",n=>{vp(e)&&n.preventDefault()}),e.on("ObjectSelected",n=>{vp(e)&&n.preventDefault()})},nV=Dt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Ug{constructor(n){this.bindings={},this.settings=n||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||kt}static isNative(n){return!!nV[n.toLowerCase()]}fire(n,o){return this.dispatch(n,o)}dispatch(n,o){const r=n.toLowerCase(),c=wh(r,o??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(c);const u=this.bindings[r];if(u)for(let f=0,b=u.length;f<b;f++){const y=u[f];if(!y.removed){if(y.once&&this.off(r,y.func),c.isImmediatePropagationStopped())return c;if(y.func.call(this.scope,c)===!1)return c.preventDefault(),c}}return c}on(n,o,r,c){if(o===!1&&(o=kt),o){const u={func:o,removed:!1};c&&Dt.extend(u,c);const f=n.toLowerCase().split(" ");let b=f.length;for(;b--;){const y=f[b];let x=this.bindings[y];x||(x=[],this.toggleEvent(y,!0)),r?x=[u,...x]:x=[...x,u],this.bindings[y]=x}}return this}off(n,o){if(n){const r=n.toLowerCase().split(" ");let c=r.length;for(;c--;){const u=r[c];let f=this.bindings[u];if(!u)return on(this.bindings,(b,y)=>{this.toggleEvent(y,!1),delete this.bindings[y]}),this;if(f){if(!o)f.length=0;else{const b=z(f,y=>y.func===o);f=b.fail,this.bindings[u]=f,H(b.pass,y=>{y.removed=!0})}f.length||(this.toggleEvent(n,!1),delete this.bindings[u])}}}else on(this.bindings,(r,c)=>{this.toggleEvent(c,!1)}),this.bindings={};return this}once(n,o,r){return this.on(n,o,r,{once:!0})}has(n){n=n.toLowerCase();const o=this.bindings[n];return!(!o||o.length===0)}}const t1=e=>(e._eventDispatcher||(e._eventDispatcher=new Ug({scope:e,toggleEvent:(n,o)=>{Ug.isNative(n)&&e.toggleNativeEvent&&e.toggleNativeEvent(n,o)}})),e._eventDispatcher),T0={fire(e,n,o){return this.dispatch(e,n,o)},dispatch(e,n,o){const r=this;if(r.removed&&e!=="remove"&&e!=="detach")return wh(e.toLowerCase(),n??{},r);const c=t1(r).dispatch(e,n);if(o!==!1&&r.parent){let u=r.parent();for(;u&&!c.isPropagationStopped();)u.dispatch(e,c,!1),u=u.parent?u.parent():void 0}return c},on(e,n,o){return t1(this).on(e,n,o)},off(e,n){return t1(this).off(e,n)},once(e,n){return t1(this).once(e,n)},hasEventListeners(e){return t1(this).has(e)}},fC=yr.DOM;let yp;const gC=(e,n)=>{if(n==="selectionchange")return e.getDoc();if(!e.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(n))return e.getDoc().documentElement;const o=oy(e);return o?(e.eventRoot||(e.eventRoot=fC.select(o)[0]),e.eventRoot):e.getBody()},oV=e=>!e.hidden&&!vp(e),zP=(e,n,o)=>{oV(e)?e.dispatch(n,o):vp(e)&&tV(e,o)},VP=(e,n)=>{if(e.delegates||(e.delegates={}),e.delegates[n]||e.removed)return;const o=gC(e,n);if(oy(e)){if(yp||(yp={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||yp&&(on(yp,(c,u)=>{e.dom.unbind(gC(e,u))}),yp=null)})),yp[n])return;const r=c=>{const u=c.target,f=e.editorManager.get();let b=f.length;for(;b--;){const y=f[b].getBody();(y===u||fC.isChildOf(u,y))&&zP(f[b],n,c)}};yp[n]=r,fC.bind(o,n,r)}else{const r=c=>{zP(e,n,c)};fC.bind(o,n,r),e.delegates[n]=r}},UP={...T0,bindPendingEventDelegates(){const e=this;Dt.each(e._pendingNativeEvents,n=>{VP(e,n)})},toggleNativeEvent(e,n){const o=this;e==="focus"||e==="blur"||o.removed||(n?o.initialized?VP(o,e):o._pendingNativeEvents?o._pendingNativeEvents.push(e):o._pendingNativeEvents=[e]:o.initialized&&o.delegates&&(o.dom.unbind(gC(o,e),e,o.delegates[e]),delete o.delegates[e]))},unbindAllNativeEvents(){const e=this,n=e.getBody(),o=e.dom;e.delegates&&(on(e.delegates,(r,c)=>{e.dom.unbind(gC(e,c),c,r)}),delete e.delegates),!e.inline&&n&&o&&(n.onload=null,o.unbind(e.getWin()),o.unbind(e.getDoc())),o&&(o.unbind(n),o.unbind(e.getContainer()))}},n1=e=>Q(e)?{value:e.split(/[ ,]/),valid:!0}:Le(e,Q)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},sV=e=>{const n=(()=>{switch(e){case"array":return yt;case"boolean":return Ot;case"function":return ee;case"number":return at;case"object":return ht;case"string":return Q;case"string[]":return n1;case"object[]":return o=>Le(o,ht);case"regexp":return o=>Te(o,RegExp);default:return Ie}})();return o=>W4(o,n,`The value must be a ${e}.`)},WP=e=>Q(e.processor),ZP=(e,n)=>{const o=xs(n.message)?"":`. ${n.message}`;return e+o},hC=e=>e.valid,W4=(e,n,o="")=>{const r=n(e);return Ot(r)?r?{value:e,valid:!0}:{valid:!1,message:o}:r},rV=(e,n,o)=>{if(!Bn(n)){const r=W4(n,o);if(hC(r))return r.value;console.error(ZP(`Invalid default value passed for the "${e}" option`,r))}},aV=(e,n)=>{const o={},r={},c=(P,L,ce)=>{const ie=W4(L,ce);return hC(ie)?(r[P]=ie.value,!0):(console.warn(ZP(`Invalid value passed for the ${P} option`,ie)),!1)},u=(P,L)=>{const ce=WP(L)?sV(L.processor):L.processor,ie=rV(P,L.default,ce);o[P]={...L,default:ie,processor:ce},cs(r,P).orThunk(()=>cs(n,P)).each(ue=>c(P,ue,ce))},f=P=>go(o,P);return{register:u,isRegistered:f,get:P=>cs(r,P).orThunk(()=>cs(o,P).map(L=>L.default)).getOrUndefined(),set:(P,L)=>{if(f(P)){const ce=o[P];return ce.immutable?(console.error(`"${P}" is an immutable option and cannot be updated`),!1):c(P,L,ce.processor)}else return console.warn(`"${P}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:P=>{const L=f(P);return L&&delete r[P],L},isSet:P=>go(r,P)}},jP=["design","readonly"],GP=(e,n,o,r)=>{const c=o[n.get()],u=o[r];try{u.activate()}catch(f){console.error(`problem while activating editor mode ${r}:`,f);return}c.deactivate(),c.editorReadOnly!==u.editorReadOnly&&LP(e,u.editorReadOnly),n.set(r),oS(e,r)},cV=(e,n,o,r)=>{if(r!==o.get()){if(!go(n,r))throw new Error(`Editor mode '${r}' is invalid`);e.initialized?GP(e,o,n,r):e.on("init",()=>GP(e,o,n,r))}},iV=(e,n,o)=>{if(ae(jP,n))throw new Error(`Cannot override default mode ${n}`);return{...e,[n]:{...o,deactivate:()=>{try{o.deactivate()}catch(r){console.error(`problem while deactivating editor mode ${n}:`,r)}}}}},lV=e=>{const n=fc("design"),o=fc({design:{activate:Me,deactivate:Me,editorReadOnly:!1},readonly:{activate:Me,deactivate:Me,editorReadOnly:!0}});return Qz(e),XU(e),{isReadOnly:()=>vp(e),set:r=>cV(e,o.get(),n,r),get:()=>n.get(),register:(r,c)=>{o.set(iV(o.get(),r,c))}}},pC=Dt.each,Z4=Dt.explode,uV={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},qa=Dt.makeMap("alt,ctrl,shift,meta,access"),dV=e=>e in qa,mV=e=>{const n={},o=us.os.isMacOS()||us.os.isiOS();pC(Z4(e.toLowerCase(),"+"),u=>{dV(u)?n[u]=!0:/^[0-9]{2,}$/.test(u)?n.keyCode=parseInt(u,10):(n.charCode=u.charCodeAt(0),n.keyCode=uV[u]||u.toUpperCase().charCodeAt(0))});const r=[n.keyCode];let c;for(c in qa)n[c]?r.push(c):n[c]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,o?n.ctrl=!0:n.shift=!0),n.meta&&(o?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class j4{constructor(n){this.shortcuts={},this.pendingPatterns=[],this.editor=n;const o=this;n.on("keyup keypress keydown",r=>{(o.hasModifier(r)||o.isFunctionKey(r))&&!r.isDefaultPrevented()&&(pC(o.shortcuts,c=>{o.matchShortcut(r,c)&&(o.pendingPatterns=c.subpatterns.slice(0),r.type==="keydown"&&o.executeShortcutAction(c))}),o.matchShortcut(r,o.pendingPatterns[0])&&(o.pendingPatterns.length===1&&r.type==="keydown"&&o.executeShortcutAction(o.pendingPatterns[0]),o.pendingPatterns.shift()))})}add(n,o,r,c){const u=this,f=u.normalizeCommandFunc(r);return pC(Z4(Dt.trim(n)),b=>{const y=u.createShortcut(b,o,f,c);u.shortcuts[y.id]=y}),!0}remove(n){const o=this.createShortcut(n);return this.shortcuts[o.id]?(delete this.shortcuts[o.id],!0):!1}normalizeCommandFunc(n){const o=this,r=n;return typeof r=="string"?()=>{o.editor.execCommand(r,!1,null)}:Dt.isArray(r)?()=>{o.editor.execCommand(r[0],r[1],r[2])}:r}createShortcut(n,o,r,c){const u=Dt.map(Z4(n,">"),mV);return u[u.length-1]=Dt.extend(u[u.length-1],{func:r,scope:c||this.editor}),Dt.extend(u[0],{desc:this.editor.translate(o),subpatterns:u.slice(1)})}hasModifier(n){return n.altKey||n.ctrlKey||n.metaKey}isFunctionKey(n){return n.type==="keydown"&&n.keyCode>=112&&n.keyCode<=123}matchShortcut(n,o){return!o||o.ctrl!==n.ctrlKey||o.meta!==n.metaKey||o.alt!==n.altKey||o.shift!==n.shiftKey?!1:n.keyCode===o.keyCode||n.charCode&&n.charCode===o.charCode?(n.preventDefault(),!0):!1}executeShortcutAction(n){return n.func?n.func.call(n.scope):null}}const qP=()=>{const e={},n={},o={},r={},c={},u={},f={},b={},y=(M,P)=>(L,ce)=>{M[L.toLowerCase()]={...ce,type:P}},x=(M,P)=>r[M.toLowerCase()]=P;return{addButton:y(e,"button"),addGroupToolbarButton:y(e,"grouptoolbarbutton"),addToggleButton:y(e,"togglebutton"),addMenuButton:y(e,"menubutton"),addSplitButton:y(e,"splitbutton"),addMenuItem:y(n,"menuitem"),addNestedMenuItem:y(n,"nestedmenuitem"),addToggleMenuItem:y(n,"togglemenuitem"),addAutocompleter:y(o,"autocompleter"),addContextMenu:y(c,"contextmenu"),addContextToolbar:y(u,"contexttoolbar"),addContextForm:y(u,"contextform"),addSidebar:y(f,"sidebar"),addView:y(b,"views"),addIcon:x,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:c,contextToolbars:u,sidebars:f,views:b})}},G4=()=>{const e=qP();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},o1=yr.DOM,KP=Dt.extend,fV=Dt.each;class Uk{constructor(n,o,r){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=r,this.documentBaseUrl=r.documentBaseURL,KP(this,UP);const c=this;this.id=n,this.hidden=!1;const u=Oz(r.defaultOptions,o);this.options=aV(c,u),Q0(c);const f=this.options.get;f("deprecation_warnings")&&OM(o,u);const b=f("suffix");b&&(r.suffix=b),this.suffix=r.suffix;const y=f("base_url");y&&r._setBaseUrl(y),this.baseUri=r.baseURI;const x=Fl(c);x&&(wd.ScriptLoader._setReferrerPolicy(x),yr.DOM.styleSheetLoader._setReferrerPolicy(x));const M=ly(c);ye(M)&&yr.DOM.styleSheetLoader._setContentCssCors(M),wi.languageLoad=f("language_load"),wi.baseURL=r.baseURL,this.setDirty(!1),this.documentBaseURI=new Nd(g2(c),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=ry(c),this.hasVisual=S2(c),this.shortcuts=new j4(this),this.editorCommands=new Kz(this),FP(this);const P=f("cache_suffix");P&&(us.cacheSuffix=P.replace(/^[\?\&]+/,"")),this.ui={registry:G4(),styleSheetLoader:void 0,show:Me,hide:Me,setEnabled:Me,isEnabled:Ie},this.mode=lV(c),r.dispatch("SetupEditor",{editor:this});const L=VT(c);ee(L)&&L.call(c,c)}render(){Cz(this)}focus(n){this.execCommand("mceFocus",!1,n)}hasFocus(){return Eb(this)}translate(n){return Wc.translate(n)}getParam(n,o,r){const c=this.options;return c.isRegistered(n)||(ye(r)?c.register(n,{processor:r,default:o}):c.register(n,{processor:Ie,default:o})),!c.isSet(n)&&!Bn(o)?o:c.get(n)}hasPlugin(n,o){return ae(Xp(this),n)?o?c0.get(n)!==void 0:!0:!1}nodeChanged(n){this._nodeChangeDispatcher.nodeChanged(n)}addCommand(n,o,r){this.editorCommands.addCommand(n,o,r)}addQueryStateHandler(n,o,r){this.editorCommands.addQueryStateHandler(n,o,r)}addQueryValueHandler(n,o,r){this.editorCommands.addQueryValueHandler(n,o,r)}addShortcut(n,o,r,c){this.shortcuts.add(n,o,r,c)}execCommand(n,o,r,c){return this.editorCommands.execCommand(n,o,r,c)}queryCommandState(n){return this.editorCommands.queryCommandState(n)}queryCommandValue(n){return this.editorCommands.queryCommandValue(n)}queryCommandSupported(n){return this.editorCommands.queryCommandSupported(n)}show(){const n=this;n.hidden&&(n.hidden=!1,n.inline?n.getBody().contentEditable="true":(o1.show(n.getContainer()),o1.hide(n.id)),n.load(),n.dispatch("show"))}hide(){const n=this;n.hidden||(n.save(),n.inline?(n.getBody().contentEditable="false",n===n.editorManager.focusedEditor&&(n.editorManager.focusedEditor=null)):(o1.hide(n.getContainer()),o1.setStyle(n.id,"display",n.orgDisplay)),n.hidden=!0,n.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(n,o){this.dispatch("ProgressState",{state:n,time:o})}load(n={}){const o=this,r=o.getElement();if(o.removed)return"";if(r){const c={...n,load:!0},u=ni(r)?r.value:r.innerHTML,f=o.setContent(u,c);return c.no_events||o.dispatch("LoadContent",{...c,element:r}),f}else return""}save(n={}){const o=this;let r=o.getElement();if(!r||!o.initialized||o.removed)return"";const c={...n,save:!0,element:r};let u=o.getContent(c);const f={...c,content:u};if(f.no_events||o.dispatch("SaveContent",f),f.format==="raw"&&o.dispatch("RawSaveContent",f),u=f.content,ni(r))r.value=u;else{(n.is_removing||!o.inline)&&(r.innerHTML=u);const b=o1.getParent(o.id,"form");b&&fV(b.elements,y=>y.name===o.id?(y.value=u,!1):!0)}return f.element=c.element=r=null,f.set_dirty!==!1&&o.setDirty(!1),u}setContent(n,o){return Cx(this,n,o)}getContent(n){return TA(this,n)}insertContent(n,o){o&&(n=KP({content:n},o)),this.execCommand("mceInsertContent",!1,n)}resetContent(n){n===void 0?Cx(this,this.startContent,{format:"raw"}):Cx(this,n),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(n){const o=!this.isNotDirty;this.isNotDirty=!n,n&&n!==o&&this.dispatch("dirty")}getContainer(){const n=this;return n.container||(n.container=n.editorContainer||o1.get(n.id+"_parent")),n.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=o1.get(this.id)),this.targetElm}getWin(){const n=this;if(!n.contentWindow){const o=n.iframeElement;o&&(n.contentWindow=o.contentWindow)}return n.contentWindow}getDoc(){const n=this;if(!n.contentDocument){const o=n.getWin();o&&(n.contentDocument=o.document)}return n.contentDocument}getBody(){var n,o;const r=this.getDoc();return(o=(n=this.bodyElement)!==null&&n!==void 0?n:r==null?void 0:r.body)!==null&&o!==void 0?o:null}convertURL(n,o,r){const c=this,u=c.options.get,f=WT(c);return ee(f)?f.call(c,n,r,!0,o):!u("convert_urls")||r==="link"||ht(r)&&r.nodeName==="LINK"||n.indexOf("file:")===0||n.length===0?n:u("relative_urls")?c.documentBaseURI.toRelative(n):(n=c.documentBaseURI.toAbsolute(n,u("remove_script_host")),n)}addVisual(n){$4(this,n)}remove(){H8(this)}destroy(n){Df(this,n)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const E0=yr.DOM,Wk=Dt.each;let YP=!1,Wg,$a=[];const Zk=e=>{const n=e.type;Wk(wp.get(),o=>{switch(n){case"scroll":o.dispatch("ScrollWindow",e);break;case"resize":o.dispatch("ResizeWindow",e);break}})},XP=e=>{if(e!==YP){const n=yr.DOM;e?(n.bind(window,"resize",Zk),n.bind(window,"scroll",Zk)):(n.unbind(window,"resize",Zk),n.unbind(window,"scroll",Zk)),YP=e}},JP=e=>{const n=$a;return $a=Z($a,o=>e!==o),wp.activeEditor===e&&(wp.activeEditor=$a.length>0?$a[0]:null),wp.focusedEditor===e&&(wp.focusedEditor=null),n.length!==$a.length},gV=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(JP(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},hV=document.compatMode!=="CSS1Compat",wp={...T0,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"3.2",releaseDate:"2023-02-22",i18n:Wc,activeEditor:null,focusedEditor:null,setup(){const e=this;let n="",o="",r=Nd.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(r)&&(r=r.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(r)||(r+="/"));const c=window.tinymce||window.tinyMCEPreInit;if(c)n=c.base||c.baseURL,o=c.suffix;else{const u=document.getElementsByTagName("script");for(let f=0;f<u.length;f++){const b=u[f].src||"";if(b==="")continue;const y=b.substring(b.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(b)){y.indexOf(".min")!==-1&&(o=".min"),n=b.substring(0,b.lastIndexOf("/"));break}}if(!n&&document.currentScript){const f=document.currentScript.src;f.indexOf(".min")!==-1&&(o=".min"),n=f.substring(0,f.lastIndexOf("/"))}}e.baseURL=new Nd(r).toAbsolute(n),e.documentBaseURL=r,e.baseURI=new Nd(e.baseURL),e.suffix=o,bF(e)},overrideDefaults(e){const n=e.base_url;n&&this._setBaseUrl(n);const o=e.suffix;o&&(this.suffix=o),this.defaultOptions=e;const r=e.plugin_base_urls;r!==void 0&&on(r,(c,u)=>{wi.PluginManager.urls[u]=c})},init(e){const n=this;let o;const r=Dt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),c=(M,P)=>M.inline&&P.tagName.toLowerCase()in r,u=M=>{let P=M.id;return P||(P=cs(M,"name").filter(L=>!E0.get(L)).getOrThunk(E0.uniqueId),M.setAttribute("id",P)),P},f=M=>{const P=e[M];if(P)return P.apply(n,[])},b=M=>us.browser.isIE()||us.browser.isEdge()?(Vb("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):hV?(Vb("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):Q(M.selector)?E0.select(M.selector):ye(M.target)?[M.target]:[];let y=M=>{o=M};const x=()=>{let M=0;const P=[];let L;const ce=(ie,te,ue)=>{const Be=new Uk(ie,te,n);P.push(Be),Be.on("init",()=>{++M===L.length&&y(P)}),Be.targetElm=Be.targetElm||ue,Be.render()};E0.unbind(window,"ready",x),f("onpageload"),L=qe(b(e)),Dt.each(L,ie=>{gV(n.get(ie.id))}),L=Dt.grep(L,ie=>!n.get(ie.id)),L.length===0?y([]):Wk(L,ie=>{c(e,ie)?Vb("Could not initialize inline editor on invalid inline target element",ie):ce(u(ie),e,ie)})};return E0.bind(window,"ready",x),new Promise(M=>{o?M(o):y=P=>{M(P)}})},get(e){return arguments.length===0?$a.slice(0):Q(e)?ot($a,n=>n.id===e).getOr(null):at(e)&&$a[e]?$a[e]:null},add(e){const n=this,o=n.get(e.id);return o===e||(o===null&&$a.push(e),XP(!0),n.activeEditor=e,n.dispatch("AddEditor",{editor:e}),Wg||(Wg=r=>{const c=n.dispatch("BeforeUnload");if(c.returnValue)return r.preventDefault(),r.returnValue=c.returnValue,c.returnValue},window.addEventListener("beforeunload",Wg))),e},createEditor(e,n){return this.add(new Uk(e,n,this))},remove(e){const n=this;let o;if(!e){for(let r=$a.length-1;r>=0;r--)n.remove($a[r]);return}if(Q(e)){Wk(E0.select(e),r=>{o=n.get(r.id),o&&n.remove(o)});return}return o=e,Y(n.get(o.id))?null:(JP(o)&&n.dispatch("RemoveEditor",{editor:o}),$a.length===0&&window.removeEventListener("beforeunload",Wg),o.remove(),XP($a.length>0),o)},execCommand(e,n,o){var r;const c=this,u=ht(o)?(r=o.id)!==null&&r!==void 0?r:o.index:o;switch(e){case"mceAddEditor":{if(!c.get(u)){const f=o.options;new Uk(u,f,c).render()}return!0}case"mceRemoveEditor":{const f=c.get(u);return f&&f.remove(),!0}case"mceToggleEditor":{const f=c.get(u);return f?(f.isHidden()?f.show():f.hide(),!0):(c.execCommand("mceAddEditor",!1,o),!0)}}return c.activeEditor?c.activeEditor.execCommand(e,n,o):!1},triggerSave:()=>{Wk($a,e=>{e.save()})},addI18n:(e,n)=>{Wc.add(e,n)},translate:e=>Wc.translate(e),setActive(e){const n=this.activeEditor;this.activeEditor!==e&&(n&&n.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:n})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Nd(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Nd(this.baseURL)}};wp.setup();const pV=(()=>{const e=nf(),n=u=>({items:u,types:ze(u),getType:f=>cs(u,f).getOrUndefined()}),o=u=>{e.set(u)},r=()=>e.get().getOrUndefined(),c=e.clear;return{FakeClipboardItem:n,write:o,read:r,clear:c}})(),QP=Math.min,bC=Math.max,jk=Math.round,eF=(e,n,o)=>{let r=n.x,c=n.y;const u=e.w,f=e.h,b=n.w,y=n.h,x=(o||"").split("");return x[0]==="b"&&(c+=y),x[1]==="r"&&(r+=b),x[0]==="c"&&(c+=jk(y/2)),x[1]==="c"&&(r+=jk(b/2)),x[3]==="b"&&(c-=f),x[4]==="r"&&(r-=u),x[3]==="c"&&(c-=jk(f/2)),x[4]==="c"&&(r-=jk(u/2)),vC(r,c,u,f)},bV=(e,n,o,r)=>{for(let c=0;c<r.length;c++){const u=eF(e,n,r[c]);if(u.x>=o.x&&u.x+u.w<=o.w+o.x&&u.y>=o.y&&u.y+u.h<=o.h+o.y)return r[c]}return null},vV=(e,n,o)=>vC(e.x-n,e.y-o,e.w+n*2,e.h+o*2),yV=(e,n)=>{const o=bC(e.x,n.x),r=bC(e.y,n.y),c=QP(e.x+e.w,n.x+n.w),u=QP(e.y+e.h,n.y+n.h);return c-o<0||u-r<0?null:vC(o,r,c-o,u-r)},wV=(e,n,o)=>{let r=e.x,c=e.y,u=e.x+e.w,f=e.y+e.h;const b=n.x+n.w,y=n.y+n.h,x=bC(0,n.x-r),M=bC(0,n.y-c),P=bC(0,u-b),L=bC(0,f-y);return r+=x,c+=M,o&&(u+=x,f+=M,r-=P,c-=L),u-=P,f-=L,vC(r,c,u-r,f-c)},vC=(e,n,o,r)=>({x:e,y:n,w:o,h:r}),CV={inflate:vV,relativePosition:eF,findBestRelativePosition:bV,intersect:yV,clamp:wV,create:vC,fromClientRect:e=>vC(e.left,e.top,e.width,e.height)},SV=(e,n,o=1e3)=>{let r=!1,c=null;const u=x=>(...M)=>{r||(r=!0,c!==null&&(clearTimeout(c),c=null),x.apply(null,M))},f=u(e),b=u(n);return{start:(...x)=>{!r&&c===null&&(c=setTimeout(()=>b.apply(null,x),o))},resolve:f,reject:b}},xV=(()=>{const e={},n={};return{load:(u,f)=>{const b=`Script at URL "${f}" failed to load`,y=`Script at URL "${f}" did not call \`tinymce.Resource.add('${u}', data)\` within 1 second`;if(e[u]!==void 0)return e[u];{const x=new Promise((M,P)=>{const L=SV(M,P);n[u]=L.resolve,wd.ScriptLoader.loadScript(f).then(()=>L.start(y),()=>L.reject(b))});return e[u]=x,x}},add:(u,f)=>{n[u]!==void 0&&(n[u](f),delete n[u]),e[u]=Promise.resolve(f)},unload:u=>{delete e[u]}}})(),kV=()=>(()=>{let e={},n=[];const o={getItem:r=>{const c=e[r];return c||null},setItem:(r,c)=>{n.push(r),e[r]=String(c)},key:r=>n[r],removeItem:r=>{n=n.filter(c=>c===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})();let yC;try{const e="__storage_test__";yC=window.localStorage,yC.setItem(e,e),yC.removeItem(e)}catch{yC=kV()}var TV=yC;const EV={geom:{Rect:CV},util:{Delay:Ii,Tools:Dt,VK:Zn,URI:Nd,EventDispatcher:Ug,Observable:T0,I18n:Wc,LocalStorage:TV,ImageUploader:VM},dom:{EventUtils:tm,TreeWalker:ya,TextSeeker:sf,DOMUtils:yr,ScriptLoader:wd,RangeUtils:Og,Serializer:dp,StyleSheetLoader:Yd,ControlSelection:Hl,BookmarkManager:Uu,Selection:D8,Event:tm.Event},html:{Styles:_1,Entities:tc,Node:tl,Schema:Pu,DomParser:mu,Writer:zO,Serializer:tp},Env:us,AddOnManager:wi,Annotator:nS,Formatter:ZM,UndoManager:GM,EditorCommands:Kz,WindowManager:$M,NotificationManager:BM,EditorObservable:UP,Shortcuts:j4,Editor:Uk,FocusManager:el,EditorManager:wp,DOM:yr.DOM,ScriptLoader:wd.ScriptLoader,PluginManager:c0,ThemeManager:Ib,ModelManager:r0,IconManager:_A,Resource:xV,FakeClipboard:pV,trim:Dt.trim,isArray:Dt.isArray,is:Dt.is,toArray:Dt.toArray,makeMap:Dt.makeMap,each:Dt.each,map:Dt.map,grep:Dt.grep,inArray:Dt.inArray,extend:Dt.extend,walk:Dt.walk,resolve:Dt.resolve,explode:Dt.explode,_addCacheSuffix:Dt._addCacheSuffix},tF=Dt.extend(wp,EV),_V=e=>{try{Ht.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(tF),_V(tF)})()})(Bj);const $j=XV;var Pj=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],Fj=function(Ht){return Pj.map(function(yn){return yn.toLowerCase()}).indexOf(Ht.toLowerCase())!==-1},Ij=function(Ht,yn,dn){Object.keys(yn).filter(Fj).forEach(function(Sn){var Qt=yn[Sn];typeof Qt=="function"&&(Sn==="onInit"?Qt(Ht,dn):dn.on(Sn.substring(2),function(Dn){return Qt(Dn,dn)}))})},Lj=function(Ht,yn,dn,Sn){var Qt=Ht.modelEvents?Ht.modelEvents:null,Dn=Array.isArray(Qt)?Qt.join(" "):Qt;eO(Sn,function(xn,Nt){dn&&typeof xn=="string"&&xn!==Nt&&xn!==dn.getContent({format:Ht.outputFormat})&&dn.setContent(xn)}),dn.on(Dn||"change input undo redo",function(){yn.emit("update:modelValue",dn.getContent({format:Ht.outputFormat}))})},Hj=function(Ht,yn,dn,Sn,Qt,Dn){Sn.setContent(Dn()),dn.attrs["onUpdate:modelValue"]&&Lj(yn,dn,Sn,Qt),Ij(Ht,dn.attrs,Sn)},qW=0,JW=function(Ht){var yn=Date.now(),dn=Math.floor(Math.random()*1e9);return qW++,Ht+"_"+dn+qW+String(yn)},zj=function(Ht){return Ht!==null&&Ht.tagName.toLowerCase()==="textarea"},KW=function(Ht){return typeof Ht>"u"||Ht===""?[]:Array.isArray(Ht)?Ht:Ht.split(" ")},Vj=function(Ht,yn){return KW(Ht).concat(KW(yn))},Uj=function(Ht){return Ht==null},YW=function(){return{listeners:[],scriptId:JW("tiny-script"),scriptLoaded:!1}},Wj=function(){var Ht=YW(),yn=function(Qt,Dn,xn,Nt){var Et=Dn.createElement("script");Et.referrerPolicy="origin",Et.type="application/javascript",Et.id=Qt,Et.src=xn;var pt=function(){Et.removeEventListener("load",pt),Nt()};Et.addEventListener("load",pt),Dn.head&&Dn.head.appendChild(Et)},dn=function(Qt,Dn,xn){Ht.scriptLoaded?xn():(Ht.listeners.push(xn),Qt.getElementById(Ht.scriptId)||yn(Ht.scriptId,Qt,Dn,function(){Ht.listeners.forEach(function(Nt){return Nt()}),Ht.scriptLoaded=!0}))},Sn=function(){Ht=YW()};return{load:dn,reinitialize:Sn}},Zj=Wj(),jj=function(){return typeof window<"u"?window:global},AC=function(){var Ht=jj();return Ht&&Ht.tinymce?Ht.tinymce:null},Gj={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(Ht){return Ht==="html"||Ht==="text"}}},OC=globalThis&&globalThis.__assign||function(){return OC=Object.assign||function(Ht){for(var yn,dn=1,Sn=arguments.length;dn<Sn;dn++){yn=arguments[dn];for(var Qt in yn)Object.prototype.hasOwnProperty.call(yn,Qt)&&(Ht[Qt]=yn[Qt])}return Ht},OC.apply(this,arguments)},qj=function(Ht,yn,dn,Sn){return Ht(Sn||"div",{id:yn,ref:dn})},Kj=function(Ht,yn,dn){return Ht("textarea",{id:yn,visibility:"hidden",ref:dn})},Yj=dj({props:Gj,setup:function(Ht,yn){var dn=Ht.init?OC({},Ht.init):{},Sn=mj(Ht),Qt=Sn.disabled,Dn=Sn.modelValue,xn=Sn.tagName,Nt=If(null),Et=null,pt=Ht.id||JW("tiny-vue"),hn=Ht.init&&Ht.init.inline||Ht.inline,rn=!!yn.attrs["onUpdate:modelValue"],Ut=!0,Ct=Ht.initialValue?Ht.initialValue:"",Mt="",cn=function(Te){return rn?function(){return Dn!=null&&Dn.value?Dn.value:""}:function(){return Te?Ct:Mt}},Ze=function(){var Te=cn(Ut),Q=OC(OC({},dn),{readonly:Ht.disabled,target:Nt.value,plugins:Vj(dn.plugins,Ht.plugins),toolbar:Ht.toolbar||dn.toolbar,inline:hn,setup:function(ht){Et=ht,ht.on("init",function(It){return Hj(It,Ht,yn,ht,Dn,Te)}),typeof dn.setup=="function"&&dn.setup(ht)}});zj(Nt.value)&&(Nt.value.style.visibility=""),AC().init(Q),Ut=!1};eO(Qt,function(Te){var Q;Et!==null&&(typeof((Q=Et.mode)===null||Q===void 0?void 0:Q.set)=="function"?Et.mode.set(Te?"readonly":"design"):Et.setMode(Te?"readonly":"design"))}),eO(xn,function(Te){var Q;rn||(Mt=Et.getContent()),(Q=AC())===null||Q===void 0||Q.remove(Et),jW(function(){return Ze()})}),XW(function(){if(AC()!==null)Ze();else if(Nt.value&&Nt.value.ownerDocument){var Te=Ht.cloudChannel?Ht.cloudChannel:"6",Q=Ht.apiKey?Ht.apiKey:"no-api-key",ht=Uj(Ht.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(Q,"/tinymce/").concat(Te,"/tinymce.min.js"):Ht.tinymceScriptSrc;Zj.load(Nt.value.ownerDocument,ht,Ze)}}),fj(function(){AC()!==null&&AC().remove(Et)}),hn||(gj(function(){Ut||Ze()}),hj(function(){var Te;rn||(Mt=Et.getContent()),(Te=AC())===null||Te===void 0||Te.remove(Et)}));var st=function(Te){var Q;Mt=Et.getContent(),(Q=AC())===null||Q===void 0||Q.remove(Et),dn=OC(OC({},dn),Te),jW(function(){return Ze()})};return yn.expose({rerender:st}),function(){return hn?qj(GW,pt,Nt,Ht.tagName):Kj(GW,pt,Nt)}}});(function(){const Ht=Object.getPrototypeOf,yn=(t,s,a)=>{var i;return a(t,s.prototype)?!0:((i=t.constructor)===null||i===void 0?void 0:i.name)===s.name},dn=t=>{const s=typeof t;return t===null?"null":s==="object"&&Array.isArray(t)?"array":s==="object"&&yn(t,String,(a,i)=>i.isPrototypeOf(a))?"string":s},Sn=t=>s=>dn(s)===t,Qt=t=>s=>typeof s===t,Dn=t=>s=>t===s,xn=(t,s)=>Et(t)&&yn(t,s,(a,i)=>Ht(a)===i),Nt=Sn("string"),Et=Sn("object"),pt=t=>xn(t,Object),hn=Sn("array"),rn=Dn(null),Ut=Qt("boolean"),Ct=Dn(void 0),Mt=t=>t==null,cn=t=>!Mt(t),Ze=Qt("function"),st=Qt("number"),Te=(t,s)=>{if(hn(t)){for(let a=0,i=t.length;a<i;++a)if(!s(t[a]))return!1;return!0}return!1},Q=()=>{},ht=t=>()=>t(),It=(t,s)=>(...a)=>t(s.apply(null,a)),yt=(t,s)=>a=>t(s(a)),Y=t=>()=>t,Ot=t=>t,Bn=(t,s)=>t===s;function $t(t,...s){return(...a)=>{const i=s.concat(a);return t.apply(null,i)}}const ye=t=>s=>!t(s),ee=t=>()=>{throw new Error(t)},at=t=>t(),Le=Y(!1),Me=Y(!0);var Rt=tinymce.util.Tools.resolve("tinymce.ThemeManager");class _{constructor(s,a){this.tag=s,this.value=a}static some(s){return new _(!0,s)}static none(){return _.singletonNone}fold(s,a){return this.tag?a(this.value):s()}isSome(){return this.tag}isNone(){return!this.tag}map(s){return this.tag?_.some(s(this.value)):_.none()}bind(s){return this.tag?s(this.value):_.none()}exists(s){return this.tag&&s(this.value)}forall(s){return!this.tag||s(this.value)}filter(s){return!this.tag||s(this.value)?this:_.none()}getOr(s){return this.tag?this.value:s}or(s){return this.tag?this:s}getOrThunk(s){return this.tag?this.value:s()}orThunk(s){return this.tag?this:s()}getOrDie(s){if(this.tag)return this.value;throw new Error(s??"Called getOrDie on None")}static from(s){return cn(s)?_.some(s):_.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(s){this.tag&&s(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}_.singletonNone=new _(!1);const he=Array.prototype.slice,Ue=Array.prototype.indexOf,Oe=Array.prototype.push,fe=(t,s)=>Ue.call(t,s),Kt=(t,s)=>{const a=fe(t,s);return a===-1?_.none():_.some(a)},nn=(t,s)=>fe(t,s)>-1,Fe=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return!0}return!1},Vt=(t,s)=>{const a=[];for(let i=0;i<t;i++)a.push(s(i));return a},kt=(t,s)=>{const a=[];for(let i=0;i<t.length;i+=s){const d=he.call(t,i,i+s);a.push(d)}return a},Ie=(t,s)=>{const a=t.length,i=new Array(a);for(let d=0;d<a;d++){const g=t[d];i[d]=s(g,d)}return i},R=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];s(d,a)}},Hn=(t,s)=>{for(let a=t.length-1;a>=0;a--){const i=t[a];s(i,a)}},Ae=(t,s)=>{const a=[],i=[];for(let d=0,g=t.length;d<g;d++){const p=t[d];(s(p,d)?a:i).push(p)}return{pass:a,fail:i}},Se=(t,s)=>{const a=[];for(let i=0,d=t.length;i<d;i++){const g=t[i];s(g,i)&&a.push(g)}return a},We=(t,s,a)=>(Hn(t,(i,d)=>{a=s(a,i,d)}),a),Ee=(t,s,a)=>(R(t,(i,d)=>{a=s(a,i,d)}),a),ae=(t,s,a)=>{for(let i=0,d=t.length;i<d;i++){const g=t[i];if(s(g,i))return _.some(g);if(a(g,i))break}return _.none()},se=(t,s)=>ae(t,s,Le),re=(t,s)=>{for(let a=0,i=t.length;a<i;a++){const d=t[a];if(s(d,a))return _.some(a)}return _.none()},H=t=>{const s=[];for(let a=0,i=t.length;a<i;++a){if(!hn(t[a]))throw new Error("Arr.flatten item "+a+" was not an array, input: "+t);Oe.apply(s,t[a])}return s},q=(t,s)=>H(Ie(t,s)),z=(t,s)=>{for(let a=0,i=t.length;a<i;++a){const d=t[a];if(s(d,a)!==!0)return!1}return!0},Z=t=>{const s=he.call(t,0);return s.reverse(),s},Ne=(t,s)=>Se(t,a=>!nn(s,a)),Pe=(t,s)=>{const a={};for(let i=0,d=t.length;i<d;i++){const g=t[i];a[String(g)]=s(g,i)}return a},Wt=t=>[t],ot=(t,s)=>{const a=he.call(t,0);return a.sort(s),a},Qn=(t,s)=>s>=0&&s<t.length?_.some(t[s]):_.none(),uo=t=>Qn(t,0),eo=t=>Qn(t,t.length-1),kn=Ze(Array.from)?Array.from:t=>he.call(t),ao=(t,s)=>{for(let a=0;a<t.length;a++){const i=s(t[a],a);if(i.isSome())return i}return _.none()},Re=Object.keys,Ye=Object.hasOwnProperty,Bt=(t,s)=>{const a=Re(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];s(p,g)}},an=(t,s)=>An(t,(a,i)=>({k:i,v:s(a,i)})),An=(t,s)=>{const a={};return Bt(t,(i,d)=>{const g=s(i,d);a[g.k]=g.v}),a},Tn=t=>(s,a)=>{t[a]=s},Do=(t,s,a,i)=>{Bt(t,(d,g)=>{(s(d,g)?a:i)(d,g)})},ks=(t,s)=>{const a={},i={};return Do(t,s,Tn(a),Tn(i)),{t:a,f:i}},qe=(t,s)=>{const a={};return Do(t,s,Tn(a),Q),a},ze=(t,s)=>{const a=[];return Bt(t,(i,d)=>{a.push(s(i,d))}),a},sn=(t,s)=>{const a=Re(t);for(let i=0,d=a.length;i<d;i++){const g=a[i],p=t[g];if(s(p,g,t))return _.some(p)}return _.none()},on=t=>ze(t,Ot),qt=(t,s)=>Kn(t,s)?_.from(t[s]):_.none(),Kn=(t,s)=>Ye.call(t,s),Ts=(t,s)=>Kn(t,s)&&t[s]!==void 0&&t[s]!==null,_r=(t,s,a=Bn)=>t.exists(i=>a(i,s)),ga=(t,s,a=Bn)=>ys(t,s,a).getOr(t.isNone()&&s.isNone()),bs=t=>{const s=[],a=i=>{s.push(i)};for(let i=0;i<t.length;i++)t[i].each(a);return s},wc=t=>{const s=[];for(let a=0;a<t.length;a++){const i=t[a];if(i.isSome())s.push(i.getOrDie());else return _.none()}return _.some(s)},ys=(t,s,a)=>t.isSome()&&s.isSome()?_.some(a(t.getOrDie(),s.getOrDie())):_.none(),cs=(t,s,a,i)=>t.isSome()&&s.isSome()&&a.isSome()?_.some(i(t.getOrDie(),s.getOrDie(),a.getOrDie())):_.none(),go=(t,s)=>t!=null?_.some(s(t)):_.none(),gr=(t,s)=>t?_.some(s):_.none(),Gr=(t,s)=>t+s,Hs=(t,s)=>t.substring(s),ha=(t,s,a)=>s===""||t.length>=s.length&&t.substr(a,a+s.length)===s,qr=(t,s)=>_a(t,s)?Hs(t,s.length):t,cc=(t,s)=>we(t,s)?t:Gr(t,s),Qs=(t,s,a=0,i)=>{const d=t.indexOf(s,a);return d!==-1?Ct(i)?!0:d+s.length<=i:!1},_a=(t,s)=>ha(t,s,0),we=(t,s)=>ha(t,s,t.length-s.length),ct=(t=>s=>s.replace(t,""))(/^\s+|\s+$/g),vt=t=>t.length>0,jn=t=>!vt(t),to=t=>t.style!==void 0&&Ze(t.style.getPropertyValue),In=(t,s)=>{const i=(s||document).createElement("div");if(i.innerHTML=t,!i.hasChildNodes()||i.childNodes.length>1){const d="HTML does not have a single root node";throw console.error(d,t),new Error(d)}return xo(i.childNodes[0])},is=(t,s)=>{const i=(s||document).createElement(t);return xo(i)},ts=(t,s)=>{const i=(s||document).createTextNode(t);return xo(i)},xo=t=>{if(t==null)throw new Error("Node cannot be null or undefined");return{dom:t}},Lt={fromHtml:In,fromTag:is,fromText:ts,fromDom:xo,fromPoint:(t,s,a)=>_.from(t.dom.elementFromPoint(s,a)).map(xo)},ge=typeof window<"u"?window:Function("return this;")(),be=(t,s)=>{let a=s??ge;for(let i=0;i<t.length&&a!==void 0&&a!==null;++i)a=a[t[i]];return a},_t=(t,s)=>{const a=t.split(".");return be(a,s)},tn=(t,s)=>_t(t,s),un=(t,s)=>{const a=tn(t,s);if(a==null)throw new Error(t+" not available on this browser");return a},Pn=Object.getPrototypeOf,pn=t=>un("HTMLElement",t),zn=t=>{const s=_t("ownerDocument.defaultView",t);return Et(t)&&(pn(s).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Pn(t).constructor.name))},oo=9,wo=11,Os=1,hr=3,qo=t=>t.dom.nodeName.toLowerCase(),Xc=t=>t.dom.nodeType,ls=t=>s=>Xc(s)===t,Cs=t=>xs(t)&&zn(t.dom),xs=ls(Os),Lr=ls(hr),Br=ls(oo),Fc=ls(wo),La=t=>s=>xs(s)&&qo(s)===t,Jc=(t,s)=>{const a=t.dom;if(a.nodeType!==Os)return!1;{const i=a;if(i.matches!==void 0)return i.matches(s);if(i.msMatchesSelector!==void 0)return i.msMatchesSelector(s);if(i.webkitMatchesSelector!==void 0)return i.webkitMatchesSelector(s);if(i.mozMatchesSelector!==void 0)return i.mozMatchesSelector(s);throw new Error("Browser lacks native selectors")}},_i=t=>t.nodeType!==Os&&t.nodeType!==oo&&t.nodeType!==wo||t.childElementCount===0,Qc=(t,s)=>{const a=s===void 0?document:s.dom;return _i(a)?[]:Ie(a.querySelectorAll(t),Lt.fromDom)},zi=(t,s)=>{const a=s===void 0?document:s.dom;return _i(a)?_.none():_.from(a.querySelector(t)).map(Lt.fromDom)},Us=(t,s)=>t.dom===s.dom,gi=(t,s)=>{const a=t.dom,i=s.dom;return a===i?!1:a.contains(i)},pa=t=>Lt.fromDom(t.dom.ownerDocument),ic=t=>Br(t)?t:pa(t),hi=t=>Lt.fromDom(ic(t).dom.documentElement),Ic=t=>Lt.fromDom(ic(t).dom.defaultView),aa=t=>_.from(t.dom.parentNode).map(Lt.fromDom),Ai=t=>_.from(t.dom.parentElement).map(Lt.fromDom),Cc=t=>_.from(t.dom.offsetParent).map(Lt.fromDom),Vi=t=>_.from(t.dom.nextSibling).map(Lt.fromDom),er=t=>Ie(t.dom.childNodes,Lt.fromDom),ba=(t,s)=>{const a=t.dom.childNodes;return _.from(a[s]).map(Lt.fromDom)},X=t=>ba(t,0),xe=(t,s)=>({element:t,offset:s}),He=(t,s)=>{const a=er(t);return a.length>0&&s<a.length?xe(a[s],0):xe(t,s)},wt=t=>Fc(t)&&cn(t.dom.host),Gt=Ze(Element.prototype.attachShadow)&&Ze(Node.prototype.getRootNode),mo=Y(Gt),Ko=Gt?t=>Lt.fromDom(t.dom.getRootNode()):ic,Ar=t=>wt(t)?t:Lt.fromDom(ic(t).dom.body),zs=t=>$r(t).isSome(),$r=t=>{const s=Ko(t);return wt(s)?_.some(s):_.none()},Or=t=>Lt.fromDom(t.dom.host),Pr=t=>{if(mo()&&cn(t.target)){const s=Lt.fromDom(t.target);if(xs(s)&&Ha(s)&&t.composed&&t.composedPath){const a=t.composedPath();if(a)return uo(a)}}return _.from(t.target)},Ha=t=>cn(t.dom.shadowRoot),Kr=t=>{const s=Lr(t)?t.dom.parentNode:t.dom;if(s==null||s.ownerDocument===null)return!1;const a=s.ownerDocument;return $r(Lt.fromDom(s)).fold(()=>a.body.contains(s),yt(Kr,Or))},ta=()=>ei(Lt.fromDom(document)),ei=t=>{const s=t.dom.body;if(s==null)throw new Error("Body is not available yet");return Lt.fromDom(s)},ti=(t,s,a)=>{if(Nt(a)||Ut(a)||st(a))t.setAttribute(s,a+"");else throw console.error("Invalid call to Attribute.set. Key ",s,":: Value ",a,":: Element ",t),new Error("Attribute value was not simple")},ko=(t,s,a)=>{ti(t.dom,s,a)},us=(t,s)=>{const a=t.dom;Bt(s,(i,d)=>{ti(a,d,i)})},ar=(t,s)=>{const a=t.dom.getAttribute(s);return a===null?void 0:a},$=(t,s)=>_.from(ar(t,s)),J=(t,s)=>{const a=t.dom;return a&&a.hasAttribute?a.hasAttribute(s):!1},de=(t,s)=>{t.dom.removeAttribute(s)},Xe=t=>Ee(t.dom.attributes,(s,a)=>(s[a.name]=a.value,s),{}),Nn=(t,s,a)=>{if(!Nt(a))throw console.error("Invalid call to CSS.set. Property ",s,":: Value ",a,":: Element ",t),new Error("CSS value must be a string: "+a);to(t)&&t.style.setProperty(s,a)},Mo=(t,s)=>{to(t)&&t.style.removeProperty(s)},Vn=(t,s,a)=>{const i=t.dom;Nn(i,s,a)},Hr=(t,s)=>{const a=t.dom;Bt(s,(i,d)=>{Nn(a,d,i)})},pr=(t,s)=>{const a=t.dom;Bt(s,(i,d)=>{i.fold(()=>{Mo(a,d)},g=>{Nn(a,d,g)})})},Dt=(t,s)=>{const a=t.dom,d=window.getComputedStyle(a).getPropertyValue(s);return d===""&&!Kr(t)?ca(a,s):d},ca=(t,s)=>to(t)?t.style.getPropertyValue(s):"",tr=(t,s)=>{const a=t.dom,i=ca(a,s);return _.from(i).filter(d=>d.length>0)},Zr=t=>{const s={},a=t.dom;if(to(a))for(let i=0;i<a.style.length;i++){const d=a.style.item(i);s[d]=a.style[d]}return s},sl=(t,s,a)=>{const i=Lt.fromTag(t);return Vn(i,s,a),tr(i,s).isSome()},Po=(t,s)=>{const a=t.dom;Mo(a,s),_r($(t,"style").map(ct),"")&&de(t,"style")},ne=t=>t.dom.offsetWidth,me=(t,s)=>{const a=(w,T)=>{if(!st(T)&&!T.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+T);const A=w.dom;to(A)&&(A.style[t]=T+"px")},i=w=>{const T=s(w);if(T<=0||T===null){const A=Dt(w,t);return parseFloat(A)||0}return T},d=i,g=(w,T)=>Ee(T,(A,D)=>{const N=Dt(w,D),U=N===void 0?0:parseInt(N,10);return isNaN(U)?A:A+U},0);return{set:a,get:i,getOuter:d,aggregate:g,max:(w,T,A)=>{const D=g(w,A);return T>D?T-D:0}}},Qe=me("height",t=>{const s=t.dom;return Kr(t)?s.getBoundingClientRect().height:s.offsetHeight}),dt=t=>Qe.get(t),Un=t=>Qe.getOuter(t),so=(t,s)=>{const a=["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"],i=Qe.max(t,s,a);Vn(t,"max-height",i+"px")},Ys=(t,s)=>({left:t,top:s,translate:(i,d)=>Ys(t+i,s+d)}),Yo=Ys,Ui=t=>{const s=t.getBoundingClientRect();return Yo(s.left,s.top)},Qo=(t,s)=>t!==void 0?t:s!==void 0?s:0,Ds=t=>{const s=t.dom.ownerDocument,a=s.body,i=s.defaultView,d=s.documentElement;if(a===t.dom)return Yo(a.offsetLeft,a.offsetTop);const g=Qo(i==null?void 0:i.pageYOffset,d.scrollTop),p=Qo(i==null?void 0:i.pageXOffset,d.scrollLeft),w=Qo(d.clientTop,a.clientTop),T=Qo(d.clientLeft,a.clientLeft);return Aa(t).translate(p-T,g-w)},Aa=t=>{const s=t.dom,i=s.ownerDocument.body;return i===s?Yo(i.offsetLeft,i.offsetTop):Kr(t)?Ui(s):Yo(0,0)},lc=me("width",t=>t.dom.offsetWidth),Wi=(t,s)=>lc.set(t,s),br=t=>lc.get(t),rr=t=>lc.getOuter(t),Rs=(t,s)=>{const a=["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"],i=lc.max(t,s,a);Vn(t,"max-width",i+"px")},zr=t=>{let s=!1,a;return(...i)=>(s||(s=!0,a=t.apply(null,i)),a)},Sc=(t,s,a,i)=>{const d=t.isiOS()&&/ipad/i.test(a)===!0,g=t.isiOS()&&!d,p=t.isiOS()||t.isAndroid(),w=p||i("(pointer:coarse)"),T=d||!g&&p&&i("(min-device-width:768px)"),A=g||p&&!T,D=s.isSafari()&&t.isiOS()&&/safari/i.test(a)===!1,N=!A&&!T&&!D;return{isiPad:Y(d),isiPhone:Y(g),isTablet:Y(T),isPhone:Y(A),isTouch:Y(w),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:Y(D),isDesktop:Y(N)}},Ol=(t,s)=>{for(let a=0;a<t.length;a++){const i=t[a];if(i.test(s))return i}},Yr=(t,s)=>{const a=Ol(t,s);if(!a)return{major:0,minor:0};const i=d=>Number(s.replace(a,"$"+d));return uc(i(1),i(2))},Yl=(t,s)=>{const a=String(s).toLowerCase();return t.length===0?Su():Yr(t,a)},Su=()=>uc(0,0),uc=(t,s)=>({major:t,minor:s}),xu={nu:uc,detect:Yl,unknown:Su},Yg=(t,s)=>ao(s.brands,a=>{const i=a.brand.toLowerCase();return se(t,d=>{var g;return i===((g=d.brand)===null||g===void 0?void 0:g.toLowerCase())}).map(d=>({current:d.name,version:xu.nu(parseInt(a.version,10),0)}))}),Lc=(t,s)=>{const a=String(s).toLowerCase();return se(t,i=>i.search(a))},Dl=(t,s)=>Lc(t,s).map(a=>{const i=xu.detect(a.versionRegexes,s);return{current:a.name,version:i}}),cd=(t,s)=>Lc(t,s).map(a=>{const i=xu.detect(a.versionRegexes,s);return{current:a.name,version:i}}),za=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,rl=t=>s=>Qs(s,t),ku=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Qs(t,"edge/")&&Qs(t,"chrome")&&Qs(t,"safari")&&Qs(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,za],search:t=>Qs(t,"chrome")&&!Qs(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Qs(t,"msie")||Qs(t,"trident")},{name:"Opera",versionRegexes:[za,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:rl("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:rl("firefox")},{name:"Safari",versionRegexes:[za,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Qs(t,"safari")||Qs(t,"mobile/"))&&Qs(t,"applewebkit")}],zd=[{name:"Windows",search:rl("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Qs(t,"iphone")||Qs(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:rl("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:rl("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:rl("linux"),versionRegexes:[]},{name:"Solaris",search:rl("sunos"),versionRegexes:[]},{name:"FreeBSD",search:rl("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:rl("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Xl={browsers:Y(ku),oses:Y(zd)},Mm="Edge",Vd="Chromium",Oi="IE",Xg="Opera",Nm="Firefox",Tu="Safari",Ud=()=>Di({current:void 0,version:xu.unknown()}),Di=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isEdge:i(Mm),isChromium:i(Vd),isIE:i(Oi),isOpera:i(Xg),isFirefox:i(Nm),isSafari:i(Tu)}},ve={unknown:Ud,nu:Di,edge:Y(Mm),chromium:Y(Vd),ie:Y(Oi),opera:Y(Xg),firefox:Y(Nm),safari:Y(Tu)},Jl="Windows",Ri="iOS",Bm="Android",$m="Linux",Jg="macOS",Ps="Solaris",Ya="FreeBSD",Lf="ChromeOS",Zi=()=>Pm({current:void 0,version:xu.unknown()}),Pm=t=>{const s=t.current,a=t.version,i=d=>()=>s===d;return{current:s,version:a,isWindows:i(Jl),isiOS:i(Ri),isAndroid:i(Bm),isMacOS:i(Jg),isLinux:i($m),isSolaris:i(Ps),isFreeBSD:i(Ya),isChromeOS:i(Lf)}},Eu={unknown:Zi,nu:Pm,windows:Y(Jl),ios:Y(Ri),android:Y(Bm),linux:Y($m),macos:Y(Jg),solaris:Y(Ps),freebsd:Y(Ya),chromeos:Y(Lf)},Hf={detect:(t,s,a)=>{const i=Xl.browsers(),d=Xl.oses(),g=s.bind(T=>Yg(i,T)).orThunk(()=>Dl(i,t)).fold(ve.unknown,ve.nu),p=cd(d,t).fold(Eu.unknown,Eu.nu),w=Sc(p,g,t,a);return{browser:g,os:p,deviceType:w}}},id=t=>window.matchMedia(t).matches;let Qg=zr(()=>Hf.detect(navigator.userAgent,_.from(navigator.userAgentData),id));const Hc=()=>Qg(),Wd=(t,s,a,i,d,g,p)=>({target:t,x:s,y:a,stop:i,prevent:d,kill:g,raw:p}),Fm=t=>{const s=Lt.fromDom(Pr(t).getOr(t.target)),a=()=>t.stopPropagation(),i=()=>t.preventDefault(),d=It(i,a);return Wd(s,t.clientX,t.clientY,a,i,d,t)},ld=(t,s)=>a=>{t(a)&&s(Fm(a))},va=(t,s,a,i,d)=>{const g=ld(a,i);return t.dom.addEventListener(s,g,d),{unbind:$t(Im,t,s,g,d)}},Zd=(t,s,a,i)=>va(t,s,a,i,!1),zf=(t,s,a,i)=>va(t,s,a,i,!0),Im=(t,s,a,i)=>{t.dom.removeEventListener(s,a,i)},_u=(t,s)=>{aa(t).each(i=>{i.dom.insertBefore(s.dom,t.dom)})},eh=(t,s)=>{Vi(t).fold(()=>{aa(t).each(d=>{kc(d,s)})},i=>{_u(i,s)})},Lm=(t,s)=>{X(t).fold(()=>{kc(t,s)},i=>{t.dom.insertBefore(s.dom,i.dom)})},kc=(t,s)=>{t.dom.appendChild(s.dom)},th=(t,s,a)=>{ba(t,a).fold(()=>{kc(t,s)},i=>{_u(i,s)})},al=(t,s)=>{R(s,a=>{kc(t,a)})},ud=t=>{t.dom.textContent="",R(er(t),s=>{Ql(s)})},Ql=t=>{const s=t.dom;s.parentNode!==null&&s.parentNode.removeChild(s)},ji=t=>{const s=t!==void 0?t.dom:document,a=s.body.scrollLeft||s.documentElement.scrollLeft,i=s.body.scrollTop||s.documentElement.scrollTop;return Yo(a,i)},nh=(t,s,a)=>{const d=(a!==void 0?a.dom:document).defaultView;d&&d.scrollTo(t,s)},oh=t=>{const s=t===void 0?window:t;return Hc().browser.isFirefox()?_.none():_.from(s.visualViewport)},Vf=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),cl=t=>{const s=t===void 0?window:t,a=s.document,i=ji(Lt.fromDom(a));return oh(s).fold(()=>{const d=s.document.documentElement,g=d.clientWidth,p=d.clientHeight;return Vf(i.left,i.top,g,p)},d=>Vf(Math.max(d.pageLeft,i.left),Math.max(d.pageTop,i.top),d.width,d.height))},E=()=>Lt.fromDom(document),B=(t,s)=>t.view(s).fold(Y([]),i=>{const d=t.owner(i),g=B(t,d);return[i].concat(g)}),j=(t,s)=>{const a=s.owner(t),i=B(s,a);return _.some(i)};var bn=Object.freeze({__proto__:null,view:t=>{var s;return(t.dom===document?_.none():_.from((s=t.dom.defaultView)===null||s===void 0?void 0:s.frameElement)).map(Lt.fromDom)},owner:t=>pa(t)});const Co=t=>{const s=E(),a=ji(s);return j(t,bn).fold($t(Ds,t),d=>{const g=Aa(t),p=We(d,(w,T)=>{const A=Aa(T);return{left:w.left+A.left,top:w.top+A.top}},{left:0,top:0});return Yo(p.left+g.left+a.left,p.top+g.top+a.top)})},ns=(t,s,a)=>({point:t,width:s,height:a}),jo=(t,s,a,i)=>({x:t,y:s,width:a,height:i}),no=(t,s,a,i)=>({x:t,y:s,width:a,height:i,right:t+a,bottom:s+i}),os=t=>{const s=Ds(t),a=rr(t),i=Un(t);return no(s.left,s.top,a,i)},Dr=t=>{const s=Co(t),a=rr(t),i=Un(t);return no(s.left,s.top,a,i)},Xa=()=>cl(window),na=t=>{const s=g=>g(t),a=Y(t),i=()=>d,d={tag:!0,inner:t,fold:(g,p)=>p(t),isValue:Me,isError:Le,map:g=>Fo.value(g(t)),mapError:i,bind:s,exists:s,forall:s,getOr:a,or:i,getOrThunk:a,orThunk:i,getOrDie:a,each:g=>{g(t)},toOptional:()=>_.some(t)};return d},Hm=t=>{const s=()=>a,a={tag:!1,inner:t,fold:(i,d)=>i(t),isValue:Le,isError:Me,map:s,mapError:i=>Fo.error(i(t)),bind:s,exists:Le,forall:Me,getOr:Ot,or:Ot,getOrThunk:at,orThunk:at,getOrDie:ee(String(t)),each:Q,toOptional:_.none};return a},Fo={value:na,error:Hm,fromOption:(t,s)=>t.fold(()=>Hm(s),na)};var Vr;(function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"})(Vr||(Vr={}));const Fs=(t,s,a)=>t.stype===Vr.Error?s(t.serror):a(t.svalue),dc=t=>{const s=[],a=[];return R(t,i=>{Fs(i,d=>a.push(d),d=>s.push(d))}),{values:s,errors:a}},Va=(t,s)=>t.stype===Vr.Error?{stype:Vr.Error,serror:s(t.serror)}:t,Uf=(t,s)=>t.stype===Vr.Value?{stype:Vr.Value,svalue:s(t.svalue)}:t,Wf=(t,s)=>t.stype===Vr.Value?s(t.svalue):t,sh=(t,s)=>t.stype===Vr.Error?s(t.serror):t,eu=t=>({stype:Vr.Value,svalue:t}),Zf=t=>({stype:Vr.Error,serror:t}),Xr={fromResult:t=>t.fold(Zf,eu),toResult:t=>Fs(t,Fo.error,Fo.value),svalue:eu,partition:dc,serror:Zf,bind:Wf,bindError:sh,map:Uf,mapError:Va,fold:Fs},rh=(t,s,a,i)=>({tag:"field",key:t,newKey:s,presence:a,prop:i}),u1=(t,s)=>({tag:"custom",newKey:t,instantiator:s}),Sp=(t,s,a)=>{switch(t.tag){case"field":return s(t.key,t.newKey,t.presence,t.prop);case"custom":return a(t.newKey,t.instantiator)}},jf=(t,s)=>s,d1=(t,s)=>pt(t)&&pt(s)?vr(t,s):s,dd=t=>(...s)=>{if(s.length===0)throw new Error("Can't merge zero objects");const a={};for(let i=0;i<s.length;i++){const d=s[i];for(const g in d)Kn(d,g)&&(a[g]=t(a[g],d[g]))}return a},vr=dd(d1),Ho=dd(jf),mc=()=>({tag:"required",process:{}}),tu=t=>({tag:"defaultedThunk",process:t}),Au=t=>tu(Y(t)),ah=()=>({tag:"option",process:{}}),zm=t=>({tag:"mergeWithThunk",process:t}),m1=t=>zm(Y(t)),f1=(t,s)=>t.length>0?Xr.svalue(vr(s,Ho.apply(void 0,t))):Xr.svalue(s),Vm=t=>It(Xr.serror,H)(t),Rl={consolidateObj:(t,s)=>{const a=Xr.partition(t);return a.errors.length>0?Vm(a.errors):f1(a.values,s)},consolidateArr:t=>{const s=Xr.partition(t);return s.errors.length>0?Vm(s.errors):Xr.svalue(s.values)}},Ml=t=>Et(t)&&Re(t).length>100?" removed due to size":JSON.stringify(t,null,2),M0=t=>{const s=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:Y("... (only showing first ten failures)")}]):t;return Ie(s,a=>"Failed path: ("+a.path.join(" > ")+`)
`+a.getErrorInfo())},md=(t,s)=>Xr.serror([{path:t,getErrorInfo:s}]),Ou=(t,s,a)=>md(t,()=>'Could not find valid *required* value for "'+s+'" in '+Ml(a)),Gf=(t,s)=>md(t,()=>'Choice schema did not contain choice key: "'+s+'"'),fd=(t,s,a)=>md(t,()=>'The chosen schema: "'+a+'" did not exist in branches: '+Ml(s)),ih=(t,s)=>md(t,()=>"There are unsupported fields: ["+s.join(", ")+"] specified"),ya=(t,s)=>md(t,Y(s)),Gi=t=>{const s=(i,d)=>Xr.bindError(t(d),g=>ya(i,g)),a=Y("val");return{extract:s,toString:a}},Wm=Gi(Xr.svalue),$n=(t,s,a,i)=>qt(s,a).fold(()=>Ou(t,a,s),i),Zm=(t,s,a,i)=>{const d=qt(t,s).getOrThunk(()=>a(t));return i(d)},il=(t,s,a)=>a(qt(t,s)),lh=(t,s,a,i)=>{const d=qt(t,s).map(g=>g===!0?a(t):g);return i(d)},uh=(t,s,a,i,d)=>{const g=w=>d.extract(s.concat([i]),w),p=w=>w.fold(()=>Xr.svalue(_.none()),T=>{const A=d.extract(s.concat([i]),T);return Xr.map(A,_.some)});switch(t.tag){case"required":return $n(s,a,i,g);case"defaultedThunk":return Zm(a,i,t.process,g);case"option":return il(a,i,p);case"defaultedOptionThunk":return lh(a,i,t.process,p);case"mergeWithThunk":return Zm(a,i,Y({}),w=>{const T=vr(t.process(a),w);return g(T)})}},RC=(t,s,a)=>{const i={},d=[];for(const g of a)Sp(g,(p,w,T,A)=>{const D=uh(T,t,s,p,A);Xr.fold(D,N=>{d.push(...N)},N=>{i[w]=N})},(p,w)=>{i[p]=w(s)});return d.length>0?Xr.serror(d):Xr.svalue(i)},Du=t=>({extract:(i,d)=>t().extract(i,d),toString:()=>t().toString()}),oT=t=>Re(qe(t,cn)),Ja=t=>{const s=lo(t),a=We(t,(d,g)=>Sp(g,p=>vr(d,{[p]:!0}),Y(d)),{});return{extract:(d,g)=>{const p=Ut(g)?[]:oT(g),w=Se(p,T=>!Ts(a,T));return w.length===0?s.extract(d,g):ih(d,w)},toString:s.toString}},lo=t=>({extract:(i,d)=>RC(i,d,t),toString:()=>`obj{
`+Ie(t,d=>Sp(d,(g,p,w,T)=>g+" -> "+T.toString(),(g,p)=>"state("+g+")")).join(`
`)+"}"}),ni=t=>({extract:(i,d)=>{const g=Ie(d,(p,w)=>t.extract(i.concat(["["+w+"]"]),p));return Rl.consolidateArr(g)},toString:()=>"array("+t.toString()+")"}),Zt=(t,s)=>{const a=s!==void 0?s:Ot;return{extract:(g,p)=>{const w=[];for(const T of t){const A=T.extract(g,p);if(A.stype===Vr.Value)return{stype:Vr.Value,svalue:a(A.svalue)};w.push(A)}return Rl.consolidateArr(w)},toString:()=>"oneOf("+Ie(t,g=>g.toString()).join(", ")+")"}},g1=(t,s)=>{const a=(g,p)=>ni(Gi(t)).extract(g,p);return{extract:(g,p)=>{const w=Re(p),T=a(g,w);return Xr.bind(T,A=>{const D=Ie(A,N=>rh(N,N,mc(),s));return lo(D).extract(g,p)})},toString:()=>"setOf("+s.toString()+")"}},h1=(t,s)=>{const a=zr(s);return{extract:(g,p)=>a().extract(g,p),toString:()=>a().toString()}},ll=It(ni,lo),oi=Y(Wm),jm=(t,s)=>Gi(a=>{const i=typeof a;return t(a)?Xr.svalue(a):Xr.serror(`Expected type: ${s} but got: ${i}`)}),jr=jm(st,"number"),Oa=jm(Nt,"string"),si=jm(Ut,"boolean"),lr=jm(Ze,"function"),Ru=t=>{if(Object(t)!==t)return!0;switch({}.toString.call(t).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(t).every(s=>Ru(t[s]));default:return!1}},p1=Gi(t=>Ru(t)?Xr.svalue(t):Xr.serror("Expected value to be acceptable for sending via postMessage")),nu=(t,s,a,i)=>qt(a,i).fold(()=>fd(t,a,i),g=>g.extract(t.concat(["branch: "+i]),s)),dh=(t,s)=>({extract:(d,g)=>qt(g,t).fold(()=>Gf(d,t),w=>nu(d,g,s,w)),toString:()=>"chooseOn("+t+"). Possible values: "+Re(s)}),Gm=()=>ni(Wm),ia=t=>Gi(s=>t(s).fold(Xr.serror,Xr.svalue)),mh=(t,s)=>g1(a=>Xr.fromResult(t(a)),s),qm=(t,s,a)=>{const i=s.extract([t],a);return Xr.mapError(i,d=>({input:a,errors:d}))},Ms=(t,s,a)=>Xr.toResult(qm(t,s,a)),ou=t=>t.fold(s=>{throw new Error(su(s))},Ot),Tc=(t,s,a)=>ou(Ms(t,s,a)),su=t=>`Errors: 
`+M0(t.errors).join(`
`)+`

Input object: `+Ml(t.input),pi=(t,s)=>dh(t,an(s,lo)),b1=(t,s)=>h1(t,s),Qa=rh,Ec=u1,xp=t=>ia(s=>nn(t,s)?Fo.value(s):Fo.error(`Unsupported value: "${s}", choose one of "${t.join(", ")}".`)),At=t=>Qa(t,t,mc(),oi()),Mi=(t,s)=>Qa(t,t,mc(),s),N0=t=>Mi(t,jr),la=t=>Mi(t,Oa),qf=(t,s)=>Qa(t,t,mc(),xp(s)),gd=t=>Mi(t,si),wa=t=>Mi(t,lr),B0=(t,s)=>Qa(t,t,ah(),Gi(a=>Xr.serror("The field: "+t+" is forbidden. "+s))),ul=(t,s)=>Qa(t,t,mc(),lo(s)),ru=(t,s)=>Qa(t,t,mc(),ll(s)),bi=(t,s)=>Qa(t,t,mc(),ni(s)),Ns=t=>Qa(t,t,ah(),oi()),qi=(t,s)=>Qa(t,t,ah(),s),jd=t=>qi(t,jr),ec=t=>qi(t,Oa),Kf=(t,s)=>qi(t,xp(s)),Yf=t=>qi(t,lr),Xf=(t,s)=>qi(t,ni(s)),vi=(t,s)=>qi(t,lo(s)),kp=(t,s)=>qi(t,Ja(s)),Ke=(t,s)=>Qa(t,t,Au(s),oi()),Da=(t,s,a)=>Qa(t,t,Au(s),a),v1=(t,s)=>Da(t,s,jr),Sr=(t,s)=>Da(t,s,Oa),dl=(t,s,a)=>Da(t,s,xp(a)),Ra=(t,s)=>Da(t,s,si),Ma=(t,s)=>Da(t,s,lr),C=(t,s)=>Da(t,s,p1),k=(t,s,a)=>Da(t,s,ni(a)),I=(t,s,a)=>Da(t,s,lo(a)),V=t=>{let s=t;return{get:()=>s,set:d=>{s=d}}},mt={generate:t=>{if(!hn(t))throw new Error("cases must be an array");if(t.length===0)throw new Error("there must be at least one case");const s=[],a={};return R(t,(i,d)=>{const g=Re(i);if(g.length!==1)throw new Error("one and only one name per case");const p=g[0],w=i[p];if(a[p]!==void 0)throw new Error("duplicate key detected:"+p);if(p==="cata")throw new Error("cannot have a case named cata (sorry)");if(!hn(w))throw new Error("case arguments must be an array");s.push(p),a[p]=(...T)=>{const A=T.length;if(A!==w.length)throw new Error("Wrong number of arguments to case "+p+". Expected "+w.length+" ("+w+"), got "+A);return{fold:(...N)=>{if(N.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+N.length);return N[d].apply(null,T)},match:N=>{const U=Re(N);if(s.length!==U.length)throw new Error("Wrong number of arguments to match. Expected: "+s.join(",")+`
Actual: `+U.join(","));if(!z(s,le=>nn(U,le)))throw new Error("Not all branches were specified when using match. Specified: "+U.join(", ")+`
Required: `+s.join(", "));return N[p].apply(null,T)},log:N=>{console.log(N,{constructors:s,constructor:p,params:T})}}}}),a}};mt.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const jt=t=>{const s=[],a=[];return R(t,i=>{i.fold(d=>{s.push(d)},d=>{a.push(d)})}),{errors:s,values:a}},Mn=(t,s)=>{const a={};return Bt(t,(i,d)=>{nn(s,d)||(a[d]=i)}),a},Lo=(t,s)=>({[t]:s}),Go=t=>{const s={};return R(t,a=>{s[a.key]=a.value}),s},ur=(t,s)=>Mn(t,s),js=(t,s)=>Lo(t,s),nr=t=>Go(t),ri=(t,s)=>t.length===0?Fo.value(s):Fo.value(vr(s,Ho.apply(void 0,t))),ml=t=>Fo.error(H(t)),Mu=(t,s)=>{const a=jt(t);return a.errors.length>0?ml(a.errors):ri(a.values,s)},hd=t=>Ze(t)?t:Le,fh=(t,s,a)=>{let i=t.dom;const d=hd(a);for(;i.parentNode;){i=i.parentNode;const g=Lt.fromDom(i),p=s(g);if(p.isSome())return p;if(d(g))break}return _.none()},pd=(t,s,a)=>{const i=s(t),d=hd(a);return i.orThunk(()=>d(t)?_.none():fh(t,s,d))},Nu=(t,s)=>Us(t.element,s.event.target),Km={can:Me,abort:Le,run:Q},Bu=t=>{if(!Ts(t,"can")&&!Ts(t,"abort")&&!Ts(t,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(t,null,2)+" does not have can, abort, or run!");return{...Km,...t}},yi=(t,s)=>(...a)=>Ee(t,(i,d)=>i&&s(d).apply(void 0,a),!0),gh=(t,s)=>(...a)=>Ee(t,(i,d)=>i||s(d).apply(void 0,a),!1),Tp=t=>Ze(t)?{can:Me,abort:Le,run:t}:t,$0=t=>{const s=yi(t,d=>d.can),a=gh(t,d=>d.abort);return{can:s,abort:a,run:(...d)=>{R(t,g=>{g.run.apply(void 0,d)})}}},_o=Y,or=_o("touchstart"),Ua=_o("touchmove"),zc=_o("touchend"),Nl=_o("touchcancel"),Vc=_o("mousedown"),Ni=_o("mousemove"),$u=_o("mouseout"),Ep=_o("mouseup"),Gd=_o("mouseover"),Ym=_o("focusin"),sT=_o("focusout"),Xm=_o("keydown"),rT=_o("keyup"),Jf=_o("input"),_p=_o("change"),Ap=_o("click"),Ca=_o("transitioncancel"),qd=_o("transitionend"),aT=_o("transitionstart"),y1=_o("selectstart"),oa=t=>Y("alloy."+t),MC={tap:oa("tap")},Kd=oa("focus"),Op=oa("blur.post"),P0=oa("paste.post"),au=oa("receive"),fl=oa("execute"),Jm=oa("focus.item"),hh=MC.tap,w1=oa("longpress"),Dp=oa("sandbox.close"),Qf=oa("typeahead.cancel"),C1=oa("system.init"),NC=oa("system.touchmove"),cT=oa("system.touchend"),S1=oa("system.scroll"),Rp=oa("system.resize"),bd=oa("system.attached"),ph=oa("system.detached"),Yd=oa("system.dismissRequested"),x1=oa("system.repositionRequested"),Mp=oa("focusmanager.shifted"),F0=oa("slotcontainer.visibility"),k1=oa("change.tab"),BC=oa("dismiss.tab"),I0=oa("highlight"),T1=oa("dehighlight"),Ws=(t,s)=>{Jd(t,t.element,s,{})},vo=(t,s,a)=>{Jd(t,t.element,s,a)},Xd=t=>{Ws(t,fl())},L0=(t,s,a)=>{Jd(t,s,a,{})},Jd=(t,s,a,i)=>{const d={target:s,...i};t.getSystem().triggerEvent(a,s,d)},E1=(t,s,a,i)=>{const d={...i,target:s};t.getSystem().triggerEvent(a,s,d)},$C=(t,s,a,i)=>{t.getSystem().triggerEvent(a,s,i.event)},dr=t=>nr(t),PC=(t,s)=>({key:t,value:Bu({abort:s})}),Qd=(t,s)=>({key:t,value:Bu({can:s})}),FC=t=>({key:t,value:Bu({run:(s,a)=>{a.event.prevent()}})}),zt=(t,s)=>({key:t,value:Bu({run:s})}),vd=(t,s,a)=>({key:t,value:Bu({run:(i,d)=>{s.apply(void 0,[i,d].concat(a))}})}),bh=t=>s=>zt(t,s),Np=t=>s=>({key:t,value:Bu({run:(a,i)=>{Nu(a,i)&&s(a,i)}})}),iT=(t,s)=>zt(t,(a,i)=>{a.getSystem().getByUid(s).each(d=>{$C(d,d.element,t,i)})}),eg=(t,s,a)=>{const i=s.partUids[a];return iT(t,i)},vh=(t,s)=>zt(t,(a,i)=>{const d=i.event,g=a.getSystem().getByDom(d.target).getOrThunk(()=>pd(d.target,w=>a.getSystem().getByDom(w).toOptional(),Le).getOr(a));s(a,g,i)}),yh=t=>zt(t,(s,a)=>{a.cut()}),IC=t=>zt(t,(s,a)=>{a.stop()}),tc=(t,s)=>Np(t)(s),Ur=Np(bd()),Bl=Np(ph()),lT=Np(C1()),gl=bh(fl()),ai=(t,s)=>{const i=(s||document).createElement("div");return i.innerHTML=t,er(Lt.fromDom(i))},em=t=>t.dom.innerHTML,Qm=(t,s)=>{const i=pa(t).dom,d=Lt.fromDom(i.createDocumentFragment()),g=ai(s,i);al(d,g),ud(t),kc(t,d)},LC=t=>{const s=Lt.fromTag("div"),a=Lt.fromDom(t.dom.cloneNode(!0));return kc(s,a),em(s)},_c=(t,s)=>Lt.fromDom(t.dom.cloneNode(s)),HC=t=>_c(t,!1),zC=t=>{if(wt(t))return"#shadow-root";{const s=HC(t);return LC(s)}},ef=t=>zC(t),H0=(t,s,a)=>Us(s,t.element)&&!Us(s,a),Pu=dr([Qd(Kd(),(t,s)=>{const a=s.event,i=a.originator,d=a.target;return H0(t,i,d)?(console.warn(Kd()+` did not get interpreted by the desired target. 
Originator: `+ef(i)+`
Target: `+ef(d)+`
Check the `+Kd()+" event handlers"),!1):!0})]);var _1=Object.freeze({__proto__:null,events:Pu});let z0=0;const Yn=t=>{const a=new Date().getTime(),i=Math.floor(Math.random()*1e9);return z0++,t+"_"+i+z0+String(a)},uT=Y("alloy-id-"),VC=Y("data-alloy-id"),A1=uT(),wh=VC(),O1=(t,s)=>{const a=Yn(A1+t);return Ch(s,a),a},Ch=(t,s)=>{Object.defineProperty(t.dom,wh,{value:s,writable:!0})},tg=t=>{const s=xs(t)?t.dom[wh]:null;return _.from(s)},yd=t=>Yn(t),V0=Ot,tf=t=>{const s=d=>`The component must be in a context to execute: ${d}`+(t?`
`+ef(t().element)+" is not in context.":""),a=d=>()=>{throw new Error(s(d))},i=d=>()=>{console.warn(s(d))};return{debugInfo:Y("fake"),triggerEvent:i("triggerEvent"),triggerFocus:i("triggerFocus"),triggerEscape:i("triggerEscape"),broadcast:i("broadcast"),broadcastOn:i("broadcastOn"),broadcastEvent:i("broadcastEvent"),build:a("build"),buildOrPatch:a("buildOrPatch"),addToWorld:a("addToWorld"),removeFromWorld:a("removeFromWorld"),addToGui:a("addToGui"),removeFromGui:a("removeFromGui"),getByUid:a("getByUid"),getByDom:a("getByDom"),isConnected:Le}},dT=tf(),tm=(t,s,a)=>{const i=a.toString(),d=i.indexOf(")")+1,g=i.indexOf("("),p=i.substring(g+1,d-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:ng(p.slice(0,1).concat(p.slice(3)))}),t},ng=t=>Ie(t,s=>we(s,"/*")?s.substring(0,s.length-2):s),D1=(t,s)=>{const a=t.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:s,parameters:ng(g)}),t},R1=(t,s)=>{const a=s.toString(),i=a.indexOf(")")+1,d=a.indexOf("("),g=a.substring(d+1,i-1).split(/,\s*/);return t.toFunctionAnnotation=()=>({name:"OVERRIDE",parameters:ng(g.slice(1))}),t},Bp=Yn("alloy-premade"),$p=t=>(Object.defineProperty(t.element.dom,Bp,{value:t.uid,writable:!0}),js(Bp,t)),mT=t=>Kn(t.dom,Bp),Fu=t=>qt(t,Bp),Sh=t=>R1((s,...a)=>t(s.getApis(),s,...a),t),cu={init:()=>Bi({readState:Y("No State required")})},Bi=t=>t,Pp=(t,s)=>{const a=Ie(s,d=>vi(d.name(),[At("config"),Ke("state",cu)])),i=Ms("component.behaviours",lo(a),t.behaviours).fold(d=>{throw new Error(su(d)+`
Complete spec:
`+JSON.stringify(t,null,2))},Ot);return{list:s,data:an(i,d=>{const g=d.map(p=>({config:p.config,state:p.state.init(p.config)}));return Y(g)})}},yr=t=>t.list,fT=t=>t.data,UC=(t,s)=>{const a={};return Bt(t,(i,d)=>{Bt(i,(g,p)=>{const w=qt(a,p).getOr([]);a[p]=w.concat([s(d,g)])})}),a},iu=t=>({classes:Ct(t.classes)?[]:t.classes,attributes:Ct(t.attributes)?{}:t.attributes,styles:Ct(t.styles)?{}:t.styles}),M1=(t,s)=>({...t,attributes:{...t.attributes,...s.attributes},styles:{...t.styles,...s.styles},classes:t.classes.concat(s.classes)}),WC=(t,s,a,i)=>{const d={...s};R(a,D=>{d[D.name()]=D.exhibit(t,i)});const g=UC(d,(D,N)=>({name:D,modification:N})),p=D=>We(D,(N,U)=>({...U.modification,...N}),{}),w=We(g.classes,(D,N)=>N.modification.concat(D),[]),T=p(g.attributes),A=p(g.styles);return iu({classes:w,attributes:T,styles:A})},wd=(t,s,a,i)=>{try{const d=ot(a,(g,p)=>{const w=g[s],T=p[s],A=i.indexOf(w),D=i.indexOf(T);if(A===-1)throw new Error("The ordering for "+t+" does not have an entry for "+w+`.
Order specified: `+JSON.stringify(i,null,2));if(D===-1)throw new Error("The ordering for "+t+" does not have an entry for "+T+`.
Order specified: `+JSON.stringify(i,null,2));return A<D?-1:D<A?1:0});return Fo.value(d)}catch(d){return Fo.error([d])}},fc=(t,s)=>({handler:t,purpose:s}),gT=(t,s)=>({cHandler:t,purpose:s}),Fp=(t,s)=>gT($t.apply(void 0,[t.handler].concat(s)),t.purpose),og=t=>t.cHandler,xh=(t,s)=>({name:t,handler:s}),N1=(t,s)=>{const a={};return R(t,i=>{a[i.name()]=i.handlers(s)}),a},ZC=(t,s,a)=>{const i={...a,...N1(s,t)};return UC(i,xh)},Uc=(t,s,a,i)=>{const d=ZC(t,a,i);return oO(d,s)},tO=t=>{const s=Tp(t);return(a,i,...d)=>{const g=[a,i].concat(d);s.abort.apply(void 0,g)?i.stop():s.can.apply(void 0,g)&&s.run.apply(void 0,g)}},jC=(t,s)=>Fo.error(["The event ("+t+`) has more than one behaviour that listens to it.
When this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).
The behaviours that can trigger it are: `+JSON.stringify(Ie(s,a=>a.name),null,2)]),nO=(t,s,a)=>{const i=s[a];return i?wd("Event: "+a,"name",t,i).map(d=>{const g=Ie(d,p=>p.handler);return $0(g)}):jC(a,t)},oO=(t,s)=>{const a=ze(t,(i,d)=>(i.length===1?Fo.value(i[0].handler):nO(i,s,d)).map(p=>{const w=tO(p),T=i.length>1?Se(s[d],A=>Fe(i,D=>D.name===A)).join(" > "):i[0].name;return js(d,fc(w,T))}));return Mu(a,{})},hl="alloy.base.behaviour",Wc=lo([Qa("dom","dom",mc(),lo([At("tag"),Ke("styles",{}),Ke("classes",[]),Ke("attributes",{}),Ns("value"),Ns("innerHtml")])),At("components"),At("uid"),Ke("events",{}),Ke("apis",{}),Qa("eventOrder","eventOrder",m1({[fl()]:["disabling",hl,"toggling","typeaheadevents"],[Kd()]:[hl,"focusing","keying"],[C1()]:[hl,"disabling","toggling","representing"],[Jf()]:[hl,"representing","streaming","invalidating"],[ph()]:[hl,"representing","item-events","tooltipping"],[Vc()]:["focusing",hl,"item-type-events"],[or()]:["focusing",hl,"item-type-events"],[Gd()]:["item-type-events","tooltipping"],[au()]:["receiving","reflecting","tooltipping"]}),oi()),Ns("domModification")]),wi=t=>Ms("custom.definition",Wc,t),GC=t=>({...t.dom,uid:t.uid,domChildren:Ie(t.components,s=>s.element)}),hT=t=>t.domModification.fold(()=>iu({}),iu),nf=t=>t.events,kh=(t,s)=>{const a=ar(t,s);return a===void 0||a===""?[]:a.split(" ")},B1=(t,s,a)=>{const d=kh(t,s).concat([a]);return ko(t,s,d.join(" ")),!0},Ip=(t,s,a)=>{const i=Se(kh(t,s),d=>d!==a);return i.length>0?ko(t,s,i.join(" ")):de(t,s),!1},Iu=t=>t.dom.classList!==void 0,sg=t=>kh(t,"class"),Th=(t,s)=>B1(t,"class",s),Eh=(t,s)=>Ip(t,"class",s),Sa=(t,s)=>{Iu(t)?t.dom.classList.add(s):Th(t,s)},Lp=t=>{(Iu(t)?t.dom.classList:sg(t)).length===0&&de(t,"class")},ua=(t,s)=>{Iu(t)?t.dom.classList.remove(s):Eh(t,s),Lp(t)},Ki=(t,s)=>Iu(t)&&t.dom.classList.contains(s),nm=(t,s)=>{R(s,a=>{Sa(t,a)})},pl=(t,s)=>{R(s,a=>{ua(t,a)})},qC=(t,s)=>z(s,a=>Ki(t,a)),pT=t=>{const s=t.dom.classList,a=new Array(s.length);for(let i=0;i<s.length;i++){const d=s.item(i);d!==null&&(a[i]=d)}return a},bT=t=>Iu(t)?pT(t):sg(t),bl=t=>t.dom.value,of=(t,s)=>{if(s===void 0)throw new Error("Value.set was undefined");t.dom.value=s},KC=(t,s,a)=>ba(t,s).map(d=>{if(a.exists(p=>!Us(p,d))){const p=a.map(qo).getOr("span"),w=Lt.fromTag(p);return _u(d,w),w}else return d}),YC=(t,s,a)=>{a.fold(()=>kc(t,s),i=>{Us(i,s)||(_u(i,s),Ql(i))})},U0=(t,s,a)=>{const i=Ie(s,a),d=er(t);return R(d.slice(i.length),Ql),i},W0=(t,s,a,i)=>{const d=ba(t,s),g=i(a,d),p=KC(t,s,d);return YC(t,g.element,p),g},rg=(t,s,a)=>U0(t,s,(i,d)=>W0(t,d,i,a)),Z0=(t,s)=>U0(t,s,(a,i)=>{const d=ba(t,i);return YC(t,a,d),a}),XC=(t,s)=>{const a=Re(t),i=Re(s),d=Ne(i,a),g=ks(t,(p,w)=>!Kn(s,w)||p!==s[w]).t;return{toRemove:d,toSet:g}},JC=(t,s)=>{const{class:a,style:i,...d}=Xe(s),{toSet:g,toRemove:p}=XC(t.attributes,d),w=()=>{R(p,wn=>de(s,wn)),us(s,g)},T=Zr(s),{toSet:A,toRemove:D}=XC(t.styles,T),N=()=>{R(D,wn=>Po(s,wn)),Hr(s,A)},U=bT(s),W=Ne(U,t.classes),le=Ne(t.classes,U),pe=()=>{nm(s,le),pl(s,W)},nt=wn=>{Qm(s,wn)},$e=()=>{const wn=t.domChildren;Z0(s,wn)},rt=()=>{const wn=s,lt=t.value.getOrUndefined();lt!==bl(wn)&&of(wn,lt??"")};return w(),pe(),N(),t.innerHtml.fold($e,nt),rt(),s},QC=t=>{const s=Lt.fromTag(t.tag);us(s,t.attributes),nm(s,t.classes),Hr(s,t.styles),t.innerHtml.each(i=>Qm(s,i));const a=t.domChildren;return al(s,a),t.value.each(i=>{of(s,i)}),s},sf=(t,s)=>{try{const a=JC(t,s);return _.some(a)}catch{return _.none()}},_h=t=>t.innerHtml.isSome()&&t.domChildren.length>0,ag=(t,s)=>{const a=d=>qo(d)===t.tag&&!_h(t)&&!mT(d),i=s.filter(a).bind(d=>sf(t,d)).getOrThunk(()=>QC(t));return Ch(i,t.uid),i},e2=t=>{const s=qt(t,"behaviours").getOr({});return q(Re(s),a=>{const i=s[a];return cn(i)?[i.me]:[]})},vT=(t,s)=>Pp(t,s),j0=t=>{const s=e2(t);return vT(t,s)},Hp=(t,s,a)=>{const i=GC(t),d=hT(t),g={"alloy.base.modification":d},p=s.length>0?WC(a,g,s,i):d;return M1(i,p)},zp=(t,s,a)=>{const i={"alloy.base.behaviour":nf(t)};return Uc(a,t.eventOrder,s,i).getOrDie()},t2=(t,s)=>{const a=()=>wn,i=V(dT),d=ou(wi(t)),g=j0(t),p=yr(g),w=fT(g),T=Hp(d,p,w),A=ag(T,s),D=zp(d,p,w),N=V(d.components),U=lt=>{i.set(lt)},W=()=>{i.set(tf(a))},le=()=>{const lt=er(A),_n=q(lt,qn=>i.get().getByDom(qn).fold(()=>[],Wt));N.set(_n)},pe=lt=>{const _n=w;return(Ze(_n[lt.name()])?_n[lt.name()]:()=>{throw new Error("Could not find "+lt.name()+" in "+JSON.stringify(t,null,2))})()},nt=lt=>Ze(w[lt.name()]),$e=()=>d.apis,rt=lt=>w[lt]().map(_n=>_n.state.readState()).getOr("not enabled"),wn={uid:t.uid,getSystem:i.get,config:pe,hasConfigured:nt,spec:t,readState:rt,getApis:$e,connect:U,disconnect:W,element:A,syncComponents:le,components:N.get,events:D};return wn},yT=(t,s)=>{const a=qt(t,"components").getOr([]);return s.fold(()=>Ie(a,Ci),i=>Ie(a,(d,g)=>P1(d,ba(i,g))))},n2=(t,s)=>{const{events:a,...i}=V0(t),d=yT(i,s),g={...i,events:{..._1,...a},components:d};return Fo.value(t2(g,s))},Wa=t=>{const s=Lt.fromText(t);return $1({element:s})},$1=t=>{const s=Tc("external.component",Ja([At("element"),Ns("uid")]),t),a=V(tf()),i=w=>{a.set(w)},d=()=>{a.set(tf(()=>p))},g=s.uid.getOrThunk(()=>yd("external"));Ch(s.element,g);const p={uid:g,getSystem:a.get,config:_.none,hasConfigured:Le,connect:i,disconnect:d,getApis:()=>({}),element:s.element,spec:t,readState:Y("No state"),syncComponents:Q,components:Y([]),events:{}};return $p(p)},Vp=yd,rf=t=>Kn(t,"uid"),P1=(t,s)=>Fu(t).getOrThunk(()=>{const a=rf(t)?t:{uid:Vp(""),...t};return n2(a,s).getOrDie()}),Ci=t=>P1(t,_.none()),vl=$p;var wT=(t,s,a,i,d)=>t(a,i)?_.some(a):Ze(d)&&d(a)?_.none():s(a,i,d);const af=(t,s,a)=>{let i=t.dom;const d=Ze(a)?a:Le;for(;i.parentNode;){i=i.parentNode;const g=Lt.fromDom(i);if(s(g))return _.some(g);if(d(g))break}return _.none()},o2=(t,s,a)=>wT((d,g)=>g(d),af,t,s,a),Ah=(t,s)=>{const a=d=>s(Lt.fromDom(d));return se(t.dom.childNodes,a).map(Lt.fromDom)},s2=(t,s)=>{const a=i=>{for(let d=0;d<i.childNodes.length;d++){const g=Lt.fromDom(i.childNodes[d]);if(s(g))return _.some(g);const p=a(i.childNodes[d]);if(p.isSome())return p}return _.none()};return a(t.dom)},r2=(t,s,a)=>o2(t,s,a).isSome(),om=(t,s,a)=>af(t,i=>Jc(i,s),a),CT=(t,s)=>Ah(t,a=>Jc(a,s)),da=(t,s)=>zi(s,t),$l=(t,s,a)=>wT((d,g)=>Jc(d,g),om,t,s,a),Oh="aria-controls",F1=t=>o2(t,a=>{if(!xs(a))return!1;const i=ar(a,"id");return i!==void 0&&i.indexOf(Oh)>-1}).bind(a=>{const i=ar(a,"id"),d=Ko(a);return da(d,`[${Oh}="${i}"]`)}),I1=()=>{const t=Yn(Oh);return{id:t,link:i=>{ko(i,Oh,t)},unlink:i=>{de(i,Oh)}}},Up=(t,s)=>F1(s).exists(a=>sm(t,a)),sm=(t,s)=>r2(s,a=>Us(a,t.element),Le)||Up(t,s),L1="unknown";var Dh;(function(t){t[t.STOP=0]="STOP",t[t.NORMAL=1]="NORMAL",t[t.LOGGING=2]="LOGGING"})(Dh||(Dh={}));const G0=V({}),cg=(t,s)=>{const a=[],i=new Date().getTime();return{logEventCut:(d,g,p)=>{a.push({outcome:"cut",target:g,purpose:p})},logEventStopped:(d,g,p)=>{a.push({outcome:"stopped",target:g,purpose:p})},logNoParent:(d,g,p)=>{a.push({outcome:"no-parent",target:g,purpose:p})},logEventNoHandlers:(d,g)=>{a.push({outcome:"no-handlers-left",target:g})},logEventResponse:(d,g,p)=>{a.push({outcome:"response",purpose:p,target:g})},write:()=>{const d=new Date().getTime();nn(["mousemove","mouseover","mouseout",C1()],t)||console.log(t,{event:t,time:d-i,target:s.dom,sequence:Ie(a,g=>nn(["cut","stopped","response"],g.outcome)?"{"+g.purpose+"} "+g.outcome+" at ("+ef(g.target)+")":g.outcome)})}}},rm=(t,s,a)=>{switch(qt(G0.get(),t).orThunk(()=>{const d=Re(G0.get());return ao(d,g=>t.indexOf(g)>-1?_.some(G0.get()[g]):_.none())}).getOr(Dh.NORMAL)){case Dh.NORMAL:return a(ST());case Dh.LOGGING:{const d=cg(t,s),g=a(d);return d.write(),g}case Dh.STOP:return!0}},cf=["alloy/data/Fields","alloy/debugging/Debugging"],a2=()=>{const t=new Error;if(t.stack!==void 0){const s=t.stack.split(`
`);return se(s,a=>a.indexOf("alloy")>0&&!Fe(cf,i=>a.indexOf(i)>-1)).getOr(L1)}else return L1},bt={logEventCut:Q,logEventStopped:Q,logNoParent:Q,logEventNoHandlers:Q,logEventResponse:Q,write:Q},Rh=(t,s,a)=>rm(t,s,a),ST=Y(bt),q0=Y([At("menu"),At("selectedMenu")]),H1=Y([At("item"),At("selectedItem")]);Y(lo(H1().concat(q0())));const xa=Y(lo(H1())),c2=ul("initSize",[At("numColumns"),At("numRows")]),i2=()=>Mi("markers",xa()),Wp=()=>ul("markers",[At("backgroundMenu")].concat(q0()).concat(H1())),am=t=>ul("markers",Ie(t,At)),Mh=(t,s,a)=>(a2(),Qa(s,s,a,ia(i=>Fo.value((...d)=>i.apply(void 0,d))))),ds=t=>Mh("onHandler",t,Au(Q)),Yi=t=>Mh("onKeyboardHandler",t,Au(_.none)),lf=t=>Mh("onHandler",t,mc()),K0=t=>Mh("onKeyboardHandler",t,mc()),wr=(t,s)=>Ec(t,Y(s)),Y0=t=>Ec(t,Ot),Zp=Y(c2),gc=(t,s,a,i,d,g,p,w=!1)=>({x:t,y:s,bubble:a,direction:i,placement:d,restriction:g,label:`${p}-${d}`,alwaysFit:w}),Lu=mt.generate([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),$i=(t,s,a,i,d,g,p,w,T)=>t.fold(s,a,i,d,g,p,w,T),jp=(t,s,a,i)=>t.fold(s,s,i,i,s,i,a,a),xT=(t,s,a,i)=>t.fold(s,i,s,i,a,a,s,i),Nh=Lu.southeast,z1=Lu.southwest,V1=Lu.northeast,U1=Lu.northwest,l2=Lu.south,X0=Lu.north,u2=Lu.east,W1=Lu.west,ig=(t,s,a,i)=>{const d=t+s;return d>i?a:d<a?i:d},yl=(t,s,a)=>Math.min(Math.max(t,s),a),kT=(t,s)=>{switch(s){case 1:return t.x;case 0:return t.x+t.width;case 2:return t.y;case 3:return t.y+t.height}},nc=(t,s)=>Pe(["left","right","top","bottom"],a=>qt(s,a).map(i=>kT(t,i))),d2=(t,s,a)=>{const i=(T,A)=>s[T].map(D=>{const N=T==="top"||T==="bottom",U=N?a.top:a.left,le=(T==="left"||T==="top"?Math.max:Math.min)(D,A)+U;return N?yl(le,t.y,t.bottom):yl(le,t.x,t.right)}).getOr(A),d=i("left",t.x),g=i("top",t.y),p=i("right",t.right),w=i("bottom",t.bottom);return no(d,g,p-d,w-g)},cm="layout",TT=t=>t.x,Si=(t,s)=>t.x+t.width/2-s.width/2,Z1=(t,s)=>t.x+t.width-s.width,lu=(t,s)=>t.y-s.height,J0=t=>t.y+t.height,m2=(t,s)=>t.y+t.height/2-s.height/2,ET=t=>t.x+t.width,_T=(t,s)=>t.x-s.width,Ac=(t,s,a)=>gc(TT(t),J0(t),a.southeast(),Nh(),"southeast",nc(t,{left:1,top:3}),cm),Oc=(t,s,a)=>gc(Z1(t,s),J0(t),a.southwest(),z1(),"southwest",nc(t,{right:0,top:3}),cm),ci=(t,s,a)=>gc(TT(t),lu(t,s),a.northeast(),V1(),"northeast",nc(t,{left:1,bottom:2}),cm),Zc=(t,s,a)=>gc(Z1(t,s),lu(t,s),a.northwest(),U1(),"northwest",nc(t,{right:0,bottom:2}),cm),Xi=(t,s,a)=>gc(Si(t,s),lu(t,s),a.north(),X0(),"north",nc(t,{bottom:2}),cm),Za=(t,s,a)=>gc(Si(t,s),J0(t),a.south(),l2(),"south",nc(t,{top:3}),cm),j1=(t,s,a)=>gc(ET(t),m2(t,s),a.east(),u2(),"east",nc(t,{left:0}),cm),G1=(t,s,a)=>gc(_T(t,s),m2(t,s),a.west(),W1(),"west",nc(t,{right:1}),cm),f2=()=>[Ac,Oc,ci,Zc,Za,Xi,j1,G1],q1=()=>[Oc,Ac,Zc,ci,Za,Xi,j1,G1],Wn=()=>[ci,Zc,Ac,Oc,Xi,Za],lg=()=>[Zc,ci,Oc,Ac,Xi,Za],K1=()=>[Ac,Oc,ci,Zc,Za,Xi],Q0=()=>[Oc,Ac,Zc,ci,Za,Xi],AT=(t,s)=>s.universal?t:Se(t,a=>nn(s.channels,a));var g2=Object.freeze({__proto__:null,events:t=>dr([zt(au(),(s,a)=>{const i=t.channels,d=Re(i),g=a,p=AT(d,g);R(p,w=>{const T=i[w],A=T.schema,D=Tc("channel["+w+`] data
Receiver: `+ef(s.element),A,g.data);T.onReceive(s,D)})})])}),OT=[Mi("channels",mh(Fo.value,Ja([lf("onReceive"),Ke("schema",oi())])))];const DT=(t,s,a)=>gl(i=>{a(i,t,s)}),Y1=(t,s,a)=>lT((i,d)=>{a(i,t,s)}),RT=(t,s,a,i,d,g)=>{const p=Ja(t),w=vi(s,[kp("config",t)]);return h2(p,w,s,a,i,d,g)},wl=(t,s,a,i,d,g)=>{const p=t,w=vi(s,[qi("config",t)]);return h2(p,w,s,a,i,d,g)},Gp=(t,s,a)=>tm((d,...g)=>{const p=[d].concat(g);return d.config({name:Y(t)}).fold(()=>{throw new Error("We could not find any behaviour configuration for: "+t+". Using API: "+a)},w=>{const T=Array.prototype.slice.call(p,1);return s.apply(void 0,[d,w.config,w.state].concat(T))})},a,s),MT=t=>({key:t,value:void 0}),h2=(t,s,a,i,d,g,p)=>{const w=N=>Ts(N,a)?N[a]():_.none(),T=an(d,(N,U)=>Gp(a,N,U)),D={...an(g,(N,U)=>D1(N,U)),...T,revoke:$t(MT,a),config:N=>{const U=Tc(a+"-config",t,N);return{key:a,value:{config:U,me:D,configAsRaw:zr(()=>Tc(a+"-config",t,N)),initialConfig:N,state:p}}},schema:Y(s),exhibit:(N,U)=>ys(w(N),qt(i,"exhibit"),(W,le)=>le(U,W.config,W.state)).getOrThunk(()=>iu({})),name:Y(a),handlers:N=>w(N).map(U=>qt(i,"events").getOr(()=>({}))(U.config,U.state)).getOr({})};return D},mn=t=>nr(t),NT=Ja([At("fields"),At("name"),Ke("active",{}),Ke("apis",{}),Ke("state",cu),Ke("extra",{})]),hc=t=>{const s=Tc("Creating behaviour: "+t.name,NT,t);return RT(s.fields,s.name,s.active,s.apis,s.extra,s.state)},p2=Ja([At("branchKey"),At("branches"),At("name"),Ke("active",{}),Ke("apis",{}),Ke("state",cu),Ke("extra",{})]),ey=t=>{const s=Tc("Creating behaviour: "+t.name,p2,t);return wl(pi(s.branchKey,s.branches),s.name,s.active,s.apis,s.extra,s.state)},BT=Y(void 0),Pl=hc({fields:OT,name:"receiving",active:g2});var $T=Object.freeze({__proto__:null,exhibit:(t,s)=>iu({classes:[],styles:s.useFixed()?{}:{position:"relative"}})});const im=t=>t.dom.focus(),b2=t=>t.dom.blur(),ty=t=>{const s=Ko(t).dom;return t.dom===s.activeElement},Ji=(t=E())=>_.from(t.dom.activeElement).map(Lt.fromDom),Fl=t=>Ji(Ko(t)).filter(s=>t.dom.contains(s.dom)),X1=(t,s)=>{const a=Ko(s),i=Ji(a).bind(g=>{const p=w=>Us(g,w);return p(s)?_.some(s):s2(s,p)}),d=t(s);return i.each(g=>{Ji(a).filter(p=>Us(p,g)).fold(()=>{im(g)},Q)}),d},Hu=(t,s,a,i,d)=>{const g=p=>p+"px";return{position:t,left:s.map(g),top:a.map(g),right:i.map(g),bottom:d.map(g)}},v2=t=>({...t,position:_.some(t.position)}),qp=(t,s)=>{pr(t,v2(s))},ja=mt.generate([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),y2=(t,s,a,i,d,g)=>{const p=s.rect,w=p.x-a,T=p.y-i,A=p.width,D=p.height,N=d-(w+A),U=g-(T+D),W=_.some(w),le=_.some(T),pe=_.some(N),nt=_.some(U),$e=_.none();return $i(s.direction,()=>Hu(t,W,le,$e,$e),()=>Hu(t,$e,le,pe,$e),()=>Hu(t,W,$e,$e,nt),()=>Hu(t,$e,$e,pe,nt),()=>Hu(t,W,le,$e,$e),()=>Hu(t,W,$e,$e,nt),()=>Hu(t,W,le,$e,$e),()=>Hu(t,$e,le,pe,$e))},uf=(t,s)=>t.fold(()=>{const a=s.rect;return Hu("absolute",_.some(a.x),_.some(a.y),_.none(),_.none())},(a,i,d,g)=>y2("absolute",s,a,i,d,g),(a,i,d,g)=>y2("fixed",s,a,i,d,g)),J1=(t,s)=>{const a=$t(Co,s),i=t.fold(a,a,()=>{const p=ji();return Co(s).translate(-p.left,-p.top)}),d=rr(s),g=Un(s);return no(i.left,i.top,d,g)},w2=(t,s)=>s.fold(()=>t.fold(Xa,Xa,no),a=>t.fold(a,a,()=>{const i=a(),d=ny(t,i.x,i.y);return no(d.left,d.top,i.width,i.height)})),ny=(t,s,a)=>{const i=Yo(s,a),d=()=>{const g=ji();return i.translate(-g.left,-g.top)};return t.fold(Y(i),Y(i),d)},PT=(t,s,a,i)=>t.fold(s,a,i);ja.none;const FT=ja.relative,oy=ja.fixed,IT=(t,s)=>({anchorBox:t,origin:s}),ug=(t,s)=>IT(t,s),Kp="data-alloy-placement",Q1=(t,s)=>{ko(t,Kp,s)},sy=t=>$(t,Kp),dg=t=>de(t,Kp),mg=mt.generate([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Bh=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y:w,right:T,bottom:A,width:D,height:N}=t,U=p>=a&&p<=d,W=w>=i&&w<=g,le=U&&W,pe=T<=d&&T>=a,nt=A<=g&&A>=i,$e=pe&&nt,rt=Math.min(D,p>=a?d-p:T-a),wn=Math.min(N,w>=i?g-w:A-i);return{originInBounds:le,sizeInBounds:$e,visibleW:rt,visibleH:wn}},Yp=(t,s)=>{const{x:a,y:i,right:d,bottom:g}=s,{x:p,y:w,width:T,height:A}=t,D=Math.max(a,d-T),N=Math.max(i,g-A),U=yl(p,a,D),W=yl(w,i,N),le=Math.min(U+T,d)-U,pe=Math.min(W+A,g)-W;return no(U,W,le,pe)},LT=(t,s,a)=>{const i=Y(s.bottom-a.y),d=Y(a.bottom-s.y),g=jp(t,d,d,i),p=Y(s.right-a.x),w=Y(a.right-s.x);return{maxWidth:xT(t,w,w,p),maxHeight:g}},C2=(t,s,a,i)=>{const d=t.bubble,g=d.offset,p=d2(i,t.restriction,g),w=t.x+g.left,T=t.y+g.top,A=no(w,T,s,a),{originInBounds:D,sizeInBounds:N,visibleW:U,visibleH:W}=Bh(A,p),le=D&&N,pe=le?A:Yp(A,p),nt=pe.width>0&&pe.height>0,{maxWidth:$e,maxHeight:rt}=LT(t.direction,pe,i),wn={rect:pe,maxHeight:rt,maxWidth:$e,direction:t.direction,placement:t.placement,classes:{on:d.classesOn,off:d.classesOff},layout:t.label,testY:T};return le||t.alwaysFit?mg.fit(wn):mg.nofit(wn,U,W,nt)},ry=(t,s,a,i,d,g)=>{const p=i.width,w=i.height,T=(D,N,U,W,le)=>{const pe=D(a,i,d,t,g),nt=C2(pe,p,w,g);return nt.fold(Y(nt),($e,rt,wn,lt)=>(le===lt?wn>W||rt>U:!le&&lt)?nt:mg.nofit(N,U,W,le))};return Ee(s,(D,N)=>{const U=$t(T,N);return D.fold(Y(D),U)},mg.nofit({rect:a,maxHeight:i.height,maxWidth:i.width,direction:Nh(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:a.y},-1,-1,!1)).fold(Ot,Ot)},ay=t=>{const s=V(_.none()),a=()=>s.get().each(t);return{clear:()=>{a(),s.set(_.none())},isSet:()=>s.get().isSome(),get:()=>s.get(),set:w=>{a(),s.set(_.some(w))}}},HT=()=>ay(t=>t.destroy()),fg=()=>ay(t=>t.unbind()),Wr=()=>{const t=ay(Q);return{...t,on:a=>t.get().each(a)}},cy=Me,ii=(t,s,a)=>Zd(t,s,cy,a),iy=(t,s,a)=>zf(t,s,cy,a),ly=Fm,Xp=["top","bottom","right","left"],ev="data-alloy-transition-timer",Jp=(t,s)=>qC(t,s.classes),S2=(t,s,a)=>a.exists(i=>{const d=t.mode;return d==="all"?!0:i[d]!==s[d]}),aO=(t,s)=>{const a=i=>parseFloat(i).toFixed(3);return sn(s,(i,d)=>{const g=t[d].map(a),p=i.map(a);return!ga(g,p)}).isSome()},df=t=>{const s=g=>{const w=Dt(t,g).split(/\s*,\s*/);return Se(w,vt)},a=g=>{if(Nt(g)&&/^[\d.]+/.test(g)){const p=parseFloat(g);return we(g,"ms")?p:p*1e3}else return 0},i=s("transition-delay"),d=s("transition-duration");return Ee(d,(g,p,w)=>{const T=a(i[w])+a(p);return Math.max(g,T)},0)},zT=(t,s)=>{const a=fg(),i=fg();let d;const g=A=>{var D;const N=(D=A.raw.pseudoElement)!==null&&D!==void 0?D:"";return Us(A.target,t)&&jn(N)&&nn(Xp,A.raw.propertyName)},p=A=>{if(Mt(A)||g(A)){a.clear(),i.clear();const D=A==null?void 0:A.raw.type;(Mt(D)||D===qd())&&(clearTimeout(d),de(t,ev),pl(t,s.classes))}},w=ii(t,aT(),A=>{g(A)&&(w.unbind(),a.set(ii(t,qd(),p)),i.set(ii(t,Ca(),p)))}),T=df(t);requestAnimationFrame(()=>{d=setTimeout(p,T+17),ko(t,ev,d)})},VT=(t,s)=>{nm(t,s.classes),$(t,ev).each(a=>{clearTimeout(parseInt(a,10)),de(t,ev)}),zT(t,s)},UT=(t,s,a,i,d,g)=>{const p=S2(i,d,g);if(p||Jp(t,i)){Vn(t,"position",a.position);const w=J1(s,t),T=uf(s,{...d,rect:w}),A=Pe(Xp,D=>T[D]);aO(a,A)&&(pr(t,A),p&&VT(t,i),ne(t))}else pl(t,i.classes)},WT=t=>({width:rr(t),height:Un(t)}),x2=(t,s,a,i)=>{Po(s,"max-height"),Po(s,"max-width");const d=WT(s);return ry(s,i.preference,t,d,a,i.bounds)},uy=(t,s)=>{const a=s.classes;pl(t,a.off),nm(t,a.on)},ZT=(t,s,a)=>{const i=a.maxHeightFunction;i(t,s.maxHeight)},jT=(t,s,a)=>{const i=a.maxWidthFunction;i(t,s.maxWidth)},tv=(t,s,a)=>{const i=uf(a.origin,s);a.transition.each(d=>{UT(t,a.origin,i,d,s,a.lastPlacement)}),qp(t,i)},GT=(t,s)=>{Q1(t,s.placement)},k2=(t,s)=>{so(t,Math.floor(s))},qT=Y((t,s)=>{k2(t,s),Hr(t,{"overflow-x":"hidden","overflow-y":"auto"})}),Qp=Y((t,s)=>{k2(t,s)}),dy=(t,s,a)=>t[s]===void 0?a:t[s],T2=(t,s,a,i,d,g,p,w)=>{const T=dy(p,"maxHeightFunction",qT()),A=dy(p,"maxWidthFunction",Q),D=t.anchorBox,N=t.origin,U={bounds:w2(N,g),origin:N,preference:i,maxHeightFunction:T,maxWidthFunction:A,lastPlacement:d,transition:w};return E2(D,s,a,U)},E2=(t,s,a,i)=>{const d=x2(t,s,a,i);return tv(s,d,i),GT(s,d),uy(s,d),ZT(s,d,i),jT(s,d,i),{layout:d.layout,placement:d.placement}},_2=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],gg=(t,s,a,i=1)=>{const d=t*i,g=s*i,p=T=>qt(a,T).getOr([]),w=(T,A,D)=>{const N=Ne(_2,D);return{offset:Yo(T,A),classesOn:q(D,p),classesOff:q(N,p)}};return{southeast:()=>w(-t,s,["top","alignLeft"]),southwest:()=>w(t,s,["top","alignRight"]),south:()=>w(-t/2,s,["top","alignCentre"]),northeast:()=>w(-t,-s,["bottom","alignLeft"]),northwest:()=>w(t,-s,["bottom","alignRight"]),north:()=>w(-t/2,-s,["bottom","alignCentre"]),east:()=>w(t,-s/2,["valignCentre","left"]),west:()=>w(-t,-s/2,["valignCentre","right"]),insetNortheast:()=>w(d,g,["top","alignLeft","inset"]),insetNorthwest:()=>w(-d,g,["top","alignRight","inset"]),insetNorth:()=>w(-d/2,g,["top","alignCentre","inset"]),insetSoutheast:()=>w(d,-g,["bottom","alignLeft","inset"]),insetSouthwest:()=>w(-d,-g,["bottom","alignRight","inset"]),insetSouth:()=>w(-d/2,-g,["bottom","alignCentre","inset"]),insetEast:()=>w(-d,-g/2,["valignCentre","right","inset"]),insetWest:()=>w(d,-g/2,["valignCentre","left","inset"])}},hg=()=>gg(0,0,{}),mf=Ot,$h=(t,s)=>a=>A2(a)==="rtl"?s:t,A2=t=>Dt(t,"direction")==="rtl"?"rtl":"ltr";var lm;(function(t){t.TopToBottom="toptobottom",t.BottomToTop="bottomtotop"})(lm||(lm={}));const my="data-alloy-vertical-dir",KT=t=>r2(t,s=>xs(s)&&ar(s,"data-alloy-vertical-dir")===lm.BottomToTop),ff=()=>vi("layouts",[At("onLtr"),At("onRtl"),Ns("onBottomLtr"),Ns("onBottomRtl")]),nv=(t,s,a,i,d,g,p)=>{const w=p.map(KT).getOr(!1),T=s.layouts.map(W=>W.onLtr(t)),A=s.layouts.map(W=>W.onRtl(t)),D=w?s.layouts.bind(W=>W.onBottomLtr.map(le=>le(t))).or(T).getOr(d):T.getOr(a),N=w?s.layouts.bind(W=>W.onBottomRtl.map(le=>le(t))).or(A).getOr(g):A.getOr(i);return $h(D,N)(t)},YT=(t,s,a)=>{const i=s.hotspot,d=J1(a,i.element),g=nv(t.element,s,K1(),Q0(),Wn(),lg(),_.some(s.hotspot.element));return _.some(mf({anchorBox:d,bubble:s.bubble.getOr(hg()),overrides:s.overrides,layouts:g,placer:_.none()}))};var fy=[At("hotspot"),Ns("bubble"),Ke("overrides",{}),ff(),wr("placement",YT)];const XT=(t,s,a)=>{const i=ny(a,s.x,s.y),d=no(i.left,i.top,s.width,s.height),g=nv(t.element,s,f2(),q1(),f2(),q1(),_.none());return _.some(mf({anchorBox:d,bubble:s.bubble,overrides:s.overrides,layouts:g,placer:_.none()}))};var JT=[At("x"),At("y"),Ke("height",0),Ke("width",0),Ke("bubble",hg()),Ke("overrides",{}),ff(),wr("placement",XT)];const gy=mt.generate([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),O2=t=>t.fold(Ot,(s,a,i)=>s.translate(-a,-i)),D2=t=>t.fold(Ot,Ot),hy=t=>Ee(t,(s,a)=>s.translate(a.left,a.top),Yo(0,0)),R2=t=>{const s=Ie(t,O2);return hy(s)},M2=t=>{const s=Ie(t,D2);return hy(s)},QT=gy.screen,ov=gy.absolute,N2=(t,s,a)=>{const i=Ic(a.root).dom,d=g=>{const p=pa(g),w=pa(t.element);return Us(p,w)};return _.from(i.frameElement).map(Lt.fromDom).filter(d).map(Ds)},sv=(t,s,a)=>{const i=pa(t.element),d=ji(i),g=N2(t,s,a).getOr(d);return ov(g,d.left,d.top)},Cd=(t,s,a,i)=>{const d=QT(Yo(t,s));return _.some(ns(d,a,i))},py=(t,s,a,i,d)=>t.map(g=>{const p=[s,g.point],w=PT(i,()=>M2(p),()=>M2(p),()=>R2(p)),T=jo(w.left,w.top,g.width,g.height),A=a.showAbove?Wn():K1(),D=a.showAbove?lg():Q0(),N=nv(d,a,A,D,A,D,_.none());return mf({anchorBox:T,bubble:a.bubble.getOr(hg()),overrides:a.overrides,layouts:N,placer:_.none()})}),by=(t,s,a)=>{const i=sv(t,a,s);return s.node.filter(Kr).bind(d=>{const g=d.dom.getBoundingClientRect(),p=Cd(g.left,g.top,g.width,g.height),w=s.node.getOr(t.element);return py(p,i,s,a,w)})};var B2=[At("node"),At("root"),Ns("bubble"),ff(),Ke("overrides",{}),Ke("showAbove",!1),wr("placement",by)];const $2="\uFEFF",vy=" ",rv={create:(t,s,a,i)=>({start:t,soffset:s,finish:a,foffset:i})},eb=mt.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),tb=(t,s,a,i)=>t.fold(s,a,i),pg=t=>t.fold(Ot,Ot,Ot),eE=eb.before,yy=eb.on,tE=eb.after,av={before:eE,on:yy,after:tE,cata:tb,getStart:pg},nb=mt.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),P2=t=>nb.exact(t.start,t.soffset,t.finish,t.foffset),nE=t=>t.match({domRange:s=>Lt.fromDom(s.startContainer),relative:(s,a)=>av.getStart(s),exact:(s,a,i,d)=>s}),oE=nb.domRange,sE=nb.relative,oc=nb.exact,Ph=t=>{const s=nE(t);return Ic(s)},um=rv.create,dm={domRange:oE,relative:sE,exact:oc,exactFromRange:P2,getWin:Ph,range:um},rE=(t,s)=>{s.fold(a=>{t.setStartBefore(a.dom)},(a,i)=>{t.setStart(a.dom,i)},a=>{t.setStartAfter(a.dom)})},gf=(t,s)=>{s.fold(a=>{t.setEndBefore(a.dom)},(a,i)=>{t.setEnd(a.dom,i)},a=>{t.setEndAfter(a.dom)})},zu=(t,s,a)=>{const i=t.document.createRange();return rE(i,s),gf(i,a),i},cv=(t,s,a,i,d)=>{const g=t.document.createRange();return g.setStart(s.dom,a),g.setEnd(i.dom,d),g},iv=t=>({left:t.left,top:t.top,right:t.right,bottom:t.bottom,width:t.width,height:t.height}),wy=t=>{const s=t.getClientRects(),a=s.length>0?s[0]:t.getBoundingClientRect();return a.width>0||a.height>0?_.some(a).map(iv):_.none()},F2=t=>{const s=t.getBoundingClientRect();return s.width>0||s.height>0?_.some(s).map(iv):_.none()},mm=mt.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Sd=(t,s,a)=>s(Lt.fromDom(a.startContainer),a.startOffset,Lt.fromDom(a.endContainer),a.endOffset),lv=(t,s)=>s.match({domRange:a=>({ltr:Y(a),rtl:_.none}),relative:(a,i)=>({ltr:zr(()=>zu(t,a,i)),rtl:zr(()=>_.some(zu(t,i,a)))}),exact:(a,i,d,g)=>({ltr:zr(()=>cv(t,a,i,d,g)),rtl:zr(()=>_.some(cv(t,d,g,a,i)))})}),I2=(t,s)=>{const a=s.ltr();return a.collapsed?s.rtl().filter(d=>d.collapsed===!1).map(d=>mm.rtl(Lt.fromDom(d.endContainer),d.endOffset,Lt.fromDom(d.startContainer),d.startOffset)).getOrThunk(()=>Sd(t,mm.ltr,a)):Sd(t,mm.ltr,a)},ob=(t,s)=>{const a=lv(t,s);return I2(t,a)},Fh=(t,s)=>ob(t,s).match({ltr:(i,d,g,p)=>{const w=t.document.createRange();return w.setStart(i.dom,d),w.setEnd(g.dom,p),w},rtl:(i,d,g,p)=>{const w=t.document.createRange();return w.setStart(g.dom,p),w.setEnd(i.dom,d),w}});mm.ltr,mm.rtl;const jc=(t,s)=>Qc(s,t),L2=(t,s,a,i)=>{const g=pa(t).dom.createRange();return g.setStart(t.dom,s),g.setEnd(a.dom,i),g},hf=(t,s,a,i)=>{const d=L2(t,s,a,i),g=Us(t,a)&&s===i;return d.collapsed&&!g},Dc=t=>_.from(t.getSelection()),Cy=t=>{if(t.rangeCount>0){const s=t.getRangeAt(0),a=t.getRangeAt(t.rangeCount-1);return _.some(rv.create(Lt.fromDom(s.startContainer),s.startOffset,Lt.fromDom(a.endContainer),a.endOffset))}else return _.none()},Vu=t=>{if(t.anchorNode===null||t.focusNode===null)return Cy(t);{const s=Lt.fromDom(t.anchorNode),a=Lt.fromDom(t.focusNode);return hf(s,t.anchorOffset,a,t.focusOffset)?_.some(rv.create(s,t.anchorOffset,a,t.focusOffset)):Cy(t)}},sb=t=>Dc(t).filter(s=>s.rangeCount>0).bind(Vu),uv=(t,s)=>{const a=Fh(t,s);return wy(a)},bg=(t,s)=>{const a=Fh(t,s);return F2(a)},Ih=((t,s)=>{const a=g=>{if(!t(g))throw new Error("Can only get "+s+" value of a "+s+" node");return i(g).getOr("")},i=g=>t(g)?_.from(g.dom.nodeValue):_.none();return{get:a,getOption:i,set:(g,p)=>{if(!t(g))throw new Error("Can only set raw "+s+" value of a "+s+" node");g.dom.nodeValue=p}}})(Lr,"text"),H2=t=>Ih.get(t),xd=(t,s)=>({element:t,offset:s}),Lh=(t,s)=>{const a=er(t);if(a.length===0)return xd(t,s);if(s<a.length)return xd(a[s],0);{const i=a[a.length-1],d=Lr(i)?H2(i).length:er(i).length;return xd(i,d)}},z2=(t,s)=>Lr(t)?xd(t,s):Lh(t,s),rb=(t,s)=>s.getSelection.getOrThunk(()=>()=>sb(t))().map(i=>{const d=z2(i.start,i.soffset),g=z2(i.finish,i.foffset);return dm.range(d.element,d.offset,g.element,g.offset)}),fm=(t,s,a)=>{const i=Ic(s.root).dom,d=sv(t,a,s),g=rb(i,s).bind(T=>bg(i,dm.exactFromRange(T)).orThunk(()=>{const D=Lt.fromText($2);_u(T.start,D);const N=uv(i,dm.exact(D,0,D,1));return Ql(D),N}).bind(D=>Cd(D.left,D.top,D.width,D.height))),w=rb(i,s).bind(T=>xs(T.start)?_.some(T.start):Ai(T.start)).getOr(t.element);return py(g,d,s,a,w)};var iO=[Ns("getSelection"),At("root"),Ns("bubble"),ff(),Ke("overrides",{}),Ke("showAbove",!1),wr("placement",fm)];const ab="link-layout",cb=t=>t.x+t.width,Sy=(t,s)=>t.x-s.width,xy=(t,s)=>t.y-s.height+t.height,ky=t=>t.y,V2=(t,s,a)=>gc(cb(t),ky(t),a.southeast(),Nh(),"southeast",nc(t,{left:0,top:2}),ab),Cl=(t,s,a)=>gc(Sy(t,s),ky(t),a.southwest(),z1(),"southwest",nc(t,{right:1,top:2}),ab),Hh=(t,s,a)=>gc(cb(t),xy(t,s),a.northeast(),V1(),"northeast",nc(t,{left:0,bottom:3}),ab),dv=(t,s,a)=>gc(Sy(t,s),xy(t,s),a.northwest(),U1(),"northwest",nc(t,{right:1,bottom:3}),ab),kd=()=>[V2,Cl,Hh,dv],xi=()=>[Cl,V2,dv,Hh],Sl=(t,s,a)=>{const i=J1(a,s.item.element),d=nv(t.element,s,kd(),xi(),kd(),xi(),_.none());return _.some(mf({anchorBox:i,bubble:hg(),overrides:s.overrides,layouts:d,placer:_.none()}))};var Pi=[At("item"),ff(),Ke("overrides",{}),wr("placement",Sl)],Td=pi("type",{selection:iO,node:B2,hotspot:fy,submenu:Pi,makeshift:JT});const Ty=[bi("classes",Oa),dl("mode","all",["all","layout","placement"])],xl=[Ke("useFixed",Le),Ns("getBounds")],vg=[Mi("anchor",Td),vi("transition",Ty)],cE=()=>{const t=document.documentElement;return oy(0,0,t.clientWidth,t.clientHeight)},lO=t=>{const s=Ds(t.element),a=t.element.dom.getBoundingClientRect();return FT(s.left,s.top,a.width,a.height)},uO=(t,s,a,i,d,g,p)=>{const w=ug(a.anchorBox,s);return T2(w,d.element,a.bubble,a.layouts,g,i,a.overrides,p)},yg=(t,s,a,i,d)=>{Ey(t,s,a,i,d,_.none())},Ey=(t,s,a,i,d,g)=>{const p=g.map(os);return ib(t,s,a,i,d,p)},ib=(t,s,a,i,d,g)=>{const p=Tc("placement.info",lo(vg),d),w=p.anchor,T=i.element,A=a.get(i.uid);X1(()=>{Vn(T,"position","fixed");const D=tr(T,"visibility");Vn(T,"visibility","hidden");const N=s.useFixed()?cE():lO(t),U=w.placement,W=g.map(Y).or(s.getBounds);U(t,w,N).each(le=>{const nt=le.placer.getOr(uO)(t,N,le,W,i,A,p.transition);a.set(i.uid,nt)}),D.fold(()=>{Po(T,"visibility")},le=>{Vn(T,"visibility",le)}),tr(T,"left").isNone()&&tr(T,"top").isNone()&&tr(T,"right").isNone()&&tr(T,"bottom").isNone()&&_r(tr(T,"position"),"fixed")&&Po(T,"position")},T)};var _y=Object.freeze({__proto__:null,position:yg,positionWithin:Ey,positionWithinBounds:ib,getMode:(t,s,a)=>s.useFixed()?"fixed":"absolute",reset:(t,s,a,i)=>{const d=i.element;R(["position","left","right","top","bottom"],g=>Po(d,g)),dg(d),a.clear(i.uid)}}),lE=Object.freeze({__proto__:null,init:()=>{let t={};return Bi({readState:()=>t,clear:d=>{cn(d)?delete t[d]:t={}},set:(d,g)=>{t[d]=g},get:d=>qt(t,d)})}});const li=hc({fields:xl,name:"positioning",active:$T,apis:_y,state:lE}),mv=t=>t.getSystem().isConnected(),wg=t=>{Ws(t,ph());const s=t.components();R(s,wg)},gm=t=>{const s=t.components();R(s,gm),Ws(t,bd())},lb=(t,s)=>{t.getSystem().addToWorld(s),Kr(t.element)&&gm(s)},fv=t=>{wg(t),t.getSystem().removeFromWorld(t)},W2=(t,s)=>{kc(t.element,s.element)},uE=t=>{R(t.components(),s=>Ql(s.element)),ud(t.element),t.syncComponents()},dE=(t,s,a)=>{const i=t.components();uE(t);const d=a(s),g=Ne(i,d);R(g,p=>{wg(p),t.getSystem().removeFromWorld(p)}),R(d,p=>{mv(p)?W2(t,p):(t.getSystem().addToWorld(p),W2(t,p),Kr(t.element)&&gm(p))}),t.syncComponents()},gv=(t,s,a)=>{const i=t.components(),d=q(s,w=>Fu(w).toArray());R(i,w=>{nn(d,w)||fv(w)});const g=a(s),p=Ne(i,g);R(p,w=>{mv(w)&&fv(w)}),R(g,w=>{mv(w)||lb(t,w)}),t.syncComponents()},Rc=(t,s)=>{Z2(t,s,kc)},Z2=(t,s,a)=>{t.getSystem().addToWorld(s),a(t.element,s.element),Kr(t.element)&&gm(s),t.syncComponents()},zh=t=>{wg(t),Ql(t.element),t.getSystem().removeFromWorld(t)},Mc=t=>{const s=aa(t.element).bind(a=>t.getSystem().getByDom(a).toOptional());zh(t),s.each(a=>{a.syncComponents()})},hv=t=>{const s=t.components();R(s,zh),ud(t.element),t.syncComponents()},uu=(t,s)=>{Oy(t,s,kc)},Ay=(t,s)=>{Oy(t,s,eh)},Oy=(t,s,a)=>{a(t,s.element);const i=er(s.element);R(i,d=>{s.getByDom(d).each(gm)})},mE=t=>{const s=er(t.element);R(s,a=>{t.getByDom(a).each(wg)}),Ql(t.element)},fE=(t,s,a,i)=>{a.get().each(p=>{hv(t)});const d=s.getAttachPoint(t);Rc(d,t);const g=t.getSystem().build(i);return Rc(t,g),a.set(g),g},Dy=(t,s,a,i)=>{const d=fE(t,s,a,i);return s.onOpen(t,d),d},j2=(t,s,a,i)=>a.get().map(()=>fE(t,s,a,i)),gE=(t,s,a,i,d)=>{My(t,s),Dy(t,s,a,i),d(),Cg(t,s)},ub=(t,s,a)=>{a.get().each(i=>{hv(t),Mc(t),s.onClose(t,i),a.clear()})},Vh=(t,s,a)=>a.isOpen(),hE=(t,s,a,i)=>Vh(t,s,a)&&a.get().exists(d=>s.isPartOf(t,d,i)),G2=(t,s,a)=>a.get(),Ry=(t,s,a,i)=>{tr(t.element,s).fold(()=>{de(t.element,a)},d=>{ko(t.element,a,d)}),Vn(t.element,s,i)},pE=(t,s,a)=>{$(t.element,a).fold(()=>Po(t.element,s),i=>Vn(t.element,s,i))},My=(t,s,a)=>{const i=s.getAttachPoint(t);Vn(t.element,"position",li.getMode(i)),Ry(t,"visibility",s.cloakVisibilityAttr,"hidden")},pf=t=>Fe(["top","left","right","bottom"],s=>tr(t,s).isSome()),Cg=(t,s,a)=>{pf(t.element)||Po(t.element,"position"),pE(t,"visibility",s.cloakVisibilityAttr)};var q2=Object.freeze({__proto__:null,cloak:My,decloak:Cg,open:Dy,openWhileCloaked:gE,close:ub,isOpen:Vh,isPartOf:hE,getState:G2,setContent:j2}),K2=Object.freeze({__proto__:null,events:(t,s)=>dr([zt(Dp(),(a,i)=>{ub(a,t,s)})])}),Ny=[ds("onOpen"),ds("onClose"),At("isPartOf"),At("getAttachPoint"),Ke("cloakVisibilityAttr","data-precloak-visibility")],pv=Object.freeze({__proto__:null,init:()=>{const t=Wr(),s=Y("not-implemented");return Bi({readState:s,isOpen:t.isSet,clear:t.clear,set:t.set,get:t.get})}});const ms=hc({fields:Ny,name:"sandboxing",active:K2,apis:q2,state:pv}),Ed=Y("dismiss.popups"),bf=Y("reposition.popups"),vf=Y("mouse.released"),$y=Ja([Ke("isExtraPart",Le),vi("fireEventInstead",[Ke("event",Yd())])]),Uh=t=>{const s=Tc("Dismissal",$y,t);return{[Ed()]:{schema:Ja([At("target")]),onReceive:(a,i)=>{ms.isOpen(a)&&(ms.isPartOf(a,i.target)||s.isExtraPart(a,i.target)||s.fireEventInstead.fold(()=>ms.close(a),g=>Ws(a,g.event)))}}}},yf=Ja([vi("fireEventInstead",[Ke("event",x1())]),wa("doReposition")]),bv=t=>{const s=Tc("Reposition",yf,t);return{[bf()]:{onReceive:a=>{ms.isOpen(a)&&s.fireEventInstead.fold(()=>s.doReposition(a),i=>Ws(a,i.event))}}}},vv=(t,s,a)=>{s.store.manager.onLoad(t,s,a)},yv=(t,s,a)=>{s.store.manager.onUnload(t,s,a)};var wv=Object.freeze({__proto__:null,onLoad:vv,onUnload:yv,setValue:(t,s,a,i)=>{s.store.manager.setValue(t,s,a,i)},getValue:(t,s,a)=>s.store.manager.getValue(t,s,a),getState:(t,s,a)=>a}),Y2=Object.freeze({__proto__:null,events:(t,s)=>{const a=t.resetOnDom?[Ur((i,d)=>{vv(i,t,s)}),Bl((i,d)=>{yv(i,t,s)})]:[Y1(t,s,vv)];return dr(a)}});const hm=()=>{const t=V(null),s=()=>({mode:"memory",value:t.get()}),a=()=>t.get()===null,i=()=>{t.set(null)};return Bi({set:t.set,get:t.get,isNotSet:a,clear:i,readState:s})},Py=()=>Bi({readState:Q}),kg=()=>{const t=V({}),s=V({});return Bi({readState:()=>({mode:"dataset",dataByValue:t.get(),dataByText:s.get()}),lookup:p=>qt(t.get(),p).orThunk(()=>qt(s.get(),p)),update:p=>{const w=t.get(),T=s.get(),A={},D={};R(p,N=>{A[N.value]=N,qt(N,"meta").each(U=>{qt(U,"text").each(W=>{D[W]=N})})}),t.set({...w,...A}),s.set({...T,...D})},clear:()=>{t.set({}),s.set({})}})};var X2=Object.freeze({__proto__:null,memory:hm,dataset:kg,manual:Py,init:t=>t.store.manager.state(t)});const mb=(t,s,a,i)=>{const d=s.store;a.update([i]),d.setValue(t,i),s.onSetValue(t,i)},Iy=(t,s,a)=>{const i=s.store,d=i.getDataKey(t);return a.lookup(d).getOrThunk(()=>i.getFallbackEntry(d))},bE=(t,s,a)=>{s.store.initialValue.each(d=>{mb(t,s,a,d)})},vE=(t,s,a)=>{a.clear()};var _d=[Ns("initialValue"),At("getFallbackEntry"),At("getDataKey"),At("setValue"),wr("manager",{setValue:mb,getValue:Iy,onLoad:bE,onUnload:vE,state:kg})];const Wh=(t,s,a)=>s.store.getValue(t),yE=(t,s,a,i)=>{s.store.setValue(t,i),s.onSetValue(t,i)},Il=(t,s,a)=>{s.store.initialValue.each(i=>{s.store.setValue(t,i)})};var sc=[At("getValue"),Ke("setValue",Q),Ns("initialValue"),wr("manager",{setValue:yE,getValue:Wh,onLoad:Il,onUnload:Q,state:cu.init})];const wE=(t,s,a,i)=>{a.set(i),s.onSetValue(t,i)},Zh=(t,s,a)=>a.get(),jh=(t,s,a)=>{s.store.initialValue.each(i=>{a.isNotSet()&&a.set(i)})},J2=(t,s,a)=>{a.clear()};var Q2=[Ns("initialValue"),wr("manager",{setValue:wE,getValue:Zh,onLoad:jh,onUnload:J2,state:hm})],CE=[Da("store",{mode:"memory"},pi("mode",{memory:Q2,manual:sc,dataset:_d})),ds("onSetValue"),Ke("resetOnDom",!1)];const En=hc({fields:CE,name:"representing",active:Y2,apis:wv,extra:{setValueFrom:(t,s)=>{const a=En.getValue(s);En.setValue(t,a)}},state:X2}),Na=(t,s)=>I(t,{},Ie(s,a=>B0(a.name(),"Cannot configure "+a.name()+" for "+t)).concat([Ec("dump",Ot)])),Tg=t=>t.dump,pc=(t,s)=>({...mn(s),...t.dump}),Ll={field:Na,augment:pc,get:Tg},Cv="placeholder",Gh=mt.generate([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),fb=t=>Kn(t,"uiType"),eS=(t,s,a,i)=>t.exists(d=>d!==a.owner)?Gh.single(!0,Y(a)):qt(i,a.name).fold(()=>{throw new Error("Unknown placeholder component: "+a.name+`
Known: [`+Re(i)+`]
Namespace: `+t.getOr("none")+`
Spec: `+JSON.stringify(a,null,2))},d=>d.replace()),gb=(t,s,a,i)=>fb(a)&&a.uiType===Cv?eS(t,s,a,i):Gh.single(!1,Y(a)),Ly=(t,s,a,i)=>gb(t,s,a,i).fold((g,p)=>{const w=fb(a)?p(s,a.config,a.validated):p(s),T=qt(w,"components").getOr([]),A=q(T,D=>Ly(t,s,D,i));return[{...w,components:A}]},(g,p)=>{if(fb(a)){const w=p(s,a.config,a.validated);return a.validated.preprocess.getOr(Ot)(w)}else return p(s)}),wf=(t,s,a,i)=>q(a,d=>Ly(t,s,d,i)),hb=(t,s)=>{let a=!1;const i=()=>a,d=()=>{if(a)throw new Error("Trying to use the same placeholder more than once: "+t);return a=!0,s},g=()=>s.fold((p,w)=>p,(p,w)=>p);return{name:Y(t),required:g,used:i,replace:d}},SE=(t,s,a,i)=>{const d=an(i,(p,w)=>hb(w,p)),g=wf(t,s,a,d);return Bt(d,p=>{if(p.used()===!1&&p.required())throw new Error("Placeholder: "+p.name()+` was not found in components list
Namespace: `+t.getOr("none")+`
Components: `+JSON.stringify(s.components,null,2))}),g},tS=Gh.single,Hy=Gh.multiple,Eg=Y(Cv),pb=mt.generate([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Sv=Ke("factory",{sketch:Ot}),xv=Ke("schema",[]),qh=At("name"),zy=Qa("pname","pname",tu(t=>"<alloy."+Yn(t.name)+">"),oi()),nS=Ec("schema",()=>[Ns("preprocess")]),Uu=Ke("defaults",Y({})),bb=Ke("overrides",Y({})),xE=lo([Sv,xv,qh,zy,Uu,bb]),kE=lo([Sv,xv,qh,Uu,bb]),pm=lo([Sv,xv,qh,zy,Uu,bb]),TE=lo([Sv,nS,qh,At("unit"),zy,Uu,bb]),oS=t=>t.fold(_.some,_.none,_.some,_.some),kv=t=>{const s=a=>a.name;return t.fold(s,s,s,s)},EE=t=>t.fold(Ot,Ot,Ot,Ot),Tv=(t,s)=>a=>{const i=Tc("Converting part type",s,a);return t(i)},Gc=Tv(pb.required,xE),Wu=Tv(pb.external,kE),du=Tv(pb.optional,pm),vb=Tv(pb.group,TE),Ev=Y("entirety");var sS=Object.freeze({__proto__:null,required:Gc,external:Wu,optional:du,group:vb,asNamedPart:oS,name:kv,asCommon:EE,original:Ev});const Vy=(t,s,a,i)=>vr(s.defaults(t,a,i),a,{uid:t.partUids[s.name]},s.overrides(t,a,i)),rS=(t,s,a)=>{const i={},d={};return R(a,g=>{g.fold(p=>{i[p.pname]=tS(!0,(w,T,A)=>p.factory.sketch(Vy(w,p,T,A)))},p=>{const w=s.parts[p.name];d[p.name]=Y(p.factory.sketch(Vy(s,p,w[Ev()]),w))},p=>{i[p.pname]=tS(!1,(w,T,A)=>p.factory.sketch(Vy(w,p,T,A)))},p=>{i[p.pname]=Hy(!0,(w,T,A)=>{const D=w[p.name];return Ie(D,N=>p.factory.sketch(vr(p.defaults(w,N,A),N,p.overrides(w,N))))})})}),{internals:Y(i),externals:Y(d)}},Uy=(t,s)=>{const a={};return R(s,i=>{oS(i).each(d=>{const g=aS(t,d.pname);a[d.name]=p=>{const w=Tc("Part: "+d.name+" in "+t,lo(d.schema),p);return{...g,config:p,validated:w}}})}),a},aS=(t,s)=>({uiType:Eg(),owner:t,name:s}),Wy=(t,s,a)=>({uiType:Eg(),owner:t,name:s,config:a,validated:{}}),cS=t=>q(t,s=>s.fold(_.none,_.some,_.none,_.none).map(a=>ul(a.name,a.schema.concat([Y0(Ev())]))).toArray()),iS=t=>Ie(t,kv),_v=(t,s,a)=>rS(t,s,a),Zy=(t,s,a)=>SE(_.some(t),s,s.components,a),cr=(t,s,a)=>{const i=s.partUids[a];return t.getSystem().getByUid(i).toOptional()},Zn=(t,s,a)=>cr(t,s,a).getOrDie("Could not find part: "+a),Cf=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return R(a,p=>{i[p]=Y(g.getByUid(d[p]))}),i},lS=(t,s)=>{const a=t.getSystem();return an(s.partUids,(i,d)=>Y(a.getByUid(i)))},Sf=t=>Re(t.partUids),Ad=(t,s,a)=>{const i={},d=s.partUids,g=t.getSystem();return R(a,p=>{i[p]=Y(g.getByUid(d[p]).getOrDie())}),i},Kh=(t,s)=>{const a=iS(s);return nr(Ie(a,i=>({key:i,value:t+"-"+i})))},jy=t=>Qa("partUids","partUids",zm(s=>Kh(s.uid,t)),oi());var Hl=Object.freeze({__proto__:null,generate:Uy,generateOne:Wy,schemas:cS,names:iS,substitutes:_v,components:Zy,defaultUids:Kh,defaultUidsSchema:jy,getAllParts:lS,getAllPartNames:Sf,getPart:cr,getPartOrDie:Zn,getParts:Cf,getPartsOrDie:Ad});const _g=(t,s)=>(t.length>0?[ul("parts",t)]:[]).concat([At("uid"),Ke("dom",{}),Ke("components",[]),Y0("originalSpec"),Ke("debug.sketcher",{})]).concat(s),uS=(t,s,a,i,d)=>{const g=_g(i,d);return Tc(t+" [SpecSchema]",Ja(g.concat(s)),a)},Yh=(t,s,a,i)=>{const d=Gy(i),g=uS(t,s,d,[],[]);return a(g,d)},yb=(t,s,a,i,d)=>{const g=Gy(d),p=cS(a),w=jy(a),T=uS(t,s,g,p,[w]),A=_v(t,T,a),D=Zy(t,T,A.internals());return i(T,D,g,A.externals())},wb=t=>Kn(t,"uid"),Gy=t=>wb(t)?t:{...t,uid:yd("uid")},_E=t=>t.uid!==void 0,AE=Ja([At("name"),At("factory"),At("configFields"),Ke("apis",{}),Ke("extraApis",{})]),OE=Ja([At("name"),At("factory"),At("configFields"),At("partFields"),Ke("apis",{}),Ke("extraApis",{})]),zl=t=>{const s=Tc("Sketcher for "+t.name,AE,t),a=g=>Yh(s.name,s.configFields,s.factory,g),i=an(s.apis,Sh),d=an(s.extraApis,(g,p)=>D1(g,p));return{name:s.name,configFields:s.configFields,sketch:a,...i,...d}},qc=t=>{const s=Tc("Sketcher for "+t.name,OE,t),a=p=>yb(s.name,s.configFields,s.partFields,s.factory,p),i=Uy(s.name,s.partFields),d=an(s.apis,Sh),g=an(s.extraApis,(p,w)=>D1(p,w));return{name:s.name,partFields:s.partFields,configFields:s.configFields,sketch:a,parts:i,...d,...g}},xf=t=>La("input")(t)&&ar(t,"type")!=="radio"||La("textarea")(t);var DE=Object.freeze({__proto__:null,getCurrent:(t,s,a)=>s.find(t)});const RE=[At("find")],ss=hc({fields:RE,name:"composing",apis:DE}),ME=["input","button","textarea","select"],dS=(t,s,a)=>{(s.disabled()?fS:gS)(t,s)},qy=(t,s)=>s.useNative===!0&&nn(ME,qo(t.element)),mS=t=>J(t.element,"disabled"),hO=t=>{ko(t.element,"disabled","disabled")},Od=t=>{de(t.element,"disabled")},Av=t=>ar(t.element,"aria-disabled")==="true",pO=t=>{ko(t.element,"aria-disabled","true")},bO=t=>{ko(t.element,"aria-disabled","false")},fS=(t,s,a)=>{s.disableClass.each(d=>{Sa(t.element,d)}),(qy(t,s)?hO:pO)(t),s.onDisabled(t)},gS=(t,s,a)=>{s.disableClass.each(d=>{ua(t.element,d)}),(qy(t,s)?Od:bO)(t),s.onEnabled(t)},hS=(t,s)=>qy(t,s)?mS(t):Av(t);var yO=Object.freeze({__proto__:null,enable:gS,disable:fS,isDisabled:hS,onLoad:dS,set:(t,s,a,i)=>{(i?fS:gS)(t,s)}}),NE=Object.freeze({__proto__:null,exhibit:(t,s)=>iu({classes:s.disabled()?s.disableClass.toArray():[]}),events:(t,s)=>dr([PC(fl(),(a,i)=>hS(a,t)),Y1(t,s,dS)])}),pS=[Ma("disabled",Le),Ke("useNative",!0),Ns("disableClass"),ds("onDisabled"),ds("onEnabled")];const To=hc({fields:pS,name:"disabling",active:NE,apis:yO}),Xh=(t,s,a,i)=>{const d=jc(t.element,"."+s.highlightClass);R(d,g=>{Fe(i,w=>Us(w.element,g))||(ua(g,s.highlightClass),t.getSystem().getByDom(g).each(w=>{s.onDehighlight(t,w),Ws(w,T1())}))})},bS=(t,s,a)=>Xh(t,s,a,[]),vS=(t,s,a,i)=>{Xy(t,s,a,i)&&(ua(i.element,s.highlightClass),s.onDehighlight(t,i),Ws(i,T1()))},Ag=(t,s,a,i)=>{Xh(t,s,a,[i]),Xy(t,s,a,i)||(Sa(i.element,s.highlightClass),s.onHighlight(t,i),Ws(i,I0()))},Yy=(t,s,a)=>{Dv(t,s).each(i=>{Ag(t,s,a,i)})},BE=(t,s,a)=>{Cb(t,s).each(i=>{Ag(t,s,a,i)})},Ov=(t,s,a,i)=>{$E(t,s,a,i).fold(d=>{throw d},d=>{Ag(t,s,a,d)})},yS=(t,s,a,i)=>{const d=Sb(t,s);se(d,i).each(p=>{Ag(t,s,a,p)})},Xy=(t,s,a,i)=>Ki(i.element,s.highlightClass),wS=(t,s,a)=>da(t.element,"."+s.highlightClass).bind(i=>t.getSystem().getByDom(i).toOptional()),$E=(t,s,a,i)=>{const d=jc(t.element,"."+s.itemClass);return _.from(d[i]).fold(()=>Fo.error(new Error("No element found with index "+i)),t.getSystem().getByDom)},Dv=(t,s,a)=>da(t.element,"."+s.itemClass).bind(i=>t.getSystem().getByDom(i).toOptional()),Cb=(t,s,a)=>{const i=jc(t.element,"."+s.itemClass);return(i.length>0?_.some(i[i.length-1]):_.none()).bind(g=>t.getSystem().getByDom(g).toOptional())},Jy=(t,s,a,i)=>{const d=jc(t.element,"."+s.itemClass);return re(d,p=>Ki(p,s.highlightClass)).bind(p=>{const w=ig(p,i,0,d.length-1);return t.getSystem().getByDom(d[w]).toOptional()})},Rv=(t,s,a)=>Jy(t,s,a,-1),Mv=(t,s,a)=>Jy(t,s,a,1),Sb=(t,s,a)=>{const i=jc(t.element,"."+s.itemClass);return bs(Ie(i,d=>t.getSystem().getByDom(d).toOptional()))};var Og=Object.freeze({__proto__:null,dehighlightAll:bS,dehighlight:vS,highlight:Ag,highlightFirst:Yy,highlightLast:BE,highlightAt:Ov,highlightBy:yS,isHighlighted:Xy,getHighlighted:wS,getFirst:Dv,getLast:Cb,getPrevious:Rv,getNext:Mv,getCandidates:Sb}),wO=[At("highlightClass"),At("itemClass"),ds("onHighlight"),ds("onDehighlight")];const Vs=hc({fields:wO,name:"highlighting",apis:Og}),PE=[8],Tf=[9],Dd=[13],Qy=[27],Qi=[32],ew=[37],xb=[38],Nv=[39],bm=[40],tw=(t,s,a)=>{const i=Z(t.slice(0,s)),d=Z(t.slice(s+1));return se(i.concat(d),a)},FE=(t,s,a)=>{const i=Z(t.slice(0,s));return se(i,a)},IE=(t,s,a)=>{const i=t.slice(0,s),d=t.slice(s+1);return se(d.concat(i),a)},CS=(t,s,a)=>{const i=t.slice(s+1);return se(i,a)},Ss=t=>s=>{const a=s.raw;return nn(t,a.which)},Zu=t=>s=>z(t,a=>a(s)),Dg=t=>t.raw.shiftKey===!0,l=t=>t.raw.ctrlKey===!0,m=ye(Dg),h=(t,s)=>({matches:t,classification:s}),v=(t,s)=>se(t,i=>i.matches(s)).map(i=>i.classification),S=(t,s,a)=>{s.exists(d=>a.exists(g=>Us(g,d)))||vo(t,Mp(),{prevFocus:s,newFocus:a})},O=()=>{const t=a=>Fl(a.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().triggerFocus(i,a.element);const g=t(a);S(a,d,g)}}},F=()=>{const t=a=>Vs.getHighlighted(a).map(i=>i.element);return{get:t,set:(a,i)=>{const d=t(a);a.getSystem().getByDom(i).fold(Q,p=>{Vs.highlight(a,p)});const g=t(a);S(a,d,g)}}};var G;(function(t){t.OnFocusMode="onFocus",t.OnEnterOrSpaceMode="onEnterOrSpace",t.OnApiMode="onApi"})(G||(G={}));const oe=(t,s,a,i,d)=>{const g=()=>t.concat([Ke("focusManager",O()),Da("focusInside","onFocus",ia(A=>nn(["onFocus","onEnterOrSpace","onApi"],A)?Fo.value(A):Fo.error("Invalid value for focusInside"))),wr("handler",T),wr("state",s),wr("sendFocusIn",d)]),p=(A,D,N,U,W)=>{const le=N(A,D,U,W);return v(le,D.event).bind(pe=>pe(A,D,U,W))},T={schema:g,processKey:p,toEvents:(A,D)=>{const N=A.focusInside!==G.OnFocusMode?_.none():d(A).map(le=>zt(Kd(),(pe,nt)=>{le(pe,A,D),nt.stop()})),U=(le,pe)=>{const nt=Ss(Qi.concat(Dd))(pe.event);A.focusInside===G.OnEnterOrSpaceMode&&nt&&Nu(le,pe)&&d(A).each($e=>{$e(le,A,D),pe.stop()})},W=[zt(Xm(),(le,pe)=>{p(le,pe,a,A,D).fold(()=>{U(le,pe)},nt=>{pe.stop()})}),zt(rT(),(le,pe)=>{p(le,pe,i,A,D).each(nt=>{pe.stop()})})];return dr(N.toArray().concat(W))}};return T},Ce=t=>{const s=[Ns("onEscape"),Ns("onEnter"),Ke("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),Ke("firstTabstop",0),Ke("useTabstopAt",Me),Ns("visibilitySelector")].concat([t]),a=(pe,nt)=>{const $e=pe.visibilitySelector.bind(rt=>$l(nt,rt)).getOr(nt);return dt($e)>0},i=(pe,nt)=>{const $e=jc(pe.element,nt.selector),rt=Se($e,wn=>a(nt,wn));return _.from(rt[nt.firstTabstop])},d=(pe,nt)=>nt.focusManager.get(pe).bind($e=>$l($e,nt.selector)),g=(pe,nt)=>a(pe,nt)&&pe.useTabstopAt(nt),p=(pe,nt,$e)=>{i(pe,nt).each(rt=>{nt.focusManager.set(pe,rt)})},w=(pe,nt,$e,rt,wn)=>wn(nt,$e,lt=>g(rt,lt)).fold(()=>rt.cyclic?_.some(!0):_.none(),lt=>(rt.focusManager.set(pe,lt),_.some(!0))),T=(pe,nt,$e,rt)=>{const wn=jc(pe.element,$e.selector);return d(pe,$e).bind(lt=>re(wn,$t(Us,lt)).bind(qn=>w(pe,wn,qn,$e,rt)))},A=(pe,nt,$e)=>{const rt=$e.cyclic?tw:FE;return T(pe,nt,$e,rt)},D=(pe,nt,$e)=>{const rt=$e.cyclic?IE:CS;return T(pe,nt,$e,rt)},N=(pe,nt,$e)=>$e.onEnter.bind(rt=>rt(pe,nt)),U=(pe,nt,$e)=>$e.onEscape.bind(rt=>rt(pe,nt)),W=Y([h(Zu([Dg,Ss(Tf)]),A),h(Ss(Tf),D),h(Zu([m,Ss(Dd)]),N)]),le=Y([h(Ss(Qy),U)]);return oe(s,cu.init,W,le,()=>_.some(p))};var je=Ce(Ec("cyclic",Le)),Pt=Ce(Ec("cyclic",Me));const fn=(t,s,a)=>(L0(t,a,fl()),_.some(!0)),Jt=(t,s,a)=>xf(a)&&Ss(Qi)(s.event)?_.none():fn(t,s,a),St=(t,s)=>_.some(!0),vn=[Ke("execute",Jt),Ke("useSpace",!1),Ke("useEnter",!0),Ke("useControlEnter",!1),Ke("useDown",!1)],xt=(t,s,a)=>a.execute(t,s,t.element),Xn=(t,s,a,i)=>{const d=a.useSpace&&!xf(t.element)?Qi:[],g=a.useEnter?Dd:[],p=a.useDown?bm:[],w=d.concat(g).concat(p);return[h(Ss(w),xt)].concat(a.useControlEnter?[h(Zu([l,Ss(Dd)]),xt)]:[])},Eo=(t,s,a,i)=>a.useSpace&&!xf(t.element)?[h(Ss(Qi),St)]:[];var Vo=oe(vn,cu.init,Xn,Eo,()=>_.none());const Rr=()=>{const t=Wr();return Bi({readState:()=>t.get().map(d=>({numRows:String(d.numRows),numColumns:String(d.numColumns)})).getOr({numRows:"?",numColumns:"?"}),setGridSize:(d,g)=>{t.set({numRows:d,numColumns:g})},getNumRows:()=>t.get().map(d=>d.numRows),getNumColumns:()=>t.get().map(d=>d.numColumns)})};var ma=Object.freeze({__proto__:null,flatgrid:Rr,init:t=>t.state(t)});const Fi=t=>(s,a,i,d)=>{const g=t(s.element);return $v(g,s,a,i,d)},Ef=(t,s)=>{const a=$h(t,s);return Fi(a)},kb=(t,s)=>{const a=$h(s,t);return Fi(a)},Bv=t=>(s,a,i,d)=>$v(t,s,a,i,d),$v=(t,s,a,i,d)=>i.focusManager.get(s).bind(p=>t(s.element,p,i,d)).map(p=>(i.focusManager.set(s,p),!0)),Xs=Bv,Nc=Bv,Bc=Bv,ju=t=>t.offsetWidth<=0&&t.offsetHeight<=0,el=t=>!ju(t.dom),Jh=(t,s)=>re(t,s).map(a=>({index:a,candidates:t})),ui=(t,s,a)=>{const i=p=>Us(p,s),d=jc(t,a),g=Se(d,el);return Jh(g,i)},Ii=(t,s)=>re(t,a=>Us(s,a)),Qh=(t,s,a,i)=>{const d=Math.floor(s/a),g=s%a;return i(d,g).bind(p=>{const w=p.row*a+p.column;return w>=0&&w<t.length?_.some(t[w]):_.none()})},Gu=(t,s,a,i,d)=>Qh(t,s,i,(g,p)=>{const T=g===a-1?t.length-g*i:i,A=ig(p,d,0,T-1);return _.some({row:g,column:A})}),$c=(t,s,a,i,d)=>Qh(t,s,i,(g,p)=>{const w=ig(g,d,0,a-1),A=w===a-1?t.length-w*i:i,D=yl(p,0,A-1);return _.some({row:w,column:D})}),LE=(t,s,a,i)=>Gu(t,s,a,i,1),HE=(t,s,a,i)=>Gu(t,s,a,i,-1),ep=(t,s,a,i)=>$c(t,s,a,i,-1),nw=(t,s,a,i)=>$c(t,s,a,i,1),zE=[At("selector"),Ke("execute",Jt),Yi("onEscape"),Ke("captureTab",!1),Zp()],ow=(t,s,a)=>{da(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},Pv=(t,s)=>s.focusManager.get(t).bind(a=>$l(a,s.selector)),Tb=(t,s,a,i)=>Pv(t,a).bind(d=>a.execute(t,s,d)),SS=t=>(s,a,i,d)=>ui(s,a,i.selector).bind(g=>t(g.candidates,g.index,d.getNumRows().getOr(i.initSize.numRows),d.getNumColumns().getOr(i.initSize.numColumns))),CO=(t,s,a)=>a.captureTab?_.some(!0):_.none(),bF=(t,s,a)=>a.onEscape(t,s),SO=SS(HE),xO=SS(LE),vF=SS(ep),kO=SS(nw),VE=Y([h(Ss(ew),Ef(SO,xO)),h(Ss(Nv),kb(SO,xO)),h(Ss(xb),Xs(vF)),h(Ss(bm),Nc(kO)),h(Zu([Dg,Ss(Tf)]),CO),h(Zu([m,Ss(Tf)]),CO),h(Ss(Qi.concat(Dd)),Tb)]),yF=Y([h(Ss(Qy),bF),h(Ss(Qi),St)]);var wF=oe(zE,Rr,VE,yF,()=>_.some(ow));const xS=(t,s,a,i)=>{const d=p=>qo(p)==="button"&&ar(p,"disabled")==="disabled",g=(p,w,T)=>{const A=ig(w,i,0,T.length-1);return A===p?_.none():d(T[A])?g(p,A,T):_.from(T[A])};return ui(t,a,s).bind(p=>{const w=p.index,T=p.candidates;return g(w,w,T)})},CF=[At("selector"),Ke("getInitial",_.none),Ke("execute",Jt),Yi("onEscape"),Ke("executeOnMove",!1),Ke("allowVertical",!0)],Eb=(t,s)=>s.focusManager.get(t).bind(a=>$l(a,s.selector)),UE=(t,s,a)=>Eb(t,a).bind(i=>a.execute(t,s,i)),SF=(t,s,a)=>{s.getInitial(t).orThunk(()=>da(t.element,s.selector)).each(i=>{s.focusManager.set(t,i)})},kS=(t,s,a)=>xS(t,a.selector,s,-1),TO=(t,s,a)=>xS(t,a.selector,s,1),WE=t=>(s,a,i,d)=>t(s,a,i,d).bind(()=>i.executeOnMove?UE(s,a,i):_.some(!0)),EO=(t,s,a)=>a.onEscape(t,s),_O=(t,s,a,i)=>{const d=ew.concat(a.allowVertical?xb:[]),g=Nv.concat(a.allowVertical?bm:[]);return[h(Ss(d),WE(Ef(kS,TO))),h(Ss(g),WE(kb(kS,TO))),h(Ss(Dd),UE),h(Ss(Qi),UE)]},AO=Y([h(Ss(Qi),St),h(Ss(Qy),EO)]);var xF=oe(CF,cu.init,_O,AO,()=>_.some(SF));const TS=(t,s,a)=>_.from(t[s]).bind(i=>_.from(i[a]).map(d=>({rowIndex:s,columnIndex:a,cell:d}))),OO=(t,s,a,i)=>{const g=t[s].length,p=ig(a,i,0,g-1);return TS(t,s,p)},ES=(t,s,a,i)=>{const d=ig(a,i,0,t.length-1),g=t[d].length,p=yl(s,0,g-1);return TS(t,d,p)},DO=(t,s,a,i)=>{const g=t[s].length,p=yl(a+i,0,g-1);return TS(t,s,p)},RO=(t,s,a,i)=>{const d=yl(a+i,0,t.length-1),g=t[d].length,p=yl(s,0,g-1);return TS(t,d,p)},kF=(t,s,a)=>OO(t,s,a,1),MO=(t,s,a)=>OO(t,s,a,-1),TF=(t,s,a)=>ES(t,a,s,-1),EF=(t,s,a)=>ES(t,a,s,1),_F=(t,s,a)=>DO(t,s,a,-1),NO=(t,s,a)=>DO(t,s,a,1),AF=(t,s,a)=>RO(t,a,s,-1),OF=(t,s,a)=>RO(t,a,s,1),BO=[ul("selectors",[At("row"),At("cell")]),Ke("cycles",!0),Ke("previousSelector",_.none),Ke("execute",Jt)],DF=(t,s,a)=>{s.previousSelector(t).orThunk(()=>{const d=s.selectors;return da(t.element,d.cell)}).each(d=>{s.focusManager.set(t,d)})},RF=(t,s,a)=>Fl(t.element).bind(i=>a.execute(t,s,i)),_S=(t,s)=>Ie(t,a=>jc(a,s.selectors.cell)),AS=(t,s)=>(a,i,d)=>{const g=d.cycles?t:s;return $l(i,d.selectors.row).bind(p=>{const w=jc(p,d.selectors.cell);return Ii(w,i).bind(T=>{const A=jc(a,d.selectors.row);return Ii(A,p).bind(D=>{const N=_S(A,d);return g(N,D,T).map(U=>U.cell)})})})},ZE=AS(MO,_F),tl=AS(kF,NO),MF=AS(TF,AF),$O=AS(EF,OF),NF=Y([h(Ss(ew),Ef(ZE,tl)),h(Ss(Nv),kb(ZE,tl)),h(Ss(xb),Xs(MF)),h(Ss(bm),Nc($O)),h(Ss(Qi.concat(Dd)),RF)]),BF=Y([h(Ss(Qi),St)]);var PO=oe(BO,cu.init,NF,BF,()=>_.some(DF));const $F=[At("selector"),Ke("execute",Jt),Ke("moveOnTab",!1)],jE=(t,s,a)=>a.focusManager.get(t).bind(i=>a.execute(t,s,i)),FO=(t,s,a)=>{da(t.element,s.selector).each(i=>{s.focusManager.set(t,i)})},IO=(t,s,a)=>xS(t,a.selector,s,-1),LO=(t,s,a)=>xS(t,a.selector,s,1),PF=(t,s,a,i)=>a.moveOnTab?Bc(IO)(t,s,a,i):_.none(),FF=(t,s,a,i)=>a.moveOnTab?Bc(LO)(t,s,a,i):_.none(),HO=Y([h(Ss(xb),Bc(IO)),h(Ss(bm),Bc(LO)),h(Zu([Dg,Ss(Tf)]),PF),h(Zu([m,Ss(Tf)]),FF),h(Ss(Dd),jE),h(Ss(Qi),jE)]),zO=Y([h(Ss(Qi),St)]);var tp=oe($F,cu.init,HO,zO,()=>_.some(FO));const VO=[Yi("onSpace"),Yi("onEnter"),Yi("onShiftEnter"),Yi("onLeft"),Yi("onRight"),Yi("onTab"),Yi("onShiftTab"),Yi("onUp"),Yi("onDown"),Yi("onEscape"),Ke("stopSpaceKeyup",!1),Ns("focusIn")],UO=(t,s,a)=>[h(Ss(Qi),a.onSpace),h(Zu([m,Ss(Dd)]),a.onEnter),h(Zu([Dg,Ss(Dd)]),a.onShiftEnter),h(Zu([Dg,Ss(Tf)]),a.onShiftTab),h(Zu([m,Ss(Tf)]),a.onTab),h(Ss(xb),a.onUp),h(Ss(bm),a.onDown),h(Ss(ew),a.onLeft),h(Ss(Nv),a.onRight),h(Ss(Qi),a.onSpace)],GE=(t,s,a)=>[...a.stopSpaceKeyup?[h(Ss(Qi),St)]:[],h(Ss(Qy),a.onEscape)];var IF=oe(VO,cu.init,UO,GE,t=>t.focusIn);const LF=je.schema(),HF=Pt.schema(),zF=xF.schema(),WO=wF.schema(),qE=PO.schema(),KE=Vo.schema(),VF=tp.schema(),np=IF.schema();var ZO=Object.freeze({__proto__:null,acyclic:LF,cyclic:HF,flow:zF,flatgrid:WO,matrix:qE,execution:KE,menu:VF,special:np});const jO=t=>Ts(t,"setGridSize"),ho=ey({branchKey:"mode",branches:ZO,name:"keying",active:{events:(t,s)=>t.handler.toEvents(t,s)},apis:{focusIn:(t,s,a)=>{s.sendFocusIn(s).fold(()=>{t.getSystem().triggerFocus(t.element,t.element)},i=>{i(t,s,a)})},setGridSize:(t,s,a,i,d)=>{jO(a)?a.setGridSize(i,d):console.error("Layout does not support setGridSize")}},state:ma}),GO=(t,s)=>{X1(()=>{dE(t,s,()=>Ie(s,t.getSystem().build))},t.element)},Fv=(t,s)=>{X1(()=>{gv(t,s,()=>rg(t.element,s,t.getSystem().buildOrPatch))},t.element)},sw=(t,s,a,i)=>{fv(s);const d=W0(t.element,a,i,t.getSystem().buildOrPatch);lb(t,d),t.syncComponents()},OS=(t,s,a)=>{const i=t.getSystem().build(a);Z2(t,i,s)},qO=(t,s,a,i)=>{Mc(s),OS(t,(d,g)=>th(d,g,a),i)},op=(t,s,a,i)=>(s.reuseDom?Fv:GO)(t,i),sp=(t,s,a,i)=>{OS(t,kc,i)},UF=(t,s,a,i)=>{OS(t,Lm,i)},WF=(t,s,a,i)=>{const d=rw(t);se(d,p=>Us(i.element,p.element)).each(Mc)},rw=(t,s)=>t.components(),_f=(t,s,a,i,d)=>{const g=rw(t);return _.from(g[i]).map(p=>(d.fold(()=>Mc(p),w=>{(s.reuseDom?sw:qO)(t,p,i,w)}),p))};var YO=Object.freeze({__proto__:null,append:sp,prepend:UF,remove:WF,replaceAt:_f,replaceBy:(t,s,a,i,d)=>{const g=rw(t);return re(g,i).bind(p=>_f(t,s,a,p,d))},set:op,contents:rw});const zo=hc({fields:[Ra("reuseDom",!0)],name:"replacing",apis:YO}),XO=(t,s)=>{const a=dr(s);return hc({fields:[At("enabled")],name:t,active:{events:Y(a)}})},fs=(t,s)=>{const a=XO(t,s);return{key:t,value:{config:{},me:a,configAsRaw:Y({}),initialConfig:{},state:cu}}},YE=(t,s)=>{s.ignore||(im(t.element),s.onFocus(t))};var ZF=Object.freeze({__proto__:null,focus:YE,blur:(t,s)=>{s.ignore||b2(t.element)},isFocused:t=>ty(t.element)}),JE=Object.freeze({__proto__:null,exhibit:(t,s)=>{const a=s.ignore?{}:{attributes:{tabindex:"-1"}};return iu(a)},events:t=>dr([zt(Kd(),(s,a)=>{YE(s,t),a.stop()})].concat(t.stopMousedown?[zt(Vc(),(s,a)=>{a.event.prevent()})]:[]))}),jF=[ds("onFocus"),Ke("stopMousedown",!1),Ke("ignore",!1)];const Ao=hc({fields:jF,name:"focusing",active:JE,apis:ZF}),QO=t=>({init:()=>{const a=V(t);return{get:()=>a.get(),set:w=>a.set(w),clear:()=>a.set(t),readState:()=>a.get()}}}),eD=(t,s,a)=>{const i=s.aria;i.update(t,i,a.get())},tD=(t,s,a)=>{s.toggleClass.each(i=>{a.get()?Sa(t.element,i):ua(t.element,i)})},Iv=(t,s,a,i)=>{const d=a.get();a.set(i),tD(t,s,a),eD(t,s,a),d!==i&&s.onToggled(t,i)},nD=(t,s,a)=>{Iv(t,s,a,!a.get())},QE=(t,s,a)=>{Iv(t,s,a,!0)},GF=(t,s,a)=>{Iv(t,s,a,!1)},qF=(t,s,a)=>a.get(),oD=(t,s,a)=>{Iv(t,s,a,s.selected)};var KF=Object.freeze({__proto__:null,onLoad:oD,toggle:nD,isOn:qF,on:QE,off:GF,set:Iv}),XF=Object.freeze({__proto__:null,exhibit:()=>iu({}),events:(t,s)=>{const a=DT(t,s,nD),i=Y1(t,s,oD);return dr(H([t.toggleOnExecute?[a]:[],[i]]))}});const JF=(t,s,a)=>{ko(t.element,"aria-pressed",a),s.syncWithExpanded&&Lv(t,s,a)},aw=(t,s,a)=>{ko(t.element,"aria-selected",a)},QF=(t,s,a)=>{ko(t.element,"aria-checked",a)},Lv=(t,s,a)=>{ko(t.element,"aria-expanded",a)};var e_=[Ke("selected",!1),Ns("toggleClass"),Ke("toggleOnExecute",!0),ds("onToggled"),Da("aria",{mode:"none"},pi("mode",{pressed:[Ke("syncWithExpanded",!1),wr("update",JF)],checked:[wr("update",QF)],expanded:[wr("update",Lv)],selected:[wr("update",aw)],none:[wr("update",Q)]}))];const Es=hc({fields:e_,name:"toggling",active:XF,apis:KF,state:QO(!1)}),t_=()=>{const t=(s,a)=>{a.stop(),Xd(s)};return[zt(Ap(),t),zt(hh(),t),yh(or()),yh(Vc())]},DS=t=>{const s=a=>gl((i,d)=>{a(i),d.stop()});return dr(H([t.map(s).toArray(),t_()]))},sD="alloy.item-hover",n_="alloy.item-focus",rD="alloy.item-toggled",o_=t=>{(Fl(t.element).isNone()||Ao.isFocused(t))&&(Ao.isFocused(t)||Ao.focus(t),vo(t,sD,{item:t}))},aD=t=>{vo(t,n_,{item:t})},e5=(t,s)=>{vo(t,rD,{item:t,state:s})},s_=Y(sD),RS=Y(n_),r_=Y(rD),a_=t=>t.toggling.map(s=>s.exclusive?"menuitemradio":"menuitemcheckbox").getOr("menuitem"),t5=t=>({aria:{mode:"checked"},...qe(t,(s,a)=>a!=="exclusive"),onToggled:(s,a)=>{Ze(t.onToggled)&&t.onToggled(s,a),e5(s,a)}}),n5=t=>({dom:t.dom,domModification:{...t.domModification,attributes:{role:a_(t),...t.domModification.attributes,"aria-haspopup":t.hasSubmenu,...t.hasSubmenu?{"aria-expanded":!1}:{}}},behaviours:Ll.augment(t.itemBehaviours,[t.toggling.fold(Es.revoke,s=>Es.config(t5(s))),Ao.config({ignore:t.ignoreFocus,stopMousedown:t.ignoreFocus,onFocus:s=>{aD(s)}}),ho.config({mode:"execution"}),En.config({store:{mode:"memory",initialValue:t.data}}),fs("item-type-events",[...t_(),zt(Gd(),o_),zt(Jm(),Ao.focus)])]),components:t.components,eventOrder:t.eventOrder}),o5=[At("data"),At("components"),At("dom"),Ke("hasSubmenu",!1),Ns("toggling"),Ll.field("itemBehaviours",[Es,Ao,ho,En]),Ke("ignoreFocus",!1),Ke("domModification",{}),wr("builder",n5),Ke("eventOrder",{})],s5=t=>({dom:t.dom,components:t.components,events:dr([IC(Jm())])}),cD=[At("dom"),At("components"),wr("builder",s5)],MS=Y("item-widget"),c_=Y([Gc({name:"widget",overrides:t=>({behaviours:mn([En.config({store:{mode:"manual",getValue:s=>t.data,setValue:Q}})])})})]),r5=t=>{const s=_v(MS(),t,c_()),a=Zy(MS(),t,s.internals()),i=g=>cr(g,t,"widget").map(p=>(ho.focusIn(p),p)),d=(g,p)=>xf(p.event.target)?_.none():(()=>(t.autofocus&&p.setSource(g.element),_.none()))();return{dom:t.dom,components:a,domModification:t.domModification,events:dr([gl((g,p)=>{i(g).each(w=>{p.stop()})}),zt(Gd(),o_),zt(Jm(),(g,p)=>{t.autofocus?i(g):Ao.focus(g)})]),behaviours:Ll.augment(t.widgetBehaviours,[En.config({store:{mode:"memory",initialValue:t.data}}),Ao.config({ignore:t.ignoreFocus,onFocus:g=>{aD(g)}}),ho.config({mode:"special",focusIn:t.autofocus?g=>{i(g)}:BT(),onLeft:d,onRight:d,onEscape:(g,p)=>!Ao.isFocused(g)&&!t.autofocus?(Ao.focus(g),_.some(!0)):(t.autofocus&&p.setSource(g.element),_.none())})])}},a5=[At("uid"),At("data"),At("components"),At("dom"),Ke("autofocus",!1),Ke("ignoreFocus",!1),Ll.field("widgetBehaviours",[En,Ao,ho]),Ke("domModification",{}),jy(c_()),wr("builder",r5)],c5=pi("type",{widget:a5,item:o5,separator:cD}),i5=(t,s)=>({mode:"flatgrid",selector:"."+t.markers.item,initSize:{numColumns:s.initSize.numColumns,numRows:s.initSize.numRows},focusManager:t.focusManager}),l5=(t,s)=>({mode:"matrix",selectors:{row:s.rowSelector,cell:"."+t.markers.item},previousSelector:s.previousSelector,focusManager:t.focusManager}),iD=(t,s)=>({mode:"menu",selector:"."+t.markers.item,moveOnTab:s.moveOnTab,focusManager:t.focusManager}),u5=Y([vb({factory:{sketch:t=>{const s=Tc("menu.spec item",c5,t);return s.builder(s)}},name:"items",unit:"item",defaults:(t,s)=>Kn(s,"uid")?s:{...s,uid:yd("item")},overrides:(t,s)=>({type:s.type,ignoreFocus:t.fakeFocus,domModification:{classes:[t.markers.item]}})})]),d5=Y([At("value"),At("items"),At("dom"),At("components"),Ke("eventOrder",{}),Na("menuBehaviours",[Vs,En,ss,ho]),Da("movement",{mode:"menu",moveOnTab:!0},pi("mode",{grid:[Zp(),wr("config",i5)],matrix:[wr("config",l5),At("rowSelector"),Ke("previousSelector",_.none)],menu:[Ke("moveOnTab",!0),wr("config",iD)]})),i2(),Ke("fakeFocus",!1),Ke("focusManager",O()),ds("onHighlight"),ds("onDehighlight")]),lD=Y("alloy.menu-focus"),m5=(t,s)=>{const a=jc(t.element,'[role="menuitemradio"][aria-checked="true"]');R(a,i=>{Us(i,s.element)||t.getSystem().getByDom(i).each(d=>{Es.off(d)})})},f5=(t,s,a,i)=>({uid:t.uid,dom:t.dom,markers:t.markers,behaviours:pc(t.menuBehaviours,[Vs.config({highlightClass:t.markers.selectedItem,itemClass:t.markers.item,onHighlight:t.onHighlight,onDehighlight:t.onDehighlight}),En.config({store:{mode:"memory",initialValue:t.value}}),ss.config({find:_.some}),ho.config(t.movement.config(t,t.movement))]),events:dr([zt(RS(),(d,g)=>{const p=g.event;d.getSystem().getByDom(p.target).each(w=>{Vs.highlight(d,w),g.stop(),vo(d,lD(),{menu:d,item:w})})}),zt(s_(),(d,g)=>{const p=g.event.item;Vs.highlight(d,p)}),zt(r_(),(d,g)=>{const{item:p,state:w}=g.event;w&&ar(p.element,"role")==="menuitemradio"&&m5(d,p)})]),components:s,eventOrder:t.eventOrder,domModification:{attributes:{role:"menu"}}}),qu=qc({name:"Menu",configFields:d5(),partFields:u5(),factory:f5}),g5=t=>An(t,(s,a)=>({k:s,v:a})),uD=(t,s,a,i)=>qt(a,i).bind(d=>qt(t,d).bind(g=>{const p=uD(t,s,a,g);return _.some([g].concat(p))})).getOr([]),_b=(t,s)=>{const a={};Bt(t,(p,w)=>{R(p,T=>{a[T]=w})});const i=s,d=g5(s),g=an(d,(p,w)=>[w].concat(uD(a,i,d,w)));return an(a,p=>qt(g,p).getOr([p]))},h5=()=>{const t=V({}),s=V({}),a=V({}),i=Wr(),d=V({}),g=()=>{t.set({}),s.set({}),a.set({}),i.clear()},p=()=>i.get().isNone(),w=(_n,qn)=>{s.set({...s.get(),[_n]:{type:"prepared",menu:qn}})},T=(_n,qn,Ln,bo)=>{i.set(_n),t.set(Ln),s.set(qn),d.set(bo);const yo=_b(bo,Ln);a.set(yo)},A=_n=>sn(t.get(),(qn,Ln)=>qn===_n),D=(_n,qn,Ln)=>pe(_n).bind(bo=>A(_n).bind(yo=>qn(yo).map(Zo=>({triggeredMenu:bo,triggeringItem:Zo,triggeringPath:Ln})))),N=(_n,qn)=>{const Ln=Se($e(_n).toArray(),bo=>pe(bo).isSome());return qt(a.get(),_n).bind(bo=>{const yo=Z(Ln.concat(bo)),Zo=q(yo,(ws,io)=>D(ws,qn,yo.slice(0,io+1)).fold(()=>_r(i.get(),ws)?[]:[_.none()],Jo=>[_.some(Jo)]));return wc(Zo)})},U=_n=>qt(t.get(),_n).map(qn=>{const Ln=qt(a.get(),_n).getOr([]);return[qn].concat(Ln)}),W=_n=>qt(a.get(),_n).bind(qn=>qn.length>1?_.some(qn.slice(1)):_.none()),le=_n=>qt(a.get(),_n),pe=_n=>nt(_n).bind(dD),nt=_n=>qt(s.get(),_n),$e=_n=>qt(t.get(),_n);return{setMenuBuilt:w,setContents:T,expand:U,refresh:le,collapse:W,lookupMenu:nt,lookupItem:$e,otherMenus:_n=>{const qn=d.get();return Ne(Re(qn),_n)},getPrimary:()=>i.get().bind(pe),getMenus:()=>s.get(),clear:g,isClear:p,getTriggeringPath:N}},dD=t=>t.type==="prepared"?_.some(t.menu):_.none(),Rg={init:h5,extractPreparedMenu:dD},mD=Yn("tiered-menu-item-highlight"),fD=Yn("tiered-menu-item-dehighlight");var sa;(function(t){t[t.HighlightMenuAndItem=0]="HighlightMenuAndItem",t[t.HighlightJustMenu=1]="HighlightJustMenu",t[t.HighlightNone=2]="HighlightNone"})(sa||(sa={}));const gD=(t,s)=>{const a=Wr(),i=(ln,Fn,$o)=>an($o,(es,qs)=>{const As=()=>qu.sketch({...es,value:qs,markers:t.markers,fakeFocus:t.fakeFocus,onHighlight:(Yc,Nr)=>{vo(Yc,mD,{menuComp:Yc,itemComp:Nr})},onDehighlight:(Yc,Nr)=>{vo(Yc,fD,{menuComp:Yc,itemComp:Nr})},focusManager:t.fakeFocus?F():O()});return qs===Fn?{type:"prepared",menu:ln.getSystem().build(As())}:{type:"notbuilt",nbMenu:As}}),d=Rg.init(),g=ln=>{const Fn=i(ln,t.data.primary,t.data.menus),$o=T();return d.setContents(t.data.primary,Fn,t.data.expansions,$o),d.getPrimary()},p=ln=>En.getValue(ln).value,w=(ln,Fn,$o)=>ao(Fn,es=>{if(!es.getSystem().isConnected())return _.none();const qs=Vs.getCandidates(es);return se(qs,As=>p(As)===$o)}),T=ln=>an(t.data.menus,(Fn,$o)=>q(Fn.items,es=>es.type==="separator"?[]:[es.data.value])),A=Vs.highlight,D=(ln,Fn)=>{A(ln,Fn),Vs.getHighlighted(Fn).orThunk(()=>Vs.getFirst(Fn)).each($o=>{t.fakeFocus?Vs.highlight(Fn,$o):L0(ln,$o.element,Jm())})},N=(ln,Fn)=>bs(Ie(Fn,$o=>ln.lookupMenu($o).bind(es=>es.type==="prepared"?_.some(es.menu):_.none()))),U=(ln,Fn,$o)=>{const es=N(Fn,Fn.otherMenus($o));R(es,qs=>{pl(qs.element,[t.markers.backgroundMenu]),t.stayInDom||zo.remove(ln,qs)})},W=ln=>a.get().getOrThunk(()=>{const Fn={},$o=jc(ln.element,`.${t.markers.item}`),es=Se($o,qs=>ar(qs,"aria-haspopup")==="true");return R(es,qs=>{ln.getSystem().getByDom(qs).each(As=>{const Yc=p(As);Fn[Yc]=As})}),a.set(Fn),Fn}),le=(ln,Fn)=>{const $o=W(ln);Bt($o,(es,qs)=>{const As=nn(Fn,qs);ko(es.element,"aria-expanded",As)})},pe=(ln,Fn,$o)=>_.from($o[0]).bind(es=>Fn.lookupMenu(es).bind(qs=>{if(qs.type==="notbuilt")return _.none();{const As=qs.menu,Yc=N(Fn,$o.slice(1));return R(Yc,Nr=>{Sa(Nr.element,t.markers.backgroundMenu)}),Kr(As.element)||zo.append(ln,vl(As)),pl(As.element,[t.markers.backgroundMenu]),D(ln,As),U(ln,Fn,$o),_.some(As)}}));let nt;(function(ln){ln[ln.HighlightSubmenu=0]="HighlightSubmenu",ln[ln.HighlightParent=1]="HighlightParent"})(nt||(nt={}));const $e=(ln,Fn,$o)=>{if($o.type==="notbuilt"){const es=ln.getSystem().build($o.nbMenu());return d.setMenuBuilt(Fn,es),es}else return $o.menu},rt=(ln,Fn,$o=nt.HighlightSubmenu)=>{if(Fn.hasConfigured(To)&&To.isDisabled(Fn))return _.some(Fn);{const es=p(Fn);return d.expand(es).bind(qs=>(le(ln,qs),_.from(qs[0]).bind(As=>d.lookupMenu(As).bind(Yc=>{const Nr=$e(ln,As,Yc);return Kr(Nr.element)||zo.append(ln,vl(Nr)),t.onOpenSubmenu(ln,Fn,Nr,Z(qs)),$o===nt.HighlightSubmenu?(Vs.highlightFirst(Nr),pe(ln,d,qs)):(Vs.dehighlightAll(Nr),_.some(Fn))}))))}},wn=(ln,Fn)=>{const $o=p(Fn);return d.collapse($o).bind(es=>(le(ln,es),pe(ln,d,es).map(qs=>(t.onCollapseMenu(ln,Fn,qs),qs))))},lt=(ln,Fn)=>{const $o=p(Fn);return d.refresh($o).bind(es=>(le(ln,es),pe(ln,d,es)))},_n=(ln,Fn)=>xf(Fn.element)?_.none():rt(ln,Fn,nt.HighlightSubmenu),qn=(ln,Fn)=>xf(Fn.element)?_.none():wn(ln,Fn),Ln=(ln,Fn)=>wn(ln,Fn).orThunk(()=>t.onEscape(ln,Fn).map(()=>ln)),bo=ln=>(Fn,$o)=>$l($o.getSource(),`.${t.markers.item}`).bind(es=>Fn.getSystem().getByDom(es).toOptional().bind(qs=>ln(Fn,qs).map(Me))),yo=dr([zt(lD(),(ln,Fn)=>{const $o=Fn.event.item;d.lookupItem(p($o)).each(()=>{const es=Fn.event.menu;Vs.highlight(ln,es);const qs=p(Fn.event.item);d.refresh(qs).each(As=>U(ln,d,As))})}),gl((ln,Fn)=>{const $o=Fn.event.target;ln.getSystem().getByDom($o).each(es=>{p(es).indexOf("collapse-item")===0&&wn(ln,es),rt(ln,es,nt.HighlightSubmenu).fold(()=>{t.onExecute(ln,es)},Q)})}),Ur((ln,Fn)=>{g(ln).each($o=>{zo.append(ln,vl($o)),t.onOpenMenu(ln,$o),t.highlightOnOpen===sa.HighlightMenuAndItem?D(ln,$o):t.highlightOnOpen===sa.HighlightJustMenu&&A(ln,$o)})}),zt(mD,(ln,Fn)=>{t.onHighlightItem(ln,Fn.event.menuComp,Fn.event.itemComp)}),zt(fD,(ln,Fn)=>{t.onDehighlightItem(ln,Fn.event.menuComp,Fn.event.itemComp)}),...t.navigateOnHover?[zt(s_(),(ln,Fn)=>{const $o=Fn.event.item;lt(ln,$o),rt(ln,$o,nt.HighlightParent),t.onHover(ln,$o)})]:[]]),Zo=ln=>Vs.getHighlighted(ln).bind(Vs.getHighlighted),ws=ln=>{Zo(ln).each(Fn=>{wn(ln,Fn)})},io=ln=>{d.getPrimary().each(Fn=>{D(ln,Fn)})},Jo=ln=>_.from(ln.components()[0]).filter(Fn=>ar(Fn.element,"role")==="menu"),hs={collapseMenu:ws,highlightPrimary:io,repositionMenus:ln=>{d.getPrimary().bind($o=>Zo(ln).bind(es=>{const qs=p(es),As=on(d.getMenus()),Yc=bs(Ie(As,Rg.extractPreparedMenu));return d.getTriggeringPath(qs,Nr=>w(ln,Yc,Nr))}).map(es=>({primary:$o,triggeringPath:es}))).fold(()=>{Jo(ln).each($o=>{t.onRepositionMenu(ln,$o,[])})},({primary:$o,triggeringPath:es})=>{t.onRepositionMenu(ln,$o,es)})}};return{uid:t.uid,dom:t.dom,markers:t.markers,behaviours:pc(t.tmenuBehaviours,[ho.config({mode:"special",onRight:bo(_n),onLeft:bo(qn),onEscape:bo(Ln),focusIn:(ln,Fn)=>{d.getPrimary().each($o=>{L0(ln,$o.element,Jm())})}}),Vs.config({highlightClass:t.markers.selectedMenu,itemClass:t.markers.menu}),ss.config({find:ln=>Vs.getHighlighted(ln)}),zo.config({})]),eventOrder:t.eventOrder,apis:hs,events:yo}},hD=Y("collapse-item"),pD=(t,s,a)=>({primary:t,menus:s,expansions:a}),p5=(t,s)=>({primary:t,menus:js(t,s),expansions:{}}),bD=t=>({value:Yn(hD()),meta:{text:t}}),Ab=zl({name:"TieredMenu",configFields:[K0("onExecute"),K0("onEscape"),lf("onOpenMenu"),lf("onOpenSubmenu"),ds("onRepositionMenu"),ds("onCollapseMenu"),Ke("highlightOnOpen",sa.HighlightMenuAndItem),ul("data",[At("primary"),At("menus"),At("expansions")]),Ke("fakeFocus",!1),ds("onHighlightItem"),ds("onDehighlightItem"),ds("onHover"),Wp(),At("dom"),Ke("navigateOnHover",!0),Ke("stayInDom",!1),Na("tmenuBehaviours",[ho,Vs,ss,zo]),Ke("eventOrder",{})],apis:{collapseMenu:(t,s)=>{t.collapseMenu(s)},highlightPrimary:(t,s)=>{t.highlightPrimary(s)},repositionMenus:(t,s)=>{t.repositionMenus(s)}},factory:gD,extraApis:{tieredData:pD,singleData:p5,collapseItem:bD}}),b5=(t,s,a,i,d)=>{const g=()=>t.lazySink(s),p=i.type==="horizontal"?{layouts:{onLtr:()=>K1(),onRtl:()=>Q0()}}:{},w=A=>A.length===2,T=A=>w(A)?p:{};return Ab.sketch({dom:{tag:"div"},data:i.data,markers:i.menu.markers,highlightOnOpen:i.menu.highlightOnOpen,fakeFocus:i.menu.fakeFocus,onEscape:()=>(ms.close(s),t.onEscape.map(A=>A(s)),_.some(!0)),onExecute:()=>_.some(!0),onOpenMenu:(A,D)=>{li.positionWithinBounds(g().getOrDie(),D,a,d())},onOpenSubmenu:(A,D,N,U)=>{const W=g().getOrDie();li.position(W,N,{anchor:{type:"submenu",item:D,...T(U)}})},onRepositionMenu:(A,D,N)=>{const U=g().getOrDie();li.positionWithinBounds(U,D,a,d()),R(N,W=>{const le=T(W.triggeringPath);li.position(U,W.triggeredMenu,{anchor:{type:"submenu",item:W.triggeringItem,...le}})})}})},v5=(t,s)=>{const a=(W,le)=>t.getRelated(W).exists(nt=>sm(nt,le)),i=(W,le)=>{ms.setContent(W,le)},d=(W,le,pe)=>{g(W,le,pe,_.none())},g=(W,le,pe,nt)=>{p(W,le,pe,()=>nt.map($e=>os($e)))},p=(W,le,pe,nt)=>{const $e=t.lazySink(W).getOrDie();ms.openWhileCloaked(W,le,()=>li.positionWithinBounds($e,W,pe,nt())),En.setValue(W,_.some({mode:"position",config:pe,getBounds:nt}))},w=(W,le,pe)=>{T(W,le,pe,_.none)},T=(W,le,pe,nt)=>{const $e=b5(t,W,le,pe,nt);ms.open(W,$e),En.setValue(W,_.some({mode:"menu",menu:$e}))},A=W=>{ms.isOpen(W)&&(En.setValue(W,_.none()),ms.close(W))},D=W=>ms.getState(W),N=W=>{ms.isOpen(W)&&En.getValue(W).each(le=>{switch(le.mode){case"menu":ms.getState(W).each(Ab.repositionMenus);break;case"position":const pe=t.lazySink(W).getOrDie();li.positionWithinBounds(pe,W,le.config,le.getBounds());break}})},U={setContent:i,showAt:d,showWithin:g,showWithinBounds:p,showMenuAt:w,showMenuWithinBounds:T,hide:A,getContent:D,reposition:N,isOpen:ms.isOpen};return{uid:t.uid,dom:t.dom,behaviours:pc(t.inlineBehaviours,[ms.config({isPartOf:(W,le,pe)=>sm(le,pe)||a(W,pe),getAttachPoint:W=>t.lazySink(W).getOrDie(),onOpen:W=>{t.onShow(W)},onClose:W=>{t.onHide(W)}}),En.config({store:{mode:"memory",initialValue:_.none()}}),Pl.config({channels:{...Uh({isExtraPart:s.isExtraPart,...t.fireDismissalEventInstead.map(W=>({fireEventInstead:{event:W.event}})).getOr({})}),...bv({...t.fireRepositionEventInstead.map(W=>({fireEventInstead:{event:W.event}})).getOr({}),doReposition:N})}})]),eventOrder:t.eventOrder,apis:U}},Jr=zl({name:"InlineView",configFields:[At("lazySink"),ds("onShow"),ds("onHide"),Yf("onEscape"),Na("inlineBehaviours",[ms,En,Pl]),vi("fireDismissalEventInstead",[Ke("event",Yd())]),vi("fireRepositionEventInstead",[Ke("event",x1())]),Ke("getRelated",_.none),Ke("isExtraPart",Le),Ke("eventOrder",_.none)],factory:v5,apis:{showAt:(t,s,a,i)=>{t.showAt(s,a,i)},showWithin:(t,s,a,i,d)=>{t.showWithin(s,a,i,d)},showWithinBounds:(t,s,a,i,d)=>{t.showWithinBounds(s,a,i,d)},showMenuAt:(t,s,a,i)=>{t.showMenuAt(s,a,i)},showMenuWithinBounds:(t,s,a,i,d)=>{t.showMenuWithinBounds(s,a,i,d)},hide:(t,s)=>{t.hide(s)},isOpen:(t,s)=>t.isOpen(s),getContent:(t,s)=>t.getContent(s),setContent:(t,s,a)=>{t.setContent(s,a)},reposition:(t,s)=>{t.reposition(s)}}});var Hv=tinymce.util.Tools.resolve("tinymce.util.Delay");const nl=zl({name:"Button",factory:t=>{const s=DS(t.action),a=t.dom.tag,i=g=>qt(t.dom,"attributes").bind(p=>qt(p,g)),d=()=>{if(a==="button"){const g=i("type").getOr("button"),p=i("role").map(w=>({role:w})).getOr({});return{type:g,...p}}else return{role:i("role").getOr("button")}};return{uid:t.uid,dom:t.dom,components:t.components,events:s,behaviours:Ll.augment(t.buttonBehaviours,[Ao.config({}),ho.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:d()},eventOrder:t.eventOrder}},configFields:[Ke("uid",void 0),At("dom"),Ke("components",[]),Ll.field("buttonBehaviours",[Ao,ho]),Ns("action"),Ns("role"),Ke("eventOrder",{})]}),xr=t=>{const s=_E(t)&&Ts(t,"uid")?t.uid:yd("memento");return{get:g=>g.getSystem().getByUid(s).getOrDie(),getOpt:g=>g.getSystem().getByUid(s).toOptional(),asSpec:()=>({...t,uid:s})}};var Rd=tinymce.util.Tools.resolve("tinymce.util.I18n");const i_={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},vD="temporary-placeholder",cw=t=>()=>qt(t,vD).getOr("!not found!"),l_=(t,s)=>{const a=t.toLowerCase();if(Rd.isRtl()){const i=cc(a,"-rtl");return Kn(s,i)?i:a}else return a},zv=(t,s)=>qt(s,l_(t,s)),iw=(t,s)=>{const a=s();return zv(t,a).getOrThunk(cw(a))},yD=(t,s,a)=>{const i=s();return zv(t,i).or(a).getOrThunk(cw(i))},wD=t=>Rd.isRtl()?Kn(i_,t):!1,u_=()=>fs("add-focusable",[Ur(t=>{CT(t.element,"svg").each(s=>ko(s,"focusable","false"))})]),CD=(t,s,a,i)=>{var d,g;const p=wD(s)?["tox-icon--flip"]:[],w=qt(a,l_(s,a)).or(i).getOrThunk(cw(a));return{dom:{tag:t.tag,attributes:(d=t.attributes)!==null&&d!==void 0?d:{},classes:t.classes.concat(p),innerHtml:w},behaviours:mn([...(g=t.behaviours)!==null&&g!==void 0?g:[],u_()])}},vm=(t,s,a,i=_.none())=>CD(s,t,a(),i),y5=(t,s,a)=>{const i=a(),d=se(t,g=>Kn(i,l_(g,i)));return CD(s,d.getOr(vD),i,_.none())},d_={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},NS=zl({name:"Notification",factory:t=>{const s=xr({dom:{tag:"p",innerHtml:t.translationProvider(t.text)},behaviours:mn([zo.config({})])}),a=W=>({dom:{tag:"div",classes:["tox-bar"],styles:{width:`${W}%`}}}),i=W=>({dom:{tag:"div",classes:["tox-text"],innerHtml:`${W}%`}}),d=xr({dom:{tag:"div",classes:t.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(0)]},i(0)],behaviours:mn([zo.config({})])}),w={updateProgress:(W,le)=>{W.getSystem().isConnected()&&d.getOpt(W).each(pe=>{zo.set(pe,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[a(le)]},i(le)])})},updateText:(W,le)=>{if(W.getSystem().isConnected()){const pe=s.get(W);zo.set(pe,[Wa(le)])}}},T=H([t.icon.toArray(),t.level.toArray(),t.level.bind(W=>_.from(d_[W])).toArray()]),A=xr(nl.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[vm("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":t.translationProvider("Close")}},t.iconProvider)],action:W=>{t.onAction(W)}})),D=y5(T,{tag:"div",classes:["tox-notification__icon"]},t.iconProvider),N={dom:{tag:"div",classes:["tox-notification__body"]},components:[s.asSpec()],behaviours:mn([zo.config({})])},U=[D,N];return{uid:t.uid,dom:{tag:"div",attributes:{role:"alert"},classes:t.level.map(W=>["tox-notification","tox-notification--in",`tox-notification--${W}`]).getOr(["tox-notification","tox-notification--in"])},behaviours:mn([Ao.config({}),fs("notification-events",[zt(Ym(),W=>{A.getOpt(W).each(Ao.focus)})])]),components:U.concat(t.progress?[d.asSpec()]:[]).concat(t.closeButton?[A.asSpec()]:[]),apis:w}},configFields:[Ns("level"),At("progress"),Ns("icon"),At("onAction"),At("text"),At("iconProvider"),At("translationProvider"),Ra("closeButton",!0)],apis:{updateProgress:(t,s,a)=>{t.updateProgress(s,a)},updateText:(t,s,a)=>{t.updateText(s,a)}}});var m_=(t,s,a)=>{const i=s.backstage.shared,d=()=>{const T=os(Lt.fromDom(t.getContentAreaContainer())),A=Xa(),D=yl(A.x,T.x,T.right),N=yl(A.y,T.y,T.bottom),U=Math.max(T.right,A.right),W=Math.max(T.bottom,A.bottom);return _.some(no(D,N,U-D,W-N))};return{open:(T,A)=>{const D=()=>{A(),Jr.hide(U)},N=Ci(NS.sketch({text:T.text,level:nn(["success","error","warning","warn","info"],T.type)?T.type:void 0,progress:T.progressBar===!0,icon:T.icon,closeButton:T.closeButton,onAction:D,iconProvider:i.providers.icons,translationProvider:i.providers.translate})),U=Ci(Jr.sketch({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:i.getSink,fireDismissalEventInstead:{},...i.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}}}));a.add(U),st(T.timeout)&&T.timeout>0&&Hv.setEditorTimeout(t,()=>{D()},T.timeout);const le={close:D,reposition:()=>{const pe=vl(N),nt={maxHeightFunction:Qp()},$e=t.notificationManager.getNotifications();if($e[0]===le){const rt={...i.anchors.banner(),overrides:nt};Jr.showWithinBounds(U,pe,{anchor:rt},d)}else Kt($e,le).each(rt=>{const wn=$e[rt-1].getEl(),lt={type:"node",root:ta(),node:_.some(Lt.fromDom(wn)),overrides:nt,layouts:{onRtl:()=>[Za],onLtr:()=>[Za]}};Jr.showWithinBounds(U,pe,{anchor:lt},d)})},text:pe=>{NS.updateText(N,pe)},settings:T,getEl:()=>N.element.dom,progressBar:{value:pe=>{NS.updateProgress(N,pe)}}};return le},close:T=>{T.close()},getArgs:T=>T.settings}},lw=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),SD=tinymce.util.Tools.resolve("tinymce.EditorManager"),Vv=tinymce.util.Tools.resolve("tinymce.Env"),Ku;(function(t){t.default="wrap",t.floating="floating",t.sliding="sliding",t.scrolling="scrolling"})(Ku||(Ku={}));var uw;(function(t){t.auto="auto",t.top="top",t.bottom="bottom"})(uw||(uw={}));const kr=t=>s=>s.options.get(t),dw=t=>s=>_.from(t(s)),xD=t=>{const s=Vv.deviceType.isPhone(),a=Vv.deviceType.isTablet()||s,i=t.options.register,d=p=>Nt(p)||p===!1,g=p=>Nt(p)||st(p);i("skin",{processor:p=>Nt(p)||p===!1,default:"oxide"}),i("skin_url",{processor:"string"}),i("height",{processor:g,default:Math.max(t.getElement().offsetHeight,400)}),i("width",{processor:g,default:lw.DOM.getStyle(t.getElement(),"width")}),i("min_height",{processor:"number",default:100}),i("min_width",{processor:"number"}),i("max_height",{processor:"number"}),i("max_width",{processor:"number"}),i("style_formats",{processor:"object[]"}),i("style_formats_merge",{processor:"boolean",default:!1}),i("style_formats_autohide",{processor:"boolean",default:!1}),i("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),i("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),i("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),i("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),i("content_langs",{processor:"object[]"}),i("removed_menuitems",{processor:"string",default:""}),i("menubar",{processor:p=>Nt(p)||Ut(p),default:!s}),i("menu",{processor:"object",default:{}}),i("toolbar",{processor:p=>Ut(p)||Nt(p)||hn(p)?{value:p,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."},default:!0}),Vt(9,p=>{i("toolbar"+(p+1),{processor:"string"})}),i("toolbar_mode",{processor:"string",default:a?"scrolling":"floating"}),i("toolbar_groups",{processor:"object",default:{}}),i("toolbar_location",{processor:"string",default:uw.auto}),i("toolbar_persist",{processor:"boolean",default:!1}),i("toolbar_sticky",{processor:"boolean",default:t.inline}),i("toolbar_sticky_offset",{processor:"number",default:0}),i("fixed_toolbar_container",{processor:"string",default:""}),i("fixed_toolbar_container_target",{processor:"object"}),i("file_picker_callback",{processor:"function"}),i("file_picker_validator_handler",{processor:"function"}),i("file_picker_types",{processor:"string"}),i("typeahead_urls",{processor:"boolean",default:!0}),i("anchor_top",{processor:d,default:"#top"}),i("anchor_bottom",{processor:d,default:"#bottom"}),i("draggable_modal",{processor:"boolean",default:!1}),i("statusbar",{processor:"boolean",default:!0}),i("elementpath",{processor:"boolean",default:!0}),i("branding",{processor:"boolean",default:!0}),i("promotion",{processor:"boolean",default:!0}),i("resize",{processor:p=>p==="both"||Ut(p),default:!Vv.deviceType.isTouch()}),i("sidebar_show",{processor:"string"})},BS=kr("readonly"),$S=kr("height"),PS=kr("width"),f_=dw(kr("min_width")),mw=dw(kr("min_height")),FS=dw(kr("max_width")),g_=dw(kr("max_height")),kD=dw(kr("style_formats")),TD=kr("style_formats_merge"),ED=kr("style_formats_autohide"),h_=kr("content_langs"),IS=kr("removed_menuitems"),Uv=kr("toolbar_mode"),fw=kr("toolbar_groups"),p_=kr("toolbar_location"),C5=kr("fixed_toolbar_container"),S5=kr("fixed_toolbar_container_target"),_D=kr("toolbar_persist"),AD=kr("toolbar_sticky_offset"),OD=kr("menubar"),gw=kr("toolbar"),DD=kr("file_picker_callback"),RD=kr("file_picker_validator_handler"),LS=kr("file_picker_types"),rp=kr("typeahead_urls"),MD=kr("anchor_top"),ND=kr("anchor_bottom"),HS=kr("draggable_modal"),BD=kr("statusbar"),b_=kr("elementpath"),$D=kr("branding"),v_=kr("resize"),y_=kr("paste_as_text"),zS=kr("sidebar_show"),PD=kr("promotion"),VS=t=>t.options.get("skin")===!1,US=t=>t.options.get("menubar")!==!1,Wv=t=>{const s=t.options.get("skin_url");if(VS(t))return s;if(s)return t.documentBaseURI.toAbsolute(s);{const a=t.options.get("skin");return SD.baseURL+"/skins/ui/"+a}},FD=t=>t.options.get("line_height_formats").split(" "),Zv=t=>{const s=gw(t),a=Nt(s),i=hn(s)&&s.length>0;return!pw(t)&&(i||a||s===!0)},hw=t=>{const s=Vt(9,i=>t.options.get("toolbar"+(i+1))),a=Se(s,Nt);return gr(a.length>0,a)},pw=t=>hw(t).fold(()=>{const s=gw(t);return Te(s,Nt)&&s.length>0},Me),WS=t=>p_(t)===uw.bottom,ID=t=>{var s;if(!t.inline)return _.none();const a=(s=C5(t))!==null&&s!==void 0?s:"";if(a.length>0)return da(ta(),a);const i=S5(t);return cn(i)?_.some(Lt.fromDom(i)):_.none()},bw=t=>t.inline&&ID(t).isSome(),vw=t=>ID(t).getOrThunk(()=>Ar(Ko(Lt.fromDom(t.getElement())))),w_=t=>t.inline&&!US(t)&&!Zv(t)&&!pw(t),yw=t=>(t.options.get("toolbar_sticky")||t.inline)&&!bw(t)&&!w_(t),LD=t=>{const s=t.options.get("menu");return an(s,a=>({...a,items:a.items}))};var x5=Object.freeze({__proto__:null,get ToolbarMode(){return Ku},get ToolbarLocation(){return uw},register:xD,getSkinUrl:Wv,isReadOnly:BS,isSkinDisabled:VS,getHeightOption:$S,getWidthOption:PS,getMinWidthOption:f_,getMinHeightOption:mw,getMaxWidthOption:FS,getMaxHeightOption:g_,getUserStyleFormats:kD,shouldMergeStyleFormats:TD,shouldAutoHideStyleFormats:ED,getLineHeightFormats:FD,getContentLanguages:h_,getRemovedMenuItems:IS,isMenubarEnabled:US,isMultipleToolbars:pw,isToolbarEnabled:Zv,isToolbarPersist:_D,getMultipleToolbarsOption:hw,getUiContainer:vw,useFixedContainer:bw,getToolbarMode:Uv,isDraggableModal:HS,isDistractionFree:w_,isStickyToolbar:yw,getStickyToolbarOffset:AD,getToolbarLocation:p_,isToolbarLocationBottom:WS,getToolbarGroups:fw,getMenus:LD,getMenubar:OD,getToolbar:gw,getFilePickerCallback:DD,getFilePickerTypes:LS,useTypeaheadUrls:rp,getAnchorTop:MD,getAnchorBottom:ND,getFilePickerValidatorHandler:RD,useStatusBar:BD,useElementPath:b_,promotionEnabled:PD,useBranding:$D,getResize:v_,getPasteAsText:y_,getSidebarShow:zS});const HD="[data-mce-autocompleter]",zD=t=>$l(t,HD),k5=t=>da(t,HD),T5={setup:(t,s)=>{const a=(d,g)=>{vo(d,Xm(),{raw:g})},i=()=>t.getMenu().bind(Vs.getHighlighted);s.on("keydown",d=>{const g=d.which;t.isActive()&&(t.isMenuOpen()?g===13?(i().each(Xd),d.preventDefault()):g===40?(i().fold(()=>{t.getMenu().each(Vs.highlightFirst)},p=>{a(p,d)}),d.preventDefault(),d.stopImmediatePropagation()):(g===37||g===38||g===39)&&i().each(p=>{a(p,d),d.preventDefault(),d.stopImmediatePropagation()}):(g===13||g===38||g===40)&&t.cancelIfNecessary())}),s.on("NodeChange",d=>{t.isActive()&&!t.isProcessingAction()&&zD(Lt.fromDom(d.element)).isNone()&&t.cancelIfNecessary()})}};var C_;(function(t){t[t.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",t[t.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"})(C_||(C_={}));var ym=C_;const S_="tox-menu-nav__js",jv="tox-collection__item",x_="tox-swatch",E5={normal:S_,color:x_},VD="tox-collection__item--enabled",UD="tox-collection__group-heading",WD="tox-collection__item-icon",k_="tox-collection__item-label",_5="tox-collection__item-accessory",ZD="tox-collection__item-caret",A5="tox-collection__item-checkmark",ww="tox-collection__item--active",ZS="tox-collection__item-container",O5="tox-collection__item-container--column",jD="tox-collection__item-container--row",D5="tox-collection__item-container--align-right",R5="tox-collection__item-container--align-left",M5="tox-collection__item-container--valign-top",N5="tox-collection__item-container--valign-middle",B5="tox-collection__item-container--valign-bottom",GD=t=>qt(E5,t).getOr(S_),$5=t=>t==="color"?"tox-swatches":"tox-menu",T_=t=>({backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:$5(t),tieredMenu:"tox-tiered-menu"}),Ob=t=>{const s=T_(t);return{backgroundMenu:s.backgroundMenu,selectedMenu:s.selectedMenu,menu:s.menu,selectedItem:s.selectedItem,item:GD(t)}},jS=(t,s,a)=>{const i=T_(a);return{tag:"div",classes:H([[i.menu,`tox-menu-${s}-column`],t?[i.hasIcons]:[]])}},P5=[qu.parts.items({})],Gv=(t,s,a)=>{const i=T_(a);return{dom:{tag:"div",classes:H([[i.tieredMenu]])},markers:Ob(a)}},qD=Y([Ns("data"),Ke("inputAttributes",{}),Ke("inputStyles",{}),Ke("tag","input"),Ke("inputClasses",[]),ds("onSetValue"),Ke("styles",{}),Ke("eventOrder",{}),Na("inputBehaviours",[En,Ao]),Ke("selectOnFocus",!0)]),KD=t=>mn([Ao.config({onFocus:t.selectOnFocus?s=>{const a=s.element,i=bl(a);a.dom.setSelectionRange(0,i.length)}:Q})]),F5=t=>({...KD(t),...pc(t.inputBehaviours,[En.config({store:{mode:"manual",...t.data.map(s=>({initialValue:s})).getOr({}),getValue:s=>bl(s.element),setValue:(s,a)=>{bl(s.element)!==a&&of(s.element,a)}},onSetValue:t.onSetValue})])}),YD=t=>({tag:t.tag,attributes:{type:"text",...t.inputAttributes},styles:t.inputStyles,classes:t.inputClasses}),XD=(t,s)=>({uid:t.uid,dom:YD(t),components:[],behaviours:F5(t),eventOrder:t.eventOrder}),qv=zl({name:"Input",configFields:qD(),factory:XD}),GS=Yn("refetch-trigger-event"),qS=Yn("redirect-menu-item-interaction"),E_="tox-menu__searcher",Kv=t=>da(t.element,`.${E_}`).bind(s=>t.getSystem().getByDom(s).toOptional()),Cw=Kv,JD=(t,s)=>{En.setValue(t,s.fetchPattern),t.element.dom.selectionStart=s.selectionStart,t.element.dom.selectionEnd=s.selectionEnd},wm=t=>{const s=En.getValue(t),a=t.element.dom.selectionStart,i=t.element.dom.selectionEnd;return{fetchPattern:s,selectionStart:a,selectionEnd:i}},__=(t,s)=>{$(s.element,"id").each(a=>ko(t.element,"aria-activedescendant",a))},I5=t=>{const s=(d,g)=>(g.cut(),_.none()),a=(d,g)=>{const p={interactionEvent:g.event,eventType:g.event.raw.type};return vo(d,qS,p),_.some(!0)},i="searcher-events";return{dom:{tag:"div",classes:[jv]},components:[qv.sketch({inputClasses:[E_,"tox-textfield"],inputAttributes:{...t.placeholder.map(d=>({placeholder:t.i18n(d)})).getOr({}),type:"search","aria-autocomplete":"list"},inputBehaviours:mn([fs(i,[zt(Jf(),d=>{Ws(d,GS)}),zt(Xm(),(d,g)=>{g.event.raw.key==="Escape"&&g.stop()})]),ho.config({mode:"special",onLeft:s,onRight:s,onSpace:s,onEnter:a,onEscape:a,onUp:a,onDown:a})]),eventOrder:{keydown:[i,ho.name()]}})]}},KS="tox-collection--results__js",QD=t=>{var s;return t.dom?{...t,dom:{...t.dom,attributes:{...(s=t.dom.attributes)!==null&&s!==void 0?s:{},id:Yn("aria-item-search-result-id"),"aria-selected":"false"}}}:t},A_=(t,s)=>a=>{const i=kt(a,s);return Ie(i,d=>({dom:t,components:d}))},Yv=t=>({dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[qu.parts.items({preprocess:t!=="auto"?A_({tag:"div",classes:["tox-swatches__row"]},t):Ot})]}]}),L5=t=>({dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[qu.parts.items({preprocess:A_({tag:"div",classes:["tox-collection__group"]},t)})]}),eR=(t,s)=>{const a=[];let i=[];return R(t,(d,g)=>{s(d,g)?(i.length>0&&a.push(i),i=[],(Kn(d.dom,"innerHtml")||d.components&&d.components.length>0)&&i.push(d)):i.push(d)}),i.length>0&&a.push(i),Ie(a,d=>({dom:{tag:"div",classes:["tox-collection__group"]},components:d}))},YS=(t,s,a)=>qu.parts.items({preprocess:i=>{const d=Ie(i,a);return t!=="auto"&&t>1?A_({tag:"div",classes:["tox-collection__group"]},t)(d):eR(d,(g,p)=>s[p].type==="separator")}}),O_=(t,s,a=!0)=>({dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[YS(t,s,Ot)]}),D_=(t,s,a=!0)=>{const i=Yn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",KS].concat(t===1?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:i}},components:[YS(t,s,QD)]}},H5=(t,s,a)=>{const i=Yn("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(t===1?["tox-collection--list"]:["tox-collection--grid"])},components:[I5({i18n:Rd.translate,placeholder:a.placeholder}),{dom:{tag:"div",classes:[...t===1?["tox-collection--list"]:["tox-collection--grid"],KS],attributes:{id:i}},components:[YS(t,s,QD)]}]}},R_=(t,s=!0)=>({dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[qu.parts.items({preprocess:a=>eR(a,(i,d)=>t[d].type==="separator")})]}),Xv=t=>Fe(t,s=>"icon"in s&&s.icon!==void 0),Mg=t=>(console.error(su(t)),console.log(t),_.none()),tR=(t,s,a,i,d)=>{const g=R_(a);return{value:t,dom:g.dom,components:g.components,items:a}},XS=(t,s,a,i,d)=>{const g=()=>d.menuType!=="searchable"?O_(i,a):d.searchMode.searchMode==="search-with-field"?H5(i,a,d.searchMode):D_(i,a);if(d.menuType==="color"){const p=Yv(i);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"&&i==="auto"){const p=O_(i,a);return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="normal"||d.menuType==="searchable"){const p=g();return{value:t,dom:p.dom,components:p.components,items:a}}else if(d.menuType==="listpreview"&&i!=="auto"){const p=L5(i);return{value:t,dom:p.dom,components:p.components,items:a}}else return{value:t,dom:jS(s,i,d.menuType),components:P5,items:a}},Ba=la("type"),M_=la("name"),N_=la("label"),Ng=la("text"),z5=la("title"),nR=la("icon"),Sw=la("value"),V5=wa("fetch"),xw=wa("getSubmenuItems"),Db=wa("onAction"),U5=wa("onItemAction"),Rb=Ma("onSetup",()=>Q),oR=ec("name"),Jv=ec("text"),Cm=ec("icon"),kw=ec("tooltip"),JS=ec("label"),sR=ec("shortcut"),rR=Yf("select"),QS=Ra("active",!1),W5=Ra("borderless",!1),Yu=Ra("enabled",!0),Qv=Ra("primary",!1),ex=t=>Ke("columns",t),tx=Ke("meta",{}),nx=Ma("onAction",Q),ap=t=>Sr("type",t),B_=t=>Qa("name","name",tu(()=>Yn(`${t}-name`)),Oa),$_=t=>Qa("value","value",tu(()=>Yn(`${t}-value`)),oi()),aR=lo([Ba,Jv]),cR=t=>Ms("separatormenuitem",aR,t),iR=lo([ap("autocompleteitem"),QS,Yu,tx,Sw,Jv,Cm]),Mb=t=>Ms("Autocompleter.Separator",aR,t),Z5=t=>Ms("Autocompleter.Item",iR,t),Nb=[Yu,kw,Cm,Jv,Rb],ox=lo([Ba,Db].concat(Nb)),lR=t=>Ms("toolbarbutton",ox,t),sx=[QS].concat(Nb),uR=lo(sx.concat([Ba,Db])),P_=t=>Ms("ToggleButton",uR,t),rx=[Ma("predicate",Le),dl("scope","node",["node","editor"]),dl("position","selection",["node","selection","line"])],dR=Nb.concat([ap("contextformbutton"),Qv,Db,Ec("original",Ot)]),j5=sx.concat([ap("contextformbutton"),Qv,Db,Ec("original",Ot)]),mR=Nb.concat([ap("contextformbutton")]),fR=sx.concat([ap("contextformtogglebutton")]),gR=pi("type",{contextformbutton:dR,contextformtogglebutton:j5}),hR=lo([ap("contextform"),Ma("initValue",Y("")),JS,bi("commands",gR),qi("launch",pi("type",{contextformbutton:mR,contextformtogglebutton:fR}))].concat(rx)),G5=t=>Ms("ContextForm",hR,t),pR=lo([ap("contexttoolbar"),la("items")].concat(rx)),Tw=t=>Ms("ContextToolbar",pR,t),q5=[Ba,la("src"),ec("alt"),k("classes",[],Oa)],K5=lo(q5),Y5=[Ba,Ng,oR,k("classes",["tox-collection__item-label"],Oa)],bR=lo(Y5),F_=Du(()=>dh("type",{cardimage:K5,cardtext:bR,cardcontainer:X5})),X5=lo([Ba,Sr("direction","horizontal"),Sr("align","left"),Sr("valign","middle"),bi("items",F_)]),e0=[Yu,Jv,sR,$_("menuitem"),tx],J5=lo([Ba,JS,bi("items",F_),Rb,nx].concat(e0)),Q5=t=>Ms("cardmenuitem",J5,t),eI=lo([Ba,QS,Cm].concat(e0)),ax=t=>Ms("choicemenuitem",eI,t),vR=[Ba,la("fancytype"),nx],yR=[Ke("initData",{})].concat(vR),wR=[I("initData",{},[Ra("allowCustomColors",!0),Sr("storageKey","default"),Xf("colors",oi())])].concat(vR),CR=pi("fancytype",{inserttable:yR,colorswatch:wR}),tI=t=>Ms("fancymenuitem",CR,t),SR=lo([Ba,Rb,nx,Cm].concat(e0)),xR=t=>Ms("menuitem",SR,t),kR=lo([Ba,xw,Rb,Cm].concat(e0)),TR=t=>Ms("nestedmenuitem",kR,t),nI=lo([Ba,Cm,QS,Rb,Db].concat(e0)),oI=t=>Ms("togglemenuitem",nI,t),I_=(t,s,a)=>{const i=jc(t.element,"."+a);if(i.length>0){const d=re(i,g=>{const p=g.dom.getBoundingClientRect().top,w=i[0].dom.getBoundingClientRect().top;return Math.abs(p-w)>s}).getOr(i.length);return _.some({numColumns:d,numRows:Math.ceil(i.length/d)})}else return _.none()},ER=(t,s)=>mn([fs(t,s)]),Bb={namedEvents:ER,unnamedEvents:t=>ER(Yn("unnamed-events"),t)},_R=Yn("tooltip.exclusive"),cp=Yn("tooltip.show"),Vl=Yn("tooltip.hide"),AR=(t,s,a)=>{t.getSystem().broadcastOn([_R],{})};var sI=Object.freeze({__proto__:null,hideAllExclusive:AR,setComponents:(t,s,a,i)=>{a.getTooltip().each(d=>{d.getSystem().isConnected()&&zo.set(d,i)})}}),rI=Object.freeze({__proto__:null,events:(t,s)=>{const a=d=>{s.getTooltip().each(g=>{Mc(g),t.onHide(d,g),s.clearTooltip()}),s.clearTimer()},i=d=>{if(!s.isShowing()){AR(d);const g=t.lazySink(d).getOrDie(),p=d.getSystem().build({dom:t.tooltipDom,components:t.tooltipComponents,events:dr(t.mode==="normal"?[zt(Gd(),w=>{Ws(d,cp)}),zt($u(),w=>{Ws(d,Vl)})]:[]),behaviours:mn([zo.config({})])});s.setTooltip(p),Rc(g,p),t.onShow(d,p),li.position(g,p,{anchor:t.anchor(d)})}};return dr(H([[zt(cp,d=>{s.resetTimer(()=>{i(d)},t.delay)}),zt(Vl,d=>{s.resetTimer(()=>{a(d)},t.delay)}),zt(au(),(d,g)=>{const p=g;p.universal||nn(p.channels,_R)&&a(d)}),Bl(d=>{a(d)})],t.mode==="normal"?[zt(Ym(),d=>{Ws(d,cp)}),zt(Op(),d=>{Ws(d,Vl)}),zt(Gd(),d=>{Ws(d,cp)}),zt($u(),d=>{Ws(d,Vl)})]:[zt(I0(),(d,g)=>{Ws(d,cp)}),zt(T1(),d=>{Ws(d,Vl)})]]))}}),aI=[At("lazySink"),At("tooltipDom"),Ke("exclusive",!0),Ke("tooltipComponents",[]),Ke("delay",300),dl("mode","normal",["normal","follow-highlight"]),Ke("anchor",t=>({type:"hotspot",hotspot:t,layouts:{onLtr:Y([Za,Xi,Ac,ci,Oc,Zc]),onRtl:Y([Za,Xi,Ac,ci,Oc,Zc])}})),ds("onHide"),ds("onShow")],iI=Object.freeze({__proto__:null,init:()=>{const t=Wr(),s=Wr(),a=()=>{t.on(clearTimeout)},i=(g,p)=>{a(),t.set(setTimeout(g,p))},d=Y("not-implemented");return Bi({getTooltip:s.get,isShowing:s.isSet,setTooltip:s.set,clearTooltip:s.clear,clearTimer:a,resetTimer:i,readState:d})}});const DR=hc({fields:aI,name:"tooltipping",active:rI,state:iI,apis:sI}),lI=t=>t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),kl="silver.readonly",Af=lo([gd("readonly")]),cx=(t,s)=>{const i=t.mainUi.outerContainer.element,d=[t.mainUi.mothership,...t.uiMotherships];s&&R(d,g=>{g.broadcastOn([Ed()],{target:i})}),R(d,g=>{g.broadcastOn([kl],{readonly:s})})},L_=(t,s)=>{t.on("init",()=>{t.mode.isReadOnly()&&cx(s,!0)}),t.on("SwitchMode",()=>cx(s,t.mode.isReadOnly())),BS(t)&&t.mode.set("readonly")},ka=()=>Pl.config({channels:{[kl]:{schema:Af,onReceive:(t,s)=>{To.set(t,s.readonly)}}}}),Ul={item:t=>To.config({disabled:t,disableClass:"tox-collection__item--state-disabled"}),button:t=>To.config({disabled:t}),splitButton:t=>To.config({disabled:t,disableClass:"tox-tbtn--disabled"}),toolbarButton:t=>To.config({disabled:t,disableClass:"tox-tbtn--disabled",useNative:!1})},lx=(t,s)=>{const a=t.getApi(s);return i=>{i(a)}},Md=(t,s)=>Ur(a=>{lx(t,a)(d=>{const g=t.onSetup(d);Ze(g)&&s.set(g)})}),Ew=(t,s)=>Bl(a=>lx(t,a)(s.get())),uI=(t,s)=>gl((a,i)=>{lx(t,a)(t.onAction),!t.triggersSubmenu&&s===ym.CLOSE_ON_EXECUTE&&(a.getSystem().isConnected()&&Ws(a,Dp()),i.stop())}),Wl={[fl()]:["disabling","alloy.base.behaviour","toggling","item-events"]},$b=bs,Tl=(t,s,a,i)=>{const d=V(Q);return{type:"item",dom:s.dom,components:$b(s.optComponents),data:t.data,eventOrder:Wl,hasSubmenu:t.triggersSubmenu,itemBehaviours:mn([fs("item-events",[uI(t,a),Md(t,d),Ew(t,d)]),Ul.item(()=>!t.enabled||i.isDisabled()),ka(),zo.config({})].concat(t.itemBehaviours))}},n0=t=>({value:t.value,meta:{text:t.text.getOr(""),...t.meta}}),mr=t=>{const s=Vv.os.isMacOS()||Vv.os.isiOS(),d=s?{alt:"⌥",ctrl:"⌃",shift:"⇧",meta:"⌘",access:"⌃⌥"}:{meta:"Ctrl",access:"Shift+Alt"},g=t.split("+"),p=Ie(g,w=>{const T=w.toLowerCase().trim();return Kn(d,T)?d[T]:w});return s?p.join(""):p.join("+")},Bg=(t,s,a=[WD])=>vm(t,{tag:"div",classes:a},s),_w=t=>({dom:{tag:"div",classes:[k_]},components:[Wa(Rd.translate(t))]}),H_=(t,s)=>({dom:{tag:"div",classes:s,innerHtml:t}}),z_=(t,s)=>({dom:{tag:"div",classes:[k_]},components:[{dom:{tag:t.tag,styles:t.styles},components:[Wa(Rd.translate(s))]}]}),V_=t=>({dom:{tag:"div",classes:[_5]},components:[Wa(mr(t))]}),MR=t=>Bg("checkmark",t,[A5]),U_=t=>Bg("chevron-right",t,[ZD]),dI=t=>Bg("chevron-down",t,[ZD]),NR=(t,s)=>{const a=t.direction==="vertical"?O5:jD,i=t.align==="left"?R5:D5;return{dom:{tag:"div",classes:[ZS,a,i,(()=>{switch(t.valign){case"top":return M5;case"middle":return N5;case"bottom":return B5}})()]},components:s}},BR=(t,s,a)=>({dom:{tag:"img",classes:s,attributes:{src:t,alt:a.getOr("")}}}),W_=(t,s,a)=>{const i="custom",d="remove",g=t.ariaLabel,p=t.value,w=t.iconContent.map(A=>yD(A,s.icons,a));return{dom:(()=>{const A=x_,D=w.getOr(""),U={tag:"div",attributes:g.map(W=>({title:s.translate(W)})).getOr({}),classes:[A]};return p===i?{...U,tag:"button",classes:[...U.classes,"tox-swatches__picker-btn"],innerHtml:D}:p===d?{...U,classes:[...U.classes,"tox-swatch--remove"],innerHtml:D}:cn(p)?{...U,attributes:{...U.attributes,"data-mce-color":p},styles:{"background-color":p},innerHtml:D}:U})(),optComponents:[]}},Z_=t=>{const s=t.map(a=>({attributes:{title:Rd.translate(a)}})).getOr({});return{tag:"div",classes:[S_,jv],...s}},ux=(t,s,a,i)=>{const d={tag:"div",classes:[WD]},g=U=>vm(U,d,s.icons,i),p=()=>_.some({dom:d}),w=a?t.iconContent.map(g).orThunk(p):_.none(),T=t.checkMark,A=_.from(t.meta).fold(()=>_w,U=>Kn(U,"style")?$t(z_,U.style):_w),D=t.htmlContent.fold(()=>t.textContent.map(A),U=>_.some(H_(U,[k_])));return{dom:Z_(t.ariaLabel),optComponents:[w,D,t.shortcutContent.map(V_),T,t.caret]}},Aw=(t,s,a,i=_.none())=>t.presets==="color"?W_(t,s,i):ux(t,s,a,i),$R=(t,s)=>qt(t,"tooltipWorker").map(a=>[DR.config({lazySink:s.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:i=>({type:"submenu",item:i,overrides:{maxHeightFunction:Qp}}),mode:"follow-highlight",onShow:(i,d)=>{a(g=>{DR.setComponents(i,[$1({element:Lt.fromDom(g)})])})}})]).getOr([]),mI=t=>lw.DOM.encode(t),PR=(t,s)=>{const a=Rd.translate(t),i=mI(a);if(s.length>0){const d=new RegExp(lI(s),"gi");return i.replace(d,g=>`<span class="tox-autocompleter-highlight">${g}</span>`)}else return i},fI=(t,s,a,i,d,g,p,w=!0)=>{const T=Aw({presets:i,textContent:_.none(),htmlContent:a?t.text.map(A=>PR(A,s)):_.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:_.none(),checkMark:_.none(),caret:_.none(),value:t.value},p.providers,w,t.icon);return Tl({data:n0(t),enabled:t.enabled,getApi:Y({}),onAction:A=>d(t.value,t.meta),onSetup:Y(Q),triggersSubmenu:!1,itemBehaviours:$R(t.meta,p)},T,g,p.providers)},FR=(t,s)=>Ie(t,a=>{switch(a.type){case"cardcontainer":return NR(a,FR(a.items,s));case"cardimage":return BR(a.src,a.classes,a.alt);case"cardtext":const d=a.name.exists(g=>nn(s.cardText.highlightOn,g))?_.from(s.cardText.matchText).getOr(""):"";return H_(PR(a.text,d),a.classes)}}),gI=(t,s,a,i)=>{const d=p=>({isEnabled:()=>!To.isDisabled(p),setEnabled:w=>{To.set(p,!w),R(jc(p.element,"*"),T=>{p.getSystem().getByDom(T).each(A=>{A.hasConfigured(To)&&To.set(A,!w)})})}}),g={dom:Z_(t.label),optComponents:[_.some({dom:{tag:"div",classes:[ZS,jD]},components:FR(t.items,i)})]};return Tl({data:n0({text:_.none(),...t}),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:_.from(i.itemBehaviours).getOr([])},g,s,a.providers)},hI=(t,s,a,i,d,g,p,w=!0)=>{const T=D=>({setActive:N=>{Es.set(D,N)},isActive:()=>Es.isOn(D),isEnabled:()=>!To.isDisabled(D),setEnabled:N=>To.set(D,!N)}),A=Aw({presets:a,textContent:s?t.text:_.none(),htmlContent:_.none(),ariaLabel:t.text,iconContent:t.icon,shortcutContent:s?t.shortcut:_.none(),checkMark:s?_.some(MR(p.icons)):_.none(),caret:_.none(),value:t.value},p,w);return vr(Tl({data:n0(t),enabled:t.enabled,getApi:T,onAction:D=>i(t.value),onSetup:D=>(D.setActive(d),Q),triggersSubmenu:!1,itemBehaviours:[]},A,g,p),{toggling:{toggleClass:VD,toggleOnExecute:!1,selected:t.active,exclusive:!0}})},IR=Uy(MS(),c_()),LR=t=>({value:t}),j_=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,HR=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,G_=t=>j_.test(t)||HR.test(t),zR=t=>qr(t,"#").toUpperCase(),pI=t=>G_(t)?_.some({value:zR(t)}):_.none(),bI=t=>({value:t.value.replace(j_,(a,i,d,g)=>i+i+d+d+g+g)}),vI=t=>{const s=bI(t),a=HR.exec(s.value);return a===null?["FFFFFF","FF","FF","FF"]:a},q_=t=>{const s=t.toString(16);return(s.length===1?"0"+s:s).toUpperCase()},Ow=t=>{const s=q_(t.red)+q_(t.green)+q_(t.blue);return LR(s)},VR=Math.min,UR=Math.max,o0=Math.round,WR=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,yI=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ip=(t,s,a,i)=>({red:t,green:s,blue:a,alpha:i}),dx=t=>{const s=parseInt(t,10);return s.toString()===t&&s>=0&&s<=255},ZR=t=>{let s,a,i;const d=(t.hue||0)%360;let g=t.saturation/100,p=t.value/100;if(g=UR(0,VR(g,1)),p=UR(0,VR(p,1)),g===0)return s=a=i=o0(255*p),ip(s,a,i,1);const w=d/60,T=p*g,A=T*(1-Math.abs(w%2-1)),D=p-T;switch(Math.floor(w)){case 0:s=T,a=A,i=0;break;case 1:s=A,a=T,i=0;break;case 2:s=0,a=T,i=A;break;case 3:s=0,a=A,i=T;break;case 4:s=A,a=0,i=T;break;case 5:s=T,a=0,i=A;break;default:s=a=i=0}return s=o0(255*(s+D)),a=o0(255*(a+D)),i=o0(255*(i+D)),ip(s,a,i,1)},Dw=t=>{const s=vI(t),a=parseInt(s[1],16),i=parseInt(s[2],16),d=parseInt(s[3],16);return ip(a,i,d,1)},K_=(t,s,a,i)=>{const d=parseInt(t,10),g=parseInt(s,10),p=parseInt(a,10),w=parseFloat(i);return ip(d,g,p,w)},Y_=t=>{if(t==="transparent")return _.some(ip(0,0,0,0));const s=WR.exec(t);if(s!==null)return _.some(K_(s[1],s[2],s[3],"1"));const a=yI.exec(t);return a!==null?_.some(K_(a[1],a[2],a[3],a[4])):_.none()},X_=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,jR=ip(255,0,0,1),wI=t=>{t.dispatch("SkinLoaded")},CI=(t,s)=>{t.dispatch("SkinLoadError",s)},SI=t=>{t.dispatch("ResizeEditor")},J_=(t,s)=>{t.dispatch("ResizeContent",s)},GR=(t,s)=>{t.dispatch("ScrollContent",s)},xI=(t,s)=>{t.dispatch("TextColorChange",s)},kI=(t,s)=>{t.dispatch("AfterProgressState",{state:s})},TI=(t,s)=>t.dispatch("ResolveName",{name:s.nodeName.toLowerCase(),target:s}),EI=(t,s)=>{t.dispatch("ToggleToolbarDrawer",{state:s})};var Pb=tinymce.util.Tools.resolve("tinymce.util.LocalStorage");const qR={},KR=(t,s=10)=>{const a=Pb.getItem(t),i=Nt(a)?JSON.parse(a):[],g=(A=>s-A.length<0?A.slice(0,s):A)(i),p=A=>{Kt(g,A).each(w),g.unshift(A),g.length>s&&g.pop(),Pb.setItem(t,JSON.stringify(g))},w=A=>{g.splice(A,1)};return{add:p,state:()=>g.slice(0)}},Nd=t=>qt(qR,t).getOrThunk(()=>{const s=`tinymce-custom-colors-${t}`,a=Pb.getItem(s);if(Mt(a)){const d=Pb.getItem("tinymce-custom-colors");Pb.setItem(s,cn(d)?d:"[]")}const i=KR(s,10);return qR[t]=i,i}),YR=t=>Ie(Nd(t).state(),s=>({type:"choiceitem",text:s,icon:"checkmark",value:s})),Q_=(t,s)=>{Nd(t).add(s)},Rw=(t,s,a)=>({hue:t,saturation:s,value:a}),eA=t=>{let s=0,a=0,i=0;const d=t.red/255,g=t.green/255,p=t.blue/255,w=Math.min(d,Math.min(g,p)),T=Math.max(d,Math.max(g,p));if(w===T)return i=w,Rw(0,0,i*100);const A=d===w?g-p:p===w?d-g:p-d;return s=d===w?3:p===w?1:5,s=60*(s-A/(T-w)),a=(T-w)/T,i=T,Rw(Math.round(s),Math.round(a*100),Math.round(i*100))},tA=t=>eA(Dw(t)),XR=t=>Ow(ZR(t)),_I=t=>pI(t).orThunk(()=>Y_(t).map(Ow)).getOrThunk(()=>{const s=document.createElement("canvas");s.height=1,s.width=1;const a=s.getContext("2d");a.clearRect(0,0,s.width,s.height),a.fillStyle="#FFFFFF",a.fillStyle=t,a.fillRect(0,0,1,1);const i=a.getImageData(0,0,1,1).data,d=i[0],g=i[1],p=i[2],w=i[3];return Ow(ip(d,g,p,w))}),mx="forecolor",nA="hilitecolor",oA=t=>Math.max(5,Math.ceil(Math.sqrt(t))),AI=t=>{const s=[];for(let a=0;a<t.length;a+=2)s.push({text:t[a+1],value:"#"+_I(t[a]).value,icon:"checkmark",type:"choiceitem"});return s},mu=t=>s=>s.options.get(t),sA="#000000",JR=t=>{const s=t.options.register,a=i=>Te(i,Nt)?{value:AI(i),valid:!0}:{valid:!1,message:"Must be an array of strings."};s("color_map",{processor:a,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),s("color_map_background",{processor:a}),s("color_map_foreground",{processor:a}),s("color_cols",{processor:"number",default:oA(Fb(t,"default").length)}),s("color_cols_foreground",{processor:"number",default:oA(Fb(t,mx).length)}),s("color_cols_background",{processor:"number",default:oA(Fb(t,nA).length)}),s("custom_colors",{processor:"boolean",default:!0}),s("color_default_foreground",{processor:"string",default:sA}),s("color_default_background",{processor:"string",default:sA})},rA=(t,s)=>s===mx?mu("color_cols_foreground")(t):s===nA?mu("color_cols_background")(t):mu("color_cols")(t),aA=mu("custom_colors"),Fb=(t,s)=>s===mx&&t.options.isSet("color_map_foreground")?mu("color_map_foreground")(t):s===nA&&t.options.isSet("color_map_background")?mu("color_map_background")(t):mu("color_map")(t),cA=mu("color_default_foreground"),iA=mu("color_default_background"),lA=(t,s)=>{const a=Dt(Lt.fromDom(t.selection.getStart()),s==="hilitecolor"?"background-color":"color");return Y_(a).map(i=>"#"+Ow(i).value)},OI=(t,s,a)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.apply(s,{value:a}),t.nodeChanged()})},QR=(t,s)=>{t.undoManager.transact(()=>{t.focus(),t.formatter.remove(s,{value:null},void 0,!0),t.nodeChanged()})},DI=t=>{t.addCommand("mceApplyTextcolor",(s,a)=>{OI(t,s,a)}),t.addCommand("mceRemoveTextcolor",s=>{QR(t,s)})},eM=t=>{const s="choiceitem",a={type:s,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return t?[a,{type:s,text:"Custom color",icon:"color-picker",value:"custom"}]:[a]},uA=(t,s,a,i)=>{a==="custom"?oM(t)(g=>{g.each(p=>{Q_(s,p),t.execCommand("mceApplyTextcolor",s,p),i(p)})},lA(t,s).getOr(sA)):a==="remove"?(i(""),t.execCommand("mceRemoveTextcolor",s)):(i(a),t.execCommand("mceApplyTextcolor",s,a))},dA=(t,s,a)=>t.concat(YR(s).concat(eM(a))),mA=(t,s,a)=>i=>{i(dA(t,s,a))},fA=(t,s,a)=>{const i=s==="forecolor"?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";t.setIconFill(i,a)},tM=(t,s,a,i,d)=>{t.ui.registry.addSplitButton(s,{tooltip:i,presets:"color",icon:s==="forecolor"?"text-color":"highlight-bg-color",select:g=>{const p=lA(t,a);return _r(p,g.toUpperCase())},columns:rA(t,a),fetch:mA(Fb(t,a),a,aA(t)),onAction:g=>{uA(t,a,d.get(),Q)},onItemAction:(g,p)=>{uA(t,a,p,w=>{d.set(w),xI(t,{name:s,color:w})})},onSetup:g=>{fA(g,s,d.get());const p=w=>{w.name===s&&fA(g,w.name,w.color)};return t.on("TextColorChange",p),()=>{t.off("TextColorChange",p)}}})},nM=(t,s,a,i)=>{t.ui.registry.addNestedMenuItem(s,{text:i,icon:s==="forecolor"?"text-color":"highlight-bg-color",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"colorswatch",initData:{storageKey:a},onAction:d=>{uA(t,a,d.value,Q)}}]})},oM=t=>(s,a)=>{let i=!1;const d=w=>{const A=w.getData().colorpicker;i?(s(_.from(A)),w.close()):t.windowManager.alert(t.translate(["Invalid hex color code: {0}",A]))},g=(w,T)=>{T.name==="hex-valid"&&(i=T.value)},p={colorpicker:a};t.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:p,onAction:g,onSubmit:d,onClose:Q,onCancel:()=>{s(_.none())}})},RI=t=>{DI(t);const s=cA(t),a=iA(t),i=V(s),d=V(a);tM(t,"forecolor","forecolor","Text color",i),tM(t,"backcolor","hilitecolor","Background color",d),nM(t,"forecolor","forecolor","Text color"),nM(t,"backcolor","hilitecolor","Background color")},gA=(t,s,a,i,d,g,p,w)=>{const T=Xv(s),D=MI(s,a,i,d!=="color"?"normal":"color",g,p,w);return XS(t,T,D,i,{menuType:d})},MI=(t,s,a,i,d,g,p)=>bs(Ie(t,w=>w.type==="choiceitem"?ax(w).fold(Mg,T=>_.some(hI(T,a===1,i,s,g(T.value),d,p,Xv(t)))):_.none())),fx=(t,s)=>{const a=Ob(s);return t===1?{mode:"menu",moveOnTab:!0}:t==="auto"?{mode:"grid",selector:"."+a.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+(s==="color"?"tox-swatches__row":"tox-collection__group"),previousSelector:d=>s==="color"?da(d.element,"[aria-checked=true]"):_.none()}},NI=(t,s)=>t===1?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:t==="auto"?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:s==="color"?".tox-swatches__row":".tox-collection__group",cell:s==="color"?`.${x_}`:`.${jv}`}},BI=(t,s)=>{const a=$I(t,s),i=s.colorinput.getColorCols(t.initData.storageKey),d="color",p={...gA(Yn("menu-value"),a,w=>{t.onAction({value:w})},i,d,ym.CLOSE_ON_EXECUTE,Le,s.shared.providers),markers:Ob(d),movement:fx(i,d)};return{type:"widget",data:{value:Yn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[IR.widget(qu.sketch(p))]}},$I=(t,s)=>{const a=t.initData.allowCustomColors&&s.colorinput.hasCustomColors();return t.initData.colors.fold(()=>dA(s.colorinput.getColors(t.initData.storageKey),t.initData.storageKey,a),i=>i.concat(eM(a)))},sM=Yn("cell-over"),hA=Yn("cell-execute"),PI=(t,s,a)=>{const i=p=>vo(p,sM,{row:t,col:s}),d=p=>vo(p,hA,{row:t,col:s}),g=(p,w)=>{w.stop(),d(p)};return Ci({dom:{tag:"div",attributes:{role:"button",["aria-labelledby"]:a}},behaviours:mn([fs("insert-table-picker-cell",[zt(Gd(),Ao.focus),zt(fl(),d),zt(Ap(),g),zt(hh(),g)]),Es.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Ao.config({onFocus:i})])})},FI=(t,s,a)=>{const i=[];for(let d=0;d<s;d++){const g=[];for(let p=0;p<a;p++)g.push(PI(d,p,t));i.push(g)}return i},II=(t,s,a,i,d)=>{for(let g=0;g<i;g++)for(let p=0;p<d;p++)Es.set(t[g][p],g<=s&&p<=a)},LI=t=>q(t,s=>Ie(s,vl)),rM=(t,s)=>Wa(`${s}x${t}`),aM={inserttable:t=>{const i=Yn("size-label"),d=FI(i,10,10),g=rM(0,0),p=xr({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:i}},components:[g],behaviours:mn([zo.config({})])});return{type:"widget",data:{value:Yn("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[IR.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:LI(d).concat(p.asSpec()),behaviours:mn([fs("insert-table-picker",[Ur(w=>{zo.set(p.get(w),[g])}),vh(sM,(w,T,A)=>{const{row:D,col:N}=A.event;II(d,D,N,10,10),zo.set(p.get(w),[rM(D+1,N+1)])}),vh(hA,(w,T,A)=>{const{row:D,col:N}=A.event;t.onAction({numRows:D+1,numColumns:N+1}),Ws(w,Dp())})]),ho.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:BI},HI=(t,s)=>qt(aM,t.fancytype).map(a=>a(t,s)),zI=(t,s,a,i=!0,d=!1)=>{const g=d?dI(a.icons):U_(a.icons),p=T=>({isEnabled:()=>!To.isDisabled(T),setEnabled:A=>To.set(T,!A)}),w=Aw({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:_.none(),ariaLabel:t.text,caret:_.some(g),checkMark:_.none(),shortcutContent:t.shortcut},a,i);return Tl({data:n0(t),getApi:p,enabled:t.enabled,onAction:Q,onSetup:t.onSetup,triggersSubmenu:!0,itemBehaviours:[]},w,s,a)},VI=(t,s,a,i=!0)=>{const d=p=>({isEnabled:()=>!To.isDisabled(p),setEnabled:w=>To.set(p,!w)}),g=Aw({presets:"normal",iconContent:t.icon,textContent:t.text,htmlContent:_.none(),ariaLabel:t.text,caret:_.none(),checkMark:_.none(),shortcutContent:t.shortcut},a,i);return Tl({data:n0(t),getApi:d,enabled:t.enabled,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a)},UI=t=>({type:"separator",dom:{tag:"div",classes:[jv,UD]},components:t.text.map(Wa).toArray()}),WI=(t,s,a,i=!0)=>{const d=p=>({setActive:w=>{Es.set(p,w)},isActive:()=>Es.isOn(p),isEnabled:()=>!To.isDisabled(p),setEnabled:w=>To.set(p,!w)}),g=Aw({iconContent:t.icon,textContent:t.text,htmlContent:_.none(),ariaLabel:t.text,checkMark:_.some(MR(a.icons)),caret:_.none(),shortcutContent:t.shortcut,presets:"normal",meta:t.meta},a,i);return vr(Tl({data:n0(t),enabled:t.enabled,getApi:d,onAction:t.onAction,onSetup:t.onSetup,triggersSubmenu:!1,itemBehaviours:[]},g,s,a),{toggling:{toggleClass:VD,toggleOnExecute:!1,selected:t.active}})},ZI=fI,gx=UI,cM=VI,iM=zI,jI=WI,lM=HI,GI=gI;var qI=Object.freeze({__proto__:null,getCoupled:(t,s,a,i)=>a.getOrCreate(t,s,i),getExistingCoupled:(t,s,a,i)=>a.getExisting(t,s,i)}),KI=[Mi("others",mh(Fo.value,oi()))],YI=Object.freeze({__proto__:null,init:()=>{const t={},s=(g,p)=>{if(Re(g.others).length===0)throw new Error("Cannot find any known coupled components");return qt(t,p)},a=(g,p,w)=>s(p,w).getOrThunk(()=>{const A=qt(p.others,w).getOrDie("No information found for coupled component: "+w)(g),D=g.getSystem().build(A);return t[w]=D,D}),i=(g,p,w)=>s(p,w).orThunk(()=>(qt(p.others,w).getOrDie("No information found for coupled component: "+w),_.none())),d=Y({});return Bi({readState:d,getExisting:i,getOrCreate:a})}});const ra=hc({fields:KI,name:"coupling",apis:qI,state:YI}),bA=t=>{let s=_.none(),a=[];const i=A=>bA(D=>{d(N=>{D(A(N))})}),d=A=>{p()?T(A):a.push(A)},g=A=>{p()||(s=_.some(A),w(a),a=[])},p=()=>s.isSome(),w=A=>{R(A,T)},T=A=>{s.each(D=>{setTimeout(()=>{A(D)},0)})};return t(g),{get:d,map:i,isReady:p}},hx={nu:bA,pure:t=>bA(s=>{s(t)})},vA=t=>{setTimeout(()=>{throw t},0)},lp=t=>{const s=T=>{t().then(T,vA)};return{map:T=>lp(()=>t().then(T)),bind:T=>lp(()=>t().then(A=>T(A).toPromise())),anonBind:T=>lp(()=>t().then(()=>T.toPromise())),toLazy:()=>hx.nu(s),toCached:()=>{let T=null;return lp(()=>(T===null&&(T=t()),T))},toPromise:t,get:s}},di={nu:t=>lp(()=>new Promise(t)),pure:t=>lp(()=>Promise.resolve(t))},px=Y("sink"),bx=Y(du({name:px(),overrides:Y({dom:{tag:"div"},behaviours:mn([li.config({useFixed:Me})]),events:dr([yh(Xm()),yh(Vc()),yh(Ap())])})})),Mw=(t,s)=>{const a=t.getHotspot(s).getOr(s),i="hotspot",d=t.getAnchorOverrides();return t.layouts.fold(()=>({type:i,hotspot:a,overrides:d}),g=>({type:i,hotspot:a,overrides:d,layouts:g}))},uM=(t,s,a)=>{const i=t.fetch;return i(a).map(s)},JI=(t,s,a,i,d,g,p)=>{const w=uM(t,s,i),T=dM(i,t);return w.map(A=>A.bind(D=>_.from(Ab.sketch({...g.menu(),uid:yd(""),data:D,highlightOnOpen:p,onOpenMenu:(N,U)=>{const W=T().getOrDie();li.position(W,U,{anchor:a}),ms.decloak(d)},onOpenSubmenu:(N,U,W)=>{const le=T().getOrDie();li.position(le,W,{anchor:{type:"submenu",item:U}}),ms.decloak(d)},onRepositionMenu:(N,U,W)=>{const le=T().getOrDie();li.position(le,U,{anchor:a}),R(W,pe=>{li.position(le,pe.triggeredMenu,{anchor:{type:"submenu",item:pe.triggeringItem}})})},onEscape:()=>(Ao.focus(i),ms.close(d),_.some(!0))}))))},vx=(t,s,a,i,d,g,p)=>{const w=Mw(t,a);return JI(t,s,w,a,i,d,p).map(A=>(A.fold(()=>{ms.isOpen(i)&&ms.close(i)},D=>{ms.cloak(i),ms.open(i,D),g(i)}),i))},QI=(t,s,a,i,d,g,p)=>(ms.close(i),di.pure(i)),yA=(t,s,a,i,d,g)=>{const p=ra.getCoupled(a,"sandbox");return(ms.isOpen(p)?QI:vx)(t,s,a,p,i,d,g)},e8=(t,s,a)=>{const i=ss.getCurrent(s).getOr(s),d=br(t.element);a?Vn(i.element,"min-width",d+"px"):Wi(i.element,d)},dM=(t,s)=>t.getSystem().getByUid(s.uid+"-"+px()).map(a=>()=>Fo.value(a)).getOrThunk(()=>s.lazySink.fold(()=>()=>Fo.error(new Error("No internal sink is specified, nor could an external sink be found")),a=>()=>a(t))),mM=t=>{ms.getState(t).each(s=>{Ab.repositionMenus(s)})},wA=(t,s,a)=>{const i=I1(),d=(w,T)=>{const A=Mw(t,s);i.link(s.element),t.matchWidth&&e8(A.hotspot,T,t.useMinWidth),t.onOpen(A,w,T),a!==void 0&&a.onOpen!==void 0&&a.onOpen(w,T)},g=(w,T)=>{i.unlink(s.element),a!==void 0&&a.onClose!==void 0&&a.onClose(w,T)},p=dM(s,t);return{dom:{tag:"div",classes:t.sandboxClasses,attributes:{id:i.id,role:"listbox"}},behaviours:Ll.augment(t.sandboxBehaviours,[En.config({store:{mode:"memory",initialValue:s}}),ms.config({onOpen:d,onClose:g,isPartOf:(w,T,A)=>sm(T,A)||sm(s,A),getAttachPoint:()=>p().getOrDie()}),ss.config({find:w=>ms.getState(w).bind(T=>ss.getCurrent(T))}),Pl.config({channels:{...Uh({isExtraPart:Le}),...bv({doReposition:mM})}})])}},fM=t=>{const s=ra.getCoupled(t,"sandbox");mM(s)},CA=()=>[Ke("sandboxClasses",[]),Ll.field("sandboxBehaviours",[ss,Pl,ms,En])],t8=Y([At("dom"),At("fetch"),ds("onOpen"),Yi("onExecute"),Ke("getHotspot",_.some),Ke("getAnchorOverrides",Y({})),ff(),Na("dropdownBehaviours",[Es,ra,ho,Ao]),At("toggleClass"),Ke("eventOrder",{}),Ns("lazySink"),Ke("matchWidth",!1),Ke("useMinWidth",!1),Ns("role")].concat(CA())),n8=Y([Wu({schema:[Wp(),Ke("fakeFocus",!1)],name:"menu",defaults:t=>({onExecute:t.onExecute})}),bx()]),o8=(t,s,a,i)=>{const d=D=>qt(t.dom,"attributes").bind(N=>qt(N,D)),g=D=>{ms.getState(D).each(N=>{Ab.highlightPrimary(N)})},p=(D,N,U)=>yA(t,Ot,D,i,N,U),w=D=>{p(D,g,sa.HighlightMenuAndItem).get(Q)},T={expand:D=>{Es.isOn(D)||p(D,Q,sa.HighlightNone).get(Q)},open:D=>{Es.isOn(D)||p(D,Q,sa.HighlightMenuAndItem).get(Q)},refetch:D=>ra.getExistingCoupled(D,"sandbox").fold(()=>p(D,Q,sa.HighlightMenuAndItem).map(Q),U=>vx(t,Ot,D,U,i,Q,sa.HighlightMenuAndItem).map(Q)),isOpen:Es.isOn,close:D=>{Es.isOn(D)&&p(D,Q,sa.HighlightMenuAndItem).get(Q)},repositionMenus:D=>{Es.isOn(D)&&fM(D)}},A=(D,N)=>(Xd(D),_.some(!0));return{uid:t.uid,dom:t.dom,components:s,behaviours:pc(t.dropdownBehaviours,[Es.config({toggleClass:t.toggleClass,aria:{mode:"expanded"}}),ra.config({others:{sandbox:D=>wA(t,D,{onOpen:()=>Es.on(D),onClose:()=>Es.off(D)})}}),ho.config({mode:"special",onSpace:A,onEnter:A,onDown:(D,N)=>{if(fu.isOpen(D)){const U=ra.getCoupled(D,"sandbox");g(U)}else fu.open(D);return _.some(!0)},onEscape:(D,N)=>fu.isOpen(D)?(fu.close(D),_.some(!0)):_.none()}),Ao.config({})]),events:DS(_.some(w)),eventOrder:{...t.eventOrder,[fl()]:["disabling","toggling","alloy.base.behaviour"]},apis:T,domModification:{attributes:{"aria-haspopup":"true",...t.role.fold(()=>({}),D=>({role:D})),...t.dom.tag==="button"?{type:d("type").getOr("button")}:{}}}}},fu=qc({name:"Dropdown",configFields:t8(),partFields:n8(),factory:o8,apis:{open:(t,s)=>t.open(s),refetch:(t,s)=>t.refetch(s),expand:(t,s)=>t.expand(s),close:(t,s)=>t.close(s),isOpen:(t,s)=>t.isOpen(s),repositionMenus:(t,s)=>t.repositionMenus(s)}}),s8=t=>{switch(t.searchMode){case"no-search":return{menuType:"normal"};default:return{menuType:"searchable",searchMode:t}}},r8=t=>{const s=En.getValue(t),a=Kv(t).map(wm);fu.refetch(s).get(()=>{const i=ra.getCoupled(s,"sandbox");a.each(d=>Kv(i).each(g=>JD(g,d)))})},Of=(t,s)=>{a8(t).each(a=>{E1(t,a.element,s.event.eventType,s.event.interactionEvent)})},a8=t=>ms.getState(t).bind(Vs.getHighlighted).bind(Vs.getHighlighted),c8=t=>Ki(t.element,KS)?_.some(t.element):da(t.element,"."+KS),yx=(t,s,a)=>{Cw(t).each(i=>{__(i,a),c8(s).each(g=>{$(g,"id").each(p=>ko(i.element,"aria-controls",p))})}),ko(a.element,"aria-selected","true")},Ga=(t,s,a)=>{ko(a.element,"aria-selected","false")},i8=t=>{Cw(t).each(s=>Ao.focus(s))},l8=t=>ra.getExistingCoupled(t,"sandbox").bind(Kv).map(wm).map(a=>a.fetchPattern).getOr("");var wx;(function(t){t[t.ContentFocus=0]="ContentFocus",t[t.UiFocus=1]="UiFocus"})(wx||(wx={}));const u8=(t,s,a,i,d)=>{const g=a.shared.providers,p=w=>d?{...w,shortcut:_.none(),icon:w.text.isSome()?_.none():w.icon}:w;switch(t.type){case"menuitem":return xR(t).fold(Mg,w=>_.some(cM(p(w),s,g,i)));case"nestedmenuitem":return TR(t).fold(Mg,w=>_.some(iM(p(w),s,g,i,d)));case"togglemenuitem":return oI(t).fold(Mg,w=>_.some(jI(p(w),s,g,i)));case"separator":return cR(t).fold(Mg,w=>_.some(gx(w)));case"fancymenuitem":return tI(t).fold(Mg,w=>lM(w,a));default:return console.error("Unknown item in general menu",t),_.none()}},d8=(t,s,a,i,d,g,p)=>{const w=i===1,T=!w||Xv(t);return bs(Ie(t,A=>{switch(A.type){case"separator":return Mb(A).fold(Mg,D=>_.some(gx(D)));case"cardmenuitem":return Q5(A).fold(Mg,D=>_.some(GI({...D,onAction:N=>{D.onAction(N),a(D.value,D.meta)}},d,g,{itemBehaviours:$R(D.meta,g),cardText:{matchText:s,highlightOn:p}})));case"autocompleteitem":default:return Z5(A).fold(Mg,D=>_.some(ZI(D,s,w,"normal",a,d,g,T)))}}))},gM=(t,s,a,i,d,g)=>{const p=Xv(s),w=bs(Ie(s,D=>{const N=W=>d?!Kn(W,"text"):p,U=W=>u8(W,a,i,N(W),d);return D.type==="nestedmenuitem"&&D.getSubmenuItems().length<=0?U({...D,enabled:!1}):U(D)})),T=s8(g);return(d?tR:XS)(t,p,w,1,T)},SA=t=>Ab.singleData(t.value,t),m8=(t,s,a,i)=>{const d=fx(s,i),g=Ob(i);return{data:SA({...t,movement:d,menuBehaviours:Bb.unnamedEvents(s!=="auto"?[]:[Ur((p,w)=>{I_(p,4,g.item).each(({numColumns:T,numRows:A})=>{ho.setGridSize(p,A,T)})})])}),menu:{markers:Ob(i),fakeFocus:a===wx.ContentFocus}}},f8=(t,s)=>zD(Lt.fromDom(s.startContainer)).map(a=>{const i=t.createRng();return i.selectNode(a.dom),i}),g8={register:(t,s)=>{const a=V(!1),i=V(!1),d=Ci(Jr.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:mn([fs("dismissAutocompleter",[zt(Yd(),()=>A())])]),lazySink:s.getSink})),g=()=>Jr.isOpen(d),p=i.get,w=()=>{g()&&Jr.hide(d)},T=()=>Jr.getContent(d).bind(le=>Qn(le.components(),0)),A=()=>t.execCommand("mceAutocompleterClose"),D=le=>{const pe=ao(le,nt=>_.from(nt.columns)).getOr(1);return q(le,nt=>{const $e=nt.items;return d8($e,nt.matchText,(rt,wn)=>{const lt=t.selection.getRng();f8(t.dom,lt).each(_n=>{const qn={hide:()=>A(),reload:Ln=>{w(),t.execCommand("mceAutocompleterReload",!1,{fetchOptions:Ln})}};a.set(!0),nt.onAction(qn,_n,rt,wn),a.set(!1)})},pe,ym.BUBBLE_TO_SANDBOX,s,nt.highlightOn)})},N=(le,pe)=>{k5(Lt.fromDom(t.getBody())).each(nt=>{const $e=ao(le,rt=>_.from(rt.columns)).getOr(1);Jr.showMenuAt(d,{anchor:{type:"node",root:Lt.fromDom(t.getBody()),node:_.from(nt)}},m8(XS("autocompleter-value",!0,pe,$e,{menuType:"normal"}),$e,wx.ContentFocus,"normal"))}),T().each(Vs.highlightFirst)},U=le=>{const pe=D(le);pe.length>0?N(le,pe):w()};t.on("AutocompleterStart",({lookupData:le})=>{i.set(!0),a.set(!1),U(le)}),t.on("AutocompleterUpdate",({lookupData:le})=>U(le)),t.on("AutocompleterEnd",()=>{w(),i.set(!1),a.set(!1)});const W={cancelIfNecessary:A,isMenuOpen:g,isActive:p,isProcessingAction:a.get,getMenu:T};T5.setup(W,t)}},Nw=(t,s,a)=>$l(t,s,a).isSome(),hM=(t,s)=>{let a=null;return{cancel:()=>{a!==null&&(clearTimeout(a),a=null)},schedule:(...g)=>{a=setTimeout(()=>{t.apply(null,g),a=null},s)}}},pM=5,h8=400,bM=t=>{const s=t.raw;return s.touches===void 0||s.touches.length!==1?_.none():_.some(s.touches[0])},p8=(t,s)=>{const a=Math.abs(t.clientX-s.x),i=Math.abs(t.clientY-s.y);return a>pM||i>pM},b8=t=>{const s=Wr(),a=V(!1),i=hM(A=>{t.triggerEvent(w1(),A),a.set(!0)},h8),d=A=>(bM(A).each(D=>{i.cancel();const N={x:D.clientX,y:D.clientY,target:A.target};i.schedule(A),a.set(!1),s.set(N)}),_.none()),g=A=>(i.cancel(),bM(A).each(D=>{s.on(N=>{p8(D,N)&&s.clear()})}),_.none()),p=A=>{i.cancel();const D=N=>Us(N.target,A.target);return s.get().filter(D).map(N=>a.get()?(A.prevent(),!1):t.triggerEvent(hh(),A))},w=nr([{key:or(),value:d},{key:Ua(),value:g},{key:zc(),value:p}]);return{fireIfReady:(A,D)=>qt(w,D).bind(N=>N(A))}},v8=t=>t.raw.which===PE[0]&&!nn(["input","textarea"],qo(t.target))&&!Nw(t.target,'[contenteditable="true"]'),y8=(t,s)=>{const a={stopBackspace:!0,...s},i=["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"],d=b8(a),g=Ie(i.concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),W=>ii(t,W,le=>{d.fireIfReady(le,W).each(nt=>{nt&&le.kill()}),a.triggerEvent(W,le)&&le.kill()})),p=Wr(),w=ii(t,"paste",W=>{d.fireIfReady(W,"paste").each(pe=>{pe&&W.kill()}),a.triggerEvent("paste",W)&&W.kill(),p.set(setTimeout(()=>{a.triggerEvent(P0(),W)},0))}),T=ii(t,"keydown",W=>{a.triggerEvent("keydown",W)?W.kill():a.stopBackspace&&v8(W)&&W.prevent()}),A=ii(t,"focusin",W=>{a.triggerEvent("focusin",W)&&W.kill()}),D=Wr(),N=ii(t,"focusout",W=>{a.triggerEvent("focusout",W)&&W.kill(),D.set(setTimeout(()=>{a.triggerEvent(Op(),W)},0))});return{unbind:()=>{R(g,W=>{W.unbind()}),T.unbind(),A.unbind(),N.unbind(),w.unbind(),p.on(clearTimeout),D.on(clearTimeout)}}},vM=(t,s)=>{const a=qt(t,"target").getOr(s);return V(a)},w8=(t,s)=>{const a=V(!1),i=V(!1);return{stop:()=>{a.set(!0)},cut:()=>{i.set(!0)},isStopped:a.get,isCut:i.get,event:t,setSource:s.set,getSource:s.get}},C8=t=>{const s=V(!1);return{stop:()=>{s.set(!0)},cut:Q,isStopped:s.get,isCut:Le,event:t,setSource:ee("Cannot set source of a broadcasted event"),getSource:ee("Cannot get source of a broadcasted event")}},Bw=mt.generate([{stopped:[]},{resume:["element"]},{complete:[]}]),yM=(t,s,a,i,d,g)=>{const p=t(s,i),w=w8(a,d);return p.fold(()=>(g.logEventNoHandlers(s,i),Bw.complete()),T=>{const A=T.descHandler;return og(A)(w),w.isStopped()?(g.logEventStopped(s,T.element,A.purpose),Bw.stopped()):w.isCut()?(g.logEventCut(s,T.element,A.purpose),Bw.complete()):aa(T.element).fold(()=>(g.logNoParent(s,T.element,A.purpose),Bw.complete()),N=>(g.logEventResponse(s,T.element,A.purpose),Bw.resume(N)))})},xA=(t,s,a,i,d,g)=>yM(t,s,a,i,d,g).fold(Me,p=>xA(t,s,a,p,d,g),Le),S8=(t,s,a,i,d)=>{const g=vM(a,i);return yM(t,s,a,i,g,d)},x8=(t,s,a)=>{const i=C8(s);return R(t,d=>{const g=d.descHandler;og(g)(i)}),i.isStopped()},k8=(t,s,a,i)=>kA(t,s,a,a.target,i),kA=(t,s,a,i,d)=>{const g=vM(a,i);return xA(t,s,a,i,g,d)},T8=(t,s)=>({element:t,descHandler:s}),E8=(t,s)=>({id:t,descHandler:s}),_8=()=>{const t={},s=(p,w,T)=>{Bt(T,(A,D)=>{const N=t[D]!==void 0?t[D]:{};N[w]=Fp(A,p),t[D]=N})},a=(p,w)=>tg(w).bind(T=>qt(p,T)).map(T=>T8(w,T));return{registerId:s,unregisterId:p=>{Bt(t,(w,T)=>{Kn(w,p)&&delete w[p]})},filterByType:p=>qt(t,p).map(w=>ze(w,(T,A)=>E8(A,T))).getOr([]),find:(p,w,T)=>qt(t,w).bind(A=>pd(T,D=>a(A,D),p))}},wM=()=>{const t=_8(),s={},a=A=>{const D=A.element;return tg(D).getOrThunk(()=>O1("uid-",A.element))},i=(A,D)=>{const N=s[D];if(N===A)g(A);else throw new Error('The tagId "'+D+'" is already used by: '+ef(N.element)+`
Cannot use it for: `+ef(A.element)+`
The conflicting element is`+(Kr(N.element)?" ":" not ")+"already in the DOM")},d=A=>{const D=a(A);Ts(s,D)&&i(A,D);const N=[A];t.registerId(N,D,A.events),s[D]=A},g=A=>{tg(A.element).each(D=>{delete s[D],t.unregisterId(D)})};return{find:(A,D,N)=>t.find(A,D,N),filter:A=>t.filterByType(A),register:d,unregister:g,getById:A=>qt(s,A)}},Sm=zl({name:"Container",factory:t=>{const{attributes:s,...a}=t.dom;return{uid:t.uid,dom:{tag:"div",attributes:{role:"presentation",...s},...a},components:t.components,behaviours:Tg(t.containerBehaviours),events:t.events,domModification:t.domModification,eventOrder:t.eventOrder}},configFields:[Ke("components",[]),Na("containerBehaviours",[]),Ke("events",{}),Ke("domModification",{}),Ke("eventOrder",{})]}),CM=t=>{const s=$e=>aa(t.element).fold(Me,rt=>Us($e,rt)),a=wM(),i=($e,rt)=>a.find(s,$e,rt),d=y8(t.element,{triggerEvent:($e,rt)=>Rh($e,rt.target,wn=>k8(i,$e,rt,wn))}),g={debugInfo:Y("real"),triggerEvent:($e,rt,wn)=>{Rh($e,rt,lt=>kA(i,$e,wn,rt,lt))},triggerFocus:($e,rt)=>{tg($e).fold(()=>{im($e)},wn=>{Rh(Kd(),$e,lt=>(S8(i,Kd(),{originator:rt,kill:Q,prevent:Q,target:$e},$e,lt),!1))})},triggerEscape:($e,rt)=>{g.triggerEvent("keydown",$e.element,rt.event)},getByUid:$e=>pe($e),getByDom:$e=>nt($e),build:Ci,buildOrPatch:P1,addToGui:$e=>{T($e)},removeFromGui:$e=>{A($e)},addToWorld:$e=>{p($e)},removeFromWorld:$e=>{w($e)},broadcast:$e=>{U($e)},broadcastOn:($e,rt)=>{W($e,rt)},broadcastEvent:($e,rt)=>{le($e,rt)},isConnected:Me},p=$e=>{$e.connect(g),Lr($e.element)||(a.register($e),R($e.components(),p),g.triggerEvent(C1(),$e.element,{target:$e.element}))},w=$e=>{Lr($e.element)||(R($e.components(),w),a.unregister($e)),$e.disconnect()},T=$e=>{Rc(t,$e)},A=$e=>{Mc($e)},D=()=>{d.unbind(),Ql(t.element)},N=$e=>{const rt=a.filter(au());R(rt,wn=>{const lt=wn.descHandler;og(lt)($e)})},U=$e=>{N({universal:!0,data:$e})},W=($e,rt)=>{N({universal:!1,channels:$e,data:rt})},le=($e,rt)=>{const wn=a.filter($e);return x8(wn,rt)},pe=$e=>a.getById($e).fold(()=>Fo.error(new Error('Could not find component with uid: "'+$e+'" in system.')),Fo.value),nt=$e=>{const rt=tg($e).getOr("not found");return pe(rt)};return p(t),{root:t,element:t.element,destroy:D,add:T,remove:A,getByUid:pe,getByDom:nt,addToWorld:p,removeFromWorld:w,broadcast:U,broadcastOn:W,broadcastEvent:le}},A8=(t,s)=>({dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ie(t.items,s.interpreter)}),SM=Y([Ke("prefix","form-field"),Na("fieldBehaviours",[ss,En])]),O8=Y([du({schema:[At("dom")],name:"label"}),du({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[At("text")],name:"aria-descriptor"}),Gc({factory:{sketch:t=>{const s=ur(t,["factory"]);return t.factory.sketch(s)}},schema:[At("factory")],name:"field"})]),xM=(t,s,a,i)=>{const d=pc(t.fieldBehaviours,[ss.config({find:w=>cr(w,t,"field")}),En.config({store:{mode:"manual",getValue:w=>ss.getCurrent(w).bind(En.getValue),setValue:(w,T)=>{ss.getCurrent(w).each(A=>{En.setValue(A,T)})}}})]),g=dr([Ur((w,T)=>{const A=Cf(w,t,["label","field","aria-descriptor"]);A.field().each(D=>{const N=Yn(t.prefix);A.label().each(U=>{ko(U.element,"for",N),ko(D.element,"id",N)}),A["aria-descriptor"]().each(U=>{const W=Yn(t.prefix);ko(U.element,"id",W),ko(D.element,"aria-describedby",W)})})})]),p={getField:w=>cr(w,t,"field"),getLabel:w=>cr(w,t,"label")};return{uid:t.uid,dom:t.dom,components:s,behaviours:d,events:g,apis:p}},Zs=qc({name:"FormField",configFields:SM(),partFields:O8(),factory:xM,apis:{getField:(t,s)=>t.getField(s),getLabel:(t,s)=>t.getLabel(s)}});var R8=Object.freeze({__proto__:null,exhibit:(t,s)=>iu({attributes:nr([{key:s.tabAttr,value:"true"}])})}),M8=[Ke("tabAttr","data-alloy-tabstop")];const Ta=hc({fields:M8,name:"tabstopping",active:R8});var N8=tinymce.util.Tools.resolve("tinymce.html.Entities");const $w=(t,s,a,i)=>{const d=$8(t,s,a,i);return Zs.sketch(d)},B8=(t,s)=>$w(t,s,[],[]),$8=(t,s,a,i)=>({dom:kM(a),components:t.toArray().concat([s]),fieldBehaviours:mn(i)}),P8=()=>kM([]),kM=t=>({tag:"div",classes:["tox-form__group"].concat(t)}),up=(t,s)=>Zs.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Wa(s.translate(t))]}),Zl=Yn("form-component-change"),Pw=Yn("form-close"),dp=Yn("form-cancel"),$g=Yn("form-action"),Fw=Yn("form-submit"),TA=Yn("form-block"),EA=Yn("form-unblock"),TM=Yn("form-tabchange"),Cx=Yn("form-resize"),F8=(t,s,a)=>{const i=t.label.map(N=>up(N,s)),d=N=>(U,W)=>{$l(W.event.target,"[data-collection-item-value]").each(le=>{N(U,W,le,ar(le,"data-collection-item-value"))})},g=(N,U)=>{const W=Ie(U,nt=>{const $e=Rd.translate(nt.text),rt=t.columns===1?`<div class="tox-collection__item-label">${$e}</div>`:"",wn=`<div class="tox-collection__item-icon">${nt.icon}</div>`,lt={_:" "," - ":" ","-":" "},_n=$e.replace(/\_| \- |\-/g,Ln=>lt[Ln]);return`<div class="tox-collection__item${s.isDisabled()?" tox-collection__item--state-disabled":""}" tabindex="-1" data-collection-item-value="${N8.encodeAllRaw(nt.value)}" title="${_n}" aria-label="${_n}">${wn}${rt}</div>`}),le=t.columns!=="auto"&&t.columns>1?kt(W,t.columns):[W],pe=Ie(le,nt=>`<div class="tox-collection__group">${nt.join("")}</div>`);Qm(N.element,pe.join(""))},p=d((N,U,W,le)=>{U.stop(),s.isDisabled()||vo(N,$g,{name:t.name,value:le})}),w=[zt(Gd(),d((N,U,W)=>{im(W)})),zt(Ap(),p),zt(hh(),p),zt(Ym(),d((N,U,W)=>{da(N.element,"."+ww).each(le=>{ua(le,ww)}),Sa(W,ww)})),zt(sT(),d(N=>{da(N.element,"."+ww).each(U=>{ua(U,ww)})})),gl(d((N,U,W,le)=>{vo(N,$g,{name:t.name,value:le})}))],T=(N,U)=>Ie(jc(N.element,".tox-collection__item"),U),A=Zs.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(t.columns!==1?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:Ot},behaviours:mn([To.config({disabled:s.isDisabled,onDisabled:N=>{T(N,U=>{Sa(U,"tox-collection__item--state-disabled"),ko(U,"aria-disabled",!0)})},onEnabled:N=>{T(N,U=>{ua(U,"tox-collection__item--state-disabled"),de(U,"aria-disabled")})}}),ka(),zo.config({}),En.config({store:{mode:"memory",initialValue:a.getOr([])},onSetValue:(N,U)=>{g(N,U),t.columns==="auto"&&I_(N,5,"tox-collection__item").each(({numRows:W,numColumns:le})=>{ho.setGridSize(N,W,le)}),Ws(N,Cx)}}),Ta.config({}),ho.config(NI(t.columns,"normal")),fs("collection-events",w)]),eventOrder:{[fl()]:["disabling","alloy.base.behaviour","collection-events"]}});return $w(i,A,["tox-form__group--collection"],[])},I8=["input","textarea"],EM=t=>{const s=qo(t);return nn(I8,s)},_M=(t,s)=>{const a=s.getRoot(t).getOr(t.element);ua(a,s.invalidClass),s.notify.each(i=>{EM(t.element)&&ko(t.element,"aria-invalid",!1),i.getContainer(t).each(d=>{Qm(d,i.validHtml)}),i.onValid(t)})},AM=(t,s,a,i)=>{const d=s.getRoot(t).getOr(t.element);Sa(d,s.invalidClass),s.notify.each(g=>{EM(t.element)&&ko(t.element,"aria-invalid",!0),g.getContainer(t).each(p=>{Qm(p,i)}),g.onInvalid(t,i)})},OM=(t,s,a)=>s.validator.fold(()=>di.pure(Fo.value(!0)),i=>i.validate(t)),s0=(t,s,a)=>(s.notify.each(i=>{i.onValidate(t)}),OM(t,s).map(i=>t.getSystem().isConnected()?i.fold(d=>(AM(t,s,a,d),Fo.error(d)),d=>(_M(t,s),Fo.value(d))):Fo.error("No longer in system")));var Sx=Object.freeze({__proto__:null,markValid:_M,markInvalid:AM,query:OM,run:s0,isInvalid:(t,s)=>{const a=s.getRoot(t).getOr(t.element);return Ki(a,s.invalidClass)}}),L8=Object.freeze({__proto__:null,events:(t,s)=>t.validator.map(a=>dr([zt(a.onEvent,i=>{s0(i,t,s).get(Ot)})].concat(a.validateOnLoad?[Ur(i=>{s0(i,t,s).get(Q)})]:[]))).getOr({})}),H8=[At("invalidClass"),Ke("getRoot",_.none),vi("notify",[Ke("aria","alert"),Ke("getContainer",_.none),Ke("validHtml",""),ds("onValid"),ds("onInvalid"),ds("onValidate")]),vi("validator",[At("validate"),Ke("onEvent","input"),Ke("validateOnLoad",!0)])];const Df=hc({fields:H8,name:"invalidating",active:L8,apis:Sx,extra:{validation:t=>s=>{const a=En.getValue(s);return di.pure(t(a))}}});var r0=Object.freeze({__proto__:null,events:()=>dr([PC(y1(),Me)]),exhibit:()=>iu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})});const a0=hc({fields:[],name:"unselecting",active:r0}),DM=(t,s)=>fu.sketch({dom:t.dom,components:t.components,toggleClass:"mce-active",dropdownBehaviours:mn([Ul.button(s.providers.isDisabled),ka(),a0.config({}),Ta.config({})]),layouts:t.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:s.getSink,fetch:a=>di.nu(i=>t.fetch(i)).map(i=>_.from(SA(vr(gA(Yn("menu-value"),i,d=>{t.onItemAction(a,d)},t.columns,t.presets,ym.CLOSE_ON_EXECUTE,Le,s.providers),{movement:fx(t.columns,t.presets)})))),parts:{menu:Gv(!1,1,t.presets)}}),RM=Yn("color-input-change"),MM=Yn("color-swatch-change"),NM=Yn("color-picker-cancel"),z8=(t,s,a,i)=>{const d=Zs.parts.field({factory:qv,inputClasses:["tox-textfield"],data:i,onSetValue:A=>Df.run(A).get(Q),inputBehaviours:mn([To.config({disabled:s.providers.isDisabled}),ka(),Ta.config({}),Df.config({invalidClass:"tox-textbox-field-invalid",getRoot:A=>Ai(A.element),notify:{onValid:A=>{const D=En.getValue(A);vo(A,RM,{color:D})}},validator:{validateOnLoad:!1,validate:A=>{const D=En.getValue(A);if(D.length===0)return di.pure(Fo.value(!0));{const N=Lt.fromTag("span");Vn(N,"background-color",D);const U=tr(N,"background-color").fold(()=>Fo.error("blah"),W=>Fo.value(D));return di.pure(U)}}}})]),selectOnFocus:!1}),g=t.label.map(A=>up(A,s.providers)),p=(A,D)=>{vo(A,MM,{value:D})},w=(A,D)=>{T.getOpt(A).each(N=>{D==="custom"?a.colorPicker(U=>{U.fold(()=>Ws(N,NM),W=>{p(N,W),Q_(t.storageKey,W)})},"#ffffff"):D==="remove"?p(N,""):p(N,D)})},T=xr(DM({dom:{tag:"span",attributes:{"aria-label":s.providers.translate("Color swatch")}},layouts:{onRtl:()=>[Oc,Ac,Za],onLtr:()=>[Ac,Oc,Za]},components:[],fetch:mA(a.getColors(t.storageKey),t.storageKey,a.hasCustomColors()),columns:a.getColorCols(t.storageKey),presets:"color",onItemAction:w},s));return Zs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:g.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[d,T.asSpec()]}]),fieldBehaviours:mn([fs("form-field-events",[zt(RM,(A,D)=>{T.getOpt(A).each(N=>{Vn(N.element,"background-color",D.event.color)}),vo(A,Zl,{name:t.name})}),zt(MM,(A,D)=>{Zs.getField(A).each(N=>{En.setValue(N,D.event.value),ss.getCurrent(A).each(Ao.focus)})}),zt(NM,(A,D)=>{Zs.getField(A).each(N=>{ss.getCurrent(A).each(Ao.focus)})})])])})},V8=du({schema:[At("dom")],name:"label"}),mp=t=>du({name:""+t+"-edge",overrides:s=>s.model.manager.edgeActions[t].fold(()=>({}),i=>({events:dr([vd(or(),(d,g,p)=>i(d,p),[s]),vd(Vc(),(d,g,p)=>i(d,p),[s]),vd(Ni(),(d,g,p)=>{p.mouseIsDown.get()&&i(d,p)},[s])])}))}),U8=mp("top-left"),W8=mp("top"),Z8=mp("top-right"),j8=mp("right"),G8=mp("bottom-right"),BM=mp("bottom"),c0=mp("bottom-left"),Ib=mp("left"),q8=Gc({name:"thumb",defaults:Y({dom:{styles:{position:"absolute"}}}),overrides:t=>({events:dr([eg(or(),t,"spectrum"),eg(Ua(),t,"spectrum"),eg(zc(),t,"spectrum"),eg(Vc(),t,"spectrum"),eg(Ni(),t,"spectrum"),eg(Ep(),t,"spectrum")])})}),$M=Gc({schema:[Ec("mouseIsDown",()=>V(!1))],name:"spectrum",overrides:t=>{const a=t.model.manager,i=(d,g)=>a.getValueFromEvent(g).map(p=>a.setValueFrom(d,t,p));return{behaviours:mn([ho.config({mode:"special",onLeft:d=>a.onLeft(d,t),onRight:d=>a.onRight(d,t),onUp:d=>a.onUp(d,t),onDown:d=>a.onDown(d,t)}),Ao.config({})]),events:dr([zt(or(),i),zt(Ua(),i),zt(Vc(),i),zt(Ni(),(d,g)=>{t.mouseIsDown.get()&&i(d,g)})])}}});var PM=[V8,Ib,j8,W8,BM,U8,Z8,c0,G8,q8,$M];const Iw=Y("slider.change.value"),Lw=t=>t.type.indexOf("touch")!==-1,Lb=t=>{const s=t.event.raw;if(Lw(s)){const a=s;return a.touches!==void 0&&a.touches.length===1?_.some(a.touches[0]).map(i=>Yo(i.clientX,i.clientY)):_.none()}else{const a=s;return a.clientX!==void 0?_.some(a).map(i=>Yo(i.clientX,i.clientY)):_.none()}},K8="top",Y8="right",X8="bottom",J8="left",Hb=t=>t.model.minX,zb=t=>t.model.minY,Vb=t=>t.model.minX-1,xx=t=>t.model.minY-1,Ub=t=>t.model.maxX,Wb=t=>t.model.maxY,Hw=t=>t.model.maxX+1,kx=t=>t.model.maxY+1,FM=(t,s,a)=>s(t)-a(t),OA=t=>FM(t,Ub,Hb),DA=t=>FM(t,Wb,zb),IM=t=>OA(t)/2,RA=t=>DA(t)/2,i0=t=>t.stepSize,LM=t=>t.snapToGrid,HM=t=>t.snapStart,zM=t=>t.rounded,Tx=(t,s)=>t[s+"-edge"]!==void 0,MA=t=>Tx(t,J8),NA=t=>Tx(t,Y8),VM=t=>Tx(t,K8),UM=t=>Tx(t,X8),Pg=t=>t.model.value.get(),Fg=(t,s)=>({x:t,y:s}),ol=(t,s)=>{vo(t,Iw(),{value:s})},Q8=(t,s)=>{ol(t,Fg(Vb(s),xx(s)))},e6=(t,s)=>{ol(t,xx(s))},t6=(t,s)=>{ol(t,Fg(IM(s),xx(s)))},Ex=(t,s)=>{ol(t,Fg(Hw(s),xx(s)))},Xu=(t,s)=>{ol(t,Hw(s))},BA=(t,s)=>{ol(t,Fg(Hw(s),RA(s)))},WM=(t,s)=>{ol(t,Fg(Hw(s),kx(s)))},n6=(t,s)=>{ol(t,kx(s))},o6=(t,s)=>{ol(t,Fg(IM(s),kx(s)))},s6=(t,s)=>{ol(t,Fg(Vb(s),kx(s)))},r6=(t,s)=>{ol(t,Vb(s))},ZM=(t,s)=>{ol(t,Fg(Vb(s),RA(s)))},_x=(t,s,a,i)=>t<s?t:t>a?a:t===s?s-1:Math.max(s,t-i),$A=(t,s,a,i)=>t>a?t:t<s?s:t===a?a+1:Math.min(a,t+i),jM=(t,s,a)=>Math.max(s,Math.min(a,t)),GM=(t,s,a,i,d)=>d.fold(()=>{const g=t-s,p=Math.round(g/i)*i;return jM(s+p,s-1,a+1)},g=>{const p=(t-g)%i,w=Math.round(p/i),T=Math.floor((t-g)/i),A=Math.floor((a-g)/i),D=Math.min(A,T+w),N=g+D*i;return Math.max(g,N)}),a6=(t,s,a)=>Math.min(a,Math.max(t,s))-s,PA=t=>{const{min:s,max:a,range:i,value:d,step:g,snap:p,snapStart:w,rounded:T,hasMinEdge:A,hasMaxEdge:D,minBound:N,maxBound:U,screenRange:W}=t,le=A?s-1:s,pe=D?a+1:a;if(d<N)return le;if(d>U)return pe;{const nt=a6(d,N,U),$e=jM(nt/W*i+s,le,pe);return p&&$e>=s&&$e<=a?GM($e,s,a,g,w):T?Math.round($e):$e}},FA=t=>{const{min:s,max:a,range:i,value:d,hasMinEdge:g,hasMaxEdge:p,maxBound:w,maxOffset:T,centerMinEdge:A,centerMaxEdge:D}=t;return d<s?g?0:A:d>a?p?w:D:(d-s)/i*T},Ax="top",qM="right",KM="bottom",IA="left",c6="width",i6="height",Rf=t=>t.element.dom.getBoundingClientRect(),gu=(t,s)=>t[s],Ox=t=>{const s=Rf(t);return gu(s,IA)},LA=t=>{const s=Rf(t);return gu(s,qM)},Dx=t=>{const s=Rf(t);return gu(s,Ax)},YM=t=>{const s=Rf(t);return gu(s,KM)},XM=t=>{const s=Rf(t);return gu(s,c6)},JM=t=>{const s=Rf(t);return gu(s,i6)},QM=(t,s,a)=>(t+s)/2-a,eN=(t,s)=>{const a=Rf(t),i=Rf(s),d=gu(a,IA),g=gu(a,qM),p=gu(i,IA);return QM(d,g,p)},tN=(t,s)=>{const a=Rf(t),i=Rf(s),d=gu(a,Ax),g=gu(a,KM),p=gu(i,Ax);return QM(d,g,p)},zw=(t,s)=>{vo(t,Iw(),{value:s})},Rx=(t,s,a)=>{const i={min:Hb(s),max:Ub(s),range:OA(s),value:a,step:i0(s),snap:LM(s),snapStart:HM(s),rounded:zM(s),hasMinEdge:MA(s),hasMaxEdge:NA(s),minBound:Ox(t),maxBound:LA(t),screenRange:XM(t)};return PA(i)},l6=(t,s,a)=>{const i=Rx(t,s,a);return zw(t,i),i},u6=(t,s)=>{const a=Hb(s);zw(t,a)},d6=(t,s)=>{const a=Ub(s);zw(t,a)},m6=(t,s,a)=>{const d=(t>0?$A:_x)(Pg(a),Hb(a),Ub(a),i0(a));return zw(s,d),_.some(d)},nN=t=>(s,a)=>m6(t,s,a).map(Me),oN=t=>Lb(t).map(a=>a.left),sN=(t,s,a,i,d)=>{const p=XM(t),w=i.bind(D=>_.some(eN(D,t))).getOr(0),T=d.bind(D=>_.some(eN(D,t))).getOr(p),A={min:Hb(s),max:Ub(s),range:OA(s),value:a,hasMinEdge:MA(s),hasMaxEdge:NA(s),minBound:Ox(t),minOffset:0,maxBound:LA(t),maxOffset:p,centerMinEdge:w,centerMaxEdge:T};return FA(A)},Mx=(t,s,a,i,d,g)=>{const p=sN(s,g,a,i,d);return Ox(s)-Ox(t)+p},HA=(t,s,a,i)=>{const d=Pg(a),g=Mx(t,i.getSpectrum(t),d,i.getLeftEdge(t),i.getRightEdge(t),a),p=br(s.element)/2;Vn(s.element,"left",g-p+"px")},f6=nN(-1),rN=nN(1),g6=_.none,h6=_.none,p6={"top-left":_.none(),top:_.none(),"top-right":_.none(),right:_.some(Xu),"bottom-right":_.none(),bottom:_.none(),"bottom-left":_.none(),left:_.some(r6)};var b6=Object.freeze({__proto__:null,setValueFrom:l6,setToMin:u6,setToMax:d6,findValueOfOffset:Rx,getValueFromEvent:oN,findPositionOfValue:Mx,setPositionFromValue:HA,onLeft:f6,onRight:rN,onUp:g6,onDown:h6,edgeActions:p6});const l0=(t,s)=>{vo(t,Iw(),{value:s})},xm=(t,s,a)=>{const i={min:zb(s),max:Wb(s),range:DA(s),value:a,step:i0(s),snap:LM(s),snapStart:HM(s),rounded:zM(s),hasMinEdge:VM(s),hasMaxEdge:UM(s),minBound:Dx(t),maxBound:YM(t),screenRange:JM(t)};return PA(i)},v6=(t,s,a)=>{const i=xm(t,s,a);return l0(t,i),i},Vw=(t,s)=>{const a=zb(s);l0(t,a)},y6=(t,s)=>{const a=Wb(s);l0(t,a)},zA=(t,s,a)=>{const d=(t>0?$A:_x)(Pg(a),zb(a),Wb(a),i0(a));return l0(s,d),_.some(d)},aN=t=>(s,a)=>zA(t,s,a).map(Me),w6=t=>Lb(t).map(a=>a.top),C6=(t,s,a,i,d)=>{const p=JM(t),w=i.bind(D=>_.some(tN(D,t))).getOr(0),T=d.bind(D=>_.some(tN(D,t))).getOr(p),A={min:zb(s),max:Wb(s),range:DA(s),value:a,hasMinEdge:VM(s),hasMaxEdge:UM(s),minBound:Dx(t),minOffset:0,maxBound:YM(t),maxOffset:p,centerMinEdge:w,centerMaxEdge:T};return FA(A)},Nx=(t,s,a,i,d,g)=>{const p=C6(s,g,a,i,d);return Dx(s)-Dx(t)+p},S6=(t,s,a,i)=>{const d=Pg(a),g=Nx(t,i.getSpectrum(t),d,i.getTopEdge(t),i.getBottomEdge(t),a),p=dt(s.element)/2;Vn(s.element,"top",g-p+"px")},VA=_.none,UA=_.none,WA=aN(-1),x6=aN(1),hu={"top-left":_.none(),top:_.some(e6),"top-right":_.none(),right:_.none(),"bottom-right":_.none(),bottom:_.some(n6),"bottom-left":_.none(),left:_.none()};var k6=Object.freeze({__proto__:null,setValueFrom:v6,setToMin:Vw,setToMax:y6,findValueOfOffset:xm,getValueFromEvent:w6,findPositionOfValue:Nx,setPositionFromValue:S6,onLeft:VA,onRight:UA,onUp:WA,onDown:x6,edgeActions:hu});const Bx=(t,s)=>{vo(t,Iw(),{value:s})},Uw=(t,s)=>({x:t,y:s}),cN=(t,s,a)=>{const i=Rx(t,s,a.left),d=xm(t,s,a.top),g=Uw(i,d);return Bx(t,g),g},T6=(t,s,a,i)=>{const d=t>0?$A:_x,g=s?Pg(i).x:d(Pg(i).x,Hb(i),Ub(i),i0(i)),p=s?d(Pg(i).y,zb(i),Wb(i),i0(i)):Pg(i).y;return Bx(a,Uw(g,p)),_.some(g)},$x=(t,s)=>(a,i)=>T6(t,s,a,i).map(Me),E6=(t,s)=>{const a=Hb(s),i=zb(s);Bx(t,Uw(a,i))},_6=(t,s)=>{const a=Ub(s),i=Wb(s);Bx(t,Uw(a,i))},A6=t=>Lb(t),O6=(t,s,a,i)=>{const d=Pg(a),g=Mx(t,i.getSpectrum(t),d.x,i.getLeftEdge(t),i.getRightEdge(t),a),p=Nx(t,i.getSpectrum(t),d.y,i.getTopEdge(t),i.getBottomEdge(t),a),w=br(s.element)/2,T=dt(s.element)/2;Vn(s.element,"left",g-w+"px"),Vn(s.element,"top",p-T+"px")},D6=$x(-1,!1),iN=$x(1,!1),R6=$x(-1,!0),M6=$x(1,!0),N6={"top-left":_.some(Q8),top:_.some(t6),"top-right":_.some(Ex),right:_.some(BA),"bottom-right":_.some(WM),bottom:_.some(o6),"bottom-left":_.some(s6),left:_.some(ZM)};var lN=Object.freeze({__proto__:null,setValueFrom:cN,setToMin:E6,setToMax:_6,getValueFromEvent:A6,setPositionFromValue:O6,onLeft:D6,onRight:iN,onUp:R6,onDown:M6,edgeActions:N6});const ZA=[Ke("stepSize",1),Ke("onChange",Q),Ke("onChoose",Q),Ke("onInit",Q),Ke("onDragStart",Q),Ke("onDragEnd",Q),Ke("snapToGrid",!1),Ke("rounded",!0),Ns("snapStart"),Mi("model",pi("mode",{x:[Ke("minX",0),Ke("maxX",100),Ec("value",t=>V(t.mode.minX)),At("getInitialValue"),wr("manager",b6)],y:[Ke("minY",0),Ke("maxY",100),Ec("value",t=>V(t.mode.minY)),At("getInitialValue"),wr("manager",k6)],xy:[Ke("minX",0),Ke("maxX",100),Ke("minY",0),Ke("maxY",100),Ec("value",t=>V({x:t.mode.minX,y:t.mode.minY})),At("getInitialValue"),wr("manager",lN)]})),Na("sliderBehaviours",[ho,En]),Ec("mouseIsDown",()=>V(!1))],pu=qc({name:"Slider",configFields:ZA,partFields:PM,factory:(t,s,a,i)=>{const d=lt=>Zn(lt,t,"thumb"),g=lt=>Zn(lt,t,"spectrum"),p=lt=>cr(lt,t,"left-edge"),w=lt=>cr(lt,t,"right-edge"),T=lt=>cr(lt,t,"top-edge"),A=lt=>cr(lt,t,"bottom-edge"),D=t.model,N=D.manager,U=(lt,_n)=>{N.setPositionFromValue(lt,_n,t,{getLeftEdge:p,getRightEdge:w,getTopEdge:T,getBottomEdge:A,getSpectrum:g})},W=(lt,_n)=>{D.value.set(_n);const qn=d(lt);U(lt,qn)},le=(lt,_n)=>{W(lt,_n);const qn=d(lt);return t.onChange(lt,qn,_n),_.some(!0)},pe=lt=>{N.setToMin(lt,t)},nt=lt=>{N.setToMax(lt,t)},$e=lt=>{const _n=()=>{cr(lt,t,"thumb").each(Ln=>{const bo=D.value.get();t.onChoose(lt,Ln,bo)})},qn=t.mouseIsDown.get();t.mouseIsDown.set(!1),qn&&_n()},rt=(lt,_n)=>{_n.stop(),t.mouseIsDown.set(!0),t.onDragStart(lt,d(lt))},wn=(lt,_n)=>{_n.stop(),t.onDragEnd(lt,d(lt)),$e(lt)};return{uid:t.uid,dom:t.dom,components:s,behaviours:pc(t.sliderBehaviours,[ho.config({mode:"special",focusIn:lt=>cr(lt,t,"spectrum").map(ho.focusIn).map(Me)}),En.config({store:{mode:"manual",getValue:lt=>D.value.get(),setValue:W}}),Pl.config({channels:{[vf()]:{onReceive:$e}}})]),events:dr([zt(Iw(),(lt,_n)=>{le(lt,_n.event.value)}),Ur((lt,_n)=>{const qn=D.getInitialValue();D.value.set(qn);const Ln=d(lt);U(lt,Ln);const bo=g(lt);t.onInit(lt,Ln,bo,D.value.get())}),zt(or(),rt),zt(zc(),wn),zt(Vc(),rt),zt(Ep(),wn)]),apis:{resetToMin:pe,resetToMax:nt,setValue:W,refresh:U},domModification:{styles:{position:"relative"}}}},apis:{setValue:(t,s,a)=>{t.setValue(s,a)},resetToMin:(t,s)=>{t.resetToMin(s)},resetToMax:(t,s)=>{t.resetToMax(s)},refresh:(t,s)=>{t.refresh(s)}}}),fp=Yn("rgb-hex-update"),jA=Yn("slider-update"),GA=Yn("palette-update"),uN=(t,s)=>{const a=pu.parts.spectrum({dom:{tag:"div",classes:[s("hue-slider-spectrum")],attributes:{role:"presentation"}}}),i=pu.parts.thumb({dom:{tag:"div",classes:[s("hue-slider-thumb")],attributes:{role:"presentation"}}});return pu.sketch({dom:{tag:"div",classes:[s("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:Y(0)},components:[a,i],sliderBehaviours:mn([Ao.config({})]),onChange:(d,g,p)=>{vo(d,jA,{value:p})}})},dN="form",B6=[Na("formBehaviours",[En])],Ww=t=>"<alloy.field."+t+">",$6=t=>{const s=(()=>{const g=[];return{field:(w,T)=>(g.push(w),Wy(dN,Ww(w),T)),record:Y(g)}})(),a=t(s),i=s.record(),d=Ie(i,g=>Gc({name:g,pname:Ww(g)}));return yb(dN,B6,d,mN,a)},P6=(t,s)=>t.fold(()=>Fo.error(s),Fo.value),mN=(t,s)=>({uid:t.uid,dom:t.dom,components:s,behaviours:pc(t.formBehaviours,[En.config({store:{mode:"manual",getValue:a=>{const i=lS(a,t);return an(i,(d,g)=>d().bind(p=>{const w=ss.getCurrent(p);return P6(w,new Error(`Cannot find a current component to extract the value from for form part '${g}': `+ef(p.element)))}).map(En.getValue))},setValue:(a,i)=>{Bt(i,(d,g)=>{cr(a,t,g).each(p=>{ss.getCurrent(p).each(w=>{En.setValue(w,d)})})})}}})]),apis:{getField:(a,i)=>cr(a,t,i).bind(ss.getCurrent)}}),Zb={getField:Sh((t,s,a)=>t.getField(s,a)),sketch:$6},Px=Yn("valid-input"),qA=Yn("invalid-input"),Li=Yn("validating-input"),Fx="colorcustom.rgb.",F6=(t,s,a,i)=>{const d=(U,W)=>Df.config({invalidClass:s("invalid"),notify:{onValidate:le=>{vo(le,Li,{type:U})},onValid:le=>{vo(le,Px,{type:U,value:En.getValue(le)})},onInvalid:le=>{vo(le,qA,{type:U,value:En.getValue(le)})}},validator:{validate:le=>{const pe=En.getValue(le),nt=W(pe)?Fo.value(!0):Fo.error(t("aria.input.invalid"));return di.pure(nt)},validateOnLoad:!1}}),g=(U,W,le,pe,nt)=>{const $e=t(Fx+"range"),rt=Zs.parts.label({dom:{tag:"label",attributes:{"aria-label":pe}},components:[Wa(le)]}),wn=Zs.parts.field({data:nt,factory:qv,inputAttributes:{type:"text",...W==="hex"?{"aria-live":"polite"}:{}},inputClasses:[s("textfield")],inputBehaviours:mn([d(W,U),Ta.config({})]),onSetValue:Ln=>{Df.isInvalid(Ln)&&Df.run(Ln).get(Q)}}),lt=[rt,wn],_n=W!=="hex"?[Zs.parts["aria-descriptor"]({text:$e})]:[],qn=lt.concat(_n);return{dom:{tag:"div",attributes:{role:"presentation"}},components:qn}},p=(U,W)=>{const le=Ow(W);return Zb.getField(U,"hex").each(pe=>{Ao.isFocused(pe)||En.setValue(U,{hex:le.value})}),le},w=(U,W)=>{const le=W.red,pe=W.green,nt=W.blue;En.setValue(U,{red:le,green:pe,blue:nt})},T=xr({dom:{tag:"div",classes:[s("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),A=(U,W)=>{T.getOpt(U).each(le=>{Vn(le.element,"background-color","#"+W.value)})};return zl({factory:()=>{const U={red:V(_.some(255)),green:V(_.some(255)),blue:V(_.some(255)),hex:V(_.some("ffffff"))},W=(io,Jo)=>{const Bs=Dw(Jo);w(io,Bs),$e(Bs)},le=io=>U[io].get(),pe=(io,Jo)=>{U[io].set(Jo)},nt=()=>le("red").bind(io=>le("green").bind(Jo=>le("blue").map(Bs=>ip(io,Jo,Bs,1)))),$e=io=>{const Jo=io.red,Bs=io.green,hs=io.blue;pe("red",_.some(Jo)),pe("green",_.some(Bs)),pe("blue",_.some(hs))},rt=(io,Jo)=>{const Bs=Jo.event;Bs.type!=="hex"?pe(Bs.type,_.none()):i(io)},wn=(io,Jo)=>{a(io);const Bs=LR(Jo);pe("hex",_.some(Jo));const hs=Dw(Bs);w(io,hs),$e(hs),vo(io,fp,{hex:Bs}),A(io,Bs)},lt=(io,Jo,Bs)=>{const hs=parseInt(Bs,10);pe(Jo,_.some(hs)),nt().each(ln=>{const Fn=p(io,ln);vo(io,fp,{hex:Fn}),A(io,Fn)})},_n=io=>io.type==="hex",qn=(io,Jo)=>{const Bs=Jo.event;_n(Bs)?wn(io,Bs.value):lt(io,Bs.type,Bs.value)},Ln=io=>({label:t(Fx+io+".label"),description:t(Fx+io+".description")}),bo=Ln("red"),yo=Ln("green"),Zo=Ln("blue"),ws=Ln("hex");return vr(Zb.sketch(io=>({dom:{tag:"form",classes:[s("rgb-form")],attributes:{"aria-label":t("aria.color.picker")}},components:[io.field("red",Zs.sketch(g(dx,"red",bo.label,bo.description,255))),io.field("green",Zs.sketch(g(dx,"green",yo.label,yo.description,255))),io.field("blue",Zs.sketch(g(dx,"blue",Zo.label,Zo.description,255))),io.field("hex",Zs.sketch(g(G_,"hex",ws.label,ws.description,"ffffff"))),T.asSpec()],formBehaviours:mn([Df.config({invalidClass:s("form-invalid")}),fs("rgb-form-events",[zt(Px,qn),zt(qA,rt),zt(Li,rt)])])})),{apis:{updateHex:(io,Jo)=>{En.setValue(io,{hex:Jo.value}),W(io,Jo),A(io,Jo)}}})},name:"RgbForm",configFields:[],apis:{updateHex:(U,W,le)=>{U.updateHex(W,le)}},extraApis:{}})},I6=(t,s)=>{const a=pu.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[s("sv-palette-spectrum")]}}),i=pu.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette-thumb")],innerHtml:`<div class=${s("sv-palette-inner-thumb")} role="presentation"></div>`}}),d=(A,D)=>{const{width:N,height:U}=A,W=A.getContext("2d");if(W===null)return;W.fillStyle=D,W.fillRect(0,0,N,U);const le=W.createLinearGradient(0,0,N,0);le.addColorStop(0,"rgba(255,255,255,1)"),le.addColorStop(1,"rgba(255,255,255,0)"),W.fillStyle=le,W.fillRect(0,0,N,U);const pe=W.createLinearGradient(0,0,0,U);pe.addColorStop(0,"rgba(0,0,0,0)"),pe.addColorStop(1,"rgba(0,0,0,1)"),W.fillStyle=pe,W.fillRect(0,0,N,U)},g=(A,D)=>{const N=A.components()[0].element.dom,U=Rw(D,100,100),W=ZR(U);d(N,X_(W))},p=(A,D)=>{const N=eA(Dw(D));pu.setValue(A,{x:N.saturation,y:100-N.value})};return zl({factory:A=>{const D=Y({x:0,y:0}),N=(le,pe,nt)=>{vo(le,GA,{value:nt})},U=(le,pe,nt,$e)=>{d(nt.element.dom,X_(jR))},W=mn([ss.config({find:_.some}),Ao.config({})]);return pu.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[s("sv-palette")]},model:{mode:"xy",getInitialValue:D},rounded:!1,components:[a,i],onChange:N,onInit:U,sliderBehaviours:W})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:(A,D,N)=>{g(D,N)},setThumb:(A,D,N)=>{p(D,N)}},extraApis:{}})},fN=(t,s)=>{const a=d=>{const g=F6(t,s,d.onValidHex,d.onInvalidHex),p=I6(t,s),w=qn=>(100-qn)/100*360,T=qn=>100-qn/360*100,A={paletteRgba:V(jR),paletteHue:V(0)},D=xr(uN(t,s)),N=xr(p.sketch({})),U=xr(g.sketch({})),W=(qn,Ln,bo)=>{N.getOpt(qn).each(yo=>{p.setHue(yo,bo)})},le=(qn,Ln)=>{U.getOpt(qn).each(bo=>{g.updateHex(bo,Ln)})},pe=(qn,Ln,bo)=>{D.getOpt(qn).each(yo=>{pu.setValue(yo,T(bo))})},nt=(qn,Ln)=>{N.getOpt(qn).each(bo=>{p.setThumb(bo,Ln)})},$e=(qn,Ln)=>{const bo=Dw(qn);A.paletteRgba.set(bo),A.paletteHue.set(Ln)},rt=(qn,Ln,bo,yo)=>{$e(Ln,bo),R(yo,Zo=>{Zo(qn,Ln,bo)})},wn=()=>{const qn=[le];return(Ln,bo)=>{const yo=bo.event.value,Zo=A.paletteHue.get(),ws=Rw(Zo,yo.x,100-yo.y),io=XR(ws);rt(Ln,io,Zo,qn)}},lt=()=>{const qn=[W,le];return(Ln,bo)=>{const yo=w(bo.event.value),Zo=A.paletteRgba.get(),ws=eA(Zo),io=Rw(yo,ws.saturation,ws.value),Jo=XR(io);rt(Ln,Jo,yo,qn)}},_n=()=>{const qn=[W,pe,nt];return(Ln,bo)=>{const yo=bo.event.hex,Zo=tA(yo);rt(Ln,yo,Zo.hue,qn)}};return{uid:d.uid,dom:d.dom,components:[N.asSpec(),D.asSpec(),U.asSpec()],behaviours:mn([fs("colour-picker-events",[zt(fp,_n()),zt(GA,wn()),zt(jA,lt())]),ss.config({find:qn=>U.getOpt(qn)}),ho.config({mode:"acyclic"})])}};return zl({name:"ColourPicker",configFields:[At("dom"),Ke("onValidHex",Q),Ke("onInvalidHex",Q)],factory:a})},Ju={self:()=>ss.config({find:_.some}),memento:t=>ss.config({find:t.getOpt}),childAt:t=>ss.config({find:s=>ba(s.element,t).bind(a=>s.getSystem().getByDom(a).toOptional())})},Mf=lo([Ke("preprocess",Ot),Ke("postprocess",Ot)]),KA=(t,s)=>{const a=Tc("RepresentingConfigs.memento processors",Mf,s);return En.config({store:{mode:"manual",getValue:i=>{const d=t.get(i),g=En.getValue(d);return a.postprocess(g)},setValue:(i,d)=>{const g=a.preprocess(d),p=t.get(i);En.setValue(p,g)}}})},YA=(t,s,a)=>En.config({store:{mode:"manual",...t.map(i=>({initialValue:i})).getOr({}),getValue:s,setValue:a}}),u0=(t,s,a)=>YA(t,i=>s(i.element),(i,d)=>a(i.element,d)),Qu={memento:KA,withElement:u0,withComp:YA,domValue:t=>u0(t,bl,of),domHtml:t=>u0(t,em,Qm),memory:t=>En.config({store:{mode:"memory",initialValue:t}})},L6={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},H6=t=>s=>t.translate(L6[s]),z6=(t,s,a)=>{const i=T=>"tox-"+T,d=fN(H6(s),i),g=T=>{vo(T,$g,{name:"hex-valid",value:!0})},p=T=>{vo(T,$g,{name:"hex-valid",value:!1})},w=xr(d.sketch({dom:{tag:"div",classes:[i("color-picker-container")],attributes:{role:"presentation"}},onValidHex:g,onInvalidHex:p}));return{dom:{tag:"div"},components:[w.asSpec()],behaviours:mn([Qu.withComp(a,T=>{const A=w.get(T);return ss.getCurrent(A).bind(U=>En.getValue(U).hex).map(U=>"#"+U).getOr("")},(T,A)=>{const D=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/,N=_.from(D.exec(A)).bind(le=>Qn(le,1)),U=w.get(T);ss.getCurrent(U).fold(()=>{console.log("Can not find form")},le=>{En.setValue(le,{hex:N.getOr("")}),Zb.getField(le,"hex").each(pe=>{Ws(pe,Jf())})})}),Ju.self()])}};var V6=tinymce.util.Tools.resolve("tinymce.Resource");const hN=t=>Kn(t,"init"),U6=t=>{const s=Wr(),a=xr({dom:{tag:t.tag}}),i=Wr();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:mn([fs("custom-editor-events",[Ur(d=>{a.getOpt(d).each(g=>{(hN(t)?t.init(g.element.dom):V6.load(t.scriptId,t.scriptUrl).then(p=>p(g.element.dom,t.settings))).then(p=>{i.on(w=>{p.setValue(w)}),i.clear(),s.set(p)})})})]),Qu.withComp(_.none(),()=>s.get().fold(()=>i.get().getOr(""),d=>d.getValue()),(d,g)=>{s.get().fold(()=>i.set(g),p=>p.setValue(g))}),Ju.self()]),components:[a.asSpec()]}};var El=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ix=(t,s)=>{const a=El.explode(s.getOption("images_file_types")),i=d=>Fe(a,g=>we(d.name.toLowerCase(),`.${g.toLowerCase()}`));return Se(kn(t),i)},W6=(t,s,a)=>{const i=(U,W)=>{W.stop()},d=U=>(W,le)=>{R(U,pe=>{pe(W,le)})},g=(U,W)=>{var le;if(!To.isDisabled(U)){const pe=W.event.raw;w(U,(le=pe.dataTransfer)===null||le===void 0?void 0:le.files)}},p=(U,W)=>{const le=W.event.raw.target;w(U,le.files)},w=(U,W)=>{W&&(En.setValue(U,Ix(W,s)),vo(U,Zl,{name:t.name}))},T=xr({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:mn([fs("input-file-events",[yh(Ap()),yh(hh())])])}),A=U=>({uid:U.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:mn([Qu.memory(a.getOr([])),Ju.self(),To.config({}),Es.config({toggleClass:"dragenter",toggleOnExecute:!1}),fs("dropzone-events",[zt("dragenter",d([i,Es.toggle])),zt("dragleave",d([i,Es.toggle])),zt("dragover",i),zt("drop",d([i,g])),zt(_p(),p)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Wa(s.translate("Drop an image here"))]},nl.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Wa(s.translate("Browse for an image")),T.asSpec()],action:W=>{T.get(W).element.dom.click()},buttonBehaviours:mn([Ta.config({}),Ul.button(s.isDisabled),ka()])})]}]}),D=t.label.map(U=>up(U,s)),N=Zs.parts.field({factory:{sketch:A}});return $w(D,N,["tox-form__group--stretched"],[])},Z6=(t,s)=>({dom:{tag:"div",classes:["tox-form__grid",`tox-form__grid--${t.columns}col`]},components:Ie(t.items,s.interpreter)}),Lx=Yn("alloy-fake-before-tabstop"),Hx=Yn("alloy-fake-after-tabstop"),zx=t=>({dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:t},behaviours:mn([Ao.config({ignore:!0}),Ta.config({})])}),Zw=t=>({dom:{tag:"div",classes:["tox-navobj"]},components:[zx([Lx]),t,zx([Hx])],behaviours:mn([Ju.childAt(1)])}),d0=(t,s)=>{vo(t,Xm(),{raw:{which:9,shiftKey:s}})},jw=(t,s)=>{const a=s.element;Ki(a,Lx)?d0(t,!0):Ki(a,Hx)&&d0(t,!1)},m0=t=>Nw(t,["."+Lx,"."+Hx].join(","),Le),pN=t=>{const s=V(t.getOr(""));return{getValue:a=>s.get(),setValue:(a,i)=>{s.get()!==i&&ko(a.element,"srcdoc",i),s.set(i)}}},j6=(t,s,a)=>{const i=t.sandboxed,d=t.transparent,g="tox-dialog__iframe",p={...t.label.map(N=>({title:N})).getOr({}),...a.map(N=>({srcdoc:N})).getOr({}),...i?{sandbox:"allow-scripts allow-same-origin"}:{}},w=pN(a),T=t.label.map(N=>up(N,s)),A=N=>Zw({uid:N.uid,dom:{tag:"iframe",attributes:p,classes:d?[g]:[g,`${g}--opaque`]},behaviours:mn([Ta.config({}),Ao.config({}),Qu.withComp(a,w.getValue,w.setValue)])}),D=Zs.parts.field({factory:{sketch:A}});return $w(T,D,["tox-form__group--stretched"],[])},G6=t=>new Promise((s,a)=>{const i=()=>{g(),s(t)},d=[ii(t,"load",i),ii(t,"error",()=>{g(),a("Unable to load data from image: "+t.dom.src)})],g=()=>R(d,p=>p.unbind());t.dom.complete&&i()}),q6=(t,s,a,i,d)=>{const g=a*d,p=i*d,w=Math.max(0,t/2-g/2),T=Math.max(0,s/2-p/2);return{left:w.toString()+"px",top:T.toString()+"px",width:g.toString()+"px",height:p.toString()+"px"}},K6=(t,s,a)=>{const i=br(t),d=dt(t);return Math.min(i/s,d/a,1)},Y6=(t,s)=>{const a=V(s.getOr({url:""})),i=xr({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:s.map(T=>({src:T.url})).getOr({})}}),d=xr({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[i.asSpec()]}),g=(T,A)=>{const D={url:A.url};A.zoom.each(U=>D.zoom=U),A.cachedWidth.each(U=>D.cachedWidth=U),A.cachedHeight.each(U=>D.cachedHeight=U),a.set(D);const N=()=>{const{cachedWidth:U,cachedHeight:W,zoom:le}=D;if(!Ct(U)&&!Ct(W)){if(Ct(le)){const nt=K6(T.element,U,W);D.zoom=nt}const pe=q6(br(T.element),dt(T.element),U,W,D.zoom);d.getOpt(T).each(nt=>{Hr(nt.element,pe)})}};i.getOpt(T).each(U=>{const W=U.element;A.url!==ar(W,"src")&&(ko(W,"src",A.url),ua(T.element,"tox-imagepreview__loaded")),N(),G6(W).then(le=>{T.getSystem().isConnected()&&(Sa(T.element,"tox-imagepreview__loaded"),D.cachedWidth=le.dom.naturalWidth,D.cachedHeight=le.dom.naturalHeight,N())})})},p={};t.height.each(T=>p.height=T);const w=s.map(T=>({url:T.url,zoom:_.from(T.zoom),cachedWidth:_.from(T.cachedWidth),cachedHeight:_.from(T.cachedHeight)}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:p,attributes:{role:"presentation"}},components:[d.asSpec()],behaviours:mn([Ju.self(),Qu.withComp(w,()=>a.get(),g)])}},X6=(t,s)=>{const a={dom:{tag:"label",classes:["tox-label"]},components:[Wa(s.providers.translate(t.label))]},i=Ie(t.items,s.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[a,...i],behaviours:mn([Ju.self(),zo.config({}),Qu.domHtml(_.none()),ho.config({mode:"acyclic"})])}},bN=Yn("toolbar.button.execute"),vN=t=>gl((s,a)=>{lx(t,s)(i=>{vo(s,bN,{buttonApi:i}),t.onAction(i)})}),XA={[fl()]:["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]},yN=(t,s,a)=>vm(t,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:a},s),Gw=(t,s)=>yN(t,s,[]),wN=(t,s)=>yN(t,s,[zo.config({})]),Vx=(t,s,a)=>({dom:{tag:"span",classes:[`${s}__select-label`]},components:[Wa(a.translate(t))],behaviours:mn([zo.config({})])}),Nf=Yn("update-menu-text"),CN=Yn("update-menu-icon"),Ux=(t,s,a)=>{const i=V(Q),d=t.text.map(N=>xr(Vx(N,s,a.providers))),g=t.icon.map(N=>xr(wN(N,a.providers.icons))),p=(N,U)=>{const W=En.getValue(N);return Ao.focus(W),vo(W,"keydown",{raw:U.event.raw}),fu.close(W),_.some(!0)},w=t.role.fold(()=>({}),N=>({role:N})),T=t.tooltip.fold(()=>({}),N=>{const U=a.providers.translate(N);return{title:U,"aria-label":U}}),A=vm("chevron-down",{tag:"div",classes:[`${s}__select-chevron`]},a.providers.icons);return xr(fu.sketch({...t.uid?{uid:t.uid}:{},...w,dom:{tag:"button",classes:[s,`${s}--select`].concat(Ie(t.classes,N=>`${s}--${N}`)),attributes:{...T}},components:$b([g.map(N=>N.asSpec()),d.map(N=>N.asSpec()),_.some(A)]),matchWidth:!0,useMinWidth:!0,onOpen:(N,U,W)=>{t.searchable&&i8(W)},dropdownBehaviours:mn([...t.dropdownBehaviours,Ul.button(()=>t.disabled||a.providers.isDisabled()),ka(),a0.config({}),zo.config({}),fs("dropdown-events",[Md(t,i),Ew(t,i)]),fs("menubutton-update-display-text",[zt(Nf,(N,U)=>{d.bind(W=>W.getOpt(N)).each(W=>{zo.set(W,[Wa(a.providers.translate(U.event.text))])})}),zt(CN,(N,U)=>{g.bind(W=>W.getOpt(N)).each(W=>{zo.set(W,[wN(U.event.icon,a.providers.icons)])})})])]),eventOrder:vr(XA,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:mn([ho.config({mode:"special",onLeft:p,onRight:p}),fs("dropdown-sandbox-events",[zt(GS,(N,U)=>{r8(N),U.stop()}),zt(qS,(N,U)=>{Of(N,U),U.stop()})])]),lazySink:a.getSink,toggleClass:`${s}--active`,parts:{menu:{...Gv(!1,t.columns,t.presets),fakeFocus:t.searchable,onHighlightItem:yx,onCollapseMenu:(N,U,W)=>{Vs.getHighlighted(W).each(le=>{yx(N,W,le)})},onDehighlightItem:Ga}},fetch:N=>di.nu($t(t.fetch,N))})).asSpec()},J6=t=>Nt(t),SN=t=>t.type==="separator",Q6=t=>Kn(t,"getSubmenuItems"),eL={type:"separator"},xN=(t,s)=>{const a=Ee(t,(i,d)=>J6(d)?d===""?i:d==="|"?i.length>0&&!SN(i[i.length-1])?i.concat([eL]):i:Kn(s,d.toLowerCase())?i.concat([s[d.toLowerCase()]]):i:i.concat([d]),[]);return a.length>0&&SN(a[a.length-1])&&a.pop(),a},tL=(t,s)=>{const a=t.getSubmenuItems(),i=Wx(a,s),d=vr(i.menus,{[t.value]:i.items}),g=vr(i.expansions,{[t.value]:t.value});return{item:t,menus:d,expansions:g}},kN=t=>{const s=qt(t,"value").getOrThunk(()=>Yn("generated-menu-item"));return vr({value:s},t)},Wx=(t,s)=>{const a=xN(Nt(t)?t.split(" "):t,s);return We(a,(i,d)=>{if(Q6(d)){const g=kN(d),p=tL(g,s);return{menus:vr(i.menus,p.menus),items:[p.item,...i.items],expansions:vr(i.expansions,p.expansions)}}else return{...i,items:[d,...i.items]}},{menus:{},expansions:{},items:[]})},Ig=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-field",placeholder:s.placeholder})),JA=t=>t.search.fold(()=>({searchMode:"no-search"}),s=>({searchMode:"search-with-results"})),jb=(t,s,a,i)=>{const d=Yn("primary-menu"),g=Wx(t,a.shared.providers.menuItems());if(g.items.length===0)return _.none();const p=Ig(i),w=gM(d,g.items,s,a,i.isHorizontalMenu,p),T=JA(i),A=an(g.menus,(N,U)=>gM(U,N,s,a,!1,T)),D=vr(A,js(d,w));return _.from(Ab.tieredData(d,D,g.expansions))},Zx=t=>!Kn(t,"items"),jx="data-value",QA=(t,s,a,i)=>Ie(a,d=>Zx(d)?{type:"togglemenuitem",text:d.text,value:d.value,active:d.value===i,onAction:()=>{En.setValue(t,d.value),vo(t,Zl,{name:s}),Ao.focus(t)}}:{type:"nestedmenuitem",text:d.text,getSubmenuItems:()=>QA(t,s,d.items,i)}),f0=(t,s)=>ao(t,a=>Zx(a)?gr(a.value===s,a):f0(a.items,s)),TN=(t,s,a)=>{const i=s.shared.providers,d=a.bind(T=>f0(t.items,T)).orThunk(()=>uo(t.items).filter(Zx)),g=t.label.map(T=>up(T,i)),p=Zs.parts.field({dom:{},factory:{sketch:T=>Ux({uid:T.uid,text:d.map(A=>A.text),icon:_.none(),tooltip:t.label,role:_.none(),fetch:(A,D)=>{const N=QA(A,t.name,t.items,En.getValue(A));D(jb(N,ym.CLOSE_ON_EXECUTE,s,{isHorizontalMenu:!1,search:_.none()}))},onSetup:Y(Q),getApi:Y({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ta.config({}),Qu.withComp(d.map(A=>A.value),A=>ar(A.element,jx),(A,D)=>{f0(t.items,D).each(N=>{ko(A.element,jx,N.value),vo(A,Nf,{text:N.text})})})]},"tox-listbox",s.shared)}}),w={dom:{tag:"div",classes:["tox-listboxfield"]},components:[p]};return Zs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:H([g.toArray(),[w]]),fieldBehaviours:mn([To.config({disabled:Y(!t.enabled),onDisabled:T=>{Zs.getField(T).each(To.disable)},onEnabled:T=>{Zs.getField(T).each(To.enable)}})])})},EN=(t,s)=>({dom:{tag:"div",classes:t.classes},components:Ie(t.items,s.shared.interpreter)}),nL=(t,s)=>{const a=Ie(t.options,d=>({dom:{tag:"option",value:d.value,innerHtml:d.text}})),i=t.data.map(d=>js("initialValue",d)).getOr({});return{uid:t.uid,dom:{tag:"select",classes:t.selectClasses,attributes:t.selectAttributes},components:a,behaviours:pc(t.selectBehaviours,[Ao.config({}),En.config({store:{mode:"manual",getValue:d=>bl(d.element),setValue:(d,g)=>{se(t.options,w=>w.value===g).isSome()&&of(d.element,g)},...i}})])}},oL=zl({name:"HtmlSelect",configFields:[At("options"),Na("selectBehaviours",[Ao,En]),Ke("selectClasses",[]),Ke("selectAttributes",{}),Ns("data")],factory:nL}),sL=(t,s,a)=>{const i=Ie(t.items,T=>({text:s.translate(T.text),value:T.value})),d=t.label.map(T=>up(T,s)),g=Zs.parts.field({dom:{},...a.map(T=>({data:T})).getOr({}),selectAttributes:{size:t.size},options:i,factory:oL,selectBehaviours:mn([To.config({disabled:()=>!t.enabled||s.isDisabled()}),Ta.config({}),fs("selectbox-change",[zt(_p(),(T,A)=>{vo(T,Zl,{name:t.name})})])])}),p=t.size>1?_.none():_.some(vm("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},s.icons)),w={dom:{tag:"div",classes:["tox-selectfield"]},components:H([[g],p.toArray()])};return Zs.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:H([d.toArray(),[w]]),fieldBehaviours:mn([To.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:T=>{Zs.getField(T).each(To.disable)},onEnabled:T=>{Zs.getField(T).each(To.enable)}}),ka()])})},rL=Y([Ke("field1Name","field1"),Ke("field2Name","field2"),lf("onLockedChange"),am(["lockClass"]),Ke("locked",!1),Ll.field("coupledFieldBehaviours",[ss,En])]),aL=(t,s,a)=>cr(t,s,a).bind(ss.getCurrent),e3=(t,s)=>Gc({factory:Zs,name:t,overrides:a=>({fieldBehaviours:mn([fs("coupled-input-behaviour",[zt(Jf(),i=>{aL(i,a,s).each(d=>{cr(i,a,"lock").each(g=>{Es.isOn(g)&&a.onLockedChange(i,d,g)})})})])])})}),_N=Y([e3("field1","field2"),e3("field2","field1"),Gc({factory:nl,schema:[At("dom")],name:"lock",overrides:t=>({buttonBehaviours:mn([Es.config({selected:t.locked,toggleClass:t.markers.lockClass,aria:{mode:"pressed"}})])})})]),cL=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:Ll.augment(t.coupledFieldBehaviours,[ss.config({find:_.some}),En.config({store:{mode:"manual",getValue:d=>{const g=Ad(d,t,["field1","field2"]);return{[t.field1Name]:En.getValue(g.field1()),[t.field2Name]:En.getValue(g.field2())}},setValue:(d,g)=>{const p=Ad(d,t,["field1","field2"]);Ts(g,t.field1Name)&&En.setValue(p.field1(),g[t.field1Name]),Ts(g,t.field2Name)&&En.setValue(p.field2(),g[t.field2Name])}}})]),apis:{getField1:d=>cr(d,t,"field1"),getField2:d=>cr(d,t,"field2"),getLock:d=>cr(d,t,"lock")}}),bu=qc({name:"FormCoupledInputs",configFields:rL(),partFields:_N(),factory:cL,apis:{getField1:(t,s)=>t.getField1(s),getField2:(t,s)=>t.getField2(s),getLock:(t,s)=>t.getLock(s)}}),iL=t=>{const s={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},a=d=>d in s?s[d]:1;let i=t.value.toFixed(a(t.unit));return i.indexOf(".")!==-1&&(i=i.replace(/\.?0*$/,"")),i+t.unit},g0=t=>{const a=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(t);if(a!==null){const i=parseFloat(a[1]),d=a[2];return Fo.value({value:i,unit:d})}else return Fo.error(t)},AN=(t,s)=>{const a={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},i=d=>Kn(a,d);return t.unit===s?_.some(t.value):i(t.unit)&&i(s)?a[t.unit]===a[s]?_.some(t.value):_.some(t.value/a[t.unit]*a[s]):_.none()},t3=t=>_.none(),ON=(t,s)=>a=>AN(a,s).map(i=>({value:i*t,unit:s})),DN=(t,s)=>{const a=g0(t).toOptional(),i=g0(s).toOptional();return ys(a,i,(d,g)=>AN(d,g.unit).map(p=>g.value/p).map(p=>ON(p,g.unit)).getOr(t3)).getOr(t3)},lL=(t,s)=>{let a=t3;const i=Yn("ratio-event"),d=N=>vm(N,{tag:"span",classes:["tox-icon","tox-lock-icon__"+N]},s.icons),g=bu.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:s.translate(t.label.getOr("Constrain proportions"))}},components:[d("lock"),d("unlock")],buttonBehaviours:mn([To.config({disabled:()=>!t.enabled||s.isDisabled()}),ka(),Ta.config({})])}),p=N=>({dom:{tag:"div",classes:["tox-form__group"]},components:N}),w=N=>Zs.parts.field({factory:qv,inputClasses:["tox-textfield"],inputBehaviours:mn([To.config({disabled:()=>!t.enabled||s.isDisabled()}),ka(),Ta.config({}),fs("size-input-events",[zt(Ym(),(U,W)=>{vo(U,i,{isField1:N})}),zt(_p(),(U,W)=>{vo(U,Zl,{name:t.name})})])]),selectOnFocus:!1}),T=N=>({dom:{tag:"label",classes:["tox-label"]},components:[Wa(s.translate(N))]}),A=bu.parts.field1(p([Zs.parts.label(T("Width")),w(!0)])),D=bu.parts.field2(p([Zs.parts.label(T("Height")),w(!1)]));return bu.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[A,D,p([T(vy),g])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:(N,U,W)=>{g0(En.getValue(N)).each(le=>{a(le).each(pe=>{En.setValue(U,iL(pe))})})},coupledFieldBehaviours:mn([To.config({disabled:()=>!t.enabled||s.isDisabled(),onDisabled:N=>{bu.getField1(N).bind(Zs.getField).each(To.disable),bu.getField2(N).bind(Zs.getField).each(To.disable),bu.getLock(N).each(To.disable)},onEnabled:N=>{bu.getField1(N).bind(Zs.getField).each(To.enable),bu.getField2(N).bind(Zs.getField).each(To.enable),bu.getLock(N).each(To.enable)}}),ka(),fs("size-input-events2",[zt(i,(N,U)=>{const W=U.event.isField1,le=W?bu.getField1(N):bu.getField2(N),pe=W?bu.getField2(N):bu.getField1(N),nt=le.map(En.getValue).getOr(""),$e=pe.map(En.getValue).getOr("");a=DN(nt,$e)})])])})},uL=(t,s,a)=>{const i=pu.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Wa(s.translate(t.label))]}),d=pu.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),g=pu.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return pu.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:t.min,maxX:t.max,getInitialValue:Y(a.getOrThunk(()=>(Math.abs(t.max)-Math.abs(t.min))/2))},components:[i,d,g],sliderBehaviours:mn([Ju.self(),Ao.config({})]),onChoose:(p,w,T)=>{vo(p,Zl,{name:t.name,value:T})}})},n3=(t,s)=>{const a=w=>({dom:{tag:"th",innerHtml:s.translate(w)}}),i=w=>({dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ie(w,a)}]}),d=w=>({dom:{tag:"td",innerHtml:s.translate(w)}}),g=w=>({dom:{tag:"tr"},components:Ie(w,d)}),p=w=>({dom:{tag:"tbody"},components:Ie(w,g)});return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[i(t.header),p(t.cells)],behaviours:mn([Ta.config({}),Ao.config({})])}},RN=(t,s)=>{const a=t.label.map(U=>up(U,s)),i=[To.config({disabled:()=>t.disabled||s.isDisabled()}),ka(),ho.config({mode:"execution",useEnter:t.multiline!==!0,useControlEnter:t.multiline===!0,execute:U=>(Ws(U,Fw),_.some(!0))}),fs("textfield-change",[zt(Jf(),(U,W)=>{vo(U,Zl,{name:t.name})}),zt(P0(),(U,W)=>{vo(U,Zl,{name:t.name})})]),Ta.config({})],d=t.validation.map(U=>Df.config({getRoot:W=>Ai(W.element),invalidClass:"tox-invalid",validator:{validate:W=>{const le=En.getValue(W),pe=U.validator(le);return di.pure(pe===!0?Fo.value(le):Fo.error(pe))},validateOnLoad:U.validateOnLoad}})).toArray(),g=t.placeholder.fold(Y({}),U=>({placeholder:s.translate(U)})),p=t.inputMode.fold(Y({}),U=>({inputmode:U})),w={...g,...p},T=Zs.parts.field({tag:t.multiline===!0?"textarea":"input",...t.data.map(U=>({data:U})).getOr({}),inputAttributes:w,inputClasses:[t.classname],inputBehaviours:mn(H([i,d])),selectOnFocus:!1,factory:qv}),D=(t.flex?["tox-form__group--stretched"]:[]).concat(t.maximized?["tox-form-group--maximize"]:[]),N=[To.config({disabled:()=>t.disabled||s.isDisabled(),onDisabled:U=>{Zs.getField(U).each(To.disable)},onEnabled:U=>{Zs.getField(U).each(To.enable)}}),ka()];return $w(a,T,D,N)},dL=(t,s,a)=>RN({name:t.name,multiline:!1,label:t.label,inputMode:t.inputMode,placeholder:t.placeholder,flex:!1,disabled:!t.enabled,classname:"tox-textfield",validation:_.none(),maximized:t.maximized,data:a},s),mL=(t,s,a)=>RN({name:t.name,multiline:!0,label:t.label,inputMode:_.none(),placeholder:t.placeholder,flex:!0,disabled:!t.enabled,classname:"tox-textarea",validation:_.none(),maximized:t.maximized,data:a},s);var o3=Object.freeze({__proto__:null,events:(t,s)=>{const i=t.stream.streams.setup(t,s);return dr([zt(t.event,i),Bl(()=>s.cancel())].concat(t.cancelEvent.map(d=>[zt(d,()=>s.cancel())]).getOr([])))}});const s3=(t,s)=>{let a=null;return{cancel:()=>{rn(a)||(clearTimeout(a),a=null)},throttle:(...g)=>{rn(a)&&(a=setTimeout(()=>{a=null,t.apply(null,g)},s))}}},MN=(t,s)=>{let a=null;const i=()=>{rn(a)||(clearTimeout(a),a=null)};return{cancel:i,throttle:(...g)=>{i(),a=setTimeout(()=>{a=null,t.apply(null,g)},s)}}},NN=t=>{const s=V(null);return Bi({readState:()=>({timer:s.get()!==null?"set":"unset"}),setTimer:g=>{s.set(g)},cancel:()=>{const g=s.get();g!==null&&g.cancel()}})};var fL=Object.freeze({__proto__:null,throttle:NN,init:t=>t.stream.streams.state(t)});const r3=(t,s)=>{const a=t.stream,i=MN(t.onStream,a.delay);return s.setTimer(i),(d,g)=>{i.throttle(d,g),a.stopEvent&&g.stop()}};var $N=[Mi("stream",pi("mode",{throttle:[At("delay"),Ke("stopEvent",!0),wr("streams",{setup:r3,state:NN})]})),Ke("event","input"),Ns("cancelEvent"),lf("onStream")];const a3=hc({fields:$N,name:"streaming",active:o3,state:fL}),Gx=(t,s,a)=>{const i=En.getValue(a);En.setValue(s,i),i3(s)},c3=(t,s)=>{const a=t.element,i=bl(a),d=a.dom;ar(a,"type")!=="number"&&s(d,i)},i3=t=>{c3(t,(s,a)=>s.setSelectionRange(a.length,a.length))},gL=(t,s)=>{c3(t,(a,i)=>a.setSelectionRange(s,i.length))},PN=(t,s,a)=>{if(t.selectsOver){const i=En.getValue(s),d=t.getDisplayText(i),g=En.getValue(a);return t.getDisplayText(g).indexOf(d)===0?_.some(()=>{Gx(t,s,a),gL(s,d.length)}):_.none()}else return _.none()},qx=Y("alloy.typeahead.itemexecute"),hL=(t,s,a,i)=>{const d=(N,U,W)=>{t.previewing.set(!1);const le=ra.getCoupled(N,"sandbox");if(ms.isOpen(le))ss.getCurrent(le).each(pe=>{Vs.getHighlighted(pe).fold(()=>{W(pe)},()=>{$C(le,pe.element,"keydown",U)})});else{const pe=nt=>{ss.getCurrent(nt).each(W)};vx(t,p(N),N,le,i,pe,sa.HighlightMenuAndItem).get(Q)}},g=KD(t),p=N=>U=>U.map(W=>{const le=on(W.menus),pe=q(le,$e=>Se($e.items,rt=>rt.type==="item"));return En.getState(N).update(Ie(pe,$e=>$e.data)),W}),w=N=>ss.getCurrent(N),T="typeaheadevents",A=[Ao.config({}),En.config({onSetValue:t.onSetValue,store:{mode:"dataset",getDataKey:N=>bl(N.element),getFallbackEntry:N=>({value:N,meta:{}}),setValue:(N,U)=>{of(N.element,t.model.getDisplayText(U))},...t.initialData.map(N=>js("initialValue",N)).getOr({})}}),a3.config({stream:{mode:"throttle",delay:t.responseTime,stopEvent:!1},onStream:(N,U)=>{const W=ra.getCoupled(N,"sandbox");if(Ao.isFocused(N)&&bl(N.element).length>=t.minChars){const pe=w(W).bind($e=>Vs.getHighlighted($e).map(En.getValue));t.previewing.set(!0);const nt=$e=>{w(W).each(rt=>{pe.fold(()=>{t.model.selectsOver&&Vs.highlightFirst(rt)},wn=>{Vs.highlightBy(rt,lt=>En.getValue(lt).value===wn.value),Vs.getHighlighted(rt).orThunk(()=>(Vs.highlightFirst(rt),_.none()))})})};vx(t,p(N),N,W,i,nt,sa.HighlightJustMenu).get(Q)}},cancelEvent:Qf()}),ho.config({mode:"special",onDown:(N,U)=>(d(N,U,Vs.highlightFirst),_.some(!0)),onEscape:N=>{const U=ra.getCoupled(N,"sandbox");return ms.isOpen(U)?(ms.close(U),_.some(!0)):_.none()},onUp:(N,U)=>(d(N,U,Vs.highlightLast),_.some(!0)),onEnter:N=>{const U=ra.getCoupled(N,"sandbox"),W=ms.isOpen(U);if(W&&!t.previewing.get())return w(U).bind(le=>Vs.getHighlighted(le)).map(le=>(vo(N,qx(),{item:le}),!0));{const le=En.getValue(N);return Ws(N,Qf()),t.onExecute(U,N,le),W&&ms.close(U),_.some(!0)}}}),Es.config({toggleClass:t.markers.openClass,aria:{mode:"expanded"}}),ra.config({others:{sandbox:N=>wA(t,N,{onOpen:()=>Es.on(N),onClose:()=>Es.off(N)})}}),fs(T,[Ur(N=>{t.lazyTypeaheadComp.set(_.some(N))}),Bl(N=>{t.lazyTypeaheadComp.set(_.none())}),gl(N=>{const U=Q;yA(t,p(N),N,i,U,sa.HighlightMenuAndItem).get(Q)}),zt(qx(),(N,U)=>{const W=ra.getCoupled(N,"sandbox");Gx(t.model,N,U.event.item),Ws(N,Qf()),t.onItemExecute(N,W,U.event.item,En.getValue(N)),ms.close(W),i3(N)})].concat(t.dismissOnBlur?[zt(Op(),N=>{const U=ra.getCoupled(N,"sandbox");Fl(U.element).isNone()&&ms.close(U)})]:[]))],D={[ph()]:[En.name(),a3.name(),T],...t.eventOrder};return{uid:t.uid,dom:YD(vr(t,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:{...g,...pc(t.typeaheadBehaviours,A)},eventOrder:D}},FN=Y([Ns("lazySink"),At("fetch"),Ke("minChars",5),Ke("responseTime",1e3),ds("onOpen"),Ke("getHotspot",_.some),Ke("getAnchorOverrides",Y({})),Ke("layouts",_.none()),Ke("eventOrder",{}),I("model",{},[Ke("getDisplayText",t=>t.meta!==void 0&&t.meta.text!==void 0?t.meta.text:t.value),Ke("selectsOver",!0),Ke("populateFromBrowse",!0)]),ds("onSetValue"),Yi("onExecute"),ds("onItemExecute"),Ke("inputClasses",[]),Ke("inputAttributes",{}),Ke("inputStyles",{}),Ke("matchWidth",!0),Ke("useMinWidth",!1),Ke("dismissOnBlur",!0),am(["openClass"]),Ns("initialData"),Na("typeaheadBehaviours",[Ao,En,a3,ho,Es,ra]),Ec("lazyTypeaheadComp",()=>V(_.none)),Ec("previewing",()=>V(!0))].concat(qD()).concat(CA())),IN=Y([Wu({schema:[Wp()],name:"menu",overrides:t=>({fakeFocus:!0,onHighlightItem:(s,a,i)=>{t.previewing.get()?t.lazyTypeaheadComp.get().each(d=>{PN(t.model,d,i).fold(()=>{t.model.selectsOver?(Vs.dehighlight(a,i),t.previewing.set(!0)):t.previewing.set(!1)},g=>{g(),t.previewing.set(!1)})}):t.lazyTypeaheadComp.get().each(d=>{t.model.populateFromBrowse&&Gx(t.model,d,i)})},onExecute:(s,a)=>t.lazyTypeaheadComp.get().map(i=>(vo(i,qx(),{item:a}),!0)),onHover:(s,a)=>{t.previewing.set(!1),t.lazyTypeaheadComp.get().each(i=>{t.model.populateFromBrowse&&Gx(t.model,i,a)})}})})]),LN=qc({name:"Typeahead",configFields:FN(),partFields:IN(),factory:hL}),Bd=t=>({...t,toCached:()=>Bd(t.toCached()),bindFuture:T=>Bd(t.bind(A=>A.fold(D=>di.pure(Fo.error(D)),D=>T(D)))),bindResult:T=>Bd(t.map(A=>A.bind(T))),mapResult:T=>Bd(t.map(A=>A.map(T))),mapError:T=>Bd(t.map(A=>A.mapError(T))),foldResult:(T,A)=>t.map(D=>D.fold(T,A)),withTimeout:(T,A)=>Bd(di.nu(D=>{let N=!1;const U=setTimeout(()=>{N=!0,D(Fo.error(A()))},T);t.get(W=>{N||(clearTimeout(U),D(W))})}))}),HN=t=>Bd(di.nu(t)),zN=t=>Bd(di.pure(Fo.value(t))),vL={nu:HN,wrap:Bd,pure:zN,value:zN,error:t=>Bd(di.pure(Fo.error(t))),fromResult:t=>Bd(di.pure(t)),fromFuture:t=>Bd(t.map(Fo.value)),fromPromise:t=>HN(s=>{t.then(a=>{s(Fo.value(a))},a=>{s(Fo.error(a))})})},l3=t=>({isEnabled:()=>!To.isDisabled(t),setEnabled:s=>To.set(t,!s),setActive:s=>{const a=t.element;s?(Sa(a,"tox-tbtn--enabled"),ko(a,"aria-pressed",!0)):(ua(a,"tox-tbtn--enabled"),de(a,"aria-pressed"))},isActive:()=>Ki(t.element,"tox-tbtn--enabled")}),u3=(t,s,a,i)=>Ux({text:t.text,icon:t.icon,tooltip:t.tooltip,searchable:t.search.isSome(),role:i,fetch:(d,g)=>{const p={pattern:t.search.isSome()?l8(d):""};t.fetch(w=>{g(jb(w,ym.CLOSE_ON_EXECUTE,a,{isHorizontalMenu:!1,search:t.search}))},p)},onSetup:t.onSetup,getApi:l3,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ta.config({})]},s,a.shared),yL=(t,s,a)=>{const i=g=>p=>{const w=!p.isActive();p.setActive(w),g.storage.set(w),a.shared.getSink().each(T=>{s().getOpt(T).each(A=>{im(A.element),vo(A,$g,{name:g.name,value:g.storage.get()})})})},d=g=>p=>{p.setActive(g.storage.get())};return g=>{g(Ie(t,p=>{const w=p.text.fold(()=>({}),T=>({text:T}));return{type:p.type,active:!1,...w,onAction:i(p),onSetup:d(p)}}))}},VN=(t,s,a=[],i,d,g)=>{const p=s.fold(()=>({}),A=>({action:A})),w={buttonBehaviours:mn([Ul.button(()=>!t.enabled||g.isDisabled()),ka(),Ta.config({}),fs("button press",[FC("click"),FC("mousedown")])].concat(a)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]},...p},T=vr(w,{dom:i});return vr(T,{components:d})},UN=(t,s,a,i=[])=>{const d=t.tooltip.map(T=>({"aria-label":a.translate(T),title:a.translate(T)})).getOr({}),g={tag:"button",classes:["tox-tbtn"],attributes:d},p=t.icon.map(T=>Gw(T,a.icons)),w=$b([p]);return VN(t,s,i,g,w,a)},wL=t=>{switch(t){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];case"secondary":default:return["tox-button","tox-button--secondary"]}},d3=(t,s,a,i=[],d=[])=>{const g=a.translate(t.text),p=t.icon.map(U=>Gw(U,a.icons)),w=[p.getOrThunk(()=>Wa(g))],T=t.buttonType.getOr(!t.primary&&!t.borderless?"secondary":"primary"),N={tag:"button",classes:[...wL(T),...p.isSome()?["tox-button--icon"]:[],...t.borderless?["tox-button--naked"]:[],...d],attributes:{title:g}};return VN(t,s,i,N,w,a)},m3=(t,s,a,i=[],d=[])=>{const g=d3(t,_.some(s),a,i,d);return nl.sketch(g)},f3=(t,s)=>a=>{s==="custom"?vo(a,$g,{name:t,value:{}}):s==="submit"?Ws(a,Fw):s==="cancel"?Ws(a,dp):console.error("Unknown button type: ",s)},CL=(t,s)=>s==="menu",SL=(t,s)=>s==="custom"||s==="cancel"||s==="submit",Kx=(t,s,a)=>{if(CL(t,s)){const i=()=>p,d=t,g={...t,type:"menubutton",search:_.none(),onSetup:w=>(w.setEnabled(t.enabled),Q),fetch:yL(d.items,i,a)},p=xr(u3(g,"tox-tbtn",a,_.none()));return p.asSpec()}else if(SL(t,s)){const i=f3(t.name,s),d={...t,borderless:!1};return m3(d,i,a.shared.providers,[])}else throw console.error("Unknown footer button type: ",s),new Error("Unknown footer button type")},xL=(t,s)=>{const a=f3(t.name,"custom");return B8(_.none(),Zs.parts.field({factory:nl,...d3(t,_.some(a),s,[Qu.memory(""),Ju.self()])}))},WN={type:"separator"},kL=t=>({type:"menuitem",value:t.url,text:t.title,meta:{attach:t.attach},onAction:Q}),g3=(t,s)=>({type:"menuitem",value:s,text:t,meta:{attach:void 0},onAction:Q}),ZN=t=>Ie(t,kL),TL=(t,s)=>Se(s,a=>a.type===t),jN=(t,s)=>ZN(TL(t,s)),EL=t=>jN("header",t.targets),GN=t=>jN("anchor",t.targets),_L=t=>_.from(t.anchorTop).map(s=>g3("<top>",s)).toArray(),AL=t=>_.from(t.anchorBottom).map(s=>g3("<bottom>",s)).toArray(),qN=t=>Ie(t,s=>g3(s,s)),KN=t=>Ee(t,(s,a)=>s.length===0||a.length===0?s.concat(a):s.concat(WN,a),[]),Yx=(t,s)=>{const a=t.toLowerCase();return Se(s,i=>{var d;const g=i.meta!==void 0&&i.meta.text!==void 0?i.meta.text:i.text,p=(d=i.value)!==null&&d!==void 0?d:"";return Qs(g.toLowerCase(),a)||Qs(p.toLowerCase(),a)})},Xx=(t,s,a)=>{const i=En.getValue(s),d=i.meta.text!==void 0?i.meta.text:i.value;return a.getLinkInformation().fold(()=>[],p=>{const w=Yx(d,qN(a.getHistory(t)));return t==="file"?KN([w,Yx(d,EL(p)),Yx(d,H([_L(p),GN(p),AL(p)]))]):w})},YN=Yn("aria-invalid"),OL=(t,s,a,i)=>{const d=s.shared.providers,g=rt=>{const wn=En.getValue(rt);a.addToHistory(wn.value,t.filetype)},p={...i.map(rt=>({initialData:rt})).getOr({}),dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":YN,type:"url"},minChars:0,responseTime:0,fetch:rt=>{const wn=Xx(t.filetype,rt,a),lt=jb(wn,ym.BUBBLE_TO_SANDBOX,s,{isHorizontalMenu:!1,search:_.none()});return di.pure(lt)},getHotspot:rt=>le.getOpt(rt),onSetValue:(rt,wn)=>{rt.hasConfigured(Df)&&Df.run(rt).get(Q)},typeaheadBehaviours:mn([...a.getValidationHandler().map(rt=>Df.config({getRoot:wn=>Ai(wn.element),invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:(wn,lt)=>{D.getOpt(wn).each(_n=>{ko(_n.element,"title",d.translate(lt))})}},validator:{validate:wn=>{const lt=En.getValue(wn);return vL.nu(_n=>{rt({type:t.filetype,url:lt.value},qn=>{if(qn.status==="invalid"){const Ln=Fo.error(qn.message);_n(Ln)}else{const Ln=Fo.value(qn.message);_n(Ln)}})})},validateOnLoad:!1}})).toArray(),To.config({disabled:()=>!t.enabled||d.isDisabled()}),Ta.config({}),fs("urlinput-events",[zt(Jf(),rt=>{const wn=bl(rt.element),lt=wn.trim();lt!==wn&&of(rt.element,lt),t.filetype==="file"&&vo(rt,Zl,{name:t.name})}),zt(_p(),rt=>{vo(rt,Zl,{name:t.name}),g(rt)}),zt(P0(),rt=>{vo(rt,Zl,{name:t.name}),g(rt)})])]),eventOrder:{[Jf()]:["streaming","urlinput-events","invalidating"]},model:{getDisplayText:rt=>rt.value,selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:s.shared.getSink,parts:{menu:Gv(!1,1,"normal")},onExecute:(rt,wn,lt)=>{vo(wn,Fw,{})},onItemExecute:(rt,wn,lt,_n)=>{g(rt),vo(rt,Zl,{name:t.name})}},w=Zs.parts.field({...p,factory:LN}),T=t.label.map(rt=>up(rt,d)),D=xr(((rt,wn,lt=rt,_n=rt)=>vm(lt,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+rt],attributes:{title:d.translate(_n),"aria-live":"polite",...wn.fold(()=>({}),qn=>({id:qn}))}},d.icons))("invalid",_.some(YN),"warning")),N=xr({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[D.asSpec()]}),U=a.getUrlPicker(t.filetype),W=Yn("browser.url.event"),le=xr({dom:{tag:"div",classes:["tox-control-wrap"]},components:[w,N.asSpec()],behaviours:mn([To.config({disabled:()=>!t.enabled||d.isDisabled()})])}),pe=xr(m3({name:t.name,icon:_.some("browse"),text:t.label.getOr(""),enabled:t.enabled,primary:!1,buttonType:_.none(),borderless:!0},rt=>Ws(rt,W),d,[],["tox-browse-url"])),nt=()=>({dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:H([[le.asSpec()],U.map(()=>pe.asSpec()).toArray()])}),$e=rt=>{ss.getCurrent(rt).each(wn=>{const lt=En.getValue(wn),_n={fieldname:t.name,...lt};U.each(qn=>{qn(_n).get(Ln=>{En.setValue(wn,Ln),vo(rt,Zl,{name:t.name})})})})};return Zs.sketch({dom:P8(),components:T.toArray().concat([nt()]),fieldBehaviours:mn([To.config({disabled:()=>!t.enabled||d.isDisabled(),onDisabled:rt=>{Zs.getField(rt).each(To.disable),pe.getOpt(rt).each(To.disable)},onEnabled:rt=>{Zs.getField(rt).each(To.enable),pe.getOpt(rt).each(To.enable)}}),ka(),fs("url-input-events",[zt(W,$e)])])})},DL=(t,s)=>Sm.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in",`tox-notification--${t.level}`]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[nl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:iw(t.icon,s.icons),attributes:{title:s.translate(t.iconTooltip)}},action:a=>{vo(a,$g,{name:"alert-banner",value:t.url})},buttonBehaviours:mn([u_()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:s.translate(t.text)}}]}),RL=(t,s)=>{t.dom.checked=s},XN=t=>t.dom.checked,JN=(t,s,a)=>{const i=T=>(T.element.dom.click(),_.some(!0)),d=Zs.parts.field({factory:{sketch:Ot},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:mn([Ju.self(),To.config({disabled:()=>!t.enabled||s.isDisabled()}),Ta.config({}),Ao.config({}),Qu.withElement(a,XN,RL),ho.config({mode:"special",onEnter:i,onSpace:i,stopSpaceKeyup:!0}),fs("checkbox-events",[zt(_p(),(T,A)=>{vo(T,Zl,{name:t.name})})])])}),g=Zs.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Wa(s.translate(t.label))],behaviours:mn([a0.config({})])}),p=T=>vm(T==="checked"?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+T]},s.icons),w=xr({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[p("checked"),p("unchecked")]});return Zs.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[d,w.asSpec(),g],fieldBehaviours:mn([To.config({disabled:()=>!t.enabled||s.isDisabled(),disableClass:"tox-checkbox--disabled",onDisabled:T=>{Zs.getField(T).each(To.disable)},onEnabled:T=>{Zs.getField(T).each(To.enable)}}),ka()])})},ML=t=>t.presets==="presentation"?Sm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html}}):Sm.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:t.html,attributes:{role:"document"}},containerBehaviours:mn([Ta.config({}),Ao.config({})])}),vc=t=>(s,a,i,d)=>qt(a,"name").fold(()=>t(a,d,_.none()),g=>s.field(g,t(a,d,qt(i,g)))),QN=t=>(s,a,i,d)=>{const g=vr(a,{source:"dynamic"});return vc(t)(s,g,i,d)},NL={bar:vc((t,s)=>A8(t,s.shared)),collection:vc((t,s,a)=>F8(t,s.shared.providers,a)),alertbanner:vc((t,s)=>DL(t,s.shared.providers)),input:vc((t,s,a)=>dL(t,s.shared.providers,a)),textarea:vc((t,s,a)=>mL(t,s.shared.providers,a)),label:vc((t,s)=>X6(t,s.shared)),iframe:QN((t,s,a)=>j6(t,s.shared.providers,a)),button:vc((t,s)=>xL(t,s.shared.providers)),checkbox:vc((t,s,a)=>JN(t,s.shared.providers,a)),colorinput:vc((t,s,a)=>z8(t,s.shared,s.colorinput,a)),colorpicker:vc((t,s,a)=>z6(t,s.shared.providers,a)),dropzone:vc((t,s,a)=>W6(t,s.shared.providers,a)),grid:vc((t,s)=>Z6(t,s.shared)),listbox:vc((t,s,a)=>TN(t,s,a)),selectbox:vc((t,s,a)=>sL(t,s.shared.providers,a)),sizeinput:vc((t,s)=>lL(t,s.shared.providers)),slider:vc((t,s,a)=>uL(t,s.shared.providers,a)),urlinput:vc((t,s,a)=>OL(t,s,s.urlinput,a)),customeditor:vc(U6),htmlpanel:vc(ML),imagepreview:vc((t,s,a)=>Y6(t,a)),table:vc((t,s)=>n3(t,s.shared.providers)),panel:vc((t,s)=>EN(t,s))},BL={field:(t,s)=>s,record:Y([])},rs=(t,s,a,i)=>{const d=vr(i,{shared:{interpreter:g=>Gb(t,g,a,d)}});return Gb(t,s,a,d)},Gb=(t,s,a,i)=>qt(NL,s.type).fold(()=>(console.error(`Unknown factory type "${s.type}", defaulting to container: `,s),s),d=>d(t,s,a,i)),h3=(t,s,a)=>Gb(BL,t,s,a),Lg="layout-inset",Jx=t=>t.x,p3=(t,s)=>t.x+t.width/2-s.width/2,Qx=(t,s)=>t.x+t.width-s.width,eB=t=>t.y,qb=(t,s)=>t.y+t.height-s.height,tB=(t,s)=>t.y+t.height/2-s.height/2,qw=(t,s,a)=>gc(Qx(t,s),qb(t,s),a.insetSouthwest(),U1(),"southwest",nc(t,{right:0,bottom:3}),Lg),ek=(t,s,a)=>gc(Jx(t),qb(t,s),a.insetSoutheast(),V1(),"southeast",nc(t,{left:1,bottom:3}),Lg),Kw=(t,s,a)=>gc(Qx(t,s),eB(t),a.insetNorthwest(),z1(),"northwest",nc(t,{right:0,top:2}),Lg),Yw=(t,s,a)=>gc(Jx(t),eB(t),a.insetNortheast(),Nh(),"northeast",nc(t,{left:1,top:2}),Lg),km=(t,s,a)=>gc(p3(t,s),eB(t),a.insetNorth(),l2(),"north",nc(t,{top:2}),Lg),Kb=(t,s,a)=>gc(p3(t,s),qb(t,s),a.insetSouth(),X0(),"south",nc(t,{bottom:3}),Lg),b3=(t,s,a)=>gc(Qx(t,s),tB(t,s),a.insetEast(),W1(),"east",nc(t,{right:0}),Lg),nB=(t,s,a)=>gc(Jx(t),tB(t,s),a.insetWest(),u2(),"west",nc(t,{left:1}),Lg),$L=t=>{switch(t){case"north":return km;case"northeast":return Yw;case"northwest":return Kw;case"south":return Kb;case"southeast":return ek;case"southwest":return qw;case"east":return b3;case"west":return nB}},oB=(t,s,a,i,d)=>sy(i).map($L).getOr(km)(t,s,a,i,d),sB=t=>{switch(t){case"north":return Kb;case"northeast":return ek;case"northwest":return qw;case"south":return km;case"southeast":return Yw;case"southwest":return Kw;case"east":return nB;case"west":return b3}},PL=(t,s,a,i,d)=>sy(i).map(sB).getOr(km)(t,s,a,i,d),rB={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},FL=(t,s,a)=>{const d={maxHeightFunction:Qp()},g=()=>({type:"node",root:Ar(Ko(t())),node:_.from(t()),bubble:gg(12,12,rB),layouts:{onRtl:()=>[Yw],onLtr:()=>[Kw]},overrides:d}),p=()=>({type:"hotspot",hotspot:s(),bubble:gg(-12,12,rB),layouts:{onRtl:()=>[Ac],onLtr:()=>[Oc]},overrides:d});return()=>a()?g():p()},IL=(t,s,a)=>{const i=()=>({type:"node",root:Ar(Ko(t())),node:_.from(t()),layouts:{onRtl:()=>[km],onLtr:()=>[km]}}),d=()=>({type:"hotspot",hotspot:s(),layouts:{onRtl:()=>[Za],onLtr:()=>[Za]}});return()=>a()?i():d()},aB=(t,s)=>()=>({type:"selection",root:s(),getSelection:()=>{const a=t.selection.getRng();return _.some(dm.range(Lt.fromDom(a.startContainer),a.startOffset,Lt.fromDom(a.endContainer),a.endOffset))}}),LL=t=>s=>({type:"node",root:t(),node:s}),HL=(t,s,a)=>{const i=bw(t),d=()=>Lt.fromDom(t.getBody()),g=()=>Lt.fromDom(t.getContentAreaContainer()),p=()=>i||!a();return{inlineDialog:FL(g,s,p),banner:IL(g,s,p),cursor:aB(t,d),node:LL(d)}},zL=t=>(s,a)=>{oM(t)(s,a)},VL=t=>()=>aA(t),UL=t=>s=>Fb(t,s),WL=t=>s=>rA(t,s),ZL=t=>({colorPicker:zL(t),hasCustomColors:VL(t),getColors:UL(t),getColorCols:WL(t)}),jL=t=>()=>HS(t),GL=t=>({isDraggableModal:jL(t)}),qL=t=>{const s=V(WS(t)?"bottom":"top");return{isPositionedAtTop:()=>s.get()==="top",getDockingMode:s.get,setDockingMode:s.set}},cB=t=>Ts(t,"items"),v3=t=>Ts(t,"format"),iB=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],KL=t=>Kn(t,"items"),YL=t=>Kn(t,"block"),XL=t=>Kn(t,"inline"),JL=t=>Kn(t,"selector"),lB=t=>Ee(t,(s,a)=>{if(KL(a)){const i=lB(a.items);return{customFormats:s.customFormats.concat(i.customFormats),formats:s.formats.concat([{title:a.title,items:i.formats}])}}else if(XL(a)||YL(a)||JL(a)){const d=`custom-${Nt(a.name)?a.name:a.title.toLowerCase()}`;return{customFormats:s.customFormats.concat([{name:d,format:a}]),formats:s.formats.concat([{title:a.title,format:d,icon:a.icon}])}}else return{...s,formats:s.formats.concat(a)}},{customFormats:[],formats:[]}),uB=(t,s)=>{const a=lB(s),i=d=>{R(d,g=>{t.formatter.has(g.name)||t.formatter.register(g.name,g.format)})};return t.formatter?i(a.customFormats):t.on("init",()=>{i(a.customFormats)}),a.formats},dB=t=>kD(t).map(s=>{const a=uB(t,s);return TD(t)?iB.concat(a):a}).getOr(iB),mB=t=>{const s=Re(t);return s.length===1&&nn(s,"title")},fB=(t,s,a)=>({...t,type:"formatter",isSelected:s(t.format),getStylePreview:a(t.format)}),y3=(t,s,a,i)=>{const d=T=>fB(T,a,i),g=T=>{const A=w(T.items);return{...T,type:"submenu",getStyleItems:Y(A)}},p=T=>{const A=Nt(T.name)?T.name:Yn(T.title),D=`custom-${A}`,N={...T,type:"formatter",format:D,isSelected:a(D),getStylePreview:i(D)};return t.formatter.register(A,N),N},w=T=>Ie(T,A=>cB(A)?g(A):v3(A)?d(A):mB(A)?{...A,type:"separator"}:p(A));return w(s)},gB=t=>{const s=w=>()=>t.formatter.match(w),a=w=>()=>{const T=t.formatter.get(w);return T!==void 0?_.some({tag:T.length>0&&(T[0].inline||T[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(w))}):_.none()},i=V([]),d=V([]),g=V(!1);return t.on("PreInit",w=>{const T=dB(t),A=y3(t,T,s,a);i.set(A)}),t.on("addStyleModifications",w=>{const T=y3(t,w.items,s,a);d.set(T),g.set(w.replace)}),{getData:()=>{const w=g.get()?[]:i.get(),T=d.get();return w.concat(T)}}},hB=t=>cn(t)&&t.nodeType===1,QL=El.trim,w3=t=>s=>!!(hB(s)&&(s.contentEditable===t||s.getAttribute("data-mce-contenteditable")===t)),pB=w3("true"),e7=w3("false"),C3=(t,s,a,i,d)=>({type:t,title:s,url:a,level:i,attach:d}),t7=t=>{let s=t;for(;s=s.parentNode;){const a=s.contentEditable;if(a&&a!=="inherit")return pB(s)}return!1},n7=(t,s)=>Ie(jc(Lt.fromDom(s),t),a=>a.dom),$d=t=>t.innerText||t.textContent,tk=t=>t.id?t.id:Yn("h"),nk=t=>t&&t.nodeName==="A"&&(t.id||t.name)!==void 0,o7=t=>nk(t)&&bB(t),ok=t=>t&&/^(H[1-6])$/.test(t.nodeName),bB=t=>t7(t)&&!e7(t),S3=t=>ok(t)&&bB(t),vB=t=>ok(t)?parseInt(t.nodeName.substr(1),10):0,x3=t=>{var s;const a=tk(t),i=()=>{t.id=a};return C3("header",(s=$d(t))!==null&&s!==void 0?s:"","#"+a,vB(t),i)},s7=t=>{const s=t.id||t.name,a=$d(t);return C3("anchor",a||"#"+s,"#"+s,0,Q)},yB=t=>Ie(Se(t,S3),x3),wB=t=>Ie(Se(t,o7),s7),k3=t=>n7("h1,h2,h3,h4,h5,h6,a:not([href])",t),r7=t=>QL(t.title).length>0,CB={find:t=>{const s=k3(t);return Se(yB(s).concat(wB(s)),r7)}},sk="tinymce-url-history",SB=5,T3=t=>Nt(t)&&/^https?/.test(t),xB=t=>hn(t)&&t.length<=SB&&z(t,T3),kB=t=>Et(t)&&sn(t,s=>!xB(s)).isNone(),TB=()=>{const t=Pb.getItem(sk);if(t===null)return{};let s;try{s=JSON.parse(t)}catch(a){if(a instanceof SyntaxError)return console.log("Local storage "+sk+" was not valid JSON",a),{};throw a}return kB(s)?s:(console.log("Local storage "+sk+" was not valid format",s),{})},a7=t=>{if(!kB(t))throw new Error(`Bad format for history:
`+JSON.stringify(t));Pb.setItem(sk,JSON.stringify(t))},c7=t=>{const s=TB();return qt(s,t).getOr([])},EB=(t,s)=>{if(!T3(t))return;const a=TB(),i=qt(a,s).getOr([]),d=Se(i,g=>g!==t);a[s]=[t].concat(d).slice(0,SB),a7(a)},Pd=t=>!!t,E3=t=>an(El.makeMap(t,/[, ]/),Pd),_3=t=>_.from(DD(t)),i7=t=>{const s=_.from(LS(t)).filter(Pd).map(E3);return _3(t).fold(Le,a=>s.fold(Me,i=>Re(i).length>0?i:!1))},l7=(t,s)=>{const a=i7(t);return Ut(a)?a?_3(t):_.none():a[s]?_3(t):_.none()},u7=(t,s)=>l7(t,s).map(a=>i=>di.nu(d=>{const g=(w,T)=>{if(!Nt(w))throw new Error("Expected value to be string");if(T!==void 0&&!Et(T))throw new Error("Expected meta to be a object");d({value:w,meta:T})},p={filetype:s,fieldname:i.fieldname,..._.from(i.meta).getOr({})};a.call(t,g,i.value,p)})),_B=t=>_.from(t).filter(Nt).getOrUndefined(),AB=t=>rp(t)?_.some({targets:CB.find(t.getBody()),anchorTop:_B(MD(t)),anchorBottom:_B(ND(t))}):_.none(),OB=t=>_.from(RD(t)),TU=t=>({getHistory:c7,addToHistory:EB,getLinkInformation:()=>AB(t),getValidationHandler:()=>OB(t),getUrlPicker:s=>u7(t,s)}),EU=(t,s,a)=>{const i=V(!1),d=qL(s),g={icons:()=>s.ui.registry.getAll().icons,menuItems:()=>s.ui.registry.getAll().menuItems,translate:Rd.translate,isDisabled:()=>s.mode.isReadOnly()||!s.ui.isEnabled(),getOption:s.options.get},p=TU(s),w=gB(s),T=ZL(s),A=GL(s),D=()=>i.get(),N=pe=>i.set(pe),U={shared:{providers:g,anchors:HL(s,a,d.isPositionedAtTop),header:d},urlinput:p,styles:w,colorinput:T,dialog:A,isContextMenuOpen:D,setContextMenuState:N},W={...U,shared:{...U.shared,interpreter:pe=>h3(pe,{},W),getSink:t.popup}},le={...U,shared:{...U.shared,interpreter:pe=>h3(pe,{},le),getSink:t.dialog}};return{popup:W,dialog:le}},mi=(t,s,a)=>{const i=(lt,_n)=>{R([s,...a],qn=>{qn.broadcastEvent(lt,_n)})},d=(lt,_n)=>{R([s,...a],qn=>{qn.broadcastOn([lt],_n)})},g=lt=>d(Ed(),{target:lt.target}),p=E(),w=ii(p,"touchstart",g),T=ii(p,"touchmove",lt=>i(NC(),lt)),A=ii(p,"touchend",lt=>i(cT(),lt)),D=ii(p,"mousedown",g),N=ii(p,"mouseup",lt=>{lt.raw.button===0&&d(vf(),{target:lt.target})}),U=lt=>d(Ed(),{target:Lt.fromDom(lt.target)}),W=lt=>{lt.button===0&&d(vf(),{target:Lt.fromDom(lt.target)})},le=()=>{R(t.editorManager.get(),lt=>{t!==lt&&lt.dispatch("DismissPopups",{relatedTarget:t})})},pe=lt=>i(S1(),ly(lt)),nt=lt=>{d(bf(),{}),i(Rp(),ly(lt))},$e=()=>d(bf(),{}),rt=lt=>{lt.state&&d(Ed(),{target:Lt.fromDom(t.getContainer())})},wn=lt=>{d(Ed(),{target:Lt.fromDom(lt.relatedTarget.getContainer())})};t.on("PostRender",()=>{t.on("click",U),t.on("tap",U),t.on("mouseup",W),t.on("mousedown",le),t.on("ScrollWindow",pe),t.on("ResizeWindow",nt),t.on("ResizeEditor",$e),t.on("AfterProgressState",rt),t.on("DismissPopups",wn)}),t.on("remove",()=>{t.off("click",U),t.off("tap",U),t.off("mouseup",W),t.off("mousedown",le),t.off("ScrollWindow",pe),t.off("ResizeWindow",nt),t.off("ResizeEditor",$e),t.off("AfterProgressState",rt),t.off("DismissPopups",wn),D.unbind(),w.unbind(),T.unbind(),A.unbind(),N.unbind()}),t.on("detach",()=>{R([s,...a],mE),R([s,...a],lt=>lt.destroy())})},rc=Hl,Bf=sS,rk=Y([Ke("shell",!1),At("makeItem"),Ke("setupItem",Q),Ll.field("listBehaviours",[zo])]),d7=du({name:"items",overrides:()=>({behaviours:mn([zo.config({})])})}),m7=Y([d7]),f7=Y("CustomList"),g7=(t,s,a,i)=>{const d=(w,T)=>{p(w).fold(()=>{throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},A=>{const D=zo.contents(A),N=T.length,U=N-D.length,W=U>0?Vt(U,()=>t.makeItem()):[],le=D.slice(N);R(le,nt=>zo.remove(A,nt)),R(W,nt=>zo.append(A,nt));const pe=zo.contents(A);R(pe,(nt,$e)=>{t.setupItem(w,nt,T[$e],$e)})})},g=t.shell?{behaviours:[zo.config({})],components:[]}:{behaviours:[],components:s},p=w=>t.shell?_.some(w):cr(w,t,"items");return{uid:t.uid,dom:t.dom,components:g.components,behaviours:pc(t.listBehaviours,g.behaviours),apis:{setItems:d}}},DB=qc({name:f7(),configFields:rk(),partFields:m7(),factory:g7,apis:{setItems:(t,s,a)=>{t.setItems(s,a)}}}),h0=Y([At("dom"),Ke("shell",!0),Na("toolbarBehaviours",[zo])]),RB=Y([du({name:"groups",overrides:()=>({behaviours:mn([zo.config({})])})})]),ak=(t,s,a,i)=>{const d=(w,T)=>{g(w).fold(()=>{throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},A=>{zo.set(A,T)})},g=w=>t.shell?_.some(w):cr(w,t,"groups"),p=t.shell?{behaviours:[zo.config({})],components:[]}:{behaviours:[],components:s};return{uid:t.uid,dom:t.dom,components:p.components,behaviours:pc(t.toolbarBehaviours,p.behaviours),apis:{setGroups:d},domModification:{attributes:{role:"group"}}}},Tm=qc({name:"Toolbar",configFields:h0(),partFields:RB(),factory:ak,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)}}}),MB=Q,h7=Le,A3=Y([]);var p7=Object.freeze({__proto__:null,setup:MB,isDocked:h7,getBehaviours:A3});const NB=t=>(_r(tr(t,"position"),"fixed")?_.none():Cc(t)).orThunk(()=>{const i=Lt.fromTag("span");return aa(t).bind(d=>{kc(d,i);const g=Cc(i);return Ql(i),g})}),O3=t=>NB(t).map(Ds).getOrThunk(()=>Yo(0,0)),BB=mt.generate([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),OU=(t,s)=>{const a=t.element;Sa(a,s.transitionClass),ua(a,s.fadeOutClass),Sa(a,s.fadeInClass),s.onShow(t)},b7=(t,s)=>{const a=t.element;Sa(a,s.transitionClass),ua(a,s.fadeInClass),Sa(a,s.fadeOutClass),s.onHide(t)},v7=(t,s)=>t.y<s.bottom&&t.bottom>s.y,y7=(t,s)=>t.y>=s.y,$B=(t,s)=>t.bottom<=s.bottom,ck=(t,s,a)=>z(t,i=>{switch(i){case"bottom":return $B(s,a);case"top":return y7(s,a)}}),PB=(t,s)=>s.getInitialPos().map(a=>no(a.bounds.x,a.bounds.y,br(t),dt(t))),w7=(t,s,a)=>{a.setInitialPos({style:Zr(t),position:Dt(t,"position")||"static",bounds:s})},D3=(t,s,a)=>a.getInitialPos().bind(i=>{switch(a.clearInitialPos(),i.position){case"static":return _.some(BB.static());case"absolute":const d=NB(t).map(os).getOrThunk(()=>os(ta()));return _.some(BB.absolute(Hu("absolute",qt(i.style,"left").map(g=>s.x-d.x),qt(i.style,"top").map(g=>s.y-d.y),qt(i.style,"right").map(g=>d.right-s.right),qt(i.style,"bottom").map(g=>d.bottom-s.bottom))));default:return _.none()}}),C7=(t,s,a)=>PB(t,a).filter(i=>ck(a.getModes(),i,s)).bind(i=>D3(t,i,a)),S7=(t,s,a)=>{const i=os(t);if(ck(a.getModes(),i,s))return _.none();{w7(t,i,a);const d=Xa(),g=i.x-d.x,p=s.y-d.y,w=d.bottom-s.bottom,T=i.y<=s.y;return _.some(BB.fixed(Hu("fixed",_.some(g),T?_.some(p):_.none(),_.none(),T?_.none():_.some(w))))}},x7=(t,s,a)=>{const i=t.element;return _r(tr(i,"position"),"fixed")?C7(i,s,a):S7(i,s,a)},k7=(t,s)=>{const a=t.element;return PB(a,s).bind(i=>D3(a,i,s))},ik=(t,s,a)=>{a.setDocked(!1),R(["left","right","top","bottom","position"],i=>Po(t.element,i)),s.onUndocked(t)},lk=(t,s,a,i)=>{const d=i.position==="fixed";a.setDocked(d),qp(t.element,i),(d?s.onDocked:s.onUndocked)(t)},FB=(t,s,a,i,d=!1)=>{s.contextual.each(g=>{g.lazyContext(t).each(p=>{const w=v7(p,i);w!==a.isVisible()&&(a.setVisible(w),d&&!w?(nm(t.element,[g.fadeOutClass]),g.onHide(t)):(w?OU:b7)(t,g))})})},T7=(t,s,a)=>{const i=s.lazyViewport(t);a.isDocked()&&FB(t,s,a,i),x7(t,i,a).each(g=>{g.fold(()=>ik(t,s,a),p=>lk(t,s,a,p),p=>{FB(t,s,a,i,!0),lk(t,s,a,p)})})},E7=(t,s,a)=>{const i=t.element;a.setDocked(!1),k7(t,a).each(d=>{d.fold(()=>ik(t,s,a),g=>lk(t,s,a,g),Q)}),a.setVisible(!0),s.contextual.each(d=>{pl(i,[d.fadeInClass,d.fadeOutClass,d.transitionClass]),d.onShow(t)}),R3(t,s,a)},R3=(t,s,a)=>{t.getSystem().isConnected()&&T7(t,s,a)},M3=(t,s,a)=>{a.isDocked()&&E7(t,s,a)};var uk=Object.freeze({__proto__:null,refresh:R3,reset:M3,isDocked:(t,s,a)=>a.isDocked(),getModes:(t,s,a)=>a.getModes(),setModes:(t,s,a,i)=>a.setModes(i)}),B3=Object.freeze({__proto__:null,events:(t,s)=>dr([tc(qd(),(a,i)=>{t.contextual.each(d=>{Ki(a.element,d.transitionClass)&&(pl(a.element,[d.transitionClass,d.fadeInClass]),(s.isVisible()?d.onShown:d.onHidden)(a)),i.stop()})}),zt(S1(),(a,i)=>{R3(a,t,s)}),zt(Rp(),(a,i)=>{M3(a,t,s)})])}),Xw=[vi("contextual",[la("fadeInClass"),la("fadeOutClass"),la("transitionClass"),wa("lazyContext"),ds("onShow"),ds("onShown"),ds("onHide"),ds("onHidden")]),Ma("lazyViewport",Xa),k("modes",["top","bottom"],Oa),ds("onDocked"),ds("onUndocked")],A7=Object.freeze({__proto__:null,init:t=>{const s=V(!1),a=V(!0),i=Wr(),d=V(t.modes),g=()=>`docked:  ${s.get()}, visible: ${a.get()}, modes: ${d.get().join(",")}`;return Bi({isDocked:s.get,setDocked:s.set,getInitialPos:i.get,setInitialPos:i.set,clearInitialPos:i.clear,isVisible:a.get,setVisible:a.set,getModes:d.get,setModes:d.set,readState:g})}});const ki=hc({fields:Xw,name:"docking",active:B3,apis:uk,state:A7}),dk=Y(Yn("toolbar-height-change")),Em={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},IB="tox-tinymce--toolbar-sticky-on",mk="tox-tinymce--toolbar-sticky-off",fk=(t,s)=>{const a=pa(s),d=Ic(s).dom.innerHeight,g=ji(a),p=Lt.fromDom(t.elm),w=Dr(p),T=dt(p),A=w.y,D=A+T,N=Ds(s),U=dt(s),W=N.top,le=W+U,pe=Math.abs(W-g.top)<2,nt=Math.abs(le-(g.top+d))<2;if(pe&&A<le)nh(g.left,A-U,a);else if(nt&&D>W){const $e=A-d+T+U;nh(g.left,$e,a)}},$3=(t,s)=>nn(ki.getModes(t),s),P3=t=>{const s=i=>Un(i)+(parseInt(Dt(i,"margin-top"),10)||0)+(parseInt(Dt(i,"margin-bottom"),10)||0),a=t.element;Ai(a).each(i=>{const d="padding-"+ki.getModes(t)[0];if(ki.isDocked(t)){const g=br(i);Vn(a,"width",g+"px"),Vn(i,d,s(a)+"px")}else Po(a,"width"),Po(i,d)})},Yb=(t,s)=>{s?(ua(t,Em.fadeOutClass),nm(t,[Em.transitionClass,Em.fadeInClass])):(ua(t,Em.fadeInClass),nm(t,[Em.fadeOutClass,Em.transitionClass]))},F3=(t,s)=>{const a=Lt.fromDom(t.getContainer());s?(Sa(a,IB),ua(a,mk)):(Sa(a,mk),ua(a,IB))},O7=(t,s)=>{const a=pa(s);Ji(a).filter(i=>!Us(s,i)).filter(i=>Us(i,Lt.fromDom(a.dom.body))||gi(t,i)).each(()=>im(s))},LB=(t,s)=>Fl(t).orThunk(()=>s().toOptional().bind(a=>Fl(a.element))),I3=(t,s,a)=>{t.inline||(s.header.isPositionedAtTop()||t.on("ResizeEditor",()=>{a().each(ki.reset)}),t.on("ResizeWindow ResizeEditor",()=>{a().each(P3)}),t.on("SkinLoaded",()=>{a().each(i=>{ki.isDocked(i)?ki.reset(i):ki.refresh(i)})}),t.on("FullscreenStateChanged",()=>{a().each(ki.reset)})),t.on("AfterScrollIntoView",i=>{a().each(d=>{ki.refresh(d);const g=d.element;el(g)&&fk(i,g)})}),t.on("PostRender",()=>{F3(t,!1)})},L3=t=>t().map(ki.isDocked).getOr(!1),D7=()=>[Pl.config({channels:{[dk()]:{onReceive:P3}}})],HB=(t,s)=>{const a=Wr(),i=s.getSink,d=w=>{i().each(T=>w(T.element))},g=w=>{t.inline||P3(w),F3(t,ki.isDocked(w)),w.getSystem().broadcastOn([bf()],{}),i().each(T=>T.getSystem().broadcastOn([bf()],{}))},p=t.inline?[]:D7();return[Ao.config({}),ki.config({contextual:{lazyContext:w=>{const T=Un(w.element),A=t.inline?t.getContentAreaContainer():t.getContainer(),D=os(Lt.fromDom(A)),N=D.height-T,U=D.y+($3(w,"top")?0:T);return _.some(no(D.x,U,D.width,N))},onShow:()=>{d(w=>Yb(w,!0))},onShown:w=>{d(T=>pl(T,[Em.transitionClass,Em.fadeInClass])),a.get().each(T=>{O7(w.element,T),a.clear()})},onHide:w=>{LB(w.element,i).fold(a.clear,a.set),d(T=>Yb(T,!1))},onHidden:()=>{d(w=>pl(w,[Em.transitionClass]))},...Em},lazyViewport:w=>{const T=Xa(),A=AD(t),D=T.y+($3(w,"top")?A:0),N=T.height-($3(w,"bottom")?A:0);return no(T.x,D,T.width,N)},modes:[s.header.getDockingMode()],onDocked:g,onUndocked:g}),...p]};var R7=Object.freeze({__proto__:null,setup:I3,isDocked:L3,getBehaviours:HB});const H3=t=>{const s=t.editor,a=t.sticky?HB:A3;return{uid:t.uid,dom:t.dom,components:t.components,behaviours:mn(a(s,t.sharedBackstage))}},M7=lo([Ba,Mi("items",Zt([ll([M_,bi("items",Oa)]),Oa]))].concat(Nb)),N7=t=>Ms("GroupToolbarButton",M7,t),B7=[ec("text"),ec("tooltip"),ec("icon"),Da("search",!1,Zt([si,lo([ec("placeholder")])],t=>Ut(t)?t?_.some({placeholder:_.none()}):_.none():_.some(t))),wa("fetch"),Ma("onSetup",()=>Q)],$7=lo([Ba,...B7]),zB=t=>Ms("menubutton",$7,t),P7=lo([Ba,kw,Cm,Jv,rR,V5,Rb,dl("presets","normal",["normal","color","listpreview"]),ex(1),Db,U5]),F7=t=>Ms("SplitButton",P7,t);var z3=zl({factory:(t,s)=>{const a=(d,g)=>{const p=Ie(g,w=>{const T={type:"menubutton",text:w.text,fetch:D=>{D(w.getItems())}},A=zB(T).mapError(D=>su(D)).getOrDie();return u3(A,"tox-mbtn",s.backstage,_.some("menuitem"))});zo.set(d,p)},i={focus:ho.focusIn,setMenus:a};return{uid:t.uid,dom:t.dom,components:[],behaviours:mn([zo.config({}),fs("menubar-events",[Ur(d=>{t.onSetup(d)}),zt(Gd(),(d,g)=>{da(d.element,".tox-mbtn--active").each(p=>{$l(g.event.target,".tox-mbtn").each(w=>{Us(p,w)||d.getSystem().getByDom(p).each(T=>{d.getSystem().getByDom(w).each(A=>{fu.expand(A),fu.close(T),Ao.focus(A)})})})})}),zt(Mp(),(d,g)=>{g.event.prevFocus.bind(p=>d.getSystem().getByDom(p).toOptional()).each(p=>{g.event.newFocus.bind(w=>d.getSystem().getByDom(w).toOptional()).each(w=>{fu.isOpen(p)&&(fu.expand(w),fu.close(p))})})})]),ho.config({mode:"flow",selector:".tox-mbtn",onEscape:d=>(t.onEscape(d),_.some(!0))}),Ta.config({})]),apis:i,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[At("dom"),At("uid"),At("onEscape"),At("backstage"),Ke("onSetup",Q)],apis:{focus:(t,s)=>{t.focus(s)},setMenus:(t,s,a)=>{t.setMenus(s,a)}}});const Jw="⚡️Upgrade",L7="https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_source=TinyMCE&utm_medium=SPAP&utm_campaign=SPAP&utm_id=editorreferral",H7=t=>({uid:t.uid,dom:t.dom,components:[{dom:{tag:"a",attributes:{href:L7,rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:Jw}}]}),Xb=(t,s)=>s.getAnimationRoot.fold(()=>t.element,a=>a(t)),$f=t=>t.dimension.property,Jb=(t,s)=>t.dimension.getDimension(s),gk=(t,s)=>{const a=Xb(t,s);pl(a,[s.shrinkingClass,s.growingClass])},V3=(t,s)=>{ua(t.element,s.openClass),Sa(t.element,s.closedClass),Vn(t.element,$f(s),"0px"),ne(t.element)},U3=(t,s)=>{ua(t.element,s.closedClass),Sa(t.element,s.openClass),Po(t.element,$f(s))},VB=(t,s,a,i)=>{a.setCollapsed(),Vn(t.element,$f(s),Jb(s,t.element)),gk(t,s),V3(t,s),s.onStartShrink(t),s.onShrunk(t)},z7=(t,s,a,i)=>{const d=i.getOrThunk(()=>Jb(s,t.element));a.setCollapsed(),Vn(t.element,$f(s),d),ne(t.element);const g=Xb(t,s);ua(g,s.growingClass),Sa(g,s.shrinkingClass),V3(t,s),s.onStartShrink(t)},UB=(t,s,a)=>{const i=Jb(s,t.element);(i==="0px"?VB:z7)(t,s,a,_.some(i))},WB=(t,s,a)=>{const i=Xb(t,s),d=Ki(i,s.shrinkingClass),g=Jb(s,t.element);U3(t,s);const p=Jb(s,t.element);(d?()=>{Vn(t.element,$f(s),g),ne(t.element)}:()=>{V3(t,s)})(),ua(i,s.shrinkingClass),Sa(i,s.growingClass),U3(t,s),Vn(t.element,$f(s),p),a.setExpanded(),s.onStartGrow(t)},V7=(t,s,a)=>{if(a.isExpanded()){Po(t.element,$f(s));const i=Jb(s,t.element);Vn(t.element,$f(s),i)}},ZB=(t,s,a)=>{a.isExpanded()||WB(t,s,a)},W3=(t,s,a)=>{a.isExpanded()&&UB(t,s,a)},Z3=(t,s,a)=>{a.isExpanded()&&VB(t,s,a)},U7=(t,s,a)=>a.isExpanded(),W7=(t,s,a)=>a.isCollapsed(),jB=(t,s,a)=>{const i=Xb(t,s);return Ki(i,s.growingClass)===!0},GB=(t,s,a)=>{const i=Xb(t,s);return Ki(i,s.shrinkingClass)===!0};var Z7=Object.freeze({__proto__:null,refresh:V7,grow:ZB,shrink:W3,immediateShrink:Z3,hasGrown:U7,hasShrunk:W7,isGrowing:jB,isShrinking:GB,isTransitioning:(t,s,a)=>jB(t,s)||GB(t,s),toggleGrow:(t,s,a)=>{(a.isExpanded()?UB:WB)(t,s,a)},disableTransitions:gk,immediateGrow:(t,s,a)=>{a.isExpanded()||(U3(t,s),Vn(t.element,$f(s),Jb(s,t.element)),gk(t,s),a.setExpanded(),s.onStartGrow(t),s.onGrown(t))}}),j7=Object.freeze({__proto__:null,exhibit:(t,s,a)=>{const i=s.expanded;return iu(i?{classes:[s.openClass],styles:{}}:{classes:[s.closedClass],styles:js(s.dimension.property,"0px")})},events:(t,s)=>dr([tc(qd(),(a,i)=>{i.event.raw.propertyName===t.dimension.property&&(gk(a,t),s.isExpanded()&&Po(a.element,t.dimension.property),(s.isExpanded()?t.onGrown:t.onShrunk)(a))})])}),KB=[At("closedClass"),At("openClass"),At("shrinkingClass"),At("growingClass"),Ns("getAnimationRoot"),ds("onShrunk"),ds("onStartShrink"),ds("onGrown"),ds("onStartGrow"),Ke("expanded",!1),Mi("dimension",pi("property",{width:[wr("property","width"),wr("getDimension",t=>br(t)+"px")],height:[wr("property","height"),wr("getDimension",t=>dt(t)+"px")]}))],q7=Object.freeze({__proto__:null,init:t=>{const s=V(t.expanded),a=()=>"expanded: "+s.get();return Bi({isExpanded:()=>s.get()===!0,isCollapsed:()=>s.get()===!1,setCollapsed:$t(s.set,!1),setExpanded:$t(s.set,!0),readState:a})}});const Fd=hc({fields:KB,name:"sliding",active:j7,apis:Z7,state:q7}),Qw="container",pk=[Na("slotBehaviours",[])],YB=t=>"<alloy.field."+t+">",K7=t=>{const s=(()=>{const g=[];return{slot:(w,T)=>(g.push(w),Wy(Qw,YB(w),T)),record:Y(g)}})(),a=t(s),i=s.record(),d=Ie(i,g=>Gc({name:g,pname:YB(g)}));return yb(Qw,pk,d,Y7,a)},Y7=(t,s)=>{const a=pe=>Sf(t),i=(pe,nt)=>cr(pe,t,nt),d=(pe,nt)=>($e,rt)=>cr($e,t,rt).map(wn=>pe(wn,rt)).getOr(nt),g=pe=>(nt,$e)=>{R($e,rt=>pe(nt,rt))},p=(pe,nt)=>ar(pe.element,"aria-hidden")!=="true",w=(pe,nt)=>{if(!p(pe)){const $e=pe.element;Po($e,"display"),de($e,"aria-hidden"),vo(pe,F0(),{name:nt,visible:!0})}},T=(pe,nt)=>{if(p(pe)){const $e=pe.element;Vn($e,"display","none"),ko($e,"aria-hidden","true"),vo(pe,F0(),{name:nt,visible:!1})}},A=d(p,!1),D=d(T),N=g(D),U=pe=>N(pe,a()),W=d(w),le={getSlotNames:a,getSlot:i,isShowing:A,hideSlot:D,hideAllSlots:U,showSlot:W};return{uid:t.uid,dom:t.dom,components:s,behaviours:Tg(t.slotBehaviours),apis:le}},Kc={...an({getSlotNames:(t,s)=>t.getSlotNames(s),getSlot:(t,s,a)=>t.getSlot(s,a),isShowing:(t,s,a)=>t.isShowing(s,a),hideSlot:(t,s,a)=>t.hideSlot(s,a),hideAllSlots:(t,s)=>t.hideAllSlots(s),showSlot:(t,s,a)=>t.showSlot(s,a)},t=>Sh(t)),sketch:K7},G3=lo([Cm,kw,Ma("onShow",Q),Ma("onHide",Q),Rb]),XB=t=>Ms("sidebar",G3,t),X7=t=>{const{sidebars:s}=t.ui.registry.getAll();R(Re(s),a=>{const i=s[a],d=()=>_r(_.from(t.queryCommandValue("ToggleSidebar")),a);t.ui.registry.addToggleButton(a,{icon:i.icon,tooltip:i.tooltip,onAction:g=>{t.execCommand("ToggleSidebar",!1,a),g.setActive(d())},onSetup:g=>{g.setActive(d());const p=()=>g.setActive(d());return t.on("ToggleSidebar",p),()=>{t.off("ToggleSidebar",p)}}})})},q3=t=>({element:()=>t.element.dom}),J7=(t,s)=>{const a=Ie(Re(s),i=>{const d=s[i],g=ou(XB(d));return{name:i,getApi:q3,onSetup:g.onSetup,onShow:g.onShow,onHide:g.onHide}});return Ie(a,i=>{const d=V(Q);return t.slot(i.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Bb.unnamedEvents([Md(i,d),Ew(i,d),zt(F0(),(g,p)=>{const w=p.event;se(a,A=>A.name===w.name).each(A=>{(w.visible?A.onShow:A.onHide)(A.getApi(g))})})])})})},Q7=t=>Kc.sketch(s=>({dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:J7(s,t),slotBehaviours:Bb.unnamedEvents([Ur(a=>Kc.hideAllSlots(a))])})),eH=(t,s,a)=>{ss.getCurrent(t).each(d=>{zo.set(d,[Q7(s)]);const g=a==null?void 0:a.toLowerCase();Nt(g)&&Kn(s,g)&&ss.getCurrent(d).each(p=>{Kc.showSlot(p,g),Fd.immediateGrow(d),Po(d.element,"width")})})},eC=(t,s)=>{ss.getCurrent(t).each(i=>{ss.getCurrent(i).each(g=>{Fd.hasGrown(i)?Kc.isShowing(g,s)?Fd.shrink(i):(Kc.hideAllSlots(g),Kc.showSlot(g,s)):(Kc.hideAllSlots(g),Kc.showSlot(g,s),Fd.grow(i))})})},tH=t=>ss.getCurrent(t).bind(a=>Fd.isGrowing(a)||Fd.hasGrown(a)?ss.getCurrent(a).bind(g=>se(Kc.getSlotNames(g),p=>Kc.isShowing(g,p))):_.none()),K3=Yn("FixSizeEvent"),Y3=Yn("AutoSizeEvent"),PU=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:mn([Ta.config({}),Ao.config({}),Fd.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:s=>{ss.getCurrent(s).each(Kc.hideAllSlots),Ws(s,Y3)},onGrown:s=>{Ws(s,Y3)},onStartGrow:s=>{vo(s,K3,{width:tr(s.element,"width").getOr("")})},onStartShrink:s=>{vo(s,K3,{width:br(s.element)+"px"})}}),zo.config({}),ss.config({find:s=>{const a=zo.contents(s);return uo(a)}})])}],behaviours:mn([Ju.childAt(0),fs("sidebar-sliding-events",[zt(K3,(s,a)=>{Vn(s.element,"width",a.event.width)}),zt(Y3,(s,a)=>{Po(s.element,"width")})])])});var oH=Object.freeze({__proto__:null,block:(t,s,a,i)=>{ko(t.element,"aria-busy",!0);const d=s.getRoot(t).getOr(t),g=mn([ho.config({mode:"special",onTab:()=>_.some(!0),onShiftTab:()=>_.some(!0)}),Ao.config({})]),p=i(d,g),w=d.getSystem().build(p);zo.append(d,vl(w)),w.hasConfigured(ho)&&s.focus&&ho.focusIn(w),a.isBlocked()||s.onBlock(t),a.blockWith(()=>zo.remove(d,w))},unblock:(t,s,a)=>{de(t.element,"aria-busy"),a.isBlocked()&&s.onUnblock(t),a.clear()}}),JB=[Ma("getRoot",_.none),Ra("focus",!0),ds("onBlock"),ds("onUnblock")],sH=Object.freeze({__proto__:null,init:()=>{const t=HT(),s=a=>{t.set({destroy:a})};return Bi({readState:t.isSet,blockWith:s,clear:t.clear,isBlocked:t.isSet})}});const Hg=hc({fields:JB,name:"blocking",apis:oH,state:sH}),rH=t=>{const s=t.dom.attributes!==void 0?t.dom.attributes:[];return Ee(s,(a,i)=>i.name==="class"?a:{...a,[i.name]:i.value},{})},aH=t=>Array.prototype.slice.call(t.dom.classList,0),zg=t=>{const s=Lt.fromHtml(t),a=er(s),i=rH(s),d=aH(s),g=a.length===0?{}:{innerHtml:em(s)};return{tag:qo(s),classes:d,attributes:i,...g}},cH=t=>(s,a)=>({dom:{tag:"div",attributes:{"aria-label":t.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:zg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),QB=t=>ss.getCurrent(t).each(s=>im(s.element)),iH=(t,s)=>{const a="tabindex",i=`data-mce-${a}`;_.from(t.iframeElement).map(Lt.fromDom).each(d=>{s?($(d,a).each(g=>ko(d,i,g)),ko(d,a,-1)):(de(d,a),$(d,i).each(g=>{ko(d,a,g),de(d,i)}))})},IU=(t,s,a,i)=>{const d=s.element;if(iH(t,a),a)Hg.block(s,cH(i)),Po(d,"display"),de(d,"aria-hidden"),t.hasFocus()&&QB(s);else{const g=ss.getCurrent(s).exists(p=>ty(p.element));Hg.unblock(s),Vn(d,"display","none"),ko(d,"aria-hidden","true"),g&&t.focus()}},LU=t=>({uid:t.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:mn([zo.config({}),Hg.config({focus:!1}),ss.config({find:s=>uo(s.components())})]),components:[]}),e$=t=>t.type==="focusin",t$=t=>e$(t)?(t.composed?uo(t.composedPath()):_.from(t.target)).map(Lt.fromDom).filter(xs).exists(a=>Ki(a,"mce-pastebin")):!1,lH=(t,s,a)=>{const i=V(!1),d=Wr(),g=w=>{i.get()&&!t$(w)&&(w.preventDefault(),QB(s()),t.editorManager.setActive(t))};t.inline||t.on("PreInit",()=>{t.dom.bind(t.getWin(),"focusin",g),t.on("BeforeExecCommand",w=>{w.command.toLowerCase()==="mcefocus"&&w.value!==!0&&g(w)})});const p=w=>{w!==i.get()&&(i.set(w),IU(t,s(),w,a.providers),kI(t,w))};t.on("ProgressState",w=>{if(d.on(clearTimeout),st(w.time)){const T=Hv.setEditorTimeout(t,()=>p(w.state),w.time);d.set(T)}else p(w.state),d.clear()})},uH=(t,s)=>Ee(t,(d,g)=>s(g,d.len).fold(Y(d),w=>({len:w.finish,list:d.list.concat([w])})),{len:0,list:[]}).list,jl=(t,s,a)=>({within:t,extra:s,withinWidth:a}),n$=(t,s,a)=>{const i=uH(t,(w,T)=>{const A=a(w);return _.some({element:w,start:T,finish:T+A,width:A})}),d=Se(i,w=>w.finish<=s),g=We(d,(w,T)=>w+T.width,0),p=i.slice(d.length);return{within:d,extra:p,withinWidth:g}},tC=t=>Ie(t,s=>s.element),o$=(t,s,a)=>{const i=tC(t.concat(s));return jl(i,[],a)},dH=(t,s,a,i)=>{const d=tC(t).concat([a]);return jl(d,tC(s),i)},nC=(t,s,a)=>jl(tC(t),[],a),mH=(t,s,a)=>{const i=n$(s,t,a);return i.extra.length===0?_.some(i):_.none()},bk=(t,s,a,i)=>{const d=mH(t,s,a).getOrThunk(()=>n$(s,t-a(i),a)),g=d.within,p=d.extra,w=d.withinWidth;return p.length===1&&p[0].width<=a(i)?o$(g,p,w):p.length>=1?dH(g,p,i,w):nC(g,p,w)},s$=(t,s)=>{const a=Ie(s,i=>vl(i));Tm.setGroups(t,a)},vk=t=>ao(t,s=>Fl(s.element).bind(a=>s.getSystem().getByDom(a).toOptional())),r$=(t,s,a)=>{const i=s.builtGroups.get();if(i.length===0)return;const d=Zn(t,s,"primary"),g=ra.getCoupled(t,"overflowGroup");Vn(d.element,"visibility","hidden");const p=i.concat([g]),w=vk(p);a([]),s$(d,p);const T=br(d.element),A=bk(T,s.builtGroups.get(),D=>br(D.element),g);A.extra.length===0?(zo.remove(d,g),a([])):(s$(d,A.within),a(A.extra)),Po(d.element,"visibility"),ne(d.element),w.each(Ao.focus)},ed=Y([Na("splitToolbarBehaviours",[ra]),Ec("builtGroups",()=>V([]))]),fH=Y([am(["overflowToggledClass"]),Yf("getOverflowBounds"),At("lazySink"),Ec("overflowGroups",()=>V([])),ds("onOpened"),ds("onClosed")].concat(ed())),yk=Y([Gc({factory:Tm,schema:h0(),name:"primary"}),Wu({schema:h0(),name:"overflow"}),Wu({name:"overflow-button"}),Wu({name:"overflow-group"})]),wk=Y((t,s)=>{Rs(t,Math.floor(s))}),gH=Y([am(["toggledClass"]),At("lazySink"),wa("fetch"),Yf("getBounds"),vi("fireDismissalEventInstead",[Ke("event",Yd())]),ff(),ds("onToggled")]),hH=Y([Wu({name:"button",overrides:t=>({dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:mn([Es.config({toggleClass:t.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:t.onToggled})])})}),Wu({factory:Tm,schema:h0(),name:"toolbar",overrides:t=>({toolbarBehaviours:mn([ho.config({mode:"cyclic",onEscape:s=>(cr(s,t,"button").each(Ao.focus),_.none())})])})})]),a$=(t,s)=>{const a=ra.getCoupled(t,"toolbarSandbox");ms.isOpen(a)?ms.close(a):ms.open(a,s.toolbar())},X3=(t,s,a,i)=>{const d=a.getBounds.map(p=>p()),g=a.lazySink(t).getOrDie();li.positionWithinBounds(g,s,{anchor:{type:"hotspot",hotspot:t,layouts:i,overrides:{maxWidthFunction:wk()}}},d)},c$=(t,s,a,i,d)=>{Tm.setGroups(s,d),X3(t,s,a,i),Es.on(t)},pH=(t,s,a)=>{const i=I1(),d=(p,w)=>{a.fetch().get(T=>{c$(t,w,a,s.layouts,T),i.link(t.element),ho.focusIn(w)})},g=()=>{Es.off(t),Ao.focus(t),i.unlink(t.element)};return{dom:{tag:"div",attributes:{id:i.id}},behaviours:mn([ho.config({mode:"special",onEscape:p=>(ms.close(p),_.some(!0))}),ms.config({onOpen:d,onClose:g,isPartOf:(p,w,T)=>sm(w,T)||sm(t,T),getAttachPoint:()=>a.lazySink(t).getOrDie()}),Pl.config({channels:{...Uh({isExtraPart:Le,...a.fireDismissalEventInstead.map(p=>({fireEventInstead:{event:p.event}})).getOr({})}),...bv({doReposition:()=>{ms.getState(ra.getCoupled(t,"toolbarSandbox")).each(p=>{X3(t,p,a,s.layouts)})}})}})])}},gp=qc({name:"FloatingToolbarButton",factory:(t,s,a,i)=>({...nl.sketch({...i.button(),action:d=>{a$(d,i)},buttonBehaviours:Ll.augment({dump:i.button().buttonBehaviours},[ra.config({others:{toolbarSandbox:d=>pH(d,a,t)}})])}),apis:{setGroups:(d,g)=>{ms.getState(ra.getCoupled(d,"toolbarSandbox")).each(p=>{c$(d,p,t,a.layouts,g)})},reposition:d=>{ms.getState(ra.getCoupled(d,"toolbarSandbox")).each(g=>{X3(d,g,t,a.layouts)})},toggle:d=>{a$(d,i)},getToolbar:d=>ms.getState(ra.getCoupled(d,"toolbarSandbox")),isOpen:d=>ms.isOpen(ra.getCoupled(d,"toolbarSandbox"))}}),configFields:gH(),partFields:hH(),apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},getToolbar:(t,s)=>t.getToolbar(s),isOpen:(t,s)=>t.isOpen(s)}}),i$=Y([At("items"),am(["itemSelector"]),Na("tgroupBehaviours",[ho])]),l$=Y([vb({name:"items",unit:"item"})]),bH=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,behaviours:pc(t.tgroupBehaviours,[ho.config({mode:"flow",selector:t.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}),oC=qc({name:"ToolbarGroup",configFields:i$(),partFields:l$(),factory:bH}),u$=t=>Ie(t,s=>vl(s)),d$=(t,s,a)=>{r$(t,a,i=>{a.overflowGroups.set(i),s.getOpt(t).each(d=>{gp.setGroups(d,u$(i))})})},vH=(t,s,a,i)=>{const d=xr(gp.sketch({fetch:()=>di.nu(g=>{g(u$(t.overflowGroups.get()))}),layouts:{onLtr:()=>[Oc,Ac],onRtl:()=>[Ac,Oc],onBottomLtr:()=>[Zc,ci],onBottomRtl:()=>[ci,Zc]},getBounds:a.getOverflowBounds,lazySink:t.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:t.markers.overflowToggledClass},parts:{button:i["overflow-button"](),toolbar:i.overflow()},onToggled:(g,p)=>t[p?"onOpened":"onClosed"](g)}));return{uid:t.uid,dom:t.dom,components:s,behaviours:pc(t.splitToolbarBehaviours,[ra.config({others:{overflowGroup:()=>oC.sketch({...i["overflow-group"](),items:[d.asSpec()]})}})]),apis:{setGroups:(g,p)=>{t.builtGroups.set(Ie(p,g.getSystem().build)),d$(g,d,t)},refresh:g=>d$(g,d,t),toggle:g=>{d.getOpt(g).each(p=>{gp.toggle(p)})},isOpen:g=>d.getOpt(g).map(gp.isOpen).getOr(!1),reposition:g=>{d.getOpt(g).each(p=>{gp.reposition(p)})},getOverflow:g=>d.getOpt(g).bind(gp.getToolbar)},domModification:{attributes:{role:"group"}}}},m$=qc({name:"SplitFloatingToolbar",configFields:fH(),partFields:yk(),factory:vH,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},reposition:(t,s)=>{t.reposition(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s),getOverflow:(t,s)=>t.getOverflow(s)}}),yH=Y([am(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),ds("onOpened"),ds("onClosed")].concat(ed())),wH=Y([Gc({factory:Tm,schema:h0(),name:"primary"}),Gc({factory:Tm,schema:h0(),name:"overflow",overrides:t=>({toolbarBehaviours:mn([Fd.config({dimension:{property:"height"},closedClass:t.markers.closedClass,openClass:t.markers.openClass,shrinkingClass:t.markers.shrinkingClass,growingClass:t.markers.growingClass,onShrunk:s=>{cr(s,t,"overflow-button").each(a=>{Es.off(a),Ao.focus(a)}),t.onClosed(s)},onGrown:s=>{ho.focusIn(s),t.onOpened(s)},onStartGrow:s=>{cr(s,t,"overflow-button").each(Es.on)}}),ho.config({mode:"acyclic",onEscape:s=>(cr(s,t,"overflow-button").each(Ao.focus),_.some(!0))})])})}),Wu({name:"overflow-button",overrides:t=>({buttonBehaviours:mn([Es.config({toggleClass:t.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])})}),Wu({name:"overflow-group"})]),CH=(t,s)=>cr(t,s,"overflow").map(Fd.hasGrown).getOr(!1),f$=(t,s)=>{cr(t,s,"overflow-button").bind(()=>cr(t,s,"overflow")).each(a=>{J3(t,s),Fd.toggleGrow(a)})},J3=(t,s)=>{cr(t,s,"overflow").each(a=>{r$(t,s,i=>{const d=Ie(i,g=>vl(g));Tm.setGroups(a,d)}),cr(t,s,"overflow-button").each(i=>{Fd.hasGrown(a)&&Es.on(i)}),Fd.refresh(a)})},SH=(t,s,a,i)=>{const d="alloy.toolbar.toggle",g=(p,w)=>{const T=Ie(w,p.getSystem().build);t.builtGroups.set(T)};return{uid:t.uid,dom:t.dom,components:s,behaviours:pc(t.splitToolbarBehaviours,[ra.config({others:{overflowGroup:p=>oC.sketch({...i["overflow-group"](),items:[nl.sketch({...i["overflow-button"](),action:w=>{Ws(p,d)}})]})}}),fs("toolbar-toggle-events",[zt(d,p=>{f$(p,t)})])]),apis:{setGroups:(p,w)=>{g(p,w),J3(p,t)},refresh:p=>J3(p,t),toggle:p=>f$(p,t),isOpen:p=>CH(p,t)},domModification:{attributes:{role:"group"}}}},Q3=qc({name:"SplitSlidingToolbar",configFields:yH(),partFields:wH(),factory:SH,apis:{setGroups:(t,s,a)=>{t.setGroups(s,a)},refresh:(t,s)=>{t.refresh(s)},toggle:(t,s)=>{t.toggle(s)},isOpen:(t,s)=>t.isOpen(s)}}),g$=t=>{const s=t.title.fold(()=>({}),a=>({attributes:{title:a}}));return{dom:{tag:"div",classes:["tox-toolbar__group"],...s},components:[oC.parts.items({})],items:t.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:mn([Ta.config({}),Ao.config({})])}},Ck=t=>oC.sketch(g$(t)),e4=(t,s)=>{const a=Ur(i=>{const d=Ie(t.initGroups,Ck);Tm.setGroups(i,d)});return mn([Ul.toolbarButton(t.providers.isDisabled),ka(),ho.config({mode:s,onEscape:t.onEscape,selector:".tox-toolbar__group"}),fs("toolbar-events",[a])])},sC=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return{uid:t.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":g$({title:_.none(),items:[]}),"overflow-button":UN({name:"more",icon:_.some("more-drawer"),enabled:!0,tooltip:_.some("More..."),primary:!1,buttonType:_.none(),borderless:!1},_.none(),t.providers)},splitToolbarBehaviours:e4(t,s)}},t4=t=>{const s=sC(t),a=4,i=m$.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return m$.sketch({...s,lazySink:t.getSink,getOverflowBounds:()=>{const d=t.moreDrawerData.lazyHeader().element,g=Dr(d),p=hi(d),w=Dr(p),T=Math.max(p.dom.scrollHeight,w.height);return no(g.x+a,w.y,g.width-a*2,T)},parts:{...s.parts,overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:t.attributes}}},components:[i],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>t.onToggled(d,!0),onClosed:d=>t.onToggled(d,!1)})},xH=t=>{const s=Q3.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),a=Q3.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),i=sC(t);return Q3.sketch({...i,components:[s,a],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:d=>{d.getSystem().broadcastOn([dk()],{type:"opened"}),t.onToggled(d,!0)},onClosed:d=>{d.getSystem().broadcastOn([dk()],{type:"closed"}),t.onToggled(d,!1)}})},Sk=t=>{const s=t.cyclicKeying?"cyclic":"acyclic";return Tm.sketch({uid:t.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(t.type===Ku.scrolling?["tox-toolbar--scrolling"]:[])},components:[Tm.parts.groups({})],toolbarBehaviours:e4(t,s)})},h$=[qf("type",["button"]),Ng,dl("buttonType","secondary",["primary","secondary"]),wa("onAction")],kH=pi("type",{button:h$}),TH=lo([k("buttons",[],kH),wa("onShow"),wa("onHide")]),EH=t=>Ms("view",TH,t),p$=(t,s)=>m3({text:t.text,enabled:!0,primary:!1,name:"name",icon:_.none(),borderless:!1,buttonType:_.some(t.buttonType)},a=>{t.onAction()},s),_H=t=>{const s=Ie(t.buttons,a=>p$(a,t.providers));return{uid:t.uid,dom:{tag:"div",classes:["tox-view__header"]},components:[Sm.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Sm.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:s})]}},AH=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-view__pane"]}}),n4=(t,s,a,i)=>{const d={getPane:g=>rc.getPart(g,t,"pane"),getOnShow:g=>t.viewConfig.onShow,getOnHide:g=>t.viewConfig.onHide};return{uid:t.uid,dom:t.dom,components:s,apis:d}};var p0=qc({name:"silver.View",configFields:[At("viewConfig")],partFields:[du({factory:{sketch:_H},schema:[At("buttons"),At("providers")],name:"header"}),du({factory:{sketch:AH},schema:[],name:"pane"})],factory:n4,apis:{getPane:(t,s)=>t.getPane(s),getOnShow:(t,s)=>t.getOnShow(s),getOnHide:(t,s)=>t.getOnHide(s)}});const OH=(t,s,a)=>ze(s,(i,d)=>{const g=ou(EH(i));return t.slot(d,p0.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:g,components:[...g.buttons.length>0?[p0.parts.header({buttons:g.buttons,providers:a})]:[],p0.parts.pane({})]}))}),b$=(t,s)=>Kc.sketch(a=>({dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:OH(a,t,s),slotBehaviours:Bb.unnamedEvents([Ur(i=>Kc.hideAllSlots(i))])})),v$=t=>se(Kc.getSlotNames(t),s=>Kc.isShowing(t,s)),y$=t=>{const s=t.element;Vn(s,"display","none"),ko(s,"aria-hidden","true")},DH=t=>{const s=t.element;Po(s,"display"),de(s,"aria-hidden")},w$=t=>({getContainer:Y(t)}),C$=(t,s,a)=>{Kc.getSlot(t,s).each(i=>{p0.getPane(i).each(d=>{a(i)(w$(d.element.dom))})})},RH=(t,s)=>C$(t,s,p0.getOnShow),MH=(t,s)=>C$(t,s,p0.getOnHide);var xk=zl({factory:(t,s)=>{const g={setViews:(p,w)=>{zo.set(p,[b$(w,s.backstage.shared.providers)])},whichView:p=>ss.getCurrent(p).bind(v$),toggleView:(p,w,T,A)=>ss.getCurrent(p).exists(D=>{const N=v$(D),U=N.exists(le=>A===le),W=Kc.getSlot(D,A).isSome();return W&&(Kc.hideAllSlots(D),U?(y$(p),w()):(T(),DH(p),Kc.showSlot(D,A),RH(D,A)),N.each(le=>MH(D,le))),W})};return{uid:t.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:mn([zo.config({}),ss.config({find:p=>{const w=zo.contents(p);return uo(w)}})]),apis:g}},name:"silver.ViewWrapper",configFields:[At("backstage")],apis:{setViews:(t,s,a)=>t.setViews(s,a),toggleView:(t,s,a,i,d)=>t.toggleView(s,a,i,d),whichView:(t,s)=>t.whichView(s)}});const BH=(t,s,a)=>{let i=!1;const d={getSocket:g=>rc.getPart(g,t,"socket"),setSidebar:(g,p,w)=>{rc.getPart(g,t,"sidebar").each(T=>eH(T,p,w))},toggleSidebar:(g,p)=>{rc.getPart(g,t,"sidebar").each(w=>eC(w,p))},whichSidebar:g=>rc.getPart(g,t,"sidebar").bind(tH).getOrNull(),getHeader:g=>rc.getPart(g,t,"header"),getToolbar:g=>rc.getPart(g,t,"toolbar"),setToolbar:(g,p)=>{rc.getPart(g,t,"toolbar").each(w=>{const T=Ie(p,Ck);w.getApis().setGroups(w,T)})},setToolbars:(g,p)=>{rc.getPart(g,t,"multiple-toolbar").each(w=>{const T=Ie(p,A=>Ie(A,Ck));DB.setItems(w,T)})},refreshToolbar:g=>{rc.getPart(g,t,"toolbar").each(w=>w.getApis().refresh(w))},toggleToolbarDrawer:g=>{rc.getPart(g,t,"toolbar").each(p=>{go(p.getApis().toggle,w=>w(p))})},isToolbarDrawerToggled:g=>rc.getPart(g,t,"toolbar").bind(p=>_.from(p.getApis().isOpen).map(w=>w(p))).getOr(!1),getThrobber:g=>rc.getPart(g,t,"throbber"),focusToolbar:g=>{rc.getPart(g,t,"toolbar").orThunk(()=>rc.getPart(g,t,"multiple-toolbar")).each(w=>{ho.focusIn(w)})},setMenubar:(g,p)=>{rc.getPart(g,t,"menubar").each(w=>{z3.setMenus(w,p)})},focusMenubar:g=>{rc.getPart(g,t,"menubar").each(p=>{z3.focus(p)})},setViews:(g,p)=>{rc.getPart(g,t,"viewWrapper").each(w=>{xk.setViews(w,p)})},toggleView:(g,p)=>rc.getPart(g,t,"viewWrapper").exists(w=>xk.toggleView(w,()=>d.showMainView(g),()=>d.hideMainView(g),p)),whichView:g=>rc.getPart(g,t,"viewWrapper").bind(xk.whichView).getOrNull(),hideMainView:g=>{i=d.isToolbarDrawerToggled(g),i&&d.toggleToolbarDrawer(g),rc.getPart(g,t,"editorContainer").each(p=>{const w=p.element;Vn(w,"display","none"),ko(w,"aria-hidden","true")})},showMainView:g=>{i&&d.toggleToolbarDrawer(g),rc.getPart(g,t,"editorContainer").each(p=>{const w=p.element;Po(w,"display"),de(w,"aria-hidden")})}};return{uid:t.uid,dom:t.dom,components:s,apis:d,behaviours:t.behaviours}},$H=Bf.optional({factory:z3,name:"menubar",schema:[At("backstage")]}),o4=t=>t.type===Ku.sliding?xH:t.type===Ku.floating?t4:Sk,s4=Bf.optional({factory:{sketch:t=>DB.sketch({uid:t.uid,dom:t.dom,listBehaviours:mn([ho.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:()=>Sk({type:t.type,uid:Yn("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:t.providers,onEscape:()=>(t.onEscape(),_.some(!0))}),setupItem:(s,a,i,d)=>{Tm.setGroups(a,i)},shell:!0})},name:"multiple-toolbar",schema:[At("dom"),At("onEscape")]}),PH=Bf.optional({factory:{sketch:t=>{const s=o4(t),a={type:t.type,uid:t.uid,onEscape:()=>(t.onEscape(),_.some(!0)),onToggled:(i,d)=>t.onToolbarToggled(d),cyclicKeying:!1,initGroups:[],getSink:t.getSink,providers:t.providers,moreDrawerData:{lazyToolbar:t.lazyToolbar,lazyMoreButton:t.lazyMoreButton,lazyHeader:t.lazyHeader},attributes:t.attributes};return s(a)}},name:"toolbar",schema:[At("dom"),At("onEscape"),At("getSink")]}),FH=Bf.optional({factory:{sketch:H3},name:"header",schema:[At("dom")]}),IH=Bf.optional({factory:{sketch:H7},name:"promotion",schema:[At("dom")]}),LH=Bf.optional({name:"socket",schema:[At("dom")]}),HH=Bf.optional({factory:{sketch:PU},name:"sidebar",schema:[At("dom")]}),zH=Bf.optional({factory:{sketch:LU},name:"throbber",schema:[At("dom")]}),VH=Bf.optional({factory:xk,name:"viewWrapper",schema:[At("backstage")]}),UH=t=>({uid:t.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:t.components}),S$=Bf.optional({factory:{sketch:UH},name:"editorContainer",schema:[]});var fr=qc({name:"OuterContainer",factory:BH,configFields:[At("dom"),At("behaviours")],partFields:[FH,$H,PH,s4,LH,HH,IH,zH,VH,S$],apis:{getSocket:(t,s)=>t.getSocket(s),setSidebar:(t,s,a,i)=>{t.setSidebar(s,a,i)},toggleSidebar:(t,s,a)=>{t.toggleSidebar(s,a)},whichSidebar:(t,s)=>t.whichSidebar(s),getHeader:(t,s)=>t.getHeader(s),getToolbar:(t,s)=>t.getToolbar(s),setToolbar:(t,s,a)=>{t.setToolbar(s,a)},setToolbars:(t,s,a)=>{t.setToolbars(s,a)},refreshToolbar:(t,s)=>t.refreshToolbar(s),toggleToolbarDrawer:(t,s)=>{t.toggleToolbarDrawer(s)},isToolbarDrawerToggled:(t,s)=>t.isToolbarDrawerToggled(s),getThrobber:(t,s)=>t.getThrobber(s),setMenubar:(t,s,a)=>{t.setMenubar(s,a)},focusMenubar:(t,s)=>{t.focusMenubar(s)},focusToolbar:(t,s)=>{t.focusToolbar(s)},setViews:(t,s,a)=>{t.setViews(s,a)},toggleView:(t,s,a)=>t.toggleView(s,a),whichView:(t,s)=>t.whichView(s)}});const r4="file edit view insert format tools table help",a4={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},b0=(t,s,a)=>{const i=IS(a).split(/[ ,]/);return{text:t.title,getItems:()=>q(t.items,d=>{const g=d.toLowerCase();return g.trim().length===0?[]:Fe(i,p=>p===g)?[]:g==="separator"||g==="|"?[{type:"separator"}]:s.menuItems[g]?[s.menuItems[g]]:[]})}},kk=t=>t.split(" "),x$=(t,s)=>{const a={...a4,...s.menus},i=Re(s.menus).length>0,d=s.menubar===void 0||s.menubar===!0?kk(r4):kk(s.menubar===!1?"":s.menubar),g=Se(d,w=>{const T=Kn(a4,w);return i?T||qt(s.menus,w).exists(A=>Kn(A,"items")):T}),p=Ie(g,w=>{const T=a[w];return b0({title:T.title,items:kk(T.items)},s,t)});return Se(p,w=>{const T=A=>Nt(A)||A.type!=="separator";return w.getItems().length>0&&Fe(w.getItems(),T)})},k$=t=>{const s=()=>{t._skinLoaded=!0,wI(t)};return()=>{t.initialized?s():t.on("init",s)}},WH=(t,s)=>()=>CI(t,{message:s}),T$=(t,s,a)=>(t.on("remove",()=>a.unload(s)),a.load(s)),ZH=(t,s)=>{const a=s+"/skin.min.css";return T$(t,a,t.ui.styleSheetLoader)},jH=(t,s)=>{if(zs(Lt.fromDom(t.getElement()))){const i=s+"/skin.shadowdom.min.css";return T$(t,i,lw.DOM.styleSheetLoader)}else return Promise.resolve()},E$=(t,s)=>{const a=Wv(s);a&&s.contentCSS.push(a+(t?"/content.inline":"/content")+".min.css"),!VS(s)&&Nt(a)?Promise.all([ZH(s,a),jH(s,a)]).then(k$(s),WH(s,"Skin could not be loaded")):k$(s)()},_$=$t(E$,!1),GH=$t(E$,!0),Tk=(t,s)=>a=>{const i=fg(),d=()=>{a.setActive(t.formatter.match(s));const g=t.formatter.formatChanged(s,a.setActive);i.set(g)};return t.initialized?d():t.once("init",d),()=>{t.off("init",d),i.clear()}},rC=(t,s,a)=>i=>{const d=()=>a(i),g=()=>{a(i),t.on(s,d)};return t.initialized?g():t.once("init",g),()=>{t.off("init",g),t.off(s,d)}},A$=t=>s=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("mceToggleFormat",!1,s.format)})},td=(t,s)=>()=>t.execCommand(s),qH=(t,s,a)=>{const i=(w,T,A,D)=>{const N=s.shared.providers.translate(w.title);if(w.type==="separator")return _.some({type:"separator",text:N});if(w.type==="submenu"){const U=q(w.getStyleItems(),W=>d(W,T,D));return T===0&&U.length<=0?_.none():_.some({type:"nestedmenuitem",text:N,enabled:U.length>0,getSubmenuItems:()=>q(w.getStyleItems(),W=>d(W,T,D))})}else return _.some({type:"togglemenuitem",text:N,icon:w.icon,active:w.isSelected(D),enabled:!A,onAction:a.onAction(w),...w.getStylePreview().fold(()=>({}),U=>({meta:{style:U}}))})},d=(w,T,A)=>{const D=w.type==="formatter"&&a.isInvalid(w);return T===0?D?[]:i(w,T,!1,A).toArray():i(w,T,D,A).toArray()},g=w=>{const T=a.getCurrentValue(),A=a.shouldHide?0:1;return q(w,D=>d(D,A,T))};return{validateItems:g,getFetch:(w,T)=>(A,D)=>{const N=T(),U=g(N),W=jb(U,ym.CLOSE_ON_EXECUTE,w,{isHorizontalMenu:!1,search:_.none()});D(W)}}},v0=(t,s,a)=>{const i=a.dataset,d=i.type==="basic"?()=>Ie(i.data,g=>fB(g,a.isSelectedFor,a.getPreviewFor)):i.getData;return{items:qH(t,s,a),getStyleItems:d}},aC=(t,s,a)=>{const{items:i,getStyleItems:d}=v0(t,s,a),g=w=>({getComponent:Y(w)}),p=rC(t,"NodeChange",w=>{const T=w.getComponent();a.updateText(T)});return Ux({text:a.icon.isSome()?_.none():a.text,icon:a.icon,tooltip:_.from(a.tooltip),role:_.none(),fetch:i.getFetch(s,d),onSetup:p,getApi:g,columns:1,presets:"normal",classes:a.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",s.shared)},KH=t=>Ie(t,s=>{let a=s,i=s;const d=s.split("=");return d.length>1&&(a=d[0],i=d[1]),{title:a,format:i}}),O$=t=>({type:"basic",data:t});var Qb;(function(t){t[t.SemiColon=0]="SemiColon",t[t.Space=1]="Space"})(Qb||(Qb={}));const D$=(t,s)=>s===Qb.SemiColon?t.replace(/;$/,"").split(";"):t.split(" "),c4=(t,s,a)=>{const i=t.options.get(s);return{type:"basic",data:KH(D$(i,a))}},Ek=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],R$=t=>{const s=()=>se(Ek,w=>t.formatter.match(w.format)),a=w=>()=>t.formatter.match(w),i=w=>_.none,d=w=>{const A=s().fold(Y("left"),D=>D.title.toLowerCase());vo(w,CN,{icon:`align-${A}`})},g=O$(Ek),p=w=>()=>se(Ek,T=>T.format===w.format).each(T=>t.execCommand(T.command));return{tooltip:"Align",text:_.none(),icon:_.some("align-left"),isSelectedFor:a,getCurrentValue:_.none,getPreviewFor:i,onAction:p,updateText:d,dataset:g,shouldHide:!1,isInvalid:w=>!t.formatter.canApply(w.format)}},YH=(t,s)=>aC(t,s,R$(t)),XH=(t,s)=>{const a=v0(t,s,R$(t));t.ui.registry.addNestedMenuItem("align",{text:s.shared.providers.translate("Align"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},i4=(t,s)=>{const a=s(),i=Ie(a,d=>d.format);return _.from(t.formatter.closest(i)).bind(d=>se(a,g=>g.format===d)).orThunk(()=>gr(t.formatter.match("p"),{title:"Paragraph",format:"p"}))},M$=t=>{const s="Paragraph",a=p=>()=>t.formatter.match(p),i=p=>()=>{const w=t.formatter.get(p);return w?_.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):_.none()},d=p=>{const T=i4(t,()=>g.data).fold(Y(s),A=>A.title);vo(p,Nf,{text:T})},g=c4(t,"block_formats",Qb.SemiColon);return{tooltip:"Blocks",text:_.some(s),icon:_.none(),isSelectedFor:a,getCurrentValue:_.none,getPreviewFor:i,onAction:A$(t),updateText:d,dataset:g,shouldHide:!1,isInvalid:p=>!t.formatter.canApply(p.format)}},N$=(t,s)=>aC(t,s,M$(t)),JH=(t,s)=>{const a=v0(t,s,M$(t));t.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},QH=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],B$=t=>{const s=t.split(/\s*,\s*/);return Ie(s,a=>a.replace(/^['"]+|['"]+$/g,""))},e9=t=>{const s=()=>{const a=B$(t.toLowerCase());return z(QH,i=>a.indexOf(i.toLowerCase())>-1)};return t.indexOf("-apple-system")===0&&s()},$$=t=>{const s="System Font",a=()=>{const A=le=>le?B$(le)[0]:"",D=t.queryCommandValue("FontName"),N=T.data,U=D?D.toLowerCase():"";return{matchOpt:se(N,le=>{const pe=le.format;return pe.toLowerCase()===U||A(pe).toLowerCase()===A(U).toLowerCase()}).orThunk(()=>gr(e9(U),{title:s,format:U})),font:D}},i=A=>D=>D.exists(N=>N.format===A),d=()=>{const{matchOpt:A}=a();return A},g=A=>()=>_.some({tag:"div",styles:A.indexOf("dings")===-1?{"font-family":A}:{}}),p=A=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontName",!1,A.format)})},w=A=>{const{matchOpt:D,font:N}=a(),U=D.fold(Y(N),W=>W.title);vo(A,Nf,{text:U})},T=c4(t,"font_family_formats",Qb.SemiColon);return{tooltip:"Fonts",text:_.some(s),icon:_.none(),isSelectedFor:i,getCurrentValue:d,getPreviewFor:g,onAction:p,updateText:w,dataset:T,shouldHide:!1,isInvalid:Le}},P$=(t,s)=>aC(t,s,$$(t)),t9=(t,s)=>{const a=v0(t,s,$$(t));t.ui.registry.addNestedMenuItem("fontfamily",{text:s.shared.providers.translate("Fonts"),getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},n9={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},o9={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},s9=(t,s)=>{const a=Math.pow(10,s);return Math.round(t*a)/a},r9=(t,s)=>/[0-9.]+px$/.test(t)?s9(parseInt(t,10)*72/96,s||0)+"pt":qt(o9,t).getOr(t),a9=t=>qt(n9,t).getOr(""),F$=t=>{const s=()=>{let T=_.none();const A=w.data,D=t.queryCommandValue("FontSize");if(D)for(let N=3;T.isNone()&&N>=0;N--){const U=r9(D,N),W=a9(U);T=se(A,le=>le.format===D||le.format===U||le.format===W)}return{matchOpt:T,size:D}},a=T=>A=>A.exists(D=>D.format===T),i=()=>{const{matchOpt:T}=s();return T},d=Y(_.none),g=T=>()=>{t.undoManager.transact(()=>{t.focus(),t.execCommand("FontSize",!1,T.format)})},p=T=>{const{matchOpt:A,size:D}=s(),N=A.fold(Y(D),U=>U.title);vo(T,Nf,{text:N})},w=c4(t,"font_size_formats",Qb.Space);return{tooltip:"Font sizes",text:_.some("12pt"),icon:_.none(),isSelectedFor:a,getPreviewFor:d,getCurrentValue:i,onAction:g,updateText:p,dataset:w,shouldHide:!1,isInvalid:Le}},I$=(t,s)=>aC(t,s,F$(t)),c9=(t,s)=>{const a=v0(t,s,F$(t));t.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",getSubmenuItems:()=>a.items.validateItems(a.getStyleItems())})},L$=(t,s)=>{const a="Paragraph",i=p=>()=>t.formatter.match(p),d=p=>()=>{const w=t.formatter.get(p);return w!==void 0?_.some({tag:w.length>0&&(w[0].inline||w[0].block)||"div",styles:t.dom.parseStyle(t.formatter.getCssText(p))}):_.none()},g=p=>{const w=N=>cB(N)?q(N.items,w):v3(N)?[{title:N.title,format:N.format}]:[],T=q(dB(t),w),D=i4(t,Y(T)).fold(Y(a),N=>N.title);vo(p,Nf,{text:D})};return{tooltip:"Formats",text:_.some(a),icon:_.none(),isSelectedFor:i,getCurrentValue:_.none,getPreviewFor:d,onAction:A$(t),updateText:g,shouldHide:ED(t),isInvalid:p=>!t.formatter.canApply(p.format),dataset:s}},H$=(t,s)=>{const a={type:"advanced",...s.styles};return aC(t,s,L$(t,a))},i9=(t,s)=>{const a={type:"advanced",...s.styles},i=v0(t,s,L$(t,a));t.ui.registry.addNestedMenuItem("styles",{text:"Formats",getSubmenuItems:()=>i.items.validateItems(i.getStyleItems())})};var z$=Object.freeze({__proto__:null,events:(t,s)=>{const a=(i,d)=>{t.updateState.each(g=>{const p=g(i,d);s.set(p)}),t.renderComponents.each(g=>{const p=g(d,s.get());(t.reuseDom?Fv:GO)(i,p)})};return dr([zt(au(),(i,d)=>{const g=d;if(!g.universal){const p=t.channel;nn(g.channels,p)&&a(i,g.data)}}),Ur((i,d)=>{t.initialData.each(g=>{a(i,g)})})])}}),u9=Object.freeze({__proto__:null,getState:(t,s,a)=>a}),d9=[At("channel"),Ns("renderComponents"),Ns("updateState"),Ns("initialData"),Ra("reuseDom",!0)],m9=Object.freeze({__proto__:null,init:()=>{const t=V(_.none()),s=()=>t.set(_.none());return{readState:()=>t.get().getOr("none"),get:t.get,set:t.set,clear:s}}});const Gl=hc({fields:d9,name:"reflecting",active:z$,apis:u9,state:m9}),f9=Y([At("toggleClass"),At("fetch"),lf("onExecute"),Ke("getHotspot",_.some),Ke("getAnchorOverrides",Y({})),ff(),lf("onItemExecute"),Ns("lazySink"),At("dom"),ds("onOpen"),Na("splitDropdownBehaviours",[ra,ho,Ao]),Ke("matchWidth",!1),Ke("useMinWidth",!1),Ke("eventOrder",{}),Ns("role")].concat(CA())),g9=Gc({factory:nl,schema:[At("dom")],name:"arrow",defaults:()=>({buttonBehaviours:mn([Ao.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(Xd)},buttonBehaviours:mn([Es.config({toggleOnExecute:!1,toggleClass:t.toggleClass})])})}),h9=Gc({factory:nl,schema:[At("dom")],name:"button",defaults:()=>({buttonBehaviours:mn([Ao.revoke()])}),overrides:t=>({dom:{tag:"span",attributes:{role:"presentation"}},action:s=>{s.getSystem().getByUid(t.uid).each(a=>{t.onExecute(a,s)})}})}),p9=Y([g9,h9,du({factory:{sketch:t=>({uid:t.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:t.text}})},schema:[At("text")],name:"aria-descriptor"}),Wu({schema:[Wp()],name:"menu",defaults:t=>({onExecute:(s,a)=>{s.getSystem().getByUid(t.uid).each(i=>{t.onItemExecute(i,s,a)})}})}),bx()]),b9=(t,s,a,i)=>{const d=D=>{ss.getCurrent(D).each(N=>{Vs.highlightFirst(N),ho.focusIn(N)})},g=D=>{yA(t,Ot,D,i,d,sa.HighlightMenuAndItem).get(Q)},p=D=>(g(D),_.some(!0)),w=D=>{const N=Zn(D,t,"button");return Xd(N),_.some(!0)},T={...dr([Ur((D,N)=>{cr(D,t,"aria-descriptor").each(W=>{const le=Yn("aria");ko(W.element,"id",le),ko(D.element,"aria-describedby",le)})})]),...DS(_.some(g))},A={repositionMenus:D=>{Es.isOn(D)&&fM(D)}};return{uid:t.uid,dom:t.dom,components:s,apis:A,eventOrder:{...t.eventOrder,[fl()]:["disabling","toggling","alloy.base.behaviour"]},events:T,behaviours:pc(t.splitDropdownBehaviours,[ra.config({others:{sandbox:D=>{const N=Zn(D,t,"arrow");return wA(t,D,{onOpen:()=>{Es.on(N),Es.on(D)},onClose:()=>{Es.off(N),Es.off(D)}})}}}),ho.config({mode:"special",onSpace:w,onEnter:w,onDown:p}),Ao.config({}),Es.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:t.role.getOr("button"),"aria-haspopup":!0}}}},_k=qc({name:"SplitDropdown",configFields:f9(),partFields:p9(),factory:b9,apis:{repositionMenus:(t,s)=>t.repositionMenus(s)}}),l4=t=>({isEnabled:()=>!To.isDisabled(t),setEnabled:s=>To.set(t,!s)}),v9=t=>({setActive:s=>{Es.set(t,s)},isActive:()=>Es.isOn(t),isEnabled:()=>!To.isDisabled(t),setEnabled:s=>To.set(t,!s)}),V$=(t,s)=>t.map(a=>({"aria-label":s.translate(a),title:s.translate(a)})).getOr({}),u4=Yn("focus-button"),Ak=(t,s,a,i,d,g)=>({dom:{tag:"button",classes:["tox-tbtn"].concat(s.isSome()?["tox-tbtn--select"]:[]),attributes:V$(a,g)},components:$b([t.map(p=>Gw(p,g.icons)),s.map(p=>Vx(p,"tox-tbtn",g))]),eventOrder:{[Vc()]:["focusing","alloy.base.behaviour","common-button-display-events"]},buttonBehaviours:mn([Ul.toolbarButton(g.isDisabled),ka(),fs("common-button-display-events",[zt(Vc(),(p,w)=>{w.event.prevent(),Ws(p,u4)})])].concat(i.map(p=>Gl.config({channel:p,initialData:{icon:t,text:s},renderComponents:(w,T)=>$b([w.icon.map(A=>Gw(A,g.icons)),w.text.map(A=>Vx(A,"tox-tbtn",g))])})).toArray()).concat(d.getOr([])))}),y9=(t,s,a,i)=>{const d=s.shared;return gp.sketch({lazySink:d.getSink,fetch:()=>di.nu(g=>{g(Ie(a(t.items),Ck))}),markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:Ak(t.icon,t.text,t.tooltip,_.none(),_.none(),d.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:i}}}})},U$=(t,s,a)=>{const i=V(Q),d=Ak(t.icon,t.text,t.tooltip,_.none(),_.none(),a);return nl.sketch({dom:d.dom,components:d.components,eventOrder:XA,buttonBehaviours:mn([fs("toolbar-button-events",[vN({onAction:t.onAction,getApi:s.getApi}),Md(s,i),Ew(s,i)]),Ul.toolbarButton(()=>!t.enabled||a.isDisabled()),ka()].concat(s.toolbarButtonBehaviours))})},w9=(t,s)=>W$(t,s,[]),W$=(t,s,a)=>U$(t,{toolbarButtonBehaviours:a.length>0?[fs("toolbarButtonWith",a)]:[],getApi:l4,onSetup:t.onSetup},s),C9=(t,s)=>Z$(t,s,[]),Z$=(t,s,a)=>U$(t,{toolbarButtonBehaviours:[zo.config({}),Es.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(a.length>0?[fs("toolbarToggleButtonWith",a)]:[]),getApi:v9,onSetup:t.onSetup},s),Ok=(t,s,a)=>i=>di.nu(d=>s.fetch(d)).map(d=>_.from(SA(vr(gA(Yn("menu-value"),d,g=>{s.onItemAction(t(i),g)},s.columns,s.presets,ym.CLOSE_ON_EXECUTE,s.select.getOr(Le),a),{movement:fx(s.columns,s.presets),menuBehaviours:Bb.unnamedEvents(s.columns!=="auto"?[]:[Ur((g,p)=>{I_(g,4,GD(s.presets)).each(({numRows:w,numColumns:T})=>{ho.setGridSize(g,w,T)})})])})))),S9=(t,s)=>{const a=Yn("channel-update-split-dropdown-display"),i=p=>({isEnabled:()=>!To.isDisabled(p),setEnabled:w=>To.set(p,!w),setIconFill:(w,T)=>{da(p.element,'svg path[id="'+w+'"], rect[id="'+w+'"]').each(A=>{ko(A,"fill",T)})},setActive:w=>{ko(p.element,"aria-pressed",w),da(p.element,"span").each(T=>{p.getSystem().getByDom(T).each(A=>Es.set(A,w))})},isActive:()=>da(p.element,"span").exists(w=>p.getSystem().getByDom(w).exists(Es.isOn))}),d=V(Q),g={getApi:i,onSetup:t.onSetup};return _k.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:{"aria-pressed":!1,...V$(t.tooltip,s.providers)}},onExecute:p=>{t.onAction(i(p))},onItemExecute:(p,w,T)=>{},splitDropdownBehaviours:mn([Ul.splitButton(s.providers.isDisabled),ka(),fs("split-dropdown-events",[zt(u4,Ao.focus),Md(g,d),Ew(g,d)]),a0.config({})]),eventOrder:{[bd()]:["alloy.base.behaviour","split-dropdown-events"]},toggleClass:"tox-tbtn--enabled",lazySink:s.getSink,fetch:Ok(i,t,s.providers),parts:{menu:Gv(!1,t.columns,t.presets)},components:[_k.parts.button(Ak(t.icon,t.text,_.none(),_.some(a),_.some([Es.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),s.providers)),_k.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:iw("chevron-down",s.providers.icons)},buttonBehaviours:mn([Ul.splitButton(s.providers.isDisabled),ka(),u_()])}),_k.parts["aria-descriptor"]({text:s.providers.translate("To open the popup, press Shift+Enter")})]})},Dk=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],hp=(t,s)=>(a,i,d)=>{const g=t(a).mapError(p=>su(p)).getOrDie();return s(g,i,d)},d4={button:hp(lR,(t,s)=>w9(t,s.shared.providers)),togglebutton:hp(P_,(t,s)=>C9(t,s.shared.providers)),menubutton:hp(zB,(t,s)=>u3(t,"tox-tbtn",s,_.none())),splitbutton:hp(F7,(t,s)=>S9(t,s.shared)),grouptoolbarbutton:hp(N7,(t,s,a)=>{const i=a.ui.registry.getAll().buttons,d=p=>iC(a,{buttons:i,toolbar:p,allowToolbarGroups:!1},s,_.none()),g={[my]:s.shared.header.isPositionedAtTop()?lm.TopToBottom:lm.BottomToTop};switch(Uv(a)){case Ku.floating:return y9(t,s,d,g);default:throw new Error("Toolbar groups are only supported when using floating toolbar mode")}})},x9=(t,s,a)=>qt(d4,t.type).fold(()=>(console.error("skipping button defined by",t),_.none()),i=>_.some(i(t,s,a))),j$={styles:H$,fontsize:I$,fontfamily:P$,blocks:N$,align:YH},k9=t=>{const s=Ie(Dk,a=>{const i=Se(a.items,d=>Kn(t,d)||Kn(j$,d));return{name:a.name,items:i}});return Se(s,a=>a.items.length>0)},T9=t=>{const s=t.split("|");return Ie(s,a=>({items:a.trim().split(" ")}))},E9=t=>Te(t,s=>Kn(s,"name")&&Kn(s,"items")),_9=t=>{const s=t.toolbar,a=t.buttons;return s===!1?[]:s===void 0||s===!0?k9(a):Nt(s)?T9(s):E9(s)?s:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},Rk=(t,s,a,i,d,g)=>qt(s,a.toLowerCase()).orThunk(()=>g.bind(p=>ao(p,w=>qt(s,w+a.toLowerCase())))).fold(()=>qt(j$,a.toLowerCase()).map(p=>p(t,d)),p=>p.type==="grouptoolbarbutton"&&!i?(console.warn(`Ignoring the '${a}' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.`),_.none()):x9(p,d,t)),iC=(t,s,a,i)=>{const d=_9(s),g=Ie(d,p=>{const w=q(p.items,T=>T.trim().length===0?[]:Rk(t,s.buttons,T,s.allowToolbarGroups,a,i).toArray());return{title:_.from(t.translate(p.name)),items:w}});return Se(g,p=>p.items.length>0)},m4=(t,s,a,i)=>{const d=s.mainUi.outerContainer,g=a.toolbar,p=a.buttons;if(Te(g,Nt)){const w=g.map(T=>{const A={toolbar:T,buttons:p,allowToolbarGroups:a.allowToolbarGroups};return iC(t,A,i,_.none())});fr.setToolbars(d,w)}else fr.setToolbar(d,iC(t,a,i,_.none()))},f4=Hc(),G$=f4.os.isiOS()&&f4.os.version.major<=12,A9=(t,s)=>{const{uiMotherships:a}=s,i=t.dom;let d=t.getWin();const g=t.getDoc().documentElement,p=V(Yo(d.innerWidth,d.innerHeight)),w=V(Yo(g.offsetWidth,g.offsetHeight)),T=()=>{const U=p.get();(U.left!==d.innerWidth||U.top!==d.innerHeight)&&(p.set(Yo(d.innerWidth,d.innerHeight)),J_(t))},A=()=>{const U=t.getDoc().documentElement,W=w.get();(W.left!==U.offsetWidth||W.top!==U.offsetHeight)&&(w.set(Yo(U.offsetWidth,U.offsetHeight)),J_(t))},D=U=>{GR(t,U)};i.bind(d,"resize",T),i.bind(d,"scroll",D);const N=iy(Lt.fromDom(t.getBody()),"load",A);t.on("hide",()=>{R(a,U=>{Vn(U.element,"display","none")})}),t.on("show",()=>{R(a,U=>{Po(U.element,"display")})}),t.on("NodeChange",A),t.on("remove",()=>{N.unbind(),i.unbind(d,"resize",T),i.unbind(d,"scroll",D),d=null})},q$=(t,s)=>{uu(t,s.dialogUi.mothership)};var O9=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=s,w=V(0),T=g.outerContainer;_$(t);const A=Lt.fromDom(d.targetNode),D=Ar(Ko(A));Ay(A,g.mothership),q$(D,s),t.on("PostRender",()=>{fr.setSidebar(T,a.sidebar,zS(t)),m4(t,s,a,i),w.set(t.getWin().innerWidth),fr.setMenubar(T,x$(t,a)),fr.setViews(T,a.views),A9(t,s)});const N=fr.getSocket(T).getOrDie("Could not find expected socket element");if(G$){Hr(N.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});const pe=s3(()=>{t.dispatch("ScrollContent")},20),nt=ii(N.element,"scroll",pe.throttle);t.on("remove",nt.unbind)}L_(t,s),t.addCommand("ToggleSidebar",(pe,nt)=>{fr.toggleSidebar(T,nt),t.dispatch("ToggleSidebar")}),t.addQueryValueHandler("ToggleSidebar",()=>{var pe;return(pe=fr.whichSidebar(T))!==null&&pe!==void 0?pe:""}),t.addCommand("ToggleView",(pe,nt)=>{if(fr.toggleView(T,nt)){const $e=T.element;g.mothership.broadcastOn([Ed()],{target:$e}),R(p,rt=>{rt.broadcastOn([Ed()],{target:$e})}),rn(fr.whichView(T))&&(t.focus(),t.nodeChanged())}}),t.addQueryValueHandler("ToggleView",()=>{var pe;return(pe=fr.whichView(T))!==null&&pe!==void 0?pe:""});const U=Uv(t),W=()=>{fr.refreshToolbar(s.mainUi.outerContainer)};(U===Ku.sliding||U===Ku.floating)&&t.on("ResizeWindow ResizeEditor ResizeContent",()=>{const pe=t.getWin().innerWidth;pe!==w.get()&&(W(),w.set(pe))});const le={setEnabled:pe=>{cx(s,!pe)},isEnabled:()=>!To.isDisabled(T)};return{iframeContainer:N.element.dom,editorContainer:T.element.dom,api:le}}});const g4=t=>/^[0-9\.]+(|px)$/i.test(""+t)?_.some(parseInt(""+t,10)):_.none(),h4=t=>st(t)?t+"px":t,Mk=(t,s,a)=>{const i=s.filter(g=>t<g),d=a.filter(g=>t>g);return i.or(d).getOr(t)},D9=t=>{const s=$S(t),a=mw(t),i=g_(t);return g4(s).map(d=>Mk(d,a,i))},R9=t=>D9(t).getOr($S(t)),p4=t=>{const s=PS(t),a=f_(t),i=FS(t);return g4(s).map(d=>Mk(d,a,i))},M9=t=>p4(t).getOr(PS(t)),{ToolbarLocation:b4,ToolbarMode:K$}=x5,N9=(t,s,a,i,d)=>{const{mainUi:g,uiMotherships:p}=a,w=lw.DOM,T=bw(t),A=yw(t),D=FS(t).or(p4(t)),N=i.shared.header,U=N.isPositionedAtTop,W=Uv(t),le=W===K$.sliding||W===K$.floating,pe=V(!1),nt=()=>pe.get()&&!t.removed,$e=ws=>le?ws.fold(Y(0),io=>io.components().length>1?dt(io.components()[1].element):0):0,rt=ws=>{switch(p_(t)){case b4.auto:const io=fr.getToolbar(g.outerContainer),Jo=$e(io),Bs=dt(ws.element)-Jo,hs=os(s);if(hs.y>Bs)return"top";{const Fn=hi(s),$o=Math.max(Fn.dom.scrollHeight,dt(Fn));return hs.bottom<$o-Bs||Xa().bottom<hs.bottom-Bs?"bottom":"top"}case b4.bottom:return"bottom";case b4.top:default:return"top"}},wn=ws=>{d.on(io=>{ki.setModes(io,[ws]),N.setDockingMode(ws);const Jo=U()?lm.TopToBottom:lm.BottomToTop;ko(io.element,my,Jo)})},lt=()=>{d.on(ws=>{const io=D.getOrThunk(()=>{const Jo=g4(Dt(ta(),"margin-left")).getOr(0);return br(ta())-Ds(s).left+Jo});Vn(ws.element,"max-width",io+"px")})},_n=()=>{d.on(ws=>{const io=fr.getToolbar(g.outerContainer),Jo=$e(io),Bs=os(s),hs=U()?Math.max(Bs.y-dt(ws.element)+Jo,0):Bs.bottom;Hr(g.outerContainer.element,{position:"absolute",top:Math.round(hs)+"px",left:Math.round(Bs.x)+"px"})})},qn=()=>{R(p,ws=>{ws.broadcastOn([bf()],{})})},Ln=(ws=!1)=>{if(nt()){if(T||lt(),le&&fr.refreshToolbar(g.outerContainer),T||_n(),A){const io=ws?ki.reset:ki.refresh;d.on(io)}qn()}},bo=(ws=!0)=>{T||!A||!nt()||d.on(io=>{const Jo=N.getDockingMode(),Bs=rt(io);Bs!==Jo&&(wn(Bs),ws&&Ln(!0))})};return{isVisible:nt,isPositionedAtTop:U,show:()=>{pe.set(!0),Vn(g.outerContainer.element,"display","flex"),w.addClass(t.getBody(),"mce-edit-focus"),R(p,ws=>{Po(ws.element,"display")}),bo(!1),Ln()},hide:()=>{pe.set(!1),Vn(g.outerContainer.element,"display","none"),w.removeClass(t.getBody(),"mce-edit-focus"),R(p,ws=>{Vn(ws.element,"display","none")})},update:Ln,updateMode:bo,repositionPopups:qn}},Y$=(t,s)=>{const a=os(t);return{pos:s?a.y:a.bottom,bounds:a}},y0=(t,s,a,i)=>{const d=V(Y$(s,a.isPositionedAtTop())),g=w=>{const{pos:T,bounds:A}=Y$(s,a.isPositionedAtTop()),{pos:D,bounds:N}=d.get(),U=A.height!==N.height||A.width!==N.width;d.set({pos:T,bounds:A}),U&&J_(t,w),a.isVisible()&&(D!==T?a.update(!0):U&&(a.updateMode(),a.repositionPopups()))};i||(t.on("activate",a.show),t.on("deactivate",a.hide)),t.on("SkinLoaded ResizeWindow",()=>a.update(!0)),t.on("NodeChange keydown",w=>{requestAnimationFrame(()=>g(w))}),t.on("ScrollWindow",()=>a.updateMode());const p=fg();p.set(iy(Lt.fromDom(t.getBody()),"load",w=>g(w.raw))),t.on("remove",()=>{p.clear()})},v4=(t,s)=>{uu(t,s.dialogUi.mothership)};var B9=Object.freeze({__proto__:null,render:(t,s,a,i,d)=>{const{mainUi:g}=s,p=Wr(),w=Lt.fromDom(d.targetNode),T=N9(t,w,s,i,p),A=_D(t);GH(t);const D=()=>{if(p.isSet()){T.show();return}p.set(fr.getHeader(g.outerContainer).getOrDie());const U=vw(t);uu(U,g.mothership),v4(U,s),m4(t,s,a,i),fr.setMenubar(g.outerContainer,x$(t,a)),T.show(),y0(t,w,T,A),t.nodeChanged()};t.on("show",D),t.on("hide",T.hide),A||(t.on("focus",D),t.on("blur",T.hide)),t.on("init",()=>{(t.hasFocus()||A)&&D()}),L_(t,s);const N={show:D,hide:T.hide,setEnabled:U=>{cx(s,!U)},isEnabled:()=>!To.isDisabled(g.outerContainer)};return{editorContainer:g.outerContainer.element.dom,api:N}}});const X$=()=>{const t=Wr(),s=Wr(),a=Wr();return{dialogUi:t,popupUi:s,mainUi:a,getUiMotherships:()=>[...t.get().map(g=>g.mothership).toArray()],setupDialogUi:g=>{t.set(g)},lazyGetInOuterOrDie:(g,p)=>()=>a.get().bind(w=>p(w.outerContainer)).getOrDie(`Could not find ${g} element in OuterContainer`)}},y4="contexttoolbar-show",w4="contexttoolbar-hide",J$=t=>({hide:()=>Ws(t,Dp()),getValue:()=>En.getValue(t)}),Q$=(t,s)=>zt(bN,(a,i)=>{const d=t.get(a),g=J$(d);s.onAction(g,i.event.buttonApi)}),w0=(t,s,a)=>{const{primary:i,...d}=s.original,g=ou(lR({...d,type:"button",onAction:Q}));return W$(g,a,[Q$(t,s)])},Nk=(t,s,a)=>{const{primary:i,...d}=s.original,g=ou(P_({...d,type:"togglebutton",onAction:Q}));return Z$(g,a,[Q$(t,s)])},C4=t=>t.type==="contextformtogglebutton",eP=(t,s,a)=>C4(s)?Nk(t,s,a):w0(t,s,a),tP=(t,s,a)=>{const i=Ie(s,p=>xr(eP(t,p,a)));return{asSpecs:()=>Ie(i,p=>p.asSpec()),findPrimary:p=>ao(s,(w,T)=>w.primary?_.from(i[T]).bind(A=>A.getOpt(p)).filter(ye(To.isDisabled)):_.none())}},S4=(t,s)=>{const a=t.label.fold(()=>({}),g=>({"aria-label":g})),i=xr(qv.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:t.initValue(),inputAttributes:a,selectOnFocus:!0,inputBehaviours:mn([ho.config({mode:"special",onEnter:g=>d.findPrimary(g).map(p=>(Xd(p),!0)),onLeft:(g,p)=>(p.cut(),_.none()),onRight:(g,p)=>(p.cut(),_.none())})])})),d=tP(i,t.commands,s);return[{title:_.none(),items:[i.asSpec()]},{title:_.none(),items:d.asSpecs()}]},$9={renderContextForm:(t,s,a)=>Sk({type:t,uid:Yn("context-toolbar"),initGroups:S4(s,a),onEscape:_.none,cyclicKeying:!0,providers:a}),buildInitGroups:S4},nP=(t,s,a)=>s.bottom-t.y>=a&&t.bottom-s.y>=a,P9=t=>{const s=t.getBoundingClientRect();if(s.height<=0&&s.width<=0){const a=He(Lt.fromDom(t.startContainer),t.startOffset).element;return(Lr(a)?aa(a):_.some(a)).filter(xs).map(d=>d.dom.getBoundingClientRect()).getOr(s)}else return s},x4=t=>{const s=t.selection.getRng(),a=P9(s);if(t.inline){const i=ji();return no(i.left+a.left,i.top+a.top,a.width,a.height)}else{const i=Dr(Lt.fromDom(t.getBody()));return no(i.x+a.left,i.y+a.top,a.width,a.height)}},oP=(t,s)=>s.filter(a=>Kr(a)&&Cs(a)).map(Dr).getOrThunk(()=>x4(t)),Bk=(t,s,a)=>{const i=Math.max(t.x+a,s.x),d=Math.min(t.right-a,s.right);return{x:i,width:d-i}},sP=(t,s,a,i,d,g)=>{const p=Lt.fromDom(t.getContainer()),w=da(p,".tox-editor-header").getOr(p),T=os(w),A=T.y>=s.bottom,D=i&&!A;if(t.inline&&D)return{y:Math.max(T.bottom+g,a.y),bottom:a.bottom};if(t.inline&&!D)return{y:a.y,bottom:Math.min(T.y-g,a.bottom)};const N=d==="line"?os(p):s;return D?{y:Math.max(T.bottom+g,a.y),bottom:Math.min(N.bottom-g,a.bottom)}:{y:Math.max(N.y+g,a.y),bottom:Math.min(T.y-g,a.bottom)}},k4=(t,s,a,i=0)=>{const d=cl(window),g=os(Lt.fromDom(t.getContentAreaContainer())),p=US(t)||Zv(t)||pw(t),{x:w,width:T}=Bk(g,d,i);if(t.inline&&!p)return no(w,d.y,T,d.height);{const A=s.header.isPositionedAtTop(),{y:D,bottom:N}=sP(t,g,d,A,a,i);return no(w,D,T,N-D)}},C0=12,rP={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},T4={maxHeightFunction:Qp(),maxWidthFunction:wk()},F9=(t,s)=>{const a=t.selection.getRng(),i=He(Lt.fromDom(a.startContainer),a.startOffset);return a.startContainer===a.endContainer&&a.startOffset===a.endOffset-1&&Us(i.element,s)},I9=(t,s,a)=>{const i=tr(t,"position");Vn(t,"position",s);const d=a(t);return i.each(g=>Vn(t,"position",g)),d},lC=t=>t==="node",aP=(t,s,a,i,d)=>{const g=x4(t),p=i.lastElement().exists(w=>Us(a,w));if(F9(t,a))return p?oB:km;if(p)return I9(s,i.getMode(),()=>nP(g,os(s),-20)&&!i.isReposition()?PL:oB);{const w=i.getMode()==="fixed"?d.y+ji().top:d.y,T=dt(s)+C0;return w+T<=g.y?km:Kb}},L9=(t,s,a,i)=>{const d=T=>(A,D,N,U,W)=>{const le=aP(t,U,T,a,W),pe={...A,y:W.y,height:W.height};return{...le(pe,D,N,U,W),alwaysFit:!0}},g=T=>lC(i)?[d(T)]:[];return s?{onLtr:T=>[Za,Ac,Oc,ci,Zc,Xi].concat(g(T)),onRtl:T=>[Za,Oc,Ac,Zc,ci,Xi].concat(g(T))}:{onLtr:T=>[Xi,Za,ci,Ac,Zc,Oc].concat(g(T)),onRtl:T=>[Xi,Za,Zc,Oc,ci,Ac].concat(g(T))}},H9=(t,s,a,i)=>s==="line"?{bubble:gg(C0,0,rP),layouts:{onLtr:()=>[j1],onRtl:()=>[G1]},overrides:T4}:{bubble:gg(0,C0,rP,1/C0),layouts:L9(t,a,i,s),overrides:T4},E4=(t,s)=>{const a=Se(s,g=>g.predicate(t.dom)),{pass:i,fail:d}=Ae(a,g=>g.type==="contexttoolbar");return{contextToolbars:i,contextForms:d}},z9=t=>{if(t.length<=1)return t;{const s=g=>Fe(t,p=>p.position===g),a=g=>Se(t,p=>p.position===g),i=s("selection"),d=s("node");if(i||d)if(d&&i){const g=a("node"),p=Ie(a("selection"),w=>({...w,position:"node"}));return g.concat(p)}else return a(i?"selection":"node");else return a("line")}},V9=t=>{if(t.length<=1)return t;{const s=i=>se(t,d=>d.position===i);return s("selection").orThunk(()=>s("node")).orThunk(()=>s("line")).map(i=>i.position).fold(()=>[],i=>Se(t,d=>d.position===i))}},cP=(t,s,a)=>{const i=E4(t,s);if(i.contextForms.length>0)return _.some({elem:t,toolbars:[i.contextForms[0]]});{const d=E4(t,a);if(d.contextForms.length>0)return _.some({elem:t,toolbars:[d.contextForms[0]]});if(i.contextToolbars.length>0||d.contextToolbars.length>0){const g=z9(i.contextToolbars.concat(d.contextToolbars));return _.some({elem:t,toolbars:g})}else return _.none()}},iP=(t,s,a)=>t(s)?_.none():fh(s,i=>{if(xs(i)){const{contextToolbars:d,contextForms:g}=E4(i,a.inNodeScope),p=g.length>0?g:V9(d);return p.length>0?_.some({elem:i,toolbars:p}):_.none()}else return _.none()},t),U9=(t,s)=>{const a=Lt.fromDom(s.getBody()),i=p=>Us(p,a),d=p=>!i(p)&&!gi(a,p),g=Lt.fromDom(s.selection.getNode());return d(g)?_.none():cP(g,t.inNodeScope,t.inEditorScope).orThunk(()=>iP(i,g,t))},W9=(t,s)=>{const a={},i=[],d=[],g={},p={},w=(D,N)=>{const U=ou(G5(N));a[D]=U,U.launch.map(W=>{g["form:"+D]={...N.launch,type:W.type==="contextformtogglebutton"?"togglebutton":"button",onAction:()=>{s(U)}}}),U.scope==="editor"?d.push(U):i.push(U),p[D]=U},T=(D,N)=>{Tw(N).each(U=>{N.scope==="editor"?d.push(U):i.push(U),p[D]=U})},A=Re(t);return R(A,D=>{const N=t[D];N.type==="contextform"?w(D,N):N.type==="contexttoolbar"&&T(D,N)}),{forms:a,inNodeScope:i,inEditorScope:d,lookupTable:p,formNavigators:g}},_4=Yn("forward-slide"),lP=Yn("backward-slide"),A4=Yn("change-slide-event"),O4="tox-pop--resizing",Z9=t=>{const s=V([]);return Jr.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:a=>{s.set([]),Jr.getContent(a).each(i=>{Po(i.element,"visibility")}),ua(a.element,O4),Po(a.element,"width")},inlineBehaviours:mn([fs("context-toolbar-events",[tc(qd(),(a,i)=>{i.event.raw.propertyName==="width"&&(ua(a.element,O4),Po(a.element,"width"))}),zt(A4,(a,i)=>{const d=a.element;Po(d,"width");const g=br(d);Jr.setContent(a,i.event.contents),Sa(d,O4);const p=br(d);Vn(d,"width",g+"px"),Jr.getContent(a).each(w=>{i.event.focus.bind(T=>(im(T),Fl(d))).orThunk(()=>(ho.focusIn(w),Ji(Ko(d))))}),setTimeout(()=>{Vn(a.element,"width",p+"px")},0)}),zt(_4,(a,i)=>{Jr.getContent(a).each(d=>{s.set(s.get().concat([{bar:d,focus:Ji(Ko(a.element))}]))}),vo(a,A4,{contents:i.event.forwardContents,focus:_.none()})}),zt(lP,(a,i)=>{eo(s.get()).each(d=>{s.set(s.get().slice(0,s.get().length-1)),vo(a,A4,{contents:vl(d.bar),focus:d.focus})})})]),ho.config({mode:"special",onEscape:a=>eo(s.get()).fold(()=>t.onEscape(),i=>(Ws(a,lP),_.some(!0)))})]),lazySink:()=>Fo.value(t.sink)})},D4="tox-pop--transition",R4=(t,s,a,i)=>{const d=i.backstage,g=d.shared,p=Hc().deviceType.isTouch,w=Wr(),T=Wr(),A=Wr(),D=Ci(Z9({sink:a,onEscape:()=>(t.focus(),_.some(!0))})),N=()=>{const yo=A.get().getOr("node"),Zo=lC(yo)?1:0;return k4(t,g,yo,Zo)},U=()=>!t.removed&&!(p()&&d.isContextMenuOpen()),W=yo=>_r(ys(yo,w.get(),Us),!0),le=()=>{if(U()){const yo=N(),Zo=_r(A.get(),"node")?oP(t,w.get()):x4(t);return yo.height<=0||!nP(Zo,yo,.01)}else return!0},pe=()=>{w.clear(),T.clear(),A.clear(),Jr.hide(D)},nt=()=>{if(Jr.isOpen(D)){const yo=D.element;Po(yo,"display"),le()?Vn(yo,"display","none"):(T.set(0),Jr.reposition(D))}},$e=yo=>({dom:{tag:"div",classes:["tox-pop__dialog"]},components:[yo],behaviours:mn([ho.config({mode:"acyclic"}),fs("pop-dialog-wrap-events",[Ur(Zo=>{t.shortcuts.add("ctrl+F9","focus statusbar",()=>ho.focusIn(Zo))}),Bl(Zo=>{t.shortcuts.remove("ctrl+F9")})])])}),rt=zr(()=>W9(s,yo=>{const Zo=_n([yo]);vo(D,_4,{forwardContents:$e(Zo)})})),wn=(yo,Zo)=>iC(t,{buttons:yo,toolbar:Zo.items,allowToolbarGroups:!1},i.backstage,_.some(["form:"])),lt=(yo,Zo)=>$9.buildInitGroups(yo,Zo),_n=yo=>{const{buttons:Zo}=t.ui.registry.getAll(),ws=rt(),io={...Zo,...ws.formNavigators},Jo=Uv(t)===Ku.scrolling?Ku.scrolling:Ku.default,Bs=H(Ie(yo,hs=>hs.type==="contexttoolbar"?wn(io,hs):lt(hs,g.providers)));return Sk({type:Jo,uid:Yn("context-toolbar"),initGroups:Bs,onEscape:_.none,cyclicKeying:!0,providers:g.providers})},qn=(yo,Zo)=>{const ws=yo==="node"?g.anchors.node(Zo):g.anchors.cursor(),io=H9(t,yo,p(),{lastElement:w.get,isReposition:()=>_r(T.get(),0),getMode:()=>li.getMode(a)});return vr(ws,io)},Ln=(yo,Zo)=>{if(bo.cancel(),!U())return;const ws=_n(yo),io=yo[0].position,Jo=qn(io,Zo);A.set(io),T.set(1);const Bs=D.element;Po(Bs,"display"),W(Zo)||(ua(Bs,D4),li.reset(a,D)),Jr.showWithinBounds(D,$e(ws),{anchor:Jo,transition:{classes:[D4],mode:"placement"}},()=>_.some(N())),Zo.fold(w.clear,w.set),le()&&Vn(Bs,"display","none")},bo=MN(()=>{if(!(!t.hasFocus()||t.removed))if(Ki(D.element,D4))bo.throttle();else{const yo=rt();U9(yo,t).fold(pe,Zo=>{Ln(Zo.toolbars,_.some(Zo.elem))})}},17);t.on("init",()=>{t.on("remove",pe),t.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",nt),t.on("click keyup focus SetContent",bo.throttle),t.on(w4,pe),t.on(y4,yo=>{const Zo=rt();qt(Zo.lookupTable,yo.toolbarKey).each(ws=>{Ln([ws],gr(yo.target!==t,yo.target)),Jr.getContent(D).each(ho.focusIn)})}),t.on("focusout",yo=>{Hv.setEditorTimeout(t,()=>{Fl(a.element).isNone()&&Fl(D.element).isNone()&&pe()},0)}),t.on("SwitchMode",()=>{t.mode.isReadOnly()&&pe()}),t.on("AfterProgressState",yo=>{yo.state?pe():t.hasFocus()&&bo.throttle()}),t.on("NodeChange",yo=>{Fl(D.element).fold(bo.throttle,Q)})})},j9=t=>{R([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],a=>{t.ui.registry.addToggleButton(a.name,{tooltip:a.text,icon:a.icon,onAction:td(t,a.cmd),onSetup:Tk(t,a.name)})}),t.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:td(t,"JustifyNone")})},G9={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},M4=(()=>{const t="[0-9]+",a="[eE]"+("[+-]?"+t),i="\\.",d=w=>`(?:${w})?`,p=`[+-]?(?:${["Infinity",t+i+d(t)+d(a),i+t+d(a),t+d(a)].join("|")})`;return new RegExp(`^(${p})(.*)$`)})(),uP=(t,s)=>Fe(s,a=>Fe(G9[a],i=>t===i)),dP=(t,s)=>_.from(M4.exec(t)).bind(i=>{const d=Number(i[1]),g=i[2];return uP(g,s)?_.some({value:d,unit:g}):_.none()}),q9=(t,s)=>dP(t,s).map(({value:a,unit:i})=>a+i),mP=(t,s)=>{const a=()=>{const i=s.getOptions(t),d=s.getCurrent(t).map(s.hash),g=Wr();return Ie(i,p=>({type:"togglemenuitem",text:s.display(p),onSetup:w=>{const T=D=>{D&&(g.on(N=>N.setActive(!1)),g.set(w)),w.setActive(D)};T(_r(d,s.hash(p)));const A=s.watcher(t,p,T);return()=>{g.clear(),A()}},onAction:()=>s.setCurrent(t,p)}))};t.ui.registry.addMenuButton(s.name,{tooltip:s.text,icon:s.icon,fetch:i=>i(a()),onSetup:s.onToolbarSetup}),t.ui.registry.addNestedMenuItem(s.name,{type:"nestedmenuitem",text:s.text,getSubmenuItems:a,onSetup:s.onMenuSetup})},K9={name:"lineheight",text:"Line height",icon:"line-height",getOptions:FD,hash:t=>q9(t,["fixed","relative","empty"]).getOr(t),display:Ot,watcher:(t,s,a)=>t.formatter.formatChanged("lineheight",a,!1,{value:s}).unbind,getCurrent:t=>_.from(t.queryCommandValue("LineHeight")),setCurrent:(t,s)=>t.execCommand("LineHeight",!1,s)},Y9=t=>_.from(h_(t)).map(a=>({name:"language",text:"Language",icon:"language",getOptions:Y(a),hash:i=>Ct(i.customCode)?i.code:`${i.code}/${i.customCode}`,display:i=>i.title,watcher:(i,d,g)=>{var p;return i.formatter.formatChanged("lang",g,!1,{value:d.code,customValue:(p=d.customCode)!==null&&p!==void 0?p:null}).unbind},getCurrent:i=>{const d=Lt.fromDom(i.selection.getNode());return pd(d,g=>_.some(g).filter(xs).bind(p=>$(p,"lang").map(T=>{const A=$(p,"data-mce-lang").getOrUndefined();return{code:T,customCode:A,title:""}})))},setCurrent:(i,d)=>i.execCommand("Lang",!1,d),onToolbarSetup:i=>{const d=fg();return i.setActive(t.formatter.match("lang",{},void 0,!0)),d.set(t.formatter.formatChanged("lang",i.setActive,!0)),d.clear}})),X9=t=>{mP(t,K9),Y9(t).each(s=>mP(t,s))},fP=(t,s)=>{XH(t,s),t9(t,s),i9(t,s),JH(t,s),c9(t,s)},J9=t=>rC(t,"NodeChange",s=>{s.setEnabled(t.queryCommandState("outdent"))}),gP=t=>{t.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:J9(t),onAction:td(t,"outdent")}),t.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:td(t,"indent")})},Q9=t=>{gP(t)},hP=(t,s)=>a=>{a.setActive(s.get());const i=d=>{s.set(d.state),a.setActive(d.state)};return t.on("PastePlainTextToggle",i),()=>t.off("PastePlainTextToggle",i)},N4=t=>{const s=V(y_(t)),a=()=>t.execCommand("mceTogglePlainTextPaste");t.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:a,onSetup:hP(t,s)}),t.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:a,onSetup:hP(t,s)})},$k=(t,s)=>()=>{t.execCommand("mceToggleFormat",!1,s)},pP=t=>{El.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(s,a)=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onSetup:Tk(t,s.name),onAction:$k(t,s.name)})});for(let s=1;s<=6;s++){const a="h"+s;t.ui.registry.addToggleButton(a,{text:a.toUpperCase(),tooltip:"Heading "+s,onSetup:Tk(t,a),onAction:$k(t,a)})}},B4=t=>{El.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"print",text:"Print",action:"mcePrint",icon:"print"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addButton(s.name,{tooltip:s.text,icon:s.icon,onAction:td(t,s.action)})})},ez=t=>{El.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],s=>{t.ui.registry.addToggleButton(s.name,{tooltip:s.text,icon:s.icon,onAction:td(t,s.action),onSetup:Tk(t,s.name)})})},tz=t=>{pP(t),B4(t),ez(t)},nz=t=>{El.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],s=>{t.ui.registry.addMenuItem(s.name,{text:s.text,icon:s.icon,shortcut:s.shortcut,onAction:td(t,s.action)})}),t.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:$k(t,"code")})},oz=t=>{tz(t),nz(t)},uC=(t,s)=>rC(t,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",a=>{a.setEnabled(!t.mode.isReadOnly()&&t.undoManager[s]())}),sz=t=>{t.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:uC(t,"hasUndo"),onAction:td(t,"undo")}),t.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:uC(t,"hasRedo"),onAction:td(t,"redo")})},rz=t=>{t.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:uC(t,"hasUndo"),onAction:td(t,"undo")}),t.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:uC(t,"hasRedo"),onAction:td(t,"redo")})},az=t=>{sz(t),rz(t)},cz=t=>rC(t,"VisualAid",s=>{s.setActive(t.hasVisual)}),iz=t=>{t.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:cz(t),onAction:td(t,"mceToggleVisualAid")})},lz=t=>{t.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:td(t,"mceToggleVisualAid")})},uz=t=>{lz(t),iz(t)},dz=(t,s)=>{j9(t),oz(t),fP(t,s),az(t),RI(t),uz(t),Q9(t),X9(t),N4(t)},bP=t=>Nt(t)?t.split(/[ ,]/):t,vP=t=>s=>s.options.get(t),yP=t=>{const s=t.options.register;s("contextmenu_avoid_overlap",{processor:"string",default:""}),s("contextmenu_never_use_native",{processor:"boolean",default:!1}),s("contextmenu",{processor:a=>a===!1?{value:[],valid:!0}:Nt(a)||Te(a,Nt)?{value:bP(a),valid:!0}:{valid:!1,message:"Must be false or a string."},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})},wP=vP("contextmenu_never_use_native"),mz=vP("contextmenu_avoid_overlap"),fz=t=>pp(t).length===0,pp=t=>{const s=t.ui.registry.getAll().contextMenus,a=t.options.get("contextmenu");return t.options.isSet("contextmenu")?a:Se(a,i=>Kn(s,i))},S0=(t,s)=>({type:"makeshift",x:t,y:s}),gz=(t,s,a)=>S0(t.x+s,t.y+a),CP=t=>t.type==="longpress"||t.type.indexOf("touch")===0,hz=t=>{if(CP(t)){const s=t.touches[0];return S0(s.pageX,s.pageY)}else return S0(t.pageX,t.pageY)},pz=t=>{if(CP(t)){const s=t.touches[0];return S0(s.clientX,s.clientY)}else return S0(t.clientX,t.clientY)},SP=(t,s)=>{const a=lw.DOM.getPos(t);return gz(s,a.x,a.y)},bz=(t,s)=>s.type==="contextmenu"||s.type==="longpress"?t.inline?hz(s):SP(t.getContentAreaContainer(),pz(s)):xP(t),xP=t=>({type:"selection",root:Lt.fromDom(t.selection.getNode())}),vz=t=>({type:"node",node:_.some(Lt.fromDom(t.selection.getNode())),root:Lt.fromDom(t.getBody())}),kP=(t,s,a)=>{switch(a){case"node":return vz(t);case"point":return bz(t,s);case"selection":return xP(t)}},yz=(t,s,a,i,d,g)=>{const p=a(),w=kP(t,s,g);jb(p,ym.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!1,search:_.none()}).map(T=>{s.preventDefault(),Jr.showMenuAt(d,{anchor:w},{menu:{markers:Ob("normal")},data:T})})},wz={onLtr:()=>[Za,Ac,Oc,ci,Zc,Xi,km,Kb,Yw,ek,Kw,qw],onRtl:()=>[Za,Oc,Ac,Zc,ci,Xi,km,Kb,Kw,qw,Yw,ek]},Cz=12,Sz={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},TP=(t,s)=>{const a=t.selection;if(a.isCollapsed()||s.touches.length<1)return!1;{const i=s.touches[0],d=a.getRng();return uv(t.getWin(),dm.domRange(d)).exists(p=>p.left<=i.clientX&&p.right>=i.clientX&&p.top<=i.clientY&&p.bottom>=i.clientY)}},EP=t=>{const s=t.selection.getRng(),a=()=>{Hv.setEditorTimeout(t,()=>{t.selection.setRng(s)},10),g()};t.once("touchend",a);const i=p=>{p.preventDefault(),p.stopImmediatePropagation()};t.on("mousedown",i,!0);const d=()=>g();t.once("longpresscancel",d);const g=()=>{t.off("touchend",a),t.off("longpresscancel",d),t.off("mousedown",i)}},xz=(t,s,a)=>{const i=kP(t,s,a);return{bubble:gg(0,a==="point"?Cz:0,Sz),layouts:wz,overrides:{maxWidthFunction:wk(),maxHeightFunction:Qp()},...i}},dC=(t,s,a,i,d,g,p)=>{const w=xz(t,s,g);jb(a,ym.CLOSE_ON_EXECUTE,i,{isHorizontalMenu:!0,search:_.none()}).map(T=>{s.preventDefault();const A=p?sa.HighlightMenuAndItem:sa.HighlightNone;Jr.showMenuWithinBounds(d,{anchor:w},{menu:{markers:Ob("normal"),highlightOnOpen:A},data:T,type:"horizontal"},()=>_.some(k4(t,i.shared,g==="node"?"node":"selection"))),t.dispatch(w4)})},kz=(t,s,a,i,d,g)=>{const p=Hc(),w=p.os.isiOS(),T=p.os.isMacOS(),A=p.os.isAndroid(),D=p.deviceType.isTouch(),N=()=>!(A||w||T&&D),U=()=>{const W=a();dC(t,s,W,i,d,g,N())};if((T||w)&&g!=="node"){const W=()=>{EP(t),U()};TP(t,s)?W():(t.once("selectionchange",W),t.once("touchend",()=>t.off("selectionchange",W)))}else U()},_P=t=>Nt(t)?t==="|":t.type==="separator",mC={type:"separator"},AP=t=>{const s=a=>({text:a.text,icon:a.icon,enabled:a.enabled,shortcut:a.shortcut});if(Nt(t))return t;switch(t.type){case"separator":return mC;case"submenu":return{type:"nestedmenuitem",...s(t),getSubmenuItems:()=>{const i=t.getSubmenuItems();return Nt(i)?i:Ie(i,AP)}};default:const a=t;return{type:"menuitem",...s(a),onAction:ht(a.onAction)}}},OP=(t,s)=>{if(s.length===0)return t;const i=eo(t).filter(d=>!_P(d)).fold(()=>[],d=>[mC]);return t.concat(i).concat(s).concat([mC])},Tz=(t,s,a)=>{const i=Ee(s,(d,g)=>qt(t,g.toLowerCase()).map(p=>{const w=p.update(a);if(Nt(w))return OP(d,w.split(" "));if(w.length>0){const T=Ie(w,AP);return OP(d,T)}else return d}).getOrThunk(()=>d.concat([g])),[]);return i.length>0&&_P(i[i.length-1])&&i.pop(),i},Ez=(t,s)=>s.ctrlKey&&!wP(t),_z=t=>t.type==="longpress"||Kn(t,"touches"),DP=(t,s)=>!_z(s)&&(s.button!==2||s.target===t.getBody()&&s.pointerType===""),RP=(t,s)=>DP(t,s)?t.selection.getStart(!0):s.target,Az=(t,s)=>{const a=mz(t),i=DP(t,s)?"selection":"point";if(vt(a)){const d=RP(t,s);return Nw(Lt.fromDom(d),a)?"node":i}else return i},Oz=(t,s,a)=>{const d=Hc().deviceType.isTouch,g=Ci(Jr.sketch({dom:{tag:"div"},lazySink:s,onEscape:()=>t.focus(),onShow:()=>a.setContextMenuState(!0),onHide:()=>a.setContextMenuState(!1),fireDismissalEventInstead:{},inlineBehaviours:mn([fs("dismissContextMenu",[zt(Yd(),(T,A)=>{ms.close(T),t.focus()})])])})),p=()=>Jr.hide(g),w=T=>{if(wP(t)&&T.preventDefault(),Ez(t,T)||fz(t))return;const A=Az(t,T),D=()=>{const U=RP(t,T),W=t.ui.registry.getAll(),le=pp(t);return Tz(W.contextMenus,le,U)};(d()?kz:yz)(t,T,D,a,g,A)};t.on("init",()=>{const T="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(d()?"":" ResizeWindow");t.on(T,p),t.on("longpress contextmenu",w)})},$4=mt.generate([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),Pk=t=>s=>s.translate(-t.left,-t.top),Fk=t=>s=>s.translate(t.left,t.top),Vg=t=>(s,a)=>Ee(t,(i,d)=>d(i),Yo(s,a)),Ik=(t,s,a)=>t.fold(Vg([Fk(a),Pk(s)]),Vg([Pk(s)]),Vg([])),x0=(t,s,a)=>t.fold(Vg([Fk(a)]),Vg([]),Vg([Fk(s)])),MP=(t,s,a)=>t.fold(Vg([]),Vg([Pk(a)]),Vg([Fk(s),Pk(a)])),Dz=(t,s,a,i,d,g)=>{const p=x0(t,d,g),w=x0(s,d,g);return Math.abs(p.left-w.left)<=a&&Math.abs(p.top-w.top)<=i},Lk=(t,s,a,i,d,g)=>{const p=x0(t,d,g),w=x0(s,d,g),T=Math.abs(p.left-w.left),A=Math.abs(p.top-w.top);return Yo(T,A)},NP=(t,s,a)=>{const i=t.fold((d,g)=>({position:_.some("absolute"),left:_.some(d+"px"),top:_.some(g+"px")}),(d,g)=>({position:_.some("absolute"),left:_.some(d-a.left+"px"),top:_.some(g-a.top+"px")}),(d,g)=>({position:_.some("fixed"),left:_.some(d+"px"),top:_.some(g+"px")}));return{right:_.none(),bottom:_.none(),...i}},Rz=(t,s,a)=>t.fold((i,d)=>Hk(i+s,d+a),(i,d)=>bp(i+s,d+a),(i,d)=>e1(i+s,d+a)),P4=(t,s,a,i)=>{const d=(g,p)=>(w,T)=>{const A=g(s,a,i);return p(w.getOr(A.left),T.getOr(A.top))};return t.fold(d(MP,Hk),d(x0,bp),d(Ik,e1))},Hk=$4.offset,bp=$4.absolute,e1=$4.fixed,F4=(t,s)=>{const a=ar(t,s);return Ct(a)?NaN:parseInt(a,10)},Mz=(t,s)=>{const a=t.element,i=F4(a,s.leftAttr),d=F4(a,s.topAttr);return isNaN(i)||isNaN(d)?_.none():_.some(Yo(i,d))},Nz=(t,s,a)=>{const i=t.element;ko(i,s.leftAttr,a.left+"px"),ko(i,s.topAttr,a.top+"px")},Bz=(t,s)=>{const a=t.element;de(a,s.leftAttr),de(a,s.topAttr)},$z=(t,s,a,i)=>Mz(t,s).fold(()=>a,d=>e1(d.left+i.left,d.top+i.top)),Pz=(t,s,a,i,d,g)=>{const p=$z(t,s,a,i),w=s.mustSnap?Fz(t,s,p,d,g):Iz(t,s,p,d,g),T=Ik(p,d,g);return Nz(t,s,T),w.fold(()=>({coord:e1(T.left,T.top),extra:_.none()}),A=>({coord:A.output,extra:A.extra}))},I4=(t,s)=>{Bz(t,s)},L4=(t,s,a,i)=>ao(t,d=>{const g=d.sensor;return Dz(s,g,d.range.left,d.range.top,a,i)?_.some({output:P4(d.output,s,a,i),extra:d.extra}):_.none()}),Fz=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return L4(g,a,i,d).orThunk(()=>Ee(g,(T,A)=>{const D=A.sensor,N=Lk(a,D,A.range.left,A.range.top,i,d);return T.deltas.fold(()=>({deltas:_.some(N),snap:_.some(A)}),U=>{const W=(N.left+N.top)/2,le=(U.left+U.top)/2;return W<=le?{deltas:_.some(N),snap:_.some(A)}:T})},{deltas:_.none(),snap:_.none()}).snap.map(T=>({output:P4(T.output,a,i,d),extra:T.extra})))},Iz=(t,s,a,i,d)=>{const g=s.getSnapPoints(t);return L4(g,a,i,d)},Lz=(t,s,a)=>({coord:P4(t.output,t.output,s,a),extra:t.extra});var Hz=Object.freeze({__proto__:null,snapTo:(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=pa(t.element),p=ji(g),w=O3(d),T=Lz(i,p,w),A=NP(T.coord,p,w);pr(d,A)}}});const H4="data-initial-z-index",zz=t=>{aa(t.element).filter(xs).each(s=>{$(s,H4).fold(()=>Po(s,"z-index"),a=>Vn(s,"z-index",a)),de(s,H4)})},Vz=t=>{aa(t.element).filter(xs).each(s=>{tr(s,"z-index").each(a=>{ko(s,H4,a)}),Vn(s,"z-index",Dt(t.element,"z-index"))})},BP=(t,s)=>{t.getSystem().addToGui(s),Vz(s)},Uz=t=>{zz(t),t.getSystem().removeFromGui(t)},$P=(t,s,a)=>t.getSystem().build(Sm.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[s]},events:a}));var Wz=vi("snaps",[At("getSnapPoints"),ds("onSensor"),At("leftAttr"),At("topAttr"),Ke("lazyViewport",Xa),Ke("mustSnap",!1)]);const z4=[Ke("useFixed",Le),At("blockerClass"),Ke("getTarget",Ot),Ke("onDrag",Q),Ke("repositionTarget",!0),Ke("onDrop",Q),Ma("getBounds",Xa),Wz],Zz=t=>cs(tr(t,"left"),tr(t,"top"),tr(t,"position"),(s,a,i)=>(i==="fixed"?e1:Hk)(parseInt(s,10),parseInt(a,10))).getOrThunk(()=>{const s=Ds(t);return bp(s.left,s.top)}),jz=(t,s,a,i,d)=>{const g=d.bounds,p=x0(s,a,i),w=yl(p.left,g.x,g.x+g.width-d.width),T=yl(p.top,g.y,g.y+g.height-d.height),A=bp(w,T);return s.fold(()=>{const D=MP(A,a,i);return Hk(D.left,D.top)},Y(A),()=>{const D=Ik(A,a,i);return e1(D.left,D.top)})},Gz=(t,s,a,i,d,g,p)=>{const w=s.fold(()=>{const T=Rz(a,g.left,g.top),A=Ik(T,i,d);return e1(A.left,A.top)},T=>{const A=Pz(t,T,a,g,i,d);return A.extra.each(D=>{T.onSensor(t,D)}),A.coord});return jz(t,w,i,d,p)},qz=(t,s,a,i)=>{const d=s.getTarget(t.element);if(s.repositionTarget){const g=pa(t.element),p=ji(g),w=O3(d),T=Zz(d),A=Gz(t,s.snaps,T,p,w,i,a),D=NP(A,p,w);pr(d,D)}s.onDrag(t,d,i)},PP=(t,s)=>({bounds:t.getBounds(),height:Un(s.element),width:rr(s.element)}),V4=(t,s,a,i,d)=>{const g=a.update(i,d),p=a.getStartData().getOrThunk(()=>PP(s,t));g.each(w=>{qz(t,s,p,w)})},FP=(t,s,a,i)=>{s.each(Uz),a.snaps.each(g=>{I4(t,g)});const d=a.getTarget(t.element);i.reset(),a.onDrop(t,d)},U4=t=>(s,a)=>{const i=d=>{a.setStartData(PP(s,d))};return dr([zt(S1(),d=>{a.getStartData().each(()=>i(d))}),...t(s,a,i)])},IP=t=>dr([zt(Vc(),t.forceDrop),zt(Ep(),t.drop),zt(Ni(),(s,a)=>{t.move(a.event)}),zt($u(),t.delayDrop)]);var Yz=Object.freeze({__proto__:null,getData:t=>_.from(Yo(t.x,t.y)),getDelta:(t,s)=>Yo(s.left-t.left,s.top-t.top)});const zk=(t,s,a)=>[zt(Vc(),(i,d)=>{if(d.event.raw.button!==0)return;d.stop();const p=()=>FP(i,_.some(A),t,s),w=hM(p,200),T={drop:p,delayDrop:w.schedule,forceDrop:p,move:N=>{w.cancel(),V4(i,t,s,Yz,N)}},A=$P(i,t.blockerClass,IP(T));(()=>{a(i),BP(i,A)})()})],Vk=[...z4,wr("dragger",{handlers:U4(zk)})],Xz=t=>dr([zt(or(),t.forceDrop),zt(zc(),t.drop),zt(Nl(),t.drop),zt(Ua(),(s,a)=>{t.move(a.event)})]),Jz=t=>{const s=t[0];return _.some(Yo(s.clientX,s.clientY))};var LP=Object.freeze({__proto__:null,getData:t=>{const a=t.raw.touches;return a.length===1?Jz(a):_.none()},getDelta:(t,s)=>Yo(s.left-t.left,s.top-t.top)});const vp=(t,s,a)=>{const i=Wr(),d=g=>{FP(g,i.get(),t,s),i.clear()};return[zt(or(),(g,p)=>{p.stop();const w=()=>d(g),T={drop:w,delayDrop:Q,forceDrop:w,move:N=>{V4(g,t,s,LP,N)}},A=$P(g,t.blockerClass,Xz(T));i.set(A),(()=>{a(g),BP(g,A)})()}),zt(Ua(),(g,p)=>{p.stop(),V4(g,t,s,LP,p.event)}),zt(zc(),(g,p)=>{p.stop(),d(g)}),zt(Nl(),d)]},HP=[...z4,wr("dragger",{handlers:U4(vp)})],Qz=(t,s,a)=>[...zk(t,s,a),...vp(t,s,a)],eV=[...z4,wr("dragger",{handlers:U4(Qz)})];var tV=Object.freeze({__proto__:null,mouse:Vk,touch:HP,mouseOrTouch:eV}),nV=Object.freeze({__proto__:null,init:()=>{let t=_.none(),s=_.none();const a=()=>{t=_.none(),s=_.none()},i=(T,A)=>{const D=t.map(N=>T.getDelta(N,A));return t=_.some(A),D},d=(T,A)=>T.getData(A).bind(D=>i(T,D)),g=T=>{s=_.some(T)},p=()=>s,w=Y({});return Bi({readState:w,reset:a,update:d,getStartData:p,setStartData:g})}});const Ug=ey({branchKey:"mode",branches:tV,name:"dragging",active:{events:(t,s)=>t.dragger.handlers(t,s)},extra:{snap:t=>({sensor:t.sensor,range:t.range,output:t.output,extra:_.from(t.extra)})},state:nV,apis:Hz}),t1=40,T0=t1/2,fC=(t,s,a,i,d,g)=>t.fold(()=>Ug.snap({sensor:bp(a-T0,i-T0),range:Yo(d,g),output:bp(_.some(a),_.some(i)),extra:{td:s}}),p=>{const w=a-T0,T=i-T0,A=t1,D=t1,N=p.element.dom.getBoundingClientRect();return Ug.snap({sensor:bp(w,T),range:Yo(A,D),output:bp(_.some(a-N.width/2),_.some(i-N.height/2)),extra:{td:s}})}),yp=(t,s,a)=>{const i=(d,g)=>d.exists(p=>Us(p,g));return{getSnapPoints:t,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:(d,g)=>{const p=g.td;i(s.get(),p)||(s.set(p),a(p))},mustSnap:!0}},gC=t=>xr(nl.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:mn([Ug.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:t}),a0.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}})),oV=(t,s)=>{const a=V([]),i=V([]),d=V(!1),g=Wr(),p=Wr(),w=Ln=>{const bo=Dr(Ln);return fC(W.getOpt(s),Ln,bo.x,bo.y,bo.width,bo.height)},T=()=>Ie(a.get(),Ln=>w(Ln)),A=Ln=>{const bo=Dr(Ln);return fC(le.getOpt(s),Ln,bo.right,bo.bottom,bo.width,bo.height)},D=()=>Ie(i.get(),Ln=>A(Ln)),N=yp(T,g,Ln=>{p.get().each(bo=>{t.dispatch("TableSelectorChange",{start:Ln,finish:bo})})}),U=yp(D,p,Ln=>{g.get().each(bo=>{t.dispatch("TableSelectorChange",{start:bo,finish:Ln})})}),W=gC(N),le=gC(U),pe=Ci(W.asSpec()),nt=Ci(le.asSpec()),$e=(Ln,bo,yo,Zo)=>{const ws=bo.dom.getBoundingClientRect();Po(Ln.element,"display");const io=Ic(Lt.fromDom(t.getBody())).dom.innerHeight,Jo=yo(ws),Bs=Zo(ws,io);(Jo||Bs)&&Vn(Ln.element,"display","none")},rt=(Ln,bo,yo,Zo)=>{const ws=yo(bo);Ug.snapTo(Ln,ws),$e(Ln,bo,Bs=>Bs[Zo]<0,(Bs,hs)=>Bs[Zo]>hs)},wn=Ln=>rt(pe,Ln,w,"top"),lt=()=>g.get().each(wn),_n=Ln=>rt(nt,Ln,A,"bottom"),qn=()=>p.get().each(_n);Hc().deviceType.isTouch()&&(t.on("TableSelectionChange",Ln=>{d.get()||(Rc(s,pe),Rc(s,nt),d.set(!0)),g.set(Ln.start),p.set(Ln.finish),Ln.otherCells.each(bo=>{a.set(bo.upOrLeftCells),i.set(bo.downOrRightCells),wn(Ln.start),_n(Ln.finish)})}),t.on("ResizeEditor ResizeWindow ScrollContent",()=>{lt(),qn()}),t.on("TableSelectionClear",()=>{d.get()&&(Mc(pe),Mc(nt),d.set(!1)),g.clear(),p.clear()}))};var zP=`<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">
  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>
</svg>
`;const VP=t=>t.nodeName==="BR"||!!t.getAttribute("data-mce-bogus")||t.getAttribute("data-mce-type")==="bookmark",UP=(t,s,a)=>{var i;const d=(i=s.delimiter)!==null&&i!==void 0?i:"›",g=(A,D,N)=>nl.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":N,"aria-level":N+1}},components:[Wa(A)],action:U=>{t.focus(),t.selection.select(D),t.nodeChanged()},buttonBehaviours:mn([Ul.button(a.isDisabled),ka()])}),p=()=>({dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Wa(` ${d} `)]}),w=A=>Ee(A,(D,N,U)=>{const W=g(N.name,N.element,U);return U===0?D.concat([W]):D.concat([p(),W])},[]),T=A=>{const D=[];let N=A.length;for(;N-- >0;){const U=A[N];if(U.nodeType===1&&!VP(U)){const W=TI(t,U);if(W.isDefaultPrevented()||D.push({name:W.name,element:U}),W.isPropagationStopped())break}}return D};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:mn([ho.config({mode:"flow",selector:"div[role=button]"}),To.config({disabled:a.isDisabled}),ka(),Ta.config({}),zo.config({}),fs("elementPathEvents",[Ur((A,D)=>{t.shortcuts.add("alt+F11","focus statusbar elementpath",()=>ho.focusIn(A)),t.on("NodeChange",N=>{const U=T(N.parents),W=U.length>0?w(U):[];zo.set(A,W)})})])]),components:[]}};var n1;(function(t){t[t.None=0]="None",t[t.Both=1]="Both",t[t.Vertical=2]="Vertical"})(n1||(n1={}));const sV=(t,s,a,i,d)=>{const g={height:Mk(i+s.top,mw(t),g_(t))};return a===n1.Both&&(g.width=Mk(d+s.left,f_(t),FS(t))),g},WP=(t,s,a)=>{const i=Lt.fromDom(t.getContainer()),d=sV(t,s,a,dt(i),br(i));Bt(d,(g,p)=>{st(g)&&Vn(i,p,h4(g))}),SI(t)},ZP=t=>{const s=v_(t);return s===!1?n1.None:s==="both"?n1.Both:n1.Vertical},hC=(t,s,a,i)=>{const g=Yo(a*20,i*20);return WP(t,g,s),_.some(!0)},W4=(t,s)=>{const a=ZP(t);return a===n1.None?_.none():_.some(vm("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:s.translate("Resize")},behaviours:[Ug.config({mode:"mouse",repositionTarget:!1,onDrag:(i,d,g)=>WP(t,g,a),blockerClass:"tox-blocker"}),ho.config({mode:"special",onLeft:()=>hC(t,a,-1,0),onRight:()=>hC(t,a,1,0),onUp:()=>hC(t,a,0,-1),onDown:()=>hC(t,a,0,1)}),Ta.config({}),Ao.config({})]},s.icons))},rV=(t,s)=>{const a=(i,d,g)=>zo.set(i,[Wa(s.translate(["{0} "+g,d[g]]))]);return nl.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:mn([Ul.button(s.isDisabled),ka(),Ta.config({}),zo.config({}),En.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),fs("wordcount-events",[gl(i=>{const d=En.getValue(i),g=d.mode==="words"?"characters":"words";En.setValue(i,{mode:g,count:d.count}),a(i,d.count,g)}),Ur(i=>{t.on("wordCountUpdate",d=>{const{mode:g}=En.getValue(i);En.setValue(i,{mode:g,count:d.wordCount}),a(i,d.wordCount,g)})})])]),eventOrder:{[fl()]:["disabling","alloy.base.behaviour","wordcount-events"]}})},aV=(t,s)=>{const a=()=>({dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=editor_referral&utm_medium=poweredby&utm_source=tinymce&utm_content=v6",rel:"noopener",target:"_blank","aria-label":Rd.translate(["Powered by {0}","Tiny"])},innerHtml:zP.trim()},behaviours:mn([Ao.config({})])}]}),i=()=>{const g=[];return b_(t)&&g.push(UP(t,{},s)),t.hasPlugin("wordcount")&&g.push(rV(t,s)),$D(t)&&g.push(a()),g.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:g}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:(()=>{const g=i(),p=W4(t,s);return g.concat(p.toArray())})()}},jP=(t,s)=>s.get().getOrDie(`UI for ${t} has not been rendered`),GP=t=>{const s=t.inline,a=s?B9:O9,i=yw(t)?R7:p7,d=X$(),g=Wr(),p=Wr(),D=Hc().deviceType.isTouch()?["tox-platform-touch"]:[],N=WS(t),U=Uv(t),W=xr({dom:{tag:"div",classes:["tox-anchorbar"]}}),le=()=>d.mainUi.get().map(hs=>hs.outerContainer).bind(fr.getHeader),pe=()=>Fo.fromOption(d.dialogUi.get().map(hs=>hs.sink),"UI has not been rendered"),nt=()=>Fo.fromOption(d.popupUi.get().map(hs=>hs.sink),"(popup) UI has not been rendered"),$e=d.lazyGetInOuterOrDie("anchor bar",W.getOpt),rt=d.lazyGetInOuterOrDie("toolbar",fr.getToolbar),wn=d.lazyGetInOuterOrDie("throbber",fr.getThrobber),lt=EU({popup:nt,dialog:pe},t,$e),_n=()=>{const hs={attributes:{[my]:N?lm.BottomToTop:lm.TopToBottom}},ln=fr.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:lt.popup,onEscape:()=>{t.focus()}}),Fn=fr.parts.toolbar({dom:{tag:"div",classes:["tox-toolbar"]},getSink:lt.popup.shared.getSink,providers:lt.popup.shared.providers,onEscape:()=>{t.focus()},onToolbarToggled:TC=>{EI(t,TC)},type:U,lazyToolbar:rt,lazyHeader:()=>le().getOrDie("Could not find header element"),...hs}),$o=fr.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:lt.popup.shared.providers,onEscape:()=>{t.focus()},type:U}),es=pw(t),qs=Zv(t),As=US(t),Yc=PD(t),Nr=qn(),qg=es||qs||As,Ka=()=>es?[$o]:qs?[Fn]:[],c1=Yc?[Nr,ln]:[ln];return fr.parts.header({dom:{tag:"div",classes:["tox-editor-header"].concat(qg?[]:["tox-editor-header--empty"]),...hs},components:H([As?c1:[],Ka(),bw(t)?[]:[W.asSpec()]]),sticky:yw(t),editor:t,sharedBackstage:lt.popup.shared})},qn=()=>fr.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}}),Ln=()=>{const hs=fr.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),ln=fr.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}});return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[hs,ln]}},bo=()=>{const hs=vw(t),ln=Us(ta(),hs)&&Dt(hs,"display")==="grid",Fn={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(D),attributes:{...Rd.isRtl()?{dir:"rtl"}:{}}},behaviours:mn([li.config({useFixed:()=>i.isDocked(le)})])},$o={dom:{styles:{width:document.body.clientWidth+"px"}},events:dr([zt(Rp(),As=>{Vn(As.element,"width",document.body.clientWidth+"px")})])},es=Ci(vr(Fn,ln?$o:{})),qs=CM(es);return p.set(qs),{sink:es,mothership:qs}},yo=Ot,Zo=()=>{const hs=_n(),ln=Ln(),Fn=fr.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:lt.popup}),$o=fr.parts.viewWrapper({backstage:lt.popup}),es=BD(t)&&!s?_.some(aV(t,lt.popup.shared.providers)):_.none(),qs=H([N?[]:[hs],s?[]:[ln],N?[hs]:[]]),As=fr.parts.editorContainer({components:H([qs,s?[]:es.toArray()])}),Yc=w_(t),Nr={role:"application",...Rd.isRtl()?{dir:"rtl"}:{},...Yc?{"aria-hidden":"true"}:{}},qg=Ci(fr.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(s?["tox-tinymce-inline"]:[]).concat(N?["tox-tinymce--toolbar-bottom"]:[]).concat(D),styles:{visibility:"hidden",...Yc?{opacity:"0",border:"0"}:{}},attributes:Nr},components:[As,...s?[]:[$o],Fn],behaviours:mn([ka(),To.config({disableClass:"tox-tinymce--disabled"}),ho.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),Ka=CM(qg);return g.set(Ka),{mothership:Ka,outerContainer:qg}},ws=hs=>{const ln=h4(R9(t)),Fn=h4(M9(t));return t.inline||(sl("div","width",Fn)&&Vn(hs.element,"width",Fn),sl("div","height",ln)?Vn(hs.element,"height",ln):Vn(hs.element,"height","400px")),ln},io=hs=>{t.addShortcut("alt+F9","focus menubar",()=>{fr.focusMenubar(hs)}),t.addShortcut("alt+F10","focus toolbar",()=>{fr.focusToolbar(hs)}),t.addCommand("ToggleToolbarDrawer",()=>{fr.toggleToolbarDrawer(hs)}),t.addQueryStateHandler("ToggleToolbarDrawer",()=>fr.isToolbarDrawerToggled(hs))},Jo=hs=>{const{mainUi:ln,popupUi:Fn,uiMotherships:$o}=hs;an(fw(t),(K4,iF)=>{t.ui.registry.addGroupToolbarButton(iF,K4)});const{buttons:es,menuItems:qs,contextToolbars:As,sidebars:Yc,views:Nr}=t.ui.registry.getAll(),qg=hw(t),Ka={menuItems:qs,menus:LD(t),menubar:OD(t),toolbar:qg.getOrThunk(()=>gw(t)),allowToolbarGroups:U===Ku.floating,buttons:es,sidebar:Yc,views:Nr};io(ln.outerContainer),mi(t,ln.mothership,$o),i.setup(t,lt.popup.shared,le),dz(t,lt.popup),Oz(t,lt.popup.shared.getSink,lt.popup),X7(t),lH(t,wn,lt.popup.shared),R4(t,As,Fn.sink,{backstage:lt.popup}),oV(t,Fn.sink);const c1=t.getElement(),TC=ws(ln.outerContainer),cF={targetNode:c1,height:TC};return a.render(t,hs,Ka,lt.popup,cF)},Bs=()=>{const hs=Zo(),ln=bo(),Fn=yo(ln);d.dialogUi.set(ln),d.popupUi.set(Fn),d.mainUi.set(hs);const $o={popupUi:Fn,dialogUi:ln,mainUi:hs,uiMotherships:d.getUiMotherships()};return Jo($o)};return{popups:{backstage:lt.popup,getMothership:()=>jP("popups",p)},dialogs:{backstage:lt.dialog,getMothership:()=>jP("dialogs",p)},renderUI:Bs}},cV=(t,s)=>{const a=_.from(ar(t,"id")).fold(()=>{const i=Yn("dialog-describe");return ko(s,"id",i),i},Ot);ko(t,"aria-describedby",a)},iV=(t,s)=>{const a=$(t,"id").fold(()=>{const i=Yn("dialog-label");return ko(s,"id",i),i},Ot);ko(t,"aria-labelledby",a)},lV=Y([At("lazySink"),Ns("dragBlockClass"),Ma("getBounds",Xa),Ke("useTabstopAt",Me),Ke("eventOrder",{}),Na("modalBehaviours",[ho]),Yi("onExecute"),K0("onEscape")]),pC={sketch:Ot},Z4=Y([du({name:"draghandle",overrides:(t,s)=>({behaviours:mn([Ug.config({mode:"mouse",getTarget:a=>om(a,'[role="dialog"]').getOr(a),blockerClass:t.dragBlockClass.getOrDie(new Error(`The drag blocker class was not specified for a dialog with a drag handle: 
`+JSON.stringify(s,null,2)).message),getBounds:t.getDragBounds})])})}),Gc({schema:[At("dom")],name:"title"}),Gc({factory:pC,schema:[At("dom")],name:"close"}),Gc({factory:pC,schema:[At("dom")],name:"body"}),du({factory:pC,schema:[At("dom")],name:"footer"}),Wu({factory:{sketch:(t,s)=>({...t,dom:s.dom,components:s.components})},schema:[Ke("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),Ke("components",[])],name:"blocker"})]),uV=(t,s,a,i)=>{const d=Wr(),g=W=>{d.set(W);const le=t.lazySink(W).getOrDie(),pe=i.blocker(),nt=le.getSystem().build({...pe,components:pe.components.concat([vl(W)]),behaviours:mn([Ao.config({}),fs("dialog-blocker-events",[tc(Ym(),()=>{ho.focusIn(W)})])])});Rc(le,nt),ho.focusIn(W)},p=W=>{d.clear(),aa(W.element).each(le=>{W.getSystem().getByDom(le).each(pe=>{Mc(pe)})})},w=W=>Zn(W,t,"body"),T=W=>Zn(W,t,"footer"),A=(W,le)=>{Hg.block(W,le)},D=W=>{Hg.unblock(W)},N=Yn("modal-events"),U={...t.eventOrder,[bd()]:[N].concat(t.eventOrder["alloy.system.attached"]||[])};return{uid:t.uid,dom:t.dom,components:s,apis:{show:g,hide:p,getBody:w,getFooter:T,setIdle:D,setBusy:A},eventOrder:U,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:pc(t.modalBehaviours,[zo.config({}),ho.config({mode:"cyclic",onEnter:t.onExecute,onEscape:t.onEscape,useTabstopAt:t.useTabstopAt}),Hg.config({getRoot:d.get}),fs(N,[Ur(W=>{iV(W.element,Zn(W,t,"title").element),cV(W.element,Zn(W,t,"body").element)})])])}},qa=qc({name:"ModalDialog",configFields:lV(),partFields:Z4(),factory:uV,apis:{show:(t,s)=>{t.show(s)},hide:(t,s)=>{t.hide(s)},getBody:(t,s)=>t.getBody(s),getFooter:(t,s)=>t.getFooter(s),setBusy:(t,s,a)=>{t.setBusy(s,a)},setIdle:(t,s)=>{t.setIdle(s)}}}),dV=lo([Ba,M_].concat(e0)),mV=si,j4=[B_("button"),Cm,dl("align","end",["start","end"]),Qv,Yu,Kf("buttonType",["primary","secondary"])],qP=[...j4,Ng],G4=[qf("type",["submit","cancel","custom"]),...qP],o1=[qf("type",["menu"]),Jv,kw,Cm,bi("items",dV),...j4],KP=pi("type",{submit:G4,cancel:G4,custom:G4,menu:o1}),fV=[Ba,Ng,qf("level",["info","warn","error","success"]),nR,Ke("url","")],Uk=lo(fV),E0=t=>[Ba,t],Wk=[Ba,Ng,Yu,B_("button"),Cm,W5,Kf("buttonType",["primary","secondary","toolbar"]),Qv],YP=lo(Wk),Wg=[Ba,M_],$a=Wg.concat([JS]),Zk=Wg.concat([N_,Yu]),XP=lo(Zk),JP=si,gV=$a.concat([ex("auto")]),hV=lo(gV),wp=ll([Sw,Ng,nR]),JU=$a.concat([Sr("storageKey","default")]),pV=lo(JU),QP=Oa,jk=lo($a),eF=Oa,bV=Wg.concat([Sr("tag","textarea"),la("scriptId"),la("scriptUrl"),C("settings",void 0)]),vV=Wg.concat([Sr("tag","textarea"),wa("init")]),yV=ia(t=>Ms("customeditor.old",Ja(vV),t).orThunk(()=>Ms("customeditor.new",Ja(bV),t))),wV=Oa,QU=lo($a),CV=Gm(),SV=t=>[Ba,N0("columns"),t],eW=[Ba,la("html"),dl("presets","presentation",["presentation","document"])],xV=lo(eW),kV=$a.concat([Ra("sandboxed",!0),Ra("transparent",!0)]),yC=lo(kV),TV=Oa,EV=lo(Wg.concat([ec("height")])),tF=lo([la("url"),jd("zoom"),jd("cachedWidth"),jd("cachedHeight")]),_V=$a.concat([ec("inputMode"),ec("placeholder"),Ra("maximized",!1),Yu]),tW=lo(_V),e=Oa,n=t=>[Ba,N_,t],o=[Ng,Sw],r=[Ng,bi("items",b1("items",()=>c))],c=Zt([lo(o),lo(r)]),u=$a.concat([bi("items",c),Yu]),f=lo(u),b=Oa,y=$a.concat([ru("items",[Ng,Sw]),v1("size",1),Yu]),x=lo(y),M=Oa,P=$a.concat([Ra("constrain",!0),Yu]),L=lo(P),ce=lo([la("width"),la("height")]),ie=Wg.concat([N_,v1("min",0),v1("max",0)]),te=lo(ie),ue=jr,Be=[Ba,bi("header",Oa),bi("cells",ni(Oa))],De=lo(Be),Ge=$a.concat([ec("placeholder"),Ra("maximized",!1),Yu]),et=lo(Ge),Tt=Oa,gn=$a.concat([dl("filetype","file",["image","media","file"]),Yu]),en=lo(gn),ut=lo([Sw,tx]),Je=t=>Qa("items","items",mc(),ni(ia(s=>Ms(`Checking item of ${t}`,Rn,s).fold(a=>Fo.error(su(a)),a=>Fo.value(a))))),Rn=Du(()=>dh("type",{alertbanner:Uk,bar:lo(E0(Je("bar"))),button:YP,checkbox:XP,colorinput:pV,colorpicker:jk,dropzone:QU,grid:lo(SV(Je("grid"))),iframe:yC,input:tW,listbox:f,selectbox:x,sizeinput:L,slider:te,textarea:et,urlinput:en,customeditor:yV,htmlpanel:xV,imagepreview:EV,collection:hV,label:lo(n(Je("label"))),table:De,panel:fo})),co=[Ba,Ke("classes",[]),bi("items",Rn)],fo=lo(co),Uo=[B_("tab"),z5,bi("items",Rn)],vs=[Ba,ru("tabs",Uo)],Ks=lo(vs),Gs=qP,Pa=KP,Ti=lo([la("title"),Mi("body",dh("type",{panel:fo,tabpanel:Ks})),Sr("size","normal"),bi("buttons",Pa),Ke("initialData",{}),Ma("onAction",Q),Ma("onChange",Q),Ma("onSubmit",Q),Ma("onClose",Q),Ma("onCancel",Q),Ma("onTabChange",Q)]),Xt=t=>Ms("dialog",Ti,t),Wo=lo([qf("type",["cancel","custom"]),...Gs]),po=lo([la("title"),la("url"),jd("height"),jd("width"),Xf("buttons",Wo),Ma("onAction",Q),Ma("onCancel",Q),Ma("onClose",Q),Ma("onMessage",Q)]),Mr=t=>Ms("dialog",po,t),On=t=>Et(t)?[t].concat(q(on(t),On)):hn(t)?q(t,On):[],Oo=t=>Nt(t.type)&&Nt(t.name),So={checkbox:JP,colorinput:QP,colorpicker:eF,dropzone:CV,input:e,iframe:TV,imagepreview:tF,selectbox:M,sizeinput:ce,slider:ue,listbox:b,size:ce,textarea:Tt,urlinput:ut,customeditor:wV,collection:wp,togglemenuitem:mV},Cn=t=>_.from(So[t.type]),gs=t=>Se(On(t),Oo),as=t=>{const s=gs(t),a=q(s,i=>Cn(i).fold(()=>[],d=>[Mi(i.name,d)]));return lo(a)},ac=t=>{var s;const a=ou(Xt(t)),i=as(t),d=(s=t.initialData)!==null&&s!==void 0?s:{};return{internalDialog:a,dataValidator:i,initialData:d}},Tr={open:(t,s)=>{const a=ac(s);return t(a.internalDialog,a.initialData,a.dataValidator)},openUrl:(t,s)=>{const a=ou(Mr(s));return t(a)},redial:t=>ac(t)},No=t=>{const s=[],a={};return Bt(t,(i,d)=>{i.fold(()=>{s.push(d)},g=>{a[d]=g})}),s.length>0?Fo.error(s):Fo.value(a)},Is=(t,s,a)=>{const i=xr(Zb.sketch(d=>({dom:{tag:"div",classes:["tox-form"].concat(t.classes)},components:Ie(t.items,g=>rs(d,g,s,a))})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[i.asSpec()]}],behaviours:mn([ho.config({mode:"acyclic",useTabstopAt:ye(m0)}),Ju.memento(i),Qu.memento(i,{postprocess:d=>No(d).fold(g=>(console.error(g),{}),Ot)})])}},Ea=(t,s)=>({uid:t.uid,dom:t.dom,components:t.components,events:DS(t.action),behaviours:pc(t.tabButtonBehaviours,[Ao.config({}),ho.config({mode:"execution",useSpace:!0,useEnter:!0}),En.config({store:{mode:"memory",initialValue:t.value}})]),domModification:t.domModification}),Cr=zl({name:"TabButton",configFields:[Ke("uid",void 0),At("value"),Qa("dom","dom",zm(()=>({attributes:{role:"tab",id:Yn("aria"),"aria-selected":"false"}})),oi()),Ns("action"),Ke("domModification",{}),Na("tabButtonBehaviours",[Ao,ho,En]),At("view")],factory:Ea}),Qr=Y([At("tabs"),At("dom"),Ke("clickToDismiss",!1),Na("tabbarBehaviours",[Vs,ho]),am(["tabClass","selectedClass"])]),fa=vb({factory:Cr,name:"tabs",unit:"tab",overrides:t=>{const s=(i,d)=>{Vs.dehighlight(i,d),vo(i,BC(),{tabbar:i,button:d})},a=(i,d)=>{Vs.highlight(i,d),vo(i,k1(),{tabbar:i,button:d})};return{action:i=>{const d=i.getSystem().getByUid(t.uid).getOrDie(),g=Vs.isHighlighted(d,i);(()=>g&&t.clickToDismiss?s:g?Q:a)()(d,i)},domModification:{classes:[t.markers.tabClass]}}}}),Ir=Y([fa]),Fa=(t,s,a,i)=>({uid:t.uid,dom:t.dom,components:s,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:pc(t.tabbarBehaviours,[Vs.config({highlightClass:t.markers.selectedClass,itemClass:t.markers.tabClass,onHighlight:(d,g)=>{ko(g.element,"aria-selected","true")},onDehighlight:(d,g)=>{ko(g.element,"aria-selected","false")}}),ho.config({mode:"flow",getInitial:d=>Vs.getHighlighted(d).map(g=>g.element),selector:"."+t.markers.tabClass,executeOnMove:!0})])}),vu=qc({name:"Tabbar",configFields:Qr(),partFields:Ir(),factory:Fa}),fi=(t,s)=>({uid:t.uid,dom:t.dom,behaviours:pc(t.tabviewBehaviours,[zo.config({})]),domModification:{attributes:{role:"tabpanel"}}}),_m=zl({name:"Tabview",configFields:[Na("tabviewBehaviours",[zo])],factory:fi}),yu=Y([Ke("selectFirst",!0),ds("onChangeTab"),ds("onDismissTab"),Ke("tabs",[]),Na("tabSectionBehaviours",[])]),s1=Gc({factory:vu,schema:[At("dom"),ul("markers",[At("tabClass"),At("selectedClass")])],name:"tabbar",defaults:t=>({tabs:t.tabs})}),r1=Gc({factory:_m,name:"tabview"}),Am=Y([s1,r1]),Id=(t,s,a,i)=>{const d=p=>{const w=En.getValue(p);cr(p,t,"tabview").each(T=>{se(t.tabs,D=>D.value===w).each(D=>{const N=D.view();$(p.element,"id").each(U=>{ko(T.element,"aria-labelledby",U)}),zo.set(T,N),t.onChangeTab(T,p,N)})})},g=(p,w)=>{cr(p,t,"tabbar").each(T=>{w(T).each(Xd)})};return{uid:t.uid,dom:t.dom,components:s,behaviours:Tg(t.tabSectionBehaviours),events:dr(H([t.selectFirst?[Ur((p,w)=>{g(p,Vs.getFirst)})]:[],[zt(k1(),(p,w)=>{const T=w.event.button;d(T)}),zt(BC(),(p,w)=>{const T=w.event.button;t.onDismissTab(p,T)})]])),apis:{getViewItems:p=>cr(p,t,"tabview").map(w=>zo.contents(w)).getOr([]),showTab:(p,w)=>{g(p,A=>{const D=Vs.getCandidates(A);return se(D,U=>En.getValue(U)===w).filter(U=>!Vs.isHighlighted(A,U))})}}}},ea=qc({name:"TabSection",configFields:yu(),partFields:Am(),factory:Id,apis:{getViewItems:(t,s)=>t.getViewItems(s),showTab:(t,s,a)=>{t.showTab(s,a)}}}),nd=(t,s,a)=>Ie(t,(i,d)=>{zo.set(a,t[d].view());const g=s.dom.getBoundingClientRect();return zo.set(a,[]),g.height}),Om=t=>uo(ot(t,(s,a)=>s>a?-1:s<a?1:0)),od=(t,s,a)=>{const i=hi(t).dom,d=om(t,".tox-dialog-wrap").getOr(t),g=Dt(d,"position")==="fixed";let p;g?p=Math.max(i.clientHeight,window.innerHeight):p=Math.max(i.offsetHeight,i.scrollHeight);const w=dt(s),A=s.dom.offsetLeft>=a.dom.offsetLeft+br(a)?Math.max(dt(a),w):w,D=parseInt(Dt(t,"margin-top"),10)||0,N=parseInt(Dt(t,"margin-bottom"),10)||0,W=dt(t)+D+N-A;return p-W},sd=(t,s)=>{uo(t).each(a=>ea.showTab(s,a.value))},Dm=(t,s)=>{Vn(t,"height",s+"px"),Vn(t,"flex-basis",s+"px")},Pc=(t,s,a)=>{om(t,'[role="dialog"]').each(i=>{da(i,'[role="tablist"]').each(d=>{a.get().map(g=>(Vn(s,"height","0"),Vn(s,"flex-basis","0"),Math.min(g,od(i,s,d)))).each(g=>{Dm(s,g)})})})},Rm=t=>da(t,'[role="tabpanel"]'),Pf=t=>{const s=Wr();return{extraEvents:[Ur(d=>{const g=d.element;Rm(g).each(p=>{Vn(p,"visibility","hidden"),d.getSystem().getByDom(p).toOptional().each(w=>{const T=nd(t,p,w);Om(T).fold(s.clear,s.set)}),Pc(g,p,s),Po(p,"visibility"),sd(t,d),requestAnimationFrame(()=>{Pc(g,p,s)})})}),zt(Rp(),d=>{const g=d.element;Rm(g).each(p=>{Pc(g,p,s)})}),zt(Cx,(d,g)=>{const p=d.element;Rm(p).each(w=>{const T=Ji(Ko(w));Vn(w,"visibility","hidden");const A=tr(w,"height").map(U=>parseInt(U,10));Po(w,"height"),Po(w,"flex-basis");const D=w.dom.getBoundingClientRect().height;A.forall(U=>D>U)?(s.set(D),Pc(p,w,s)):A.each(U=>{Dm(w,U)}),Po(w,"visibility"),T.each(im)})})],selectFirst:!1}},rd="send-data-to-section",Zg="send-data-to-view",Gk=(t,s,a)=>{const i=V({}),d=A=>{const D=En.getValue(A),N=No(D).getOr({}),U=i.get(),W=vr(U,N);i.set(W)},g=A=>{const D=i.get();En.setValue(A,D)},p=V(null),w=Ie(t.tabs,A=>({value:A.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Wa(a.shared.providers.translate(A.title))],view:()=>[Zb.sketch(D=>({dom:{tag:"div",classes:["tox-form"]},components:Ie(A.items,N=>rs(D,N,s,a)),formBehaviours:mn([ho.config({mode:"acyclic",useTabstopAt:ye(m0)}),fs("TabView.form.events",[Ur(g),Bl(d)]),Pl.config({channels:nr([{key:rd,value:{onReceive:d}},{key:Zg,value:{onReceive:g}}])})])}))]})),T=Pf(w);return ea.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:(A,D,N)=>{const U=En.getValue(D);vo(A,TM,{name:U,oldName:p.get()}),p.set(U)},tabs:w,components:[ea.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[vu.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:mn([Ta.config({})])}),ea.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:T.selectFirst,tabSectionBehaviours:mn([fs("tabpanel",T.extraEvents),ho.config({mode:"acyclic"}),ss.config({find:A=>uo(ea.getViewItems(A))}),Qu.withComp(_.none(),A=>(A.getSystem().broadcastOn([rd],{}),i.get()),(A,D)=>{i.set(D),A.getSystem().broadcastOn([Zg],{})})])})},wC=Yn("update-dialog"),CC=Yn("update-title"),qk=Yn("update-body"),Kk=Yn("update-footer"),jg=Yn("body-send-message"),Cp=(t,s,a,i,d)=>{const g=T=>{const A=T.body;switch(A.type){case"tabpanel":return[Gk(A,T.initialData,i)];default:return[Is(A,T.initialData,i)]}},p=(T,A)=>_.some({isTabPanel:()=>A.body.type==="tabpanel"}),w={"aria-live":"polite"};return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:{...a.map(T=>({id:T})).getOr({}),...d?w:{}}},components:[],behaviours:mn([Ju.childAt(0),Gl.config({channel:`${qk}-${s}`,updateState:p,renderComponents:g,initialData:t})])}},tt=(t,s,a,i,d)=>Cp(t,s,_.some(a),i,d),it=(t,s,a)=>{const i=Cp(t,s,_.none(),a,!1);return qa.parts.body(i)},Yt=t=>{const s={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[Zw({dom:{tag:"iframe",attributes:{src:t.url}},behaviours:mn([Ta.config({}),Ao.config({})])})]}],behaviours:mn([ho.config({mode:"acyclic",useTabstopAt:ye(m0)})])};return qa.parts.body(s)};function Ft(t){return Ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Ft(t)}function ro(t,s){return ro=Object.setPrototypeOf||function(i,d){return i.__proto__=d,i},ro(t,s)}function _s(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fr(t,s,a){return _s()?Fr=Reflect.construct:Fr=function(d,g,p){var w=[null];w.push.apply(w,g);var T=Function.bind.apply(d,w),A=new T;return p&&ro(A,p.prototype),A},Fr.apply(null,arguments)}function sr(t){return wu(t)||SC(t)||nF(t)||oF()}function wu(t){if(Array.isArray(t))return Yk(t)}function SC(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function nF(t,s){if(t){if(typeof t=="string")return Yk(t,s);var a=Object.prototype.toString.call(t).slice(8,-1);if(a==="Object"&&t.constructor&&(a=t.constructor.name),a==="Map"||a==="Set")return Array.from(t);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Yk(t,s)}}function Yk(t,s){(s==null||s>t.length)&&(s=t.length);for(var a=0,i=new Array(s);a<s;a++)i[a]=t[a];return i}function oF(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var AV=Object.hasOwnProperty,Xo=Object.setPrototypeOf,ft=Object.isFrozen,Gn=Object.getPrototypeOf,Bo=Object.getOwnPropertyDescriptor,Js=Object.freeze,yc=Object.seal,_l=Object.create,Hi=typeof Reflect<"u"&&Reflect,a1=Hi.apply,Ei=Hi.construct;a1||(a1=function(s,a,i){return s.apply(a,i)}),Js||(Js=function(s){return s}),yc||(yc=function(s){return s}),Ei||(Ei=function(s,a){return Fr(s,sr(a))});var sF=Gg(Array.prototype.forEach),OV=Gg(Array.prototype.pop),xC=Gg(Array.prototype.push),q4=Gg(String.prototype.toLowerCase),tZ=Gg(String.prototype.match),_0=Gg(String.prototype.replace),nZ=Gg(String.prototype.indexOf),oZ=Gg(String.prototype.trim),ad=Gg(RegExp.prototype.test),DV=sZ(TypeError);function Gg(t){return function(s){for(var a=arguments.length,i=new Array(a>1?a-1:0),d=1;d<a;d++)i[d-1]=arguments[d];return a1(t,s,i)}}function sZ(t){return function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return Ei(t,a)}}function Er(t,s){Xo&&Xo(t,null);for(var a=s.length;a--;){var i=s[a];if(typeof i=="string"){var d=q4(i);d!==i&&(ft(s)||(s[a]=d),i=d)}t[i]=!0}return t}function kC(t){var s=_l(null),a;for(a in t)a1(AV,t,[a])&&(s[a]=t[a]);return s}function rF(t,s){for(;t!==null;){var a=Bo(t,s);if(a){if(a.get)return Gg(a.get);if(typeof a.value=="function")return Gg(a.value)}t=Gn(t)}function i(d){return console.warn("fallback value for",d),null}return i}var nW=Js(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),RV=Js(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),MV=Js(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),rZ=Js(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),NV=Js(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),aZ=Js(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),oW=Js(["#text"]),sW=Js(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),BV=Js(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),rW=Js(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),aF=Js(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),cZ=yc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),iZ=yc(/<%[\w\W]*|[\w\W]*%>/gm),lZ=yc(/^data-[\-\w.\u00B7-\uFFFF]/),uZ=yc(/^aria-[\-\w]+$/),dZ=yc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),mZ=yc(/^(?:\w+script|data):/i),fZ=yc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),gZ=yc(/^html$/i),hZ=function(){return typeof window>"u"?null:window},pZ=function(s,a){if(Ft(s)!=="object"||typeof s.createPolicy!="function")return null;var i=null,d="data-tt-policy-suffix";a.currentScript&&a.currentScript.hasAttribute(d)&&(i=a.currentScript.getAttribute(d));var g="dompurify"+(i?"#"+i:"");try{return s.createPolicy(g,{createHTML:function(w){return w}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function aW(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:hZ(),s=function(gt){return aW(gt)};if(s.version="2.3.8",s.removed=[],!t||!t.document||t.document.nodeType!==9)return s.isSupported=!1,s;var a=t.document,i=t.document,d=t.DocumentFragment,g=t.HTMLTemplateElement,p=t.Node,w=t.Element,T=t.NodeFilter,A=t.NamedNodeMap,D=A===void 0?t.NamedNodeMap||t.MozNamedAttrMap:A,N=t.HTMLFormElement,U=t.DOMParser,W=t.trustedTypes,le=w.prototype,pe=rF(le,"cloneNode"),nt=rF(le,"nextSibling"),$e=rF(le,"childNodes"),rt=rF(le,"parentNode");if(typeof g=="function"){var wn=i.createElement("template");wn.content&&wn.content.ownerDocument&&(i=wn.content.ownerDocument)}var lt=pZ(W,a),_n=lt?lt.createHTML(""):"",qn=i,Ln=qn.implementation,bo=qn.createNodeIterator,yo=qn.createDocumentFragment,Zo=qn.getElementsByTagName,ws=a.importNode,io={};try{io=kC(i).documentMode?i.documentMode:{}}catch{}var Jo={};s.isSupported=typeof rt=="function"&&Ln&&typeof Ln.createHTMLDocument<"u"&&io!==9;var Bs=cZ,hs=iZ,ln=lZ,Fn=uZ,$o=mZ,es=fZ,qs=dZ,As=null,Yc=Er({},[].concat(sr(nW),sr(RV),sr(MV),sr(NV),sr(oW))),Nr=null,qg=Er({},[].concat(sr(sW),sr(BV),sr(rW),sr(aF))),Ka=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),c1=null,TC=null,cF=!0,K4=!0,iF=!1,Xk=!1,EC=!1,IV=!1,LV=!1,Jk=!1,lF=!1,uF=!1,AW=!0,HV=!0,Y4=!1,Qk={},eT=null,OW=Er({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),DW=null,RW=Er({},["audio","video","img","source","image","track"]),zV=null,MW=Er({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),VV="http://www.w3.org/1998/Math/MathML",UV="http://www.w3.org/2000/svg",A0="http://www.w3.org/1999/xhtml",dF=A0,WV=!1,tT,UZ=["application/xhtml+xml","text/html"],WZ="text/html",_C,nT=null,ZZ=i.createElement("form"),NW=function(gt){return gt instanceof RegExp||gt instanceof Function},ZV=function(gt){nT&&nT===gt||((!gt||Ft(gt)!=="object")&&(gt={}),gt=kC(gt),As="ALLOWED_TAGS"in gt?Er({},gt.ALLOWED_TAGS):Yc,Nr="ALLOWED_ATTR"in gt?Er({},gt.ALLOWED_ATTR):qg,zV="ADD_URI_SAFE_ATTR"in gt?Er(kC(MW),gt.ADD_URI_SAFE_ATTR):MW,DW="ADD_DATA_URI_TAGS"in gt?Er(kC(RW),gt.ADD_DATA_URI_TAGS):RW,eT="FORBID_CONTENTS"in gt?Er({},gt.FORBID_CONTENTS):OW,c1="FORBID_TAGS"in gt?Er({},gt.FORBID_TAGS):{},TC="FORBID_ATTR"in gt?Er({},gt.FORBID_ATTR):{},Qk="USE_PROFILES"in gt?gt.USE_PROFILES:!1,cF=gt.ALLOW_ARIA_ATTR!==!1,K4=gt.ALLOW_DATA_ATTR!==!1,iF=gt.ALLOW_UNKNOWN_PROTOCOLS||!1,Xk=gt.SAFE_FOR_TEMPLATES||!1,EC=gt.WHOLE_DOCUMENT||!1,Jk=gt.RETURN_DOM||!1,lF=gt.RETURN_DOM_FRAGMENT||!1,uF=gt.RETURN_TRUSTED_TYPE||!1,LV=gt.FORCE_BODY||!1,AW=gt.SANITIZE_DOM!==!1,HV=gt.KEEP_CONTENT!==!1,Y4=gt.IN_PLACE||!1,qs=gt.ALLOWED_URI_REGEXP||qs,dF=gt.NAMESPACE||A0,gt.CUSTOM_ELEMENT_HANDLING&&NW(gt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Ka.tagNameCheck=gt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),gt.CUSTOM_ELEMENT_HANDLING&&NW(gt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Ka.attributeNameCheck=gt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),gt.CUSTOM_ELEMENT_HANDLING&&typeof gt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Ka.allowCustomizedBuiltInElements=gt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),tT=UZ.indexOf(gt.PARSER_MEDIA_TYPE)===-1?tT=WZ:tT=gt.PARSER_MEDIA_TYPE,_C=tT==="application/xhtml+xml"?function(Jn){return Jn}:q4,Xk&&(K4=!1),lF&&(Jk=!0),Qk&&(As=Er({},sr(oW)),Nr=[],Qk.html===!0&&(Er(As,nW),Er(Nr,sW)),Qk.svg===!0&&(Er(As,RV),Er(Nr,BV),Er(Nr,aF)),Qk.svgFilters===!0&&(Er(As,MV),Er(Nr,BV),Er(Nr,aF)),Qk.mathMl===!0&&(Er(As,NV),Er(Nr,rW),Er(Nr,aF))),gt.ADD_TAGS&&(As===Yc&&(As=kC(As)),Er(As,gt.ADD_TAGS)),gt.ADD_ATTR&&(Nr===qg&&(Nr=kC(Nr)),Er(Nr,gt.ADD_ATTR)),gt.ADD_URI_SAFE_ATTR&&Er(zV,gt.ADD_URI_SAFE_ATTR),gt.FORBID_CONTENTS&&(eT===OW&&(eT=kC(eT)),Er(eT,gt.FORBID_CONTENTS)),HV&&(As["#text"]=!0),EC&&Er(As,["html","head","body"]),As.table&&(Er(As,["tbody"]),delete c1.tbody),Js&&Js(gt),nT=gt)},BW=Er({},["mi","mo","mn","ms","mtext"]),$W=Er({},["foreignobject","desc","title","annotation-xml"]),jZ=Er({},["title","style","font","a","script"]),mF=Er({},RV);Er(mF,MV),Er(mF,rZ);var jV=Er({},NV);Er(jV,aZ);var GZ=function(gt){var Jn=rt(gt);(!Jn||!Jn.tagName)&&(Jn={namespaceURI:A0,tagName:"template"});var Io=q4(gt.tagName),Ia=q4(Jn.tagName);return gt.namespaceURI===UV?Jn.namespaceURI===A0?Io==="svg":Jn.namespaceURI===VV?Io==="svg"&&(Ia==="annotation-xml"||BW[Ia]):Boolean(mF[Io]):gt.namespaceURI===VV?Jn.namespaceURI===A0?Io==="math":Jn.namespaceURI===UV?Io==="math"&&$W[Ia]:Boolean(jV[Io]):gt.namespaceURI===A0?Jn.namespaceURI===UV&&!$W[Ia]||Jn.namespaceURI===VV&&!BW[Ia]?!1:!jV[Io]&&(jZ[Io]||!mF[Io]):!1},i1=function(gt){xC(s.removed,{element:gt});try{gt.parentNode.removeChild(gt)}catch{try{gt.outerHTML=_n}catch{gt.remove()}}},fF=function(gt,Jn){try{xC(s.removed,{attribute:Jn.getAttributeNode(gt),from:Jn})}catch{xC(s.removed,{attribute:null,from:Jn})}if(Jn.removeAttribute(gt),gt==="is"&&!Nr[gt])if(Jk||lF)try{i1(Jn)}catch{}else try{Jn.setAttribute(gt,"")}catch{}},PW=function(gt){var Jn,Io;if(LV)gt="<remove></remove>"+gt;else{var Ia=tZ(gt,/^[\r\n\t ]+/);Io=Ia&&Ia[0]}tT==="application/xhtml+xml"&&(gt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+gt+"</body></html>");var Ld=lt?lt.createHTML(gt):gt;if(dF===A0)try{Jn=new U().parseFromString(Ld,tT)}catch{}if(!Jn||!Jn.documentElement){Jn=Ln.createDocument(dF,"template",null);try{Jn.documentElement.innerHTML=WV?"":Ld}catch{}}var Cu=Jn.body||Jn.documentElement;return gt&&Io&&Cu.insertBefore(i.createTextNode(Io),Cu.childNodes[0]||null),dF===A0?Zo.call(Jn,EC?"html":"body")[0]:EC?Jn.documentElement:Cu},FW=function(gt){return bo.call(gt.ownerDocument||gt,gt,T.SHOW_ELEMENT|T.SHOW_COMMENT|T.SHOW_TEXT,null,!1)},qZ=function(gt){return gt instanceof N&&(typeof gt.nodeName!="string"||typeof gt.textContent!="string"||typeof gt.removeChild!="function"||!(gt.attributes instanceof D)||typeof gt.removeAttribute!="function"||typeof gt.setAttribute!="function"||typeof gt.namespaceURI!="string"||typeof gt.insertBefore!="function")},X4=function(gt){return Ft(p)==="object"?gt instanceof p:gt&&Ft(gt)==="object"&&typeof gt.nodeType=="number"&&typeof gt.nodeName=="string"},l1=function(gt,Jn,Io){Jo[gt]&&sF(Jo[gt],function(Ia){Ia.call(s,Jn,Io,nT)})},IW=function(gt){var Jn;if(l1("beforeSanitizeElements",gt,null),qZ(gt)||ad(/[\u0080-\uFFFF]/,gt.nodeName))return i1(gt),!0;var Io=_C(gt.nodeName);if(l1("uponSanitizeElement",gt,{tagName:Io,allowedTags:As}),gt.hasChildNodes()&&!X4(gt.firstElementChild)&&(!X4(gt.content)||!X4(gt.content.firstElementChild))&&ad(/<[/\w]/g,gt.innerHTML)&&ad(/<[/\w]/g,gt.textContent)||Io==="select"&&ad(/<template/i,gt.innerHTML))return i1(gt),!0;if(!As[Io]||c1[Io]){if(!c1[Io]&&HW(Io)&&(Ka.tagNameCheck instanceof RegExp&&ad(Ka.tagNameCheck,Io)||Ka.tagNameCheck instanceof Function&&Ka.tagNameCheck(Io)))return!1;if(HV&&!eT[Io]){var Ia=rt(gt)||gt.parentNode,Ld=$e(gt)||gt.childNodes;if(Ld&&Ia)for(var Cu=Ld.length,ql=Cu-1;ql>=0;--ql)Ia.insertBefore(pe(Ld[ql],!0),nt(gt))}return i1(gt),!0}return gt instanceof w&&!GZ(gt)||(Io==="noscript"||Io==="noembed")&&ad(/<\/no(script|embed)/i,gt.innerHTML)?(i1(gt),!0):(Xk&&gt.nodeType===3&&(Jn=gt.textContent,Jn=_0(Jn,Bs," "),Jn=_0(Jn,hs," "),gt.textContent!==Jn&&(xC(s.removed,{element:gt.cloneNode()}),gt.textContent=Jn)),l1("afterSanitizeElements",gt,null),!1)},LW=function(gt,Jn,Io){if(AW&&(Jn==="id"||Jn==="name")&&(Io in i||Io in ZZ))return!1;if(!(K4&&!TC[Jn]&&ad(ln,Jn))){if(!(cF&&ad(Fn,Jn))){if(!Nr[Jn]||TC[Jn]){if(!(HW(gt)&&(Ka.tagNameCheck instanceof RegExp&&ad(Ka.tagNameCheck,gt)||Ka.tagNameCheck instanceof Function&&Ka.tagNameCheck(gt))&&(Ka.attributeNameCheck instanceof RegExp&&ad(Ka.attributeNameCheck,Jn)||Ka.attributeNameCheck instanceof Function&&Ka.attributeNameCheck(Jn))||Jn==="is"&&Ka.allowCustomizedBuiltInElements&&(Ka.tagNameCheck instanceof RegExp&&ad(Ka.tagNameCheck,Io)||Ka.tagNameCheck instanceof Function&&Ka.tagNameCheck(Io))))return!1}else if(!zV[Jn]){if(!ad(qs,_0(Io,es,""))){if(!((Jn==="src"||Jn==="xlink:href"||Jn==="href")&&gt!=="script"&&nZ(Io,"data:")===0&&DW[gt])){if(!(iF&&!ad($o,_0(Io,es,"")))){if(Io)return!1}}}}}}return!0},HW=function(gt){return gt.indexOf("-")>0},zW=function(gt){var Jn,Io,Ia,Ld;l1("beforeSanitizeAttributes",gt,null);var Cu=gt.attributes;if(Cu){var ql={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Nr};for(Ld=Cu.length;Ld--;){Jn=Cu[Ld];var gF=Jn,Kl=gF.name,VW=gF.namespaceURI;Io=Kl==="value"?Jn.value:oZ(Jn.value),Ia=_C(Kl);var YZ=Io;if(ql.attrName=Ia,ql.attrValue=Io,ql.keepAttr=!0,ql.forceKeepAttr=void 0,l1("uponSanitizeAttribute",gt,ql),Io=ql.attrValue,!ql.forceKeepAttr){if(!ql.keepAttr){fF(Kl,gt);continue}if(ad(/\/>/i,Io)){fF(Kl,gt);continue}Xk&&(Io=_0(Io,Bs," "),Io=_0(Io,hs," "));var XZ=_C(gt.nodeName);if(!LW(XZ,Ia,Io)){fF(Kl,gt);continue}if(Io!==YZ)try{VW?gt.setAttributeNS(VW,Kl,Io):gt.setAttribute(Kl,Io)}catch{fF(Kl,gt)}}}l1("afterSanitizeAttributes",gt,null)}},KZ=function ps(gt){var Jn,Io=FW(gt);for(l1("beforeSanitizeShadowDOM",gt,null);Jn=Io.nextNode();)l1("uponSanitizeShadowNode",Jn,null),!IW(Jn)&&(Jn.content instanceof d&&ps(Jn.content),zW(Jn));l1("afterSanitizeShadowDOM",gt,null)};return s.sanitize=function(ps,gt){var Jn,Io,Ia,Ld,Cu;if(WV=!ps,WV&&(ps="<!-->"),typeof ps!="string"&&!X4(ps)){if(typeof ps.toString!="function")throw DV("toString is not a function");if(ps=ps.toString(),typeof ps!="string")throw DV("dirty is not a string, aborting")}if(!s.isSupported){if(Ft(t.toStaticHTML)==="object"||typeof t.toStaticHTML=="function"){if(typeof ps=="string")return t.toStaticHTML(ps);if(X4(ps))return t.toStaticHTML(ps.outerHTML)}return ps}if(IV||ZV(gt),s.removed=[],typeof ps=="string"&&(Y4=!1),Y4){if(ps.nodeName){var ql=_C(ps.nodeName);if(!As[ql]||c1[ql])throw DV("root node is forbidden and cannot be sanitized in-place")}}else if(ps instanceof p)Jn=PW("<!---->"),Io=Jn.ownerDocument.importNode(ps,!0),Io.nodeType===1&&Io.nodeName==="BODY"||Io.nodeName==="HTML"?Jn=Io:Jn.appendChild(Io);else{if(!Jk&&!Xk&&!EC&&ps.indexOf("<")===-1)return lt&&uF?lt.createHTML(ps):ps;if(Jn=PW(ps),!Jn)return Jk?null:uF?_n:""}Jn&&LV&&i1(Jn.firstChild);for(var gF=FW(Y4?ps:Jn);Ia=gF.nextNode();)Ia.nodeType===3&&Ia===Ld||IW(Ia)||(Ia.content instanceof d&&KZ(Ia.content),zW(Ia),Ld=Ia);if(Ld=null,Y4)return ps;if(Jk){if(lF)for(Cu=yo.call(Jn.ownerDocument);Jn.firstChild;)Cu.appendChild(Jn.firstChild);else Cu=Jn;return Nr.shadowroot&&(Cu=ws.call(a,Cu,!0)),Cu}var Kl=EC?Jn.outerHTML:Jn.innerHTML;return EC&&As["!doctype"]&&Jn.ownerDocument&&Jn.ownerDocument.doctype&&Jn.ownerDocument.doctype.name&&ad(gZ,Jn.ownerDocument.doctype.name)&&(Kl="<!DOCTYPE "+Jn.ownerDocument.doctype.name+`>
`+Kl),Xk&&(Kl=_0(Kl,Bs," "),Kl=_0(Kl,hs," ")),lt&&uF?lt.createHTML(Kl):Kl},s.setConfig=function(ps){ZV(ps),IV=!0},s.clearConfig=function(){nT=null,IV=!1},s.isValidAttribute=function(ps,gt,Jn){nT||ZV({});var Io=_C(ps),Ia=_C(gt);return LW(Io,Ia,Jn)},s.addHook=function(ps,gt){typeof gt=="function"&&(Jo[ps]=Jo[ps]||[],xC(Jo[ps],gt))},s.removeHook=function(ps){if(Jo[ps])return OV(Jo[ps])},s.removeHooks=function(ps){Jo[ps]&&(Jo[ps]=[])},s.removeAllHooks=function(){Jo={}},s}var bZ=aW();const vZ=t=>bZ().sanitize(t),yZ=Vv.deviceType.isTouch(),cW=(t,s)=>({dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[t,s]}),iW=(t,s)=>qa.parts.close(nl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close")}},action:t,buttonBehaviours:mn([Ta.config({})])})),lW=()=>qa.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}}),uW=(t,s)=>qa.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:zg(`<p>${vZ(s.translate(t))}</p>`)}]}]}),dW=t=>qa.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:t}),mW=(t,s)=>[Sm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:t}),Sm.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:s})],$V=t=>{const s="tox-dialog",a=s+"-wrap",i=a+"__backdrop",d=s+"__disable-scroll";return qa.sketch({lazySink:t.lazySink,onEscape:g=>(t.onEscape(g),_.some(!0)),useTabstopAt:g=>!m0(g),dom:{tag:"div",classes:[s].concat(t.extraClasses),styles:{position:"relative",...t.extraStyles}},components:[t.header,t.body,...t.footer.toArray()],parts:{blocker:{dom:zg(`<div class="${a}"></div>`),components:[{dom:{tag:"div",classes:yZ?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:a,modalBehaviours:mn([Ao.config({}),fs("dialog-events",t.dialogEvents.concat([tc(Ym(),(g,p)=>{ho.focusIn(g)})])),fs("scroll-lock",[Ur(()=>{Sa(ta(),d)}),Bl(()=>{ua(ta(),d)})]),...t.extraBehaviours]),eventOrder:{[fl()]:["dialog-events"],[bd()]:["scroll-lock","dialog-events","alloy.base.behaviour"],[ph()]:["alloy.base.behaviour","dialog-events","scroll-lock"],...t.eventOrder}})},fW=t=>nl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close"),title:t.translate("Close")}},components:[vm("close",{tag:"div",classes:["tox-icon"]},t.icons)],action:s=>{Ws(s,dp)}}),gW=(t,s,a,i)=>{const d=g=>[Wa(i.translate(g.title))];return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:{...a.map(g=>({id:g})).getOr({})}},components:[],behaviours:mn([Gl.config({channel:`${CC}-${s}`,initialData:t,renderComponents:d})])}},hW=()=>({dom:zg('<div class="tox-dialog__draghandle"></div>')}),wZ=(t,s,a,i)=>Sm.sketch({dom:zg('<div class="tox-dialog__header"></div>'),components:[gW(t,s,_.some(a),i),hW(),fW(i)],containerBehaviours:mn([Ug.config({mode:"mouse",blockerClass:"blocker",getTarget:d=>$l(d,'[role="dialog"]').getOrDie(),snaps:{getSnapPoints:()=>[],leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}),CZ=(t,s,a)=>{const i=qa.parts.title(gW(t,s,_.none(),a)),d=qa.parts.draghandle(hW()),g=qa.parts.close(fW(a)),p=[i].concat(t.draggable?[d]:[]).concat([g]);return Sm.sketch({dom:zg('<div class="tox-dialog__header"></div>'),components:p})},pW=(t,s,a)=>CZ({title:a.shared.providers.translate(t),draggable:a.dialog.isDraggableModal()},s,a.shared.providers),bW=(t,s,a)=>({dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":a.translate(t)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:s,components:[{dom:zg('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}),vW=(t,s,a)=>({onClose:()=>a.closeWindow(),onBlock:i=>{qa.setBusy(t(),(d,g)=>bW(i.message,g,s))},onUnblock:()=>{qa.setIdle(t())}}),yW=(t,s,a,i)=>{const d=(g,p)=>_.some(p);return Ci($V({...t,lazySink:i.shared.getSink,extraBehaviours:[Gl.config({channel:`${wC}-${t.id}`,updateState:d,initialData:s}),Qu.memory({}),...t.extraBehaviours],onEscape:g=>{Ws(g,dp)},dialogEvents:a,eventOrder:{[au()]:[Gl.name(),Pl.name()],[bd()]:["scroll-lock",Gl.name(),"messages","dialog-events","alloy.base.behaviour"],[ph()]:["alloy.base.behaviour","dialog-events","messages",Gl.name(),"scroll-lock"]}}))},wW=t=>{const s=a=>{const i=Ie(a.items,d=>{const g=V(!1);return{...d,storage:g}});return{...a,items:i}};return Ie(t,a=>a.type==="menu"?s(a):a)},CW=t=>Ee(t,(s,a)=>a.type==="menu"?Ee(a.items,(d,g)=>(d[g.name]=g.storage,d),s):s,{}),SW=(t,s)=>[vh(Ym(),jw),t(Pw,(a,i)=>{s.onClose(),i.onClose()}),t(dp,(a,i,d,g)=>{i.onCancel(a),Ws(g,Pw)}),zt(EA,(a,i)=>s.onUnblock()),zt(TA,(a,i)=>s.onBlock(i.event))],PV={initUrlDialog:(t,s)=>{const a=(d,g)=>zt(d,(p,w)=>{i(p,(T,A)=>{g(t(),T,w.event,p)})}),i=(d,g)=>{Gl.getState(d).get().each(p=>{g(p,d)})};return[...SW(a,s),a($g,(d,g,p)=>{g.onAction(d,{name:p.name})})]},initDialog:(t,s,a)=>{const i=(g,p)=>zt(g,(w,T)=>{d(w,(A,D)=>{p(t(),A,T.event,w)})}),d=(g,p)=>{Gl.getState(g).get().each(w=>{p(w.internalDialog,g)})};return[...SW(i,s),i(Fw,(g,p)=>p.onSubmit(g)),i(Zl,(g,p,w)=>{p.onChange(g,{name:w.name})}),i($g,(g,p,w,T)=>{const A=()=>ho.focusIn(T),D=W=>J(W,"disabled")||$(W,"aria-disabled").exists(le=>le==="true"),N=Ko(T.element),U=Ji(N);p.onAction(g,{name:w.name,value:w.value}),Ji(N).fold(A,W=>{D(W)||U.exists(le=>gi(W,le)&&D(le))?A():a().toOptional().filter(le=>!gi(le.element,W)).each(A)})}),i(TM,(g,p,w)=>{p.onTabChange(g,{newTabName:w.name,oldTabName:w.oldName})}),Bl(g=>{const p=t();En.setValue(g,p.getData())})]}},SZ=(t,s)=>Kx(t,t.type,s),xZ=(t,s,a)=>se(s,i=>i.name===a).bind(i=>i.memento.getOpt(t)),kZ=(t,s)=>{const a=s.map(w=>w.footerButtons).getOr([]),i=Ae(a,w=>w.align==="start"),d=(w,T)=>Sm.sketch({dom:{tag:"div",classes:[`tox-dialog__footer-${w}`]},components:Ie(T,A=>A.memento.asSpec())}),g=d("start",i.pass),p=d("end",i.fail);return[g,p]},xW=(t,s,a)=>{const i=(d,g)=>{const p=Ie(g.buttons,T=>{const A=xr(SZ(T,a));return{name:T.name,align:T.align,memento:A}}),w=T=>xZ(d,p,T);return _.some({lookupByName:w,footerButtons:p})};return{dom:zg('<div class="tox-dialog__footer"></div>'),components:[],behaviours:mn([Gl.config({channel:`${Kk}-${s}`,initialData:t,updateState:i,renderComponents:kZ})])}},TZ=(t,s,a)=>xW(t,s,a),kW=(t,s,a)=>qa.parts.footer(xW(t,s,a)),TW=(t,s)=>{if(t.getRoot().getSystem().isConnected()){const i=ss.getCurrent(t.getFormWrapper()).getOr(t.getFormWrapper());return Zb.getField(i,s).orThunk(()=>{const d=t.getFooter();return Gl.getState(d).get().bind(p=>p.lookupByName(s))})}else return _.none()},EZ=(t,s)=>{const a=t.getRoot();return Gl.getState(a).get().map(i=>ou(Ms("data",i.dataValidator,s))).getOr(s)},EW=(t,s,a)=>{const i=le=>{const pe=t.getRoot();pe.getSystem().isConnected()&&le(pe)},W={getData:()=>{const le=t.getRoot(),pe=le.getSystem().isConnected()?t.getFormWrapper():le,nt=En.getValue(pe),$e=an(a,rt=>rt.get());return{...nt,...$e}},setData:le=>{i(pe=>{const nt=W.getData(),$e=vr(nt,le),rt=EZ(t,$e),wn=t.getFormWrapper();En.setValue(wn,rt),Bt(a,(lt,_n)=>{Kn($e,_n)&&lt.set($e[_n])})})},setEnabled:(le,pe)=>{TW(t,le).each(pe?To.enable:To.disable)},focus:le=>{TW(t,le).each(Ao.focus)},block:le=>{if(!Nt(le))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");i(pe=>{vo(pe,TA,{message:le})})},unblock:()=>{i(le=>{Ws(le,EA)})},showTab:le=>{i(pe=>{const nt=t.getBody();Gl.getState(nt).get().exists(rt=>rt.isTabPanel())&&ss.getCurrent(nt).each(rt=>{ea.showTab(rt,le)})})},redial:le=>{i(pe=>{const nt=t.getId(),$e=s(le);pe.getSystem().broadcastOn([`${wC}-${nt}`],$e),pe.getSystem().broadcastOn([`${CC}-${nt}`],$e.internalDialog),pe.getSystem().broadcastOn([`${qk}-${nt}`],$e.internalDialog),pe.getSystem().broadcastOn([`${Kk}-${nt}`],$e.internalDialog),W.setData($e.initialData)})},close:()=>{i(le=>{Ws(le,Pw)})}};return W},_Z=t=>{switch(t){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}},AZ=(t,s,a)=>{const i=Yn("dialog"),d=t.internalDialog,g=pW(d.title,i,a),p=it({body:d.body,initialData:d.initialData},i,a),w=wW(d.buttons),T=CW(w),A=kW({buttons:w},i,a),D=PV.initDialog(()=>pe,vW(()=>W,a.shared.providers,s),a.shared.getSink),N=_Z(d.size),U={id:i,header:g,body:p,footer:_.some(A),extraClasses:N,extraBehaviours:[],extraStyles:{}},W=yW(U,t,D,a),le=(()=>{const nt=()=>{const $e=qa.getBody(W);return ss.getCurrent($e).getOr($e)};return{getId:Y(i),getRoot:Y(W),getBody:()=>qa.getBody(W),getFooter:()=>qa.getFooter(W),getFormWrapper:nt}})(),pe=EW(le,s.redial,T);return{dialog:W,instanceApi:pe}},OZ=(t,s,a,i)=>{const d=Yn("dialog"),g=Yn("dialog-label"),p=Yn("dialog-content"),w=t.internalDialog,T=($e,rt)=>_.some(rt),A=xr(wZ({title:w.title,draggable:!0},d,g,a.shared.providers)),D=xr(tt({body:w.body,initialData:w.initialData},d,p,a,i)),N=wW(w.buttons),U=CW(N),W=xr(TZ({buttons:N},d,a)),le=PV.initDialog(()=>nt,{onBlock:$e=>{Hg.block(pe,(rt,wn)=>bW($e.message,wn,a.shared.providers))},onUnblock:()=>{Hg.unblock(pe)},onClose:()=>s.closeWindow()},a.shared.getSink),pe=Ci({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:{role:"dialog",["aria-labelledby"]:g,["aria-describedby"]:p}},eventOrder:{[au()]:[Gl.name(),Pl.name()],[fl()]:["execute-on-form"],[bd()]:["reflecting","execute-on-form"]},behaviours:mn([ho.config({mode:"cyclic",onEscape:$e=>(Ws($e,Pw),_.some(!0)),useTabstopAt:$e=>!m0($e)&&(qo($e)!=="button"||ar($e,"disabled")!=="disabled")}),Gl.config({channel:`${wC}-${d}`,updateState:T,initialData:t}),Ao.config({}),fs("execute-on-form",le.concat([tc(Ym(),($e,rt)=>{ho.focusIn($e)})])),Hg.config({getRoot:()=>_.some(pe)}),zo.config({}),Qu.memory({})]),components:[A.asSpec(),D.asSpec(),W.asSpec()]}),nt=EW({getId:Y(d),getRoot:Y(pe),getFooter:()=>W.get(pe),getBody:()=>D.get(pe),getFormWrapper:()=>{const $e=D.get(pe);return ss.getCurrent($e).getOr($e)}},s.redial,U);return{dialog:pe,instanceApi:nt}};var FV=tinymce.util.Tools.resolve("tinymce.util.URI");const DZ=t=>{const s=p=>{t.getSystem().isConnected()&&p(t)};return{block:p=>{if(!Nt(p))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");s(w=>{vo(w,TA,{message:p})})},unblock:()=>{s(p=>{Ws(p,EA)})},close:()=>{s(p=>{Ws(p,Pw)})},sendMessage:p=>{s(w=>{w.getSystem().broadcastOn([jg],p)})}}},RZ=["insertContent","setContent","execCommand","close","block","unblock"],_W=t=>Et(t)&&RZ.indexOf(t.mceAction)!==-1,MZ=t=>!_W(t)&&Et(t)&&Kn(t,"mceAction"),NZ=(t,s,a)=>{switch(a.mceAction){case"insertContent":t.insertContent(a.content);break;case"setContent":t.setContent(a.content);break;case"execCommand":const i=Ut(a.ui)?a.ui:!1;t.execCommand(a.cmd,i,a.value);break;case"close":s.close();break;case"block":s.block(a.message);break;case"unblock":s.unblock();break}},BZ=(t,s,a,i)=>{const d=Yn("dialog"),g=pW(t.title,d,i),p=Yt(t),w=t.buttons.bind(rt=>rt.length===0?_.none():_.some(kW({buttons:rt},d,i))),T=PV.initUrlDialog(()=>$e,vW(()=>nt,i.shared.providers,s)),A={...t.height.fold(()=>({}),rt=>({height:rt+"px","max-height":rt+"px"})),...t.width.fold(()=>({}),rt=>({width:rt+"px","max-width":rt+"px"}))},D=t.width.isNone()&&t.height.isNone()?["tox-dialog--width-lg"]:[],N=new FV(t.url,{base_uri:new FV(window.location.href)}),U=`${N.protocol}://${N.host}${N.port?":"+N.port:""}`,W=fg(),le=[fs("messages",[Ur(()=>{const rt=ii(Lt.fromDom(window),"message",wn=>{if(N.isSameOrigin(new FV(wn.raw.origin))){const lt=wn.raw.data;_W(lt)?NZ(a,$e,lt):MZ(lt)&&t.onMessage($e,lt)}});W.set(rt)}),Bl(W.clear)]),Pl.config({channels:{[jg]:{onReceive:(rt,wn)=>{da(rt.element,"iframe").each(lt=>{const _n=lt.dom.contentWindow;cn(_n)&&_n.postMessage(wn,U)})}}}})],nt=yW({id:d,header:g,body:p,footer:w,extraClasses:D,extraBehaviours:le,extraStyles:A},t,T,i),$e=DZ(nt);return{dialog:nt,instanceApi:$e}},$Z=t=>{const s=t.shared;return{open:(i,d)=>{const g=()=>{qa.hide(A),d()},p=xr(Kx({name:"close-alert",text:"OK",primary:!0,buttonType:_.some("primary"),align:"end",enabled:!0,icon:_.none()},"cancel",t)),w=lW(),T=iW(g,s.providers),A=Ci($V({lazySink:()=>s.getSink(),header:cW(w,T),body:uW(i,s.providers),footer:_.some(dW(mW([],[p.asSpec()]))),onEscape:g,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[zt(dp,g)],eventOrder:{}}));qa.show(A);const D=p.get(A);Ao.focus(D)}}},PZ=t=>{const s=t.shared;return{open:(i,d)=>{const g=U=>{qa.hide(D),d(U)},p=xr(Kx({name:"yes",text:"Yes",primary:!0,buttonType:_.some("primary"),align:"end",enabled:!0,icon:_.none()},"submit",t)),w=Kx({name:"no",text:"No",primary:!1,buttonType:_.some("secondary"),align:"end",enabled:!0,icon:_.none()},"cancel",t),T=lW(),A=iW(()=>g(!1),s.providers),D=Ci($V({lazySink:()=>s.getSink(),header:cW(T,A),body:uW(i,s.providers),footer:_.some(dW(mW([],[w,p.asSpec()]))),onEscape:()=>g(!1),extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[zt(dp,()=>g(!1)),zt(Fw,()=>g(!0))],eventOrder:{}}));qa.show(D);const N=p.get(D);Ao.focus(N)}}},FZ=(t,s)=>ou(Ms("data",s,t)),IZ=t=>Nw(t,".tox-alert-dialog")||Nw(t,".tox-confirm-dialog"),LZ=(t,s,a)=>s&&a?[]:[ki.config({contextual:{lazyContext:()=>_.some(os(Lt.fromDom(t.getContentAreaContainer()))),fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})],HZ=t=>{const s=t.editor,a=yw(s),i=$Z(t.backstages.dialog),d=PZ(t.backstages.dialog),g=(W,le,pe)=>le!==void 0&&le.inline==="toolbar"?A(W,t.backstages.popup.shared.anchors.inlineDialog(),pe,le.ariaAttrs):le!==void 0&&le.inline==="cursor"?A(W,t.backstages.popup.shared.anchors.cursor(),pe,le.ariaAttrs):T(W,pe),p=(W,le)=>w(W,le),w=(W,le)=>{const pe=nt=>{const $e=BZ(nt,{closeWindow:()=>{qa.hide($e.dialog),le($e.instanceApi)}},s,t.backstages.dialog);return qa.show($e.dialog),$e.instanceApi};return Tr.openUrl(pe,W)},T=(W,le)=>{const pe=(nt,$e,rt)=>{const wn=$e,_n=AZ({dataValidator:rt,initialData:wn,internalDialog:nt},{redial:Tr.redial,closeWindow:()=>{qa.hide(_n.dialog),le(_n.instanceApi)}},t.backstages.dialog);return qa.show(_n.dialog),_n.instanceApi.setData(wn),_n.instanceApi};return Tr.open(pe,W)},A=(W,le,pe,nt=!1)=>{const $e=(rt,wn,lt)=>{const _n=FZ(wn,lt),qn=Wr(),Ln=t.backstages.popup.shared.header.isPositionedAtTop(),bo={dataValidator:lt,initialData:_n,internalDialog:rt},yo=()=>qn.on(io=>{Jr.reposition(io),ki.refresh(io)}),Zo=OZ(bo,{redial:Tr.redial,closeWindow:()=>{qn.on(Jr.hide),s.off("ResizeEditor",yo),qn.clear(),pe(Zo.instanceApi)}},t.backstages.popup,nt),ws=Ci(Jr.sketch({lazySink:t.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{},...Ln?{}:{fireRepositionEventInstead:{}},inlineBehaviours:mn([fs("window-manager-inline-events",[zt(Yd(),(io,Jo)=>{Ws(Zo.dialog,dp)})]),...LZ(s,a,Ln)]),isExtraPart:(io,Jo)=>IZ(Jo)}));return qn.set(ws),Jr.showWithin(ws,vl(Zo.dialog),{anchor:le},_.some(ta())),(!a||!Ln)&&(ki.refresh(ws),s.on("ResizeEditor",yo)),Zo.instanceApi.setData(_n),ho.focusIn(Zo.dialog),Zo.instanceApi};return Tr.open($e,W)};return{open:g,openUrl:p,alert:(W,le)=>{i.open(W,le)},close:W=>{W.close()},confirm:(W,le)=>{d.open(W,le)}}},zZ=t=>{xD(t),JR(t),yP(t)};var VZ=()=>{Rt.add("silver",t=>{zZ(t);const{dialogs:s,popups:a,renderUI:i}=GP(t);g8.register(t,a.backstage.shared);const d=HZ({editor:t,backstages:{popup:a.backstage,dialog:s.backstage}}),g=()=>m_(t,{backstage:a.backstage},a.getMothership());return{renderUI:i,getWindowManagerImpl:Y(d),getNotificationManagerImpl:g}})};VZ()})();tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path id="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}});(function(){var Ht=tinymce.util.Tools.resolve("tinymce.ModelManager");const yn=(l,m,h)=>{var v;return h(l,m.prototype)?!0:((v=l.constructor)===null||v===void 0?void 0:v.name)===m.name},dn=l=>{const m=typeof l;return l===null?"null":m==="object"&&Array.isArray(l)?"array":m==="object"&&yn(l,String,(h,v)=>v.isPrototypeOf(h))?"string":m},Sn=l=>m=>dn(m)===l,Qt=l=>m=>typeof m===l,Dn=l=>m=>l===m,xn=Sn("string"),Nt=Sn("object"),Et=Sn("array"),pt=Dn(null),hn=Qt("boolean"),rn=Dn(void 0),Ut=l=>l==null,Ct=l=>!Ut(l),Mt=Qt("function"),cn=Qt("number"),Ze=()=>{},st=(l,m)=>(...h)=>l(m.apply(null,h)),Te=(l,m)=>h=>l(m(h)),Q=l=>()=>l,ht=l=>l,It=(l,m)=>l===m;function yt(l,...m){return(...h)=>{const v=m.concat(h);return l.apply(null,v)}}const Y=l=>m=>!l(m),Ot=l=>()=>{throw new Error(l)},Bn=l=>l(),$t=Q(!1),ye=Q(!0);class ee{constructor(m,h){this.tag=m,this.value=h}static some(m){return new ee(!0,m)}static none(){return ee.singletonNone}fold(m,h){return this.tag?h(this.value):m()}isSome(){return this.tag}isNone(){return!this.tag}map(m){return this.tag?ee.some(m(this.value)):ee.none()}bind(m){return this.tag?m(this.value):ee.none()}exists(m){return this.tag&&m(this.value)}forall(m){return!this.tag||m(this.value)}filter(m){return!this.tag||m(this.value)?this:ee.none()}getOr(m){return this.tag?this.value:m}or(m){return this.tag?this:m}getOrThunk(m){return this.tag?this.value:m()}orThunk(m){return this.tag?this:m()}getOrDie(m){if(this.tag)return this.value;throw new Error(m??"Called getOrDie on None")}static from(m){return Ct(m)?ee.some(m):ee.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(m){this.tag&&m(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ee.singletonNone=new ee(!1);const at=Array.prototype.slice,Le=Array.prototype.indexOf,Me=Array.prototype.push,Rt=(l,m)=>Le.call(l,m),_=(l,m)=>Rt(l,m)>-1,he=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];if(m(S,h))return!0}return!1},Ue=(l,m)=>{const h=[];for(let v=0;v<l;v++)h.push(m(v));return h},Oe=(l,m)=>{const h=l.length,v=new Array(h);for(let S=0;S<h;S++){const O=l[S];v[S]=m(O,S)}return v},fe=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];m(S,h)}},Kt=(l,m)=>{for(let h=l.length-1;h>=0;h--){const v=l[h];m(v,h)}},nn=(l,m)=>{const h=[],v=[];for(let S=0,O=l.length;S<O;S++){const F=l[S];(m(F,S)?h:v).push(F)}return{pass:h,fail:v}},Fe=(l,m)=>{const h=[];for(let v=0,S=l.length;v<S;v++){const O=l[v];m(O,v)&&h.push(O)}return h},Vt=(l,m,h)=>(Kt(l,(v,S)=>{h=m(h,v,S)}),h),kt=(l,m,h)=>(fe(l,(v,S)=>{h=m(h,v,S)}),h),Ie=(l,m,h)=>{for(let v=0,S=l.length;v<S;v++){const O=l[v];if(m(O,v))return ee.some(O);if(h(O,v))break}return ee.none()},R=(l,m)=>Ie(l,m,$t),Hn=(l,m)=>{for(let h=0,v=l.length;h<v;h++){const S=l[h];if(m(S,h))return ee.some(h)}return ee.none()},Ae=l=>{const m=[];for(let h=0,v=l.length;h<v;++h){if(!Et(l[h]))throw new Error("Arr.flatten item "+h+" was not an array, input: "+l);Me.apply(m,l[h])}return m},Se=(l,m)=>Ae(Oe(l,m)),We=(l,m)=>{for(let h=0,v=l.length;h<v;++h){const S=l[h];if(m(S,h)!==!0)return!1}return!0},Ee=l=>{const m=at.call(l,0);return m.reverse(),m},ae=(l,m)=>{const h={};for(let v=0,S=l.length;v<S;v++){const O=l[v];h[String(O)]=m(O,v)}return h},se=(l,m)=>{const h=at.call(l,0);return h.sort(m),h},re=(l,m)=>m>=0&&m<l.length?ee.some(l[m]):ee.none(),H=l=>re(l,0),q=l=>re(l,l.length-1),z=(l,m)=>{for(let h=0;h<l.length;h++){const v=m(l[h],h);if(v.isSome())return v}return ee.none()},Z=Object.keys,Ne=Object.hasOwnProperty,Pe=(l,m)=>{const h=Z(l);for(let v=0,S=h.length;v<S;v++){const O=h[v],F=l[O];m(F,O)}},Wt=(l,m)=>ot(l,(h,v)=>({k:v,v:m(h,v)})),ot=(l,m)=>{const h={};return Pe(l,(v,S)=>{const O=m(v,S);h[O.k]=O.v}),h},Qn=l=>(m,h)=>{l[h]=m},uo=(l,m,h,v)=>{Pe(l,(S,O)=>{(m(S,O)?h:v)(S,O)})},eo=(l,m)=>{const h={};return uo(l,m,Qn(h),Ze),h},kn=(l,m)=>{const h=[];return Pe(l,(v,S)=>{h.push(m(v,S))}),h},ao=l=>kn(l,ht),Re=(l,m)=>Ye(l,m)?ee.from(l[m]):ee.none(),Ye=(l,m)=>Ne.call(l,m),Bt=(l,m)=>Ye(l,m)&&l[m]!==void 0&&l[m]!==null,an=l=>{for(const m in l)if(Ne.call(l,m))return!1;return!0};typeof window<"u"||Function("return this;")();const An=8,Tn=9,Do=11,ks=1,qe=3,ze=l=>l.dom.nodeName.toLowerCase(),sn=l=>l.dom.nodeType,on=l=>m=>sn(m)===l,qt=l=>sn(l)===An||ze(l)==="#comment",Kn=on(ks),Ts=on(qe),_r=on(Tn),ga=on(Do),bs=l=>m=>Kn(m)&&ze(m)===l,wc=(l,m,h)=>{if(xn(h)||hn(h)||cn(h))l.setAttribute(m,h+"");else throw console.error("Invalid call to Attribute.set. Key ",m,":: Value ",h,":: Element ",l),new Error("Attribute value was not simple")},ys=(l,m,h)=>{wc(l.dom,m,h)},cs=(l,m)=>{const h=l.dom;Pe(m,(v,S)=>{wc(h,S,v)})},go=(l,m)=>{Pe(m,(h,v)=>{h.fold(()=>{Hs(l,v)},S=>{wc(l.dom,v,S)})})},gr=(l,m)=>{const h=l.dom.getAttribute(m);return h===null?void 0:h},Gr=(l,m)=>ee.from(gr(l,m)),Hs=(l,m)=>{l.dom.removeAttribute(m)},ha=l=>kt(l.dom.attributes,(m,h)=>(m[h.name]=h.value,m),{}),qr=(l,m)=>{const v=(m||document).createElement("div");if(v.innerHTML=l,!v.hasChildNodes()||v.childNodes.length>1){const S="HTML does not have a single root node";throw console.error(S,l),new Error(S)}return _a(v.childNodes[0])},cc=(l,m)=>{const v=(m||document).createElement(l);return _a(v)},Qs=(l,m)=>{const v=(m||document).createTextNode(l);return _a(v)},_a=l=>{if(l==null)throw new Error("Node cannot be null or undefined");return{dom:l}},K={fromHtml:qr,fromTag:cc,fromText:Qs,fromDom:_a,fromPoint:(l,m,h)=>ee.from(l.dom.elementFromPoint(m,h)).map(_a)},ct=(l,m)=>{const h=l.dom;if(h.nodeType!==ks)return!1;{const v=h;if(v.matches!==void 0)return v.matches(m);if(v.msMatchesSelector!==void 0)return v.msMatchesSelector(m);if(v.webkitMatchesSelector!==void 0)return v.webkitMatchesSelector(m);if(v.mozMatchesSelector!==void 0)return v.mozMatchesSelector(m);throw new Error("Browser lacks native selectors")}},vt=l=>l.nodeType!==ks&&l.nodeType!==Tn&&l.nodeType!==Do||l.childElementCount===0,jn=(l,m)=>{const h=m===void 0?document:m.dom;return vt(h)?[]:Oe(h.querySelectorAll(l),K.fromDom)},to=(l,m)=>{const h=m===void 0?document:m.dom;return vt(h)?ee.none():ee.from(h.querySelector(l)).map(K.fromDom)},In=(l,m)=>l.dom===m.dom,is=(l,m)=>{const h=l.dom,v=m.dom;return h===v?!1:h.contains(v)},ts=ct,xo=l=>K.fromDom(l.dom.ownerDocument),ir=l=>_r(l)?l:xo(l),Lt=l=>K.fromDom(ir(l).dom.documentElement),ge=l=>K.fromDom(ir(l).dom.defaultView),be=l=>ee.from(l.dom.parentNode).map(K.fromDom),_t=l=>ee.from(l.dom.parentElement).map(K.fromDom),tn=(l,m)=>{const h=Mt(m)?m:$t;let v=l.dom;const S=[];for(;v.parentNode!==null&&v.parentNode!==void 0;){const O=v.parentNode,F=K.fromDom(O);if(S.push(F),h(F)===!0)break;v=O}return S},un=l=>ee.from(l.dom.previousSibling).map(K.fromDom),Pn=l=>ee.from(l.dom.nextSibling).map(K.fromDom),pn=l=>Oe(l.dom.childNodes,K.fromDom),zn=(l,m)=>{const h=l.dom.childNodes;return ee.from(h[m]).map(K.fromDom)},oo=l=>zn(l,0),wo=(l,m)=>{be(l).each(v=>{v.dom.insertBefore(m.dom,l.dom)})},Os=(l,m)=>{Pn(l).fold(()=>{be(l).each(S=>{qo(S,m)})},v=>{wo(v,m)})},hr=(l,m)=>{oo(l).fold(()=>{qo(l,m)},v=>{l.dom.insertBefore(m.dom,v.dom)})},qo=(l,m)=>{l.dom.appendChild(m.dom)},Xc=(l,m,h)=>{zn(l,h).fold(()=>{qo(l,m)},v=>{wo(v,m)})},ls=(l,m)=>{wo(l,m),qo(m,l)},Cs=(l,m)=>{fe(m,(h,v)=>{const S=v===0?l:m[v-1];Os(S,h)})},xs=(l,m)=>{fe(m,h=>{qo(l,h)})},Lr=l=>{l.dom.textContent="",fe(pn(l),m=>{Br(m)})},Br=l=>{const m=l.dom;m.parentNode!==null&&m.parentNode.removeChild(m)},Fc=l=>{const m=pn(l);m.length>0&&Cs(l,m),Br(l)},La=(l,m)=>K.fromDom(l.dom.cloneNode(m)),Jc=l=>La(l,!1),_i=l=>La(l,!0),Qc=(l,m)=>{const h=K.fromTag(m),v=ha(l);return cs(h,v),h},zi=(l,m)=>{const h=Qc(l,m),v=pn(_i(l));return xs(h,v),h},Us=(l,m)=>{const h=Qc(l,m);Os(l,h);const v=pn(l);return xs(h,v),Br(l),h},gi=["tfoot","thead","tbody","colgroup"],pa=l=>_(gi,l),ic=(l,m)=>({rows:l,columns:m}),hi=(l,m)=>({row:l,column:m}),Ic=(l,m,h)=>({element:l,rowspan:m,colspan:h}),aa=(l,m,h,v)=>({element:l,rowspan:m,colspan:h,isNew:v}),Ai=(l,m,h,v,S,O)=>({element:l,rowspan:m,colspan:h,row:v,column:S,isLocked:O}),Cc=(l,m,h)=>({element:l,cells:m,section:h}),Vi=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),er=(l,m,h)=>({element:l,isNew:m,isLocked:h}),ba=(l,m,h,v)=>({element:l,cells:m,section:h,isNew:v}),X=(l,m,h,v)=>({startRow:l,startCol:m,finishRow:h,finishCol:v}),xe=(l,m,h)=>({element:l,colspan:m,column:h}),He=(l,m)=>({element:l,columns:m}),wt=l=>ga(l)&&Ct(l.dom.host),Gt=Mt(Element.prototype.attachShadow)&&Mt(Node.prototype.getRootNode),mo=Q(Gt),Ko=Gt?l=>K.fromDom(l.dom.getRootNode()):ir,Ar=l=>{const m=Ko(l);return wt(m)?ee.some(m):ee.none()},zs=l=>K.fromDom(l.dom.host),$r=l=>{if(mo()&&Ct(l.target)){const m=K.fromDom(l.target);if(Kn(m)&&Or(m)&&l.composed&&l.composedPath){const h=l.composedPath();if(h)return H(h)}}return ee.from(l.target)},Or=l=>Ct(l.dom.shadowRoot),Pr=l=>{const m=Ts(l)?l.dom.parentNode:l.dom;if(m==null||m.ownerDocument===null)return!1;const h=m.ownerDocument;return Ar(K.fromDom(m)).fold(()=>h.body.contains(m),Te(Pr,zs))},Ha=()=>Kr(K.fromDom(document)),Kr=l=>{const m=l.dom.body;if(m==null)throw new Error("Body is not available yet");return K.fromDom(m)},ta=(l,m,h)=>Fe(tn(l,h),m),ei=(l,m)=>Fe(pn(l),m),ti=(l,m)=>{let h=[];return fe(pn(l),v=>{m(v)&&(h=h.concat([v])),h=h.concat(ti(v,m))}),h},ko=(l,m,h)=>ta(l,v=>ct(v,m),h),us=(l,m)=>ei(l,h=>ct(h,m)),ar=(l,m)=>jn(m,l);var $=(l,m,h,v,S)=>l(h,v)?ee.some(h):Mt(S)&&S(h)?ee.none():m(h,v,S);const J=(l,m,h)=>{let v=l.dom;const S=Mt(h)?h:$t;for(;v.parentNode;){v=v.parentNode;const O=K.fromDom(v);if(m(O))return ee.some(O);if(S(O))break}return ee.none()},de=(l,m,h)=>$((S,O)=>O(S),J,l,m,h),Xe=(l,m)=>{const h=S=>m(K.fromDom(S));return R(l.dom.childNodes,h).map(K.fromDom)},Nn=(l,m)=>{const h=v=>{for(let S=0;S<v.childNodes.length;S++){const O=K.fromDom(v.childNodes[S]);if(m(O))return ee.some(O);const F=h(v.childNodes[S]);if(F.isSome())return F}return ee.none()};return h(l.dom)},Mo=(l,m,h)=>J(l,v=>ct(v,m),h),Vn=(l,m)=>Xe(l,h=>ct(h,m)),Hr=(l,m)=>to(m,l),pr=(l,m,h)=>$((S,O)=>ct(S,O),Mo,l,m,h),Dt=(l,m,h=It)=>l.exists(v=>h(v,m)),ca=l=>{const m=[],h=v=>{m.push(v)};for(let v=0;v<l.length;v++)l[v].each(h);return m},tr=(l,m)=>l!=null?m(l):ee.none(),Zr=(l,m)=>l?ee.some(m):ee.none(),sl=(l,m,h)=>m===""||l.length>=m.length&&l.substr(h,h+m.length)===m,Po=(l,m,h=0,v)=>{const S=l.indexOf(m,h);return S!==-1?rn(v)?!0:S+m.length<=v:!1},ne=(l,m)=>sl(l,m,0),me=(l,m)=>sl(l,m,l.length-m.length),dt=(l=>m=>m.replace(l,""))(/^\s+|\s+$/g),Un=l=>l.length>0,so=l=>{const m=parseFloat(l);return isNaN(m)?ee.none():ee.some(m)},Ys=l=>l.style!==void 0&&Mt(l.style.getPropertyValue),Yo=(l,m,h)=>{if(!xn(h))throw console.error("Invalid call to CSS.set. Property ",m,":: Value ",h,":: Element ",l),new Error("CSS value must be a string: "+h);Ys(l)&&l.style.setProperty(m,h)},Ui=(l,m)=>{Ys(l)&&l.style.removeProperty(m)},Qo=(l,m,h)=>{const v=l.dom;Yo(v,m,h)},Ds=(l,m)=>{const h=l.dom;Pe(m,(v,S)=>{Yo(h,S,v)})},Aa=(l,m)=>{const h=l.dom,S=window.getComputedStyle(h).getPropertyValue(m);return S===""&&!Pr(l)?lc(h,m):S},lc=(l,m)=>Ys(l)?l.style.getPropertyValue(m):"",Wi=(l,m)=>{const h=l.dom,v=lc(h,m);return ee.from(v).filter(S=>S.length>0)},br=(l,m)=>{const h=l.dom;Ui(h,m),Dt(Gr(l,"style").map(dt),"")&&Hs(l,"style")},rr=(l,m)=>{const h=l.dom,v=m.dom;Ys(h)&&Ys(v)&&(v.style.cssText=h.style.cssText)},Rs=(l,m,h=0)=>Gr(l,m).map(v=>parseInt(v,10)).getOr(h),zr=(l,m)=>Rs(l,m,1),Sc=l=>bs("col")(l)?Rs(l,"span",1)>1:zr(l,"colspan")>1,Ol=l=>zr(l,"rowspan")>1,Yr=(l,m)=>parseInt(Aa(l,m),10),Yl=Q(10),Su=Q(10),uc=(l,m)=>xu(l,m,ye),xu=(l,m,h)=>Se(pn(l),v=>ct(v,m)?h(v)?[v]:[]:xu(v,m,h)),Yg=(l,m,h=$t)=>{if(h(m))return ee.none();if(_(l,ze(m)))return ee.some(m);const v=S=>ct(S,"table")||h(S);return Mo(m,l.join(","),v)},Lc=(l,m)=>Yg(["td","th"],l,m),Dl=l=>uc(l,"th,td"),cd=l=>ct(l,"colgroup")?us(l,"col"):Se(ku(l),m=>us(m,"col")),za=(l,m)=>pr(l,"table",m),rl=l=>uc(l,"tr"),ku=l=>za(l).fold(Q([]),m=>us(m,"colgroup")),zd=(l,m)=>Oe(l,h=>{if(ze(h)==="colgroup"){const v=Oe(cd(h),S=>{const O=Rs(S,"span",1);return Ic(S,1,O)});return Cc(h,v,"colgroup")}else{const v=Oe(Dl(h),S=>{const O=Rs(S,"rowspan",1),F=Rs(S,"colspan",1);return Ic(S,O,F)});return Cc(h,v,m(h))}}),Xl=l=>be(l).map(m=>{const h=ze(m);return pa(h)?h:"tbody"}).getOr("tbody"),Mm=l=>{const m=rl(l),v=[...ku(l),...m];return zd(v,Xl)},Vd=(l,m)=>zd(l,()=>m),Oi=l=>{let m=!1,h;return(...v)=>(m||(m=!0,h=l.apply(null,v)),h)},Xg=(l,m,h,v)=>{const S=l.isiOS()&&/ipad/i.test(h)===!0,O=l.isiOS()&&!S,F=l.isiOS()||l.isAndroid(),G=F||v("(pointer:coarse)"),oe=S||!O&&F&&v("(min-device-width:768px)"),Ce=O||F&&!oe,je=m.isSafari()&&l.isiOS()&&/safari/i.test(h)===!1,Pt=!Ce&&!oe&&!je;return{isiPad:Q(S),isiPhone:Q(O),isTablet:Q(oe),isPhone:Q(Ce),isTouch:Q(G),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:Q(je),isDesktop:Q(Pt)}},Nm=(l,m)=>{for(let h=0;h<l.length;h++){const v=l[h];if(v.test(m))return v}},Tu=(l,m)=>{const h=Nm(l,m);if(!h)return{major:0,minor:0};const v=S=>Number(m.replace(h,"$"+S));return ve(v(1),v(2))},Ud=(l,m)=>{const h=String(m).toLowerCase();return l.length===0?Di():Tu(l,h)},Di=()=>ve(0,0),ve=(l,m)=>({major:l,minor:m}),Jl={nu:ve,detect:Ud,unknown:Di},Ri=(l,m)=>z(m.brands,h=>{const v=h.brand.toLowerCase();return R(l,S=>{var O;return v===((O=S.brand)===null||O===void 0?void 0:O.toLowerCase())}).map(S=>({current:S.name,version:Jl.nu(parseInt(h.version,10),0)}))}),Bm=(l,m)=>{const h=String(m).toLowerCase();return R(l,v=>v.search(h))},$m=(l,m)=>Bm(l,m).map(h=>{const v=Jl.detect(h.versionRegexes,m);return{current:h.name,version:v}}),Jg=(l,m)=>Bm(l,m).map(h=>{const v=Jl.detect(h.versionRegexes,m);return{current:h.name,version:v}}),Ps=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ya=l=>m=>Po(m,l),Lf=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:l=>Po(l,"edge/")&&Po(l,"chrome")&&Po(l,"safari")&&Po(l,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ps],search:l=>Po(l,"chrome")&&!Po(l,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:l=>Po(l,"msie")||Po(l,"trident")},{name:"Opera",versionRegexes:[Ps,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Ya("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Ya("firefox")},{name:"Safari",versionRegexes:[Ps,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:l=>(Po(l,"safari")||Po(l,"mobile/"))&&Po(l,"applewebkit")}],Zi=[{name:"Windows",search:Ya("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:l=>Po(l,"iphone")||Po(l,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Ya("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Ya("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Ya("linux"),versionRegexes:[]},{name:"Solaris",search:Ya("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Ya("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Ya("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Pm={browsers:Q(Lf),oses:Q(Zi)},Eu="Edge",xc="Chromium",Hf="IE",id="Opera",Qg="Firefox",Hc="Safari",Wd=()=>Fm({current:void 0,version:Jl.unknown()}),Fm=l=>{const m=l.current,h=l.version,v=S=>()=>m===S;return{current:m,version:h,isEdge:v(Eu),isChromium:v(xc),isIE:v(Hf),isOpera:v(id),isFirefox:v(Qg),isSafari:v(Hc)}},ld={unknown:Wd,nu:Fm,edge:Q(Eu),chromium:Q(xc),ie:Q(Hf),opera:Q(id),firefox:Q(Qg),safari:Q(Hc)},va="Windows",Zd="iOS",zf="Android",Im="Linux",_u="macOS",eh="Solaris",Lm="FreeBSD",kc="ChromeOS",th=()=>al({current:void 0,version:Jl.unknown()}),al=l=>{const m=l.current,h=l.version,v=S=>()=>m===S;return{current:m,version:h,isWindows:v(va),isiOS:v(Zd),isAndroid:v(zf),isMacOS:v(_u),isLinux:v(Im),isSolaris:v(eh),isFreeBSD:v(Lm),isChromeOS:v(kc)}},ud={unknown:th,nu:al,windows:Q(va),ios:Q(Zd),android:Q(zf),linux:Q(Im),macos:Q(_u),solaris:Q(eh),freebsd:Q(Lm),chromeos:Q(kc)},ji={detect:(l,m,h)=>{const v=Pm.browsers(),S=Pm.oses(),O=m.bind(oe=>Ri(v,oe)).orThunk(()=>$m(v,l)).fold(ld.unknown,ld.nu),F=Jg(S,l).fold(ud.unknown,ud.nu),G=Xg(F,O,l,h);return{browser:O,os:F,deviceType:G}}},nh=l=>window.matchMedia(l).matches;let oh=Oi(()=>ji.detect(navigator.userAgent,ee.from(navigator.userAgentData),nh));const Vf=()=>oh(),cl=(l,m)=>{const h=(G,oe)=>{if(!cn(oe)&&!oe.match(/^[0-9]+$/))throw new Error(l+".set accepts only positive integer values. Value was "+oe);const Ce=G.dom;Ys(Ce)&&(Ce.style[l]=oe+"px")},v=G=>{const oe=m(G);if(oe<=0||oe===null){const Ce=Aa(G,l);return parseFloat(Ce)||0}return oe},S=v,O=(G,oe)=>kt(oe,(Ce,je)=>{const Pt=Aa(G,je),fn=Pt===void 0?0:parseInt(Pt,10);return isNaN(fn)?Ce:Ce+fn},0);return{set:h,get:v,getOuter:S,aggregate:O,max:(G,oe,Ce)=>{const je=O(G,Ce);return oe>je?oe-je:0}}},E=(l,m)=>so(l).getOr(m),B=(l,m,h)=>E(Aa(l,m),h),j=(l,m,h,v)=>{const S=B(l,`padding-${h}`,0),O=B(l,`padding-${v}`,0),F=B(l,`border-${h}-width`,0),G=B(l,`border-${v}-width`,0);return m-S-O-F-G},ke=(l,m)=>{const h=l.dom,v=h.getBoundingClientRect().width||h.offsetWidth;return m==="border-box"?v:j(l,v,"left","right")},Ve=l=>B(l,"height",l.dom.offsetHeight),bn=l=>B(l,"width",l.dom.offsetWidth),Co=l=>ke(l,"content-box"),ns=cl("width",l=>l.dom.offsetWidth),jo=l=>ns.get(l),no=l=>ns.getOuter(l),os=Co,Dr=bn,Xa=(l,m,h)=>{const v=l.cells,S=v.slice(0,m),O=v.slice(m),F=S.concat(h).concat(O);return D0(l,F)},na=(l,m,h)=>Xa(l,m,[h]),Hm=(l,m,h)=>{const v=l.cells;v[m]=h},D0=(l,m)=>ba(l.element,m,l.section,l.isNew),Fo=(l,m)=>{const h=l.cells,v=Oe(h,m);return ba(l.element,v,l.section,l.isNew)},Vr=(l,m)=>l.cells[m],Fs=(l,m)=>Vr(l,m).element,dc=l=>l.cells.length,Va=l=>{const m=nn(l,h=>h.section==="colgroup");return{rows:m.fail,cols:m.pass}},Uf=(l,m,h)=>{const v=Oe(l.cells,h);return ba(m(l.element),v,l.section,!0)},Wf="data-snooker-locked-cols",sh=l=>Gr(l,Wf).bind(m=>ee.from(m.match(/\d+/g))).map(m=>ae(m,ye)),eu=l=>{const m=kt(Va(l).rows,(v,S)=>(fe(S.cells,(O,F)=>{O.isLocked&&(v[F]=!0)}),v),{}),h=kn(m,(v,S)=>parseInt(S,10));return se(h)},Zf=(l,m)=>l+","+m,R0=(l,m,h)=>ee.from(l.access[Zf(m,h)]),DC=(l,m,h)=>{const v=Xr(l,S=>h(m,S.element));return v.length>0?ee.some(v[0]):ee.none()},Xr=(l,m)=>{const h=Se(l.all,v=>v.cells);return Fe(h,m)},rh=l=>{const m={};let h=0;return fe(l.cells,v=>{const S=v.colspan;Ue(S,O=>{const F=h+O;m[F]=xe(v.element,S,F)}),h+=S}),m},u1=l=>{const m={},h=[],S=H(l).map(Jt=>Jt.element).bind(za).bind(sh).getOr({});let O=0,F=0,G=0;const{pass:oe,fail:Ce}=nn(l,Jt=>Jt.section==="colgroup");fe(Ce,Jt=>{const St=[];fe(Jt.cells,vn=>{let xt=0;for(;m[Zf(G,xt)]!==void 0;)xt++;const Xn=Bt(S,xt.toString()),Eo=Ai(vn.element,vn.rowspan,vn.colspan,G,xt,Xn);for(let Vo=0;Vo<vn.colspan;Vo++)for(let Rr=0;Rr<vn.rowspan;Rr++){const bc=G+Rr,ma=xt+Vo,Fi=Zf(bc,ma);m[Fi]=Eo,F=Math.max(F,ma+1)}St.push(Eo)}),O++,h.push(Cc(Jt.element,St,Jt.section)),G++});const{columns:je,colgroups:Pt}=q(oe).map(Jt=>{const St=rh(Jt);return{colgroups:[He(Jt.element,ao(St))],columns:St}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:ic(O,F),access:m,all:h,columns:je,colgroups:Pt}},Ho={fromTable:l=>{const m=Mm(l);return u1(m)},generate:u1,getAt:R0,findItem:DC,filterItems:Xr,justCells:l=>Se(l.all,m=>m.cells),justColumns:l=>ao(l.columns),hasColumns:l=>Z(l.columns).length>0,getColumnAt:(l,m)=>ee.from(l.columns[m])},mc=(l,m=ye)=>{const h=l.grid,v=Ue(h.columns,ht),S=Ue(h.rows,ht);return Oe(v,O=>tu(()=>Se(S,Ce=>Ho.getAt(l,Ce,O).filter(je=>je.column===O).toArray()),Ce=>Ce.colspan===1&&m(Ce.element),()=>Ho.getAt(l,0,O)))},tu=(l,m,h)=>{const v=l();return R(v,m).orThunk(()=>ee.from(v[0]).orThunk(h)).map(F=>F.element)},Au=l=>{const m=l.grid,h=Ue(m.rows,ht),v=Ue(m.columns,ht);return Oe(h,S=>tu(()=>Se(v,oe=>Ho.getAt(l,S,oe).filter(Ce=>Ce.row===S).fold(Q([]),Ce=>[Ce])),oe=>oe.rowspan===1,()=>Ho.getAt(l,S,0)))},ah=(l,m)=>{if(m<0||m>=l.length-1)return ee.none();const h=l[m].fold(()=>{const S=Ee(l.slice(0,m));return z(S,(O,F)=>O.map(G=>({value:G,delta:F+1})))},S=>ee.some({value:S,delta:0})),v=l[m+1].fold(()=>{const S=l.slice(m+1);return z(S,(O,F)=>O.map(G=>({value:G,delta:F+1})))},S=>ee.some({value:S,delta:1}));return h.bind(S=>v.map(O=>{const F=O.delta+S.delta;return Math.abs(O.value-S.value)/F}))},zm=(l,m)=>h=>m1(h)==="rtl"?m:l,m1=l=>Aa(l,"direction")==="rtl"?"rtl":"ltr",f1=cl("height",l=>{const m=l.dom;return Pr(l)?m.getBoundingClientRect().height:m.offsetHeight}),Vm=l=>f1.get(l),ch=l=>f1.getOuter(l),Um=Ve,Rl=(l,m)=>({left:l,top:m,translate:(v,S)=>Rl(l+v,m+S)}),Ml=Rl,M0=l=>{const m=l.getBoundingClientRect();return Ml(m.left,m.top)},md=(l,m)=>l!==void 0?l:m!==void 0?m:0,Ou=l=>{const m=l.dom.ownerDocument,h=m.body,v=m.defaultView,S=m.documentElement;if(h===l.dom)return Ml(h.offsetLeft,h.offsetTop);const O=md(v==null?void 0:v.pageYOffset,S.scrollTop),F=md(v==null?void 0:v.pageXOffset,S.scrollLeft),G=md(S.clientTop,h.clientTop),oe=md(S.clientLeft,h.clientLeft);return Gf(l).translate(F-oe,O-G)},Gf=l=>{const m=l.dom,v=m.ownerDocument.body;return v===m?Ml(v.offsetLeft,v.offsetTop):Pr(l)?M0(m):Ml(0,0)},fd=(l,m)=>({row:l,y:m}),ih=(l,m)=>({col:l,x:m}),ya=l=>Ou(l).left+no(l),Gi=l=>Ou(l).left,Wm=(l,m)=>ih(l,Gi(m)),$n=(l,m)=>ih(l,ya(m)),Zm=l=>Ou(l).top,il=(l,m)=>fd(l,Zm(m)),lh=(l,m)=>fd(l,Zm(m)+ch(m)),uh=(l,m,h)=>{if(h.length===0)return[];const v=Oe(h.slice(1),(O,F)=>O.map(G=>l(F,G))),S=h[h.length-1].map(O=>m(h.length-1,O));return v.concat([S])},RC=l=>-l,Du={delta:ht,positions:l=>uh(il,lh,l),edge:Zm},lo=zm({delta:ht,edge:Gi,positions:l=>uh(Wm,$n,l)},{delta:RC,edge:ya,positions:l=>uh($n,Wm,l)}),ni={delta:(l,m)=>lo(m).delta(l,m),positions:(l,m)=>lo(m).positions(l,m),edge:l=>lo(l).edge(l)},Zt={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},g1=(()=>{const l="[0-9]+",h="[eE]"+("[+-]?"+l),v="\\.",S=G=>`(?:${G})?`,F=`[+-]?(?:${["Infinity",l+v+S(l)+S(h),v+l+S(h),l+S(h)].join("|")})`;return new RegExp(`^(${F})(.*)$`)})(),h1=(l,m)=>he(m,h=>he(Zt[h],v=>l===v)),ll=(l,m)=>ee.from(g1.exec(l)).bind(v=>{const S=Number(v[1]),O=v[2];return h1(O,m)?ee.some({value:S,unit:O}):ee.none()}),oi=/(\d+(\.\d+)?)%/,jm=/(\d+(\.\d+)?)px|em/,jr=bs("col"),Oa=(l,m,h)=>{const v=_t(l).getOrThunk(()=>Kr(xo(l)));return m(l)/h(v)*100},si=(l,m)=>{Qo(l,"width",m+"px")},lr=(l,m)=>{Qo(l,"width",m+"%")},Ru=(l,m)=>{Qo(l,"height",m+"px")},p1=l=>Um(l)+"px",nu=(l,m,h,v)=>{const S=za(l).map(O=>{const F=h(O);return Math.floor(m/100*F)}).getOr(m);return v(l,S),S},dh=(l,m,h,v)=>{const S=parseFloat(l);return me(l,"%")&&ze(m)!=="table"?nu(m,S,h,v):S},Gm=l=>{const m=p1(l);return m?dh(m,l,Vm,Ru):Vm(l)},ia=(l,m,h)=>{const v=h(l),S=zr(l,m);return v/S},mh=(l,m)=>Wi(l,m).orThunk(()=>Gr(l,m).map(h=>h+"px")),qm=l=>mh(l,"width"),Ms=l=>mh(l,"height"),ou=l=>Oa(l,jo,os),Tc=l=>jr(l)?jo(l):Dr(l),su=l=>ia(l,"rowspan",Gm),pi=l=>qm(l).bind(h=>ll(h,["fixed","relative","empty"])),b1=(l,m,h)=>{Qo(l,"width",m+h)},Qa=l=>jo(l)+"px",Ec=l=>Oa(l,jo,os)+"%",xp=l=>qm(l).exists(m=>oi.test(m)),At=l=>qm(l).exists(m=>jm.test(m)),Mi=l=>qm(l).isNone(),N0=Q(oi),la=bs("col"),qf=l=>qm(l).getOrThunk(()=>Tc(l)+"px"),gd=l=>Ms(l).getOrThunk(()=>su(l)+"px"),wa=l=>Oe(Ho.justColumns(l),m=>ee.from(m.element)),B0=l=>{const m=Vf().browser,h=m.isChromium()||m.isFirefox();return la(l)?h:!0},ul=(l,m,h,v,S,O)=>l.filter(v).fold(()=>O(ah(h,m)),F=>S(F)),ru=(l,m,h,v)=>{const S=mc(l),O=Ho.hasColumns(l)?wa(l):S,F=[ee.some(ni.edge(m))].concat(Oe(ni.positions(S,m),oe=>oe.map(Ce=>Ce.x))),G=Y(Sc);return Oe(O,(oe,Ce)=>ul(oe,Ce,F,G,je=>{if(B0(je))return h(je);{const Pt=tr(S[Ce],ht);return ul(Pt,Ce,F,G,fn=>v(ee.some(jo(fn))),v)}},v))},bi=l=>l.map(m=>m+"px").getOr(""),Ns=(l,m)=>ru(l,m,qf,bi),qi=(l,m,h)=>ru(l,m,ou,v=>v.fold(()=>h.minCellWidth(),S=>S/h.pixelWidth()*100)),jd=(l,m,h)=>ru(l,m,Tc,v=>v.getOrThunk(h.minCellWidth)),ec=(l,m,h,v,S)=>{const O=Au(l),F=[ee.some(h.edge(m))].concat(Oe(h.positions(O,m),G=>G.map(oe=>oe.y)));return Oe(O,(G,oe)=>ul(G,oe,F,Y(Ol),v,S))},Kf=(l,m,h)=>ec(l,m,h,su,v=>v.getOrThunk(Su)),Yf=(l,m,h)=>ec(l,m,h,gd,bi),Xf=(l,m)=>()=>Pr(l)?m(l):parseFloat(Wi(l,"width").getOr("0")),vi=l=>{const m=Xf(l,jo),h=Q(0);return{width:m,pixelWidth:m,getWidths:(S,O)=>jd(S,l,O),getCellDelta:h,singleColumnWidth:Q([0]),minCellWidth:h,setElementWidth:Ze,adjustTableWidth:Ze,isRelative:!0,label:"none"}},kp=l=>{const m=Xf(l,oe=>parseFloat(Ec(oe))),h=Xf(l,jo);return{width:m,pixelWidth:h,getWidths:(oe,Ce)=>qi(oe,l,Ce),getCellDelta:oe=>oe/h()*100,singleColumnWidth:(oe,Ce)=>[100-oe],minCellWidth:()=>Yl()/h()*100,setElementWidth:lr,adjustTableWidth:oe=>{const Ce=m(),je=oe/100*Ce,Pt=Ce+je;lr(l,Pt)},isRelative:!0,label:"percent"}},Ke=l=>{const m=Xf(l,jo);return{width:m,pixelWidth:m,getWidths:(F,G)=>jd(F,l,G),getCellDelta:ht,singleColumnWidth:(F,G)=>[Math.max(Yl(),F+G)-F],minCellWidth:Yl,setElementWidth:si,adjustTableWidth:F=>{const G=m()+F;si(l,G)},isRelative:!1,label:"pixel"}},Da=(l,m)=>N0().exec(m)!==null?kp(l):Ke(l),Sr={getTableSize:l=>qm(l).fold(()=>vi(l),h=>Da(l,h)),pixelSize:Ke,percentageSize:kp,noneSize:vi},dl=(l,m,h,v,S,O)=>({minRow:l,minCol:m,maxRow:h,maxCol:v,allCells:S,selectedCells:O}),Ra=(l,m)=>{const h=l.grid.columns;let S=l.grid.rows,O=h,F=0,G=0;const oe=[],Ce=[];return Pe(l.access,je=>{if(oe.push(je),m(je)){Ce.push(je);const Pt=je.row,fn=Pt+je.rowspan-1,Jt=je.column,St=Jt+je.colspan-1;Pt<S?S=Pt:fn>F&&(F=fn),Jt<O?O=Jt:St>G&&(G=St)}}),dl(S,O,F,G,oe,Ce)},Ma=(l,m,h)=>{const v=l[h].element,S=K.fromTag("td");qo(S,K.fromTag("br")),(m?qo:hr)(v,S)},C=(l,m,h,v)=>{const S=Fe(l,G=>G.section!=="colgroup"),O=m.grid.columns,F=m.grid.rows;for(let G=0;G<F;G++){let oe=!1;for(let Ce=0;Ce<O;Ce++)G<h.minRow||G>h.maxRow||Ce<h.minCol||Ce>h.maxCol||(Ho.getAt(m,G,Ce).filter(v).isNone()?Ma(S,oe,G):oe=!0)}},k=(l,m,h,v)=>{Pe(h.columns,F=>{(F.column<m.minCol||F.column>m.maxCol)&&Br(F.element)});const S=Fe(uc(l,"tr"),F=>F.dom.childElementCount===0);fe(S,Br),(m.minCol===m.maxCol||m.minRow===m.maxRow)&&fe(uc(l,"th,td"),F=>{Hs(F,"rowspan"),Hs(F,"colspan")}),Hs(l,Wf),Hs(l,"data-snooker-col-series"),Sr.getTableSize(l).adjustTableWidth(v)},I=(l,m,h,v)=>{if(v.minCol===0&&m.grid.columns===v.maxCol+1)return 0;const S=jd(m,l,h),O=kt(S,(Ce,je)=>Ce+je,0),oe=kt(S.slice(v.minCol,v.maxCol+1),(Ce,je)=>Ce+je,0)/O*h.pixelWidth()-h.pixelWidth();return h.getCellDelta(oe)},V=(l,m)=>{const h=fn=>ct(fn.element,m),v=_i(l),S=Mm(v),O=Sr.getTableSize(l),F=Ho.generate(S),G=Ra(F,h),oe="th:not("+m+"),td:not("+m+")",Ce=xu(v,"th,td",fn=>ct(fn,oe));fe(Ce,Br),C(S,F,G,h);const je=Ho.fromTable(l),Pt=I(l,je,O,G);return k(v,G,F,Pt),v},_e=" ",jt=((l,m)=>{const h=O=>{if(!l(O))throw new Error("Can only get "+m+" value of a "+m+" node");return v(O).getOr("")},v=O=>l(O)?ee.from(O.dom.nodeValue):ee.none();return{get:h,getOption:v,set:(O,F)=>{if(!l(O))throw new Error("Can only set raw "+m+" value of a "+m+" node");O.dom.nodeValue=F}}})(Ts,"text"),Mn=l=>jt.get(l),Lo=l=>jt.getOption(l),Go=(l,m)=>jt.set(l,m),ur=l=>ze(l)==="img"?1:Lo(l).fold(()=>pn(l).length,m=>m.length),js=l=>Lo(l).filter(m=>m.trim().length!==0||m.indexOf(_e)>-1).isSome(),nr=["img","br"],ri=l=>js(l)||_(nr,ze(l)),ml=l=>Nn(l,ri),Mu=l=>hd(l,ri),hd=(l,m)=>{const h=v=>{const S=pn(v);for(let O=S.length-1;O>=0;O--){const F=S[O];if(m(F))return ee.some(F);const G=h(F);if(G.isSome())return G}return ee.none()};return h(l)},fh={scope:["row","col"]},pd=l=>()=>{const m=K.fromTag("td",l.dom);return qo(m,K.fromTag("br",l.dom)),m},Nu=l=>()=>K.fromTag("col",l.dom),Km=l=>()=>K.fromTag("colgroup",l.dom),Bu=l=>()=>K.fromTag("tr",l.dom),yi=(l,m,h)=>{const v=zi(l,m);return Pe(h,(S,O)=>{S===null?Hs(v,O):ys(v,O,S)}),v},gh=l=>l,Tp=(l,m,h)=>ml(l).map(S=>{const O=h.join(","),F=ko(S,O,G=>In(G,l));return Vt(F,(G,oe)=>{const Ce=Jc(oe);return Hs(Ce,"contenteditable"),qo(G,Ce),Ce},m)}).getOr(m),$0=(l,m)=>{Pe(fh,(h,v)=>Gr(l,v).filter(S=>_(h,S)).each(S=>ys(m,v,S)))},_o=(l,m,h)=>{const v=(F,G)=>{rr(F.element,G),br(G,"height"),F.colspan!==1&&br(G,"width")},S=F=>{const G=K.fromTag(ze(F.element),m.dom),oe=h.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),Ce=oe.length>0?Tp(F.element,G,oe):G;return qo(Ce,K.fromTag("br")),v(F,G),$0(F.element,G),l(F.element,G),G};return{col:F=>{const G=K.fromTag(ze(F.element),m.dom);return v(F,G),l(F.element,G),G},colgroup:Km(m),row:Bu(m),cell:S,replace:yi,colGap:Nu(m),gap:pd(m)}},or=l=>({col:Nu(l),colgroup:Km(l),row:Bu(l),cell:pd(l),replace:gh,colGap:Nu(l),gap:pd(l)}),Ua=(l,m)=>{const v=(m||document).createElement("div");return v.innerHTML=l,pn(K.fromDom(v))},zc=l=>Oe(l,K.fromDom),Nl=l=>K.fromDom(l.getBody()),Vc=l=>m=>In(m,Nl(l)),Ni=l=>{Hs(l,"data-mce-style");const m=h=>Hs(h,"data-mce-style");fe(Dl(l),m),fe(cd(l),m),fe(rl(l),m)},$u=l=>K.fromDom(l.selection.getStart()),Ep=l=>l.getBoundingClientRect().width,Gd=l=>l.getBoundingClientRect().height,Ym=(l,m)=>{const h=l.dom.getStyle(m,"width")||l.dom.getAttrib(m,"width");return ee.from(h).filter(Un)},sT=l=>/^(\d+(\.\d+)?)%$/.test(l),Xm=l=>/^(\d+(\.\d+)?)px$/.test(l),rT=(l,m)=>{const h=m.column,v=m.column+m.colspan-1,S=m.row,O=m.row+m.rowspan-1;return h<=l.finishCol&&v>=l.startCol&&S<=l.finishRow&&O>=l.startRow},Jf=(l,m)=>m.column>=l.startCol&&m.column+m.colspan-1<=l.finishCol&&m.row>=l.startRow&&m.row+m.rowspan-1<=l.finishRow,_p=(l,m)=>{let h=!0;const v=yt(Jf,m);for(let S=m.startRow;S<=m.finishRow;S++)for(let O=m.startCol;O<=m.finishCol;O++)h=h&&Ho.getAt(l,S,O).exists(v);return h?ee.some(m):ee.none()},Ap=(l,m)=>X(Math.min(l.row,m.row),Math.min(l.column,m.column),Math.max(l.row+l.rowspan-1,m.row+m.rowspan-1),Math.max(l.column+l.colspan-1,m.column+m.colspan-1)),Ca=(l,m,h)=>{const v=Ho.findItem(l,m,In),S=Ho.findItem(l,h,In);return v.bind(O=>S.map(F=>Ap(O,F)))},qd=(l,m,h)=>Ca(l,m,h).bind(v=>_p(l,v)),aT=(l,m,h,v)=>Ho.findItem(l,m,In).bind(S=>{const O=h>0?S.row+S.rowspan-1:S.row,F=v>0?S.column+S.colspan-1:S.column;return Ho.getAt(l,O+h,F+v).map(oe=>oe.element)}),y1=(l,m,h)=>Ca(l,m,h).map(v=>{const S=Ho.filterItems(l,yt(rT,v));return Oe(S,O=>O.element)}),oa=(l,m)=>{const h=(v,S)=>is(S,v);return Ho.findItem(l,m,h).map(v=>v.element)},MC=(l,m,h)=>za(l).bind(v=>{const S=au(v);return aT(S,l,m,h)}),Kd=(l,m,h)=>{const v=au(l);return y1(v,m,h)},Op=(l,m,h,v,S)=>{const O=au(l),F=In(l,h)?ee.some(m):oa(O,m),G=In(l,S)?ee.some(v):oa(O,v);return F.bind(oe=>G.bind(Ce=>y1(O,oe,Ce)))},P0=(l,m,h)=>{const v=au(l);return qd(v,m,h)},au=Ho.fromTable;var fl=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Jm=()=>{const l=Ce=>K.fromDom(Ce.dom.cloneNode(!1)),m=Ce=>ir(Ce).dom,h=Ce=>Kn(Ce)?ze(Ce)==="body"?!0:_(fl,ze(Ce)):!1,v=Ce=>Kn(Ce)?_(["br","img","hr","input"],ze(Ce)):!1,S=Ce=>Kn(Ce)&&gr(Ce,"contenteditable")==="false",O=(Ce,je)=>Ce.dom.compareDocumentPosition(je.dom),F=(Ce,je)=>{const Pt=ha(Ce);cs(je,Pt)},G=Ce=>{const je=ze(Ce);return _(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],je)},oe=Ce=>Kn(Ce)?Gr(Ce,"lang"):ee.none();return{up:Q({selector:Mo,closest:pr,predicate:J,all:tn}),down:Q({selector:ar,predicate:ti}),styles:Q({get:Aa,getRaw:Wi,set:Qo,remove:br}),attrs:Q({get:gr,set:ys,remove:Hs,copyTo:F}),insert:Q({before:wo,after:Os,afterAll:Cs,append:qo,appendAll:xs,prepend:hr,wrap:ls}),remove:Q({unwrap:Fc,remove:Br}),create:Q({nu:K.fromTag,clone:l,text:K.fromText}),query:Q({comparePosition:O,prevSibling:un,nextSibling:Pn}),property:Q({children:pn,name:ze,parent:be,document:m,isText:Ts,isComment:qt,isElement:Kn,isSpecial:G,getLanguage:oe,getText:Mn,setText:Go,isBoundary:h,isEmptyTag:v,isNonEditable:S}),eq:In,is:ts}};const hh=(l,m,h,v)=>{const S=h[0],O=h.slice(1);return v(l,m,S,O)},w1=(l,m,h)=>h.length>0?hh(l,m,h,Dp):ee.none(),Dp=(l,m,h,v)=>{const S=m(l,h);return Vt(v,(O,F)=>{const G=m(l,F);return Qf(l,O,G)},S)},Qf=(l,m,h)=>m.bind(v=>h.filter(yt(l.eq,v))),C1=(l,m)=>yt(l.eq,m),NC=(l,m,h,v=$t)=>{const S=[m].concat(l.up().all(m)),O=[h].concat(l.up().all(h)),F=je=>Hn(je,v).fold(()=>je,fn=>je.slice(0,fn+1)),G=F(S),oe=F(O),Ce=R(G,je=>he(oe,C1(l,je)));return{firstpath:G,secondpath:oe,shared:Ce}},cT=w1,S1=NC,Rp=Jm(),bd=(l,m)=>cT(Rp,(h,v)=>l(v),m),ph=(l,m,h)=>S1(Rp,l,m,h),Yd=l=>Mo(l,"table"),x1=(l,m,h)=>{const v=S=>O=>h!==void 0&&h(O)||In(O,S);return In(l,m)?ee.some({boxes:ee.some([l]),start:l,finish:m}):Yd(l).bind(S=>Yd(m).bind(O=>{if(In(S,O))return ee.some({boxes:Kd(S,l,m),start:l,finish:m});if(is(S,O)){const F=ko(m,"td,th",v(S)),G=F.length>0?F[F.length-1]:m;return ee.some({boxes:Op(S,l,S,m,O),start:l,finish:G})}else if(is(O,S)){const F=ko(l,"td,th",v(O)),G=F.length>0?F[F.length-1]:l;return ee.some({boxes:Op(O,l,S,m,O),start:l,finish:G})}else return ph(l,m).shared.bind(F=>pr(F,"table",h).bind(G=>{const oe=ko(m,"td,th",v(G)),Ce=oe.length>0?oe[oe.length-1]:m,je=ko(l,"td,th",v(G)),Pt=je.length>0?je[je.length-1]:l;return ee.some({boxes:Op(G,l,S,m,O),start:Pt,finish:Ce})}))}))},Mp=(l,m)=>{const h=ar(l,m);return h.length>0?ee.some(h):ee.none()},F0=(l,m)=>R(l,h=>ct(h,m)),k1=(l,m,h)=>Hr(l,m).bind(v=>Hr(l,h).bind(S=>bd(Yd,[v,S]).map(O=>({first:v,last:S,table:O})))),BC=(l,m)=>Mo(l,"table").bind(h=>Hr(h,m).bind(v=>x1(v,l).bind(S=>S.boxes.map(O=>({boxes:O,start:S.start,finish:S.finish}))))),I0=(l,m,h,v,S)=>F0(l,S).bind(O=>MC(O,m,h).bind(F=>BC(F,v))),T1=(l,m)=>Mp(l,m),Ws=(l,m,h)=>k1(l,m,h).bind(v=>{const S=oe=>In(l,oe),O="thead,tfoot,tbody,table",F=Mo(v.first,O,S),G=Mo(v.last,O,S);return F.bind(oe=>G.bind(Ce=>In(oe,Ce)?P0(v.table,v.first,v.last):ee.none()))}),vo=ht,Xd=l=>{const m=(v,S)=>Gr(v,S).exists(O=>parseInt(O,10)>1),h=v=>m(v,"rowspan")||m(v,"colspan");return l.length>0&&We(l,h)?ee.some(l):ee.none()},L0=(l,m,h)=>m.length<=1?ee.none():Ws(l,h.firstSelectedSelector,h.lastSelectedSelector).map(v=>({bounds:v,cells:m})),Jd="data-mce-selected",E1="td["+Jd+"],th["+Jd+"]",$C="["+Jd+"]",dr="data-mce-first-selected",PC="td["+dr+"],th["+dr+"]",Qd="data-mce-last-selected",FC="td["+Qd+"],th["+Qd+"]",zt=$C,vd={selected:Jd,selectedSelector:E1,firstSelected:dr,firstSelectedSelector:PC,lastSelected:Qd,lastSelectedSelector:FC},bh=(l,m,h)=>({element:h,mergable:L0(m,l,vd),unmergable:Xd(l),selection:vo(l)}),Np=(l,m,h)=>({element:l,clipboard:m,generators:h}),iT=(l,m,h,v)=>({selection:vo(l),clipboard:h,generators:v}),eg=l=>za(l).bind(m=>T1(m,vd.firstSelectedSelector)).fold(Q(l),m=>m[0]),vh=l=>(m,h)=>{const v=ze(m),S=v==="col"||v==="colgroup"?eg(m):m;return pr(S,l,h)},yh=vh("th,td,caption"),IC=vh("th,td"),tc=l=>zc(l.model.table.getSelectedCells()),Ur=l=>Fe(tc(l),m=>ct(m,vd.selectedSelector)),Bl=l=>za(l[0]).map(m=>{const h=V(m,zt);return Ni(h),[h]}),lT=(l,m)=>Oe(m,h=>l.selection.serializer.serialize(h.dom,{})).join(""),gl=l=>Oe(l,m=>m.dom.innerText).join(""),ai=(l,m)=>{l.on("BeforeGetContent",h=>{const v=S=>{h.preventDefault(),Bl(S).each(O=>{h.content=h.format==="text"?gl(O):lT(l,O)})};if(h.selection===!0){const S=Ur(l);S.length>=1&&v(S)}}),l.on("BeforeSetContent",h=>{if(h.selection===!0&&h.paste===!0){const v=tc(l);H(v).each(S=>{za(S).each(O=>{const F=Fe(Ua(h.content),oe=>ze(oe)!=="meta"),G=bs("table");if(F.length===1&&G(F[0])){h.preventDefault();const oe=K.fromDom(l.getDoc()),Ce=or(oe),je=Np(S,F[0],Ce);m.pasteCells(O,je).each(()=>{l.focus()})}})})}})},em=(l,m)=>({element:l,offset:m}),Qm=(l,m,h)=>l.property().isText(m)&&l.property().getText(m).trim().length===0||l.property().isComment(m)?h(m).bind(v=>Qm(l,v,h).orThunk(()=>ee.some(v))):ee.none(),LC=(l,m)=>l.property().isText(m)?l.property().getText(m).length:l.property().children(m).length,_c=(l,m)=>{const h=Qm(l,m,l.query().prevSibling).getOr(m);if(l.property().isText(h))return em(h,LC(l,h));const v=l.property().children(h);return v.length>0?_c(l,v[v.length-1]):em(h,LC(l,h))},HC=_c,zC=Jm(),ef=l=>HC(zC,l),H0=(l,m)=>{Sc(l)||pi(l).each(v=>{const S=v.value/2;b1(l,S,v.unit),b1(m,S,v.unit)})},Pu=l=>Oe(l,Q(0)),_1=(l,m,h,v,S)=>S(l.slice(0,m)).concat(v).concat(S(l.slice(h))),z0=l=>(m,h,v,S)=>{if(l(v)){const O=Math.max(S,m[h]-Math.abs(v)),F=Math.abs(O-m[h]);return v>=0?F:-F}else return v},Yn=z0(l=>l<0),uT=z0(ye),VC=()=>{const l=(G,oe,Ce,je,Pt)=>{const fn=Yn(G,oe,je,Pt);return _1(G,oe,Ce+1,[fn,0],Pu)},m=(G,oe,Ce,je)=>{const Pt=(100+Ce)/100,fn=Math.max(je,(G[oe]+Ce)/Pt);return Oe(G,(Jt,St)=>(St===oe?fn:Jt/Pt)-Jt)},h=(G,oe,Ce,je,Pt,fn)=>fn?m(G,oe,je,Pt):l(G,oe,Ce,je,Pt);return{resizeTable:(G,oe)=>G(oe),clampTableDelta:Yn,calcLeftEdgeDeltas:h,calcMiddleDeltas:(G,oe,Ce,je,Pt,fn,Jt)=>h(G,Ce,je,Pt,fn,Jt),calcRightEdgeDeltas:(G,oe,Ce,je,Pt,fn)=>{if(fn)return m(G,Ce,je,Pt);{const Jt=Yn(G,Ce,je,Pt);return Pu(G.slice(0,Ce)).concat([Jt])}},calcRedestributedWidths:(G,oe,Ce,je)=>{if(je){const fn=(oe+Ce)/oe,Jt=Oe(G,St=>St/fn);return{delta:fn*100-100,newSizes:Jt}}else return{delta:Ce,newSizes:G}}}},A1=()=>{const l=(F,G,oe,Ce,je)=>{const Pt=Ce>=0?oe:G,fn=uT(F,Pt,Ce,je);return _1(F,G,oe+1,[fn,-fn],Pu)};return{resizeTable:(F,G,oe)=>{oe&&F(G)},clampTableDelta:(F,G,oe,Ce,je)=>{if(je){if(oe>=0)return oe;{const Pt=kt(F,(fn,Jt)=>fn+Jt-Ce,0);return Math.max(-Pt,oe)}}else return Yn(F,G,oe,Ce)},calcLeftEdgeDeltas:l,calcMiddleDeltas:(F,G,oe,Ce,je,Pt)=>l(F,oe,Ce,je,Pt),calcRightEdgeDeltas:(F,G,oe,Ce,je,Pt)=>{if(Pt)return Pu(F);{const fn=Ce/F.length;return Oe(F,Q(fn))}},calcRedestributedWidths:(F,G,oe,Ce)=>({delta:0,newSizes:F})}},wh=l=>Ho.fromTable(l).grid,O1=bs("th"),Ch=l=>We(l,m=>O1(m.element)),tg=(l,m)=>l&&m?"sectionCells":l?"section":"cells",yd=l=>{const m=l.section==="thead",h=Dt(V0(l.cells),"th");return l.section==="tfoot"?{type:"footer"}:m||h?{type:"header",subType:tg(m,h)}:{type:"body"}},V0=l=>{const m=Fe(l,h=>O1(h.element));return m.length===0?ee.some("td"):m.length===l.length?ee.some("th"):ee.none()},tf=l=>{const m=Oe(l,S=>yd(S).type),h=_(m,"header"),v=_(m,"footer");if(!h&&!v)return ee.some("body");{const S=_(m,"body");return h&&!S&&!v?ee.some("header"):!h&&!S&&v?ee.some("footer"):ee.none()}},dT=l=>z(l.all,m=>{const h=yd(m);return h.type==="header"?ee.from(h.subType):ee.none()}),tm=(l,m,h)=>er(h(l.element,m),!0,l.isLocked),ng=(l,m)=>l.section!==m?ba(l.element,l.cells,m,l.isNew):l,D1=()=>({transformRow:ng,transformCell:(l,m,h)=>{const v=h(l.element,m),S=ze(v)!=="td"?Us(v,"td"):v;return er(S,l.isNew,l.isLocked)}}),R1=()=>({transformRow:ng,transformCell:tm}),Bp=()=>({transformRow:(l,m)=>ng(l,m==="thead"?"tbody":m),transformCell:tm}),Fu={getTableSectionType:(l,m)=>{const h=Ho.fromTable(l);switch(dT(h).getOr(m)){case"section":return D1();case"sectionCells":return R1();case"cells":return Bp()}},section:D1,sectionCells:R1,cells:Bp,fallback:()=>({transformRow:ht,transformCell:tm})},Sh=l=>pr(l,"[contenteditable]"),cu=(l,m=!1)=>Pr(l)?l.dom.isContentEditable:Sh(l).fold(Q(m),h=>Bi(h)==="true"),Bi=l=>l.dom.contentEditable,Pp=(l,m,h,v)=>{h===v?Hs(l,m):ys(l,m,h)},yr=(l,m,h)=>{q(us(l,m)).fold(()=>hr(l,h),v=>Os(v,h))},fT=(l,m)=>{const h=Vn(l,m).getOrThunk(()=>{const v=K.fromTag(m,xo(l).dom);return m==="thead"?yr(l,"caption,colgroup",v):m==="colgroup"?yr(l,"caption",v):qo(l,v),v});return Lr(h),h},UC=(l,m)=>{const h=[],v=[],S=Jt=>Oe(Jt,St=>{St.isNew&&h.push(St.element);const vn=St.element;return Lr(vn),fe(St.cells,xt=>{xt.isNew&&v.push(xt.element),Pp(xt.element,"colspan",xt.colspan,1),Pp(xt.element,"rowspan",xt.rowspan,1),qo(vn,xt.element)}),vn}),O=Jt=>Se(Jt,St=>Oe(St.cells,vn=>(Pp(vn.element,"span",vn.colspan,1),vn.element))),F=(Jt,St)=>{const vn=fT(l,St),Xn=(St==="colgroup"?O:S)(Jt);xs(vn,Xn)},G=Jt=>{Vn(l,Jt).each(Br)},oe=(Jt,St)=>{Jt.length>0?F(Jt,St):G(St)},Ce=[],je=[],Pt=[],fn=[];return fe(m,Jt=>{switch(Jt.section){case"thead":Ce.push(Jt);break;case"tbody":je.push(Jt);break;case"tfoot":Pt.push(Jt);break;case"colgroup":fn.push(Jt);break}}),oe(fn,"colgroup"),oe(Ce,"thead"),oe(je,"tbody"),oe(Pt,"tfoot"),{newRows:h,newCells:v}},iu=l=>Oe(l,m=>{const h=Jc(m.element);return fe(m.cells,v=>{const S=_i(v.element);Pp(S,"colspan",v.colspan,1),Pp(S,"rowspan",v.rowspan,1),qo(h,S)}),h}),M1=(l,m)=>Oe(l,h=>Vr(h,m)),WC=(l,m)=>l[m],wd=(l,m)=>{if(l.length===0)return 0;const h=l[0];return Hn(l,S=>!m(h.element,S.element)).getOr(l.length)},fc=(l,m,h,v)=>{const S=WC(l,m),O=S.section==="colgroup",F=wd(S.cells.slice(h),v),G=O?1:wd(M1(l.slice(m),h),v);return{colspan:F,rowspan:G}},gT=(l,m)=>{const h=Oe(l,S=>Oe(S.cells,$t)),v=(S,O,F,G)=>{for(let oe=S;oe<S+F;oe++)for(let Ce=O;Ce<O+G;Ce++)h[oe][Ce]=!0};return Oe(l,(S,O)=>{const F=Se(S.cells,(G,oe)=>{if(h[O][oe]===!1){const Ce=fc(l,O,oe,m);return v(O,oe,Ce.rowspan,Ce.colspan),[aa(G.element,Ce.rowspan,Ce.colspan,G.isNew)]}else return[]});return Vi(S.element,F,S.section,S.isNew)})},Fp=(l,m,h)=>{const v=[];fe(l.colgroups,S=>{const O=[];for(let F=0;F<l.grid.columns;F++){const G=Ho.getColumnAt(l,F).map(oe=>er(oe.element,h,!1)).getOrThunk(()=>er(m.colGap(),!0,!1));O.push(G)}v.push(ba(S.element,O,"colgroup",h))});for(let S=0;S<l.grid.rows;S++){const O=[];for(let oe=0;oe<l.grid.columns;oe++){const Ce=Ho.getAt(l,S,oe).map(je=>er(je.element,h,je.isLocked)).getOrThunk(()=>er(m.gap(),!0,!1));O.push(Ce)}const F=l.all[S],G=ba(F.element,O,F.section,h);v.push(G)}return v},og=(l,m)=>Fp(l,m,!1),xh=l=>gT(l,In),N1=(l,m)=>z(l.all,h=>R(h.cells,v=>In(m,v.element))),ZC=(l,m,h)=>{const v=Oe(m.selection,O=>Lc(O).bind(F=>N1(l,F)).filter(h)),S=ca(v);return Zr(S.length>0,S)},Uc=(l,m,h,v,S)=>(O,F,G,oe)=>{const Ce=Ho.fromTable(O),je=ee.from(oe==null?void 0:oe.section).getOrThunk(Fu.fallback);return m(Ce,F).map(fn=>{const Jt=og(Ce,G),St=l(Jt,fn,In,S(G),je),vn=eu(St.grid),xt=xh(St.grid);return{info:fn,grid:xt,cursor:St.cursor,lockedColumns:vn}}).bind(fn=>{const Jt=UC(O,fn.grid),St=ee.from(oe==null?void 0:oe.sizing).getOrThunk(()=>Sr.getTableSize(O)),vn=ee.from(oe==null?void 0:oe.resize).getOrThunk(A1);return h(O,fn.grid,fn.info,{sizing:St,resize:vn,section:je}),v(O),Hs(O,Wf),fn.lockedColumns.length>0&&ys(O,Wf,fn.lockedColumns.join(",")),ee.some({cursor:fn.cursor,newRows:Jt.newRows,newCells:Jt.newCells})})},tO=(l,m)=>Lc(m.element).bind(h=>N1(l,h).map(v=>({...v,generators:m.generators,clipboard:m.clipboard}))),jC=(l,m)=>ZC(l,m,ye).map(h=>({cells:h,generators:m.generators,clipboard:m.clipboard})),nO=(l,m)=>m.mergable,oO=(l,m)=>m.unmergable,hl=(l,m)=>ZC(l,m,ye),Wc=(l,m)=>ZC(l,m,h=>!h.isLocked),wi=(l,m)=>N1(l,m).exists(h=>!h.isLocked),GC=(l,m)=>We(m,h=>wi(l,h)),hT=(l,m)=>nO(l,m).filter(h=>GC(l,h.cells)),nf=(l,m)=>oO(l,m).filter(h=>GC(l,h)),kh=(l,m,h,v)=>{const S=Va(l).rows;if(S.length===0)return l;for(let O=m.startRow;O<=m.finishRow;O++)for(let F=m.startCol;F<=m.finishCol;F++){const G=S[O],oe=Vr(G,F).isLocked;Hm(G,F,er(v(),!1,oe))}return l},B1=(l,m,h,v)=>{const S=Va(l).rows;let O=!0;for(let F=0;F<S.length;F++)for(let G=0;G<dc(S[0]);G++){const oe=S[F],Ce=Vr(oe,G),je=Ce.element,Pt=h(je,m);Pt&&!O?Hm(oe,G,er(v(),!0,Ce.isLocked)):Pt&&(O=!1)}return l},Ip=(l,m)=>kt(l,(h,v)=>he(h,S=>m(S.element,v.element))?h:h.concat([v]),[]),Iu=(l,m,h,v)=>(m>0&&m<l[0].cells.length&&fe(l,S=>{const O=S.cells[m-1];let F=0;const G=v();for(;S.cells.length>m+F&&h(O.element,S.cells[m+F].element);)Hm(S,m+F,er(G,!0,S.cells[m+F].isLocked)),F++}),l),sg=(l,m,h,v)=>{const S=Va(l).rows;if(m>0&&m<S.length){const O=S[m-1].cells,F=Ip(O,h);fe(F,G=>{let oe=ee.none();for(let Ce=m;Ce<S.length;Ce++)for(let je=0;je<dc(S[0]);je++){const Pt=S[Ce],fn=Vr(Pt,je);h(fn.element,G.element)&&(oe.isNone()&&(oe=ee.some(v())),oe.each(St=>{Hm(Pt,je,er(St,!0,fn.isLocked))}))}})}return l},Th=l=>{const m=O=>O(l),h=Q(l),v=()=>S,S={tag:!0,inner:l,fold:(O,F)=>F(l),isValue:ye,isError:$t,map:O=>Lp.value(O(l)),mapError:v,bind:m,exists:m,forall:m,getOr:h,or:v,getOrThunk:h,orThunk:v,getOrDie:h,each:O=>{O(l)},toOptional:()=>ee.some(l)};return S},Eh=l=>{const m=()=>h,h={tag:!1,inner:l,fold:(v,S)=>v(l),isValue:$t,isError:ye,map:m,mapError:v=>Lp.error(v(l)),bind:m,exists:$t,forall:ye,getOr:ht,or:ht,getOrThunk:Bn,orThunk:Bn,getOrDie:Ot(String(l)),each:Ze,toOptional:ee.none};return h},Lp={value:Th,error:Eh,fromOption:(l,m)=>l.fold(()=>Eh(m),Th)},ua=(l,m,h)=>{if(l.row>=m.length||l.column>dc(m[0]))return Lp.error("invalid start address out of table bounds, row: "+l.row+", column: "+l.column);const v=m.slice(l.row),S=v[0].cells.slice(l.column),O=dc(h[0]),F=h.length;return Lp.value({rowDelta:v.length-F,colDelta:S.length-O})},Ki=(l,m)=>{const h=dc(l[0]),v=dc(m[0]);return{rowDelta:0,colDelta:h-v}},nm=(l,m)=>{const h=l.length,v=m.length;return{rowDelta:h-v,colDelta:0}},pl=(l,m,h,v)=>{const S=m.section==="colgroup"?h.col:h.cell;return Ue(l,O=>er(S(),!0,v(O)))},qC=(l,m,h,v)=>{const S=l[l.length-1];return l.concat(Ue(m,()=>{const O=S.section==="colgroup"?h.colgroup:h.row,F=Uf(S,O,ht),G=pl(F.cells.length,F,h,oe=>Ye(v,oe.toString()));return D0(F,G)}))},pT=(l,m,h,v)=>Oe(l,S=>{const O=pl(m,S,h,$t);return Xa(S,v,O)}),bT=(l,m,h)=>Oe(l,v=>kt(h,(S,O)=>{const F=pl(1,v,m,ye)[0];return na(S,O,F)},v)),bl=(l,m,h)=>{const v=m.colDelta<0?pT:ht,S=m.rowDelta<0?qC:ht,O=eu(l),F=dc(l[0]),G=he(O,je=>je===F-1),oe=v(l,Math.abs(m.colDelta),h,G?F-1:F),Ce=eu(oe);return S(oe,Math.abs(m.rowDelta),h,ae(Ce,ye))},of=(l,m,h,v)=>{const S=Vr(l[m],h),O=yt(v,S.element),F=l[m];return l.length>1&&dc(F)>1&&(h>0&&O(Fs(F,h-1))||h<F.cells.length-1&&O(Fs(F,h+1))||m>0&&O(Fs(l[m-1],h))||m<l.length-1&&O(Fs(l[m+1],h)))},KC=(l,m,h,v,S,O)=>{const F=l.row,G=l.column,oe=h.length,Ce=dc(h[0]),je=F+oe,Pt=G+Ce+O.length,fn=ae(O,ye);for(let Jt=F;Jt<je;Jt++){let St=0;for(let vn=G;vn<Pt;vn++){if(fn[vn]){St++;continue}of(m,Jt,vn,S)&&B1(m,Fs(m[Jt],vn),S,v.cell);const xt=vn-G-St,Xn=Vr(h[Jt-F],xt),Eo=Xn.element,Vo=v.replace(Eo);Hm(m[Jt],vn,er(Vo,!0,Xn.isLocked))}}return m},YC=(l,m,h)=>{const v=dc(m[0]),S=Va(m).cols.length+l.row,O=Ue(v-l.column,G=>G+l.column),F=R(O,G=>We(h,oe=>oe!==G)).getOr(v-1);return{row:S,column:F}},U0=(l,m,h)=>Fe(h,v=>v>=l.column&&v<=dc(m[0])+l.column),W0=(l,m,h,v,S)=>{const O=eu(m),F=YC(l,m,O),G=Va(h).rows,oe=U0(F,G,O);return ua(F,m,G).map(je=>{const Pt={...je,colDelta:je.colDelta-oe.length},fn=bl(m,Pt,v),Jt=eu(fn),St=U0(F,G,Jt);return KC(F,fn,G,v,S,St)})},rg=(l,m,h,v,S)=>{Iu(m,l,S,v.cell);const O=nm(h,m),F=bl(h,O,v),G=nm(m,F),oe=bl(m,G,v);return Oe(oe,(Ce,je)=>Xa(Ce,l,F[je].cells))},Z0=(l,m,h,v,S)=>{sg(m,l,S,v.cell);const O=eu(m),F=Ki(m,h),G={...F,colDelta:F.colDelta-O.length},oe=bl(m,G,v),{cols:Ce,rows:je}=Va(oe),Pt=eu(oe),fn=Ki(h,m),Jt={...fn,colDelta:fn.colDelta+Pt.length},St=bT(h,v,Pt),vn=bl(St,Jt,v);return[...Ce,...je.slice(0,l),...vn,...je.slice(l,je.length)]},XC=(l,m,h,v)=>Uf(l,S=>v(S,h),m),JC=(l,m,h,v,S)=>{const{rows:O,cols:F}=Va(l),G=O.slice(0,m),oe=O.slice(m),Ce=XC(O[h],(je,Pt)=>m>0&&m<O.length&&v(Fs(O[m-1],Pt),Fs(O[m],Pt))?Vr(O[m],Pt):er(S(je.element,v),!0,je.isLocked),v,S);return[...F,...G,Ce,...oe]},QC=(l,m,h,v,S,O,F)=>{if(h==="colgroup"||!v){const G=Vr(l,S);return er(F(G.element,O),!0,!1)}else return Vr(l,m)},sf=(l,m,h,v,S)=>Oe(l,O=>{const F=m>0&&m<dc(O)&&v(Fs(O,m-1),Fs(O,m)),G=QC(O,m,O.section,F,h,v,S);return na(O,m,G)}),_h=(l,m)=>Se(l,h=>{const v=h.cells,S=Vt(m,(O,F)=>F>=0&&F<O.length?O.slice(0,F).concat(O.slice(F+1)):O,v);return S.length>0?[ba(h.element,S,h.section,h.isNew)]:[]}),ag=(l,m,h)=>{const{rows:v,cols:S}=Va(l);return[...S,...v.slice(0,m),...v.slice(h+1)]},e2=(l,m,h,v)=>Fs(l[m],h)!==void 0&&m>0&&v(Fs(l[m-1],h),Fs(l[m],h)),vT=(l,m,h)=>m>0&&h(Fs(l,m-1),Fs(l,m)),j0=(l,m,h,v)=>e2(l,m,h,v)||vT(l[m],h,v),Hp=(l,m)=>We(m,ht)&&Ch(l.cells)?ye:(v,S,O)=>!(ze(v.element)==="th"&&m[O]),zp=(l,m)=>We(m,ht)&&Ch(l)?ye:(v,S,O)=>!(ze(v.element)==="th"&&m[S]),t2=(l,m,h,v)=>{const S=F=>F==="row"?Ol(m):Sc(m),O=F=>S(F)?`${F}group`:F;return l?O1(m)?O(h):null:v&&O1(m)?O(h==="row"?"col":"row"):null},yT=(l,m)=>(h,v,S)=>ee.some(t2(l,h.element,"col",m[S])),n2=(l,m)=>(h,v)=>ee.some(t2(l,h.element,"row",m[v])),Wa=(l,m,h)=>er(h(l.element,m),!0,l.isLocked),$1=(l,m,h,v,S,O,F)=>{const G=oe=>he(m,Ce=>h(oe.element,Ce.element));return Oe(l,(oe,Ce)=>Fo(oe,(je,Pt)=>{if(G(je)){const fn=F(je,Ce,Pt)?S(je,h,v):je;return O(fn,Ce,Pt).each(Jt=>{go(fn.element,{scope:ee.from(Jt)})}),fn}else return je}))},Vp=(l,m,h)=>Se(l,(v,S)=>j0(l,S,m,h)?[]:[Vr(v,m)]),rf=(l,m,h)=>{const v=l[m];return Se(v.cells,(S,O)=>j0(l,m,O,h)?[]:[S])},P1=(l,m,h,v,S)=>{const O=Va(l).rows,F=Se(m,je=>Vp(O,je,v)),G=Oe(O,je=>Ch(je.cells)),oe=zp(F,G),Ce=n2(h,G);return $1(l,F,v,S,Wa,Ce,oe)},Ci=(l,m,h,v,S,O,F)=>{const{cols:G,rows:oe}=Va(l),Ce=oe[m[0]],je=Se(m,xt=>rf(oe,xt,S)),Pt=Oe(Ce.cells,(xt,Xn)=>Ch(Vp(oe,Xn,S))),fn=[...oe];fe(m,xt=>{fn[xt]=F.transformRow(oe[xt],h)});const Jt=[...G,...fn],St=Hp(Ce,Pt),vn=yT(v,Pt);return $1(Jt,je,S,O,F.transformCell,vn,St)},vl=(l,m,h,v)=>{const S=Va(l).rows,O=Oe(m,F=>Vr(S[F.row],F.column));return $1(l,O,h,v,Wa,ee.none,ye)},af={generate:l=>{if(!Et(l))throw new Error("cases must be an array");if(l.length===0)throw new Error("there must be at least one case");const m=[],h={};return fe(l,(v,S)=>{const O=Z(v);if(O.length!==1)throw new Error("one and only one name per case");const F=O[0],G=v[F];if(h[F]!==void 0)throw new Error("duplicate key detected:"+F);if(F==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Et(G))throw new Error("case arguments must be an array");m.push(F),h[F]=(...oe)=>{const Ce=oe.length;if(Ce!==G.length)throw new Error("Wrong number of arguments to case "+F+". Expected "+G.length+" ("+G+"), got "+Ce);return{fold:(...Pt)=>{if(Pt.length!==l.length)throw new Error("Wrong number of arguments to fold. Expected "+l.length+", got "+Pt.length);return Pt[S].apply(null,oe)},match:Pt=>{const fn=Z(Pt);if(m.length!==fn.length)throw new Error("Wrong number of arguments to match. Expected: "+m.join(",")+`
Actual: `+fn.join(","));if(!We(m,St=>_(fn,St)))throw new Error("Not all branches were specified when using match. Specified: "+fn.join(", ")+`
Required: `+m.join(", "));return Pt[F].apply(null,oe)},log:Pt=>{console.log(Pt,{constructors:m,constructor:F,params:oe})}}}}),h}},Ah={...af.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])},s2=(l,m)=>l.length===0?Ah.none():l.length===1?Ah.only(0):m===0?Ah.left(0,1):m===l.length-1?Ah.right(m-1,m):m>0&&m<l.length-1?Ah.middle(m-1,m,m+1):Ah.none(),r2=(l,m,h,v,S)=>{const O=l.slice(0),F=s2(l,m),G=Q(Oe(O,Q(0))),oe=fn=>v.singleColumnWidth(O[fn],h),Ce=(fn,Jt)=>S.calcLeftEdgeDeltas(O,fn,Jt,h,v.minCellWidth(),v.isRelative),je=(fn,Jt,St)=>S.calcMiddleDeltas(O,fn,Jt,St,h,v.minCellWidth(),v.isRelative),Pt=(fn,Jt)=>S.calcRightEdgeDeltas(O,fn,Jt,h,v.minCellWidth(),v.isRelative);return F.fold(G,oe,Ce,je,Pt)},om=(l,m,h)=>{let v=0;for(let S=l;S<m;S++)v+=h[S]!==void 0?h[S]:0;return v},CT=(l,m)=>{const h=Ho.justCells(l);return Oe(h,v=>{const S=om(v.column,v.column+v.colspan,m);return{element:v.element,width:S,colspan:v.colspan}})},da=(l,m)=>{const h=Ho.justColumns(l);return Oe(h,(v,S)=>({element:v.element,width:m[S],colspan:v.colspan}))},$l=(l,m)=>{const h=Ho.justCells(l);return Oe(h,v=>{const S=om(v.row,v.row+v.rowspan,m);return{element:v.element,height:S,rowspan:v.rowspan}})},Oh=(l,m)=>Oe(l.all,(h,v)=>({element:h.element,height:m[v]})),F1=l=>Vt(l,(m,h)=>m+h,0),I1=(l,m)=>Ho.hasColumns(l)?da(l,m):CT(l,m),Up=(l,m,h)=>{const v=I1(l,m);fe(v,S=>{h.setElementWidth(S.element,S.width)})},sm=(l,m,h,v,S)=>{const O=Ho.fromTable(l),F=S.getCellDelta(m),G=S.getWidths(O,S),oe=h===O.grid.columns-1,Ce=v.clampTableDelta(G,h,F,S.minCellWidth(),oe),je=r2(G,h,Ce,S,v),Pt=Oe(je,(fn,Jt)=>fn+G[Jt]);Up(O,Pt,S),v.resizeTable(S.adjustTableWidth,Ce,oe)},L1=(l,m,h,v)=>{const S=Ho.fromTable(l),O=Kf(S,l,v),F=Oe(O,(je,Pt)=>h===Pt?Math.max(m+je,Su()):je),G=$l(S,F),oe=Oh(S,F);fe(oe,je=>{Ru(je.element,je.height)}),fe(G,je=>{Ru(je.element,je.height)});const Ce=F1(F);Ru(l,Ce)},Dh=(l,m,h,v,S)=>{const O=Ho.generate(m),F=v.getWidths(O,v),G=v.pixelWidth(),{newSizes:oe,delta:Ce}=S.calcRedestributedWidths(F,G,h.pixelDelta,v.isRelative);Up(O,oe,v),v.adjustTableWidth(Ce)},G0=(l,m,h,v)=>{const S=Ho.generate(m),O=v.getWidths(S,v);Up(S,O,v)},cg=l=>kt(l,(h,v)=>he(h,O=>O.column===v.column)?h:h.concat([v]),[]).sort((h,v)=>h.column-v.column),rm=bs("col"),cf=bs("colgroup"),a2=l=>ze(l)==="tr"||cf(l),bt=l=>{const m=Rs(l,"colspan",1),h=Rs(l,"rowspan",1);return{element:l,colspan:m,rowspan:h}},Rh=(l,m=bt)=>{const h=G=>rm(G.element)?l.col(G):l.cell(G),v=G=>cf(G.element)?l.colgroup(G):l.row(G),S=G=>{if(a2(G))return v({element:G});{const oe=G,Ce=h(m(oe));return O=ee.some({item:oe,replacement:Ce}),Ce}};let O=ee.none();return{getOrInit:(G,oe)=>O.fold(()=>S(G),Ce=>oe(G,Ce.item)?Ce.replacement:S(G))}},ST=l=>m=>{const h=[],v=(F,G)=>R(h,oe=>G(oe.item,F)),S=F=>{const G=l==="td"?{scope:null}:{},oe=m.replace(F,l,G);return h.push({item:F,sub:oe}),oe};return{replaceOrInit:(F,G)=>{if(a2(F)||rm(F))return F;{const oe=F;return v(oe,G).fold(()=>S(oe),Ce=>G(F,Ce.item)?Ce.sub:S(oe))}}}},q0=l=>Gr(l,"scope").map(m=>m.substr(0,3)),xa={modification:Rh,transform:ST,merging:l=>({unmerge:v=>{const S=q0(v);return S.each(O=>ys(v,"scope",O)),()=>{const O=l.cell({element:v,colspan:1,rowspan:1});return br(O,"width"),br(v,"width"),S.each(F=>ys(O,"scope",F)),O}},merge:v=>{const S=()=>{const O=ca(Oe(v,q0));if(O.length===0)return ee.none();{const F=O[0],G=["row","col"];return he(O,Ce=>Ce!==F&&_(G,Ce))?ee.none():ee.from(F)}};return br(v[0],"width"),S().fold(()=>Hs(v[0],"scope"),O=>ys(v[0],"scope",O+"group")),Q(v[0])}})},c2=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],i2=(l,m)=>{const h=l.property().name(m);return _(["ol","ul"],h)},Wp=(l,m)=>{const h=l.property().name(m);return _(c2,h)},am=(l,m)=>_(["br","img","hr","input"],l.property().name(m)),Mh=Jm(),ds=l=>Wp(Mh,l),Yi=l=>i2(Mh,l),lf=l=>am(Mh,l),K0=l=>{const m=bs("br"),h=oe=>We(oe,Ce=>m(Ce)||Ts(Ce)&&Mn(Ce).trim().length===0),v=oe=>ze(oe)==="li"||J(oe,Yi).isSome(),S=oe=>Pn(oe).map(Ce=>ds(Ce)?!0:lf(Ce)?ze(Ce)!=="img":!1).getOr(!1),O=oe=>Mu(oe).bind(Ce=>{const je=S(Ce);return be(Ce).map(Pt=>je===!0||v(Pt)||m(Ce)||ds(Pt)&&!In(oe,Pt)?[]:[K.fromTag("br")])}).getOr([]),G=(()=>{const oe=Se(l,Ce=>{const je=pn(Ce);return h(je)?[]:je.concat(O(Ce))});return oe.length===0?[K.fromTag("br")]:oe})();Lr(l[0]),xs(l[0],G)},wr=l=>cu(l,!0),Y0=l=>{Dl(l).length===0&&Br(l)},Zp=(l,m)=>({grid:l,cursor:m}),gc=l=>z(l,m=>z(m.cells,h=>{const v=h.element;return Zr(wr(v),v)})),Lu=(l,m,h)=>{var v,S;const O=Va(l).rows;return ee.from((S=(v=O[m])===null||v===void 0?void 0:v.cells[h])===null||S===void 0?void 0:S.element).filter(wr).orThunk(()=>gc(O))},$i=(l,m,h)=>{const v=Lu(l,m,h);return Zp(l,v)},jp=l=>kt(l,(h,v)=>he(h,O=>O.row===v.row)?h:h.concat([v]),[]).sort((h,v)=>h.row-v.row),xT=(l,m,h,v)=>{const S=m[0].row,O=jp(m),F=Vt(O,(G,oe)=>({grid:JC(G.grid,S,oe.row+G.delta,h,v.getOrInit),delta:G.delta+1}),{grid:l,delta:0}).grid;return $i(F,S,m[0].column)},Nh=(l,m,h,v)=>{const S=jp(m),O=S[S.length-1],F=O.row+O.rowspan,G=Vt(S,(oe,Ce)=>JC(oe,F,Ce.row,h,v.getOrInit),l);return $i(G,F,m[0].column)},z1=(l,m,h,v)=>{const S=m.details,O=cg(S),F=O[0].column,G=Vt(O,(oe,Ce)=>({grid:sf(oe.grid,F,Ce.column+oe.delta,h,v.getOrInit),delta:oe.delta+1}),{grid:l,delta:0}).grid;return $i(G,S[0].row,F)},V1=(l,m,h,v)=>{const S=m.details,O=S[S.length-1],F=O.column+O.colspan,G=cg(S),oe=Vt(G,(Ce,je)=>sf(Ce,F,je.column,h,v.getOrInit),l);return $i(oe,S[0].row,F)},U1=(l,m,h,v)=>{const S=cg(m),O=Oe(S,G=>G.column),F=P1(l,O,!0,h,v.replaceOrInit);return $i(F,m[0].row,m[0].column)},l2=(l,m,h,v)=>{const S=vl(l,m,h,v.replaceOrInit);return $i(S,m[0].row,m[0].column)},X0=(l,m,h,v)=>{const S=cg(m),O=Oe(S,G=>G.column),F=P1(l,O,!1,h,v.replaceOrInit);return $i(F,m[0].row,m[0].column)},u2=(l,m,h,v)=>{const S=vl(l,m,h,v.replaceOrInit);return $i(S,m[0].row,m[0].column)},W1=(l,m)=>(h,v,S,O,F)=>{const G=jp(v),oe=Oe(G,je=>je.row),Ce=Ci(h,oe,l,m,S,O.replaceOrInit,F);return $i(Ce,v[0].row,v[0].column)},ig=W1("thead",!0),yl=W1("tbody",!1),kT=W1("tfoot",!1),nc=(l,m,h,v)=>{const S=cg(m.details),O=_h(l,Oe(S,G=>G.column)),F=O.length>0?O[0].cells.length-1:0;return $i(O,S[0].row,Math.min(S[0].column,F))},d2=(l,m,h,v)=>{const S=jp(m),O=ag(l,S[0].row,S[S.length-1].row),F=O.length>0?O.length-1:0;return $i(O,Math.min(m[0].row,F),m[0].column)},cm=(l,m,h,v)=>{const S=m.cells;K0(S);const O=kh(l,m.bounds,h,v.merge(S));return Zp(O,ee.from(S[0]))},TT=(l,m,h,v)=>{const O=Vt(m,(F,G)=>B1(F,G,h,v.unmerge(G)),l);return Zp(O,ee.from(m[0]))},Si=(l,m,h,v)=>{const O=((oe,Ce)=>{const je=Ho.fromTable(oe);return Fp(je,Ce,!0)})(m.clipboard,m.generators),F=hi(m.row,m.column);return W0(F,l,O,m.generators,h).fold(()=>Zp(l,ee.some(m.element)),oe=>$i(oe,m.row,m.column))},Z1=(l,m,h)=>{const v=Vd(l,h.section),S=Ho.generate(v);return Fp(S,m,!0)},lu=(l,m,h,v)=>{const S=Va(l).rows,O=m.cells[0].column,F=S[m.cells[0].row],G=Z1(m.clipboard,m.generators,F),oe=rg(O,l,G,m.generators,h);return $i(oe,m.cells[0].row,m.cells[0].column)},J0=(l,m,h,v)=>{const S=Va(l).rows,O=m.cells[m.cells.length-1].column+m.cells[m.cells.length-1].colspan,F=S[m.cells[0].row],G=Z1(m.clipboard,m.generators,F),oe=rg(O,l,G,m.generators,h);return $i(oe,m.cells[0].row,m.cells[0].column)},m2=(l,m,h,v)=>{const S=Va(l).rows,O=m.cells[0].row,F=S[O],G=Z1(m.clipboard,m.generators,F),oe=Z0(O,l,G,m.generators,h);return $i(oe,m.cells[0].row,m.cells[0].column)},ET=(l,m,h,v)=>{const S=Va(l).rows,O=m.cells[m.cells.length-1].row+m.cells[m.cells.length-1].rowspan,F=S[m.cells[0].row],G=Z1(m.clipboard,m.generators,F),oe=Z0(O,l,G,m.generators,h);return $i(oe,m.cells[0].row,m.cells[0].column)},_T=(l,m)=>{const h=Ho.fromTable(l);return hl(h,m).bind(S=>{const O=S[S.length-1],F=S[0].column,G=O.column+O.colspan,oe=Ae(Oe(h.all,Ce=>Fe(Ce.cells,je=>je.column>=F&&je.column<G)));return V0(oe)}).getOr("")},Ac=(l,m)=>{const h=Ho.fromTable(l);return hl(h,m).bind(V0).getOr("")},Oc=(l,m)=>{const h=Ho.fromTable(l);return hl(h,m).bind(S=>{const O=S[S.length-1],F=S[0].row,G=O.row+O.rowspan,oe=h.all.slice(F,G);return tf(oe)}).getOr("")},ci=(l,m,h,v)=>G0(l,m,h,v.sizing),Zc=(l,m,h,v)=>Dh(l,m,h,v.sizing,v.resize),Xi=(l,m)=>he(m,h=>h.column===0&&h.isLocked),Za=(l,m)=>he(m,h=>h.column+h.colspan>=l.grid.columns&&h.isLocked),j1=(l,m)=>{const h=mc(l),v=cg(m);return kt(v,(S,O)=>{const G=h[O.column].map(no).getOr(0);return S+G},0)},G1=l=>(m,h)=>hl(m,h).filter(v=>!(l?Xi:Za)(m,v)).map(v=>({details:v,pixelDelta:j1(m,v)})),f2=(l,m)=>Wc(l,m).map(h=>({details:h,pixelDelta:-j1(l,h)})),q1=l=>(m,h)=>jC(m,h).filter(v=>!(l?Xi:Za)(m,v.cells)),Wn=xa.transform("th"),lg=xa.transform("td"),K1=Uc(xT,hl,Ze,Ze,xa.modification),Q0=Uc(Nh,hl,Ze,Ze,xa.modification),AT=Uc(z1,G1(!0),Zc,Ze,xa.modification),sO=Uc(V1,G1(!1),Zc,Ze,xa.modification),g2=Uc(nc,f2,Zc,Y0,xa.modification),OT=Uc(d2,hl,Ze,Y0,xa.modification),DT=Uc(U1,Wc,Ze,Ze,Wn),Y1=Uc(X0,Wc,Ze,Ze,lg),RT=Uc(ig,Wc,Ze,Ze,Wn),wl=Uc(yl,Wc,Ze,Ze,lg),Gp=Uc(kT,Wc,Ze,Ze,lg),MT=Uc(l2,Wc,Ze,Ze,Wn),h2=Uc(u2,Wc,Ze,Ze,lg),mn=Uc(cm,hT,ci,Ze,xa.merging),NT=Uc(TT,nf,ci,Ze,xa.merging),hc=Uc(Si,tO,ci,Ze,xa.modification),p2=Uc(lu,q1(!0),Ze,Ze,xa.modification),ey=Uc(J0,q1(!1),Ze,Ze,xa.modification),BT=Uc(m2,jC,Ze,Ze,xa.modification),Pl=Uc(ET,jC,Ze,Ze,xa.modification),rO=_T,$T=Ac,im=Oc,b2=(l,m)=>l.dispatch("NewRow",{node:m}),ty=(l,m)=>l.dispatch("NewCell",{node:m}),Ji=(l,m,h)=>{l.dispatch("TableModified",{...h,table:m})},Fl=(l,m,h,v,S)=>{l.dispatch("TableSelectionChange",{cells:m,start:h,finish:v,otherCells:S})},X1=l=>{l.dispatch("TableSelectionClear")},Hu=(l,m,h,v,S)=>{l.dispatch("ObjectResizeStart",{target:m,width:h,height:v,origin:S})},v2=(l,m,h,v,S)=>{l.dispatch("ObjectResized",{target:m,width:h,height:v,origin:S})},qp={structure:!1,style:!0},ja={structure:!0,style:!1},y2={structure:!0,style:!0},uf=l=>m=>m.options.get(l),J1="100%",w2=l=>{var m;const h=l.dom,v=(m=h.getParent(l.selection.getStart(),h.isBlock))!==null&&m!==void 0?m:l.getBody();return os(K.fromDom(v))+"px"},ny=(l,m)=>Yp(l)||!C2(l)?m:Bh(l)?{...m,width:w2(l)}:{...m,width:J1},PT=(l,m)=>Yp(l)||C2(l)?m:Bh(l)?{...m,width:w2(l)}:{...m,width:J1},FT=l=>{const m=l.options.register;m("table_clone_elements",{processor:"string[]"}),m("table_use_colgroups",{processor:"boolean",default:!0}),m("table_header_type",{processor:h=>{const v=_(["section","cells","sectionCells","auto"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),m("table_sizing_mode",{processor:"string",default:"auto"}),m("table_default_attributes",{processor:"object",default:{border:"1"}}),m("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),m("table_column_resizing",{processor:h=>{const v=_(["preservetable","resizetable"],h);return v?{value:h,valid:v}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),m("table_resize_bars",{processor:"boolean",default:!0}),m("table_style_by_css",{processor:"boolean",default:!0})},oy=l=>ee.from(l.options.get("table_clone_elements")),IT=l=>{const m=l.options.get("object_resizing");return _(m.split(","),"table")},ug=uf("table_header_type"),Kp=uf("table_column_resizing"),Q1=l=>Kp(l)==="preservetable",sy=l=>Kp(l)==="resizetable",dg=uf("table_sizing_mode"),mg=l=>dg(l)==="relative",Bh=l=>dg(l)==="fixed",Yp=l=>dg(l)==="responsive",LT=uf("table_resize_bars"),C2=uf("table_style_by_css"),ry=l=>{const m=l.options,h=m.get("table_default_attributes");return m.isSet("table_default_attributes")?h:PT(l,h)},ay=l=>{const m=l.options,h=m.get("table_default_styles");return m.isSet("table_default_styles")?h:ny(l,h)},HT=uf("table_use_colgroups"),fg=(l,m)=>mg(l)?Sr.percentageSize(m):Bh(l)?Sr.pixelSize(m):Sr.getTableSize(m),Wr=(l,m,h)=>{const v=ui=>ze(Nl(ui))==="table",S=ui=>!v(l)||wh(ui).rows>1,O=ui=>!v(l)||wh(ui).columns>1,F=oy(l),G=sy(l)?Ze:H0,oe=ui=>{switch(ug(l)){case"section":return Fu.section();case"sectionCells":return Fu.sectionCells();case"cells":return Fu.cells();default:return Fu.getTableSectionType(ui,"section")}},Ce=(ui,Ii)=>Ii.cursor.fold(()=>{const Qh=Dl(ui);return H(Qh).filter(Pr).map(Gu=>{h.clearSelectedCells(ui.dom);const $c=l.dom.createRng();return $c.selectNode(Gu.dom),l.selection.setRng($c),ys(Gu,"data-mce-selected","1"),$c})},Qh=>{const Gu=ef(Qh),$c=l.dom.createRng();return $c.setStart(Gu.element.dom,Gu.offset),$c.setEnd(Gu.element.dom,Gu.offset),l.selection.setRng($c),h.clearSelectedCells(ui.dom),ee.some($c)}),je=(ui,Ii,Qh,Gu)=>($c,LE,HE=!1)=>{Ni($c);const ep=K.fromDom(l.getDoc()),nw=_o(Qh,ep,F),zE={sizing:fg(l,$c),resize:sy(l)?VC():A1(),section:oe($c)};return Ii($c)?ui($c,LE,nw,zE).bind(ow=>{m.refresh($c.dom),fe(ow.newRows,Tb=>{b2(l,Tb.dom)}),fe(ow.newCells,Tb=>{ty(l,Tb.dom)});const Pv=Ce($c,ow);return Pr($c)&&(Ni($c),HE||Ji(l,$c.dom,Gu)),Pv.map(Tb=>({rng:Tb,effect:Gu}))}):ee.none()},Pt=je(OT,S,Ze,ja),fn=je(g2,O,Ze,ja),Jt=je(K1,ye,Ze,ja),St=je(Q0,ye,Ze,ja),vn=je(AT,ye,G,ja),xt=je(sO,ye,G,ja),Xn=je(mn,ye,Ze,ja),Eo=je(NT,ye,Ze,ja),Vo=je(p2,ye,Ze,ja),Rr=je(ey,ye,Ze,ja),bc=je(BT,ye,Ze,ja),ma=je(Pl,ye,Ze,ja),Fi=je(hc,ye,Ze,y2),Ef=je(MT,ye,Ze,ja),kb=je(h2,ye,Ze,ja),Bv=je(DT,ye,Ze,ja),$v=je(Y1,ye,Ze,ja),Xs=je(RT,ye,Ze,ja),Nc=je(wl,ye,Ze,ja),Bc=je(Gp,ye,Ze,ja);return{deleteRow:Pt,deleteColumn:fn,insertRowsBefore:Jt,insertRowsAfter:St,insertColumnsBefore:vn,insertColumnsAfter:xt,mergeCells:Xn,unmergeCells:Eo,pasteColsBefore:Vo,pasteColsAfter:Rr,pasteRowsBefore:bc,pasteRowsAfter:ma,pasteCells:Fi,makeCellsHeader:Ef,unmakeCellsHeader:kb,makeColumnsHeader:Bv,unmakeColumnsHeader:$v,makeRowsHeader:Xs,makeRowsBody:Nc,makeRowsFooter:Bc,getTableRowType:im,getTableCellType:$T,getTableColType:rO}},cy=(l,m,h)=>{const v=Rs(l,m,1);h===1||v<=1?Hs(l,m):ys(l,m,Math.min(h,v))},ii=(l,m)=>h=>{const v=h.column+h.colspan-1,S=h.column;return v>=l&&S<m},iy=(l,m,h)=>{if(Ho.hasColumns(l)){const v=Fe(Ho.justColumns(l),ii(m,h)),S=Oe(v,F=>{const G=_i(F.element);return cy(G,"span",h-m),G}),O=K.fromTag("colgroup");return xs(O,S),[O]}else return[]},ly=(l,m,h)=>Oe(l.all,v=>{const S=Fe(v.cells,ii(m,h)),O=Oe(S,G=>{const oe=_i(G.element);return cy(oe,"colspan",h-m),oe}),F=K.fromTag("tr");return xs(F,O),F}),Xp=(l,m)=>{const h=Ho.fromTable(l);return Wc(h,m).map(S=>{const O=S[S.length-1],F=S[0].column,G=O.column+O.colspan,oe=iy(h,F,G),Ce=ly(h,F,G);return[...oe,...Ce]})},ev=(l,m,h)=>{const v=Ho.fromTable(l);return hl(v,m).bind(O=>{const F=Fp(v,h,!1),oe=Va(F).rows.slice(O[0].row,O[O.length-1].row+O[O.length-1].rowspan),Ce=Se(oe,Pt=>{const fn=Fe(Pt.cells,Jt=>!Jt.isLocked);return fn.length>0?[{...Pt,cells:fn}]:[]}),je=xh(Ce);return Zr(je.length>0,je)}).map(O=>iu(O))},Jp=af.generate([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),S2=(l,m,h)=>{const v=h.substring(0,h.length-l.length),S=parseFloat(v);return v===S.toString()?m(S):Jp.invalid(h)},df={...Jp,from:l=>me(l,"%")?S2("%",Jp.percent,l):me(l,"px")?S2("px",Jp.pixels,l):Jp.invalid(l)},zT=(l,m)=>Oe(l,h=>df.from(h).fold(()=>h,S=>S/m*100+"%",S=>S+"%")),VT=(l,m,h)=>{const v=h/m;return Oe(l,S=>df.from(S).fold(()=>S,F=>F*v+"px",F=>F/100*h+"px"))},UT=(l,m)=>{const h=l.fold(()=>Q(""),v=>{const S=v/m;return Q(S+"px")},()=>{const v=100/m;return Q(v+"%")});return Ue(m,h)},WT=(l,m,h)=>l.fold(()=>m,v=>VT(m,h,v),v=>zT(m,h)),x2=(l,m,h)=>{const v=df.from(h),S=We(l,O=>O==="0px")?UT(v,l.length):WT(v,l,m);return tv(S)},uy=(l,m)=>l.length===0?m:Vt(l,(h,v)=>df.from(v).fold(Q(0),ht,ht)+h,0),ZT=(l,m)=>{const h=Math.floor(l);return{value:h+m,remainder:l-h}},jT=(l,m)=>df.from(l).fold(Q(l),h=>h+m+"px",h=>h+m+"%"),tv=l=>{if(l.length===0)return l;const m=Vt(l,(v,S)=>{const O=df.from(S).fold(()=>({value:S,remainder:0}),F=>ZT(F,"px"),F=>({value:F+"%",remainder:0}));return{output:[O.value].concat(v.output),remainder:v.remainder+O.remainder}},{output:[],remainder:0}),h=m.output;return h.slice(0,h.length-1).concat([jT(h[h.length-1],Math.round(m.remainder))])},GT=df.from,k2=(l,m,h)=>{fe(m,v=>{const S=l.slice(v.column,v.colspan+v.column),O=uy(S,Yl());Qo(v.element,"width",O+h)})},qT=(l,m,h)=>{fe(m,(v,S)=>{const O=uy([l[S]],Yl());Qo(v.element,"width",O+h)})},Qp=(l,m,h,v)=>{fe(h,S=>{const O=l.slice(S.row,S.rowspan+S.row),F=uy(O,Su());Qo(S.element,"height",F+v)}),fe(m,(S,O)=>{Qo(S.element,"height",l[O])})},dy=l=>GT(l).fold(Q("px"),Q("px"),Q("%")),T2=(l,m,h)=>{const v=Ho.fromTable(l),S=v.all,O=Ho.justCells(v),F=Ho.justColumns(v);m.each(G=>{const oe=dy(G),Ce=jo(l),je=Ns(v,l),Pt=x2(je,Ce,G);Ho.hasColumns(v)?qT(Pt,F,oe):k2(Pt,O,oe),Qo(l,"width",G)}),h.each(G=>{const oe=dy(G),Ce=Vm(l),je=Yf(v,l,Du),Pt=x2(je,Ce,G);Qp(Pt,S,O,oe),Qo(l,"height",G)})},E2=xp,_2=At,gg=Mi,hg=l=>{Hs(l,"width")},mf=l=>{const m=Ec(l);T2(l,ee.some(m),ee.none()),hg(l)},$h=l=>{const m=Qa(l);T2(l,ee.some(m),ee.none()),hg(l)},A2=l=>{br(l,"width");const m=cd(l),h=m.length>0?m:Dl(l);fe(h,v=>{br(v,"width"),hg(v)}),hg(l)},lm={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},my=()=>K.fromTag("th"),KT=()=>K.fromTag("td"),ff=()=>K.fromTag("col"),nv=(l,m,h,v)=>{const S=K.fromTag("tr");for(let O=0;O<l;O++){const F=v<m||O<h?my():KT();O<h&&ys(F,"scope","row"),v<m&&ys(F,"scope","col"),qo(F,K.fromTag("br")),qo(S,F)}return S},YT=l=>{const m=K.fromTag("colgroup");return Ue(l,()=>qo(m,ff())),m},fy=(l,m,h,v)=>Ue(l,S=>nv(m,h,v,S)),XT=(l,m,h,v,S,O=lm)=>{const F=K.fromTag("table"),G=S!=="cells";Ds(F,O.styles),cs(F,O.attributes),O.colGroups&&qo(F,YT(m));const oe=Math.min(l,h);if(G&&h>0){const Jt=K.fromTag("thead");qo(F,Jt);const vn=fy(h,m,S==="sectionCells"?oe:0,v);xs(Jt,vn)}const Ce=K.fromTag("tbody");qo(F,Ce);const je=G?l-oe:l,fn=fy(je,m,G?0:h,v);return xs(Ce,fn),F},JT=l=>l.dom.innerHTML,gy=l=>{const m=K.fromTag("div"),h=K.fromDom(l.dom.cloneNode(!0));return qo(m,h),JT(m)},O2=(l,m)=>{l.selection.select(m.dom,!0),l.selection.collapse(!0)},D2=(l,m)=>{Hr(m,"td,th").each(yt(O2,l))},hy=(l,m)=>{fe(ar(m,"tr"),h=>{b2(l,h.dom),fe(ar(h,"th,td"),v=>{ty(l,v.dom)})})},R2=l=>xn(l)&&l.indexOf("%")!==-1,M2=(l,m,h,v,S)=>{const O=ay(l),F={styles:O,attributes:ry(l),colGroups:HT(l)};return l.undoManager.ignore(()=>{const G=XT(h,m,S,v,ug(l),F);ys(G,"data-mce-id","__mce");const oe=gy(G);l.insertContent(oe),l.addVisual()}),Hr(Nl(l),'table[data-mce-id="__mce"]').map(G=>(Bh(l)?$h(G):Yp(l)?A2(G):(mg(l)||R2(O.width))&&mf(G),Ni(G),Hs(G,"data-mce-id"),hy(l,G),D2(l,G),G.dom)).getOrNull()},QT=(l,m,h,v={})=>{const S=O=>cn(O)&&O>0;if(S(m)&&S(h)){const O=v.headerRows||0,F=v.headerColumns||0;return M2(l,h,m,F,O)}else return console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table."),null};var ov=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const N2="x-tinymce/dom-table-",sv=N2+"rows",Cd=N2+"columns",py=l=>{const m=ov.FakeClipboardItem(l);ov.write([m])},by=l=>{var m;const h=(m=ov.read())!==null&&m!==void 0?m:[];return z(h,v=>ee.from(v.getType(l)))},B2=l=>{by(l).isSome()&&ov.clear()},$2=l=>{l.fold(cO,m=>py({[sv]:m}))},vy=()=>by(sv),cO=()=>B2(sv),rv=l=>{l.fold(tb,m=>py({[Cd]:m}))},eb=()=>by(Cd),tb=()=>B2(Cd),pg=l=>yh($u(l),Vc(l)),eE=l=>IC($u(l),Vc(l)),yy=(l,m)=>{const h=Vc(l),v=()=>pg(l).each(xt=>{za(xt,h).filter(Y(h)).each(Xn=>{const Eo=K.fromText("");if(Os(Xn,Eo),Br(Xn),l.dom.isEmpty(l.getBody()))l.setContent(""),l.selection.setCursorLocation();else{const Vo=l.dom.createRng();Vo.setStart(Eo.dom,0),Vo.setEnd(Eo.dom,0),l.selection.setRng(Vo),l.nodeChanged()}})}),S=xt=>pg(l).each(Xn=>{Yp(l)||Bh(l)||mg(l)||za(Xn,h).each(Vo=>{xt==="relative"&&!E2(Vo)?mf(Vo):xt==="fixed"&&!_2(Vo)?$h(Vo):xt==="responsive"&&!gg(Vo)&&A2(Vo),Ni(Vo),Ji(l,Vo.dom,ja)})}),O=xt=>za(xt,h),F=xt=>eE(l).bind(Xn=>O(Xn).map(Eo=>xt(Eo,Xn))),G=(xt,Xn)=>{F(Eo=>{l.formatter.toggle("tableclass",{value:Xn},Eo.dom),Ji(l,Eo.dom,qp)})},oe=(xt,Xn)=>{F(Eo=>{const Vo=tc(l),bc=We(Vo,ma=>l.formatter.match("tablecellclass",{value:Xn},ma.dom))?l.formatter.remove:l.formatter.apply;fe(Vo,ma=>bc("tablecellclass",{value:Xn},ma.dom)),Ji(l,Eo.dom,qp)})},Ce=()=>{pg(l).each(xt=>{za(xt,h).each(Xn=>{Vn(Xn,"caption").fold(()=>{const Eo=K.fromTag("caption");qo(Eo,K.fromText("Caption")),Xc(Xn,Eo,0),l.selection.setCursorLocation(Eo.dom,0)},Eo=>{bs("caption")(xt)&&to("td",Xn).each(Vo=>l.selection.setCursorLocation(Vo.dom,0)),Br(Eo)}),Ji(l,Xn.dom,ja)})})},je=xt=>{l.focus()},Pt=(xt,Xn=!1)=>F((Eo,Vo)=>{const Rr=bh(tc(l),Eo,Vo);xt(Eo,Rr,Xn).each(je)}),fn=()=>F((xt,Xn)=>{const Eo=bh(tc(l),xt,Xn),Vo=_o(Ze,K.fromDom(l.getDoc()),ee.none());return ev(xt,Eo,Vo)}),Jt=()=>F((xt,Xn)=>{const Eo=bh(tc(l),xt,Xn);return Xp(xt,Eo)}),St=(xt,Xn)=>Xn().each(Eo=>{const Vo=Oe(Eo,Rr=>_i(Rr));F((Rr,bc)=>{const ma=or(K.fromDom(l.getDoc())),Fi=iT(tc(l),bc,Vo,ma);xt(Rr,Fi).each(je)})}),vn=xt=>(Xn,Eo)=>Re(Eo,"type").each(Vo=>{Pt(xt(Vo),Eo.no_events)});Pe({mceTableSplitCells:()=>Pt(m.unmergeCells),mceTableMergeCells:()=>Pt(m.mergeCells),mceTableInsertRowBefore:()=>Pt(m.insertRowsBefore),mceTableInsertRowAfter:()=>Pt(m.insertRowsAfter),mceTableInsertColBefore:()=>Pt(m.insertColumnsBefore),mceTableInsertColAfter:()=>Pt(m.insertColumnsAfter),mceTableDeleteCol:()=>Pt(m.deleteColumn),mceTableDeleteRow:()=>Pt(m.deleteRow),mceTableCutCol:()=>Jt().each(xt=>{rv(xt),Pt(m.deleteColumn)}),mceTableCutRow:()=>fn().each(xt=>{$2(xt),Pt(m.deleteRow)}),mceTableCopyCol:()=>Jt().each(xt=>rv(xt)),mceTableCopyRow:()=>fn().each(xt=>$2(xt)),mceTablePasteColBefore:()=>St(m.pasteColsBefore,eb),mceTablePasteColAfter:()=>St(m.pasteColsAfter,eb),mceTablePasteRowBefore:()=>St(m.pasteRowsBefore,vy),mceTablePasteRowAfter:()=>St(m.pasteRowsAfter,vy),mceTableDelete:v,mceTableCellToggleClass:oe,mceTableToggleClass:G,mceTableToggleCaption:Ce,mceTableSizingMode:(xt,Xn)=>S(Xn),mceTableCellType:vn(xt=>xt==="th"?m.makeCellsHeader:m.unmakeCellsHeader),mceTableColType:vn(xt=>xt==="th"?m.makeColumnsHeader:m.unmakeColumnsHeader),mceTableRowType:vn(xt=>{switch(xt){case"header":return m.makeRowsHeader;case"footer":return m.makeRowsFooter;default:return m.makeRowsBody}})},(xt,Xn)=>l.addCommand(Xn,xt)),l.addCommand("mceInsertTable",(xt,Xn)=>{QT(l,Xn.rows,Xn.columns,Xn.options)}),l.addCommand("mceTableApplyCellStyle",(xt,Xn)=>{const Eo=bc=>"tablecell"+bc.toLowerCase().replace("-","");if(!Nt(Xn))return;const Vo=tc(l);if(Vo.length===0)return;const Rr=eo(Xn,(bc,ma)=>l.formatter.has(Eo(ma))&&xn(bc));an(Rr)||(Pe(Rr,(bc,ma)=>{const Fi=Eo(ma);fe(Vo,Ef=>{bc===""?l.formatter.remove(Fi,{value:null},Ef.dom,!0):l.formatter.apply(Fi,{value:bc},Ef.dom)})}),O(Vo[0]).each(bc=>Ji(l,bc.dom,qp)))})},tE=(l,m)=>{const h=Vc(l),v=S=>IC($u(l)).bind(O=>za(O,h).map(F=>{const G=bh(tc(l),F,O);return S(F,G)})).getOr("");Pe({mceTableRowType:()=>v(m.getTableRowType),mceTableCellType:()=>v(m.getTableCellType),mceTableColType:()=>v(m.getTableColType)},(S,O)=>l.addQueryValueHandler(O,S))},av=af.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),nb=(l,m,h,v)=>l.fold(m,h,v),P2=l=>l.fold(ht,ht,ht),nE=av.before,oE=av.on,sE=av.after,oc={before:nE,on:oE,after:sE,cata:nb,getStart:P2},um={create:(l,m)=>({selection:l,kill:m})},dm=(l,m)=>{const h=l.document.createRange();return h.selectNode(m.dom),h},rE=(l,m)=>{const h=l.document.createRange();return gf(h,m),h},gf=(l,m)=>l.selectNodeContents(m.dom),zu=(l,m)=>{m.fold(h=>{l.setStartBefore(h.dom)},(h,v)=>{l.setStart(h.dom,v)},h=>{l.setStartAfter(h.dom)})},cv=(l,m)=>{m.fold(h=>{l.setEndBefore(h.dom)},(h,v)=>{l.setEnd(h.dom,v)},h=>{l.setEndAfter(h.dom)})},iv=(l,m,h)=>{const v=l.document.createRange();return zu(v,m),cv(v,h),v},wy=(l,m,h,v,S)=>{const O=l.document.createRange();return O.setStart(m.dom,h),O.setEnd(v.dom,S),O},F2=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom,width:l.width,height:l.height}),mm=l=>{const m=l.getClientRects(),h=m.length>0?m[0]:l.getBoundingClientRect();return h.width>0||h.height>0?ee.some(h).map(F2):ee.none()},Sd=af.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),lv=(l,m,h)=>m(K.fromDom(h.startContainer),h.startOffset,K.fromDom(h.endContainer),h.endOffset),I2=(l,m)=>m.match({domRange:h=>({ltr:Q(h),rtl:ee.none}),relative:(h,v)=>({ltr:Oi(()=>iv(l,h,v)),rtl:Oi(()=>ee.some(iv(l,v,h)))}),exact:(h,v,S,O)=>({ltr:Oi(()=>wy(l,h,v,S,O)),rtl:Oi(()=>ee.some(wy(l,S,O,h,v)))})}),ob=(l,m)=>{const h=m.ltr();return h.collapsed?m.rtl().filter(S=>S.collapsed===!1).map(S=>Sd.rtl(K.fromDom(S.endContainer),S.endOffset,K.fromDom(S.startContainer),S.startOffset)).getOrThunk(()=>lv(l,Sd.ltr,h)):lv(l,Sd.ltr,h)},Fh=(l,m)=>{const h=I2(l,m);return ob(l,h)},jc=(l,m)=>Fh(l,m).match({ltr:(v,S,O,F)=>{const G=l.document.createRange();return G.setStart(v.dom,S),G.setEnd(O.dom,F),G},rtl:(v,S,O,F)=>{const G=l.document.createRange();return G.setStart(O.dom,F),G.setEnd(v.dom,S),G}});Sd.ltr,Sd.rtl;const hf={create:(l,m,h,v)=>({start:l,soffset:m,finish:h,foffset:v})},Cy={create:(l,m,h,v)=>({start:oc.on(l,m),finish:oc.on(h,v)})},Vu=(l,m)=>{const h=jc(l,m);return hf.create(K.fromDom(h.startContainer),h.startOffset,K.fromDom(h.endContainer),h.endOffset)},sb=Cy.create,uv=(l,m,h,v,S,O,F)=>In(h,S)&&v===O?ee.none():pr(h,"td,th",m).bind(G=>pr(S,"td,th",m).bind(oe=>bg(l,m,G,oe,F))),bg=(l,m,h,v,S)=>In(h,v)?ee.none():x1(h,v,m).bind(O=>{const F=O.boxes.getOr([]);return F.length>1?(S(l,F,O.start,O.finish),ee.some(um.create(ee.some(sb(h,0,h,ur(h))),!0))):ee.none()}),aE=(l,m,h,v,S)=>{const O=F=>(S.clearBeforeUpdate(h),S.selectRange(h,F.boxes,F.start,F.finish),F.boxes);return I0(v,l,m,S.firstSelectedSelector,S.lastSelectedSelector).map(O)},Ih=(l,m)=>({item:l,mode:m}),H2=(l,m,h,v=xd)=>l.property().parent(m).map(S=>Ih(S,v)),xd=(l,m,h,v=Lh)=>h.sibling(l,m).map(S=>Ih(S,v)),Lh=(l,m,h,v=Lh)=>{const S=l.property().children(m);return h.first(S).map(F=>Ih(F,v))},z2=[{current:H2,next:xd,fallback:ee.none()},{current:xd,next:Lh,fallback:ee.some(H2)},{current:Lh,next:Lh,fallback:ee.some(xd)}],rb=(l,m,h,v,S=z2)=>R(S,F=>F.current===h).bind(F=>F.current(l,m,v,F.next).orThunk(()=>F.fallback.bind(G=>rb(l,m,G,v)))),ab={left:()=>({sibling:(h,v)=>h.query().prevSibling(v),first:h=>h.length>0?ee.some(h[h.length-1]):ee.none()}),right:()=>({sibling:(h,v)=>h.query().nextSibling(v),first:h=>h.length>0?ee.some(h[0]):ee.none()})},cb=(l,m,h,v,S,O)=>rb(l,m,v,S).bind(G=>O(G.item)?ee.none():h(G.item)?ee.some(G.item):cb(l,G.item,h,G.mode,S,O)),Sy=(l,m,h,v)=>cb(l,m,h,xd,ab.left(),v),xy=(l,m,h,v)=>cb(l,m,h,xd,ab.right(),v),ky=l=>m=>l.property().children(m).length===0,V2=(l,m,h)=>Hh(l,m,ky(l),h),Cl=(l,m,h)=>dv(l,m,ky(l),h),Hh=Sy,dv=xy,kd=Jm(),xi=(l,m)=>V2(kd,l,m),Sl=(l,m)=>Cl(kd,l,m),Pi=(l,m,h)=>Hh(kd,l,m,h),Td=(l,m,h)=>dv(kd,l,m,h),Ty=(l,m,h)=>J(l,m,h).isSome(),xl=af.generate([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),vg=(l,m,h)=>{const v=l.getRect(m),S=l.getRect(h);return S.right>v.left&&S.left<v.right},cE=l=>pr(l,"tr"),yg={...xl,verify:(l,m,h,v,S,O,F)=>pr(v,"td,th",F).bind(G=>pr(m,"td,th",F).map(oe=>In(G,oe)?In(v,G)&&ur(G)===S?O(oe):xl.none("in same cell"):bd(cE,[G,oe]).fold(()=>vg(l,oe,G)?xl.success():O(oe),Ce=>O(oe)))).getOr(xl.none("default")),cata:(l,m,h,v,S)=>l.fold(m,h,v,S)},Ey=(l,m,h,v)=>({parent:l,children:m,element:h,index:v}),ib=l=>be(l).bind(m=>{const h=pn(m);return iE(h,l).map(v=>Ey(m,h,l,v))}),iE=(l,m)=>Hn(l,yt(In,m)),U2=bs("br"),_y=(l,m,h)=>m(l,h).bind(v=>Ts(v)&&Mn(v).trim().length===0?_y(v,m,h):ee.some(v)),dO=(l,m,h)=>h.traverse(m).orThunk(()=>_y(m,h.gather,l)).map(h.relative),lE=(l,m)=>zn(l,m).filter(U2).orThunk(()=>zn(l,m-1).filter(U2)),li=(l,m,h,v)=>lE(m,h).bind(S=>v.traverse(S).fold(()=>_y(S,v.gather,l).map(v.relative),O=>ib(O).map(F=>oc.on(F.parent,F.index)))),mv=(l,m,h,v)=>(U2(m)?dO(l,m,v):li(l,m,h,v)).map(O=>({start:O,finish:O})),wg=l=>yg.cata(l,m=>ee.none(),()=>ee.none(),m=>ee.some(em(m,0)),m=>ee.some(em(m,ur(m)))),gm=(l,m)=>({left:l.left,top:l.top+m,right:l.right,bottom:l.bottom+m}),lb=(l,m)=>({left:l.left,top:l.top-m,right:l.right,bottom:l.bottom-m}),fv=(l,m,h)=>({left:l.left+m,top:l.top+h,right:l.right+m,bottom:l.bottom+h}),W2=l=>l.top,uE=l=>l.bottom,dE=(l,m,h)=>h>=0&&h<ur(m)?l.getRangedRect(m,h,m,h+1):h>0?l.getRangedRect(m,h-1,m,h):ee.none(),gv=l=>({left:l.left,top:l.top,right:l.right,bottom:l.bottom}),Rc=(l,m)=>ee.some(l.getRect(m)),Z2=(l,m,h)=>Kn(m)?Rc(l,m).map(gv):Ts(m)?dE(l,m,h).map(gv):ee.none(),zh=(l,m)=>Kn(m)?Rc(l,m).map(gv):Ts(m)?l.getRangedRect(m,0,m,ur(m)).map(gv):ee.none(),Mc=5,hv=100,uu=af.generate([{none:[]},{retry:["caret"]}]),Ay=(l,m)=>l.left<m.left||Math.abs(m.right-l.left)<1||l.left>m.right,Oy=(l,m,h)=>de(m,ds).fold($t,v=>zh(l,v).exists(S=>Ay(h,S))),mE=(l,m,h,v,S)=>{const O=gm(S,Mc);return Math.abs(h.bottom-v.bottom)<1||h.top>S.bottom?uu.retry(O):h.top===S.bottom?uu.retry(gm(S,1)):Oy(l,m,S)?uu.retry(fv(O,Mc,0)):uu.none()},Dy={point:W2,adjuster:(l,m,h,v,S)=>{const O=lb(S,Mc);return Math.abs(h.top-v.top)<1||h.bottom<S.top?uu.retry(O):h.bottom===S.top?uu.retry(lb(S,1)):Oy(l,m,S)?uu.retry(fv(O,Mc,0)):uu.none()},move:lb,gather:xi},j2={point:uE,adjuster:mE,move:gm,gather:Sl},gE=(l,m,h)=>l.elementFromPoint(m,h).filter(v=>ze(v)==="table").isSome(),ub=(l,m,h,v,S)=>Vh(l,m,h,m.move(v,Mc),S),Vh=(l,m,h,v,S)=>S===0?ee.some(v):gE(l,v.left,m.point(v))?ub(l,m,h,v,S-1):l.situsFromPoint(v.left,m.point(v)).bind(O=>O.start.fold(ee.none,F=>zh(l,F).bind(G=>m.adjuster(l,F,G,h,v).fold(ee.none,oe=>Vh(l,m,h,oe,S-1))).orThunk(()=>ee.some(v)),ee.none)),hE=(l,m,h)=>l.point(m)>h.getInnerHeight()?ee.some(l.point(m)-h.getInnerHeight()):l.point(m)<0?ee.some(-l.point(m)):ee.none(),G2=(l,m,h)=>{const v=l.move(h,Mc),S=Vh(m,l,h,v,hv).getOr(v);return hE(l,S,m).fold(()=>m.situsFromPoint(S.left,l.point(S)),O=>(m.scrollBy(0,O),m.situsFromPoint(S.left,l.point(S)-O)))},Ry={tryUp:yt(G2,Dy),tryDown:yt(G2,j2),getJumpSize:Q(Mc)},pE=20,My=(l,m,h)=>l.getSelection().bind(v=>mv(m,v.finish,v.foffset,h).fold(()=>ee.some(em(v.finish,v.foffset)),S=>{const O=l.fromSitus(S),F=yg.verify(l,v.finish,v.foffset,O.finish,O.foffset,h.failure,m);return wg(F)})),pf=(l,m,h,v,S,O)=>O===0?ee.none():mO(l,m,h,v,S).bind(F=>{const G=l.fromSitus(F),oe=yg.verify(l,h,v,G.finish,G.foffset,S.failure,m);return yg.cata(oe,()=>ee.none(),()=>ee.some(F),Ce=>In(h,Ce)&&v===0?Cg(l,h,v,lb,S):pf(l,m,Ce,0,S,O-1),Ce=>In(h,Ce)&&v===ur(Ce)?Cg(l,h,v,gm,S):pf(l,m,Ce,ur(Ce),S,O-1))}),Cg=(l,m,h,v,S)=>Z2(l,m,h).bind(O=>q2(l,S,v(O,Ry.getJumpSize()))),q2=(l,m,h)=>{const v=Vf().browser;return v.isChromium()||v.isSafari()||v.isFirefox()?m.retry(l,h):ee.none()},mO=(l,m,h,v,S)=>Z2(l,h,v).bind(O=>q2(l,S,O)),K2=(l,m,h)=>My(l,m,h).bind(v=>pf(l,m,v.element,v.offset,h,pE).map(l.fromSitus)),Ny=(l,m)=>Ty(l,h=>be(h).exists(v=>In(v,m))),By=(l,m,h,v,S)=>pr(v,"td,th",m).bind(O=>pr(O,"table",m).bind(F=>Ny(S,F)?K2(l,m,h).bind(G=>pr(G.finish,"td,th",m).map(oe=>({start:O,finish:oe,range:G}))):ee.none())),pv=(l,m,h,v,S,O)=>O(v,m).orThunk(()=>By(l,m,h,v,S).map(F=>{const G=F.range;return um.create(ee.some(sb(G.start,G.soffset,G.finish,G.foffset)),!0)})),ms=(l,m)=>pr(l,"tr",m).bind(h=>pr(h,"table",m).bind(v=>{const S=ar(v,"tr");return In(h,S[0])?Pi(v,O=>Mu(O).isSome(),m).map(O=>{const F=ur(O);return um.create(ee.some(sb(O,F,O,F)),!0)}):ee.none()})),Ed=(l,m)=>pr(l,"tr",m).bind(h=>pr(h,"table",m).bind(v=>{const S=ar(v,"tr");return In(h,S[S.length-1])?Td(v,O=>ml(O).isSome(),m).map(O=>um.create(ee.some(sb(O,0,O,0)),!0)):ee.none()})),bf=(l,m,h,v,S,O,F)=>By(l,h,v,S,O).bind(G=>bg(m,h,G.start,G.finish,F)),vf=l=>{let m=l;return{get:()=>m,set:S=>{m=S}}},$y=l=>{const m=vf(ee.none()),h=()=>m.get().each(l);return{clear:()=>{h(),m.set(ee.none())},isSet:()=>m.get().isSome(),get:()=>m.get(),set:G=>{h(),m.set(ee.some(G))}}},Uh=()=>{const l=$y(Ze);return{...l,on:h=>l.get().each(h)}},yf=(l,m)=>pr(l,"td,th",m),bv=(l,m,h,v)=>{const S=Uh(),O=S.clear,F=je=>{S.on(Pt=>{v.clearBeforeUpdate(m),yf(je.target,h).each(fn=>{x1(Pt,fn,h).each(Jt=>{const St=Jt.boxes.getOr([]);if(St.length===1){const vn=St[0],xt=Bi(vn)==="false",Xn=Dt(Sh(je.target),vn,In);xt&&Xn&&(v.selectRange(m,St,vn,vn),l.selectContents(vn))}else St.length>1&&(v.selectRange(m,St,Jt.start,Jt.finish),l.selectContents(fn))})})})};return{clearstate:O,mousedown:je=>{v.clear(m),yf(je.target,h).each(S.set)},mouseover:je=>{F(je)},mouseup:je=>{F(je),O()}}},vv={traverse:Pn,gather:Sl,relative:oc.before,retry:Ry.tryDown,failure:yg.failedDown},yv={traverse:un,gather:xi,relative:oc.before,retry:Ry.tryUp,failure:yg.failedUp},Sg=l=>m=>m===l,xg=Sg(38),db=Sg(40),wv=l=>l>=37&&l<=40,fO={isBackward:Sg(37),isForward:Sg(39)},Y2={isBackward:Sg(39),isForward:Sg(37)},hm=l=>{const m=l!==void 0?l.dom:document,h=m.body.scrollLeft||m.documentElement.scrollLeft,v=m.body.scrollTop||m.documentElement.scrollTop;return Ml(h,v)},Py=(l,m,h)=>{const S=(h!==void 0?h.dom:document).defaultView;S&&S.scrollBy(l,m)},kg=af.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Fy=l=>kg.exact(l.start,l.soffset,l.finish,l.foffset),X2=l=>l.match({domRange:m=>K.fromDom(m.startContainer),relative:(m,h)=>oc.getStart(m),exact:(m,h,v,S)=>m}),mb=kg.domRange,Iy=kg.relative,bE=kg.exact,vE=l=>{const m=X2(l);return ge(m)},_d=hf.create,Wh={domRange:mb,relative:Iy,exact:bE,exactFromRange:Fy,getWin:vE,range:_d},yE=(l,m,h)=>{var v,S;return ee.from((S=(v=l.dom).caretPositionFromPoint)===null||S===void 0?void 0:S.call(v,m,h)).bind(O=>{if(O.offsetNode===null)return ee.none();const F=l.dom.createRange();return F.setStart(O.offsetNode,O.offset),F.collapse(),ee.some(F)})},Il=(l,m,h)=>{var v,S;return ee.from((S=(v=l.dom).caretRangeFromPoint)===null||S===void 0?void 0:S.call(v,m,h))},sc=(()=>document.caretPositionFromPoint?yE:document.caretRangeFromPoint?Il:ee.none)(),wE=(l,m,h)=>{const v=K.fromDom(l.document);return sc(v,m,h).map(S=>hf.create(K.fromDom(S.startContainer),S.startOffset,K.fromDom(S.endContainer),S.endOffset))},Zh=(l,m)=>{const h=ze(l);return h==="input"?oc.after(l):_(["br","img"],h)?m===0?oc.before(l):oc.after(l):oc.on(l,m)},jh=(l,m)=>{const h=l.fold(oc.before,Zh,oc.after),v=m.fold(oc.before,Zh,oc.after);return Wh.relative(h,v)},J2=(l,m,h,v)=>{const S=Zh(l,m),O=Zh(h,v);return Wh.relative(S,O)},Q2=(l,m,h,v)=>{const O=xo(l).dom.createRange();return O.setStart(l.dom,m),O.setEnd(h.dom,v),O},CE=(l,m,h,v)=>{const S=Q2(l,m,h,v),O=In(l,h)&&m===v;return S.collapsed&&!O},En=l=>ee.from(l.getSelection()),Na=(l,m)=>{En(l).each(h=>{h.removeAllRanges(),h.addRange(m)})},Tg=(l,m,h,v,S)=>{const O=wy(l,m,h,v,S);Na(l,O)},pc=(l,m,h,v,S,O)=>{m.collapse(h.dom,v),m.extend(S.dom,O)},Ll=(l,m)=>Fh(l,m).match({ltr:(h,v,S,O)=>{Tg(l,h,v,S,O)},rtl:(h,v,S,O)=>{En(l).each(F=>{if(F.setBaseAndExtent)F.setBaseAndExtent(h.dom,v,S.dom,O);else if(F.extend)try{pc(l,F,h,v,S,O)}catch{Tg(l,S,O,h,v)}else Tg(l,S,O,h,v)})}}),Cv=(l,m,h,v,S)=>{const O=J2(m,h,v,S);Ll(l,O)},Gh=(l,m,h)=>{const v=jh(m,h);Ll(l,v)},fb=l=>{if(l.rangeCount>0){const m=l.getRangeAt(0),h=l.getRangeAt(l.rangeCount-1);return ee.some(hf.create(K.fromDom(m.startContainer),m.startOffset,K.fromDom(h.endContainer),h.endOffset))}else return ee.none()},eS=l=>{if(l.anchorNode===null||l.focusNode===null)return fb(l);{const m=K.fromDom(l.anchorNode),h=K.fromDom(l.focusNode);return CE(m,l.anchorOffset,h,l.focusOffset)?ee.some(hf.create(m,l.anchorOffset,h,l.focusOffset)):fb(l)}},gb=(l,m,h=!0)=>{const S=(h?rE:dm)(l,m);Na(l,S)},Ly=l=>En(l).filter(m=>m.rangeCount>0).bind(eS),wf=l=>Ly(l).map(m=>Wh.exact(m.start,m.soffset,m.finish,m.foffset)),hb=(l,m)=>{const h=jc(l,m);return mm(h)},SE=(l,m,h)=>wE(l,m,h),tS=l=>{En(l).each(m=>m.removeAllRanges())},Hy=l=>({elementFromPoint:(xt,Xn)=>K.fromPoint(K.fromDom(l.document),xt,Xn),getRect:xt=>xt.dom.getBoundingClientRect(),getRangedRect:(xt,Xn,Eo,Vo)=>{const Rr=Wh.exact(xt,Xn,Eo,Vo);return hb(l,Rr)},getSelection:()=>wf(l).map(xt=>Vu(l,xt)),fromSitus:xt=>{const Xn=Wh.relative(xt.start,xt.finish);return Vu(l,Xn)},situsFromPoint:(xt,Xn)=>SE(l,xt,Xn).map(Eo=>Cy.create(Eo.start,Eo.soffset,Eo.finish,Eo.foffset)),clearSelection:()=>{tS(l)},collapseSelection:(xt=!1)=>{wf(l).each(Xn=>Xn.fold(Eo=>Eo.collapse(xt),(Eo,Vo)=>{const Rr=xt?Eo:Vo;Gh(l,Rr,Rr)},(Eo,Vo,Rr,bc)=>{const ma=xt?Eo:Rr,Fi=xt?Vo:bc;Cv(l,ma,Fi,ma,Fi)}))},setSelection:xt=>{Cv(l,xt.start,xt.soffset,xt.finish,xt.foffset)},setRelativeSelection:(xt,Xn)=>{Gh(l,xt,Xn)},selectNode:xt=>{gb(l,xt,!1)},selectContents:xt=>{gb(l,xt)},getInnerHeight:()=>l.innerHeight,getScrollY:()=>hm(K.fromDom(l.document)).top,scrollBy:(xt,Xn)=>{Py(xt,Xn,K.fromDom(l.document))}}),Eg=(l,m)=>({rows:l,cols:m}),pb=(l,m,h,v)=>{const S=Hy(l),O=bv(S,m,h,v);return{clearstate:O.clearstate,mousedown:O.mousedown,mouseover:O.mouseover,mouseup:O.mouseup}},Sv=(l,m,h,v)=>{const S=Hy(l),O=()=>(v.clear(m),ee.none());return{keydown:(oe,Ce,je,Pt,fn,Jt)=>{const St=oe.raw,vn=St.which,xt=St.shiftKey===!0;return Mp(m,v.selectedSelector).fold(()=>(wv(vn)&&!xt&&v.clearBeforeUpdate(m),db(vn)&&xt?yt(bf,S,m,h,vv,Pt,Ce,v.selectRange):xg(vn)&&xt?yt(bf,S,m,h,yv,Pt,Ce,v.selectRange):db(vn)?yt(pv,S,h,vv,Pt,Ce,Ed):xg(vn)?yt(pv,S,h,yv,Pt,Ce,ms):ee.none),Eo=>{const Vo=Rr=>()=>z(Rr,ma=>aE(ma.rows,ma.cols,m,Eo,v)).fold(()=>k1(m,v.firstSelectedSelector,v.lastSelectedSelector).map(ma=>{const Fi=db(vn)||Jt.isForward(vn)?oc.after:oc.before;return S.setRelativeSelection(oc.on(ma.first,0),Fi(ma.table)),v.clear(m),um.create(ee.none(),!0)}),ma=>ee.some(um.create(ee.none(),!0)));return db(vn)&&xt?Vo([Eg(1,0)]):xg(vn)&&xt?Vo([Eg(-1,0)]):Jt.isBackward(vn)&&xt?Vo([Eg(0,-1),Eg(-1,0)]):Jt.isForward(vn)&&xt?Vo([Eg(0,1),Eg(1,0)]):wv(vn)&&!xt?O:ee.none})()},keyup:(oe,Ce,je,Pt,fn)=>Mp(m,v.selectedSelector).fold(()=>{const Jt=oe.raw,St=Jt.which;return Jt.shiftKey===!0&&wv(St)?uv(m,h,Ce,je,Pt,fn,v.selectRange):ee.none()},ee.none)}},xv=(l,m,h,v)=>{const S=Hy(l);return(O,F)=>{v.clearBeforeUpdate(m),x1(O,F,h).each(G=>{const oe=G.boxes.getOr([]);v.selectRange(m,oe,G.start,G.finish),S.selectContents(F),S.collapseSelection()})}},qh=(l,m)=>{const h=gr(l,m);return h===void 0||h===""?[]:h.split(" ")},zy=(l,m,h)=>{const S=qh(l,m).concat([h]);return ys(l,m,S.join(" ")),!0},nS=(l,m,h)=>{const v=Fe(qh(l,m),S=>S!==h);return v.length>0?ys(l,m,v.join(" ")):Hs(l,m),!1},Uu=l=>l.dom.classList!==void 0,bb=l=>qh(l,"class"),xE=(l,m)=>zy(l,"class",m),kE=(l,m)=>nS(l,"class",m),pm=(l,m)=>{Uu(l)?l.dom.classList.add(m):xE(l,m)},TE=l=>{(Uu(l)?l.dom.classList:bb(l)).length===0&&Hs(l,"class")},oS=(l,m)=>{Uu(l)?l.dom.classList.remove(m):kE(l,m),TE(l)},kv=(l,m)=>Uu(l)&&l.dom.classList.contains(m),EE=(l,m)=>{fe(m,h=>{oS(l,h)})},Tv=l=>m=>{pm(m,l)},Gc=l=>m=>{EE(m,l)},vb={byClass:l=>{const m=Tv(l.selected),h=Gc([l.selected,l.lastSelected,l.firstSelected]),v=O=>{const F=ar(O,l.selectedSelector);fe(F,h)};return{clearBeforeUpdate:v,clear:v,selectRange:(O,F,G,oe)=>{v(O),fe(F,m),pm(G,l.firstSelected),pm(oe,l.lastSelected)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}},byAttr:(l,m,h)=>{const v=oe=>{Hs(oe,l.selected),Hs(oe,l.firstSelected),Hs(oe,l.lastSelected)},S=oe=>{ys(oe,l.selected,"1")},O=oe=>{F(oe),h()},F=oe=>{const Ce=ar(oe,`${l.selectedSelector},${l.firstSelectedSelector},${l.lastSelectedSelector}`);fe(Ce,v)};return{clearBeforeUpdate:F,clear:O,selectRange:(oe,Ce,je,Pt)=>{O(oe),fe(Ce,S),ys(je,l.firstSelected,"1"),ys(Pt,l.lastSelected,"1"),m(Ce,je,Pt)},selectedSelector:l.selectedSelector,firstSelectedSelector:l.firstSelectedSelector,lastSelectedSelector:l.lastSelectedSelector}}},Ev=(l,m,h,v)=>{switch(l.tag){case"none":return m();case"single":return v(l.element);case"multiple":return h(l.elements)}},sS=()=>({tag:"none"}),Vy=l=>({tag:"multiple",elements:l}),rS=l=>({tag:"single",element:l}),Uy=(l,m,h)=>({get:()=>T1(l(),h).fold(()=>m().fold(sS,rS),Vy)}),aS=(l,m)=>{const h=l.slice(0,m[m.length-1].row+1),v=xh(h);return Se(v,S=>{const O=S.cells.slice(0,m[m.length-1].column+1);return Oe(O,F=>F.element)})},Wy=(l,m)=>{const h=l.slice(m[0].row+m[0].rowspan-1,l.length),v=xh(h);return Se(v,S=>{const O=S.cells.slice(m[0].column+m[0].colspan-1,S.cells.length);return Oe(O,F=>F.element)})},cS=(l,m,h)=>{const v=Ho.fromTable(l);return hl(v,m).map(O=>{const F=Fp(v,h,!1),{rows:G}=Va(F),oe=aS(G,O),Ce=Wy(G,O);return{upOrLeftCells:oe,downOrRightCells:Ce}})},iS=(l,m,h,v,S,O,F)=>({target:l,x:m,y:h,stop:v,prevent:S,kill:O,raw:F}),_v=l=>{const m=K.fromDom($r(l).getOr(l.target)),h=()=>l.stopPropagation(),v=()=>l.preventDefault(),S=st(v,h);return iS(m,l.clientX,l.clientY,h,v,S,l)},Zy=(l,m)=>h=>{l(h)&&m(_v(h))},cr=(l,m,h,v,S)=>{const O=Zy(h,v);return l.dom.addEventListener(m,O,S),{unbind:yt(Cf,l,m,O,S)}},Zn=(l,m,h,v)=>cr(l,m,h,v,!1),Cf=(l,m,h,v)=>{l.dom.removeEventListener(m,h,v)},lS=ye,Sf=(l,m,h)=>Zn(l,m,lS,h),Ad=_v,Kh=l=>!kv(K.fromDom(l.target),"ephox-snooker-resizer-bar"),jy=(l,m)=>{const h=Uy(()=>K.fromDom(l.getBody()),()=>IC($u(l),Vc(l)),vd.selectedSelector),v=(oe,Ce,je)=>{za(Ce).each(fn=>{const Jt=oy(l),St=_o(Ze,K.fromDom(l.getDoc()),Jt),vn=tc(l),xt=cS(fn,{selection:vn},St);Fl(l,oe,Ce,je,xt)})},S=()=>X1(l),O=vb.byAttr(vd,v,S);return l.on("init",oe=>{const Ce=l.getWin(),je=Nl(l),Pt=Vc(l),fn=()=>{const Xs=l.selection,Nc=K.fromDom(Xs.getStart()),Bc=K.fromDom(Xs.getEnd());bd(za,[Nc,Bc]).fold(()=>O.clear(je),Ze)},Jt=pb(Ce,je,Pt,O),St=Sv(Ce,je,Pt,O),vn=xv(Ce,je,Pt,O),xt=Xs=>Xs.raw.shiftKey===!0;l.on("TableSelectorChange",Xs=>vn(Xs.start,Xs.finish));const Xn=(Xs,Nc)=>{xt(Xs)&&(Nc.kill&&Xs.kill(),Nc.selection.each(Bc=>{const ju=Wh.relative(Bc.start,Bc.finish),el=jc(Ce,ju);l.selection.setRng(el)}))},Eo=Xs=>{const Nc=Ad(Xs);if(Nc.raw.shiftKey&&wv(Nc.raw.which)){const Bc=l.selection.getRng(),ju=K.fromDom(Bc.startContainer),el=K.fromDom(Bc.endContainer);St.keyup(Nc,ju,Bc.startOffset,el,Bc.endOffset).each(Jh=>{Xn(Nc,Jh)})}},Vo=Xs=>{const Nc=Ad(Xs);m.hide();const Bc=l.selection.getRng(),ju=K.fromDom(Bc.startContainer),el=K.fromDom(Bc.endContainer),Jh=zm(fO,Y2)(K.fromDom(l.selection.getStart()));St.keydown(Nc,ju,Bc.startOffset,el,Bc.endOffset,Jh).each(ui=>{Xn(Nc,ui)}),m.show()},Rr=Xs=>Xs.button===0,bc=Xs=>Xs.buttons===void 0?!0:(Xs.buttons&1)!==0,ma=Xs=>{Jt.clearstate()},Fi=Xs=>{Rr(Xs)&&Kh(Xs)&&Jt.mousedown(Ad(Xs))},Ef=Xs=>{bc(Xs)&&Kh(Xs)&&Jt.mouseover(Ad(Xs))},kb=Xs=>{Rr(Xs)&&Kh(Xs)&&Jt.mouseup(Ad(Xs))},$v=(()=>{const Xs=vf(K.fromDom(je)),Nc=vf(0);return{touchEnd:ju=>{const el=K.fromDom(ju.target);if(bs("td")(el)||bs("th")(el)){const Jh=Xs.get(),ui=Nc.get();In(Jh,el)&&ju.timeStamp-ui<300&&(ju.preventDefault(),vn(el,el))}Xs.set(el),Nc.set(ju.timeStamp)}}})();l.on("dragstart",ma),l.on("mousedown",Fi),l.on("mouseover",Ef),l.on("mouseup",kb),l.on("touchend",$v.touchEnd),l.on("keyup",Eo),l.on("keydown",Vo),l.on("NodeChange",fn)}),l.on("PreInit",()=>{l.serializer.addTempAttr(vd.firstSelected),l.serializer.addTempAttr(vd.lastSelected)}),{getSelectedCells:()=>Ev(h.get(),Q([]),oe=>Oe(oe,Ce=>Ce.dom),oe=>[oe.dom]),clearSelectedCells:oe=>O.clear(K.fromDom(oe))}},Hl=l=>{let m=[];return{bind:O=>{if(O===void 0)throw new Error("Event bind error: undefined handler");m.push(O)},unbind:O=>{m=Fe(m,F=>F!==O)},trigger:(...O)=>{const F={};fe(l,(G,oe)=>{F[G]=O[oe]}),fe(m,G=>{G(F)})}}},_g=l=>{const m=Wt(l,v=>({bind:v.bind,unbind:v.unbind})),h=Wt(l,v=>v.trigger);return{registry:m,trigger:h}},uS=(l,m)=>{let h=null;const v=()=>{pt(h)||(clearTimeout(h),h=null)};return{cancel:v,throttle:(...O)=>{v(),h=setTimeout(()=>{h=null,l.apply(null,O)},m)}}},Yh=l=>l.slice(0).sort(),yb=(l,m)=>{throw new Error("All required keys ("+Yh(l).join(", ")+") were not specified. Specified keys were: "+Yh(m).join(", ")+".")},wb=l=>{throw new Error("Unsupported keys for object: "+Yh(l).join(", "))},Gy=(l,m)=>{if(!Et(m))throw new Error("The "+l+" fields must be an array. Was: "+m+".");fe(m,h=>{if(!xn(h))throw new Error("The value "+h+" in the "+l+" fields was not a string.")})},_E=(l,m)=>{throw new Error("All values need to be of type: "+m+". Keys ("+Yh(l).join(", ")+") were not.")},AE=l=>{const m=Yh(l);R(m,(v,S)=>S<m.length-1&&v===m[S+1]).each(v=>{throw new Error("The field: "+v+" occurs more than once in the combined fields: ["+m.join(", ")+"].")})},OE=(l,m)=>zl(l,m,{validate:Mt,label:"function"}),zl=(l,m,h)=>{if(m.length===0)throw new Error("You must specify at least one required field.");return Gy("required",m),AE(m),v=>{const S=Z(v);We(m,G=>_(S,G))||yb(m,S),l(m,S);const F=Fe(m,G=>!h.validate(v[G],G));return F.length>0&&_E(F,h.label),v}},qc=(l,m)=>{const h=Fe(m,v=>!_(l,v));h.length>0&&wb(h)},xf=l=>OE(qc,l),gO=xf(["compare","extract","mutate","sink"]),DE=xf(["element","start","stop","destroy"]),RE=xf(["forceDrop","drop","move","delayDrop"]),ss=()=>{let l=ee.none();const m=()=>{l=ee.none()},h=(O,F)=>{const G=l.map(oe=>O.compare(oe,F));return l=ee.some(F),G},v=(O,F)=>{F.extract(O).each(oe=>{h(F,oe).each(je=>{S.trigger.move(je)})})},S=_g({move:Hl(["info"])});return{onEvent:v,reset:m,events:S.registry}},ME=()=>{const l=_g({move:Hl(["info"])});return{onEvent:Ze,reset:Ze,events:l.registry}},dS=()=>{const l=ME(),m=ss();let h=l;return{on:()=>{h.reset(),h=m},off:()=>{h.reset(),h=l},isOn:()=>h===m,onEvent:(G,oe)=>{h.onEvent(G,oe)},events:m.events}},qy=(l,m,h)=>{let v=!1;const S=_g({start:Hl([]),stop:Hl([])}),O=dS(),F=()=>{Jt.stop(),O.isOn()&&(O.off(),S.trigger.stop())},G=uS(F,200),oe=vn=>{Jt.start(vn),O.on(),S.trigger.start()},Ce=vn=>{G.cancel(),O.onEvent(vn,m)};O.events.move.bind(vn=>{m.mutate(l,vn.info)});const je=()=>{v=!0},Pt=()=>{v=!1},fn=vn=>(...xt)=>{v&&vn.apply(null,xt)},Jt=m.sink(RE({forceDrop:F,drop:fn(F),move:fn(Ce),delayDrop:fn(G.throttle)}),h),St=()=>{Jt.destroy()};return{element:Jt.element,go:oe,on:je,off:Pt,destroy:St,events:S.registry}},mS=l=>{const m=l.replace(/\./g,"-");return{resolve:v=>m+"-"+v}},Od=mS("ephox-dragster").resolve,Av=l=>{const m={layerClass:Od("blocker"),...l},h=K.fromTag("div");return ys(h,"role","presentation"),Ds(h,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),pm(h,Od("blocker")),pm(h,m.layerClass),{element:Q(h),destroy:()=>{Br(h)}}};var hS=gO({compare:(l,m)=>Ml(m.left-l.left,m.top-l.top),extract:l=>ee.some(Ml(l.x,l.y)),sink:(l,m)=>{const h=Av(m),v=Sf(h.element(),"mousedown",l.forceDrop),S=Sf(h.element(),"mouseup",l.drop),O=Sf(h.element(),"mousemove",l.move),F=Sf(h.element(),"mouseout",l.delayDrop),G=()=>{h.destroy(),S.unbind(),O.unbind(),F.unbind(),v.unbind()},oe=je=>{qo(je,h.element())},Ce=()=>{Br(h.element())};return DE({element:h.element,start:oe,stop:Ce,destroy:G})},mutate:(l,m)=>{l.mutate(m.left,m.top)}});const vO=(l,m={})=>{var h;const v=(h=m.mode)!==null&&h!==void 0?h:hS;return qy(l,v,m)},kf=mS("ephox-snooker").resolve,Ky=()=>{const l=_g({drag:Hl(["xDelta","yDelta"])});return{mutate:(h,v)=>{l.trigger.drag(h,v)},events:l.registry}},NE=()=>{const l=_g({drag:Hl(["xDelta","yDelta","target"])});let m=ee.none();const h=Ky();return h.events.drag.bind(O=>{m.each(F=>{l.trigger.drag(O.xDelta,O.yDelta,F)})}),{assign:O=>{m=ee.some(O)},get:()=>m,mutate:h.mutate,events:l.registry}},pS=(l,m,h,v,S)=>{const O=K.fromTag("div");return Ds(O,{position:"absolute",left:m-v/2+"px",top:h+"px",height:S+"px",width:v+"px"}),cs(O,{"data-column":l,role:"presentation"}),O},To=(l,m,h,v,S)=>{const O=K.fromTag("div");return Ds(O,{position:"absolute",left:m+"px",top:h-S/2+"px",height:S+"px",width:v+"px"}),cs(O,{"data-row":l,role:"presentation"}),O},Xh=kf("resizer-bar"),bS=kf("resizer-rows"),vS=kf("resizer-cols"),Ag=7,Yy=(l,m)=>Se(l.all,(h,v)=>m(h.element)?[v]:[]),BE=(l,m)=>{const h=[];return Ue(l.grid.columns,v=>{Ho.getColumnAt(l,v).map(O=>O.element).forall(m)&&h.push(v)}),Fe(h,v=>{const S=Ho.filterItems(l,O=>O.column===v);return We(S,O=>m(O.element))})},Ov=l=>{const m=ar(l.parent(),"."+Xh);fe(m,Br)},yS=(l,m,h)=>{const v=l.origin();fe(m,S=>{S.each(O=>{const F=h(v,O);pm(F,Xh),qo(l.parent(),F)})})},Xy=(l,m,h,v)=>{yS(l,m,(S,O)=>{const F=pS(O.col,O.x-S.left,h.top-S.top,Ag,v);return pm(F,vS),F})},wS=(l,m,h,v)=>{yS(l,m,(S,O)=>{const F=To(O.row,h.left-S.left,O.y-S.top,v,Ag);return pm(F,bS),F})},$E=(l,m,h,v,S)=>{const O=Ou(h),F=m.isResizable,G=v.length>0?Du.positions(v,h):[],oe=G.length>0?Yy(l,F):[],Ce=Fe(G,(Jt,St)=>he(oe,vn=>St===vn));wS(m,Ce,O,no(h));const je=S.length>0?ni.positions(S,h):[],Pt=je.length>0?BE(l,F):[],fn=Fe(je,(Jt,St)=>he(Pt,vn=>St===vn));Xy(m,fn,O,ch(h))},Dv=(l,m)=>{if(Ov(l),l.isResizable(m)){const h=Ho.fromTable(m),v=Au(h),S=mc(h);$E(h,l,m,v,S)}},Cb=(l,m)=>{const h=ar(l.parent(),"."+Xh);fe(h,m)},Jy=l=>{Cb(l,m=>{Qo(m,"display","none")})},Rv=l=>{Cb(l,m=>{Qo(m,"display","block")})},Mv=l=>kv(l,bS),Sb=l=>kv(l,vS),Og=kf("resizer-bar-dragging"),wO=l=>{const m=NE(),h=vO(m,{});let v=ee.none();const S=(St,vn)=>ee.from(gr(St,vn));m.events.drag.bind(St=>{S(St.target,"data-row").each(vn=>{const xt=Yr(St.target,"top");Qo(St.target,"top",xt+St.yDelta+"px")}),S(St.target,"data-column").each(vn=>{const xt=Yr(St.target,"left");Qo(St.target,"left",xt+St.xDelta+"px")})});const O=(St,vn)=>{const xt=Yr(St,vn),Xn=Rs(St,"data-initial-"+vn,0);return xt-Xn};h.events.stop.bind(()=>{m.get().each(St=>{v.each(vn=>{S(St,"data-row").each(xt=>{const Xn=O(St,"top");Hs(St,"data-initial-top"),Jt.trigger.adjustHeight(vn,Xn,parseInt(xt,10))}),S(St,"data-column").each(xt=>{const Xn=O(St,"left");Hs(St,"data-initial-left"),Jt.trigger.adjustWidth(vn,Xn,parseInt(xt,10))}),Dv(l,vn)})})});const F=(St,vn)=>{Jt.trigger.startAdjust(),m.assign(St),ys(St,"data-initial-"+vn,Yr(St,vn)),pm(St,Og),Qo(St,"opacity","0.2"),h.go(l.parent())},G=Sf(l.parent(),"mousedown",St=>{Mv(St.target)&&F(St.target,"top"),Sb(St.target)&&F(St.target,"left")}),oe=St=>In(St,l.view()),Ce=St=>pr(St,"table",oe).filter(cu),je=Sf(l.view(),"mouseover",St=>{Ce(St.target).fold(()=>{Pr(St.target)&&Ov(l)},vn=>{v=ee.some(vn),Dv(l,vn)})}),Pt=()=>{G.unbind(),je.unbind(),h.destroy(),Ov(l)},fn=St=>{Dv(l,St)},Jt=_g({adjustHeight:Hl(["table","delta","row"]),adjustWidth:Hl(["table","delta","column"]),startAdjust:Hl([])});return{destroy:Pt,refresh:fn,on:h.on,off:h.off,hideBars:yt(Jy,l),showBars:yt(Rv,l),events:Jt.registry}},PE={create:(l,m,h)=>{const v=Du,S=ni,O=wO(l),F=_g({beforeResize:Hl(["table","type"]),afterResize:Hl(["table","type"]),startDrag:Hl([])});return O.events.adjustHeight.bind(G=>{const oe=G.table;F.trigger.beforeResize(oe,"row");const Ce=v.delta(G.delta,oe);L1(oe,Ce,G.row,v),F.trigger.afterResize(oe,"row")}),O.events.startAdjust.bind(G=>{F.trigger.startDrag()}),O.events.adjustWidth.bind(G=>{const oe=G.table;F.trigger.beforeResize(oe,"col");const Ce=S.delta(G.delta,oe),je=h(oe);sm(oe,Ce,G.column,m,je),F.trigger.afterResize(oe,"col")}),{on:O.on,off:O.off,refreshBars:O.refresh,hideBars:O.hideBars,showBars:O.showBars,destroy:O.destroy,events:F.registry}}},Qi={only:(l,m)=>{const h=_r(l)?Lt(l):l;return{parent:Q(h),view:Q(l),origin:Q(Ml(0,0)),isResizable:m}},detached:(l,m,h)=>{const v=()=>Ou(m);return{parent:Q(m),view:Q(l),origin:v,isResizable:h}},body:(l,m,h)=>({parent:Q(m),view:Q(l),origin:Q(Ml(0,0)),isResizable:h})},ew=()=>{const l=K.fromTag("div");return Ds(l,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),qo(Ha(),l),l},xb=(l,m)=>l.inline?Qi.body(K.fromDom(l.getBody()),ew(),m):Qi.only(K.fromDom(l.getDoc()),m),Nv=(l,m)=>{l.inline&&Br(m.parent())},bm=l=>Ct(l)&&l.nodeName==="TABLE",tw="bar-",FE=l=>gr(l,"data-mce-resize")!=="false",IE=l=>{const m=Ho.fromTable(l);Ho.hasColumns(m)||fe(Dl(l),h=>{const v=Aa(h,"width");Qo(h,"width",v),Hs(h,"width")})},CS=l=>{const m=Uh(),h=Uh(),v=Uh();let S,O;const F=St=>fg(l,St),G=()=>Q1(l)?A1():VC(),oe=St=>wh(St).columns,Ce=(St,vn,xt)=>{const Xn=me(vn,"e");if(O===""&&mf(St),xt!==S&&O!==""){Qo(St,"width",O);const Eo=G(),Vo=F(St),Rr=Q1(l)||Xn?oe(St)-1:0;sm(St,xt-S,Rr,Eo,Vo)}else if(sT(O)){const Eo=parseFloat(O.replace("%","")),Vo=xt*Eo/S;Qo(St,"width",Vo+"%")}Xm(O)&&IE(St)},je=()=>{h.on(St=>{St.destroy()}),v.on(St=>{Nv(l,St)})};return l.on("init",()=>{const St=xb(l,FE);if(v.set(St),IT(l)&&LT(l)){const vn=G(),xt=PE.create(St,vn,F);xt.on(),xt.events.startDrag.bind(Xn=>{m.set(l.selection.getRng())}),xt.events.beforeResize.bind(Xn=>{const Eo=Xn.table.dom;Hu(l,Eo,Ep(Eo),Gd(Eo),tw+Xn.type)}),xt.events.afterResize.bind(Xn=>{const Eo=Xn.table,Vo=Eo.dom;Ni(Eo),m.on(Rr=>{l.selection.setRng(Rr),l.focus()}),v2(l,Vo,Ep(Vo),Gd(Vo),tw+Xn.type),l.undoManager.add()}),h.set(xt)}}),l.on("ObjectResizeStart",St=>{const vn=St.target;if(bm(vn)){const xt=K.fromDom(vn);fe(l.dom.select(".mce-clonedresizable"),Xn=>{l.dom.addClass(Xn,"mce-"+Kp(l)+"-columns")}),!_2(xt)&&Bh(l)?$h(xt):!E2(xt)&&mg(l)&&mf(xt),gg(xt)&&ne(St.origin,tw)&&mf(xt),S=St.width,O=Yp(l)?"":Ym(l,vn).getOr("")}}),l.on("ObjectResized",St=>{const vn=St.target;if(bm(vn)){const xt=K.fromDom(vn),Xn=St.origin;ne(Xn,"corner-")&&Ce(xt,Xn,St.width),Ni(xt),Ji(l,xt.dom,qp)}}),l.on("SwitchMode",()=>{h.on(St=>{l.mode.isReadOnly()?St.hideBars():St.showBars()})}),l.on("remove",()=>{je()}),{refresh:St=>{h.on(vn=>vn.refreshBars(K.fromDom(St)))},hide:()=>{h.on(St=>St.hideBars())},show:()=>{h.on(St=>St.showBars())}}},Ss=l=>{FT(l);const m=CS(l),h=jy(l,m),v=Wr(l,m,h);return yy(l,v),tE(l,v),ai(l,v),{getSelectedCells:h.getSelectedCells,clearSelectedCells:h.clearSelectedCells}},Zu=l=>({table:Ss(l)});var Dg=()=>{Ht.add("dom",Zu)};Dg()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=(ye,ee,at)=>{const Le=ee==="UL"?"InsertUnorderedList":"InsertOrderedList";ye.execCommand(Le,!1,at===!1?null:{"list-style-type":at})},dn=ye=>{ye.addCommand("ApplyUnorderedListStyle",(ee,at)=>{yn(ye,"UL",at["list-style-type"])}),ye.addCommand("ApplyOrderedListStyle",(ee,at)=>{yn(ye,"OL",at["list-style-type"])})},Sn=ye=>ee=>ee.options.get(ye),Qt=ye=>{const ee=ye.options.register;ee("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),ee("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})},Dn=Sn("advlist_number_styles"),xn=Sn("advlist_bullet_styles"),Nt=ye=>ye==null,Et=ye=>!Nt(ye);var pt=tinymce.util.Tools.resolve("tinymce.util.Tools");class hn{constructor(ee,at){this.tag=ee,this.value=at}static some(ee){return new hn(!0,ee)}static none(){return hn.singletonNone}fold(ee,at){return this.tag?at(this.value):ee()}isSome(){return this.tag}isNone(){return!this.tag}map(ee){return this.tag?hn.some(ee(this.value)):hn.none()}bind(ee){return this.tag?ee(this.value):hn.none()}exists(ee){return this.tag&&ee(this.value)}forall(ee){return!this.tag||ee(this.value)}filter(ee){return!this.tag||ee(this.value)?this:hn.none()}getOr(ee){return this.tag?this.value:ee}or(ee){return this.tag?this:ee}getOrThunk(ee){return this.tag?this.value:ee()}orThunk(ee){return this.tag?this:ee()}getOrDie(ee){if(this.tag)return this.value;throw new Error(ee??"Called getOrDie on None")}static from(ee){return Et(ee)?hn.some(ee):hn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ee){this.tag&&ee(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}hn.singletonNone=new hn(!1);const rn=(ye,ee)=>ye.dom.isChildOf(ee,ye.getBody()),Ut=ye=>Et(ye)&&/^(TH|TD)$/.test(ye.nodeName),Ct=ye=>ee=>Et(ee)&&/^(OL|UL|DL)$/.test(ee.nodeName)&&rn(ye,ee),Mt=ye=>{const ee=ye.dom.getParent(ye.selection.getNode(),"ol,ul"),at=ye.dom.getStyle(ee,"listStyleType");return hn.from(at)},cn=(ye,ee)=>ee!==null&&ye.dom.getContentEditableParent(ee)==="false",Ze=(ye,ee)=>{const at=ye.dom.getParent(ee,"ol,ul,dl");return cn(ye,at)},st=(ye,ee)=>{for(let at=0;at<ye.length;at++){const Le=ye[at];if(ee(Le))return at}return-1},Te=ye=>ye.replace(/\-/g," ").replace(/\b\w/g,ee=>ee.toUpperCase()),Q=ye=>Nt(ye)||ye==="default"?"":ye,ht=(ye,ee,at)=>{const Le=st(ee.parents,Ut),Me=Le!==-1?ee.parents.slice(0,Le):ee.parents,Rt=pt.grep(Me,Ct(ye));return Rt.length>0&&Rt[0].nodeName===at},It=(ye,ee)=>at=>{const Le=Me=>{at.setActive(ht(ye,Me,ee)),at.setEnabled(!Ze(ye,Me.element))};return ye.on("NodeChange",Le),()=>ye.off("NodeChange",Le)},yt=(ye,ee,at,Le,Me,Rt)=>{ye.ui.registry.addSplitButton(ee,{tooltip:at,icon:Me==="OL"?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:_=>{const he=pt.map(Rt,Ue=>{const Oe=Me==="OL"?"num":"bull",fe=Ue==="disc"||Ue==="decimal"?"default":Ue,Kt=Q(Ue),nn=Te(Ue);return{type:"choiceitem",value:Kt,icon:"list-"+Oe+"-"+fe,text:nn}});_(he)},onAction:()=>ye.execCommand(Le),onItemAction:(_,he)=>{yn(ye,Me,he)},select:_=>Mt(ye).map(Ue=>_===Ue).getOr(!1),onSetup:It(ye,Me)})},Y=(ye,ee,at,Le,Me,Rt)=>{ye.ui.registry.addToggleButton(ee,{active:!1,tooltip:at,icon:Me==="OL"?"ordered-list":"unordered-list",onSetup:It(ye,Me),onAction:()=>ye.queryCommandState(Le)||Rt===""?ye.execCommand(Le):yn(ye,Me,Rt)})},Ot=(ye,ee,at,Le,Me,Rt)=>{Rt.length>1?yt(ye,ee,at,Le,Me,Rt):Y(ye,ee,at,Le,Me,Q(Rt[0]))},Bn=ye=>{Ot(ye,"numlist","Numbered list","InsertOrderedList","OL",Dn(ye)),Ot(ye,"bullist","Bullet list","InsertUnorderedList","UL",xn(ye))};var $t=()=>{Ht.add("advlist",ye=>{ye.hasPlugin("lists")?(Qt(ye),Bn(ye),dn(ye)):console.error("Please use the Lists plugin together with the Advanced List plugin.")})};$t()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager"),yn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),dn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Sn=at=>Le=>Le.options.get(at),Qt=at=>{const Le=at.options.register;Le("allow_html_in_named_anchor",{processor:"boolean",default:!1})},Dn=Sn("allow_html_in_named_anchor"),xn="a:not([href])",Nt=at=>!at,Et=at=>at.getAttribute("id")||at.getAttribute("name")||"",pt=at=>at.nodeName.toLowerCase()==="a",hn=at=>pt(at)&&!at.getAttribute("href")&&Et(at)!=="",rn=at=>hn(at)&&!at.firstChild,Ut=at=>{const Le=at.dom;yn(Le).walk(at.selection.getRng(),Me=>{dn.each(Me,Rt=>{rn(Rt)&&Le.remove(Rt,!1)})})},Ct=at=>/^[A-Za-z][A-Za-z0-9\-:._]*$/.test(at),Mt=at=>at.dom.getParent(at.selection.getStart(),xn),cn=at=>{const Le=Mt(at);return Le?Et(Le):""},Ze=(at,Le)=>{at.undoManager.transact(()=>{Dn(at)||at.selection.collapse(!0),at.selection.isCollapsed()?at.insertContent(at.dom.createHTML("a",{id:Le})):(Ut(at),at.formatter.remove("namedAnchor",void 0,void 0,!0),at.formatter.apply("namedAnchor",{value:Le}),at.addVisual())})},st=(at,Le,Me)=>{Me.removeAttribute("name"),Me.id=Le,at.addVisual(),at.undoManager.add()},Te=(at,Le)=>{const Me=Mt(at);Me?st(at,Le,Me):Ze(at,Le),at.focus()},Q=(at,Le)=>Ct(Le)?(Te(at,Le),!0):(at.windowManager.alert("ID should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores."),!1),ht=at=>{const Le=cn(at);at.windowManager.open({title:"Anchor",size:"normal",body:{type:"panel",items:[{name:"id",type:"input",label:"ID",placeholder:"example"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{id:Le},onSubmit:Me=>{Q(at,Me.getData().id)&&Me.close()}})},It=at=>{at.addCommand("mceAnchor",()=>{ht(at)})},yt=at=>Nt(at.attr("href"))&&!Nt(at.attr("id")||at.attr("name")),Y=at=>yt(at)&&!at.firstChild,Ot=at=>Le=>{for(let Me=0;Me<Le.length;Me++){const Rt=Le[Me];Y(Rt)&&Rt.attr("contenteditable",at)}},Bn=at=>{at.on("PreInit",()=>{at.parser.addNodeFilter("a",Ot("false")),at.serializer.addNodeFilter("a",Ot(null))})},$t=at=>{at.formatter.register("namedAnchor",{inline:"a",selector:xn,remove:"all",split:!0,deep:!0,attributes:{id:"%value"},onmatch:(Le,Me,Rt)=>hn(Le)})},ye=at=>{const Le=()=>at.execCommand("mceAnchor");at.ui.registry.addToggleButton("anchor",{icon:"bookmark",tooltip:"Anchor",onAction:Le,onSetup:Me=>at.selection.selectorChangedWithUnbind("a:not([href])",Me.setActive).unbind}),at.ui.registry.addMenuItem("anchor",{icon:"bookmark",text:"Anchor...",onAction:Le})};var ee=()=>{Ht.add("anchor",at=>{Qt(at),Bn(at),It(at),ye(at),at.on("PreInit",()=>{$t(at)})})};ee()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=()=>/(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)[A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+))?/g,dn=Fe=>Vt=>Vt.options.get(Fe),Sn=Fe=>{const Vt=Fe.options.register;Vt("autolink_pattern",{processor:"regexp",default:new RegExp("^"+yn().source+"$","i")}),Vt("link_default_target",{processor:"string"}),Vt("link_default_protocol",{processor:"string",default:"https"})},Qt=dn("autolink_pattern"),Dn=dn("link_default_target"),xn=dn("link_default_protocol"),Nt=dn("allow_unsafe_link_target"),Et=(Fe,Vt,kt)=>{var Ie;return kt(Fe,Vt.prototype)?!0:((Ie=Fe.constructor)===null||Ie===void 0?void 0:Ie.name)===Vt.name},pt=Fe=>{const Vt=typeof Fe;return Fe===null?"null":Vt==="object"&&Array.isArray(Fe)?"array":Vt==="object"&&Et(Fe,String,(kt,Ie)=>Ie.isPrototypeOf(kt))?"string":Vt},hn=Fe=>Vt=>pt(Vt)===Fe,rn=Fe=>Vt=>Fe===Vt,Ut=hn("string"),Ct=rn(void 0),Mt=Fe=>Fe==null,cn=Fe=>!Mt(Fe),Ze=Fe=>Vt=>!Fe(Vt),st=Object.hasOwnProperty,Te=(Fe,Vt)=>st.call(Fe,Vt),Q=(Fe,Vt,kt)=>Vt===""||Fe.length>=Vt.length&&Fe.substr(kt,kt+Vt.length)===Vt,ht=(Fe,Vt,kt=0,Ie)=>{const R=Fe.indexOf(Vt,kt);return R!==-1?Ct(Ie)?!0:R+Vt.length<=Ie:!1},It=(Fe,Vt)=>Q(Fe,Vt,0),yt="\uFEFF",Y=Fe=>Fe===yt,Ot=Fe=>Fe.replace(/\uFEFF/g,"");var Bn=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker");const $t=Fe=>Fe.nodeType===3,ye=Fe=>Fe.nodeType===1,ee=Fe=>/^[(\[{ \u00a0]$/.test(Fe),at=Fe=>/^([A-Za-z][A-Za-z\d.+-]*:\/\/)|mailto:/.test(Fe),Le=Fe=>/[?!,.;:]/.test(Fe),Me=(Fe,Vt,kt)=>{for(let Ie=Vt-1;Ie>=0;Ie--){const R=Fe.charAt(Ie);if(!Y(R)&&kt(R))return Ie}return-1},Rt=(Fe,Vt)=>{let kt=Fe,Ie=Vt;for(;ye(kt)&&kt.childNodes[Ie];)kt=kt.childNodes[Ie],Ie=$t(kt)?kt.data.length:kt.childNodes.length;return{container:kt,offset:Ie}},_=(Fe,Vt)=>{var kt;const Ie=Fe.schema.getVoidElements(),R=Qt(Fe),{dom:Hn,selection:Ae}=Fe;if(Hn.getParent(Ae.getNode(),"a[href]")!==null)return null;const Se=Ae.getRng(),We=Bn(Hn,Pe=>Hn.isBlock(Pe)||Te(Ie,Pe.nodeName.toLowerCase())||Hn.getContentEditable(Pe)==="false"),{container:Ee,offset:ae}=Rt(Se.endContainer,Se.endOffset),se=(kt=Hn.getParent(Ee,Hn.isBlock))!==null&&kt!==void 0?kt:Hn.getRoot(),re=We.backwards(Ee,ae+Vt,(Pe,Wt)=>{const ot=Pe.data,Qn=Me(ot,Wt,Ze(ee));return Qn===-1||Le(ot[Qn])?Qn:Qn+1},se);if(!re)return null;let H=re.container;const q=We.backwards(re.container,re.offset,(Pe,Wt)=>{H=Pe;const ot=Me(Pe.data,Wt,ee);return ot===-1?ot:ot+1},se),z=Hn.createRng();q?z.setStart(q.container,q.offset):z.setStart(H,0),z.setEnd(re.container,re.offset);const Ne=Ot(z.toString()).match(R);if(Ne){let Pe=Ne[0];return It(Pe,"www.")?Pe=xn(Fe)+"://"+Pe:ht(Pe,"@")&&!at(Pe)&&(Pe="mailto:"+Pe),{rng:z,url:Pe}}else return null},he=(Fe,Vt)=>{const{dom:kt,selection:Ie}=Fe,{rng:R,url:Hn}=Vt,Ae=Ie.getBookmark();Ie.setRng(R);const Se="createlink",We={command:Se,ui:!1,value:Hn};if(!Fe.dispatch("BeforeExecCommand",We).isDefaultPrevented()){Fe.getDoc().execCommand(Se,!1,Hn),Fe.dispatch("ExecCommand",We);const ae=Dn(Fe);if(Ut(ae)){const se=Ie.getNode();kt.setAttrib(se,"target",ae),ae==="_blank"&&!Nt(Fe)&&kt.setAttrib(se,"rel","noopener")}}Ie.moveToBookmark(Ae),Fe.nodeChanged()},Ue=Fe=>{const Vt=_(Fe,-1);cn(Vt)&&he(Fe,Vt)},Oe=Ue,fe=Fe=>{const Vt=_(Fe,0);cn(Vt)&&he(Fe,Vt)},Kt=Fe=>{Fe.on("keydown",Vt=>{Vt.keyCode===13&&!Vt.isDefaultPrevented()&&fe(Fe)}),Fe.on("keyup",Vt=>{Vt.keyCode===32?Ue(Fe):(Vt.keyCode===48&&Vt.shiftKey||Vt.keyCode===221)&&Oe(Fe)})};var nn=()=>{Ht.add("autolink",Fe=>{Sn(Fe),Kt(Fe)})};nn()})();(function(){const Ht=Te=>{let Q=Te;return{get:()=>Q,set:yt=>{Q=yt}}};var yn=tinymce.util.Tools.resolve("tinymce.PluginManager"),dn=tinymce.util.Tools.resolve("tinymce.Env");const Sn=Te=>Te.dispatch("ResizeEditor"),Qt=Te=>Q=>Q.options.get(Te),Dn=Te=>{const Q=Te.options.register;Q("autoresize_overflow_padding",{processor:"number",default:1}),Q("autoresize_bottom_margin",{processor:"number",default:50})},xn=Qt("min_height"),Nt=Qt("max_height"),Et=Qt("autoresize_overflow_padding"),pt=Qt("autoresize_bottom_margin"),hn=Te=>Te.plugins.fullscreen&&Te.plugins.fullscreen.isFullscreen(),rn=(Te,Q)=>{const ht=Te.getBody();ht&&(ht.style.overflowY=Q?"":"hidden",Q||(ht.scrollTop=0))},Ut=(Te,Q,ht,It)=>{var yt;const Y=parseInt((yt=Te.getStyle(Q,ht,It))!==null&&yt!==void 0?yt:"",10);return isNaN(Y)?0:Y},Ct=Te=>{if((Te==null?void 0:Te.type.toLowerCase())==="setcontent"){const Q=Te;return Q.selection===!0||Q.paste===!0}else return!1},Mt=(Te,Q,ht)=>{var It;const yt=Te.dom,Y=Te.getDoc();if(!Y)return;if(hn(Te)){rn(Te,!0);return}const Ot=Y.documentElement,Bn=pt(Te),$t=(It=xn(Te))!==null&&It!==void 0?It:Te.getElement().offsetHeight;let ye=$t;const ee=Ut(yt,Ot,"margin-top",!0),at=Ut(yt,Ot,"margin-bottom",!0);let Le=Ot.offsetHeight+ee+at+Bn;Le<0&&(Le=0);const Me=Te.getContainer().offsetHeight,Rt=Te.getContentAreaContainer().offsetHeight,_=Me-Rt;Le+_>$t&&(ye=Le+_);const he=Nt(Te);if(he&&ye>he?(ye=he,rn(Te,!0)):rn(Te,!1),ye!==Q.get()){const Ue=ye-Q.get();if(yt.setStyle(Te.getContainer(),"height",ye+"px"),Q.set(ye),Sn(Te),dn.browser.isSafari()&&(dn.os.isMacOS()||dn.os.isiOS())){const Oe=Te.getWin();Oe.scrollTo(Oe.pageXOffset,Oe.pageYOffset)}Te.hasFocus()&&Ct(ht)&&Te.selection.scrollIntoView(),(dn.browser.isSafari()||dn.browser.isChromium())&&Ue<0&&Mt(Te,Q,ht)}},cn=(Te,Q)=>{Te.on("init",()=>{const ht=Et(Te),It=Te.dom;It.setStyles(Te.getDoc().documentElement,{height:"auto"}),It.setStyles(Te.getBody(),{paddingLeft:ht,paddingRight:ht,"min-height":0})}),Te.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",ht=>{Mt(Te,Q,ht)})},Ze=(Te,Q)=>{Te.addCommand("mceAutoResize",()=>{Mt(Te,Q)})};var st=()=>{yn.add("autoresize",Te=>{if(Dn(Te),Te.options.isSet("resize")||Te.options.set("resize",!1),!Te.inline){const Q=Ht(0);Ze(Te,Q),cn(Te,Q)}})};st()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=(he,Ue,Oe)=>{var fe;return Oe(he,Ue.prototype)?!0:((fe=he.constructor)===null||fe===void 0?void 0:fe.name)===Ue.name},dn=he=>{const Ue=typeof he;return he===null?"null":Ue==="object"&&Array.isArray(he)?"array":Ue==="object"&&yn(he,String,(Oe,fe)=>fe.isPrototypeOf(Oe))?"string":Ue},Sn=he=>Ue=>dn(Ue)===he,Qt=he=>Ue=>he===Ue,Dn=Sn("string"),xn=Qt(void 0);var Nt=tinymce.util.Tools.resolve("tinymce.util.Delay"),Et=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),pt=tinymce.util.Tools.resolve("tinymce.util.Tools");const hn=he=>he.dispatch("RestoreDraft"),rn=he=>he.dispatch("StoreDraft"),Ut=he=>he.dispatch("RemoveDraft"),Ct=he=>{const Ue={s:1e3,m:6e4},Oe=/^(\d+)([ms]?)$/.exec(he);return(Oe&&Oe[2]?Ue[Oe[2]]:1)*parseInt(he,10)},Mt=he=>Ue=>Ue.options.get(he),cn=he=>{const Ue=he.options.register,Oe=fe=>{const Kt=Dn(fe);return Kt?{value:Ct(fe),valid:Kt}:{valid:!1,message:"Must be a string."}};Ue("autosave_ask_before_unload",{processor:"boolean",default:!0}),Ue("autosave_prefix",{processor:"string",default:"tinymce-autosave-{path}{query}{hash}-{id}-"}),Ue("autosave_restore_when_empty",{processor:"boolean",default:!1}),Ue("autosave_interval",{processor:Oe,default:"30s"}),Ue("autosave_retention",{processor:Oe,default:"20m"})},Ze=Mt("autosave_ask_before_unload"),st=Mt("autosave_restore_when_empty"),Te=Mt("autosave_interval"),Q=Mt("autosave_retention"),ht=he=>{const Ue=document.location;return he.options.get("autosave_prefix").replace(/{path}/g,Ue.pathname).replace(/{query}/g,Ue.search).replace(/{hash}/g,Ue.hash).replace(/{id}/g,he.id)},It=(he,Ue)=>{if(xn(Ue))return he.dom.isEmpty(he.getBody());{const Oe=pt.trim(Ue);if(Oe==="")return!0;{const fe=new DOMParser().parseFromString(Oe,"text/html");return he.dom.isEmpty(fe)}}},yt=he=>{var Ue;const Oe=parseInt((Ue=Et.getItem(ht(he)+"time"))!==null&&Ue!==void 0?Ue:"0",10)||0;return new Date().getTime()-Oe>Q(he)?(Y(he,!1),!1):!0},Y=(he,Ue)=>{const Oe=ht(he);Et.removeItem(Oe+"draft"),Et.removeItem(Oe+"time"),Ue!==!1&&Ut(he)},Ot=he=>{const Ue=ht(he);!It(he)&&he.isDirty()&&(Et.setItem(Ue+"draft",he.getContent({format:"raw",no_events:!0})),Et.setItem(Ue+"time",new Date().getTime().toString()),rn(he))},Bn=he=>{var Ue;const Oe=ht(he);yt(he)&&(he.setContent((Ue=Et.getItem(Oe+"draft"))!==null&&Ue!==void 0?Ue:"",{format:"raw"}),hn(he))},$t=he=>{const Ue=Te(he);Nt.setEditorInterval(he,()=>{Ot(he)},Ue)},ye=he=>{he.undoManager.transact(()=>{Bn(he),Y(he)}),he.focus()},ee=he=>({hasDraft:()=>yt(he),storeDraft:()=>Ot(he),restoreDraft:()=>Bn(he),removeDraft:Ue=>Y(he,Ue),isEmpty:Ue=>It(he,Ue)});var at=tinymce.util.Tools.resolve("tinymce.EditorManager");const Le=he=>{he.editorManager.on("BeforeUnload",Ue=>{let Oe;pt.each(at.get(),fe=>{fe.plugins.autosave&&fe.plugins.autosave.storeDraft(),!Oe&&fe.isDirty()&&Ze(fe)&&(Oe=fe.translate("You have unsaved changes are you sure you want to navigate away?"))}),Oe&&(Ue.preventDefault(),Ue.returnValue=Oe)})},Me=he=>Ue=>{Ue.setEnabled(yt(he));const Oe=()=>Ue.setEnabled(yt(he));return he.on("StoreDraft RestoreDraft RemoveDraft",Oe),()=>he.off("StoreDraft RestoreDraft RemoveDraft",Oe)},Rt=he=>{$t(he);const Ue=()=>{ye(he)};he.ui.registry.addButton("restoredraft",{tooltip:"Restore last draft",icon:"restore-draft",onAction:Ue,onSetup:Me(he)}),he.ui.registry.addMenuItem("restoredraft",{text:"Restore last draft",icon:"restore-draft",onAction:Ue,onSetup:Me(he)})};var _=()=>{Ht.add("autosave",he=>(cn(he),Le(he),Rt(he),he.on("init",()=>{st(he)&&he.dom.isEmpty(he.getBody())&&Bn(he)}),ee(he)))};_()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=(Ee,ae)=>Ee.dispatch("insertCustomChar",{chr:ae}),dn=(Ee,ae)=>{const se=yn(Ee,ae).chr;Ee.execCommand("mceInsertContent",!1,se)},Sn=(Ee,ae,se)=>{var re;return se(Ee,ae.prototype)?!0:((re=Ee.constructor)===null||re===void 0?void 0:re.name)===ae.name},Qt=Ee=>{const ae=typeof Ee;return Ee===null?"null":ae==="object"&&Array.isArray(Ee)?"array":ae==="object"&&Sn(Ee,String,(se,re)=>re.isPrototypeOf(se))?"string":ae},Dn=Ee=>ae=>Qt(ae)===Ee,xn=Ee=>ae=>typeof ae===Ee,Nt=Ee=>ae=>Ee===ae,Et=Dn("array"),pt=Nt(null),hn=Nt(void 0),rn=Ee=>Ee==null,Ut=Ee=>!rn(Ee),Ct=xn("function"),cn=(Ee=>()=>Ee)(!1);class Ze{constructor(ae,se){this.tag=ae,this.value=se}static some(ae){return new Ze(!0,ae)}static none(){return Ze.singletonNone}fold(ae,se){return this.tag?se(this.value):ae()}isSome(){return this.tag}isNone(){return!this.tag}map(ae){return this.tag?Ze.some(ae(this.value)):Ze.none()}bind(ae){return this.tag?ae(this.value):Ze.none()}exists(ae){return this.tag&&ae(this.value)}forall(ae){return!this.tag||ae(this.value)}filter(ae){return!this.tag||ae(this.value)?this:Ze.none()}getOr(ae){return this.tag?this.value:ae}or(ae){return this.tag?this:ae}getOrThunk(ae){return this.tag?this.value:ae()}orThunk(ae){return this.tag?this:ae()}getOrDie(ae){if(this.tag)return this.value;throw new Error(ae??"Called getOrDie on None")}static from(ae){return Ut(ae)?Ze.some(ae):Ze.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ae){this.tag&&ae(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ze.singletonNone=new Ze(!1);const st=Array.prototype.push,Te=(Ee,ae)=>{const se=Ee.length,re=new Array(se);for(let H=0;H<se;H++){const q=Ee[H];re[H]=ae(q,H)}return re},Q=(Ee,ae)=>{for(let se=0,re=Ee.length;se<re;se++){const H=Ee[se];ae(H,se)}},ht=(Ee,ae,se)=>{for(let re=0,H=Ee.length;re<H;re++){const q=Ee[re];if(ae(q,re))return Ze.some(q);if(se(q,re))break}return Ze.none()},It=(Ee,ae)=>ht(Ee,ae,cn),yt=Ee=>{const ae=[];for(let se=0,re=Ee.length;se<re;++se){if(!Et(Ee[se]))throw new Error("Arr.flatten item "+se+" was not an array, input: "+Ee);st.apply(ae,Ee[se])}return ae},Y=(Ee,ae)=>yt(Te(Ee,ae));var Ot=tinymce.util.Tools.resolve("tinymce.util.Tools");const Bn=Ee=>ae=>ae.options.get(Ee),$t=Ee=>{const ae=Ee.options.register,se=re=>Ct(re)||Et(re);ae("charmap",{processor:se}),ae("charmap_append",{processor:se})},ye=Bn("charmap"),ee=Bn("charmap_append"),at=Ot.isArray,Le="User Defined",Me=()=>[{name:"Currency",characters:[[36,"dollar sign"],[162,"cent sign"],[8364,"euro sign"],[163,"pound sign"],[165,"yen sign"],[164,"currency sign"],[8352,"euro-currency sign"],[8353,"colon sign"],[8354,"cruzeiro sign"],[8355,"french franc sign"],[8356,"lira sign"],[8357,"mill sign"],[8358,"naira sign"],[8359,"peseta sign"],[8360,"rupee sign"],[8361,"won sign"],[8362,"new sheqel sign"],[8363,"dong sign"],[8365,"kip sign"],[8366,"tugrik sign"],[8367,"drachma sign"],[8368,"german penny symbol"],[8369,"peso sign"],[8370,"guarani sign"],[8371,"austral sign"],[8372,"hryvnia sign"],[8373,"cedi sign"],[8374,"livre tournois sign"],[8375,"spesmilo sign"],[8376,"tenge sign"],[8377,"indian rupee sign"],[8378,"turkish lira sign"],[8379,"nordic mark sign"],[8380,"manat sign"],[8381,"ruble sign"],[20870,"yen character"],[20803,"yuan character"],[22291,"yuan character, in hong kong and taiwan"],[22278,"yen/yuan character variant one"]]},{name:"Text",characters:[[169,"copyright sign"],[174,"registered sign"],[8482,"trade mark sign"],[8240,"per mille sign"],[181,"micro sign"],[183,"middle dot"],[8226,"bullet"],[8230,"three dot leader"],[8242,"minutes / feet"],[8243,"seconds / inches"],[167,"section sign"],[182,"paragraph sign"],[223,"sharp s / ess-zed"]]},{name:"Quotations",characters:[[8249,"single left-pointing angle quotation mark"],[8250,"single right-pointing angle quotation mark"],[171,"left pointing guillemet"],[187,"right pointing guillemet"],[8216,"left single quotation mark"],[8217,"right single quotation mark"],[8220,"left double quotation mark"],[8221,"right double quotation mark"],[8218,"single low-9 quotation mark"],[8222,"double low-9 quotation mark"],[60,"less-than sign"],[62,"greater-than sign"],[8804,"less-than or equal to"],[8805,"greater-than or equal to"],[8211,"en dash"],[8212,"em dash"],[175,"macron"],[8254,"overline"],[164,"currency sign"],[166,"broken bar"],[168,"diaeresis"],[161,"inverted exclamation mark"],[191,"turned question mark"],[710,"circumflex accent"],[732,"small tilde"],[176,"degree sign"],[8722,"minus sign"],[177,"plus-minus sign"],[247,"division sign"],[8260,"fraction slash"],[215,"multiplication sign"],[185,"superscript one"],[178,"superscript two"],[179,"superscript three"],[188,"fraction one quarter"],[189,"fraction one half"],[190,"fraction three quarters"]]},{name:"Mathematical",characters:[[402,"function / florin"],[8747,"integral"],[8721,"n-ary sumation"],[8734,"infinity"],[8730,"square root"],[8764,"similar to"],[8773,"approximately equal to"],[8776,"almost equal to"],[8800,"not equal to"],[8801,"identical to"],[8712,"element of"],[8713,"not an element of"],[8715,"contains as member"],[8719,"n-ary product"],[8743,"logical and"],[8744,"logical or"],[172,"not sign"],[8745,"intersection"],[8746,"union"],[8706,"partial differential"],[8704,"for all"],[8707,"there exists"],[8709,"diameter"],[8711,"backward difference"],[8727,"asterisk operator"],[8733,"proportional to"],[8736,"angle"]]},{name:"Extended Latin",characters:[[192,"A - grave"],[193,"A - acute"],[194,"A - circumflex"],[195,"A - tilde"],[196,"A - diaeresis"],[197,"A - ring above"],[256,"A - macron"],[198,"ligature AE"],[199,"C - cedilla"],[200,"E - grave"],[201,"E - acute"],[202,"E - circumflex"],[203,"E - diaeresis"],[274,"E - macron"],[204,"I - grave"],[205,"I - acute"],[206,"I - circumflex"],[207,"I - diaeresis"],[298,"I - macron"],[208,"ETH"],[209,"N - tilde"],[210,"O - grave"],[211,"O - acute"],[212,"O - circumflex"],[213,"O - tilde"],[214,"O - diaeresis"],[216,"O - slash"],[332,"O - macron"],[338,"ligature OE"],[352,"S - caron"],[217,"U - grave"],[218,"U - acute"],[219,"U - circumflex"],[220,"U - diaeresis"],[362,"U - macron"],[221,"Y - acute"],[376,"Y - diaeresis"],[562,"Y - macron"],[222,"THORN"],[224,"a - grave"],[225,"a - acute"],[226,"a - circumflex"],[227,"a - tilde"],[228,"a - diaeresis"],[229,"a - ring above"],[257,"a - macron"],[230,"ligature ae"],[231,"c - cedilla"],[232,"e - grave"],[233,"e - acute"],[234,"e - circumflex"],[235,"e - diaeresis"],[275,"e - macron"],[236,"i - grave"],[237,"i - acute"],[238,"i - circumflex"],[239,"i - diaeresis"],[299,"i - macron"],[240,"eth"],[241,"n - tilde"],[242,"o - grave"],[243,"o - acute"],[244,"o - circumflex"],[245,"o - tilde"],[246,"o - diaeresis"],[248,"o slash"],[333,"o macron"],[339,"ligature oe"],[353,"s - caron"],[249,"u - grave"],[250,"u - acute"],[251,"u - circumflex"],[252,"u - diaeresis"],[363,"u - macron"],[253,"y - acute"],[254,"thorn"],[255,"y - diaeresis"],[563,"y - macron"],[913,"Alpha"],[914,"Beta"],[915,"Gamma"],[916,"Delta"],[917,"Epsilon"],[918,"Zeta"],[919,"Eta"],[920,"Theta"],[921,"Iota"],[922,"Kappa"],[923,"Lambda"],[924,"Mu"],[925,"Nu"],[926,"Xi"],[927,"Omicron"],[928,"Pi"],[929,"Rho"],[931,"Sigma"],[932,"Tau"],[933,"Upsilon"],[934,"Phi"],[935,"Chi"],[936,"Psi"],[937,"Omega"],[945,"alpha"],[946,"beta"],[947,"gamma"],[948,"delta"],[949,"epsilon"],[950,"zeta"],[951,"eta"],[952,"theta"],[953,"iota"],[954,"kappa"],[955,"lambda"],[956,"mu"],[957,"nu"],[958,"xi"],[959,"omicron"],[960,"pi"],[961,"rho"],[962,"final sigma"],[963,"sigma"],[964,"tau"],[965,"upsilon"],[966,"phi"],[967,"chi"],[968,"psi"],[969,"omega"]]},{name:"Symbols",characters:[[8501,"alef symbol"],[982,"pi symbol"],[8476,"real part symbol"],[978,"upsilon - hook symbol"],[8472,"Weierstrass p"],[8465,"imaginary part"]]},{name:"Arrows",characters:[[8592,"leftwards arrow"],[8593,"upwards arrow"],[8594,"rightwards arrow"],[8595,"downwards arrow"],[8596,"left right arrow"],[8629,"carriage return"],[8656,"leftwards double arrow"],[8657,"upwards double arrow"],[8658,"rightwards double arrow"],[8659,"downwards double arrow"],[8660,"left right double arrow"],[8756,"therefore"],[8834,"subset of"],[8835,"superset of"],[8836,"not a subset of"],[8838,"subset of or equal to"],[8839,"superset of or equal to"],[8853,"circled plus"],[8855,"circled times"],[8869,"perpendicular"],[8901,"dot operator"],[8968,"left ceiling"],[8969,"right ceiling"],[8970,"left floor"],[8971,"right floor"],[9001,"left-pointing angle bracket"],[9002,"right-pointing angle bracket"],[9674,"lozenge"],[9824,"black spade suit"],[9827,"black club suit"],[9829,"black heart suit"],[9830,"black diamond suit"],[8194,"en space"],[8195,"em space"],[8201,"thin space"],[8204,"zero width non-joiner"],[8205,"zero width joiner"],[8206,"left-to-right mark"],[8207,"right-to-left mark"]]}],Rt=Ee=>Ot.grep(Ee,ae=>at(ae)&&ae.length===2),_=Ee=>at(Ee)?Rt(Ee):typeof Ee=="function"?Ee():[],he=(Ee,ae)=>{const se=ye(Ee);se&&(ae=[{name:Le,characters:_(se)}]);const re=ee(Ee);if(re){const H=Ot.grep(ae,q=>q.name===Le);return H.length?(H[0].characters=[...H[0].characters,..._(re)],ae):ae.concat({name:Le,characters:_(re)})}return ae},Ue=Ee=>{const ae=he(Ee,Me());return ae.length>1?[{name:"All",characters:Y(ae,se=>se.characters)}].concat(ae):ae},Oe=Ee=>({getCharMap:()=>Ue(Ee),insertChar:re=>{dn(Ee,re)}}),fe=Ee=>{let ae=Ee;return{get:()=>ae,set:H=>{ae=H}}},Kt=(Ee,ae)=>{let se=null;const re=()=>{pt(se)||(clearTimeout(se),se=null)};return{cancel:re,throttle:(...q)=>{re(),se=setTimeout(()=>{se=null,Ee.apply(null,q)},ae)}}},nn=(Ee,ae,se=0,re)=>{const H=Ee.indexOf(ae,se);return H!==-1?hn(re)?!0:H+ae.length<=re:!1},Fe=String.fromCodePoint,Vt=(Ee,ae,se)=>nn(Fe(Ee).toLowerCase(),se)?!0:nn(ae.toLowerCase(),se)||nn(ae.toLowerCase().replace(/\s+/g,""),se),kt=(Ee,ae)=>{const se=[],re=ae.toLowerCase();return Q(Ee.characters,H=>{Vt(H[0],H[1],re)&&se.push(H)}),Te(se,H=>({text:H[1],value:Fe(H[0]),icon:Fe(H[0])}))},Ie="pattern",R=(Ee,ae)=>{const se=()=>[{label:"Search",type:"input",name:Ie},{type:"collection",name:"results"}],re=()=>Te(ae,eo=>({title:eo.name,name:eo.name,items:se()})),H=()=>({type:"panel",items:se()}),q=()=>({type:"tabpanel",tabs:re()}),z=ae.length===1?fe(Le):fe("All"),Z=(eo,kn)=>{It(ae,ao=>ao.name===z.get()).each(ao=>{const Re=kt(ao,kn);eo.setData({results:Re})})},Pe=Kt(eo=>{const kn=eo.getData().pattern;Z(eo,kn)},40),Wt=ae.length===1?H():q(),ot={pattern:"",results:kt(ae[0],"")},Qn={title:"Special Character",size:"normal",body:Wt,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:ot,onAction:(eo,kn)=>{kn.name==="results"&&(dn(Ee,kn.value),eo.close())},onTabChange:(eo,kn)=>{z.set(kn.newTabName),Pe.throttle(eo)},onChange:(eo,kn)=>{kn.name===Ie&&Pe.throttle(eo)}};Ee.windowManager.open(Qn).focus(Ie)},Hn=(Ee,ae)=>{Ee.addCommand("mceShowCharmap",()=>{R(Ee,ae)})},Ae=(Ee,ae)=>{Ee.ui.registry.addAutocompleter("charmap",{trigger:":",columns:"auto",minChars:2,fetch:(se,re)=>new Promise((H,q)=>{H(kt(ae,se))}),onAction:(se,re,H)=>{Ee.selection.setRng(re),Ee.insertContent(H),se.hide()}})},Se=Ee=>{const ae=()=>Ee.execCommand("mceShowCharmap");Ee.ui.registry.addButton("charmap",{icon:"insert-character",tooltip:"Special character",onAction:ae}),Ee.ui.registry.addMenuItem("charmap",{icon:"insert-character",text:"Special character...",onAction:ae})};var We=()=>{Ht.add("charmap",Ee=>{$t(Ee);const ae=Ue(Ee);return Hn(Ee,ae),Se(Ee),Ae(Ee,ae[0]),Oe(Ee)})};We()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=(Nt,Et)=>{Nt.focus(),Nt.undoManager.transact(()=>{Nt.setContent(Et)}),Nt.selection.setCursorLocation(),Nt.nodeChanged()},dn=Nt=>Nt.getContent({source_view:!0}),Sn=Nt=>{const Et=dn(Nt);Nt.windowManager.open({title:"Source Code",size:"large",body:{type:"panel",items:[{type:"textarea",name:"code"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{code:Et},onSubmit:pt=>{yn(Nt,pt.getData().code),pt.close()}})},Qt=Nt=>{Nt.addCommand("mceCodeEditor",()=>{Sn(Nt)})},Dn=Nt=>{const Et=()=>Nt.execCommand("mceCodeEditor");Nt.ui.registry.addButton("code",{icon:"sourcecode",tooltip:"Source code",onAction:Et}),Nt.ui.registry.addMenuItem("code",{icon:"sourcecode",text:"Source code",onAction:Et})};var xn=()=>{Ht.add("code",Nt=>(Qt(Nt),Dn(Nt),{}))};xn()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=Le=>Le==null,dn=Le=>!yn(Le),Sn=Le=>()=>Le;class Qt{constructor(Me,Rt){this.tag=Me,this.value=Rt}static some(Me){return new Qt(!0,Me)}static none(){return Qt.singletonNone}fold(Me,Rt){return this.tag?Rt(this.value):Me()}isSome(){return this.tag}isNone(){return!this.tag}map(Me){return this.tag?Qt.some(Me(this.value)):Qt.none()}bind(Me){return this.tag?Me(this.value):Qt.none()}exists(Me){return this.tag&&Me(this.value)}forall(Me){return!this.tag||Me(this.value)}filter(Me){return!this.tag||Me(this.value)?this:Qt.none()}getOr(Me){return this.tag?this.value:Me}or(Me){return this.tag?this:Me}getOrThunk(Me){return this.tag?this.value:Me()}orThunk(Me){return this.tag?this:Me()}getOrDie(Me){if(this.tag)return this.value;throw new Error(Me??"Called getOrDie on None")}static from(Me){return dn(Me)?Qt.some(Me):Qt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Me){this.tag&&Me(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Qt.singletonNone=new Qt(!1);const Dn=(Le,Me)=>Me>=0&&Me<Le.length?Qt.some(Le[Me]):Qt.none(),xn=Le=>Dn(Le,0);var Nt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils");const Et=typeof window<"u"?window:Function("return this;")(),pt=function(Le,Me,Rt){const _=window.Prism;window.Prism={manual:!0};var he=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{},Ue=function(Oe){var fe=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,Kt=0,nn={},Fe={manual:Oe.Prism&&Oe.Prism.manual,disableWorkerMessageHandler:Oe.Prism&&Oe.Prism.disableWorkerMessageHandler,util:{encode:function se(re){return re instanceof Vt?new Vt(re.type,se(re.content),re.alias):Array.isArray(re)?re.map(se):re.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(se){return Object.prototype.toString.call(se).slice(8,-1)},objId:function(se){return se.__id||Object.defineProperty(se,"__id",{value:++Kt}),se.__id},clone:function se(re,H){H=H||{};var q,z;switch(Fe.util.type(re)){case"Object":if(z=Fe.util.objId(re),H[z])return H[z];q={},H[z]=q;for(var Z in re)re.hasOwnProperty(Z)&&(q[Z]=se(re[Z],H));return q;case"Array":return z=Fe.util.objId(re),H[z]?H[z]:(q=[],H[z]=q,re.forEach(function(Ne,Pe){q[Pe]=se(Ne,H)}),q);default:return re}},getLanguage:function(se){for(;se;){var re=fe.exec(se.className);if(re)return re[1].toLowerCase();se=se.parentElement}return"none"},setLanguage:function(se,re){se.className=se.className.replace(RegExp(fe,"gi"),""),se.classList.add("language-"+re)},currentScript:function(){if(typeof document>"u")return null;if("currentScript"in document&&1<2)return document.currentScript;try{throw new Error}catch(q){var se=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(q.stack)||[])[1];if(se){var re=document.getElementsByTagName("script");for(var H in re)if(re[H].src==se)return re[H]}return null}},isActive:function(se,re,H){for(var q="no-"+re;se;){var z=se.classList;if(z.contains(re))return!0;if(z.contains(q))return!1;se=se.parentElement}return!!H}},languages:{plain:nn,plaintext:nn,text:nn,txt:nn,extend:function(se,re){var H=Fe.util.clone(Fe.languages[se]);for(var q in re)H[q]=re[q];return H},insertBefore:function(se,re,H,q){q=q||Fe.languages;var z=q[se],Z={};for(var Ne in z)if(z.hasOwnProperty(Ne)){if(Ne==re)for(var Pe in H)H.hasOwnProperty(Pe)&&(Z[Pe]=H[Pe]);H.hasOwnProperty(Ne)||(Z[Ne]=z[Ne])}var Wt=q[se];return q[se]=Z,Fe.languages.DFS(Fe.languages,function(ot,Qn){Qn===Wt&&ot!=se&&(this[ot]=Z)}),Z},DFS:function se(re,H,q,z){z=z||{};var Z=Fe.util.objId;for(var Ne in re)if(re.hasOwnProperty(Ne)){H.call(re,Ne,re[Ne],q||Ne);var Pe=re[Ne],Wt=Fe.util.type(Pe);Wt==="Object"&&!z[Z(Pe)]?(z[Z(Pe)]=!0,se(Pe,H,null,z)):Wt==="Array"&&!z[Z(Pe)]&&(z[Z(Pe)]=!0,se(Pe,H,Ne,z))}}},plugins:{},highlightAll:function(se,re){Fe.highlightAllUnder(document,se,re)},highlightAllUnder:function(se,re,H){var q={callback:H,container:se,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};Fe.hooks.run("before-highlightall",q),q.elements=Array.prototype.slice.apply(q.container.querySelectorAll(q.selector)),Fe.hooks.run("before-all-elements-highlight",q);for(var z=0,Z;Z=q.elements[z++];)Fe.highlightElement(Z,re===!0,q.callback)},highlightElement:function(se,re,H){var q=Fe.util.getLanguage(se),z=Fe.languages[q];Fe.util.setLanguage(se,q);var Z=se.parentElement;Z&&Z.nodeName.toLowerCase()==="pre"&&Fe.util.setLanguage(Z,q);var Ne=se.textContent,Pe={element:se,language:q,grammar:z,code:Ne};function Wt(Qn){Pe.highlightedCode=Qn,Fe.hooks.run("before-insert",Pe),Pe.element.innerHTML=Pe.highlightedCode,Fe.hooks.run("after-highlight",Pe),Fe.hooks.run("complete",Pe),H&&H.call(Pe.element)}if(Fe.hooks.run("before-sanity-check",Pe),Z=Pe.element.parentElement,Z&&Z.nodeName.toLowerCase()==="pre"&&!Z.hasAttribute("tabindex")&&Z.setAttribute("tabindex","0"),!Pe.code){Fe.hooks.run("complete",Pe),H&&H.call(Pe.element);return}if(Fe.hooks.run("before-highlight",Pe),!Pe.grammar){Wt(Fe.util.encode(Pe.code));return}if(re&&Oe.Worker){var ot=new Worker(Fe.filename);ot.onmessage=function(Qn){Wt(Qn.data)},ot.postMessage(JSON.stringify({language:Pe.language,code:Pe.code,immediateClose:!0}))}else Wt(Fe.highlight(Pe.code,Pe.grammar,Pe.language))},highlight:function(se,re,H){var q={code:se,grammar:re,language:H};if(Fe.hooks.run("before-tokenize",q),!q.grammar)throw new Error('The language "'+q.language+'" has no grammar.');return q.tokens=Fe.tokenize(q.code,q.grammar),Fe.hooks.run("after-tokenize",q),Vt.stringify(Fe.util.encode(q.tokens),q.language)},tokenize:function(se,re){var H=re.rest;if(H){for(var q in H)re[q]=H[q];delete re.rest}var z=new R;return Hn(z,z.head,se),Ie(se,z,re,z.head,0),Se(z)},hooks:{all:{},add:function(se,re){var H=Fe.hooks.all;H[se]=H[se]||[],H[se].push(re)},run:function(se,re){var H=Fe.hooks.all[se];if(!(!H||!H.length))for(var q=0,z;z=H[q++];)z(re)}},Token:Vt};Oe.Prism=Fe;function Vt(se,re,H,q){this.type=se,this.content=re,this.alias=H,this.length=(q||"").length|0}Vt.stringify=function se(re,H){if(typeof re=="string")return re;if(Array.isArray(re)){var q="";return re.forEach(function(Wt){q+=se(Wt,H)}),q}var z={type:re.type,content:se(re.content,H),tag:"span",classes:["token",re.type],attributes:{},language:H},Z=re.alias;Z&&(Array.isArray(Z)?Array.prototype.push.apply(z.classes,Z):z.classes.push(Z)),Fe.hooks.run("wrap",z);var Ne="";for(var Pe in z.attributes)Ne+=" "+Pe+'="'+(z.attributes[Pe]||"").replace(/"/g,"&quot;")+'"';return"<"+z.tag+' class="'+z.classes.join(" ")+'"'+Ne+">"+z.content+"</"+z.tag+">"};function kt(se,re,H,q){se.lastIndex=re;var z=se.exec(H);if(z&&q&&z[1]){var Z=z[1].length;z.index+=Z,z[0]=z[0].slice(Z)}return z}function Ie(se,re,H,q,z,Z){for(var Ne in H)if(!(!H.hasOwnProperty(Ne)||!H[Ne])){var Pe=H[Ne];Pe=Array.isArray(Pe)?Pe:[Pe];for(var Wt=0;Wt<Pe.length;++Wt){if(Z&&Z.cause==Ne+","+Wt)return;var ot=Pe[Wt],Qn=ot.inside,uo=!!ot.lookbehind,eo=!!ot.greedy,kn=ot.alias;if(eo&&!ot.pattern.global){var ao=ot.pattern.toString().match(/[imsuy]*$/)[0];ot.pattern=RegExp(ot.pattern.source,ao+"g")}for(var Re=ot.pattern||ot,Ye=q.next,Bt=z;Ye!==re.tail&&!(Z&&Bt>=Z.reach);Bt+=Ye.value.length,Ye=Ye.next){var an=Ye.value;if(re.length>se.length)return;if(!(an instanceof Vt)){var An=1,Tn;if(eo){if(Tn=kt(Re,Bt,se,uo),!Tn||Tn.index>=se.length)break;var ze=Tn.index,Do=Tn.index+Tn[0].length,ks=Bt;for(ks+=Ye.value.length;ze>=ks;)Ye=Ye.next,ks+=Ye.value.length;if(ks-=Ye.value.length,Bt=ks,Ye.value instanceof Vt)continue;for(var qe=Ye;qe!==re.tail&&(ks<Do||typeof qe.value=="string");qe=qe.next)An++,ks+=qe.value.length;An--,an=se.slice(Bt,ks),Tn.index-=Bt}else if(Tn=kt(Re,0,an,uo),!Tn)continue;var ze=Tn.index,sn=Tn[0],on=an.slice(0,ze),qt=an.slice(ze+sn.length),Kn=Bt+an.length;Z&&Kn>Z.reach&&(Z.reach=Kn);var Ts=Ye.prev;on&&(Ts=Hn(re,Ts,on),Bt+=on.length),Ae(re,Ts,An);var _r=new Vt(Ne,Qn?Fe.tokenize(sn,Qn):sn,kn,sn);if(Ye=Hn(re,Ts,_r),qt&&Hn(re,Ye,qt),An>1){var ga={cause:Ne+","+Wt,reach:Kn};Ie(se,re,H,Ye.prev,Bt,ga),Z&&ga.reach>Z.reach&&(Z.reach=ga.reach)}}}}}}function R(){var se={value:null,prev:null,next:null},re={value:null,prev:se,next:null};se.next=re,this.head=se,this.tail=re,this.length=0}function Hn(se,re,H){var q=re.next,z={value:H,prev:re,next:q};return re.next=z,q.prev=z,se.length++,z}function Ae(se,re,H){for(var q=re.next,z=0;z<H&&q!==se.tail;z++)q=q.next;re.next=q,q.prev=re,se.length-=z}function Se(se){for(var re=[],H=se.head.next;H!==se.tail;)re.push(H.value),H=H.next;return re}if(!Oe.document)return Oe.addEventListener&&(Fe.disableWorkerMessageHandler||Oe.addEventListener("message",function(se){var re=JSON.parse(se.data),H=re.language,q=re.code,z=re.immediateClose;Oe.postMessage(Fe.highlight(q,Fe.languages[H],H)),z&&Oe.close()},!1)),Fe;var We=Fe.util.currentScript();We&&(Fe.filename=We.src,We.hasAttribute("data-manual")&&(Fe.manual=!0));function Ee(){Fe.manual||Fe.highlightAll()}if(!Fe.manual){var ae=document.readyState;ae==="loading"||ae==="interactive"&&We&&We.defer?document.addEventListener("DOMContentLoaded",Ee):window.requestAnimationFrame?window.requestAnimationFrame(Ee):window.setTimeout(Ee,16)}return Fe}(he);return typeof Me<"u"&&Me.exports&&(Me.exports=Ue),typeof Le<"u"&&(Le.Prism=Ue),Ue.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},function(Oe){function fe(Kt,nn){return"___"+Kt.toUpperCase()+nn+"___"}Object.defineProperties(Oe.languages["markup-templating"]={},{buildPlaceholders:{value:function(Kt,nn,Fe,Vt){if(Kt.language===nn){var kt=Kt.tokenStack=[];Kt.code=Kt.code.replace(Fe,function(Ie){if(typeof Vt=="function"&&!Vt(Ie))return Ie;for(var R=kt.length,Hn;Kt.code.indexOf(Hn=fe(nn,R))!==-1;)++R;return kt[R]=Ie,Hn}),Kt.grammar=Oe.languages.markup}}},tokenizePlaceholders:{value:function(Kt,nn){if(Kt.language!==nn||!Kt.tokenStack)return;Kt.grammar=Oe.languages[nn];var Fe=0,Vt=Object.keys(Kt.tokenStack);function kt(Ie){for(var R=0;R<Ie.length&&!(Fe>=Vt.length);R++){var Hn=Ie[R];if(typeof Hn=="string"||Hn.content&&typeof Hn.content=="string"){var Ae=Vt[Fe],Se=Kt.tokenStack[Ae],We=typeof Hn=="string"?Hn:Hn.content,Ee=fe(nn,Ae),ae=We.indexOf(Ee);if(ae>-1){++Fe;var se=We.substring(0,ae),re=new Oe.Token(nn,Oe.tokenize(Se,Kt.grammar),"language-"+nn,Se),H=We.substring(ae+Ee.length),q=[];se&&q.push.apply(q,kt([se])),q.push(re),H&&q.push.apply(q,kt([H])),typeof Hn=="string"?Ie.splice.apply(Ie,[R,1].concat(q)):Hn.content=q}}else Hn.content&&kt(Hn.content)}return Ie}kt(Kt.tokens)}}})}(Ue),Ue.languages.c=Ue.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/}),Ue.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}}),Ue.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Ue.languages.c.string],char:Ue.languages.c.char,comment:Ue.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Ue.languages.c}}}}),Ue.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/}),delete Ue.languages.c.boolean,function(Oe){var fe=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,Kt=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return fe.source});Oe.languages.cpp=Oe.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return fe.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:fe,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),Oe.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return Kt})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),Oe.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:Oe.languages.cpp}}}}),Oe.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),Oe.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:Oe.languages.extend("cpp",{})}}),Oe.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},Oe.languages.cpp["base-clause"])}(Ue),function(Oe){function fe(Tn,Do){return Tn.replace(/<<(\d+)>>/g,function(ks,qe){return"(?:"+Do[+qe]+")"})}function Kt(Tn,Do,ks){return RegExp(fe(Tn,Do),ks||"")}function nn(Tn,Do){for(var ks=0;ks<Do;ks++)Tn=Tn.replace(/<<self>>/g,function(){return"(?:"+Tn+")"});return Tn.replace(/<<self>>/g,"[^\\s\\S]")}var Fe={type:"bool byte char decimal double dynamic float int long object sbyte short string uint ulong ushort var void",typeDeclaration:"class enum interface record struct",contextual:"add alias and ascending async await by descending from(?=\\s*(?:\\w|$)) get global group into init(?=\\s*;) join let nameof not notnull on or orderby partial remove select set unmanaged value when where with(?=\\s*{)",other:"abstract as base break case catch checked const continue default delegate do else event explicit extern finally fixed for foreach goto if implicit in internal is lock namespace new null operator out override params private protected public readonly ref return sealed sizeof stackalloc static switch this throw try typeof unchecked unsafe using virtual volatile while yield"};function Vt(Tn){return"\\b(?:"+Tn.trim().replace(/ /g,"|")+")\\b"}var kt=Vt(Fe.typeDeclaration),Ie=RegExp(Vt(Fe.type+" "+Fe.typeDeclaration+" "+Fe.contextual+" "+Fe.other)),R=Vt(Fe.typeDeclaration+" "+Fe.contextual+" "+Fe.other),Hn=Vt(Fe.type+" "+Fe.typeDeclaration+" "+Fe.other),Ae=nn(/<(?:[^<>;=+\-*/%&|^]|<<self>>)*>/.source,2),Se=nn(/\((?:[^()]|<<self>>)*\)/.source,2),We=/@?\b[A-Za-z_]\w*\b/.source,Ee=fe(/<<0>>(?:\s*<<1>>)?/.source,[We,Ae]),ae=fe(/(?!<<0>>)<<1>>(?:\s*\.\s*<<1>>)*/.source,[R,Ee]),se=/\[\s*(?:,\s*)*\]/.source,re=fe(/<<0>>(?:\s*(?:\?\s*)?<<1>>)*(?:\s*\?)?/.source,[ae,se]),H=fe(/[^,()<>[\];=+\-*/%&|^]|<<0>>|<<1>>|<<2>>/.source,[Ae,Se,se]),q=fe(/\(<<0>>+(?:,<<0>>+)+\)/.source,[H]),z=fe(/(?:<<0>>|<<1>>)(?:\s*(?:\?\s*)?<<2>>)*(?:\s*\?)?/.source,[q,ae,se]),Z={keyword:Ie,punctuation:/[<>()?,.:[\]]/},Ne=/'(?:[^\r\n'\\]|\\.|\\[Uux][\da-fA-F]{1,8})'/.source,Pe=/"(?:\\.|[^\\"\r\n])*"/.source,Wt=/@"(?:""|\\[\s\S]|[^\\"])*"(?!")/.source;Oe.languages.csharp=Oe.languages.extend("clike",{string:[{pattern:Kt(/(^|[^$\\])<<0>>/.source,[Wt]),lookbehind:!0,greedy:!0},{pattern:Kt(/(^|[^@$\\])<<0>>/.source,[Pe]),lookbehind:!0,greedy:!0}],"class-name":[{pattern:Kt(/(\busing\s+static\s+)<<0>>(?=\s*;)/.source,[ae]),lookbehind:!0,inside:Z},{pattern:Kt(/(\busing\s+<<0>>\s*=\s*)<<1>>(?=\s*;)/.source,[We,z]),lookbehind:!0,inside:Z},{pattern:Kt(/(\busing\s+)<<0>>(?=\s*=)/.source,[We]),lookbehind:!0},{pattern:Kt(/(\b<<0>>\s+)<<1>>/.source,[kt,Ee]),lookbehind:!0,inside:Z},{pattern:Kt(/(\bcatch\s*\(\s*)<<0>>/.source,[ae]),lookbehind:!0,inside:Z},{pattern:Kt(/(\bwhere\s+)<<0>>/.source,[We]),lookbehind:!0},{pattern:Kt(/(\b(?:is(?:\s+not)?|as)\s+)<<0>>/.source,[re]),lookbehind:!0,inside:Z},{pattern:Kt(/\b<<0>>(?=\s+(?!<<1>>|with\s*\{)<<2>>(?:\s*[=,;:{)\]]|\s+(?:in|when)\b))/.source,[z,Hn,We]),inside:Z}],keyword:Ie,number:/(?:\b0(?:x[\da-f_]*[\da-f]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[-+]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/>>=?|<<=?|[-=]>|([-+&|])\1|~|\?\?=?|[-+*/%&|^!=<>]=?/,punctuation:/\?\.?|::|[{}[\];(),.:]/}),Oe.languages.insertBefore("csharp","number",{range:{pattern:/\.\./,alias:"operator"}}),Oe.languages.insertBefore("csharp","punctuation",{"named-parameter":{pattern:Kt(/([(,]\s*)<<0>>(?=\s*:)/.source,[We]),lookbehind:!0,alias:"punctuation"}}),Oe.languages.insertBefore("csharp","class-name",{namespace:{pattern:Kt(/(\b(?:namespace|using)\s+)<<0>>(?:\s*\.\s*<<0>>)*(?=\s*[;{])/.source,[We]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:Kt(/(\b(?:default|sizeof|typeof)\s*\(\s*(?!\s))(?:[^()\s]|\s(?!\s)|<<0>>)*(?=\s*\))/.source,[Se]),lookbehind:!0,alias:"class-name",inside:Z},"return-type":{pattern:Kt(/<<0>>(?=\s+(?:<<1>>\s*(?:=>|[({]|\.\s*this\s*\[)|this\s*\[))/.source,[z,ae]),inside:Z,alias:"class-name"},"constructor-invocation":{pattern:Kt(/(\bnew\s+)<<0>>(?=\s*[[({])/.source,[z]),lookbehind:!0,inside:Z,alias:"class-name"},"generic-method":{pattern:Kt(/<<0>>\s*<<1>>(?=\s*\()/.source,[We,Ae]),inside:{function:Kt(/^<<0>>/.source,[We]),generic:{pattern:RegExp(Ae),alias:"class-name",inside:Z}}},"type-list":{pattern:Kt(/\b((?:<<0>>\s+<<1>>|record\s+<<1>>\s*<<5>>|where\s+<<2>>)\s*:\s*)(?:<<3>>|<<4>>|<<1>>\s*<<5>>|<<6>>)(?:\s*,\s*(?:<<3>>|<<4>>|<<6>>))*(?=\s*(?:where|[{;]|=>|$))/.source,[kt,Ee,We,z,Ie.source,Se,/\bnew\s*\(\s*\)/.source]),lookbehind:!0,inside:{"record-arguments":{pattern:Kt(/(^(?!new\s*\()<<0>>\s*)<<1>>/.source,[Ee,Se]),lookbehind:!0,greedy:!0,inside:Oe.languages.csharp},keyword:Ie,"class-name":{pattern:RegExp(z),greedy:!0,inside:Z},punctuation:/[,()]/}},preprocessor:{pattern:/(^[\t ]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var ot=Pe+"|"+Ne,Qn=fe(/\/(?![*/])|\/\/[^\r\n]*[\r\n]|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>/.source,[ot]),uo=nn(fe(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[Qn]),2),eo=/\b(?:assembly|event|field|method|module|param|property|return|type)\b/.source,kn=fe(/<<0>>(?:\s*\(<<1>>*\))?/.source,[ae,uo]);Oe.languages.insertBefore("csharp","class-name",{attribute:{pattern:Kt(/((?:^|[^\s\w>)?])\s*\[\s*)(?:<<0>>\s*:\s*)?<<1>>(?:\s*,\s*<<1>>)*(?=\s*\])/.source,[eo,kn]),lookbehind:!0,greedy:!0,inside:{target:{pattern:Kt(/^<<0>>(?=\s*:)/.source,[eo]),alias:"keyword"},"attribute-arguments":{pattern:Kt(/\(<<0>>*\)/.source,[uo]),inside:Oe.languages.csharp},"class-name":{pattern:RegExp(ae),inside:{punctuation:/\./}},punctuation:/[:,]/}}});var ao=/:[^}\r\n]+/.source,Re=nn(fe(/[^"'/()]|<<0>>|\(<<self>>*\)/.source,[Qn]),2),Ye=fe(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Re,ao]),Bt=nn(fe(/[^"'/()]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|<<0>>|\(<<self>>*\)/.source,[ot]),2),an=fe(/\{(?!\{)(?:(?![}:])<<0>>)*<<1>>?\}/.source,[Bt,ao]);function An(Tn,Do){return{interpolation:{pattern:Kt(/((?:^|[^{])(?:\{\{)*)<<0>>/.source,[Tn]),lookbehind:!0,inside:{"format-string":{pattern:Kt(/(^\{(?:(?![}:])<<0>>)*)<<1>>(?=\}$)/.source,[Do,ao]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[\s\S]+/,alias:"language-csharp",inside:Oe.languages.csharp}}},string:/[\s\S]+/}}Oe.languages.insertBefore("csharp","string",{"interpolation-string":[{pattern:Kt(/(^|[^\\])(?:\$@|@\$)"(?:""|\\[\s\S]|\{\{|<<0>>|[^\\{"])*"/.source,[Ye]),lookbehind:!0,greedy:!0,inside:An(Ye,Re)},{pattern:Kt(/(^|[^@\\])\$"(?:\\.|\{\{|<<0>>|[^\\"{])*"/.source,[an]),lookbehind:!0,greedy:!0,inside:An(an,Bt)}],char:{pattern:RegExp(Ne),greedy:!0}}),Oe.languages.dotnet=Oe.languages.cs=Oe.languages.csharp}(Ue),function(Oe){var fe=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;Oe.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:/@[\w-](?:[^;{\s]|\s+(?![\s{]))*(?:;|(?=\s*\{))/,inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+fe.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+fe.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+fe.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:fe,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},Oe.languages.css.atrule.inside.rest=Oe.languages.css;var Kt=Oe.languages.markup;Kt&&(Kt.tag.addInlined("style","css"),Kt.tag.addAttribute("style","css"))}(Ue),function(Oe){var fe=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,Kt=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,nn={pattern:RegExp(/(^|[^\w.])/.source+Kt+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};Oe.languages.java=Oe.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[nn,{pattern:RegExp(/(^|[^\w.])/.source+Kt+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:nn.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+Kt+/[A-Z]\w*\b/.source),lookbehind:!0,inside:nn.inside}],keyword:fe,function:[Oe.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0}}),Oe.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),Oe.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":nn,keyword:fe,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+Kt+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:nn.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+Kt+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:nn.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return fe.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Ue),Ue.languages.javascript=Ue.languages.extend("clike",{"class-name":[Ue.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),Ue.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,Ue.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Ue.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Ue.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Ue.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Ue.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Ue.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),Ue.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Ue.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),Ue.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),Ue.languages.markup&&(Ue.languages.markup.tag.addInlined("script","javascript"),Ue.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),Ue.languages.js=Ue.languages.javascript,Ue.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},Ue.languages.markup.tag.inside["attr-value"].inside.entity=Ue.languages.markup.entity,Ue.languages.markup.doctype.inside["internal-subset"].inside=Ue.languages.markup,Ue.hooks.add("wrap",function(Oe){Oe.type==="entity"&&(Oe.attributes.title=Oe.content.replace(/&amp;/,"&"))}),Object.defineProperty(Ue.languages.markup.tag,"addInlined",{value:function(fe,Kt){var nn={};nn["language-"+Kt]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Ue.languages[Kt]},nn.cdata=/^<!\[CDATA\[|\]\]>$/i;var Fe={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:nn}};Fe["language-"+Kt]={pattern:/[\s\S]+/,inside:Ue.languages[Kt]};var Vt={};Vt[fe]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return fe}),"i"),lookbehind:!0,greedy:!0,inside:Fe},Ue.languages.insertBefore("markup","cdata",Vt)}}),Object.defineProperty(Ue.languages.markup.tag,"addAttribute",{value:function(Oe,fe){Ue.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+Oe+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[fe,"language-"+fe],inside:Ue.languages[fe]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),Ue.languages.html=Ue.languages.markup,Ue.languages.mathml=Ue.languages.markup,Ue.languages.svg=Ue.languages.markup,Ue.languages.xml=Ue.languages.extend("markup",{}),Ue.languages.ssml=Ue.languages.xml,Ue.languages.atom=Ue.languages.xml,Ue.languages.rss=Ue.languages.xml,function(Oe){var fe=/\/\*[\s\S]*?\*\/|\/\/.*|#(?!\[).*/,Kt=[{pattern:/\b(?:false|true)\b/i,alias:"boolean"},{pattern:/(::\s*)\b[a-z_]\w*\b(?!\s*\()/i,greedy:!0,lookbehind:!0},{pattern:/(\b(?:case|const)\s+)\b[a-z_]\w*(?=\s*[;=])/i,greedy:!0,lookbehind:!0},/\b(?:null)\b/i,/\b[A-Z_][A-Z0-9_]*\b(?!\s*\()/],nn=/\b0b[01]+(?:_[01]+)*\b|\b0o[0-7]+(?:_[0-7]+)*\b|\b0x[\da-f]+(?:_[\da-f]+)*\b|(?:\b\d+(?:_\d+)*\.?(?:\d+(?:_\d+)*)?|\B\.\d+)(?:e[+-]?\d+)?/i,Fe=/<?=>|\?\?=?|\.{3}|\??->|[!=]=?=?|::|\*\*=?|--|\+\+|&&|\|\||<<|>>|[?~]|[/^|%*&<>.+-]=?/,Vt=/[{}\[\](),:;]/;Oe.languages.php={delimiter:{pattern:/\?>$|^<\?(?:php(?=\s)|=)?/i,alias:"important"},comment:fe,variable:/\$+(?:\w+\b|(?=\{))/,package:{pattern:/(namespace\s+|use\s+(?:function\s+)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,lookbehind:!0,inside:{punctuation:/\\/}},"class-name-definition":{pattern:/(\b(?:class|enum|interface|trait)\s+)\b[a-z_]\w*(?!\\)\b/i,lookbehind:!0,alias:"class-name"},"function-definition":{pattern:/(\bfunction\s+)[a-z_]\w*(?=\s*\()/i,lookbehind:!0,alias:"function"},keyword:[{pattern:/(\(\s*)\b(?:array|bool|boolean|float|int|integer|object|string)\b(?=\s*\))/i,alias:"type-casting",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|object|self|static|string)\b(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b(?:array(?!\s*\()|bool|callable|(?:false|null)(?=\s*\|)|float|int|iterable|mixed|never|object|self|static|string|void)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/\b(?:array(?!\s*\()|bool|float|int|iterable|mixed|object|string|void)\b/i,alias:"type-declaration",greedy:!0},{pattern:/(\|\s*)(?:false|null)\b|\b(?:false|null)(?=\s*\|)/i,alias:"type-declaration",greedy:!0,lookbehind:!0},{pattern:/\b(?:parent|self|static)(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(\byield\s+)from\b/i,lookbehind:!0},/\bclass\b/i,{pattern:/((?:^|[^\s>:]|(?:^|[^-])>|(?:^|[^:]):)\s*)\b(?:abstract|and|array|as|break|callable|case|catch|clone|const|continue|declare|default|die|do|echo|else|elseif|empty|enddeclare|endfor|endforeach|endif|endswitch|endwhile|enum|eval|exit|extends|final|finally|fn|for|foreach|function|global|goto|if|implements|include|include_once|instanceof|insteadof|interface|isset|list|match|namespace|never|new|or|parent|print|private|protected|public|readonly|require|require_once|return|self|static|switch|throw|trait|try|unset|use|var|while|xor|yield|__halt_compiler)\b/i,lookbehind:!0}],"argument-name":{pattern:/([(,]\s*)\b[a-z_]\w*(?=\s*:(?!:))/i,lookbehind:!0},"class-name":[{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self|\s+static))\s+|\bcatch\s*\()\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/(\|\s*)\b[a-z_]\w*(?!\\)\b/i,greedy:!0,lookbehind:!0},{pattern:/\b[a-z_]\w*(?!\\)\b(?=\s*\|)/i,greedy:!0},{pattern:/(\|\s*)(?:\\?\b[a-z_]\w*)+\b/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(?:\\?\b[a-z_]\w*)+\b(?=\s*\|)/i,alias:"class-name-fully-qualified",greedy:!0,inside:{punctuation:/\\/}},{pattern:/(\b(?:extends|implements|instanceof|new(?!\s+self\b|\s+static\b))\s+|\bcatch\s*\()(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:"class-name-fully-qualified",greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*\$)/i,alias:"type-declaration",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-declaration"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/\b[a-z_]\w*(?=\s*::)/i,alias:"static-context",greedy:!0},{pattern:/(?:\\?\b[a-z_]\w*)+(?=\s*::)/i,alias:["class-name-fully-qualified","static-context"],greedy:!0,inside:{punctuation:/\\/}},{pattern:/([(,?]\s*)[a-z_]\w*(?=\s*\$)/i,alias:"type-hint",greedy:!0,lookbehind:!0},{pattern:/([(,?]\s*)(?:\\?\b[a-z_]\w*)+(?=\s*\$)/i,alias:["class-name-fully-qualified","type-hint"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}},{pattern:/(\)\s*:\s*(?:\?\s*)?)\b[a-z_]\w*(?!\\)\b/i,alias:"return-type",greedy:!0,lookbehind:!0},{pattern:/(\)\s*:\s*(?:\?\s*)?)(?:\\?\b[a-z_]\w*)+\b(?!\\)/i,alias:["class-name-fully-qualified","return-type"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:Kt,function:{pattern:/(^|[^\\\w])\\?[a-z_](?:[\w\\]*\w)?(?=\s*\()/i,lookbehind:!0,inside:{punctuation:/\\/}},property:{pattern:/(->\s*)\w+/,lookbehind:!0},number:nn,operator:Fe,punctuation:Vt};var kt={pattern:/\{\$(?:\{(?:\{[^{}]+\}|[^{}]+)\}|[^{}])+\}|(^|[^\\{])\$+(?:\w+(?:\[[^\r\n\[\]]+\]|->\w+)?)/,lookbehind:!0,inside:Oe.languages.php},Ie=[{pattern:/<<<'([^']+)'[\r\n](?:.*[\r\n])*?\1;/,alias:"nowdoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<'[^']+'|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<'?|[';]$/}}}},{pattern:/<<<(?:"([^"]+)"[\r\n](?:.*[\r\n])*?\1;|([a-z_]\w*)[\r\n](?:.*[\r\n])*?\2;)/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<<(?:"[^"]+"|[a-z_]\w*)|[a-z_]\w*;$/i,alias:"symbol",inside:{punctuation:/^<<<"?|[";]$/}},interpolation:kt}},{pattern:/`(?:\\[\s\S]|[^\\`])*`/,alias:"backtick-quoted-string",greedy:!0},{pattern:/'(?:\\[\s\S]|[^\\'])*'/,alias:"single-quoted-string",greedy:!0},{pattern:/"(?:\\[\s\S]|[^\\"])*"/,alias:"double-quoted-string",greedy:!0,inside:{interpolation:kt}}];Oe.languages.insertBefore("php","variable",{string:Ie,attribute:{pattern:/#\[(?:[^"'\/#]|\/(?![*/])|\/\/.*$|#(?!\[).*$|\/\*(?:[^*]|\*(?!\/))*\*\/|"(?:\\[\s\S]|[^\\"])*"|'(?:\\[\s\S]|[^\\'])*')+\](?=\s*[a-z$#])/im,greedy:!0,inside:{"attribute-content":{pattern:/^(#\[)[\s\S]+(?=\]$)/,lookbehind:!0,inside:{comment:fe,string:Ie,"attribute-class-name":[{pattern:/([^:]|^)\b[a-z_]\w*(?!\\)\b/i,alias:"class-name",greedy:!0,lookbehind:!0},{pattern:/([^:]|^)(?:\\?\b[a-z_]\w*)+/i,alias:["class-name","class-name-fully-qualified"],greedy:!0,lookbehind:!0,inside:{punctuation:/\\/}}],constant:Kt,number:nn,operator:Fe,punctuation:Vt}},delimiter:{pattern:/^#\[|\]$/,alias:"punctuation"}}}}),Oe.hooks.add("before-tokenize",function(R){if(/<\?/.test(R.code)){var Hn=/<\?(?:[^"'/#]|\/(?![*/])|("|')(?:\\[\s\S]|(?!\1)[^\\])*\1|(?:\/\/|#(?!\[))(?:[^?\n\r]|\?(?!>))*(?=$|\?>|[\r\n])|#\[|\/\*(?:[^*]|\*(?!\/))*(?:\*\/|$))*?(?:\?>|$)/g;Oe.languages["markup-templating"].buildPlaceholders(R,"php",Hn)}}),Oe.hooks.add("after-tokenize",function(R){Oe.languages["markup-templating"].tokenizePlaceholders(R,"php")})}(Ue),Ue.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Ue.languages.python["string-interpolation"].inside.interpolation.inside.rest=Ue.languages.python,Ue.languages.py=Ue.languages.python,function(Oe){Oe.languages.ruby=Oe.languages.extend("clike",{comment:{pattern:/#.*|^=begin\s[\s\S]*?^=end/m,greedy:!0},"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|for|if|in|include|module|new|next|nil|not|or|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|then|throw|undef|unless|until|when|while|yield)\b/,operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[+\-*/%<>!^&|=])=?|[?:]/,punctuation:/[(){}[\].,;]/}),Oe.languages.insertBefore("ruby","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var fe={pattern:/((?:^|[^\\])(?:\\{2})*)#\{(?:[^{}]|\{[^{}]*\})*\}/,lookbehind:!0,inside:{content:{pattern:/^(#\{)[\s\S]+(?=\}$)/,lookbehind:!0,inside:Oe.languages.ruby},delimiter:{pattern:/^#\{|\}$/,alias:"punctuation"}}};delete Oe.languages.ruby.function;var Kt="(?:"+[/([^a-zA-Z0-9\s{(\[<=])(?:(?!\1)[^\\]|\\[\s\S])*\1/.source,/\((?:[^()\\]|\\[\s\S]|\((?:[^()\\]|\\[\s\S])*\))*\)/.source,/\{(?:[^{}\\]|\\[\s\S]|\{(?:[^{}\\]|\\[\s\S])*\})*\}/.source,/\[(?:[^\[\]\\]|\\[\s\S]|\[(?:[^\[\]\\]|\\[\s\S])*\])*\]/.source,/<(?:[^<>\\]|\\[\s\S]|<(?:[^<>\\]|\\[\s\S])*>)*>/.source].join("|")+")",nn=/(?:"(?:\\.|[^"\\\r\n])*"|(?:\b[a-zA-Z_]\w*|[^\s\0-\x7F]+)[?!]?|\$.)/.source;Oe.languages.insertBefore("ruby","keyword",{"regex-literal":[{pattern:RegExp(/%r/.source+Kt+/[egimnosux]{0,6}/.source),greedy:!0,inside:{interpolation:fe,regex:/[\s\S]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\r\n\]]+\]|\\.|[^[/\\\r\n])+\/[egimnosux]{0,6}(?=\s*(?:$|[\r\n,.;})#]))/,lookbehind:!0,greedy:!0,inside:{interpolation:fe,regex:/[\s\S]+/}}],variable:/[@$]+[a-zA-Z_]\w*(?:[?!]|\b)/,symbol:[{pattern:RegExp(/(^|[^:]):/.source+nn),lookbehind:!0,greedy:!0},{pattern:RegExp(/([\r\n{(,][ \t]*)/.source+nn+/(?=:(?!:))/.source),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}}}),Oe.languages.insertBefore("ruby","string",{"string-literal":[{pattern:RegExp(/%[qQiIwWs]?/.source+Kt),greedy:!0,inside:{interpolation:fe,string:/[\s\S]+/}},{pattern:/("|')(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|(?!\1)[^\\#\r\n])*\1/,greedy:!0,inside:{interpolation:fe,string:/[\s\S]+/}},{pattern:/<<[-~]?([a-z_]\w*)[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?/}},interpolation:fe,string:/[\s\S]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'[\r\n](?:.*[\r\n])*?[\t ]*\1/i,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\b\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[\s\S]+/}}],"command-literal":[{pattern:RegExp(/%x/.source+Kt),greedy:!0,inside:{interpolation:fe,command:{pattern:/[\s\S]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\(?:\r\n|[\s\S])|[^\\`#\r\n])*`/,greedy:!0,inside:{interpolation:fe,command:{pattern:/[\s\S]+/,alias:"string"}}}]}),delete Oe.languages.ruby.string,Oe.languages.insertBefore("ruby","number",{builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z0-9_]*(?:[?!]|\b)/}),Oe.languages.rb=Oe.languages.ruby}(Ue),window.Prism=_,Ue}(void 0,void 0),hn=Le=>Me=>Me.options.get(Le),rn=Le=>{const Me=Le.options.register;Me("codesample_languages",{processor:"object[]"}),Me("codesample_global_prismjs",{processor:"boolean",default:!1})},Ut=hn("codesample_languages"),Ct=hn("codesample_global_prismjs"),Mt=Le=>Et.Prism&&Ct(Le)?Et.Prism:pt,cn=Le=>dn(Le)&&Le.nodeName==="PRE"&&Le.className.indexOf("language-")!==-1,Ze=Le=>{const Me=Le.selection?Le.selection.getNode():null;return cn(Me)?Qt.some(Me):Qt.none()},st=(Le,Me,Rt)=>{const _=Le.dom;Le.undoManager.transact(()=>{const he=Ze(Le);return Rt=Nt.DOM.encode(Rt),he.fold(()=>{Le.insertContent('<pre id="__new" class="language-'+Me+'">'+Rt+"</pre>");const Ue=_.select("#__new")[0];_.setAttrib(Ue,"id",null),Le.selection.select(Ue)},Ue=>{_.setAttrib(Ue,"class","language-"+Me),Ue.innerHTML=Rt,Mt(Le).highlightElement(Ue),Le.selection.select(Ue)})})},Te=Le=>Ze(Le).bind(Rt=>Qt.from(Rt.textContent)).getOr(""),Q=Le=>{const Me=[{text:"HTML/XML",value:"markup"},{text:"JavaScript",value:"javascript"},{text:"CSS",value:"css"},{text:"PHP",value:"php"},{text:"Ruby",value:"ruby"},{text:"Python",value:"python"},{text:"Java",value:"java"},{text:"C",value:"c"},{text:"C#",value:"csharp"},{text:"C++",value:"cpp"}],Rt=Ut(Le);return Rt||Me},ht=(Le,Me)=>Ze(Le).fold(()=>Me,_=>{const he=_.className.match(/language-(\w+)/);return he?he[1]:Me}),It=Le=>{const Me=Q(Le),Rt=xn(Me).fold(Sn(""),Ue=>Ue.value),_=ht(Le,Rt),he=Te(Le);Le.windowManager.open({title:"Insert/Edit Code Sample",size:"large",body:{type:"panel",items:[{type:"selectbox",name:"language",label:"Language",items:Me},{type:"textarea",name:"code",label:"Code view"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{language:_,code:he},onSubmit:Ue=>{const Oe=Ue.getData();st(Le,Oe.language,Oe.code),Ue.close()}})},yt=Le=>{Le.addCommand("codesample",()=>{const Me=Le.selection.getNode();Le.selection.isCollapsed()||cn(Me)?It(Le):Le.formatter.toggle("code")})},Ot=(Le=>Me=>Me.replace(Le,""))(/^\s+|\s+$/g);var Bn=tinymce.util.Tools.resolve("tinymce.util.Tools");const $t=Le=>{Le.on("PreProcess",Me=>{const Rt=Le.dom,_=Rt.select("pre[contenteditable=false]",Me.node);Bn.each(Bn.grep(_,cn),he=>{const Ue=he.textContent;Rt.setAttrib(he,"class",Ot(Rt.getAttrib(he,"class"))),Rt.setAttrib(he,"contentEditable",null),Rt.setAttrib(he,"data-mce-highlighted",null);let Oe;for(;Oe=he.firstChild;)he.removeChild(Oe);const fe=Rt.add(he,"code");fe.textContent=Ue})}),Le.on("SetContent",()=>{const Me=Le.dom,Rt=Bn.grep(Me.select("pre"),_=>cn(_)&&Me.getAttrib(_,"data-mce-highlighted")!=="true");Rt.length&&Le.undoManager.transact(()=>{Bn.each(Rt,_=>{var he;Bn.each(Me.select("br",_),Ue=>{Me.replace(Le.getDoc().createTextNode(`
`),Ue)}),_.innerHTML=Me.encode((he=_.textContent)!==null&&he!==void 0?he:""),Mt(Le).highlightElement(_),Me.setAttrib(_,"data-mce-highlighted",!0),_.className=Ot(_.className)})})}),Le.on("PreInit",()=>{Le.parser.addNodeFilter("pre",Me=>{var Rt;for(let _=0,he=Me.length;_<he;_++){const Ue=Me[_];((Rt=Ue.attr("class"))!==null&&Rt!==void 0?Rt:"").indexOf("language-")!==-1&&(Ue.attr("contenteditable","false"),Ue.attr("data-mce-highlighted","false"))}})})},ye=Le=>{const Me=Le.selection.getStart();return Le.dom.is(Me,'pre[class*="language-"]')},ee=Le=>{const Me=()=>Le.execCommand("codesample");Le.ui.registry.addToggleButton("codesample",{icon:"code-sample",tooltip:"Insert/edit code sample",onAction:Me,onSetup:Rt=>{const _=()=>{Rt.setActive(ye(Le))};return Le.on("NodeChange",_),()=>Le.off("NodeChange",_)}}),Le.ui.registry.addMenuItem("codesample",{text:"Code sample...",icon:"code-sample",onAction:Me})};var at=()=>{Ht.add("codesample",Le=>{rn(Le),$t(Le),ee(Le),yt(Le),Le.on("dblclick",Me=>{cn(Me.target)&&It(Le)})})};at()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=(Re,Ye,Bt)=>{var an;return Bt(Re,Ye.prototype)?!0:((an=Re.constructor)===null||an===void 0?void 0:an.name)===Ye.name},dn=Re=>{const Ye=typeof Re;return Re===null?"null":Ye==="object"&&Array.isArray(Re)?"array":Ye==="object"&&yn(Re,String,(Bt,an)=>an.isPrototypeOf(Bt))?"string":Ye},Sn=Re=>Ye=>dn(Ye)===Re,Qt=Re=>Ye=>typeof Ye===Re,Dn=Sn("string"),xn=Qt("boolean"),Nt=Re=>Re==null,Et=Re=>!Nt(Re),pt=Qt("function"),hn=Qt("number"),rn=(Re,Ye)=>Bt=>Re(Ye(Bt)),Ct=(Re=>()=>Re)(!1);class Mt{constructor(Ye,Bt){this.tag=Ye,this.value=Bt}static some(Ye){return new Mt(!0,Ye)}static none(){return Mt.singletonNone}fold(Ye,Bt){return this.tag?Bt(this.value):Ye()}isSome(){return this.tag}isNone(){return!this.tag}map(Ye){return this.tag?Mt.some(Ye(this.value)):Mt.none()}bind(Ye){return this.tag?Ye(this.value):Mt.none()}exists(Ye){return this.tag&&Ye(this.value)}forall(Ye){return!this.tag||Ye(this.value)}filter(Ye){return!this.tag||Ye(this.value)?this:Mt.none()}getOr(Ye){return this.tag?this.value:Ye}or(Ye){return this.tag?this:Ye}getOrThunk(Ye){return this.tag?this.value:Ye()}orThunk(Ye){return this.tag?this:Ye()}getOrDie(Ye){if(this.tag)return this.value;throw new Error(Ye??"Called getOrDie on None")}static from(Ye){return Et(Ye)?Mt.some(Ye):Mt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Ye){this.tag&&Ye(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Mt.singletonNone=new Mt(!1);const cn=(Re,Ye)=>{const Bt=Re.length,an=new Array(Bt);for(let An=0;An<Bt;An++){const Tn=Re[An];an[An]=Ye(Tn,An)}return an},Ze=(Re,Ye)=>{for(let Bt=0,an=Re.length;Bt<an;Bt++){const An=Re[Bt];Ye(An,Bt)}},st=(Re,Ye)=>{const Bt=[];for(let an=0,An=Re.length;an<An;an++){const Tn=Re[an];Ye(Tn,an)&&Bt.push(Tn)}return Bt},Te=9,Q=11,ht=1,It=3,yt=(Re,Ye)=>{const an=(Ye||document).createElement("div");if(an.innerHTML=Re,!an.hasChildNodes()||an.childNodes.length>1){const An="HTML does not have a single root node";throw console.error(An,Re),new Error(An)}return Bn(an.childNodes[0])},Y=(Re,Ye)=>{const an=(Ye||document).createElement(Re);return Bn(an)},Ot=(Re,Ye)=>{const an=(Ye||document).createTextNode(Re);return Bn(an)},Bn=Re=>{if(Re==null)throw new Error("Node cannot be null or undefined");return{dom:Re}},ye={fromHtml:yt,fromTag:Y,fromText:Ot,fromDom:Bn,fromPoint:(Re,Ye,Bt)=>Mt.from(Re.dom.elementFromPoint(Ye,Bt)).map(Bn)},ee=(Re,Ye)=>{const Bt=Re.dom;if(Bt.nodeType!==ht)return!1;{const an=Bt;if(an.matches!==void 0)return an.matches(Ye);if(an.msMatchesSelector!==void 0)return an.msMatchesSelector(Ye);if(an.webkitMatchesSelector!==void 0)return an.webkitMatchesSelector(Ye);if(an.mozMatchesSelector!==void 0)return an.mozMatchesSelector(Ye);throw new Error("Browser lacks native selectors")}};typeof window<"u"||Function("return this;")();const at=Re=>Re.dom.nodeName.toLowerCase(),Le=Re=>Re.dom.nodeType,Me=Re=>Ye=>Le(Ye)===Re,Rt=Me(ht),_=Me(It),he=Me(Te),Ue=Me(Q),Oe=Re=>Ye=>Rt(Ye)&&at(Ye)===Re,fe=Re=>ye.fromDom(Re.dom.ownerDocument),Kt=Re=>he(Re)?Re:fe(Re),nn=Re=>Mt.from(Re.dom.parentNode).map(ye.fromDom),Fe=Re=>cn(Re.dom.childNodes,ye.fromDom),Vt=(Re,Ye,Bt)=>{if(Dn(Bt)||xn(Bt)||hn(Bt))Re.setAttribute(Ye,Bt+"");else throw console.error("Invalid call to Attribute.set. Key ",Ye,":: Value ",Bt,":: Element ",Re),new Error("Attribute value was not simple")},kt=(Re,Ye,Bt)=>{Vt(Re.dom,Ye,Bt)},Ie=(Re,Ye)=>{Re.dom.removeAttribute(Ye)},R=Re=>Ue(Re)&&Et(Re.dom.host),Ae=pt(Element.prototype.attachShadow)&&pt(Node.prototype.getRootNode)?Re=>ye.fromDom(Re.dom.getRootNode()):Kt,Se=Re=>{const Ye=Ae(Re);return R(Ye)?Mt.some(Ye):Mt.none()},We=Re=>ye.fromDom(Re.dom.host),Ee=Re=>{const Ye=_(Re)?Re.dom.parentNode:Re.dom;if(Ye==null||Ye.ownerDocument===null)return!1;const Bt=Ye.ownerDocument;return Se(ye.fromDom(Ye)).fold(()=>Bt.body.contains(Ye),rn(Ee,We))},ae=(Re,Ye,Bt)=>{let an=Re.dom;const An=pt(Bt)?Bt:Ct;for(;an.parentNode;){an=an.parentNode;const Tn=ye.fromDom(an);if(Ye(Tn))return Mt.some(Tn);if(An(Tn))break}return Mt.none()},se=(Re,Ye,Bt)=>ae(Re,an=>ee(an,Ye),Bt),re=Re=>Re.style!==void 0&&pt(Re.style.getPropertyValue),H=(Re,Ye)=>{const Bt=Re.dom,An=window.getComputedStyle(Bt).getPropertyValue(Ye);return An===""&&!Ee(Re)?q(Bt,Ye):An},q=(Re,Ye)=>re(Re)?Re.style.getPropertyValue(Ye):"",z=Re=>H(Re,"direction")==="rtl"?"rtl":"ltr",Z=(Re,Ye)=>st(Fe(Re),Ye),Ne=(Re,Ye)=>Z(Re,Bt=>ee(Bt,Ye)),Pe=Re=>nn(Re).filter(Rt),Wt=(Re,Ye)=>(Ye?se(Re,"ol,ul"):Mt.some(Re)).getOr(Re),ot=Oe("li"),Qn=(Re,Ye)=>{const Bt=Re.selection.getSelectedBlocks();Bt.length>0&&(Ze(Bt,an=>{const An=ye.fromDom(an),Tn=ot(An),Do=Wt(An,Tn);Pe(Do).each(qe=>{if(z(qe)!==Ye?kt(Do,"dir",Ye):z(Do)!==Ye&&Ie(Do,"dir"),Tn){const sn=Ne(Do,"li[dir]");Ze(sn,on=>Ie(on,"dir"))}})}),Re.nodeChanged())},uo=Re=>{Re.addCommand("mceDirectionLTR",()=>{Qn(Re,"ltr")}),Re.addCommand("mceDirectionRTL",()=>{Qn(Re,"rtl")})},eo=(Re,Ye)=>Bt=>{const an=An=>{const Tn=ye.fromDom(An.element);Bt.setActive(z(Tn)===Ye)};return Re.on("NodeChange",an),()=>Re.off("NodeChange",an)},kn=Re=>{Re.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:()=>Re.execCommand("mceDirectionLTR"),onSetup:eo(Re,"ltr")}),Re.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:()=>Re.execCommand("mceDirectionRTL"),onSetup:eo(Re,"rtl")})};var ao=()=>{Ht.add("directionality",Re=>{uo(Re),kn(Re)})};ao()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=H=>q=>H===q,dn=yn(null),Sn=yn(void 0),Qt=H=>H==null,Dn=H=>!Qt(H),xn=()=>{},Et=(H=>()=>H)(!1);class pt{constructor(q,z){this.tag=q,this.value=z}static some(q){return new pt(!0,q)}static none(){return pt.singletonNone}fold(q,z){return this.tag?z(this.value):q()}isSome(){return this.tag}isNone(){return!this.tag}map(q){return this.tag?pt.some(q(this.value)):pt.none()}bind(q){return this.tag?q(this.value):pt.none()}exists(q){return this.tag&&q(this.value)}forall(q){return!this.tag||q(this.value)}filter(q){return!this.tag||q(this.value)?this:pt.none()}getOr(q){return this.tag?this.value:q}or(q){return this.tag?this:q}getOrThunk(q){return this.tag?this.value:q()}orThunk(q){return this.tag?this:q()}getOrDie(q){if(this.tag)return this.value;throw new Error(q??"Called getOrDie on None")}static from(q){return Dn(q)?pt.some(q):pt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(q){this.tag&&q(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}pt.singletonNone=new pt(!1);const hn=(H,q)=>{for(let z=0,Z=H.length;z<Z;z++){const Ne=H[z];if(q(Ne,z))return!0}return!1},rn=(H,q)=>{const z=H.length,Z=new Array(z);for(let Ne=0;Ne<z;Ne++){const Pe=H[Ne];Z[Ne]=q(Pe,Ne)}return Z},Ut=(H,q)=>{for(let z=0,Z=H.length;z<Z;z++){const Ne=H[z];q(Ne,z)}},Ct=H=>{let q=H;return{get:()=>q,set:Ne=>{q=Ne}}},Mt=(H,q)=>{let z=null;const Z=()=>{dn(z)||(clearTimeout(z),z=null)};return{cancel:Z,throttle:(...Pe)=>{Z(),z=setTimeout(()=>{z=null,H.apply(null,Pe)},q)}}},cn=(H,q)=>{H.insertContent(q)},Ze=Object.keys,st=Object.hasOwnProperty,Te=(H,q)=>{const z=Ze(H);for(let Z=0,Ne=z.length;Z<Ne;Z++){const Pe=z[Z],Wt=H[Pe];q(Wt,Pe)}},Q=(H,q)=>ht(H,(z,Z)=>({k:Z,v:q(z,Z)})),ht=(H,q)=>{const z={};return Te(H,(Z,Ne)=>{const Pe=q(Z,Ne);z[Pe.k]=Pe.v}),z},It=(H,q)=>st.call(H,q),Ot=(H=>(...q)=>{if(q.length===0)throw new Error("Can't merge zero objects");const z={};for(let Z=0;Z<q.length;Z++){const Ne=q[Z];for(const Pe in Ne)It(Ne,Pe)&&(z[Pe]=H(z[Pe],Ne[Pe]))}return z})((H,q)=>q),Bn=H=>{const q=Ct(pt.none()),z=()=>q.get().each(H);return{clear:()=>{z(),q.set(pt.none())},isSet:()=>q.get().isSome(),get:()=>q.get(),set:ot=>{z(),q.set(pt.some(ot))}}},$t=()=>{const H=Bn(xn);return{...H,on:z=>H.get().each(z)}},ye=(H,q,z)=>q===""||H.length>=q.length&&H.substr(z,z+q.length)===q,ee=(H,q,z=0,Z)=>{const Ne=H.indexOf(q,z);return Ne!==-1?Sn(Z)?!0:Ne+q.length<=Z:!1},at=(H,q)=>ye(H,q,0);var Le=tinymce.util.Tools.resolve("tinymce.Resource");const Me="tinymce.plugins.emoticons",Rt=H=>q=>q.options.get(H),_=(H,q)=>{const z=H.options.register;z("emoticons_database",{processor:"string",default:"emojis"}),z("emoticons_database_url",{processor:"string",default:`${q}/js/${he(H)}${H.suffix}.js`}),z("emoticons_database_id",{processor:"string",default:Me}),z("emoticons_append",{processor:"object",default:{}}),z("emoticons_images_url",{processor:"string",default:"https://twemoji.maxcdn.com/v/13.0.1/72x72/"})},he=Rt("emoticons_database"),Ue=Rt("emoticons_database_url"),Oe=Rt("emoticons_database_id"),fe=Rt("emoticons_append"),Kt=Rt("emoticons_images_url"),nn="All",Fe={symbols:"Symbols",people:"People",animals_and_nature:"Animals and Nature",food_and_drink:"Food and Drink",activity:"Activity",travel_and_places:"Travel and Places",objects:"Objects",flags:"Flags",user:"User Defined"},Vt=(H,q)=>It(H,q)?H[q]:q,kt=H=>{const q=fe(H);return Q(q,z=>({keywords:[],category:"user",...z}))},Ie=(H,q,z)=>{const Z=$t(),Ne=$t(),Pe=Kt(H),Wt=Re=>at(Re.char,"<img")?Re.char.replace(/src="([^"]+)"/,(Ye,Bt)=>`src="${Pe}${Bt}"`):Re.char,ot=Re=>{const Ye={},Bt=[];Te(Re,(an,An)=>{const Tn={title:An,keywords:an.keywords,char:Wt(an),category:Vt(Fe,an.category)},Do=Ye[Tn.category]!==void 0?Ye[Tn.category]:[];Ye[Tn.category]=Do.concat([Tn]),Bt.push(Tn)}),Z.set(Ye),Ne.set(Bt)};H.on("init",()=>{Le.load(z,q).then(Re=>{const Ye=kt(H);ot(Ot(Re,Ye))},Re=>{console.log(`Failed to load emojis: ${Re}`),Z.set({}),Ne.set([])})});const Qn=Re=>Re===nn?uo():Z.get().bind(Ye=>pt.from(Ye[Re])).getOr([]),uo=()=>Ne.get().getOr([]),eo=()=>[nn].concat(Ze(Z.get().getOr({}))),kn=()=>ao()?Promise.resolve(!0):new Promise((Re,Ye)=>{let Bt=15;const an=setInterval(()=>{ao()?(clearInterval(an),Re(!0)):(Bt--,Bt<0&&(console.log("Could not load emojis from url: "+q),clearInterval(an),Ye(!1)))},100)}),ao=()=>Z.isSet()&&Ne.isSet();return{listCategories:eo,hasLoaded:ao,waitForLoad:kn,listAll:uo,listCategory:Qn}},R=(H,q)=>ee(H.title.toLowerCase(),q)||hn(H.keywords,z=>ee(z.toLowerCase(),q)),Hn=(H,q,z)=>{const Z=[],Ne=q.toLowerCase(),Pe=z.fold(()=>Et,Wt=>ot=>ot>=Wt);for(let Wt=0;Wt<H.length&&!((q.length===0||R(H[Wt],Ne))&&(Z.push({value:H[Wt].char,text:H[Wt].title,icon:H[Wt].char}),Pe(Z.length)));Wt++);return Z},Ae="pattern",Se=(H,q)=>{const z={pattern:"",results:Hn(q.listAll(),"",pt.some(300))},Z=Ct(nn),Ne=eo=>{const kn=eo.getData(),ao=Z.get(),Re=q.listCategory(ao),Ye=Hn(Re,kn[Ae],ao===nn?pt.some(300):pt.none());eo.setData({results:Ye})},Pe=Mt(eo=>{Ne(eo)},200),Wt={label:"Search",type:"input",name:Ae},ot={type:"collection",name:"results"},Qn=()=>({title:"Emojis",size:"normal",body:{type:"tabpanel",tabs:rn(q.listCategories(),kn=>({title:kn,name:kn,items:[Wt,ot]}))},initialData:z,onTabChange:(kn,ao)=>{Z.set(ao.newTabName),Pe.throttle(kn)},onChange:Pe.throttle,onAction:(kn,ao)=>{ao.name==="results"&&(cn(H,ao.value),kn.close())},buttons:[{type:"cancel",text:"Close",primary:!0}]}),uo=H.windowManager.open(Qn());uo.focus(Ae),q.hasLoaded()||(uo.block("Loading emojis..."),q.waitForLoad().then(()=>{uo.redial(Qn()),Pe.throttle(uo),uo.focus(Ae),uo.unblock()}).catch(eo=>{uo.redial({title:"Emojis",body:{type:"panel",items:[{type:"alertbanner",level:"error",icon:"warning",text:"Could not load emojis"}]},buttons:[{type:"cancel",text:"Close",primary:!0}],initialData:{pattern:"",results:[]}}),uo.focus(Ae),uo.unblock()}))},We=(H,q)=>{H.addCommand("mceEmoticons",()=>Se(H,q))},Ee=H=>{H.on("PreInit",()=>{H.parser.addAttributeFilter("data-emoticon",q=>{Ut(q,z=>{z.attr("data-mce-resize","false"),z.attr("data-mce-placeholder","1")})})})},ae=(H,q)=>{H.ui.registry.addAutocompleter("emoticons",{trigger:":",columns:"auto",minChars:2,fetch:(z,Z)=>q.waitForLoad().then(()=>{const Ne=q.listAll();return Hn(Ne,z,pt.some(Z))}),onAction:(z,Z,Ne)=>{H.selection.setRng(Z),H.insertContent(Ne),z.hide()}})},se=H=>{const q=()=>H.execCommand("mceEmoticons");H.ui.registry.addButton("emoticons",{tooltip:"Emojis",icon:"emoji",onAction:q}),H.ui.registry.addMenuItem("emoticons",{text:"Emojis...",icon:"emoji",onAction:q})};var re=()=>{Ht.add("emoticons",(H,q)=>{_(H,q);const z=Ue(H),Z=Oe(H),Ne=Ie(H,z,Z);We(H,Ne),se(H),ae(H,Ne),Ee(H)})};re()})();(function(){const Ht=ne=>{let me=ne;return{get:()=>me,set:Un=>{me=Un}}};var yn=tinymce.util.Tools.resolve("tinymce.PluginManager");const dn=ne=>({isFullscreen:()=>ne.get()!==null}),Sn=(ne,me,Qe)=>{var dt;return Qe(ne,me.prototype)?!0:((dt=ne.constructor)===null||dt===void 0?void 0:dt.name)===me.name},Qt=ne=>{const me=typeof ne;return ne===null?"null":me==="object"&&Array.isArray(ne)?"array":me==="object"&&Sn(ne,String,(Qe,dt)=>dt.isPrototypeOf(Qe))?"string":me},Dn=ne=>me=>Qt(me)===ne,xn=ne=>me=>typeof me===ne,Nt=ne=>me=>ne===me,Et=Dn("string"),pt=Dn("array"),hn=Nt(null),rn=xn("boolean"),Ut=Nt(void 0),Ct=ne=>ne==null,Mt=ne=>!Ct(ne),cn=xn("function"),Ze=xn("number"),st=()=>{},Te=(ne,me)=>(...Qe)=>ne(me.apply(null,Qe)),Q=(ne,me)=>Qe=>ne(me(Qe)),ht=ne=>()=>ne;function It(ne,...me){return(...Qe)=>{const dt=me.concat(Qe);return ne.apply(null,dt)}}const yt=ht(!1),Y=ht(!0);class Ot{constructor(me,Qe){this.tag=me,this.value=Qe}static some(me){return new Ot(!0,me)}static none(){return Ot.singletonNone}fold(me,Qe){return this.tag?Qe(this.value):me()}isSome(){return this.tag}isNone(){return!this.tag}map(me){return this.tag?Ot.some(me(this.value)):Ot.none()}bind(me){return this.tag?me(this.value):Ot.none()}exists(me){return this.tag&&me(this.value)}forall(me){return!this.tag||me(this.value)}filter(me){return!this.tag||me(this.value)?this:Ot.none()}getOr(me){return this.tag?this.value:me}or(me){return this.tag?this:me}getOrThunk(me){return this.tag?this.value:me()}orThunk(me){return this.tag?this:me()}getOrDie(me){if(this.tag)return this.value;throw new Error(me??"Called getOrDie on None")}static from(me){return Mt(me)?Ot.some(me):Ot.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(me){this.tag&&me(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Ot.singletonNone=new Ot(!1);const Bn=ne=>{const me=Ht(Ot.none()),Qe=()=>me.get().each(ne);return{clear:()=>{Qe(),me.set(Ot.none())},isSet:()=>me.get().isSome(),get:()=>me.get(),set:Yo=>{Qe(),me.set(Ot.some(Yo))}}},$t=()=>Bn(ne=>ne.unbind()),ye=()=>{const ne=Bn(st);return{...ne,on:Qe=>ne.get().each(Qe)}},ee=(ne,me)=>{let Qe=null;return{cancel:()=>{hn(Qe)||(clearTimeout(Qe),Qe=null)},throttle:(...so)=>{hn(Qe)&&(Qe=setTimeout(()=>{Qe=null,ne.apply(null,so)},me))}}},at=Array.prototype.push,Le=(ne,me)=>{const Qe=ne.length,dt=new Array(Qe);for(let Un=0;Un<Qe;Un++){const so=ne[Un];dt[Un]=me(so,Un)}return dt},Me=(ne,me)=>{for(let Qe=0,dt=ne.length;Qe<dt;Qe++){const Un=ne[Qe];me(Un,Qe)}},Rt=(ne,me)=>{const Qe=[];for(let dt=0,Un=ne.length;dt<Un;dt++){const so=ne[dt];me(so,dt)&&Qe.push(so)}return Qe},_=(ne,me,Qe)=>{for(let dt=0,Un=ne.length;dt<Un;dt++){const so=ne[dt];if(me(so,dt))return Ot.some(so);if(Qe(so,dt))break}return Ot.none()},he=(ne,me)=>_(ne,me,yt),Ue=ne=>{const me=[];for(let Qe=0,dt=ne.length;Qe<dt;++Qe){if(!pt(ne[Qe]))throw new Error("Arr.flatten item "+Qe+" was not an array, input: "+ne);at.apply(me,ne[Qe])}return me},Oe=(ne,me)=>Ue(Le(ne,me)),fe=(ne,me)=>me>=0&&me<ne.length?Ot.some(ne[me]):Ot.none(),Kt=ne=>fe(ne,0),nn=(ne,me)=>{for(let Qe=0;Qe<ne.length;Qe++){const dt=me(ne[Qe],Qe);if(dt.isSome())return dt}return Ot.none()},Fe=Object.keys,Vt=(ne,me)=>{const Qe=Fe(ne);for(let dt=0,Un=Qe.length;dt<Un;dt++){const so=Qe[dt],Ys=ne[so];me(Ys,so)}},kt=(ne,me,Qe=0,dt)=>{const Un=ne.indexOf(me,Qe);return Un!==-1?Ut(dt)?!0:Un+me.length<=dt:!1},Ie=ne=>ne.style!==void 0&&cn(ne.style.getPropertyValue),R=(ne,me)=>{const dt=(me||document).createElement("div");if(dt.innerHTML=ne,!dt.hasChildNodes()||dt.childNodes.length>1){const Un="HTML does not have a single root node";throw console.error(Un,ne),new Error(Un)}return Se(dt.childNodes[0])},Hn=(ne,me)=>{const dt=(me||document).createElement(ne);return Se(dt)},Ae=(ne,me)=>{const dt=(me||document).createTextNode(ne);return Se(dt)},Se=ne=>{if(ne==null)throw new Error("Node cannot be null or undefined");return{dom:ne}},Ee={fromHtml:R,fromTag:Hn,fromText:Ae,fromDom:Se,fromPoint:(ne,me,Qe)=>Ot.from(ne.dom.elementFromPoint(me,Qe)).map(Se)};typeof window<"u"||Function("return this;")();const ae=9,se=11,re=1,H=3,q=ne=>ne.dom.nodeType,z=ne=>me=>q(me)===ne,Z=z(re),Ne=z(H),Pe=z(ae),Wt=z(se),ot=(ne,me)=>{const Qe=ne.dom;if(Qe.nodeType!==re)return!1;{const dt=Qe;if(dt.matches!==void 0)return dt.matches(me);if(dt.msMatchesSelector!==void 0)return dt.msMatchesSelector(me);if(dt.webkitMatchesSelector!==void 0)return dt.webkitMatchesSelector(me);if(dt.mozMatchesSelector!==void 0)return dt.mozMatchesSelector(me);throw new Error("Browser lacks native selectors")}},Qn=ne=>ne.nodeType!==re&&ne.nodeType!==ae&&ne.nodeType!==se||ne.childElementCount===0,uo=(ne,me)=>{const Qe=me===void 0?document:me.dom;return Qn(Qe)?[]:Le(Qe.querySelectorAll(ne),Ee.fromDom)},eo=(ne,me)=>ne.dom===me.dom,kn=ne=>Ee.fromDom(ne.dom.ownerDocument),ao=ne=>Pe(ne)?ne:kn(ne),Re=ne=>Ot.from(ne.dom.parentNode).map(Ee.fromDom),Ye=(ne,me)=>{const Qe=cn(me)?me:yt;let dt=ne.dom;const Un=[];for(;dt.parentNode!==null&&dt.parentNode!==void 0;){const so=dt.parentNode,Ys=Ee.fromDom(so);if(Un.push(Ys),Qe(Ys)===!0)break;dt=so}return Un},Bt=ne=>{const me=Qe=>Rt(Qe,dt=>!eo(ne,dt));return Re(ne).map(an).map(me).getOr([])},an=ne=>Le(ne.dom.childNodes,Ee.fromDom),An=ne=>Wt(ne)&&Mt(ne.dom.host),Tn=cn(Element.prototype.attachShadow)&&cn(Node.prototype.getRootNode),Do=ht(Tn),ks=Tn?ne=>Ee.fromDom(ne.dom.getRootNode()):ao,qe=ne=>{const me=ks(ne);return An(me)?Ot.some(me):Ot.none()},ze=ne=>Ee.fromDom(ne.dom.host),sn=ne=>{if(Do()&&Mt(ne.target)){const me=Ee.fromDom(ne.target);if(Z(me)&&on(me)&&ne.composed&&ne.composedPath){const Qe=ne.composedPath();if(Qe)return Kt(Qe)}}return Ot.from(ne.target)},on=ne=>Mt(ne.dom.shadowRoot),qt=ne=>{const me=Ne(ne)?ne.dom.parentNode:ne.dom;if(me==null||me.ownerDocument===null)return!1;const Qe=me.ownerDocument;return qe(Ee.fromDom(me)).fold(()=>Qe.body.contains(me),Q(qt,ze))},Kn=ne=>{const me=ne.dom.body;if(me==null)throw new Error("Body is not available yet");return Ee.fromDom(me)},Ts=(ne,me,Qe)=>{if(Et(Qe)||rn(Qe)||Ze(Qe))ne.setAttribute(me,Qe+"");else throw console.error("Invalid call to Attribute.set. Key ",me,":: Value ",Qe,":: Element ",ne),new Error("Attribute value was not simple")},_r=(ne,me,Qe)=>{Ts(ne.dom,me,Qe)},ga=(ne,me)=>{const Qe=ne.dom.getAttribute(me);return Qe===null?void 0:Qe},bs=(ne,me)=>{ne.dom.removeAttribute(me)},wc=(ne,me,Qe)=>{if(!Et(Qe))throw console.error("Invalid call to CSS.set. Property ",me,":: Value ",Qe,":: Element ",ne),new Error("CSS value must be a string: "+Qe);Ie(ne)&&ne.style.setProperty(me,Qe)},ys=(ne,me)=>{const Qe=ne.dom;Vt(me,(dt,Un)=>{wc(Qe,Un,dt)})},cs=(ne,me)=>{const Qe=ne.dom,Un=window.getComputedStyle(Qe).getPropertyValue(me);return Un===""&&!qt(ne)?go(Qe,me):Un},go=(ne,me)=>Ie(ne)?ne.style.getPropertyValue(me):"",gr=(ne,me,Qe,dt,Un,so,Ys)=>({target:ne,x:me,y:Qe,stop:dt,prevent:Un,kill:so,raw:Ys}),Gr=ne=>{const me=Ee.fromDom(sn(ne).getOr(ne.target)),Qe=()=>ne.stopPropagation(),dt=()=>ne.preventDefault(),Un=Te(dt,Qe);return gr(me,ne.clientX,ne.clientY,Qe,dt,Un,ne)},Hs=(ne,me)=>Qe=>{ne(Qe)&&me(Gr(Qe))},ha=(ne,me,Qe,dt,Un)=>{const so=Hs(Qe,dt);return ne.dom.addEventListener(me,so,Un),{unbind:It(cc,ne,me,so,Un)}},qr=(ne,me,Qe,dt)=>ha(ne,me,Qe,dt,!1),cc=(ne,me,Qe,dt)=>{ne.dom.removeEventListener(me,Qe,dt)},Qs=Y,_a=(ne,me,Qe)=>qr(ne,me,Qs,Qe),we=ne=>{let me=!1,Qe;return(...dt)=>(me||(me=!0,Qe=ne.apply(null,dt)),Qe)},K=(ne,me,Qe,dt)=>{const Un=ne.isiOS()&&/ipad/i.test(Qe)===!0,so=ne.isiOS()&&!Un,Ys=ne.isiOS()||ne.isAndroid(),Yo=Ys||dt("(pointer:coarse)"),Ui=Un||!so&&Ys&&dt("(min-device-width:768px)"),Qo=so||Ys&&!Ui,Ds=me.isSafari()&&ne.isiOS()&&/safari/i.test(Qe)===!1,Aa=!Qo&&!Ui&&!Ds;return{isiPad:ht(Un),isiPhone:ht(so),isTablet:ht(Ui),isPhone:ht(Qo),isTouch:ht(Yo),isAndroid:ne.isAndroid,isiOS:ne.isiOS,isWebView:ht(Ds),isDesktop:ht(Aa)}},ct=(ne,me)=>{for(let Qe=0;Qe<ne.length;Qe++){const dt=ne[Qe];if(dt.test(me))return dt}},vt=(ne,me)=>{const Qe=ct(ne,me);if(!Qe)return{major:0,minor:0};const dt=Un=>Number(me.replace(Qe,"$"+Un));return In(dt(1),dt(2))},jn=(ne,me)=>{const Qe=String(me).toLowerCase();return ne.length===0?to():vt(ne,Qe)},to=()=>In(0,0),In=(ne,me)=>({major:ne,minor:me}),is={nu:In,detect:jn,unknown:to},ts=(ne,me)=>nn(me.brands,Qe=>{const dt=Qe.brand.toLowerCase();return he(ne,Un=>{var so;return dt===((so=Un.brand)===null||so===void 0?void 0:so.toLowerCase())}).map(Un=>({current:Un.name,version:is.nu(parseInt(Qe.version,10),0)}))}),xo=(ne,me)=>{const Qe=String(me).toLowerCase();return he(ne,dt=>dt.search(Qe))},ir=(ne,me)=>xo(ne,me).map(Qe=>{const dt=is.detect(Qe.versionRegexes,me);return{current:Qe.name,version:dt}}),Lt=(ne,me)=>xo(ne,me).map(Qe=>{const dt=is.detect(Qe.versionRegexes,me);return{current:Qe.name,version:dt}}),ge=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,be=ne=>me=>kt(me,ne),_t=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:ne=>kt(ne,"edge/")&&kt(ne,"chrome")&&kt(ne,"safari")&&kt(ne,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,ge],search:ne=>kt(ne,"chrome")&&!kt(ne,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:ne=>kt(ne,"msie")||kt(ne,"trident")},{name:"Opera",versionRegexes:[ge,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:be("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:be("firefox")},{name:"Safari",versionRegexes:[ge,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:ne=>(kt(ne,"safari")||kt(ne,"mobile/"))&&kt(ne,"applewebkit")}],tn=[{name:"Windows",search:be("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:ne=>kt(ne,"iphone")||kt(ne,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:be("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:be("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:be("linux"),versionRegexes:[]},{name:"Solaris",search:be("sunos"),versionRegexes:[]},{name:"FreeBSD",search:be("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:be("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],un={browsers:ht(_t),oses:ht(tn)},Pn="Edge",pn="Chromium",zn="IE",oo="Opera",wo="Firefox",Os="Safari",hr=()=>qo({current:void 0,version:is.unknown()}),qo=ne=>{const me=ne.current,Qe=ne.version,dt=Un=>()=>me===Un;return{current:me,version:Qe,isEdge:dt(Pn),isChromium:dt(pn),isIE:dt(zn),isOpera:dt(oo),isFirefox:dt(wo),isSafari:dt(Os)}},Xc={unknown:hr,nu:qo,edge:ht(Pn),chromium:ht(pn),ie:ht(zn),opera:ht(oo),firefox:ht(wo),safari:ht(Os)},ls="Windows",Cs="iOS",xs="Android",Lr="Linux",Br="macOS",Fc="Solaris",La="FreeBSD",Jc="ChromeOS",_i=()=>Qc({current:void 0,version:is.unknown()}),Qc=ne=>{const me=ne.current,Qe=ne.version,dt=Un=>()=>me===Un;return{current:me,version:Qe,isWindows:dt(ls),isiOS:dt(Cs),isAndroid:dt(xs),isMacOS:dt(Br),isLinux:dt(Lr),isSolaris:dt(Fc),isFreeBSD:dt(La),isChromeOS:dt(Jc)}},zi={unknown:_i,nu:Qc,windows:ht(ls),ios:ht(Cs),android:ht(xs),linux:ht(Lr),macos:ht(Br),solaris:ht(Fc),freebsd:ht(La),chromeos:ht(Jc)},gi={detect:(ne,me,Qe)=>{const dt=un.browsers(),Un=un.oses(),so=me.bind(Ui=>ts(dt,Ui)).orThunk(()=>ir(dt,ne)).fold(Xc.unknown,Xc.nu),Ys=Lt(Un,ne).fold(zi.unknown,zi.nu),Yo=K(Ys,so,ne,Qe);return{browser:so,os:Ys,deviceType:Yo}}},pa=ne=>window.matchMedia(ne).matches;let ic=we(()=>gi.detect(navigator.userAgent,Ot.from(navigator.userAgentData),pa));const hi=()=>ic(),Ic=(ne,me)=>({left:ne,top:me,translate:(dt,Un)=>Ic(ne+dt,me+Un)}),aa=Ic,Ai=ne=>{const me=ne!==void 0?ne.dom:document,Qe=me.body.scrollLeft||me.documentElement.scrollLeft,dt=me.body.scrollTop||me.documentElement.scrollTop;return aa(Qe,dt)},Cc=ne=>{const me=ne===void 0?window:ne;return hi().browser.isFirefox()?Ot.none():Ot.from(me.visualViewport)},Vi=(ne,me,Qe,dt)=>({x:ne,y:me,width:Qe,height:dt,right:ne+Qe,bottom:me+dt}),er=ne=>{const me=ne===void 0?window:ne,Qe=me.document,dt=Ai(Ee.fromDom(Qe));return Cc(me).fold(()=>{const Un=me.document.documentElement,so=Un.clientWidth,Ys=Un.clientHeight;return Vi(dt.left,dt.top,so,Ys)},Un=>Vi(Math.max(Un.pageLeft,dt.left),Math.max(Un.pageTop,dt.top),Un.width,Un.height))},ba=(ne,me,Qe)=>Cc(Qe).map(dt=>{const Un=so=>me(Gr(so));return dt.addEventListener(ne,Un),{unbind:()=>dt.removeEventListener(ne,Un)}}).getOrThunk(()=>({unbind:st}));var X=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),xe=tinymce.util.Tools.resolve("tinymce.Env");const He=(ne,me)=>{ne.dispatch("FullscreenStateChanged",{state:me}),ne.dispatch("ResizeEditor")},wt=ne=>me=>me.options.get(ne),Gt=ne=>{const me=ne.options.register;me("fullscreen_native",{processor:"boolean",default:!1})},mo=wt("fullscreen_native"),Ko=ne=>{const me=Ee.fromDom(ne.getElement());return qe(me).map(ze).getOrThunk(()=>Kn(kn(me)))},Ar=ne=>ne.fullscreenElement!==void 0?ne.fullscreenElement:ne.msFullscreenElement!==void 0?ne.msFullscreenElement:ne.webkitFullscreenElement!==void 0?ne.webkitFullscreenElement:null,zs=()=>document.fullscreenElement!==void 0?"fullscreenchange":document.msFullscreenElement!==void 0?"MSFullscreenChange":document.webkitFullscreenElement!==void 0?"webkitfullscreenchange":"fullscreenchange",$r=ne=>{const me=ne.dom;me.requestFullscreen?me.requestFullscreen():me.msRequestFullscreen?me.msRequestFullscreen():me.webkitRequestFullScreen&&me.webkitRequestFullScreen()},Or=ne=>{const me=ne.dom;me.exitFullscreen?me.exitFullscreen():me.msExitFullscreen?me.msExitFullscreen():me.webkitCancelFullScreen&&me.webkitCancelFullScreen()},Pr=ne=>ne.dom===Ar(kn(ne).dom),Ha=(ne,me,Qe)=>Rt(Ye(ne,Qe),me),Kr=(ne,me)=>Rt(Bt(ne),me),ta=ne=>uo(ne),ei=(ne,me,Qe)=>Ha(ne,dt=>ot(dt,me),Qe),ti=(ne,me)=>Kr(ne,Qe=>ot(Qe,me)),ko="data-ephox-mobile-fullscreen-style",us="display:none!important;",ar="position:absolute!important;",$="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",J="background-color:rgb(255,255,255)!important;",de=xe.os.isAndroid(),Xe=ne=>{const me=cs(ne,"background-color");return me!==void 0&&me!==""?"background-color:"+me+"!important":J},Nn=(ne,me,Qe)=>{const dt=Qo=>ti(Qo,"*:not(.tox-silver-sink)"),Un=Qo=>Ds=>{const Aa=ga(Ds,"style"),lc=Aa===void 0?"no-styles":Aa.trim();lc!==Qo&&(_r(Ds,ko,lc),ys(Ds,ne.parseStyle(Qo)))},so=ei(me,"*"),Ys=Oe(so,dt),Yo=Xe(Qe);Me(Ys,Un(us)),Me(so,Un(ar+$+Yo)),Un((de===!0?"":ar)+$+Yo)(me)},Mo=ne=>{const me=ta("["+ko+"]");Me(me,Qe=>{const dt=ga(Qe,ko);dt&&dt!=="no-styles"?ys(Qe,ne.parseStyle(dt)):bs(Qe,"style"),bs(Qe,ko)})},Vn=X.DOM,Hr=()=>er(window),pr=ne=>window.scrollTo(ne.x,ne.y),Dt=Cc().fold(()=>({bind:st,unbind:st}),ne=>{const me=ye(),Qe=$t(),dt=$t(),Un=()=>{document.body.scrollTop=0,document.documentElement.scrollTop=0},so=()=>{window.requestAnimationFrame(()=>{me.on(Qo=>ys(Qo,{top:ne.offsetTop+"px",left:ne.offsetLeft+"px",height:ne.height+"px",width:ne.width+"px"}))})},Ys=ee(()=>{Un(),so()},50);return{bind:Qo=>{me.set(Qo),Ys.throttle(),Qe.set(ba("resize",Ys.throttle)),dt.set(ba("scroll",Ys.throttle))},unbind:()=>{me.on(()=>{Qe.clear(),dt.clear()}),me.clear()}}}),ca=(ne,me)=>{const Qe=document.body,dt=document.documentElement,Un=ne.getContainer(),so=Ee.fromDom(Un),Ys=Ko(ne),Yo=me.get(),Ui=Ee.fromDom(ne.getBody()),Qo=xe.deviceType.isTouch(),Ds=Un.style,Aa=ne.iframeElement,lc=Aa==null?void 0:Aa.style,Wi=rr=>{rr(Qe,"tox-fullscreen"),rr(dt,"tox-fullscreen"),rr(Un,"tox-fullscreen"),qe(so).map(Rs=>ze(Rs).dom).each(Rs=>{rr(Rs,"tox-fullscreen"),rr(Rs,"tox-shadowhost")})},br=()=>{Qo&&Mo(ne.dom),Wi(Vn.removeClass),Dt.unbind(),Ot.from(me.get()).each(rr=>rr.fullscreenChangeHandler.unbind())};if(Yo)Yo.fullscreenChangeHandler.unbind(),mo(ne)&&Pr(Ys)&&Or(kn(Ys)),lc.width=Yo.iframeWidth,lc.height=Yo.iframeHeight,Ds.width=Yo.containerWidth,Ds.height=Yo.containerHeight,Ds.top=Yo.containerTop,Ds.left=Yo.containerLeft,br(),pr(Yo.scrollPos),me.set(null),He(ne,!1),ne.off("remove",br);else{const rr=_a(kn(Ys),zs(),zr=>{mo(ne)&&!Pr(Ys)&&me.get()!==null&&ca(ne,me)}),Rs={scrollPos:Hr(),containerWidth:Ds.width,containerHeight:Ds.height,containerTop:Ds.top,containerLeft:Ds.left,iframeWidth:lc.width,iframeHeight:lc.height,fullscreenChangeHandler:rr};Qo&&Nn(ne.dom,so,Ui),lc.width=lc.height="100%",Ds.width=Ds.height="",Wi(Vn.addClass),Dt.bind(so),ne.on("remove",br),me.set(Rs),mo(ne)&&$r(Ys),He(ne,!0)}},tr=(ne,me)=>{ne.addCommand("mceFullScreen",()=>{ca(ne,me)})},Zr=(ne,me)=>Qe=>{Qe.setActive(me.get()!==null);const dt=Un=>Qe.setActive(Un.state);return ne.on("FullscreenStateChanged",dt),()=>ne.off("FullscreenStateChanged",dt)},sl=(ne,me)=>{const Qe=()=>ne.execCommand("mceFullScreen");ne.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",icon:"fullscreen",shortcut:"Meta+Shift+F",onAction:Qe,onSetup:Zr(ne,me)}),ne.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:Qe,onSetup:Zr(ne,me)})};var Po=()=>{yn.add("fullscreen",ne=>{const me=Ht(null);return ne.inline||(Gt(ne),tr(ne,me),sl(ne,me),ne.addShortcut("Meta+Shift+F","","mceFullScreen")),dn(me)})};Po()})();(function(){const Ht=q=>{let z=q;return{get:()=>z,set:Pe=>{z=Pe}}};var yn=tinymce.util.Tools.resolve("tinymce.PluginManager");let dn=0;const Sn=q=>{const Z=new Date().getTime(),Ne=Math.floor(Math.random()*1e9);return dn++,q+"_"+Ne+dn+String(Z)},Qt=q=>({addTab:Z=>{var Ne;const Pe=(Ne=Z.name)!==null&&Ne!==void 0?Ne:Sn("tab-name"),Wt=q.get();Wt[Pe]=Z,q.set(Wt)}}),Dn=(q,z)=>{q.addCommand("mceHelp",z)},xn=q=>z=>z.options.get(q),Nt=q=>{const z=q.options.register;z("help_tabs",{processor:"array"})},Et=xn("help_tabs"),pt=xn("forced_plugins"),hn=(q,z)=>{q.ui.registry.addButton("help",{icon:"help",tooltip:"Help",onAction:z}),q.ui.registry.addMenuItem("help",{text:"Help",icon:"help",shortcut:"Alt+0",onAction:z})},rn=(q,z,Z)=>{var Ne;return Z(q,z.prototype)?!0:((Ne=q.constructor)===null||Ne===void 0?void 0:Ne.name)===z.name},Ut=q=>{const z=typeof q;return q===null?"null":z==="object"&&Array.isArray(q)?"array":z==="object"&&rn(q,String,(Z,Ne)=>Ne.isPrototypeOf(Z))?"string":z},Ct=q=>z=>Ut(z)===q,Mt=q=>z=>typeof z===q,cn=q=>z=>q===z,Ze=Ct("string"),st=cn(void 0),Te=q=>q==null,Q=q=>!Te(q),ht=Mt("function"),yt=(q=>()=>q)(!1);class Y{constructor(z,Z){this.tag=z,this.value=Z}static some(z){return new Y(!0,z)}static none(){return Y.singletonNone}fold(z,Z){return this.tag?Z(this.value):z()}isSome(){return this.tag}isNone(){return!this.tag}map(z){return this.tag?Y.some(z(this.value)):Y.none()}bind(z){return this.tag?z(this.value):Y.none()}exists(z){return this.tag&&z(this.value)}forall(z){return!this.tag||z(this.value)}filter(z){return!this.tag||z(this.value)?this:Y.none()}getOr(z){return this.tag?this.value:z}or(z){return this.tag?this:z}getOrThunk(z){return this.tag?this.value:z()}orThunk(z){return this.tag?this:z()}getOrDie(z){if(this.tag)return this.value;throw new Error(z??"Called getOrDie on None")}static from(z){return Q(z)?Y.some(z):Y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(z){this.tag&&z(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Y.singletonNone=new Y(!1);const Ot=Array.prototype.slice,Bn=Array.prototype.indexOf,$t=(q,z)=>Bn.call(q,z),ye=(q,z)=>$t(q,z)>-1,ee=(q,z)=>{const Z=q.length,Ne=new Array(Z);for(let Pe=0;Pe<Z;Pe++){const Wt=q[Pe];Ne[Pe]=z(Wt,Pe)}return Ne},at=(q,z)=>{const Z=[];for(let Ne=0,Pe=q.length;Ne<Pe;Ne++){const Wt=q[Ne];z(Wt,Ne)&&Z.push(Wt)}return Z},Le=(q,z,Z)=>{for(let Ne=0,Pe=q.length;Ne<Pe;Ne++){const Wt=q[Ne];if(z(Wt,Ne))return Y.some(Wt);if(Z(Wt,Ne))break}return Y.none()},Me=(q,z)=>Le(q,z,yt),Rt=(q,z)=>{const Z=Ot.call(q,0);return Z.sort(z),Z},_=Object.keys,he=Object.hasOwnProperty,Ue=(q,z)=>Oe(q,z)?Y.from(q[z]):Y.none(),Oe=(q,z)=>he.call(q,z),fe=q=>{const z=[],Z=Ne=>{z.push(Ne)};for(let Ne=0;Ne<q.length;Ne++)q[Ne].each(Z);return z},Kt=`<h1>Editor UI keyboard navigation</h1>

<h2>Activating keyboard navigation</h2>

<p>The sections of the outer UI of the editor - the menubar, toolbar, sidebar and footer - are all keyboard navigable. As such, there are multiple ways to activate keyboard navigation:</p>
<ul>
  <li>Focus the menubar: Alt + F9 (Windows) or &#x2325;F9 (MacOS)</li>
  <li>Focus the toolbar: Alt + F10 (Windows) or &#x2325;F10 (MacOS)</li>
  <li>Focus the footer: Alt + F11 (Windows) or &#x2325;F11 (MacOS)</li>
</ul>

<p>Focusing the menubar or toolbar will start keyboard navigation at the first item in the menubar or toolbar, which will be highlighted with a gray background. Focusing the footer will start keyboard navigation at the first item in the element path, which will be highlighted with an underline. </p>

<h2>Moving between UI sections</h2>

<p>When keyboard navigation is active, pressing tab will move the focus to the next major section of the UI, where applicable. These sections are:</p>
<ul>
  <li>the menubar</li>
  <li>each group of the toolbar </li>
  <li>the sidebar</li>
  <li>the element path in the footer </li>
  <li>the wordcount toggle button in the footer </li>
  <li>the branding link in the footer </li>
  <li>the editor resize handle in the footer</li>
</ul>

<p>Pressing shift + tab will move backwards through the same sections, except when moving from the footer to the toolbar. Focusing the element path then pressing shift + tab will move focus to the first toolbar group, not the last.</p>

<h2>Moving within UI sections</h2>

<p>Keyboard navigation within UI sections can usually be achieved using the left and right arrow keys. This includes:</p>
<ul>
  <li>moving between menus in the menubar</li>
  <li>moving between buttons in a toolbar group</li>
  <li>moving between items in the element path</li>
</ul>

<p>In all these UI sections, keyboard navigation will cycle within the section. For example, focusing the last button in a toolbar group then pressing right arrow will move focus to the first item in the same toolbar group. </p>

<h1>Executing buttons</h1>

<p>To execute a button, navigate the selection to the desired button and hit space or enter.</p>

<h1>Opening, navigating and closing menus</h1>

<p>When focusing a menubar button or a toolbar button with a menu, pressing space, enter or down arrow will open the menu. When the menu opens the first item will be selected. To move up or down the menu, press the up or down arrow key respectively. This is the same for submenus, which can also be opened and closed using the left and right arrow keys.</p>

<p>To close any active menu, hit the escape key. When a menu is closed the selection will be restored to its previous selection. This also works for closing submenus.</p>

<h1>Context toolbars and menus</h1>

<p>To focus an open context toolbar such as the table context toolbar, press Ctrl + F9 (Windows) or &#x2303;F9 (MacOS).</p>

<p>Context toolbar navigation is the same as toolbar navigation, and context menu navigation is the same as standard menu navigation.</p>

<h1>Dialog navigation</h1>

<p>There are two types of dialog UIs in TinyMCE: tabbed dialogs and non-tabbed dialogs.</p>

<p>When a non-tabbed dialog is opened, the first interactive component in the dialog will be focused. Users can navigate between interactive components by pressing tab. This includes any footer buttons. Navigation will cycle back to the first dialog component if tab is pressed while focusing the last component in the dialog. Pressing shift + tab will navigate backwards.</p>

<p>When a tabbed dialog is opened, the first button in the tab menu is focused. Pressing tab will navigate to the first interactive component in that tab, and will cycle through the tab’s components, the footer buttons, then back to the tab button. To switch to another tab, focus the tab button for the current tab, then use the arrow keys to cycle through the tab buttons.</p>`,nn=()=>({name:"keyboardnav",title:"Keyboard Navigation",items:[{type:"htmlpanel",presets:"document",html:Kt}]});var Fe=tinymce.util.Tools.resolve("tinymce.Env");const Vt=q=>{const z=Fe.os.isMacOS()||Fe.os.isiOS(),Pe=z?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl ",access:"Shift + Alt "},Wt=q.split("+"),ot=ee(Wt,Qn=>{const uo=Qn.toLowerCase().trim();return Oe(Pe,uo)?Pe[uo]:Qn});return z?ot.join("").replace(/\s/,""):ot.join("+")},kt=[{shortcuts:["Meta + B"],action:"Bold"},{shortcuts:["Meta + I"],action:"Italic"},{shortcuts:["Meta + U"],action:"Underline"},{shortcuts:["Meta + A"],action:"Select all"},{shortcuts:["Meta + Y","Meta + Shift + Z"],action:"Redo"},{shortcuts:["Meta + Z"],action:"Undo"},{shortcuts:["Access + 1"],action:"Heading 1"},{shortcuts:["Access + 2"],action:"Heading 2"},{shortcuts:["Access + 3"],action:"Heading 3"},{shortcuts:["Access + 4"],action:"Heading 4"},{shortcuts:["Access + 5"],action:"Heading 5"},{shortcuts:["Access + 6"],action:"Heading 6"},{shortcuts:["Access + 7"],action:"Paragraph"},{shortcuts:["Access + 8"],action:"Div"},{shortcuts:["Access + 9"],action:"Address"},{shortcuts:["Alt + 0"],action:"Open help dialog"},{shortcuts:["Alt + F9"],action:"Focus to menubar"},{shortcuts:["Alt + F10"],action:"Focus to toolbar"},{shortcuts:["Alt + F11"],action:"Focus to element path"},{shortcuts:["Ctrl + F9"],action:"Focus to contextual toolbar"},{shortcuts:["Shift + Enter"],action:"Open popup menu for split buttons"},{shortcuts:["Meta + K"],action:"Insert link (if link plugin activated)"},{shortcuts:["Meta + S"],action:"Save (if save plugin activated)"},{shortcuts:["Meta + F"],action:"Find (if searchreplace plugin activated)"},{shortcuts:["Meta + Shift + F"],action:"Switch to or from fullscreen mode"}],Ie=()=>{const q=ee(kt,Z=>{const Ne=ee(Z.shortcuts,Vt).join(" or ");return[Z.action,Ne]});return{name:"shortcuts",title:"Handy Shortcuts",items:[{type:"table",header:["Action","Shortcut"],cells:q}]}};var R=tinymce.util.Tools.resolve("tinymce.util.I18n");const Hn=ee([{key:"advlist",name:"Advanced List"},{key:"anchor",name:"Anchor"},{key:"autolink",name:"Autolink"},{key:"autoresize",name:"Autoresize"},{key:"autosave",name:"Autosave"},{key:"charmap",name:"Character Map"},{key:"code",name:"Code"},{key:"codesample",name:"Code Sample"},{key:"colorpicker",name:"Color Picker"},{key:"directionality",name:"Directionality"},{key:"emoticons",name:"Emoticons"},{key:"fullscreen",name:"Full Screen"},{key:"help",name:"Help"},{key:"image",name:"Image"},{key:"importcss",name:"Import CSS"},{key:"insertdatetime",name:"Insert Date/Time"},{key:"link",name:"Link"},{key:"lists",name:"Lists"},{key:"media",name:"Media"},{key:"nonbreaking",name:"Nonbreaking"},{key:"pagebreak",name:"Page Break"},{key:"preview",name:"Preview"},{key:"quickbars",name:"Quick Toolbars"},{key:"save",name:"Save"},{key:"searchreplace",name:"Search and Replace"},{key:"table",name:"Table"},{key:"template",name:"Template"},{key:"textcolor",name:"Text Color"},{key:"visualblocks",name:"Visual Blocks"},{key:"visualchars",name:"Visual Characters"},{key:"wordcount",name:"Word Count"},{key:"a11ychecker",name:"Accessibility Checker",type:"premium"},{key:"advcode",name:"Advanced Code Editor",type:"premium"},{key:"advtable",name:"Advanced Tables",type:"premium"},{key:"casechange",name:"Case Change",type:"premium"},{key:"checklist",name:"Checklist",type:"premium"},{key:"editimage",name:"Enhanced Image Editing",type:"premium"},{key:"footnotes",name:"Footnotes",type:"premium"},{key:"typography",name:"Advanced Typography",type:"premium"},{key:"mediaembed",name:"Enhanced Media Embed",type:"premium",slug:"introduction-to-mediaembed"},{key:"export",name:"Export",type:"premium"},{key:"formatpainter",name:"Format Painter",type:"premium"},{key:"inlinecss",name:"Inline CSS",type:"premium"},{key:"linkchecker",name:"Link Checker",type:"premium"},{key:"mentions",name:"Mentions",type:"premium"},{key:"mergetags",name:"Merge Tags",type:"premium"},{key:"pageembed",name:"Page Embed",type:"premium"},{key:"permanentpen",name:"Permanent Pen",type:"premium"},{key:"powerpaste",name:"PowerPaste",type:"premium",slug:"introduction-to-powerpaste"},{key:"rtc",name:"Real-Time Collaboration",type:"premium",slug:"rtc-introduction"},{key:"tinymcespellchecker",name:"Spell Checker Pro",type:"premium",slug:"introduction-to-tiny-spellchecker"},{key:"autocorrect",name:"Spelling Autocorrect",type:"premium"},{key:"tableofcontents",name:"Table of Contents",type:"premium"},{key:"tinycomments",name:"Tiny Comments",type:"premium",slug:"introduction-to-tiny-comments"},{key:"tinydrive",name:"Tiny Drive",type:"premium",slug:"tinydrive-introduction"}],q=>({...q,type:q.type||"opensource",slug:q.slug||q.key})),Ae=q=>{const z=()=>{const eo=at(Hn,({type:Re})=>Re==="premium"),kn=Rt(ee(eo,Re=>Re.name),(Re,Ye)=>Re.localeCompare(Ye)),ao=ee(kn,Re=>`<li>${Re}</li>`).join("");return'<div data-mce-tabstop="1" tabindex="-1"><p><b>'+R.translate("Premium plugins:")+"</b></p><ul>"+ao+'<li class="tox-help__more-link" "><a href="https://www.tiny.cloud/pricing/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" rel="noopener" target="_blank">'+R.translate("Learn more...")+"</a></li></ul></div>"},Z=eo=>`<a href="${eo.url}" target="_blank" rel="noopener">${eo.name}</a>`,Ne=(eo,kn)=>{const ao=eo.plugins[kn].getMetadata;if(ht(ao)){const Re=ao();return{name:Re.name,html:Z(Re)}}else return{name:kn,html:kn}},Pe=(eo,kn)=>Me(Hn,ao=>ao.key===kn).fold(()=>Ne(eo,kn),ao=>{const Re=ao.type==="premium"?`${ao.name}*`:ao.name,Ye=Z({name:Re,url:`https://www.tiny.cloud/docs/tinymce/6/${ao.slug}/`});return{name:Re,html:Ye}}),Wt=eo=>{const kn=_(eo.plugins),ao=pt(eo);return st(ao)?kn:at(kn,Re=>!ye(ao,Re))},ot=eo=>{const kn=Wt(eo),ao=Rt(ee(kn,An=>Pe(eo,An)),(An,Tn)=>An.name.localeCompare(Tn.name)),Re=ee(ao,An=>"<li>"+An.html+"</li>"),Ye=Re.length,Bt=Re.join("");return"<p><b>"+R.translate(["Plugins installed ({0}):",Ye])+"</b></p><ul>"+Bt+"</ul>"};return{name:"plugins",title:"Plugins",items:[{type:"htmlpanel",presets:"document",html:[(eo=>eo==null?"":'<div data-mce-tabstop="1" tabindex="-1">'+ot(eo)+"</div>")(q),z()].join("")}]}};var Se=tinymce.util.Tools.resolve("tinymce.EditorManager");const We=()=>{const Z='<a href="https://www.tiny.cloud/docs/tinymce/6/changelog/?utm_campaign=editor_referral&utm_medium=help_dialog&utm_source=tinymce" rel="noopener" target="_blank">TinyMCE '+((Pe,Wt)=>Pe.indexOf("@")===0?"X.X.X":Pe+"."+Wt)(Se.majorVersion,Se.minorVersion)+"</a>";return{name:"versions",title:"Version",items:[{type:"htmlpanel",html:"<p>"+R.translate(["You are using {0}",Z])+"</p>",presets:"document"}]}},Ee=(q,z)=>{const Z={},Ne=ee(q,Pe=>{var Wt;if(Ze(Pe))return Oe(z,Pe)&&(Z[Pe]=z[Pe]),Pe;{const ot=(Wt=Pe.name)!==null&&Wt!==void 0?Wt:Sn("tab-name");return Z[ot]=Pe,ot}});return{tabs:Z,names:Ne}},ae=q=>{const z=_(q),Z=z.indexOf("versions");return Z!==-1&&(z.splice(Z,1),z.push("versions")),{tabs:q,names:z}},se=(q,z)=>{const Z=Ie(),Ne=nn(),Pe=Ae(q),Wt=We(),ot={[Z.name]:Z,[Ne.name]:Ne,[Pe.name]:Pe,[Wt.name]:Wt,...z.get()};return Y.from(Et(q)).fold(()=>ae(ot),Qn=>Ee(Qn,ot))},re=(q,z)=>()=>{const{tabs:Z,names:Ne}=se(q,z),Pe=ee(Ne,Qn=>Ue(Z,Qn)),ot={type:"tabpanel",tabs:fe(Pe)};q.windowManager.open({title:"Help",size:"medium",body:ot,buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{}})};var H=()=>{yn.add("help",q=>{const z=Ht({}),Z=Qt(z);Nt(q);const Ne=re(q,z);return hn(q,Ne),Dn(q,Ne),q.shortcuts.add("Alt+0","Open help dialog","mceHelp"),Z})};H()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=Object.getPrototypeOf,dn=($,J,de)=>{var Xe;return de($,J.prototype)?!0:((Xe=$.constructor)===null||Xe===void 0?void 0:Xe.name)===J.name},Sn=$=>{const J=typeof $;return $===null?"null":J==="object"&&Array.isArray($)?"array":J==="object"&&dn($,String,(de,Xe)=>Xe.isPrototypeOf(de))?"string":J},Qt=$=>J=>Sn(J)===$,Dn=$=>J=>typeof J===$,xn=$=>J=>$===J,Nt=($,J)=>pt($)&&dn($,J,(de,Xe)=>yn(de)===Xe),Et=Qt("string"),pt=Qt("object"),hn=$=>Nt($,Object),rn=Qt("array"),Ut=xn(null),Ct=Dn("boolean"),Mt=$=>$==null,cn=$=>!Mt($),Ze=Dn("function"),st=Dn("number"),Te=($,J)=>{if(rn($)){for(let de=0,Xe=$.length;de<Xe;++de)if(!J($[de]))return!1;return!0}return!1},Q=()=>{};class ht{constructor(J,de){this.tag=J,this.value=de}static some(J){return new ht(!0,J)}static none(){return ht.singletonNone}fold(J,de){return this.tag?de(this.value):J()}isSome(){return this.tag}isNone(){return!this.tag}map(J){return this.tag?ht.some(J(this.value)):ht.none()}bind(J){return this.tag?J(this.value):ht.none()}exists(J){return this.tag&&J(this.value)}forall(J){return!this.tag||J(this.value)}filter(J){return!this.tag||J(this.value)?this:ht.none()}getOr(J){return this.tag?this.value:J}or(J){return this.tag?this:J}getOrThunk(J){return this.tag?this.value:J()}orThunk(J){return this.tag?this:J()}getOrDie(J){if(this.tag)return this.value;throw new Error(J??"Called getOrDie on None")}static from(J){return cn(J)?ht.some(J):ht.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(J){this.tag&&J(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}ht.singletonNone=new ht(!1);const It=Object.keys,yt=Object.hasOwnProperty,Y=($,J)=>{const de=It($);for(let Xe=0,Nn=de.length;Xe<Nn;Xe++){const Mo=de[Xe],Vn=$[Mo];J(Vn,Mo)}},Ot=$=>(J,de)=>{$[de]=J},Bn=($,J,de,Xe)=>{Y($,(Nn,Mo)=>{(J(Nn,Mo)?de:Xe)(Nn,Mo)})},$t=($,J)=>{const de={};return Bn($,J,Ot(de),Q),de},ye=($,J)=>yt.call($,J),ee=($,J)=>ye($,J)&&$[J]!==void 0&&$[J]!==null,at=Array.prototype.push,Le=$=>{const J=[];for(let de=0,Xe=$.length;de<Xe;++de){if(!rn($[de]))throw new Error("Arr.flatten item "+de+" was not an array, input: "+$);at.apply(J,$[de])}return J},Me=($,J)=>J>=0&&J<$.length?ht.some($[J]):ht.none(),Rt=$=>Me($,0),_=($,J)=>{for(let de=0;de<$.length;de++){const Xe=J($[de],de);if(Xe.isSome())return Xe}return ht.none()};typeof window<"u"||Function("return this;")();const he=($,J,de)=>{if(Et(de)||Ct(de)||st(de))$.setAttribute(J,de+"");else throw console.error("Invalid call to Attribute.set. Key ",J,":: Value ",de,":: Element ",$),new Error("Attribute value was not simple")},Ue=($,J,de)=>{he($.dom,J,de)},Oe=($,J)=>{$.dom.removeAttribute(J)},fe=($,J)=>{const Xe=(J||document).createElement("div");if(Xe.innerHTML=$,!Xe.hasChildNodes()||Xe.childNodes.length>1){const Nn="HTML does not have a single root node";throw console.error(Nn,$),new Error(Nn)}return Fe(Xe.childNodes[0])},Kt=($,J)=>{const Xe=(J||document).createElement($);return Fe(Xe)},nn=($,J)=>{const Xe=(J||document).createTextNode($);return Fe(Xe)},Fe=$=>{if($==null)throw new Error("Node cannot be null or undefined");return{dom:$}},kt={fromHtml:fe,fromTag:Kt,fromText:nn,fromDom:Fe,fromPoint:($,J,de)=>ht.from($.dom.elementFromPoint(J,de)).map(Fe)};var Ie=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),R=tinymce.util.Tools.resolve("tinymce.util.URI");const Hn=$=>$.length>0,Ae=$=>J=>J.options.get($),Se=$=>{const J=$.options.register;J("image_dimensions",{processor:"boolean",default:!0}),J("image_advtab",{processor:"boolean",default:!1}),J("image_uploadtab",{processor:"boolean",default:!0}),J("image_prepend_url",{processor:"string",default:""}),J("image_class_list",{processor:"object[]"}),J("image_description",{processor:"boolean",default:!0}),J("image_title",{processor:"boolean",default:!1}),J("image_caption",{processor:"boolean",default:!1}),J("image_list",{processor:de=>{const Xe=de===!1||Et(de)||Te(de,pt)||Ze(de);return Xe?{value:de,valid:Xe}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},We=Ae("image_dimensions"),Ee=Ae("image_advtab"),ae=Ae("image_uploadtab"),se=Ae("image_prepend_url"),re=Ae("image_class_list"),H=Ae("image_description"),q=Ae("image_title"),z=Ae("image_caption"),Z=Ae("image_list"),Ne=Ae("a11y_advanced_options"),Pe=Ae("automatic_uploads"),Wt=$=>Hn($.options.get("images_upload_url")),ot=$=>cn($.options.get("images_upload_handler")),Qn=($,J)=>Math.max(parseInt($,10),parseInt(J,10)),uo=$=>new Promise(J=>{const de=document.createElement("img"),Xe=Mo=>{de.onload=de.onerror=null,de.parentNode&&de.parentNode.removeChild(de),J(Mo)};de.onload=()=>{const Mo=Qn(de.width,de.clientWidth),Vn=Qn(de.height,de.clientHeight),Hr={width:Mo,height:Vn};Xe(Promise.resolve(Hr))},de.onerror=()=>{Xe(Promise.reject(`Failed to get image dimensions for: ${$}`))};const Nn=de.style;Nn.visibility="hidden",Nn.position="fixed",Nn.bottom=Nn.left="0px",Nn.width=Nn.height="auto",document.body.appendChild(de),de.src=$}),eo=$=>($&&($=$.replace(/px$/,"")),$),kn=$=>($.length>0&&/^[0-9]+$/.test($)&&($+="px"),$),ao=$=>{if($.margin){const J=String($.margin).split(" ");switch(J.length){case 1:$["margin-top"]=$["margin-top"]||J[0],$["margin-right"]=$["margin-right"]||J[0],$["margin-bottom"]=$["margin-bottom"]||J[0],$["margin-left"]=$["margin-left"]||J[0];break;case 2:$["margin-top"]=$["margin-top"]||J[0],$["margin-right"]=$["margin-right"]||J[1],$["margin-bottom"]=$["margin-bottom"]||J[0],$["margin-left"]=$["margin-left"]||J[1];break;case 3:$["margin-top"]=$["margin-top"]||J[0],$["margin-right"]=$["margin-right"]||J[1],$["margin-bottom"]=$["margin-bottom"]||J[2],$["margin-left"]=$["margin-left"]||J[1];break;case 4:$["margin-top"]=$["margin-top"]||J[0],$["margin-right"]=$["margin-right"]||J[1],$["margin-bottom"]=$["margin-bottom"]||J[2],$["margin-left"]=$["margin-left"]||J[3]}delete $.margin}return $},Re=($,J)=>{const de=Z($);Et(de)?fetch(de).then(Xe=>{Xe.ok&&Xe.json().then(J)}):Ze(de)?de(J):J(de)},Ye=($,J,de)=>{const Xe=()=>{de.onload=de.onerror=null,$.selection&&($.selection.select(de),$.nodeChanged())};de.onload=()=>{!J.width&&!J.height&&We($)&&$.dom.setAttribs(de,{width:String(de.clientWidth),height:String(de.clientHeight)}),Xe()},de.onerror=Xe},Bt=$=>new Promise((J,de)=>{const Xe=new FileReader;Xe.onload=()=>{J(Xe.result)},Xe.onerror=()=>{var Nn;de((Nn=Xe.error)===null||Nn===void 0?void 0:Nn.message)},Xe.readAsDataURL($)}),an=$=>$.nodeName==="IMG"&&($.hasAttribute("data-mce-object")||$.hasAttribute("data-mce-placeholder")),An=($,J)=>{const de=$.options.get;return R.isDomSafe(J,"img",{allow_html_data_urls:de("allow_html_data_urls"),allow_script_urls:de("allow_script_urls"),allow_svg_data_urls:de("allow_svg_data_urls")})},Tn=Ie.DOM,Do=$=>$.style.marginLeft&&$.style.marginRight&&$.style.marginLeft===$.style.marginRight?eo($.style.marginLeft):"",ks=$=>$.style.marginTop&&$.style.marginBottom&&$.style.marginTop===$.style.marginBottom?eo($.style.marginTop):"",qe=$=>$.style.borderWidth?eo($.style.borderWidth):"",ze=($,J)=>{var de;return $.hasAttribute(J)&&(de=$.getAttribute(J))!==null&&de!==void 0?de:""},sn=$=>$.parentNode!==null&&$.parentNode.nodeName==="FIGURE",on=($,J,de)=>{de===""||de===null?$.removeAttribute(J):$.setAttribute(J,de)},qt=$=>{const J=Tn.create("figure",{class:"image"});Tn.insertAfter(J,$),J.appendChild($),J.appendChild(Tn.create("figcaption",{contentEditable:"true"},"Caption")),J.contentEditable="false"},Kn=$=>{const J=$.parentNode;cn(J)&&(Tn.insertAfter($,J),Tn.remove(J))},Ts=$=>{sn($)?Kn($):qt($)},_r=($,J)=>{const de=$.getAttribute("style"),Xe=J(de!==null?de:"");Xe.length>0?($.setAttribute("style",Xe),$.setAttribute("data-mce-style",Xe)):$.removeAttribute("style")},ga=($,J)=>(de,Xe,Nn)=>{const Mo=de.style;Mo[Xe]?(Mo[Xe]=kn(Nn),_r(de,J)):on(de,Xe,Nn)},bs=($,J)=>$.style[J]?eo($.style[J]):ze($,J),wc=($,J)=>{const de=kn(J);$.style.marginLeft=de,$.style.marginRight=de},ys=($,J)=>{const de=kn(J);$.style.marginTop=de,$.style.marginBottom=de},cs=($,J)=>{const de=kn(J);$.style.borderWidth=de},go=($,J)=>{$.style.borderStyle=J},gr=$=>{var J;return(J=$.style.borderStyle)!==null&&J!==void 0?J:""},Gr=$=>cn($)&&$.nodeName==="FIGURE",Hs=$=>$.nodeName==="IMG",ha=$=>Tn.getAttrib($,"alt").length===0&&Tn.getAttrib($,"role")==="presentation",qr=$=>ha($)?"":ze($,"alt"),cc=()=>({src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),Qs=($,J)=>{var de;const Xe=document.createElement("img");return on(Xe,"style",J.style),(Do(Xe)||J.hspace!=="")&&wc(Xe,J.hspace),(ks(Xe)||J.vspace!=="")&&ys(Xe,J.vspace),(qe(Xe)||J.border!=="")&&cs(Xe,J.border),(gr(Xe)||J.borderStyle!=="")&&go(Xe,J.borderStyle),$((de=Xe.getAttribute("style"))!==null&&de!==void 0?de:"")},_a=($,J)=>{const de=document.createElement("img");if(to($,{...J,caption:!1},de),ct(de,J.alt,J.isDecorative),J.caption){const Xe=Tn.create("figure",{class:"image"});return Xe.appendChild(de),Xe.appendChild(Tn.create("figcaption",{contentEditable:"true"},"Caption")),Xe.contentEditable="false",Xe}else return de},we=($,J)=>({src:ze(J,"src"),alt:qr(J),title:ze(J,"title"),width:bs(J,"width"),height:bs(J,"height"),class:ze(J,"class"),style:$(ze(J,"style")),caption:sn(J),hspace:Do(J),vspace:ks(J),border:qe(J),borderStyle:gr(J),isDecorative:ha(J)}),K=($,J,de,Xe,Nn)=>{de[Xe]!==J[Xe]&&Nn($,Xe,String(de[Xe]))},ct=($,J,de)=>{if(de){Tn.setAttrib($,"role","presentation");const Xe=kt.fromDom($);Ue(Xe,"alt","")}else{if(Ut(J)){const Xe=kt.fromDom($);Oe(Xe,"alt")}else{const Xe=kt.fromDom($);Ue(Xe,"alt",J)}Tn.getAttrib($,"role")==="presentation"&&Tn.setAttrib($,"role","")}},vt=($,J,de)=>{(de.alt!==J.alt||de.isDecorative!==J.isDecorative)&&ct($,de.alt,de.isDecorative)},jn=($,J)=>(de,Xe,Nn)=>{$(de,Nn),_r(de,J)},to=($,J,de)=>{const Xe=we($,de);K(de,Xe,J,"caption",(Nn,Mo,Vn)=>Ts(Nn)),K(de,Xe,J,"src",on),K(de,Xe,J,"title",on),K(de,Xe,J,"width",ga("width",$)),K(de,Xe,J,"height",ga("height",$)),K(de,Xe,J,"class",on),K(de,Xe,J,"style",jn((Nn,Mo)=>on(Nn,"style",Mo),$)),K(de,Xe,J,"hspace",jn(wc,$)),K(de,Xe,J,"vspace",jn(ys,$)),K(de,Xe,J,"border",jn(cs,$)),K(de,Xe,J,"borderStyle",jn(go,$)),vt(de,Xe,J)},In=($,J)=>{const de=$.dom.styles.parse(J),Xe=ao(de),Nn=$.dom.styles.parse($.dom.styles.serialize(Xe));return $.dom.styles.serialize(Nn)},is=$=>{const J=$.selection.getNode(),de=$.dom.getParent(J,"figure.image");return de?$.dom.select("img",de)[0]:J&&(J.nodeName!=="IMG"||an(J))?null:J},ts=($,J)=>{var de;const Xe=$.dom,Nn=$t($.schema.getTextBlockElements(),(Vn,Hr)=>!$.schema.isValidChild(Hr,"figure")),Mo=Xe.getParent(J.parentNode,Vn=>ee(Nn,Vn.nodeName),$.getBody());return Mo&&(de=Xe.split(Mo,J))!==null&&de!==void 0?de:J},xo=$=>{const J=is($);return J?we(de=>In($,de),J):cc()},ir=($,J)=>{const de=_a(Nn=>In($,Nn),J);$.dom.setAttrib(de,"data-mce-id","__mcenew"),$.focus(),$.selection.setContent(de.outerHTML);const Xe=$.dom.select('*[data-mce-id="__mcenew"]')[0];if($.dom.setAttrib(Xe,"data-mce-id",null),Gr(Xe)){const Nn=ts($,Xe);$.selection.select(Nn)}else $.selection.select(Xe)},Lt=($,J)=>{$.dom.setAttrib(J,"src",J.getAttribute("src"))},ge=($,J)=>{if(J){const de=$.dom.is(J.parentNode,"figure.image")?J.parentNode:J;$.dom.remove(de),$.focus(),$.nodeChanged(),$.dom.isEmpty($.getBody())&&($.setContent(""),$.selection.setCursorLocation())}},be=($,J)=>{const de=is($);if(de)if(to(Xe=>In($,Xe),J,de),Lt($,de),Gr(de.parentNode)){const Xe=de.parentNode;ts($,Xe),$.selection.select(de.parentNode)}else $.selection.select(de),Ye($,J,de)},_t=($,J)=>{const de=J.src;return{...J,src:An($,de)?de:""}},tn=($,J)=>{const de=is($);if(de){const Nn={...we(Vn=>In($,Vn),de),...J},Mo=_t($,Nn);Nn.src?be($,Mo):ge($,de)}else J.src&&ir($,{...cc(),...J})},pn=($=>(...J)=>{if(J.length===0)throw new Error("Can't merge zero objects");const de={};for(let Xe=0;Xe<J.length;Xe++){const Nn=J[Xe];for(const Mo in Nn)ye(Nn,Mo)&&(de[Mo]=$(de[Mo],Nn[Mo]))}return de})(($,J)=>hn($)&&hn(J)?pn($,J):J);var zn=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),oo=tinymce.util.Tools.resolve("tinymce.util.Tools");const wo=$=>Et($.value)?$.value:"",Os=$=>Et($.text)?$.text:Et($.title)?$.title:"",hr=($,J)=>{const de=[];return oo.each($,Xe=>{const Nn=Os(Xe);if(Xe.menu!==void 0){const Mo=hr(Xe.menu,J);de.push({text:Nn,items:Mo})}else{const Mo=J(Xe);de.push({text:Nn,value:Mo})}}),de},qo=($=wo)=>J=>J?ht.from(J).map(de=>hr(de,$)):ht.none(),Xc=$=>qo(wo)($),ls=$=>ye($,"items"),Cs=($,J)=>_($,de=>ls(de)?Cs(de.items,J):de.value===J?ht.some(de):ht.none()),Lr={sanitizer:qo,sanitize:Xc,findEntry:($,J)=>$.bind(de=>Cs(de,J))},Fc={makeTab:$=>({title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]})},La=$=>{const J=Lr.sanitizer(me=>$.convertURL(me.value||me.url||"","src")),de=new Promise(me=>{Re($,Qe=>{me(J(Qe).map(dt=>Le([[{text:"None",value:""}],dt])))})}),Xe=Lr.sanitize(re($)),Nn=Ee($),Mo=ae($),Vn=Wt($),Hr=ot($),pr=xo($),Dt=H($),ca=q($),tr=We($),Zr=z($),sl=Ne($),Po=Pe($),ne=ht.some(se($)).filter(me=>Et(me)&&me.length>0);return de.then(me=>({image:pr,imageList:me,classList:Xe,hasAdvTab:Nn,hasUploadTab:Mo,hasUploadUrl:Vn,hasUploadHandler:Hr,hasDescription:Dt,hasImageTitle:ca,hasDimensions:tr,hasImageCaption:Zr,prependURL:ne,hasAccessibilityOptions:sl,automaticUploads:Po}))},Jc=$=>{const J={name:"src",type:"urlinput",filetype:"image",label:"Source"},de=$.imageList.map(ca=>({name:"images",type:"listbox",label:"Image list",items:ca})),Xe={name:"alt",type:"input",label:"Alternative description",enabled:!($.hasAccessibilityOptions&&$.image.isDecorative)},Nn={name:"title",type:"input",label:"Image title"},Mo={name:"dimensions",type:"sizeinput"},Vn={type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]},Hr=$.classList.map(ca=>({name:"classes",type:"listbox",label:"Class",items:ca})),pr={type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]},Dt=ca=>ca?{type:"grid",columns:2}:{type:"panel"};return Le([[J],de.toArray(),$.hasAccessibilityOptions&&$.hasDescription?[Vn]:[],$.hasDescription?[Xe]:[],$.hasImageTitle?[Nn]:[],$.hasDimensions?[Mo]:[],[{...Dt($.classList.isSome()&&$.hasImageCaption),items:Le([Hr.toArray(),$.hasImageCaption?[pr]:[]])}]])},Qc={makeTab:$=>({title:"General",name:"general",items:Jc($)}),makeItems:Jc},Us={makeTab:$=>({title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]})},gi=$=>({prevImage:Lr.findEntry($.imageList,$.image.src),prevAlt:$.image.alt,open:!0}),pa=$=>({src:{value:$.src,meta:{}},images:$.src,alt:$.alt,title:$.title,dimensions:{width:$.width,height:$.height},classes:$.class,caption:$.caption,style:$.style,vspace:$.vspace,border:$.border,hspace:$.hspace,borderstyle:$.borderStyle,fileinput:[],isDecorative:$.isDecorative}),ic=($,J)=>({src:$.src.value,alt:($.alt===null||$.alt.length===0)&&J?null:$.alt,title:$.title,width:$.dimensions.width,height:$.dimensions.height,class:$.classes,style:$.style,caption:$.caption,hspace:$.hspace,vspace:$.vspace,border:$.border,borderStyle:$.borderstyle,isDecorative:$.isDecorative}),hi=($,J)=>/^(?:[a-zA-Z]+:)?\/\//.test(J)?ht.none():$.prependURL.bind(de=>J.substring(0,de.length)!==de?ht.some(de+J):ht.none()),Ic=($,J)=>{const de=J.getData();hi($,de.src.value).each(Xe=>{J.setData({src:{value:Xe,meta:de.src.meta}})})},aa=($,J,de)=>{$.hasDescription&&Et(de.alt)&&(J.alt=de.alt),$.hasAccessibilityOptions&&(J.isDecorative=de.isDecorative||J.isDecorative||!1),$.hasImageTitle&&Et(de.title)&&(J.title=de.title),$.hasDimensions&&(Et(de.width)&&(J.dimensions.width=de.width),Et(de.height)&&(J.dimensions.height=de.height)),Et(de.class)&&Lr.findEntry($.classList,de.class).each(Xe=>{J.classes=Xe.value}),$.hasImageCaption&&Ct(de.caption)&&(J.caption=de.caption),$.hasAdvTab&&(Et(de.style)&&(J.style=de.style),Et(de.vspace)&&(J.vspace=de.vspace),Et(de.border)&&(J.border=de.border),Et(de.hspace)&&(J.hspace=de.hspace),Et(de.borderstyle)&&(J.borderstyle=de.borderstyle))},Ai=($,J)=>{const de=J.getData(),Xe=de.src.meta;if(Xe!==void 0){const Nn=pn({},de);aa($,Nn,Xe),J.setData(Nn)}},Cc=($,J,de,Xe)=>{const Nn=Xe.getData(),Mo=Nn.src.value,Vn=Nn.src.meta||{};!Vn.width&&!Vn.height&&J.hasDimensions&&(Hn(Mo)?$.imageSize(Mo).then(Hr=>{de.open&&Xe.setData({dimensions:Hr})}).catch(Hr=>console.error(Hr)):Xe.setData({dimensions:{width:"",height:""}}))},Vi=($,J,de)=>{const Xe=de.getData(),Nn=Lr.findEntry($.imageList,Xe.src.value);J.prevImage=Nn,de.setData({images:Nn.map(Mo=>Mo.value).getOr("")})},er=($,J,de,Xe)=>{Ic(J,Xe),Ai(J,Xe),Cc($,J,de,Xe),Vi(J,de,Xe)},ba=($,J,de,Xe)=>{const Nn=Xe.getData(),Mo=Lr.findEntry(J.imageList,Nn.images);Mo.each(Vn=>{Nn.alt===""||de.prevImage.map(pr=>pr.text===Nn.alt).getOr(!1)?Vn.value===""?Xe.setData({src:Vn,alt:de.prevAlt}):Xe.setData({src:Vn,alt:Vn.text}):Xe.setData({src:Vn})}),de.prevImage=Mo,er($,J,de,Xe)},X=($,J,de,Xe)=>{const Nn=Xe.getData();Xe.block("Uploading image"),Rt(Nn.fileinput).fold(()=>{Xe.unblock()},Mo=>{const Vn=URL.createObjectURL(Mo),Hr=()=>{Xe.unblock(),URL.revokeObjectURL(Vn)},pr=Dt=>{Xe.setData({src:{value:Dt,meta:{}}}),Xe.showTab("general"),er($,J,de,Xe)};Bt(Mo).then(Dt=>{const ca=$.createBlobCache(Mo,Vn,Dt);J.automaticUploads?$.uploadImage(ca).then(tr=>{pr(tr.url),Hr()}).catch(tr=>{Hr(),$.alertErr(tr)}):($.addToBlobCache(ca),pr(ca.blobUri()),Xe.unblock())})})},xe=($,J,de)=>(Xe,Nn)=>{Nn.name==="src"?er($,J,de,Xe):Nn.name==="images"?ba($,J,de,Xe):Nn.name==="alt"?de.prevAlt=Xe.getData().alt:Nn.name==="fileinput"?X($,J,de,Xe):Nn.name==="isDecorative"&&Xe.setEnabled("alt",!Xe.getData().isDecorative)},He=$=>()=>{$.open=!1},wt=$=>$.hasAdvTab||$.hasUploadUrl||$.hasUploadHandler?{type:"tabpanel",tabs:Le([[Qc.makeTab($)],$.hasAdvTab?[Fc.makeTab($)]:[],$.hasUploadTab&&($.hasUploadUrl||$.hasUploadHandler)?[Us.makeTab($)]:[]])}:{type:"panel",items:Qc.makeItems($)},Gt=($,J,de)=>Xe=>{const Nn=pn(pa(J.image),Xe.getData()),Mo={...Nn,style:Qs(de.normalizeCss,ic(Nn,!1))};$.execCommand("mceUpdateImage",!1,ic(Mo,J.hasAccessibilityOptions)),$.editorUpload.uploadImagesAuto(),Xe.close()},mo=$=>J=>An($,J)?uo($.documentBaseURI.toAbsolute(J)).then(de=>({width:String(de.width),height:String(de.height)})):Promise.resolve({width:"",height:""}),Ko=$=>(J,de,Xe)=>{var Nn;return $.editorUpload.blobCache.create({blob:J,blobUri:de,name:(Nn=J.name)===null||Nn===void 0?void 0:Nn.replace(/\.[^\.]+$/,""),filename:J.name,base64:Xe.split(",")[1]})},Ar=$=>J=>{$.editorUpload.blobCache.add(J)},zs=$=>J=>{$.windowManager.alert(J)},$r=$=>J=>In($,J),Or=$=>J=>$.dom.parseStyle(J),Pr=$=>(J,de)=>$.dom.serializeStyle(J,de),Ha=$=>J=>zn($).upload([J],!1).then(de=>{var Xe;return de.length===0?Promise.reject("Failed to upload image"):de[0].status===!1?Promise.reject((Xe=de[0].error)===null||Xe===void 0?void 0:Xe.message):de[0]}),Kr=$=>{const J={imageSize:mo($),addToBlobCache:Ar($),createBlobCache:Ko($),alertErr:zs($),normalizeCss:$r($),parseStyle:Or($),serializeStyle:Pr($),uploadImage:Ha($)};return{open:()=>{La($).then(Xe=>{const Nn=gi(Xe);return{title:"Insert/Edit Image",size:"normal",body:wt(Xe),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:pa(Xe.image),onSubmit:Gt($,Xe,J),onChange:xe(J,Xe,Nn),onClose:He(Nn)}}).then($.windowManager.open)}}},ta=$=>{$.addCommand("mceImage",Kr($).open),$.addCommand("mceUpdateImage",(J,de)=>{$.undoManager.transact(()=>tn($,de))})},ei=$=>{const J=$.attr("class");return cn(J)&&/\bimage\b/.test(J)},ti=$=>J=>{let de=J.length;const Xe=Nn=>{Nn.attr("contenteditable",$?"true":null)};for(;de--;){const Nn=J[de];ei(Nn)&&(Nn.attr("contenteditable",$?"false":null),oo.each(Nn.getAll("figcaption"),Xe))}},ko=$=>{$.on("PreInit",()=>{$.parser.addNodeFilter("figure",ti(!0)),$.serializer.addNodeFilter("figure",ti(!1))})},us=$=>{$.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:Kr($).open,onSetup:J=>(J.setActive(cn(is($))),$.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",J.setActive).unbind)}),$.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:Kr($).open}),$.ui.registry.addContextMenu("image",{update:J=>Gr(J)||Hs(J)&&!an(J)?["image"]:[]})};var ar=()=>{Ht.add("image",$=>{Se($),ko($),us($),ta($)})};ar()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=(Ae,Se,We)=>{var Ee;return We(Ae,Se.prototype)?!0:((Ee=Ae.constructor)===null||Ee===void 0?void 0:Ee.name)===Se.name},dn=Ae=>{const Se=typeof Ae;return Ae===null?"null":Se==="object"&&Array.isArray(Ae)?"array":Se==="object"&&yn(Ae,String,(We,Ee)=>Ee.isPrototypeOf(We))?"string":Se},Sn=Ae=>Se=>dn(Se)===Ae,Qt=Ae=>Se=>typeof Se===Ae,Dn=Sn("string"),xn=Sn("object"),Nt=Sn("array"),Et=Qt("function");var pt=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),hn=tinymce.util.Tools.resolve("tinymce.EditorManager"),rn=tinymce.util.Tools.resolve("tinymce.Env"),Ut=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ct=Ae=>Se=>Se.options.get(Ae),Mt=Ae=>{const Se=Ae.options.register,We=Ee=>Dn(Ee)||Et(Ee)||xn(Ee);Se("importcss_merge_classes",{processor:"boolean",default:!0}),Se("importcss_exclusive",{processor:"boolean",default:!0}),Se("importcss_selector_converter",{processor:"function"}),Se("importcss_selector_filter",{processor:We}),Se("importcss_file_filter",{processor:We}),Se("importcss_groups",{processor:"object[]"}),Se("importcss_append",{processor:"boolean",default:!1})},cn=Ct("importcss_merge_classes"),Ze=Ct("importcss_exclusive"),st=Ct("importcss_selector_converter"),Te=Ct("importcss_selector_filter"),Q=Ct("importcss_groups"),ht=Ct("importcss_append"),It=Ct("importcss_file_filter"),yt=Ct("skin"),Y=Ct("skin_url"),Ot=Array.prototype.push,Bn=(Ae,Se)=>{const We=Ae.length,Ee=new Array(We);for(let ae=0;ae<We;ae++){const se=Ae[ae];Ee[ae]=Se(se,ae)}return Ee},$t=Ae=>{const Se=[];for(let We=0,Ee=Ae.length;We<Ee;++We){if(!Nt(Ae[We]))throw new Error("Arr.flatten item "+We+" was not an array, input: "+Ae);Ot.apply(Se,Ae[We])}return Se},ye=(Ae,Se)=>$t(Bn(Ae,Se)),ee=()=>{const Ae=[],Se=[],We={};return{addItemToGroup:(re,H)=>{We[re]?We[re].push(H):(Se.push(re),We[re]=[H])},addItem:re=>{Ae.push(re)},toFormats:()=>ye(Se,H=>{const q=We[H];return q.length===0?[]:[{title:H,items:q}]}).concat(Ae)}},at=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,Le=Ae=>{const Se=rn.cacheSuffix;return Dn(Ae)&&(Ae=Ae.replace("?"+Se,"").replace("&"+Se,"")),Ae},Me=(Ae,Se)=>{const We=yt(Ae);if(We){const Ee=Y(Ae),ae=Ee?Ae.documentBaseURI.toAbsolute(Ee):hn.baseURL+"/skins/ui/"+We,se=hn.baseURL+"/skins/content/";return Se===ae+"/content"+(Ae.inline?".inline":"")+".min.css"||Se.indexOf(se)!==-1}return!1},Rt=Ae=>Dn(Ae)?Se=>Se.indexOf(Ae)!==-1:Ae instanceof RegExp?Se=>Ae.test(Se):Ae,_=Ae=>Ae.styleSheet,he=Ae=>Ae.selectorText,Ue=(Ae,Se,We)=>{const Ee=[],ae={},se=(re,H)=>{let q=re.href,z;if(q=Le(q),!(!q||We&&!We(q,H)||Me(Ae,q))){Ut.each(re.imports,Z=>{se(Z,!0)});try{z=re.cssRules||re.rules}catch{}Ut.each(z,Z=>{_(Z)?se(Z.styleSheet,!0):he(Z)&&Ut.each(Z.selectorText.split(","),Ne=>{Ee.push(Ut.trim(Ne))})})}};Ut.each(Ae.contentCSS,re=>{ae[re]=!0}),We||(We=(re,H)=>H||ae[re]);try{Ut.each(Se.styleSheets,re=>{se(re)})}catch{}return Ee},Oe=(Ae,Se)=>{let We={};const Ee=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(Se);if(!Ee)return;const ae=Ee[1],se=Ee[2].substr(1).split(".").join(" "),re=Ut.makeMap("a,img");return Ee[1]?(We={title:Se},Ae.schema.getTextBlockElements()[ae]?We.block=ae:Ae.schema.getBlockElements()[ae]||re[ae.toLowerCase()]?We.selector=ae:We.inline=ae):Ee[2]&&(We={inline:"span",title:Se.substr(1),classes:se}),cn(Ae)?We.classes=se:We.attributes={class:se},We},fe=(Ae,Se)=>Ut.grep(Ae,We=>!We.filter||We.filter(Se)),Kt=Ae=>Ut.map(Ae,Se=>Ut.extend({},Se,{original:Se,selectors:{},filter:Rt(Se.filter)})),nn=(Ae,Se)=>Se===null||Ze(Ae),Fe=(Ae,Se,We,Ee)=>!(nn(Ae,We)?Se in Ee:Se in We.selectors),Vt=(Ae,Se,We,Ee)=>{nn(Ae,We)?Ee[Se]=!0:We.selectors[Se]=!0},kt=(Ae,Se,We,Ee)=>{let ae;const se=st(Ae);return Ee&&Ee.selector_converter?ae=Ee.selector_converter:se?ae=se:ae=()=>Oe(Ae,We),ae.call(Se,We,Ee)},Ie=Ae=>{Ae.on("init",()=>{const Se=ee(),We={},Ee=Rt(Te(Ae)),ae=Kt(Q(Ae)),se=(H,q)=>{if(Fe(Ae,H,q,We)){Vt(Ae,H,q,We);const z=kt(Ae,Ae.plugins.importcss,H,q);if(z){const Z=z.name||pt.DOM.uniqueId();return Ae.formatter.register(Z,z),{title:z.title,format:Z}}}return null};Ut.each(Ue(Ae,Ae.getDoc(),Rt(It(Ae))),H=>{if(!at.test(H)&&(!Ee||Ee(H))){const q=fe(ae,H);if(q.length>0)Ut.each(q,z=>{const Z=se(H,z);Z&&Se.addItemToGroup(z.title,Z)});else{const z=se(H,null);z&&Se.addItem(z)}}});const re=Se.toFormats();Ae.dispatch("addStyleModifications",{items:re,replace:!ht(Ae)})})},R=Ae=>({convertSelectorToFormat:We=>Oe(Ae,We)});var Hn=()=>{Ht.add("importcss",Ae=>(Mt(Ae),Ie(Ae),R(Ae)))};Hn()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=It=>yt=>yt.options.get(It),dn=It=>{const yt=It.options.register;yt("insertdatetime_dateformat",{processor:"string",default:It.translate("%Y-%m-%d")}),yt("insertdatetime_timeformat",{processor:"string",default:It.translate("%H:%M:%S")}),yt("insertdatetime_formats",{processor:"string[]",default:["%H:%M:%S","%Y-%m-%d","%I:%M:%S %p","%D"]}),yt("insertdatetime_element",{processor:"boolean",default:!1})},Sn=yn("insertdatetime_dateformat"),Qt=yn("insertdatetime_timeformat"),Dn=yn("insertdatetime_formats"),xn=yn("insertdatetime_element"),Nt=It=>{const yt=Dn(It);return yt.length>0?yt[0]:Qt(It)},Et="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),pt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),hn="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),rn="January February March April May June July August September October November December".split(" "),Ut=(It,yt)=>{if(It=""+It,It.length<yt)for(let Y=0;Y<yt-It.length;Y++)It="0"+It;return It},Ct=(It,yt,Y=new Date)=>(yt=yt.replace("%D","%m/%d/%Y"),yt=yt.replace("%r","%I:%M:%S %p"),yt=yt.replace("%Y",""+Y.getFullYear()),yt=yt.replace("%y",""+Y.getYear()),yt=yt.replace("%m",Ut(Y.getMonth()+1,2)),yt=yt.replace("%d",Ut(Y.getDate(),2)),yt=yt.replace("%H",""+Ut(Y.getHours(),2)),yt=yt.replace("%M",""+Ut(Y.getMinutes(),2)),yt=yt.replace("%S",""+Ut(Y.getSeconds(),2)),yt=yt.replace("%I",""+((Y.getHours()+11)%12+1)),yt=yt.replace("%p",Y.getHours()<12?"AM":"PM"),yt=yt.replace("%B",""+It.translate(rn[Y.getMonth()])),yt=yt.replace("%b",""+It.translate(hn[Y.getMonth()])),yt=yt.replace("%A",""+It.translate(pt[Y.getDay()])),yt=yt.replace("%a",""+It.translate(Et[Y.getDay()])),yt=yt.replace("%%","%"),yt),Mt=(It,yt,Y,Ot)=>{const Bn=It.dom.create("time",{datetime:Y},Ot);It.dom.replace(Bn,yt),It.selection.select(Bn,!0),It.selection.collapse(!1)},cn=(It,yt)=>{if(xn(It)){const Y=Ct(It,yt);let Ot;/%[HMSIp]/.test(yt)?Ot=Ct(It,"%Y-%m-%dT%H:%M"):Ot=Ct(It,"%Y-%m-%d");const Bn=It.dom.getParent(It.selection.getStart(),"time");Bn?Mt(It,Bn,Ot,Y):It.insertContent('<time datetime="'+Ot+'">'+Y+"</time>")}else It.insertContent(Ct(It,yt))},Ze=It=>{It.addCommand("mceInsertDate",(yt,Y)=>{cn(It,Y??Sn(It))}),It.addCommand("mceInsertTime",(yt,Y)=>{cn(It,Y??Qt(It))})},st=It=>{let yt=It;return{get:()=>yt,set:Bn=>{yt=Bn}}};var Te=tinymce.util.Tools.resolve("tinymce.util.Tools");const Q=It=>{const yt=Dn(It),Y=st(Nt(It)),Ot=$t=>It.execCommand("mceInsertDate",!1,$t);It.ui.registry.addSplitButton("insertdatetime",{icon:"insert-time",tooltip:"Insert date/time",select:$t=>$t===Y.get(),fetch:$t=>{$t(Te.map(yt,ye=>({type:"choiceitem",text:Ct(It,ye),value:ye})))},onAction:$t=>{Ot(Y.get())},onItemAction:($t,ye)=>{Y.set(ye),Ot(ye)}});const Bn=$t=>()=>{Y.set($t),Ot($t)};It.ui.registry.addNestedMenuItem("insertdatetime",{icon:"insert-time",text:"Date/time",getSubmenuItems:()=>Te.map(yt,$t=>({type:"menuitem",text:Ct(It,$t),onAction:Bn($t)}))})};var ht=()=>{Ht.add("insertdatetime",It=>{dn(It),Ze(It),Q(It)})};ht()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=(X,xe,He)=>{var wt;return He(X,xe.prototype)?!0:((wt=X.constructor)===null||wt===void 0?void 0:wt.name)===xe.name},dn=X=>{const xe=typeof X;return X===null?"null":xe==="object"&&Array.isArray(X)?"array":xe==="object"&&yn(X,String,(He,wt)=>wt.isPrototypeOf(He))?"string":xe},Sn=X=>xe=>dn(xe)===X,Qt=X=>xe=>typeof xe===X,Dn=X=>xe=>X===xe,xn=Sn("string"),Nt=Sn("object"),Et=Sn("array"),pt=Dn(null),hn=Qt("boolean"),rn=X=>X==null,Ut=X=>!rn(X),Ct=Qt("function"),Mt=(X,xe)=>{if(Et(X)){for(let He=0,wt=X.length;He<wt;++He)if(!xe(X[He]))return!1;return!0}return!1},cn=()=>{},Ze=X=>()=>X,st=(X,xe)=>X===xe;class Te{constructor(xe,He){this.tag=xe,this.value=He}static some(xe){return new Te(!0,xe)}static none(){return Te.singletonNone}fold(xe,He){return this.tag?He(this.value):xe()}isSome(){return this.tag}isNone(){return!this.tag}map(xe){return this.tag?Te.some(xe(this.value)):Te.none()}bind(xe){return this.tag?xe(this.value):Te.none()}exists(xe){return this.tag&&xe(this.value)}forall(xe){return!this.tag||xe(this.value)}filter(xe){return!this.tag||xe(this.value)?this:Te.none()}getOr(xe){return this.tag?this.value:xe}or(xe){return this.tag?this:xe}getOrThunk(xe){return this.tag?this.value:xe()}orThunk(xe){return this.tag?this:xe()}getOrDie(xe){if(this.tag)return this.value;throw new Error(xe??"Called getOrDie on None")}static from(xe){return Ut(xe)?Te.some(xe):Te.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(xe){this.tag&&xe(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Te.singletonNone=new Te(!1);const Q=Array.prototype.indexOf,ht=Array.prototype.push,It=(X,xe)=>Q.call(X,xe),yt=(X,xe)=>It(X,xe)>-1,Y=(X,xe)=>{const He=X.length,wt=new Array(He);for(let Gt=0;Gt<He;Gt++){const mo=X[Gt];wt[Gt]=xe(mo,Gt)}return wt},Ot=(X,xe)=>{for(let He=0,wt=X.length;He<wt;He++){const Gt=X[He];xe(Gt,He)}},Bn=(X,xe,He)=>(Ot(X,(wt,Gt)=>{He=xe(He,wt,Gt)}),He),$t=X=>{const xe=[];for(let He=0,wt=X.length;He<wt;++He){if(!Et(X[He]))throw new Error("Arr.flatten item "+He+" was not an array, input: "+X);ht.apply(xe,X[He])}return xe},ye=(X,xe)=>$t(Y(X,xe)),ee=(X,xe)=>{for(let He=0;He<X.length;He++){const wt=xe(X[He],He);if(wt.isSome())return wt}return Te.none()},at=(X,xe,He=st)=>X.exists(wt=>He(wt,xe)),Le=X=>{const xe=[],He=wt=>{xe.push(wt)};for(let wt=0;wt<X.length;wt++)X[wt].each(He);return xe},Me=(X,xe)=>X?Te.some(xe):Te.none(),Rt=X=>xe=>xe.options.get(X),_=X=>{const xe=X.options.register;xe("link_assume_external_targets",{processor:He=>{const wt=xn(He)||hn(He);return wt?He===!0?{value:1,valid:wt}:He==="http"||He==="https"?{value:He,valid:wt}:{value:0,valid:wt}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),xe("link_context_toolbar",{processor:"boolean",default:!1}),xe("link_list",{processor:He=>xn(He)||Ct(He)||Mt(He,Nt)}),xe("link_default_target",{processor:"string"}),xe("link_default_protocol",{processor:"string",default:"https"}),xe("link_target_list",{processor:He=>hn(He)||Mt(He,Nt),default:!0}),xe("link_rel_list",{processor:"object[]",default:[]}),xe("link_class_list",{processor:"object[]",default:[]}),xe("link_title",{processor:"boolean",default:!0}),xe("allow_unsafe_link_target",{processor:"boolean",default:!1}),xe("link_quicklink",{processor:"boolean",default:!1})},he=Rt("link_assume_external_targets"),Ue=Rt("link_context_toolbar"),Oe=Rt("link_list"),fe=Rt("link_default_target"),Kt=Rt("link_default_protocol"),nn=Rt("link_target_list"),Fe=Rt("link_rel_list"),Vt=Rt("link_class_list"),kt=Rt("link_title"),Ie=Rt("allow_unsafe_link_target"),R=Rt("link_quicklink");var Hn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Ae=X=>xn(X.value)?X.value:"",Se=X=>xn(X.text)?X.text:xn(X.title)?X.title:"",We=(X,xe)=>{const He=[];return Hn.each(X,wt=>{const Gt=Se(wt);if(wt.menu!==void 0){const mo=We(wt.menu,xe);He.push({text:Gt,items:mo})}else{const mo=xe(wt);He.push({text:Gt,value:mo})}}),He},Ee=(X=Ae)=>xe=>Te.from(xe).map(He=>We(He,X)),re={sanitize:X=>Ee(Ae)(X),sanitizeWith:Ee,createUi:(X,xe)=>He=>({name:X,type:"listbox",label:xe,items:He}),getValue:Ae},H=Object.keys,q=Object.hasOwnProperty,z=(X,xe)=>{const He=H(X);for(let wt=0,Gt=He.length;wt<Gt;wt++){const mo=He[wt],Ko=X[mo];xe(Ko,mo)}},Z=X=>(xe,He)=>{X[He]=xe},Ne=(X,xe,He,wt)=>{z(X,(Gt,mo)=>{(xe(Gt,mo)?He:wt)(Gt,mo)})},Pe=(X,xe)=>{const He={};return Ne(X,xe,Z(He),cn),He},Wt=(X,xe)=>q.call(X,xe),ot=(X,xe)=>Wt(X,xe)&&X[xe]!==void 0&&X[xe]!==null;var Qn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),uo=tinymce.util.Tools.resolve("tinymce.util.URI");const eo=X=>Ut(X)&&X.nodeName.toLowerCase()==="a",kn=X=>eo(X)&&!!Ye(X),ao=(X,xe)=>{if(X.collapsed)return[];{const He=X.cloneContents(),wt=He.firstChild,Gt=new Qn(wt,He),mo=[];let Ko=wt;do xe(Ko)&&mo.push(Ko);while(Ko=Gt.next());return mo}},Re=X=>/^\w+:/i.test(X),Ye=X=>{var xe,He;return(He=(xe=X.getAttribute("data-mce-href"))!==null&&xe!==void 0?xe:X.getAttribute("href"))!==null&&He!==void 0?He:""},Bt=(X,xe)=>{const He=["noopener"],wt=X?X.split(/\s+/):[],Gt=zs=>Hn.trim(zs.sort().join(" ")),mo=zs=>(zs=Ko(zs),zs.length>0?zs.concat(He):He),Ko=zs=>zs.filter($r=>Hn.inArray(He,$r)===-1),Ar=xe?mo(wt):Ko(wt);return Ar.length>0?Gt(Ar):""},an=X=>X.replace(/\uFEFF/g,""),An=(X,xe)=>(xe=xe||X.selection.getNode(),sn(xe)?Te.from(X.dom.select("a[href]",xe)[0]):Te.from(X.dom.getParent(xe,"a[href]"))),Tn=(X,xe)=>An(X,xe).isSome(),Do=(X,xe)=>{const He=xe.fold(()=>X.getContent({format:"text"}),wt=>wt.innerText||wt.textContent||"");return an(He)},ks=X=>Hn.grep(X,kn).length>0,qe=X=>ao(X,kn).length>0,ze=X=>{const xe=X.schema.getTextInlineElements(),He=mo=>mo.nodeType===1&&!eo(mo)&&!Wt(xe,mo.nodeName.toLowerCase());if(An(X).exists(mo=>mo.hasAttribute("data-mce-block")))return!1;const Gt=X.selection.getRng();return Gt.collapsed?!0:ao(Gt,He).length===0},sn=X=>Ut(X)&&X.nodeName==="FIGURE"&&/\bimage\b/i.test(X.className),on=X=>Bn(["title","rel","class","target"],(He,wt)=>(X[wt].each(Gt=>{He[wt]=Gt.length>0?Gt:null}),He),{href:X.href}),qt=(X,xe)=>(xe==="http"||xe==="https")&&!Re(X)?xe+"://"+X:X,Kn=(X,xe)=>{const He={...xe};if(Fe(X).length===0&&!Ie(X)){const wt=Bt(He.rel,He.target==="_blank");He.rel=wt||null}return Te.from(He.target).isNone()&&nn(X)===!1&&(He.target=fe(X)),He.href=qt(He.href,he(X)),He},Ts=(X,xe,He,wt)=>{He.each(Gt=>{Wt(xe,"innerText")?xe.innerText=Gt:xe.textContent=Gt}),X.dom.setAttribs(xe,wt),X.selection.select(xe)},_r=(X,xe,He,wt)=>{const Gt=X.dom;sn(xe)?Hs(Gt,xe,wt):He.fold(()=>{X.execCommand("mceInsertLink",!1,wt)},mo=>{X.insertContent(Gt.createHTML("a",wt,Gt.encode(mo)))})},ga=(X,xe,He)=>{const wt=X.selection.getNode(),Gt=An(X,wt),mo=Kn(X,on(He));X.undoManager.transact(()=>{He.href===xe.href&&xe.attach(),Gt.fold(()=>{_r(X,wt,He.text,mo)},Ko=>{X.focus(),Ts(X,Ko,He.text,mo)})})},bs=X=>{const xe=X.dom,He=X.selection,wt=He.getBookmark(),Gt=He.getRng().cloneRange(),mo=xe.getParent(Gt.startContainer,"a[href]",X.getBody()),Ko=xe.getParent(Gt.endContainer,"a[href]",X.getBody());mo&&Gt.setStartBefore(mo),Ko&&Gt.setEndAfter(Ko),He.setRng(Gt),X.execCommand("unlink"),He.moveToBookmark(wt)},wc=X=>{X.undoManager.transact(()=>{const xe=X.selection.getNode();sn(xe)?Gr(X,xe):bs(X),X.focus()})},ys=X=>{const{class:xe,href:He,rel:wt,target:Gt,text:mo,title:Ko}=X;return Pe({class:xe.getOrNull(),href:He,rel:wt.getOrNull(),target:Gt.getOrNull(),text:mo.getOrNull(),title:Ko.getOrNull()},(Ar,zs)=>pt(Ar)===!1)},cs=(X,xe)=>{const He=X.options.get,wt={allow_html_data_urls:He("allow_html_data_urls"),allow_script_urls:He("allow_script_urls"),allow_svg_data_urls:He("allow_svg_data_urls")},Gt=xe.href;return{...xe,href:uo.isDomSafe(Gt,"a",wt)?Gt:""}},go=(X,xe,He)=>{const wt=cs(X,He);X.hasPlugin("rtc",!0)?X.execCommand("createlink",!1,ys(wt)):ga(X,xe,wt)},gr=X=>{X.hasPlugin("rtc",!0)?X.execCommand("unlink"):wc(X)},Gr=(X,xe)=>{var He;const wt=X.dom.select("img",xe)[0];if(wt){const Gt=X.dom.getParents(wt,"a[href]",xe)[0];Gt&&((He=Gt.parentNode)===null||He===void 0||He.insertBefore(wt,Gt),X.dom.remove(Gt))}},Hs=(X,xe,He)=>{var wt;const Gt=X.select("img",xe)[0];if(Gt){const mo=X.create("a",He);(wt=Gt.parentNode)===null||wt===void 0||wt.insertBefore(mo,Gt),mo.appendChild(Gt)}},ha=X=>ot(X,"items"),qr=(X,xe)=>ee(xe,He=>ha(He)?qr(X,He.items):Me(He.value===X,He)),cc=(X,xe,He,wt)=>{const Gt=wt[xe],mo=X.length>0;return Gt!==void 0?qr(Gt,He).map(Ko=>({url:{value:Ko.value,meta:{text:mo?X:Ko.text,attach:cn}},text:mo?X:Ko.text})):Te.none()},Qs=(X,xe)=>xe==="link"?X.link:xe==="anchor"?X.anchor:Te.none(),we={init:(X,xe)=>{const He={text:X.text,title:X.title},wt=zs=>{var $r;return Me(He.title.length<=0,Te.from(($r=zs.meta)===null||$r===void 0?void 0:$r.title).getOr(""))},Gt=zs=>{var $r;return Me(He.text.length<=0,Te.from(($r=zs.meta)===null||$r===void 0?void 0:$r.text).getOr(zs.value))},mo=zs=>{const $r=Gt(zs.url),Or=wt(zs.url);return $r.isSome()||Or.isSome()?Te.some({...$r.map(Pr=>({text:Pr})).getOr({}),...Or.map(Pr=>({title:Pr})).getOr({})}):Te.none()},Ko=(zs,$r)=>{const Or=Qs(xe,$r).getOr([]);return cc(He.text,$r,Or,zs)};return{onChange:(zs,$r)=>{const Or=$r.name;return Or==="url"?mo(zs()):yt(["anchor","link"],Or)?Ko(zs(),Or):((Or==="text"||Or==="title")&&(He[Or]=zs()[Or]),Te.none())}}},getDelta:cc};var K=tinymce.util.Tools.resolve("tinymce.util.Delay");const ct=(X,xe,He)=>{const wt=X.selection.getRng();K.setEditorTimeout(X,()=>{X.windowManager.confirm(xe,Gt=>{X.selection.setRng(wt),He(Gt)})})},vt=X=>{const xe=X.href;return xe.indexOf("@")>0&&xe.indexOf("/")===-1&&xe.indexOf("mailto:")===-1?Te.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:wt=>({...wt,href:"mailto:"+xe})}):Te.none()},jn=(X,xe)=>He=>{const wt=He.href;return X===1&&!Re(wt)||X===0&&/^\s*www(\.|\d\.)/i.test(wt)?Te.some({message:`The URL you entered seems to be an external link. Do you want to add the required ${xe}:// prefix?`,preprocess:mo=>({...mo,href:xe+"://"+wt})}):Te.none()},In={preprocess:(X,xe)=>ee([vt,jn(he(X),Kt(X))],He=>He(xe)).fold(()=>Promise.resolve(xe),He=>new Promise(wt=>{ct(X,He.message,Gt=>{wt(Gt?He.preprocess(xe):xe)})}))},ts={getAnchors:X=>{const xe=X.dom.select("a:not([href])"),He=ye(xe,wt=>{const Gt=wt.name||wt.id;return Gt?[{text:Gt,value:"#"+Gt}]:[]});return He.length>0?Te.some([{text:"None",value:""}].concat(He)):Te.none()}},ir={getClasses:X=>{const xe=Vt(X);return xe.length>0?re.sanitize(xe):Te.none()}},Lt=X=>{try{return Te.some(JSON.parse(X))}catch{return Te.none()}},be={getLinks:X=>{const xe=wt=>X.convertURL(wt.value||wt.url||"","href"),He=Oe(X);return new Promise(wt=>{xn(He)?fetch(He).then(Gt=>Gt.ok?Gt.text().then(Lt):Promise.reject()).then(wt,()=>wt(Te.none())):Ct(He)?He(Gt=>wt(Te.some(Gt))):wt(Te.from(He))}).then(wt=>wt.bind(re.sanitizeWith(xe)).map(Gt=>Gt.length>0?[{text:"None",value:""}].concat(Gt):Gt))}},tn={getRels:(X,xe)=>{const He=Fe(X);if(He.length>0){const wt=at(xe,"_blank"),Gt=Ie(X)===!1,mo=Ar=>Bt(re.getValue(Ar),wt);return(Gt?re.sanitizeWith(mo):re.sanitize)(He)}return Te.none()}},un=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],pn={getTargets:X=>{const xe=nn(X);return Et(xe)?re.sanitize(xe).orThunk(()=>Te.some(un)):xe===!1?Te.none():Te.some(un)}},zn=(X,xe,He)=>{const wt=X.getAttrib(xe,He);return wt!==null&&wt.length>0?Te.some(wt):Te.none()},oo=(X,xe)=>{const He=X.dom,Gt=ze(X)?Te.some(Do(X.selection,xe)):Te.none(),mo=xe.bind(Or=>Te.from(He.getAttrib(Or,"href"))),Ko=xe.bind(Or=>Te.from(He.getAttrib(Or,"target"))),Ar=xe.bind(Or=>zn(He,Or,"rel")),zs=xe.bind(Or=>zn(He,Or,"class")),$r=xe.bind(Or=>zn(He,Or,"title"));return{url:mo,text:Gt,title:$r,target:Ko,rel:Ar,linkClass:zs}},Os={collect:(X,xe)=>be.getLinks(X).then(He=>{const wt=oo(X,xe);return{anchor:wt,catalogs:{targets:pn.getTargets(X),rels:tn.getRels(X,wt.target),classes:ir.getClasses(X),anchor:ts.getAnchors(X),link:He},optNode:xe,flags:{titleEnabled:kt(X)}}})},hr=(X,xe)=>He=>{const wt=He.getData();if(!wt.url.value){gr(X),He.close();return}const Gt=Ar=>Te.from(wt[Ar]).filter(zs=>!at(xe.anchor[Ar],zs)),mo={href:wt.url.value,text:Gt("text"),target:Gt("target"),rel:Gt("rel"),class:Gt("linkClass"),title:Gt("title")},Ko={href:wt.url.value,attach:wt.url.meta!==void 0&&wt.url.meta.attach?wt.url.meta.attach:cn};In.preprocess(X,mo).then(Ar=>{go(X,Ko,Ar)}),He.close()},qo=X=>{const xe=An(X);return Os.collect(X,xe)},Xc=(X,xe)=>{const He=X.anchor,wt=He.url.getOr("");return{url:{value:wt,meta:{original:{value:wt}}},text:He.text.getOr(""),title:He.title.getOr(""),anchor:wt,link:wt,rel:He.rel.getOr(""),target:He.target.or(xe).getOr(""),linkClass:He.linkClass.getOr("")}},ls=(X,xe,He)=>{const wt=[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],Gt=X.anchor.text.map(()=>({name:"text",type:"input",label:"Text to display"})).toArray(),mo=X.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Ko=Te.from(fe(He)),Ar=Xc(X,Ko),zs=X.catalogs,$r=we.init(Ar,zs);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:$t([wt,Gt,mo,Le([zs.anchor.map(re.createUi("anchor","Anchors")),zs.rels.map(re.createUi("rel","Rel")),zs.targets.map(re.createUi("target","Open link in...")),zs.link.map(re.createUi("link","Link list")),zs.classes.map(re.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Ar,onChange:(Pr,{name:Ha})=>{$r.onChange(Pr.getData,{name:Ha}).each(Kr=>{Pr.setData(Kr)})},onSubmit:xe}},Cs=X=>{qo(X).then(He=>{const wt=hr(X,He);return ls(He,wt,X)}).then(He=>{X.windowManager.open(He)})},xs=X=>{X.addCommand("mceLink",(xe,He)=>{(He==null?void 0:He.dialog)===!0||!R(X)?Cs(X):X.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"})})};var Lr=tinymce.util.Tools.resolve("tinymce.util.VK");const Br=(X,xe)=>{document.body.appendChild(X),X.dispatchEvent(xe),document.body.removeChild(X)},Fc=X=>{const xe=document.createElement("a");xe.target="_blank",xe.href=X,xe.rel="noreferrer noopener";const He=document.createEvent("MouseEvents");He.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Br(xe,He)},La=(X,xe)=>X.dom.getParent(xe,"a[href]"),Jc=X=>La(X,X.selection.getStart()),_i=X=>X.altKey===!0&&X.shiftKey===!1&&X.ctrlKey===!1&&X.metaKey===!1,Qc=(X,xe)=>{if(xe){const He=Ye(xe);if(/^#/.test(He)){const wt=X.dom.select(He);wt.length&&X.selection.scrollIntoView(wt[0],!0)}else Fc(xe.href)}},zi=X=>()=>{X.execCommand("mceLink",!1,{dialog:!0})},Us=X=>()=>{Qc(X,Jc(X))},gi=X=>{X.on("click",xe=>{const He=La(X,xe.target);He&&Lr.metaKeyPressed(xe)&&(xe.preventDefault(),Qc(X,He))}),X.on("keydown",xe=>{if(!xe.isDefaultPrevented()&&xe.keyCode===13&&_i(xe)){const He=Jc(X);He&&(xe.preventDefault(),Qc(X,He))}})},pa=(X,xe)=>(X.on("NodeChange",xe),()=>X.off("NodeChange",xe)),ic=X=>xe=>{const He=()=>xe.setActive(!X.mode.isReadOnly()&&Tn(X,X.selection.getNode()));return He(),pa(X,He)},hi=X=>xe=>{const He=()=>xe.setEnabled(Tn(X,X.selection.getNode()));return He(),pa(X,He)},Ic=X=>xe=>{const He=Gt=>ks(Gt)||qe(X.selection.getRng()),wt=X.dom.getParents(X.selection.getStart());return xe.setEnabled(He(wt)),pa(X,Gt=>xe.setEnabled(He(Gt.parents)))},aa=X=>{X.addShortcut("Meta+K","",()=>{X.execCommand("mceLink")})},Ai=X=>{X.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:zi(X),onSetup:ic(X)}),X.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Us(X),onSetup:hi(X)}),X.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:()=>gr(X),onSetup:Ic(X)})},Cc=X=>{X.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Us(X),onSetup:hi(X)}),X.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:zi(X)}),X.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:()=>gr(X),onSetup:Ic(X)})},Vi=X=>{const xe="link unlink openlink",He="link";X.ui.registry.addContextMenu("link",{update:wt=>ks(X.dom.getParents(wt,"a"))?xe:He})},er=X=>{const xe=Gt=>{Gt.selection.collapse(!1)},He=Gt=>{const mo=X.selection.getNode();return Gt.setEnabled(Tn(X,mo)),cn},wt=Gt=>{const mo=An(X),Ko=ze(X);if(mo.isNone()&&Ko){const Ar=Do(X.selection,mo);return Te.some(Ar.length>0?Ar:Gt)}else return Te.none()};X.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:ic(X)},label:"Link",predicate:Gt=>Ue(X)&&Tn(X,Gt),initValue:()=>An(X).fold(Ze(""),Ye),commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:Gt=>{const mo=X.selection.getNode();return Gt.setActive(Tn(X,mo)),ic(X)(Gt)},onAction:Gt=>{const mo=Gt.getValue(),Ko=wt(mo);go(X,{href:mo,attach:cn},{href:mo,text:Ko,title:Te.none(),rel:Te.none(),target:Te.none(),class:Te.none()}),xe(X),Gt.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:He,onAction:Gt=>{gr(X),Gt.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:He,onAction:Gt=>{Us(X)(),Gt.hide()}}]})};var ba=()=>{Ht.add("link",X=>{_(X),Ai(X),Cc(X),Vi(X),er(X),gi(X),xs(X),aa(X)})};ba()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=(E,B,j)=>{var ke;return j(E,B.prototype)?!0:((ke=E.constructor)===null||ke===void 0?void 0:ke.name)===B.name},dn=E=>{const B=typeof E;return E===null?"null":B==="object"&&Array.isArray(E)?"array":B==="object"&&yn(E,String,(j,ke)=>ke.isPrototypeOf(j))?"string":B},Sn=E=>B=>dn(B)===E,Qt=E=>B=>typeof B===E,Dn=Sn("string"),xn=Sn("object"),Nt=Sn("array"),Et=Qt("boolean"),pt=E=>E==null,hn=E=>!pt(E),rn=Qt("function"),Ut=Qt("number"),Ct=()=>{},Mt=E=>()=>E,cn=(E,B)=>E===B,Ze=E=>B=>!E(B),st=Mt(!1);class Te{constructor(B,j){this.tag=B,this.value=j}static some(B){return new Te(!0,B)}static none(){return Te.singletonNone}fold(B,j){return this.tag?j(this.value):B()}isSome(){return this.tag}isNone(){return!this.tag}map(B){return this.tag?Te.some(B(this.value)):Te.none()}bind(B){return this.tag?B(this.value):Te.none()}exists(B){return this.tag&&B(this.value)}forall(B){return!this.tag||B(this.value)}filter(B){return!this.tag||B(this.value)?this:Te.none()}getOr(B){return this.tag?this.value:B}or(B){return this.tag?this:B}getOrThunk(B){return this.tag?this.value:B()}orThunk(B){return this.tag?this:B()}getOrDie(B){if(this.tag)return this.value;throw new Error(B??"Called getOrDie on None")}static from(B){return hn(B)?Te.some(B):Te.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(B){this.tag&&B(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Te.singletonNone=new Te(!1);const Q=Array.prototype.slice,ht=Array.prototype.indexOf,It=Array.prototype.push,yt=(E,B)=>ht.call(E,B),Y=(E,B)=>yt(E,B)>-1,Ot=(E,B)=>{for(let j=0,ke=E.length;j<ke;j++){const Ve=E[j];if(B(Ve,j))return!0}return!1},Bn=(E,B)=>{const j=E.length,ke=new Array(j);for(let Ve=0;Ve<j;Ve++){const bn=E[Ve];ke[Ve]=B(bn,Ve)}return ke},$t=(E,B)=>{for(let j=0,ke=E.length;j<ke;j++){const Ve=E[j];B(Ve,j)}},ye=(E,B)=>{const j=[];for(let ke=0,Ve=E.length;ke<Ve;ke++){const bn=E[ke];B(bn,ke)&&j.push(bn)}return j},ee=(E,B)=>{if(E.length===0)return[];{let j=B(E[0]);const ke=[];let Ve=[];for(let bn=0,Co=E.length;bn<Co;bn++){const ns=E[bn],jo=B(ns);jo!==j&&(ke.push(Ve),Ve=[]),j=jo,Ve.push(ns)}return Ve.length!==0&&ke.push(Ve),ke}},at=(E,B,j)=>($t(E,(ke,Ve)=>{j=B(j,ke,Ve)}),j),Le=(E,B,j)=>{for(let ke=0,Ve=E.length;ke<Ve;ke++){const bn=E[ke];if(B(bn,ke))return Te.some(bn);if(j(bn,ke))break}return Te.none()},Me=(E,B)=>Le(E,B,st),Rt=E=>{const B=[];for(let j=0,ke=E.length;j<ke;++j){if(!Nt(E[j]))throw new Error("Arr.flatten item "+j+" was not an array, input: "+E);It.apply(B,E[j])}return B},_=(E,B)=>Rt(Bn(E,B)),he=E=>{const B=Q.call(E,0);return B.reverse(),B},Ue=(E,B)=>B>=0&&B<E.length?Te.some(E[B]):Te.none(),Oe=E=>Ue(E,0),fe=E=>Ue(E,E.length-1),Kt=(E,B)=>{const j=[],ke=rn(B)?Ve=>Ot(j,bn=>B(bn,Ve)):Ve=>Y(j,Ve);for(let Ve=0,bn=E.length;Ve<bn;Ve++){const Co=E[Ve];ke(Co)||j.push(Co)}return j},nn=(E,B,j=cn)=>E.exists(ke=>j(ke,B)),Fe=(E,B,j=cn)=>Vt(E,B,j).getOr(E.isNone()&&B.isNone()),Vt=(E,B,j)=>E.isSome()&&B.isSome()?Te.some(j(E.getOrDie(),B.getOrDie())):Te.none(),kt=1,Ie=(E,B)=>{const ke=(B||document).createElement("div");if(ke.innerHTML=E,!ke.hasChildNodes()||ke.childNodes.length>1){const Ve="HTML does not have a single root node";throw console.error(Ve,E),new Error(Ve)}return Ae(ke.childNodes[0])},R=(E,B)=>{const ke=(B||document).createElement(E);return Ae(ke)},Hn=(E,B)=>{const ke=(B||document).createTextNode(E);return Ae(ke)},Ae=E=>{if(E==null)throw new Error("Node cannot be null or undefined");return{dom:E}},We={fromHtml:Ie,fromTag:R,fromText:Hn,fromDom:Ae,fromPoint:(E,B,j)=>Te.from(E.dom.elementFromPoint(B,j)).map(Ae)},Ee=(E,B)=>{const j=E.dom;if(j.nodeType!==kt)return!1;{const ke=j;if(ke.matches!==void 0)return ke.matches(B);if(ke.msMatchesSelector!==void 0)return ke.msMatchesSelector(B);if(ke.webkitMatchesSelector!==void 0)return ke.webkitMatchesSelector(B);if(ke.mozMatchesSelector!==void 0)return ke.mozMatchesSelector(B);throw new Error("Browser lacks native selectors")}},ae=(E,B)=>E.dom===B.dom,se=(E,B)=>{const j=E.dom,ke=B.dom;return j===ke?!1:j.contains(ke)},re=Ee;var H=(E,B,j,ke,Ve)=>E(j,ke)?Te.some(j):rn(Ve)&&Ve(j)?Te.none():B(j,ke,Ve);typeof window<"u"||Function("return this;")();const q=E=>E.dom.nodeName.toLowerCase(),z=E=>E.dom.nodeType,Ne=(E=>B=>z(B)===E)(kt),Pe=E=>B=>Ne(B)&&q(B)===E,Wt=E=>Te.from(E.dom.parentNode).map(We.fromDom),ot=E=>Te.from(E.dom.parentElement).map(We.fromDom),Qn=E=>Te.from(E.dom.nextSibling).map(We.fromDom),uo=E=>Bn(E.dom.childNodes,We.fromDom),eo=(E,B)=>{const j=E.dom.childNodes;return Te.from(j[B]).map(We.fromDom)},kn=E=>eo(E,0),ao=E=>eo(E,E.dom.childNodes.length-1),Re=(E,B,j)=>{let ke=E.dom;const Ve=rn(j)?j:st;for(;ke.parentNode;){ke=ke.parentNode;const bn=We.fromDom(ke);if(B(bn))return Te.some(bn);if(Ve(bn))break}return Te.none()},Ye=(E,B,j)=>H((Ve,bn)=>bn(Ve),Re,E,B,j),Bt=(E,B)=>{Wt(E).each(ke=>{ke.dom.insertBefore(B.dom,E.dom)})},an=(E,B)=>{Qn(E).fold(()=>{Wt(E).each(Ve=>{An(Ve,B)})},ke=>{Bt(ke,B)})},An=(E,B)=>{E.dom.appendChild(B.dom)},Tn=(E,B)=>{$t(B,j=>{Bt(E,j)})},Do=(E,B)=>{$t(B,j=>{An(E,j)})},ks=E=>{E.dom.textContent="",$t(uo(E),B=>{qe(B)})},qe=E=>{const B=E.dom;B.parentNode!==null&&B.parentNode.removeChild(B)};var ze=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),sn=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),on=tinymce.util.Tools.resolve("tinymce.util.VK");const qt=E=>Bn(E,We.fromDom),Kn=Object.keys,Ts=(E,B)=>{const j=Kn(E);for(let ke=0,Ve=j.length;ke<Ve;ke++){const bn=j[ke],Co=E[bn];B(Co,bn)}},_r=E=>(B,j)=>{E[j]=B},ga=(E,B,j,ke)=>{Ts(E,(Ve,bn)=>{(B(Ve,bn)?j:ke)(Ve,bn)})},bs=(E,B)=>{const j={};return ga(E,B,_r(j),Ct),j},wc=(E,B,j)=>{if(Dn(j)||Et(j)||Ut(j))E.setAttribute(B,j+"");else throw console.error("Invalid call to Attribute.set. Key ",B,":: Value ",j,":: Element ",E),new Error("Attribute value was not simple")},ys=(E,B)=>{const j=E.dom;Ts(B,(ke,Ve)=>{wc(j,Ve,ke)})},cs=E=>at(E.dom.attributes,(B,j)=>(B[j.name]=j.value,B),{}),go=(E,B)=>We.fromDom(E.dom.cloneNode(B)),gr=E=>go(E,!0),Gr=(E,B)=>{const j=We.fromTag(B),ke=cs(E);return ys(j,ke),j},Hs=(E,B)=>{const j=Gr(E,B);an(E,j);const ke=uo(E);return Do(j,ke),qe(E),j};var ha=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),qr=tinymce.util.Tools.resolve("tinymce.util.Tools");const cc=E=>B=>hn(B)&&B.nodeName.toLowerCase()===E,Qs=E=>B=>hn(B)&&E.test(B.nodeName),_a=E=>hn(E)&&E.nodeType===3,we=E=>hn(E)&&E.nodeType===1,K=Qs(/^(OL|UL|DL)$/),ct=Qs(/^(OL|UL)$/),vt=cc("ol"),jn=Qs(/^(LI|DT|DD)$/),to=Qs(/^(DT|DD)$/),In=Qs(/^(TH|TD)$/),is=cc("br"),ts=E=>{var B;return((B=E.parentNode)===null||B===void 0?void 0:B.firstChild)===E},xo=(E,B)=>hn(B)&&B.nodeName in E.schema.getTextBlockElements(),ir=(E,B)=>hn(E)&&E.nodeName in B,Lt=(E,B)=>is(B)?E.isBlock(B.nextSibling)&&!is(B.previousSibling):!1,ge=(E,B,j)=>{const ke=E.isEmpty(B);return j&&E.select("span[data-mce-type=bookmark]",B).length>0?!1:ke},be=(E,B)=>E.isChildOf(B,E.getRoot()),_t=E=>B=>B.options.get(E),tn=E=>{const B=E.options.register;B("lists_indent_on_tab",{processor:"boolean",default:!0})},un=_t("lists_indent_on_tab"),Pn=_t("forced_root_block"),pn=_t("forced_root_block_attrs"),zn=(E,B)=>{const j=E.dom,ke=E.schema.getBlockElements(),Ve=j.createFragment(),bn=Pn(E),Co=pn(E);let ns,jo,no=!1;for(jo=j.create(bn,Co),ir(B.firstChild,ke)||Ve.appendChild(jo);ns=B.firstChild;){const os=ns.nodeName;!no&&(os!=="SPAN"||ns.getAttribute("data-mce-type")!=="bookmark")&&(no=!0),ir(ns,ke)?(Ve.appendChild(ns),jo=null):(jo||(jo=j.create(bn,Co),Ve.appendChild(jo)),jo.appendChild(ns))}return!no&&jo&&jo.appendChild(j.create("br",{"data-mce-bogus":"1"})),Ve},oo=ha.DOM,wo=(E,B,j)=>{const ke=no=>{const os=no.parentNode;os&&qr.each(Ve,Dr=>{os.insertBefore(Dr,j.parentNode)}),oo.remove(no)},Ve=oo.select('span[data-mce-type="bookmark"]',B),bn=zn(E,j),Co=oo.createRng();Co.setStartAfter(j),Co.setEndAfter(B);const ns=Co.extractContents();for(let no=ns.firstChild;no;no=no.firstChild)if(no.nodeName==="LI"&&E.dom.isEmpty(no)){oo.remove(no);break}E.dom.isEmpty(ns)||oo.insertAfter(ns,B),oo.insertAfter(bn,B);const jo=j.parentElement;jo&&ge(E.dom,jo)&&ke(jo),oo.remove(j),ge(E.dom,B)&&oo.remove(B)},Os=Pe("dd"),hr=Pe("dt"),qo=(E,B)=>{Os(B)?Hs(B,"dt"):hr(B)&&ot(B).each(j=>wo(E,j.dom,B.dom))},Xc=E=>{hr(E)&&Hs(E,"dd")},ls=(E,B,j)=>{B==="Indent"?$t(j,Xc):$t(j,ke=>qo(E,ke))},Cs=(E,B)=>{if(_a(E))return{container:E,offset:B};const j=ze.getNode(E,B);return _a(j)?{container:j,offset:B>=E.childNodes.length?j.data.length:0}:j.previousSibling&&_a(j.previousSibling)?{container:j.previousSibling,offset:j.previousSibling.data.length}:j.nextSibling&&_a(j.nextSibling)?{container:j.nextSibling,offset:0}:{container:E,offset:B}},xs=E=>{const B=E.cloneRange(),j=Cs(E.startContainer,E.startOffset);B.setStart(j.container,j.offset);const ke=Cs(E.endContainer,E.endOffset);return B.setEnd(ke.container,ke.offset),B},Lr=["OL","UL","DL"],Br=Lr.join(","),Fc=(E,B)=>{const j=B||E.selection.getStart(!0);return E.dom.getParent(j,Br,ic(E,j))},La=(E,B)=>hn(E)&&B.length===1&&B[0]===E,Jc=E=>ye(E.querySelectorAll(Br),K),_i=E=>{const B=Fc(E),j=E.selection.getSelectedBlocks();return La(B,j)?Jc(B):ye(j,ke=>K(ke)&&B!==ke)},Qc=(E,B)=>{const j=qr.map(B,ke=>{const Ve=E.dom.getParent(ke,"li,dd,dt",ic(E,ke));return Ve||ke});return Kt(j)},zi=E=>{const B=E.selection.getSelectedBlocks();return ye(Qc(E,B),jn)},Us=E=>ye(zi(E),to),gi=(E,B)=>{const j=E.dom.getParents(B,"TD,TH");return j.length>0?j[0]:E.getBody()},pa=(E,B)=>!K(B)&&!jn(B)&&Ot(Lr,j=>E.isValidChild(B.nodeName,j)),ic=(E,B)=>{const j=E.dom.getParents(B,E.dom.isBlock);return Me(j,Ve=>pa(E.schema,Ve)).getOr(E.getBody())},hi=(E,B)=>{const j=E.dom.getParents(B,"ol,ul",ic(E,B));return fe(j)},Ic=E=>{const B=hi(E,E.selection.getStart()),j=ye(E.selection.getSelectedBlocks(),ct);return B.toArray().concat(j)},aa=E=>{const B=Ic(E);return Ai(E,B)},Ai=(E,B)=>{const j=Bn(B,ke=>hi(E,ke).getOr(ke));return Kt(j)},Cc=E=>/\btox\-/.test(E.className),Vi=(E,B)=>Le(E,K,In).exists(j=>j.nodeName===B&&!Cc(j)),er=(E,B)=>B!==null&&E.dom.getContentEditableParent(B)==="false",ba=E=>{const B=Fc(E);return er(E,B)},X=(E,B)=>{const j=E.dom.getParent(B,"ol,ul,dl");return er(E,j)},xe=(E,B)=>{const j=E.selection.getNode();return B({parents:E.dom.getParents(j),element:j}),E.on("NodeChange",B),()=>E.off("NodeChange",B)},He=(E,B)=>{const ke=(B||document).createDocumentFragment();return $t(E,Ve=>{ke.appendChild(Ve.dom)}),We.fromDom(ke)},wt=(E,B,j)=>E.dispatch("ListMutation",{action:B,element:j}),mo=(E=>B=>B.replace(E,""))(/^\s+|\s+$/g),Ko=E=>E.length>0,Ar=E=>!Ko(E),zs=E=>E.style!==void 0&&rn(E.style.getPropertyValue),$r=(E,B,j)=>{if(!Dn(j))throw console.error("Invalid call to CSS.set. Property ",B,":: Value ",j,":: Element ",E),new Error("CSS value must be a string: "+j);zs(E)&&E.style.setProperty(B,j)},Or=(E,B,j)=>{const ke=E.dom;$r(ke,B,j)},Pr=(E,B)=>{An(E.item,B.list)},Ha=E=>{for(let B=1;B<E.length;B++)Pr(E[B-1],E[B])},Kr=(E,B)=>{Vt(fe(E),Oe(B),Pr)},ta=(E,B)=>{const j={list:We.fromTag(B,E),item:We.fromTag("li",E)};return An(j.list,j.item),j},ei=(E,B,j)=>{const ke=[];for(let Ve=0;Ve<j;Ve++)ke.push(ta(E,B.listType));return ke},ti=(E,B)=>{for(let j=0;j<E.length-1;j++)Or(E[j].item,"list-style-type","none");fe(E).each(j=>{ys(j.list,B.listAttributes),ys(j.item,B.itemAttributes),Do(j.item,B.content)})},ko=(E,B)=>{q(E.list)!==B.listType&&(E.list=Hs(E.list,B.listType)),ys(E.list,B.listAttributes)},us=(E,B,j)=>{const ke=We.fromTag("li",E);return ys(ke,B),Do(ke,j),ke},ar=(E,B)=>{An(E.list,B),E.item=B},$=(E,B,j)=>{const ke=B.slice(0,j.depth);return fe(ke).each(Ve=>{const bn=us(E,j.itemAttributes,j.content);ar(Ve,bn),ko(Ve,j)}),ke},J=(E,B,j)=>{const ke=ei(E,j,j.depth-B.length);return Ha(ke),ti(ke,j),Kr(B,ke),B.concat(ke)},de=(E,B)=>{const j=at(B,(ke,Ve)=>Ve.depth>ke.length?J(E,ke,Ve):$(E,ke,Ve),[]);return Oe(j).map(ke=>ke.list)},Xe=E=>re(E,"OL,UL"),Nn=E=>kn(E).exists(Xe),Mo=E=>ao(E).exists(Xe),Vn=E=>E.depth>0,Hr=E=>E.isSelected,pr=E=>{const B=uo(E),j=Mo(E)?B.slice(0,-1):B;return Bn(j,gr)},Dt=(E,B,j)=>Wt(E).filter(Ne).map(ke=>({depth:B,dirty:!1,isSelected:j,content:pr(E),itemAttributes:cs(E),listAttributes:cs(ke),listType:q(ke)})),ca=(E,B)=>{switch(E){case"Indent":B.depth++;break;case"Outdent":B.depth--;break;case"Flatten":B.depth=0}B.dirty=!0},tr=(E,B)=>{E.listType=B.listType,E.listAttributes={...B.listAttributes}},Zr=E=>{E.listAttributes=bs(E.listAttributes,(B,j)=>j!=="start")},sl=(E,B)=>{const j=E[B].depth,ke=bn=>bn.depth===j&&!bn.dirty,Ve=bn=>bn.depth<j;return Le(he(E.slice(0,B)),ke,Ve).orThunk(()=>Le(E.slice(B+1),ke,Ve))},Po=E=>($t(E,(B,j)=>{sl(E,j).fold(()=>{B.dirty&&Zr(B)},ke=>tr(B,ke))}),E),ne=E=>{let B=E;return{get:()=>B,set:Ve=>{B=Ve}}},me=(E,B,j,ke)=>kn(ke).filter(Xe).fold(()=>{B.each(Co=>{ae(Co.start,ke)&&j.set(!0)});const Ve=Dt(ke,E,j.get());B.each(Co=>{ae(Co.end,ke)&&j.set(!1)});const bn=ao(ke).filter(Xe).map(Co=>Qe(E,B,j,Co)).getOr([]);return Ve.toArray().concat(bn)},Ve=>Qe(E,B,j,Ve)),Qe=(E,B,j,ke)=>_(uo(ke),Ve=>{const bn=Xe(Ve)?Qe:me,Co=E+1;return bn(Co,B,j,Ve)}),dt=(E,B)=>{const j=ne(!1),ke=0;return Bn(E,Ve=>({sourceList:Ve,entries:Qe(ke,B,j,Ve)}))},Un=(E,B)=>{const j=Po(B);return Bn(j,ke=>{const Ve=He(ke.content);return We.fromDom(zn(E,Ve.dom))})},so=(E,B)=>{const j=Po(B);return de(E.contentDocument,j).toArray()},Ys=(E,B)=>_(ee(B,Vn),j=>Oe(j).exists(Vn)?so(E,j):Un(E,j)),Yo=(E,B)=>{$t(ye(E,Hr),j=>ca(B,j))},Ui=E=>{const B=Bn(zi(E),We.fromDom);return Vt(Me(B,Ze(Nn)),Me(he(B),Ze(Nn)),(j,ke)=>({start:j,end:ke}))},Qo=(E,B,j)=>{const ke=dt(B,Ui(E));$t(ke,Ve=>{Yo(Ve.entries,j);const bn=Ys(E,Ve.entries);$t(bn,Co=>{wt(E,j==="Indent"?"IndentList":"OutdentList",Co.dom)}),Tn(Ve.sourceList,bn),qe(Ve.sourceList)})},Ds=(E,B)=>{const j=qt(aa(E)),ke=qt(Us(E));let Ve=!1;if(j.length||ke.length){const bn=E.selection.getBookmark();Qo(E,j,B),ls(E,B,ke),E.selection.moveToBookmark(bn),E.selection.setRng(xs(E.selection.getRng())),E.nodeChanged(),Ve=!0}return Ve},Aa=(E,B)=>!ba(E)&&Ds(E,B),lc=E=>Aa(E,"Indent"),Wi=E=>Aa(E,"Outdent"),br=E=>Aa(E,"Flatten");var rr=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager");const Rs=ha.DOM,zr=E=>{const B={},j=ke=>{let Ve=E[ke?"startContainer":"endContainer"],bn=E[ke?"startOffset":"endOffset"];if(we(Ve)){const Co=Rs.create("span",{"data-mce-type":"bookmark"});Ve.hasChildNodes()?(bn=Math.min(bn,Ve.childNodes.length-1),ke?Ve.insertBefore(Co,Ve.childNodes[bn]):Rs.insertAfter(Co,Ve.childNodes[bn])):Ve.appendChild(Co),Ve=Co,bn=0}B[ke?"startContainer":"endContainer"]=Ve,B[ke?"startOffset":"endOffset"]=bn};return j(!0),E.collapsed||j(),B},Sc=E=>{const B=ke=>{const Ve=ns=>{var jo;let no=(jo=ns.parentNode)===null||jo===void 0?void 0:jo.firstChild,os=0;for(;no;){if(no===ns)return os;(!we(no)||no.getAttribute("data-mce-type")!=="bookmark")&&os++,no=no.nextSibling}return-1};let bn=E[ke?"startContainer":"endContainer"],Co=E[ke?"startOffset":"endOffset"];if(bn){if(we(bn)&&bn.parentNode){const ns=bn;Co=Ve(bn),bn=bn.parentNode,Rs.remove(ns),!bn.hasChildNodes()&&Rs.isBlock(bn)&&bn.appendChild(Rs.create("br"))}E[ke?"startContainer":"endContainer"]=bn,E[ke?"startOffset":"endOffset"]=Co}};B(!0),B();const j=Rs.createRng();return j.setStart(E.startContainer,E.startOffset),E.endContainer&&j.setEnd(E.endContainer,E.endOffset),xs(j)},Ol=E=>{switch(E){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},Yr=(E,B,j)=>{const ke=j["list-style-type"]?j["list-style-type"]:null;E.setStyle(B,"list-style-type",ke)},Yl=(E,B)=>{qr.each(B,(j,ke)=>{E.setAttribute(ke,j)})},Su=(E,B,j)=>{Yl(B,j["list-attributes"]),qr.each(E.select("li",B),ke=>{Yl(ke,j["list-item-attributes"])})},uc=(E,B,j)=>{Yr(E,B,j),Su(E,B,j)},xu=(E,B,j)=>{qr.each(j,ke=>E.setStyle(B,ke,""))},Yg=(E,B,j,ke)=>{let Ve=B[j?"startContainer":"endContainer"];const bn=B[j?"startOffset":"endOffset"];for(we(Ve)&&(Ve=Ve.childNodes[Math.min(bn,Ve.childNodes.length-1)]||Ve),!j&&is(Ve.nextSibling)&&(Ve=Ve.nextSibling);Ve.parentNode!==ke;){const Co=Ve.parentNode;if(xo(E,Ve)||/^(TD|TH)$/.test(Co.nodeName))return Ve;Ve=Co}return Ve},Lc=(E,B,j)=>{const ke=[],Ve=E.dom,bn=Yg(E,B,!0,j),Co=Yg(E,B,!1,j);let ns;const jo=[];for(let no=bn;no&&(jo.push(no),no!==Co);no=no.nextSibling);return qr.each(jo,no=>{var os;if(xo(E,no)){ke.push(no),ns=null;return}if(Ve.isBlock(no)||is(no)){is(no)&&Ve.remove(no),ns=null;return}const Dr=no.nextSibling;if(rr.isBookmarkNode(no)&&(K(Dr)||xo(E,Dr)||!Dr&&no.parentNode===j)){ns=null;return}ns||(ns=Ve.create("p"),(os=no.parentNode)===null||os===void 0||os.insertBefore(ns,no),ke.push(ns)),ns.appendChild(no)}),ke},Dl=(E,B,j)=>{const ke=E.getStyle(B,"list-style-type");let Ve=j?j["list-style-type"]:"";return Ve=Ve===null?"":Ve,ke===Ve},cd=(E,B,j)=>{const ke=E.selection.getRng();let Ve="LI";const bn=ic(E,E.selection.getStart(!0)),Co=E.dom;if(Co.getContentEditable(E.selection.getNode())==="false")return;B=B.toUpperCase(),B==="DL"&&(Ve="DT");const ns=zr(ke),jo=Lc(E,ke,bn);qr.each(jo,no=>{let os;const Dr=no.previousSibling,Xa=no.parentNode;jn(Xa)||(Dr&&K(Dr)&&Dr.nodeName===B&&Dl(Co,Dr,j)?(os=Dr,no=Co.rename(no,Ve),Dr.appendChild(no)):(os=Co.create(B),Xa.insertBefore(os,no),os.appendChild(no),no=Co.rename(no,Ve)),xu(Co,no,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),uc(Co,os,j),Xl(E.dom,os))}),E.selection.setRng(Sc(ns))},za=(E,B)=>K(E)&&E.nodeName===(B==null?void 0:B.nodeName),rl=(E,B,j)=>{const ke=E.getStyle(B,"list-style-type",!0),Ve=E.getStyle(j,"list-style-type",!0);return ke===Ve},ku=(E,B)=>E.className===B.className,zd=(E,B,j)=>za(B,j)&&rl(E,B,j)&&ku(B,j),Xl=(E,B)=>{let j,ke=B.nextSibling;if(zd(E,B,ke)){const Ve=ke;for(;j=Ve.firstChild;)B.appendChild(j);E.remove(Ve)}if(ke=B.previousSibling,zd(E,B,ke)){const Ve=ke;for(;j=Ve.lastChild;)B.insertBefore(j,B.firstChild);E.remove(Ve)}},Mm=(E,B,j,ke)=>{if(B.nodeName!==j){const Ve=E.dom.rename(B,j);uc(E.dom,Ve,ke),wt(E,Ol(j),Ve)}else uc(E.dom,B,ke),wt(E,Ol(j),B)},Vd=(E,B,j,ke,Ve)=>{const bn=K(B);if(bn&&B.nodeName===ke&&!Oi(Ve))br(E);else{cd(E,ke,Ve);const Co=zr(E.selection.getRng()),ns=bn?[B,...j]:j;qr.each(ns,jo=>{Mm(E,jo,ke,Ve)}),E.selection.setRng(Sc(Co))}},Oi=E=>"list-style-type"in E,Xg=(E,B,j,ke)=>{if(B!==E.getBody())if(B)if(B.nodeName===j&&!Oi(ke)&&!Cc(B))br(E);else{const Ve=zr(E.selection.getRng());uc(E.dom,B,ke);const bn=E.dom.rename(B,j);Xl(E.dom,bn),E.selection.setRng(Sc(Ve)),cd(E,j,ke),wt(E,Ol(j),bn)}else cd(E,j,ke),wt(E,Ol(j),B)},Nm=(E,B,j)=>{const ke=Fc(E);if(X(E,ke))return;const Ve=_i(E),bn=xn(j)?j:{};Ve.length>0?Vd(E,ke,Ve,B,bn):Xg(E,ke,B,bn)},Tu=ha.DOM,Ud=(E,B)=>{const j=B.parentElement;if(j&&j.nodeName==="LI"&&j.firstChild===B){const ke=j.previousSibling;ke&&ke.nodeName==="LI"?(ke.appendChild(B),ge(E,j)&&Tu.remove(j)):Tu.setStyle(j,"listStyleType","none")}if(K(j)){const ke=j.previousSibling;ke&&ke.nodeName==="LI"&&ke.appendChild(B)}},Di=(E,B)=>{const j=qr.grep(E.select("ol,ul",B));qr.each(j,ke=>{Ud(E,ke)})},ve=(E,B,j,ke)=>{let Ve=B.startContainer;const bn=B.startOffset;if(_a(Ve)&&(j?bn<Ve.data.length:bn>0))return Ve;const Co=E.schema.getNonEmptyElements();we(Ve)&&(Ve=ze.getNode(Ve,bn));const ns=new sn(Ve,ke);j&&Lt(E.dom,Ve)&&ns.next();const jo=j?ns.next.bind(ns):ns.prev2.bind(ns);for(;Ve=jo();)if(Ve.nodeName==="LI"&&!Ve.hasChildNodes()||Co[Ve.nodeName]||_a(Ve)&&Ve.data.length>0)return Ve;return null},Jl=(E,B)=>{const j=B.childNodes;return j.length===1&&!K(j[0])&&E.isBlock(j[0])},Ri=(E,B)=>{Jl(E,B)&&E.remove(B.firstChild,!0)},Bm=(E,B,j)=>{let ke;const Ve=Jl(E,j)?j.firstChild:j;if(Ri(E,B),!ge(E,B,!0))for(;ke=B.firstChild;)Ve.appendChild(ke)},$m=(E,B,j)=>{let ke;const Ve=B.parentNode;if(!be(E,B)||!be(E,j))return;K(j.lastChild)&&(ke=j.lastChild),Ve===j.lastChild&&is(Ve.previousSibling)&&E.remove(Ve.previousSibling);const bn=j.lastChild;bn&&is(bn)&&B.hasChildNodes()&&E.remove(bn),ge(E,j,!0)&&ks(We.fromDom(j)),Bm(E,B,j),ke&&j.appendChild(ke);const ns=se(We.fromDom(j),We.fromDom(B))?E.getParents(B,K,j):[];E.remove(B),$t(ns,jo=>{ge(E,jo)&&jo!==E.getRoot()&&E.remove(jo)})},Jg=(E,B,j)=>{ks(We.fromDom(j)),$m(E.dom,B,j),E.selection.setCursorLocation(j,0)},Ps=(E,B,j,ke)=>{const Ve=E.dom;if(Ve.isEmpty(ke))Jg(E,j,ke);else{const bn=zr(B);$m(Ve,j,ke),E.selection.setRng(Sc(bn))}},Ya=(E,B,j,ke)=>{const Ve=zr(B);$m(E.dom,j,ke);const bn=Sc(Ve);E.selection.setRng(bn)},Lf=(E,B)=>{const j=E.dom,ke=E.selection,Ve=ke.getStart(),bn=gi(E,Ve),Co=j.getParent(ke.getStart(),"LI",bn);if(Co){const ns=Co.parentElement;if(ns===E.getBody()&&ge(j,ns))return!0;const jo=xs(ke.getRng()),no=j.getParent(ve(E,jo,B,bn),"LI",bn);if(no&&no!==Co)return E.undoManager.transact(()=>{B?Ps(E,jo,no,Co):ts(Co)?Wi(E):Ya(E,jo,Co,no)}),!0;if(!no&&!B&&jo.startOffset===0&&jo.endOffset===0)return E.undoManager.transact(()=>{br(E)}),!0}return!1},Zi=(E,B,j)=>{const ke=E.getParent(B.parentNode,E.isBlock,j);E.remove(B),ke&&E.isEmpty(ke)&&E.remove(ke)},Pm=(E,B)=>{const j=E.dom,ke=E.selection.getStart(),Ve=gi(E,ke),bn=j.getParent(ke,j.isBlock,Ve);if(bn&&j.isEmpty(bn)){const Co=xs(E.selection.getRng()),ns=j.getParent(ve(E,Co,B,Ve),"LI",Ve);if(ns){const jo=Xa=>Y(["td","th","caption"],q(Xa)),no=Xa=>Xa.dom===Ve,os=Ye(We.fromDom(ns),jo,no),Dr=Ye(We.fromDom(Co.startContainer),jo,no);return Fe(os,Dr,ae)?(E.undoManager.transact(()=>{Zi(j,bn,Ve),Xl(j,ns.parentNode),E.selection.select(ns,!0),E.selection.collapse(B)}),!0):!1}}return!1},Eu=(E,B)=>Lf(E,B)||Pm(E,B),xc=E=>{const B=E.selection.getStart(),j=gi(E,B);return E.dom.getParent(B,"LI,DT,DD",j)||zi(E).length>0},Hf=E=>xc(E)?(E.undoManager.transact(()=>{E.execCommand("Delete"),Di(E.dom,E.getBody())}),!0):!1,id=(E,B)=>{const j=E.selection;return!X(E,j.getNode())&&(j.isCollapsed()?Eu(E,B):Hf(E))},Qg=E=>{E.on("ExecCommand",B=>{const j=B.command.toLowerCase();(j==="delete"||j==="forwarddelete")&&xc(E)&&Di(E.dom,E.getBody())}),E.on("keydown",B=>{B.keyCode===on.BACKSPACE?id(E,!1)&&B.preventDefault():B.keyCode===on.DELETE&&id(E,!0)&&B.preventDefault()})},Hc=E=>({backspaceDelete:B=>{id(E,B)}}),Wd=(E,B)=>{const j=Fc(E);j===null||X(E,j)||E.undoManager.transact(()=>{xn(B.styles)&&E.dom.setStyles(j,B.styles),xn(B.attrs)&&Ts(B.attrs,(ke,Ve)=>E.dom.setAttrib(j,Ve,ke))})},Fm=E=>{const B=he(mo(E).split("")),j=Bn(B,(ke,Ve)=>{const bn=ke.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,Ve)*bn});return at(j,(ke,Ve)=>ke+Ve,0)},ld=E=>{if(E--,E<0)return"";{const B=E%26,j=Math.floor(E/26),ke=ld(j),Ve=String.fromCharCode("A".charCodeAt(0)+B);return ke+Ve}},va=E=>/^[A-Z]+$/.test(E),Zd=E=>/^[a-z]+$/.test(E),zf=E=>/^[0-9]+$/.test(E),Im=E=>zf(E)?2:va(E)?0:Zd(E)?1:Ar(E)?3:4,_u=E=>{switch(Im(E)){case 2:return Te.some({listStyleType:Te.none(),start:E});case 0:return Te.some({listStyleType:Te.some("upper-alpha"),start:Fm(E).toString()});case 1:return Te.some({listStyleType:Te.some("lower-alpha"),start:Fm(E).toString()});case 3:return Te.some({listStyleType:Te.none(),start:""});case 4:return Te.none()}},eh=E=>{const B=parseInt(E.start,10);return nn(E.listStyleType,"upper-alpha")?ld(B):nn(E.listStyleType,"lower-alpha")?ld(B).toLowerCase():E.start},Lm=E=>{const B=Fc(E);!vt(B)||X(E,B)||E.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:eh({start:E.dom.getAttrib(B,"start","1"),listStyleType:Te.from(E.dom.getStyle(B,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:j=>{const ke=j.getData();_u(ke.start).each(Ve=>{E.execCommand("mceListUpdate",!1,{attrs:{start:Ve.start==="1"?"":Ve.start},styles:{"list-style-type":Ve.listStyleType.getOr("")}})}),j.close()}})},kc=(E,B)=>()=>{const j=Fc(E);return hn(j)&&j.nodeName===B},th=E=>{E.addCommand("mceListProps",()=>{Lm(E)})},al=E=>{E.on("BeforeExecCommand",B=>{const j=B.command.toLowerCase();j==="indent"?lc(E):j==="outdent"&&Wi(E)}),E.addCommand("InsertUnorderedList",(B,j)=>{Nm(E,"UL",j)}),E.addCommand("InsertOrderedList",(B,j)=>{Nm(E,"OL",j)}),E.addCommand("InsertDefinitionList",(B,j)=>{Nm(E,"DL",j)}),E.addCommand("RemoveList",()=>{br(E)}),th(E),E.addCommand("mceListUpdate",(B,j)=>{xn(j)&&Wd(E,j)}),E.addQueryStateHandler("InsertUnorderedList",kc(E,"UL")),E.addQueryStateHandler("InsertOrderedList",kc(E,"OL")),E.addQueryStateHandler("InsertDefinitionList",kc(E,"DL"))},ud=E=>{E.on("keydown",B=>{B.keyCode!==on.TAB||on.metaKeyPressed(B)||E.undoManager.transact(()=>{(B.shiftKey?Wi(E):lc(E))&&B.preventDefault()})})},Ql=E=>{un(E)&&ud(E),Qg(E)},ji=(E,B)=>j=>xe(E,Ve=>{j.setActive(Vi(Ve.parents,B)),j.setEnabled(!X(E,Ve.element))}),nh=E=>{const B=j=>()=>E.execCommand(j);E.hasPlugin("advlist")||(E.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:B("InsertOrderedList"),onSetup:ji(E,"OL")}),E.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:B("InsertUnorderedList"),onSetup:ji(E,"UL")}))},oh=(E,B)=>j=>xe(E,Ve=>j.setEnabled(Vi(Ve.parents,B)&&!X(E,Ve.element))),Vf=E=>{const B={text:"List properties...",icon:"ordered-list",onAction:()=>E.execCommand("mceListProps"),onSetup:oh(E,"OL")};E.ui.registry.addMenuItem("listprops",B),E.ui.registry.addContextMenu("lists",{update:j=>{const ke=Fc(E,j);return vt(ke)?["listprops"]:[]}})};var cl=()=>{Ht.add("lists",E=>(tn(E),E.hasPlugin("rtc",!0)?th(E):(Ql(E),al(E)),nh(E),Vf(E),Hc(E)))};cl()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=(we,K,ct)=>{var vt;return ct(we,K.prototype)?!0:((vt=we.constructor)===null||vt===void 0?void 0:vt.name)===K.name},dn=we=>{const K=typeof we;return we===null?"null":K==="object"&&Array.isArray(we)?"array":K==="object"&&yn(we,String,(ct,vt)=>vt.isPrototypeOf(ct))?"string":K},Sn=we=>K=>dn(K)===we,Qt=Sn("string"),Dn=Sn("object"),xn=Sn("array"),Nt=we=>we==null,Et=we=>!Nt(we);class pt{constructor(K,ct){this.tag=K,this.value=ct}static some(K){return new pt(!0,K)}static none(){return pt.singletonNone}fold(K,ct){return this.tag?ct(this.value):K()}isSome(){return this.tag}isNone(){return!this.tag}map(K){return this.tag?pt.some(K(this.value)):pt.none()}bind(K){return this.tag?K(this.value):pt.none()}exists(K){return this.tag&&K(this.value)}forall(K){return!this.tag||K(this.value)}filter(K){return!this.tag||K(this.value)?this:pt.none()}getOr(K){return this.tag?this.value:K}or(K){return this.tag?this:K}getOrThunk(K){return this.tag?this.value:K()}orThunk(K){return this.tag?this:K()}getOrDie(K){if(this.tag)return this.value;throw new Error(K??"Called getOrDie on None")}static from(K){return Et(K)?pt.some(K):pt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(K){this.tag&&K(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}pt.singletonNone=new pt(!1);const hn=Array.prototype.push,rn=(we,K)=>{for(let ct=0,vt=we.length;ct<vt;ct++){const jn=we[ct];K(jn,ct)}},Ut=we=>{const K=[];for(let ct=0,vt=we.length;ct<vt;++ct){if(!xn(we[ct]))throw new Error("Arr.flatten item "+ct+" was not an array, input: "+we);hn.apply(K,we[ct])}return K},Ct=we=>{let K=we;return{get:()=>K,set:jn=>{K=jn}}},Mt=Object.keys,cn=Object.hasOwnProperty,Ze=(we,K)=>{const ct=Mt(we);for(let vt=0,jn=ct.length;vt<jn;vt++){const to=ct[vt],In=we[to];K(In,to)}},st=(we,K)=>Te(we,K)?pt.from(we[K]):pt.none(),Te=(we,K)=>cn.call(we,K),Q=we=>K=>K.options.get(we),ht=we=>{const K=we.options.register;K("audio_template_callback",{processor:"function"}),K("video_template_callback",{processor:"function"}),K("iframe_template_callback",{processor:"function"}),K("media_live_embeds",{processor:"boolean",default:!0}),K("media_filter_html",{processor:"boolean",default:!0}),K("media_url_resolver",{processor:"function"}),K("media_alt_source",{processor:"boolean",default:!0}),K("media_poster",{processor:"boolean",default:!0}),K("media_dimensions",{processor:"boolean",default:!0})},It=Q("audio_template_callback"),yt=Q("video_template_callback"),Y=Q("iframe_template_callback"),Ot=Q("media_live_embeds"),Bn=Q("media_filter_html"),$t=Q("media_url_resolver"),ye=Q("media_alt_source"),ee=Q("media_poster"),at=Q("media_dimensions");var Le=tinymce.util.Tools.resolve("tinymce.util.Tools"),Me=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Rt=tinymce.util.Tools.resolve("tinymce.html.DomParser");const _=Me.DOM,he=we=>we.replace(/px$/,""),Ue=we=>{const K=we.attr("style"),ct=K?_.parseStyle(K):{};return{type:"ephox-embed-iri",source:we.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:st(ct,"max-width").map(he).getOr(""),height:st(ct,"max-height").map(he).getOr("")}},Oe=(we,K)=>{let ct={};const jn=Rt({validate:!1,forced_root_block:!1},K).parse(we);for(let to=jn;to;to=to.walk())if(to.type===1){const In=to.name;if(to.attr("data-ephox-embed-iri")){ct=Ue(to);break}else!ct.source&&In==="param"&&(ct.source=to.attr("movie")),(In==="iframe"||In==="object"||In==="embed"||In==="video"||In==="audio")&&(ct.type||(ct.type=In),ct=Le.extend(to.attributes.map,ct)),In==="script"&&(ct={type:"script",source:to.attr("src")}),In==="source"&&(ct.source?ct.altsource||(ct.altsource=to.attr("src")):ct.source=to.attr("src")),In==="img"&&!ct.poster&&(ct.poster=to.attr("src"))}return ct.source=ct.source||ct.src||"",ct.altsource=ct.altsource||"",ct.poster=ct.poster||"",ct},fe=we=>{var K;const ct={mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},vt=(K=we.toLowerCase().split(".").pop())!==null&&K!==void 0?K:"";return st(ct,vt).getOr("")};var Kt=tinymce.util.Tools.resolve("tinymce.html.Node"),nn=tinymce.util.Tools.resolve("tinymce.html.Serializer");const Fe=(we,K={})=>Rt({forced_root_block:!1,validate:!1,allow_conditional_comments:!0,...K},we),Vt=Me.DOM,kt=we=>/^[0-9.]+$/.test(we)?we+"px":we,Ie=(we,K)=>{const ct=K.attr("style"),vt=ct?Vt.parseStyle(ct):{};Et(we.width)&&(vt["max-width"]=kt(we.width)),Et(we.height)&&(vt["max-height"]=kt(we.height)),K.attr("style",Vt.serializeStyle(vt))},R=["source","altsource"],Hn=(we,K,ct,vt)=>{let jn=0,to=0;const In=Fe(vt);In.addNodeFilter("source",ts=>jn=ts.length);const is=In.parse(we);for(let ts=is;ts;ts=ts.walk())if(ts.type===1){const xo=ts.name;if(ts.attr("data-ephox-embed-iri")){Ie(K,ts);break}else{switch(xo){case"video":case"object":case"embed":case"img":case"iframe":K.height!==void 0&&K.width!==void 0&&(ts.attr("width",K.width),ts.attr("height",K.height));break}if(ct)switch(xo){case"video":ts.attr("poster",K.poster),ts.attr("src",null);for(let Lt=jn;Lt<2;Lt++)if(K[R[Lt]]){const ge=new Kt("source",1);ge.attr("src",K[R[Lt]]),ge.attr("type",K[R[Lt]+"mime"]||null),ts.append(ge)}break;case"iframe":ts.attr("src",K.source);break;case"object":const ir=ts.getAll("img").length>0;if(K.poster&&!ir){ts.attr("src",K.poster);const Lt=new Kt("img",1);Lt.attr("src",K.poster),Lt.attr("width",K.width),Lt.attr("height",K.height),ts.append(Lt)}break;case"source":if(to<2&&(ts.attr("src",K[R[to]]),ts.attr("type",K[R[to]+"mime"]||null),!K[R[to]])){ts.remove();continue}to++;break;case"img":K.poster||ts.remove();break}}}return nn({},vt).serialize(is)},Ae=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],Se=we=>{const K=we.match(/^(https?:\/\/|www\.)(.+)$/i);return K&&K.length>1?K[1]==="www."?"https://":K[1]:"https://"},We=(we,K)=>{const ct=Se(K),vt=we.regex.exec(K);let jn=ct+we.url;if(Et(vt))for(let to=0;to<vt.length;to++)jn=jn.replace("$"+to,()=>vt[to]?vt[to]:"");return jn.replace(/\?$/,"")},Ee=we=>{const K=Ae.filter(ct=>ct.regex.test(we));return K.length>0?Le.extend({},K[0],{url:We(K[0],we)}):null},ae=(we,K)=>{if(K)return K(we);{const ct=we.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+we.source+'" width="'+we.width+'" height="'+we.height+'"'+ct+"></iframe>"}},se=we=>{let K='<object data="'+we.source+'" width="'+we.width+'" height="'+we.height+'" type="application/x-shockwave-flash">';return we.poster&&(K+='<img src="'+we.poster+'" width="'+we.width+'" height="'+we.height+'" />'),K+="</object>",K},re=(we,K)=>K?K(we):'<audio controls="controls" src="'+we.source+'">'+(we.altsource?`
<source src="`+we.altsource+'"'+(we.altsourcemime?' type="'+we.altsourcemime+'"':"")+` />
`:"")+"</audio>",H=(we,K)=>K?K(we):'<video width="'+we.width+'" height="'+we.height+'"'+(we.poster?' poster="'+we.poster+'"':"")+` controls="controls">
<source src="`+we.source+'"'+(we.sourcemime?' type="'+we.sourcemime+'"':"")+` />
`+(we.altsource?'<source src="'+we.altsource+'"'+(we.altsourcemime?' type="'+we.altsourcemime+'"':"")+` />
`:"")+"</video>",q=we=>'<script src="'+we.source+'"><\/script>',z=(we,K)=>{var ct;const vt=Le.extend({},K);if(!vt.source&&(Le.extend(vt,Oe((ct=vt.embed)!==null&&ct!==void 0?ct:"",we.schema)),!vt.source))return"";vt.altsource||(vt.altsource=""),vt.poster||(vt.poster=""),vt.source=we.convertURL(vt.source,"source"),vt.altsource=we.convertURL(vt.altsource,"source"),vt.sourcemime=fe(vt.source),vt.altsourcemime=fe(vt.altsource),vt.poster=we.convertURL(vt.poster,"poster");const jn=Ee(vt.source);if(jn&&(vt.source=jn.url,vt.type=jn.type,vt.allowfullscreen=jn.allowFullscreen,vt.width=vt.width||String(jn.w),vt.height=vt.height||String(jn.h)),vt.embed)return Hn(vt.embed,vt,!0,we.schema);{const to=It(we),In=yt(we),is=Y(we);return vt.width=vt.width||"300",vt.height=vt.height||"150",Le.each(vt,(ts,xo)=>{vt[xo]=we.dom.encode(""+ts)}),vt.type==="iframe"?ae(vt,is):vt.sourcemime==="application/x-shockwave-flash"?se(vt):vt.sourcemime.indexOf("audio")!==-1?re(vt,to):vt.type==="script"?q(vt):H(vt,In)}},Z=we=>we.hasAttribute("data-mce-object")||we.hasAttribute("data-ephox-embed-iri"),Ne=we=>{we.on("click keyup touchend",()=>{const K=we.selection.getNode();K&&we.dom.hasClass(K,"mce-preview-object")&&we.dom.getAttrib(K,"data-mce-selected")&&K.setAttribute("data-mce-selected","2")}),we.on("ObjectSelected",K=>{K.target.getAttribute("data-mce-object")==="script"&&K.preventDefault()}),we.on("ObjectResized",K=>{const ct=K.target;if(ct.getAttribute("data-mce-object")){let vt=ct.getAttribute("data-mce-html");vt&&(vt=unescape(vt),ct.setAttribute("data-mce-html",escape(Hn(vt,{width:String(K.width),height:String(K.height)},!1,we.schema))))}})},Pe={},Wt=(we,K,ct)=>new Promise((vt,jn)=>{const to=In=>(In.html&&(Pe[we.source]=In),vt({url:we.source,html:In.html?In.html:K(we)}));Pe[we.source]?to(Pe[we.source]):ct({url:we.source},to,jn)}),ot=(we,K)=>Promise.resolve({html:K(we),url:we.source}),Qn=we=>K=>z(we,K),uo=(we,K)=>{const ct=$t(we);return ct?Wt(K,Qn(we),ct):ot(K,Qn(we))},eo=we=>Te(Pe,we),kn=(we,K)=>st(K,we).bind(ct=>st(ct,"meta")),ao=(we,K,ct)=>vt=>{const jn=()=>st(we,vt),to=()=>st(K,vt),In=xo=>st(xo,"value").bind(ir=>ir.length>0?pt.some(ir):pt.none()),is=()=>jn().bind(xo=>Dn(xo)?In(xo).orThunk(to):to().orThunk(()=>pt.from(xo))),ts=()=>to().orThunk(()=>jn().bind(xo=>Dn(xo)?In(xo):pt.from(xo)));return{[vt]:(vt===ct?is():ts()).getOr("")}},Re=(we,K)=>{const ct={};return st(we,"dimensions").each(vt=>{rn(["width","height"],jn=>{st(K,jn).orThunk(()=>st(vt,jn)).each(to=>ct[jn]=to)})}),ct},Ye=(we,K)=>{const ct=K&&K!=="dimensions"?kn(K,we).getOr({}):{},vt=ao(we,ct,K);return{...vt("source"),...vt("altsource"),...vt("poster"),...vt("embed"),...Re(we,ct)}},Bt=we=>{const K={...we,source:{value:st(we,"source").getOr("")},altsource:{value:st(we,"altsource").getOr("")},poster:{value:st(we,"poster").getOr("")}};return rn(["width","height"],ct=>{st(we,ct).each(vt=>{const jn=K.dimensions||{};jn[ct]=vt,K.dimensions=jn})}),K},an=we=>K=>{const ct=K&&K.msg?"Media embed handler error: "+K.msg:"Media embed handler threw unknown error.";we.notificationManager.open({type:"error",text:ct})},An=we=>{const K=we.selection.getNode(),ct=Z(K)?we.serializer.serialize(K,{selection:!0}):"";return{embed:ct,...Oe(ct,we.schema)}},Tn=(we,K)=>ct=>{if(Qt(ct.url)&&ct.url.trim().length>0){const vt=ct.html,to={...Oe(vt,K.schema),source:ct.url,embed:vt};we.setData(Bt(to))}},Do=(we,K)=>{const ct=we.dom.select("*[data-mce-object]");for(let vt=0;vt<K.length;vt++)for(let jn=ct.length-1;jn>=0;jn--)K[vt]===ct[jn]&&ct.splice(jn,1);we.selection.select(ct[0])},ks=(we,K)=>{const ct=we.dom.select("*[data-mce-object]");we.insertContent(K),Do(we,ct),we.nodeChanged()},qe=(we,K,ct)=>{var vt;K.embed=Hn((vt=K.embed)!==null&&vt!==void 0?vt:"",K,!1,ct.schema),K.embed&&(we.source===K.source||eo(K.source))?ks(ct,K.embed):uo(ct,K).then(jn=>{ks(ct,jn.html)}).catch(an(ct))},ze=we=>{const K=An(we),ct=Ct(K),vt=Bt(K),jn=(Pn,pn)=>{const zn=Ye(pn.getData(),"source");Pn.source!==zn.source&&(Tn(un,we)({url:zn.source,html:""}),uo(we,zn).then(Tn(un,we)).catch(an(we)))},to=Pn=>{var pn;const zn=Ye(Pn.getData()),oo=Oe((pn=zn.embed)!==null&&pn!==void 0?pn:"",we.schema);Pn.setData(Bt(oo))},In=(Pn,pn)=>{const zn=Ye(Pn.getData(),pn),oo=z(we,zn);Pn.setData(Bt({...zn,embed:oo}))},is=[{name:"source",type:"urlinput",filetype:"media",label:"Source"}],ts=at(we)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],xo={title:"General",name:"general",items:Ut([is,ts])},Lt={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},ge=[];ye(we)&&ge.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),ee(we)&&ge.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});const be={title:"Advanced",name:"advanced",items:ge},_t=[xo,Lt];ge.length>0&&_t.push(be);const tn={type:"tabpanel",tabs:_t},un=we.windowManager.open({title:"Insert/Edit Media",size:"normal",body:tn,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:Pn=>{const pn=Ye(Pn.getData());qe(ct.get(),pn,we),Pn.close()},onChange:(Pn,pn)=>{switch(pn.name){case"source":jn(ct.get(),Pn);break;case"embed":to(Pn);break;case"dimensions":case"altsource":case"poster":In(Pn,pn.name);break}ct.set(Ye(Pn.getData()))},initialData:vt})},sn=we=>({showDialog:()=>{ze(we)}}),on=we=>{const K=()=>{ze(we)};we.addCommand("mceMedia",K)},qt=(we,K,ct)=>K===""||we.length>=K.length&&we.substr(ct,ct+K.length)===K,Kn=(we,K)=>qt(we,K,0);var Ts=tinymce.util.Tools.resolve("tinymce.Env");const _r=we=>{const K=we.name;return K==="iframe"||K==="video"||K==="audio"},ga=(we,K,ct,vt=null)=>{const jn=we.attr(ct);return Et(jn)?jn:Te(K,ct)?null:vt},bs=(we,K,ct)=>{const vt=K.name==="img"||we.name==="video",jn=vt?"300":null,to=we.name==="audio"?"30":"150",In=vt?to:null;K.attr({width:ga(we,ct,"width",jn),height:ga(we,ct,"height",In)})},wc=(we,K,ct,vt)=>{const jn=Fe(we.schema).parse(vt,{context:K});for(;jn.firstChild;)ct.append(jn.firstChild)},ys=(we,K)=>{const ct=K.name,vt=new Kt("img",1);return go(we,K,vt),bs(K,vt,{}),vt.attr({style:K.attr("style"),src:Ts.transparentSrc,"data-mce-object":ct,class:"mce-object mce-object-"+ct}),vt},cs=(we,K)=>{var ct;const vt=K.name,jn=new Kt("span",1);jn.attr({contentEditable:"false",style:K.attr("style"),"data-mce-object":vt,class:"mce-preview-object mce-object-"+vt}),go(we,K,jn);const to=we.dom.parseStyle((ct=K.attr("style"))!==null&&ct!==void 0?ct:""),In=new Kt(vt,1);if(bs(K,In,to),In.attr({src:K.attr("src"),style:K.attr("style"),class:K.attr("class")}),vt==="iframe")In.attr({allowfullscreen:K.attr("allowfullscreen"),frameborder:"0"});else{rn(["controls","crossorigin","currentTime","loop","muted","poster","preload"],ir=>{In.attr(ir,K.attr(ir))});const xo=jn.attr("data-mce-html");Et(xo)&&wc(we,vt,In,unescape(xo))}const is=new Kt("span",1);return is.attr("class","mce-shim"),jn.append(In),jn.append(is),jn},go=(we,K,ct)=>{var vt;const jn=(vt=K.attributes)!==null&&vt!==void 0?vt:[];let to=jn.length;for(;to--;){const xo=jn[to].name;let ir=jn[to].value;xo!=="width"&&xo!=="height"&&xo!=="style"&&!Kn(xo,"data-mce-")&&((xo==="data"||xo==="src")&&(ir=we.convertURL(ir,xo)),ct.attr("data-mce-p-"+xo,ir))}const In=nn({inner:!0},we.schema),is=new Kt("div",1);rn(K.children(),xo=>is.append(xo));const ts=In.serialize(is);ts&&(ct.attr("data-mce-html",escape(ts)),ct.empty())},gr=we=>{const K=we.attr("class");return Qt(K)&&/\btiny-pageembed\b/.test(K)},Gr=we=>{let K=we;for(;K=K.parent;)if(K.attr("data-ephox-embed-iri")||gr(K))return!0;return!1},Hs=we=>K=>{let ct=K.length,vt;for(;ct--;)vt=K[ct],vt.parent&&(vt.parent.attr("data-mce-object")||(_r(vt)&&Ot(we)?Gr(vt)||vt.replace(cs(we,vt)):Gr(vt)||vt.replace(ys(we,vt))))},ha=(we,K,ct)=>{const vt=Bn(we);return Fe(we.schema,{validate:vt}).parse(ct,{context:K})},qr=we=>{we.on("PreInit",()=>{const{schema:K,serializer:ct,parser:vt}=we,jn=K.getBoolAttrs();rn("webkitallowfullscreen mozallowfullscreen".split(" "),to=>{jn[to]={}}),Ze({embed:["wmode"]},(to,In)=>{const is=K.getElementRule(In);is&&rn(to,ts=>{is.attributes[ts]={},is.attributesOrder.push(ts)})}),vt.addNodeFilter("iframe,video,audio,object,embed,script",Hs(we)),ct.addAttributeFilter("data-mce-object",(to,In)=>{var is;let ts=to.length;for(;ts--;){const xo=to[ts];if(!xo.parent)continue;const ir=xo.attr(In),Lt=new Kt(ir,1);if(ir!=="audio"&&ir!=="script"){const tn=xo.attr("class");tn&&tn.indexOf("mce-preview-object")!==-1&&xo.firstChild?Lt.attr({width:xo.firstChild.attr("width"),height:xo.firstChild.attr("height")}):Lt.attr({width:xo.attr("width"),height:xo.attr("height")})}Lt.attr({style:xo.attr("style")});const ge=(is=xo.attributes)!==null&&is!==void 0?is:[];let be=ge.length;for(;be--;){const tn=ge[be].name;tn.indexOf("data-mce-p-")===0&&Lt.attr(tn.substr(11),ge[be].value)}ir==="script"&&Lt.attr("type","text/javascript");const _t=xo.attr("data-mce-html");if(_t){const tn=ha(we,ir,unescape(_t));rn(tn.children(),un=>Lt.append(un))}xo.replace(Lt)}})}),we.on("SetContent",()=>{const K=we.dom;rn(K.select("span.mce-preview-object"),ct=>{K.select("span.mce-shim",ct).length===0&&K.add(ct,"span",{class:"mce-shim"})})})},cc=we=>{we.on("ResolveName",K=>{let ct;K.target.nodeType===1&&(ct=K.target.getAttribute("data-mce-object"))&&(K.name=ct)})},Qs=we=>{const K=()=>we.execCommand("mceMedia");we.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:K,onSetup:ct=>{const vt=we.selection;return ct.setActive(Z(vt.getNode())),vt.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",ct.setActive).unbind}}),we.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:K})};var _a=()=>{Ht.add("media",we=>(ht(we),on(we),Qs(we),cc(we),qr(we),Ne(we),sn(we)))};_a()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=Ze=>st=>typeof st===Ze,dn=yn("boolean"),Sn=yn("number"),Qt=Ze=>st=>st.options.get(Ze),Dn=Ze=>{const st=Ze.options.register;st("nonbreaking_force_tab",{processor:Te=>dn(Te)?{value:Te?3:0,valid:!0}:Sn(Te)?{value:Te,valid:!0}:{valid:!1,message:"Must be a boolean or number."},default:!1}),st("nonbreaking_wrap",{processor:"boolean",default:!0})},xn=Qt("nonbreaking_force_tab"),Nt=Qt("nonbreaking_wrap"),Et=(Ze,st)=>{let Te="";for(let Q=0;Q<st;Q++)Te+=Ze;return Te},pt=Ze=>Ze.plugins.visualchars?Ze.plugins.visualchars.isEnabled():!1,hn=(Ze,st)=>{const Te=()=>pt(Ze)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap",Q=()=>`<span class="${Te()}" contenteditable="false">${Et("&nbsp;",st)}</span>`,It=Nt(Ze)||Ze.plugins.visualchars?Q():Et("&nbsp;",st);Ze.undoManager.transact(()=>Ze.insertContent(It))},rn=Ze=>{Ze.addCommand("mceNonBreaking",()=>{hn(Ze,1)})};var Ut=tinymce.util.Tools.resolve("tinymce.util.VK");const Ct=Ze=>{const st=xn(Ze);st>0&&Ze.on("keydown",Te=>{if(Te.keyCode===Ut.TAB&&!Te.isDefaultPrevented()){if(Te.shiftKey)return;Te.preventDefault(),Te.stopImmediatePropagation(),hn(Ze,st)}})},Mt=Ze=>{const st=()=>Ze.execCommand("mceNonBreaking");Ze.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:st}),Ze.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:st})};var cn=()=>{Ht.add("nonbreaking",Ze=>{Dn(Ze),rn(Ze),Mt(Ze),Ct(Ze)})};cn()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager"),yn=tinymce.util.Tools.resolve("tinymce.Env");const dn=Ct=>Mt=>Mt.options.get(Ct),Sn=Ct=>{const Mt=Ct.options.register;Mt("pagebreak_separator",{processor:"string",default:"<!-- pagebreak -->"}),Mt("pagebreak_split_block",{processor:"boolean",default:!1})},Qt=dn("pagebreak_separator"),Dn=dn("pagebreak_split_block"),xn="mce-pagebreak",Nt=Ct=>{const Mt=`<img src="${yn.transparentSrc}" class="${xn}" data-mce-resize="false" data-mce-placeholder />`;return Ct?`<p>${Mt}</p>`:Mt},Et=Ct=>{const Mt=Qt(Ct),cn=()=>Dn(Ct),Ze=new RegExp(Mt.replace(/[\?\.\*\[\]\(\)\{\}\+\^\$\:]/g,st=>"\\"+st),"gi");Ct.on("BeforeSetContent",st=>{st.content=st.content.replace(Ze,Nt(cn()))}),Ct.on("PreInit",()=>{Ct.serializer.addNodeFilter("img",st=>{let Te=st.length,Q,ht;for(;Te--;)if(Q=st[Te],ht=Q.attr("class"),ht&&ht.indexOf(xn)!==-1){const It=Q.parent;if(It&&Ct.schema.getBlockElements()[It.name]&&cn()){It.type=3,It.value=Mt,It.raw=!0,Q.remove();continue}Q.type=3,Q.value=Mt,Q.raw=!0}})})},pt=Ct=>{Ct.addCommand("mcePageBreak",()=>{Ct.insertContent(Nt(Dn(Ct)))})},hn=Ct=>{Ct.on("ResolveName",Mt=>{Mt.target.nodeName==="IMG"&&Ct.dom.hasClass(Mt.target,xn)&&(Mt.name="pagebreak")})},rn=Ct=>{const Mt=()=>Ct.execCommand("mcePageBreak");Ct.ui.registry.addButton("pagebreak",{icon:"page-break",tooltip:"Page break",onAction:Mt}),Ct.ui.registry.addMenuItem("pagebreak",{text:"Page break",icon:"page-break",onAction:Mt})};var Ut=()=>{Ht.add("pagebreak",Ct=>{Sn(Ct),pt(Ct),rn(Ct),Et(Ct),hn(Ct)})};Ut()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager"),yn=tinymce.util.Tools.resolve("tinymce.Env"),dn=tinymce.util.Tools.resolve("tinymce.util.Tools");const Sn=Ct=>Mt=>Mt.options.get(Ct),Qt=Sn("content_style"),Dn=Sn("content_css_cors"),xn=Sn("body_class"),Nt=Sn("body_id"),Et=Ct=>{var Mt;let cn="";const Ze=Ct.dom.encode,st=(Mt=Qt(Ct))!==null&&Mt!==void 0?Mt:"";cn+='<base href="'+Ze(Ct.documentBaseURI.getURI())+'">';const Te=Dn(Ct)?' crossorigin="anonymous"':"";dn.each(Ct.contentCSS,$t=>{cn+='<link type="text/css" rel="stylesheet" href="'+Ze(Ct.documentBaseURI.toAbsolute($t))+'"'+Te+">"}),st&&(cn+='<style type="text/css">'+st+"</style>");const Q=Nt(Ct),ht=xn(Ct),yt='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(yn.os.isMacOS()||yn.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",Y=Ct.getBody().dir,Ot=Y?' dir="'+Ze(Y)+'"':"";return"<!DOCTYPE html><html><head>"+cn+'</head><body id="'+Ze(Q)+'" class="mce-content-body '+Ze(ht)+'"'+Ot+">"+Ct.getContent()+yt+"</body></html>"},pt=Ct=>{const Mt=Et(Ct);Ct.windowManager.open({title:"Preview",size:"large",body:{type:"panel",items:[{name:"preview",type:"iframe",sandboxed:!0,transparent:!1}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}],initialData:{preview:Mt}}).focus("close")},hn=Ct=>{Ct.addCommand("mcePreview",()=>{pt(Ct)})},rn=Ct=>{const Mt=()=>Ct.execCommand("mcePreview");Ct.ui.registry.addButton("preview",{icon:"preview",tooltip:"Preview",onAction:Mt}),Ct.ui.registry.addMenuItem("preview",{icon:"preview",text:"Preview",onAction:Mt})};var Ut=()=>{Ht.add("preview",Ct=>{hn(Ct),rn(Ct)})};Ut()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=(Ae,Se,We)=>{var Ee;return We(Ae,Se.prototype)?!0:((Ee=Ae.constructor)===null||Ee===void 0?void 0:Ee.name)===Se.name},dn=Ae=>{const Se=typeof Ae;return Ae===null?"null":Se==="object"&&Array.isArray(Ae)?"array":Se==="object"&&yn(Ae,String,(We,Ee)=>Ee.isPrototypeOf(We))?"string":Se},Sn=Ae=>Se=>dn(Se)===Ae,Qt=Ae=>Se=>typeof Se===Ae,Dn=Sn("string"),xn=Qt("boolean"),Nt=Ae=>Ae==null,Et=Ae=>!Nt(Ae),pt=Qt("function"),hn=Ae=>Se=>Se.options.get(Ae),rn=Ae=>{const Se=Ae.options.register,We=re=>H=>{const q=xn(H)||Dn(H);return q?xn(H)?{value:H?re:"",valid:q}:{value:H.trim(),valid:q}:{valid:!1,message:"Must be a boolean or string."}},Ee="bold italic | quicklink h2 h3 blockquote";Se("quickbars_selection_toolbar",{processor:We(Ee),default:Ee});const ae="quickimage quicktable";Se("quickbars_insert_toolbar",{processor:We(ae),default:ae});const se="alignleft aligncenter alignright";Se("quickbars_image_toolbar",{processor:We(se),default:se})},Ut=hn("quickbars_selection_toolbar"),Ct=hn("quickbars_insert_toolbar"),Mt=hn("quickbars_image_toolbar");let cn=0;const Ze=Ae=>{const We=new Date().getTime(),Ee=Math.floor(Math.random()*1e9);return cn++,Ae+"_"+Ee+cn+String(We)},st=(Ae,Se,We)=>{Ae.execCommand("mceInsertTable",!1,{rows:We,columns:Se})},Te=(Ae,Se,We)=>{const Ee=Ae.editorUpload.blobCache,ae=Ee.create(Ze("mceu"),We,Se);Ee.add(ae),Ae.insertContent(Ae.dom.createHTML("img",{src:ae.blobUri()}))},Q=Ae=>new Promise(Se=>{const We=new FileReader;We.onloadend=()=>{Se(We.result.split(",")[1])},We.readAsDataURL(Ae)});var ht=tinymce.util.Tools.resolve("tinymce.Env"),It=tinymce.util.Tools.resolve("tinymce.util.Delay");const yt=Ae=>new Promise(Se=>{const We=document.createElement("input");We.type="file",We.accept="image/*",We.style.position="fixed",We.style.left="0",We.style.top="0",We.style.opacity="0.001",document.body.appendChild(We);const Ee=se=>{Se(Array.prototype.slice.call(se.target.files))};We.addEventListener("change",Ee);const ae=se=>{const re=()=>{var H;Se([]),(H=We.parentNode)===null||H===void 0||H.removeChild(We)};ht.os.isAndroid()&&se.type!=="remove"?It.setEditorTimeout(Ae,re,0):re(),Ae.off("focusin remove",ae)};Ae.on("focusin remove",ae),We.click()}),Y=Ae=>{Ae.ui.registry.addButton("quickimage",{icon:"image",tooltip:"Insert image",onAction:()=>{yt(Ae).then(Se=>{if(Se.length>0){const We=Se[0];Q(We).then(Ee=>{Te(Ae,Ee,We)})}})}}),Ae.ui.registry.addButton("quicktable",{icon:"table",tooltip:"Insert table",onAction:()=>{st(Ae,2,2)}})},Bn=(Ae=>()=>Ae)(!1);class $t{constructor(Se,We){this.tag=Se,this.value=We}static some(Se){return new $t(!0,Se)}static none(){return $t.singletonNone}fold(Se,We){return this.tag?We(this.value):Se()}isSome(){return this.tag}isNone(){return!this.tag}map(Se){return this.tag?$t.some(Se(this.value)):$t.none()}bind(Se){return this.tag?Se(this.value):$t.none()}exists(Se){return this.tag&&Se(this.value)}forall(Se){return!this.tag||Se(this.value)}filter(Se){return!this.tag||Se(this.value)?this:$t.none()}getOr(Se){return this.tag?this.value:Se}or(Se){return this.tag?this:Se}getOrThunk(Se){return this.tag?this.value:Se()}orThunk(Se){return this.tag?this:Se()}getOrDie(Se){if(this.tag)return this.value;throw new Error(Se??"Called getOrDie on None")}static from(Se){return Et(Se)?$t.some(Se):$t.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Se){this.tag&&Se(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}$t.singletonNone=new $t(!1),typeof window<"u"||Function("return this;")();const ye=1,ee=Ae=>Ae.dom.nodeName.toLowerCase(),at=(Ae,Se)=>{const We=Ae.dom;return We&&We.hasAttribute?We.hasAttribute(Se):!1};var Le=(Ae,Se,We,Ee,ae)=>Ae(We,Ee)?$t.some(We):pt(ae)&&ae(We)?$t.none():Se(We,Ee,ae);const Me=(Ae,Se)=>{const Ee=(Se||document).createElement("div");if(Ee.innerHTML=Ae,!Ee.hasChildNodes()||Ee.childNodes.length>1){const ae="HTML does not have a single root node";throw console.error(ae,Ae),new Error(ae)}return he(Ee.childNodes[0])},Rt=(Ae,Se)=>{const Ee=(Se||document).createElement(Ae);return he(Ee)},_=(Ae,Se)=>{const Ee=(Se||document).createTextNode(Ae);return he(Ee)},he=Ae=>{if(Ae==null)throw new Error("Node cannot be null or undefined");return{dom:Ae}},Oe={fromHtml:Me,fromTag:Rt,fromText:_,fromDom:he,fromPoint:(Ae,Se,We)=>$t.from(Ae.dom.elementFromPoint(Se,We)).map(he)},fe=(Ae,Se)=>{const We=Ae.dom;if(We.nodeType!==ye)return!1;{const Ee=We;if(Ee.matches!==void 0)return Ee.matches(Se);if(Ee.msMatchesSelector!==void 0)return Ee.msMatchesSelector(Se);if(Ee.webkitMatchesSelector!==void 0)return Ee.webkitMatchesSelector(Se);if(Ee.mozMatchesSelector!==void 0)return Ee.mozMatchesSelector(Se);throw new Error("Browser lacks native selectors")}},Kt=(Ae,Se,We)=>{let Ee=Ae.dom;const ae=pt(We)?We:Bn;for(;Ee.parentNode;){Ee=Ee.parentNode;const se=Oe.fromDom(Ee);if(Se(se))return $t.some(se);if(ae(se))break}return $t.none()},nn=(Ae,Se,We)=>Le((ae,se)=>se(ae),Kt,Ae,Se,We),Fe=(Ae,Se,We)=>nn(Ae,Se,We).isSome(),Vt=(Ae,Se,We)=>Kt(Ae,Ee=>fe(Ee,Se),We),kt=(Ae,Se,We)=>Le((ae,se)=>fe(ae,se),Vt,Ae,Se,We),Ie=Ae=>{const Se=Ct(Ae);Se.length>0&&Ae.ui.registry.addContextToolbar("quickblock",{predicate:We=>{const Ee=Oe.fromDom(We),ae=Ae.schema.getTextBlockElements(),se=re=>re.dom===Ae.getBody();return!at(Ee,"data-mce-bogus")&&kt(Ee,'table,[data-mce-bogus="all"]',se).fold(()=>Fe(Ee,re=>ee(re)in ae&&Ae.dom.isEmpty(re.dom),se),Bn)},items:Se,position:"line",scope:"editor"})},R=Ae=>{const Se=se=>Ae.dom.getContentEditableParent(se)!=="false",We=se=>se.nodeName==="IMG"||se.nodeName==="FIGURE"&&/image/i.test(se.className),Ee=Mt(Ae);Ee.length>0&&Ae.ui.registry.addContextToolbar("imageselection",{predicate:We,items:Ee,position:"node"});const ae=Ut(Ae);ae.length>0&&Ae.ui.registry.addContextToolbar("textselection",{predicate:se=>!We(se)&&!Ae.selection.isCollapsed()&&Se(se),items:ae,position:"selection",scope:"editor"})};var Hn=()=>{Ht.add("quickbars",Ae=>{rn(Ae),Y(Ae),Ie(Ae),R(Ae)})};Hn()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const dn=(st=>Te=>typeof Te===st)("function");var Sn=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Qt=tinymce.util.Tools.resolve("tinymce.util.Tools");const Dn=st=>Te=>Te.options.get(st),xn=st=>{const Te=st.options.register;Te("save_enablewhendirty",{processor:"boolean",default:!0}),Te("save_onsavecallback",{processor:"function"}),Te("save_oncancelcallback",{processor:"function"})},Nt=Dn("save_enablewhendirty"),Et=Dn("save_onsavecallback"),pt=Dn("save_oncancelcallback"),hn=(st,Te)=>{st.notificationManager.open({text:Te,type:"error"})},rn=st=>{const Te=Sn.DOM.getParent(st.id,"form");if(Nt(st)&&!st.isDirty())return;st.save();const Q=Et(st);if(dn(Q)){Q.call(st,st),st.nodeChanged();return}Te?(st.setDirty(!1),(!Te.onsubmit||Te.onsubmit())&&(typeof Te.submit=="function"?Te.submit():hn(st,"Error: Form submit field collision.")),st.nodeChanged()):hn(st,"Error: No form element found.")},Ut=st=>{const Te=Qt.trim(st.startContent),Q=pt(st);if(dn(Q)){Q.call(st,st);return}st.resetContent(Te)},Ct=st=>{st.addCommand("mceSave",()=>{rn(st)}),st.addCommand("mceCancel",()=>{Ut(st)})},Mt=st=>Te=>{const Q=()=>{Te.setEnabled(!Nt(st)||st.isDirty())};return Q(),st.on("NodeChange dirty",Q),()=>st.off("NodeChange dirty",Q)},cn=st=>{st.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:()=>st.execCommand("mceSave"),onSetup:Mt(st)}),st.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:()=>st.execCommand("mceCancel"),onSetup:Mt(st)}),st.addShortcut("Meta+S","","mceSave")};var Ze=()=>{Ht.add("save",st=>{xn(st),cn(st),Ct(st)})};Ze()})();(function(){const Ht=ge=>{let be=ge;return{get:()=>be,set:un=>{be=un}}};var yn=tinymce.util.Tools.resolve("tinymce.PluginManager");const dn=(ge,be,_t)=>{var tn;return _t(ge,be.prototype)?!0:((tn=ge.constructor)===null||tn===void 0?void 0:tn.name)===be.name},Sn=ge=>{const be=typeof ge;return ge===null?"null":be==="object"&&Array.isArray(ge)?"array":be==="object"&&dn(ge,String,(_t,tn)=>tn.isPrototypeOf(_t))?"string":be},Qt=ge=>be=>Sn(be)===ge,Dn=ge=>be=>typeof be===ge,xn=Qt("string"),Nt=Qt("array"),Et=Dn("boolean"),pt=ge=>ge==null,hn=ge=>!pt(ge),rn=Dn("number"),Ut=()=>{},Ct=ge=>()=>ge,Mt=Ct(!0),Ze=Ct("[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]");class st{constructor(be,_t){this.tag=be,this.value=_t}static some(be){return new st(!0,be)}static none(){return st.singletonNone}fold(be,_t){return this.tag?_t(this.value):be()}isSome(){return this.tag}isNone(){return!this.tag}map(be){return this.tag?st.some(be(this.value)):st.none()}bind(be){return this.tag?be(this.value):st.none()}exists(be){return this.tag&&be(this.value)}forall(be){return!this.tag||be(this.value)}filter(be){return!this.tag||be(this.value)?this:st.none()}getOr(be){return this.tag?this.value:be}or(be){return this.tag?this:be}getOrThunk(be){return this.tag?this.value:be()}orThunk(be){return this.tag?this:be()}getOrDie(be){if(this.tag)return this.value;throw new Error(be??"Called getOrDie on None")}static from(be){return hn(be)?st.some(be):st.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(be){this.tag&&be(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}st.singletonNone=new st(!1);const Te=Ze;var Q=tinymce.util.Tools.resolve("tinymce.Env"),ht=tinymce.util.Tools.resolve("tinymce.util.Tools");const It=Array.prototype.slice,yt=Array.prototype.push,Y=(ge,be)=>{const _t=ge.length,tn=new Array(_t);for(let un=0;un<_t;un++){const Pn=ge[un];tn[un]=be(Pn,un)}return tn},Ot=(ge,be)=>{for(let _t=0,tn=ge.length;_t<tn;_t++){const un=ge[_t];be(un,_t)}},Bn=(ge,be)=>{for(let _t=ge.length-1;_t>=0;_t--){const tn=ge[_t];be(tn,_t)}},$t=(ge,be)=>{if(ge.length===0)return[];{let _t=be(ge[0]);const tn=[];let un=[];for(let Pn=0,pn=ge.length;Pn<pn;Pn++){const zn=ge[Pn],oo=be(zn);oo!==_t&&(tn.push(un),un=[]),_t=oo,un.push(zn)}return un.length!==0&&tn.push(un),tn}},ye=(ge,be,_t)=>(Ot(ge,(tn,un)=>{_t=be(_t,tn,un)}),_t),ee=ge=>{const be=[];for(let _t=0,tn=ge.length;_t<tn;++_t){if(!Nt(ge[_t]))throw new Error("Arr.flatten item "+_t+" was not an array, input: "+ge);yt.apply(be,ge[_t])}return be},at=(ge,be)=>ee(Y(ge,be)),Le=(ge,be)=>{const _t=It.call(ge,0);return _t.sort(be),_t},Me=Object.hasOwnProperty,Rt=(ge,be)=>Me.call(ge,be);typeof window<"u"||Function("return this;")();const _=9,he=11,Ue=1,Oe=3,fe=ge=>ge.dom.nodeType,nn=(ge=>be=>fe(be)===ge)(Oe),Fe=(ge,be,_t)=>{if(xn(_t)||Et(_t)||rn(_t))ge.setAttribute(be,_t+"");else throw console.error("Invalid call to Attribute.set. Key ",be,":: Value ",_t,":: Element ",ge),new Error("Attribute value was not simple")},Vt=(ge,be,_t)=>{Fe(ge.dom,be,_t)},kt=(ge,be)=>{const tn=(be||document).createElement("div");if(tn.innerHTML=ge,!tn.hasChildNodes()||tn.childNodes.length>1){const un="HTML does not have a single root node";throw console.error(un,ge),new Error(un)}return Hn(tn.childNodes[0])},Ie=(ge,be)=>{const tn=(be||document).createElement(ge);return Hn(tn)},R=(ge,be)=>{const tn=(be||document).createTextNode(ge);return Hn(tn)},Hn=ge=>{if(ge==null)throw new Error("Node cannot be null or undefined");return{dom:ge}},Se={fromHtml:kt,fromTag:Ie,fromText:R,fromDom:Hn,fromPoint:(ge,be,_t)=>st.from(ge.dom.elementFromPoint(be,_t)).map(Hn)},We=ge=>ge.nodeType!==Ue&&ge.nodeType!==_&&ge.nodeType!==he||ge.childElementCount===0,Ee=(ge,be)=>{const _t=be===void 0?document:be.dom;return We(_t)?[]:Y(_t.querySelectorAll(ge),Se.fromDom)},ae=ge=>st.from(ge.dom.parentNode).map(Se.fromDom),se=ge=>Y(ge.dom.childNodes,Se.fromDom),re=(ge,be)=>({element:ge,offset:be}),H=(ge,be)=>{const _t=se(ge);return _t.length>0&&be<_t.length?re(_t[be],0):re(ge,be)},q=(ge,be)=>{ae(ge).each(tn=>{tn.dom.insertBefore(be.dom,ge.dom)})},z=(ge,be)=>{ge.dom.appendChild(be.dom)},Z=(ge,be)=>{q(ge,be),z(be,ge)},Pe=((ge,be)=>{const _t=Pn=>{if(!ge(Pn))throw new Error("Can only get "+be+" value of a "+be+" node");return tn(Pn).getOr("")},tn=Pn=>ge(Pn)?st.from(Pn.dom.nodeValue):st.none();return{get:_t,getOption:tn,set:(Pn,pn)=>{if(!ge(Pn))throw new Error("Can only set raw "+be+" value of a "+be+" node");Pn.dom.nodeValue=pn}}})(nn,"text"),Wt=ge=>Pe.get(ge),ot=(ge,be,_t)=>(ge.compareDocumentPosition(be)&_t)!==0,Qn=(ge,be)=>ot(ge,be,Node.DOCUMENT_POSITION_PRECEDING),uo=(ge,be)=>Ee(be,ge);var eo=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const kn=(ge,be)=>ge.isBlock(be)||Rt(ge.schema.getVoidElements(),be.nodeName),ao=(ge,be)=>ge.getContentEditable(be)==="false",Re=(ge,be)=>ge.getContentEditable(be)==="true"&&be.parentNode&&ge.getContentEditableParent(be.parentNode)==="false",Ye=(ge,be)=>!ge.isBlock(be)&&Rt(ge.schema.getWhitespaceElements(),be.nodeName),Bt=(ge,be)=>kn(ge,be)||ao(ge,be)||Ye(ge,be)||Re(ge,be),an=ge=>ge.nodeType===3,An=()=>({sOffset:0,fOffset:0,elements:[]}),Tn=(ge,be)=>H(Se.fromDom(ge),be),Do=(ge,be,_t,tn,un,Pn=!0)=>{let pn=Pn?be(!1):_t;for(;pn;){const zn=ao(ge,pn);if(zn||Ye(ge,pn)){if(zn?tn.cef(pn):tn.boundary(pn))break;pn=be(!0);continue}else if(kn(ge,pn)){if(tn.boundary(pn))break}else an(pn)&&tn.text(pn);if(pn===un)break;pn=be(!1)}},ks=(ge,be,_t,tn,un)=>{var Pn;if(Bt(ge,_t))return;const pn=(Pn=ge.getParent(tn,ge.isBlock))!==null&&Pn!==void 0?Pn:ge.getRoot(),zn=new eo(_t,pn),oo=un?zn.next.bind(zn):zn.prev.bind(zn);Do(ge,oo,_t,{boundary:Mt,cef:Mt,text:wo=>{un?be.fOffset+=wo.length:be.sOffset+=wo.length,be.elements.push(Se.fromDom(wo))}})},qe=(ge,be,_t,tn,un,Pn=!0)=>{const pn=new eo(_t,be),zn=[];let oo=An();ks(ge,oo,_t,be,!1);const wo=()=>(oo.elements.length>0&&(zn.push(oo),oo=An()),!1);return Do(ge,pn.next.bind(pn),_t,{boundary:wo,cef:Os=>(wo(),un&&zn.push(...un.cef(Os)),!1),text:Os=>{oo.elements.push(Se.fromDom(Os)),un&&un.text(Os,oo)}},tn,Pn),tn&&ks(ge,oo,tn,be,!0),wo(),zn},ze=(ge,be)=>{const _t=Tn(be.startContainer,be.startOffset),tn=_t.element.dom,un=Tn(be.endContainer,be.endOffset),Pn=un.element.dom;return qe(ge,be.commonAncestorContainer,tn,Pn,{text:(pn,zn)=>{pn===Pn?zn.fOffset+=pn.length-un.offset:pn===tn&&(zn.sOffset+=_t.offset)},cef:pn=>{const zn=at(uo(Se.fromDom(pn),"*[contenteditable=true]"),oo=>{const wo=oo.dom;return qe(ge,wo,wo)});return Le(zn,(oo,wo)=>Qn(oo.elements[0].dom,wo.elements[0].dom)?1:-1)}},!1)},sn=(ge,be)=>be.collapsed?[]:ze(ge,be),on=(ge,be)=>{const _t=ge.createRng();return _t.selectNode(be),sn(ge,_t)},qt=(ge,be)=>at(be,_t=>on(ge,_t)),Kn=(ge,be,_t=0,tn=ge.length)=>{const un=be.regex;un.lastIndex=_t;const Pn=[];let pn;for(;pn=un.exec(ge);){const zn=pn[be.matchIndex],oo=pn.index+pn[0].indexOf(zn),wo=oo+zn.length;if(wo>tn)break;Pn.push({start:oo,finish:wo}),un.lastIndex=wo}return Pn},Ts=(ge,be)=>{const _t=ye(ge,(tn,un)=>{const Pn=Wt(un),pn=tn.last,zn=pn+Pn.length,oo=at(be,(wo,Os)=>wo.start<zn&&wo.finish>pn?[{element:un,start:Math.max(pn,wo.start)-pn,finish:Math.min(zn,wo.finish)-pn,matchId:Os}]:[]);return{results:tn.results.concat(oo),last:zn}},{results:[],last:0}).results;return $t(_t,tn=>tn.matchId)},_r=(ge,be)=>at(be,_t=>{const tn=_t.elements,un=Y(tn,Wt).join(""),Pn=Kn(un,ge,_t.sOffset,un.length-_t.fOffset);return Ts(tn,Pn)}),ga=(ge,be)=>{Bn(ge,(_t,tn)=>{Bn(_t,un=>{const Pn=Se.fromDom(be.cloneNode(!1));Vt(Pn,"data-mce-index",tn);const pn=un.element.dom;if(pn.length===un.finish&&un.start===0)Z(un.element,Pn);else{pn.length!==un.finish&&pn.splitText(un.finish);const zn=pn.splitText(un.start);Z(Se.fromDom(zn),Pn)}})})},bs=(ge,be,_t,tn)=>{const un=on(ge,_t),Pn=_r(be,un);return ga(Pn,tn),Pn.length},wc=(ge,be,_t,tn)=>{const un=_t.getBookmark(),Pn=ge.select("td[data-mce-selected],th[data-mce-selected]"),pn=Pn.length>0?qt(ge,Pn):sn(ge,_t.getRng()),zn=_r(be,pn);return ga(zn,tn),_t.moveToBookmark(un),zn.length},ys=ge=>ge.getAttribute("data-mce-index"),cs=(ge,be,_t,tn)=>{const un=ge.dom.create("span",{"data-mce-bogus":1});un.className="mce-match-marker";const Pn=ge.getBody();return K(ge,be,!1),tn?wc(ge.dom,_t,ge.selection,un):bs(ge.dom,_t,Pn,un)},go=ge=>{var be;const _t=ge.parentNode;ge.firstChild&&_t.insertBefore(ge.firstChild,ge),(be=ge.parentNode)===null||be===void 0||be.removeChild(ge)},gr=(ge,be)=>{const _t=[],tn=ht.toArray(ge.getBody().getElementsByTagName("span"));if(tn.length)for(let un=0;un<tn.length;un++){const Pn=ys(tn[un]);Pn===null||!Pn.length||Pn===be.toString()&&_t.push(tn[un])}return _t},Gr=(ge,be,_t)=>{const tn=be.get();let un=tn.index;const Pn=ge.dom;_t?un+1===tn.count?un=0:un++:un-1===-1?un=tn.count-1:un--,Pn.removeClass(gr(ge,tn.index),"mce-match-marker-selected");const pn=gr(ge,un);return pn.length?(Pn.addClass(gr(ge,un),"mce-match-marker-selected"),ge.selection.scrollIntoView(pn[0]),un):-1},Hs=(ge,be)=>{const _t=be.parentNode;ge.remove(be),_t&&ge.isEmpty(_t)&&ge.remove(_t)},ha=(ge,be)=>{const tn="("+ge.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").replace(/\s/g,"[^\\S\\r\\n\\uFEFF]")+")";return be?`(?:^|\\s|${Te()})`+tn+`(?=$|\\s|${Te()})`:tn},qr=(ge,be,_t,tn,un,Pn)=>{const pn=ge.selection,zn=ha(_t,un),oo=pn.isForward(),wo={regex:new RegExp(zn,tn?"g":"gi"),matchIndex:1},Os=cs(ge,be,wo,Pn);if(Q.browser.isSafari()&&pn.setRng(pn.getRng(),oo),Os){const hr=Gr(ge,be,!0);be.set({index:hr,count:Os,text:_t,matchCase:tn,wholeWord:un,inSelection:Pn})}return Os},cc=(ge,be)=>{const _t=Gr(ge,be,!0);be.set({...be.get(),index:_t})},Qs=(ge,be)=>{const _t=Gr(ge,be,!1);be.set({...be.get(),index:_t})},_a=ge=>{const be=ys(ge);return be!==null&&be.length>0},we=(ge,be,_t,tn,un)=>{const Pn=be.get(),pn=Pn.index;let zn,oo=pn;tn=tn!==!1;const wo=ge.getBody(),Os=ht.grep(ht.toArray(wo.getElementsByTagName("span")),_a);for(let hr=0;hr<Os.length;hr++){const qo=ys(Os[hr]);let Xc=zn=parseInt(qo,10);if(un||Xc===Pn.index){for(_t.length?(Os[hr].innerText=_t,go(Os[hr])):Hs(ge.dom,Os[hr]);Os[++hr];)if(Xc=parseInt(ys(Os[hr]),10),Xc===zn)Hs(ge.dom,Os[hr]);else{hr--;break}tn&&oo--}else zn>pn&&Os[hr].setAttribute("data-mce-index",String(zn-1))}return be.set({...Pn,count:un?0:Pn.count-1,index:oo}),tn?cc(ge,be):Qs(ge,be),!un&&be.get().count>0},K=(ge,be,_t)=>{let tn,un;const Pn=be.get(),pn=ht.toArray(ge.getBody().getElementsByTagName("span"));for(let zn=0;zn<pn.length;zn++){const oo=ys(pn[zn]);oo!==null&&oo.length&&(oo===Pn.index.toString()&&(tn||(tn=pn[zn].firstChild),un=pn[zn].firstChild),go(pn[zn]))}if(be.set({...Pn,index:-1,count:0,text:""}),tn&&un){const zn=ge.dom.createRng();return zn.setStart(tn,0),zn.setEnd(un,un.data.length),_t!==!1&&ge.selection.setRng(zn),zn}else return},ct=(ge,be)=>be.get().count>1,vt=(ge,be)=>be.get().count>1,jn=(ge,be)=>({done:zn=>K(ge,be,zn),find:(zn,oo,wo,Os=!1)=>qr(ge,be,zn,oo,wo,Os),next:()=>cc(ge,be),prev:()=>Qs(ge,be),replace:(zn,oo,wo)=>we(ge,be,zn,oo,wo)}),to=ge=>{const be=Ht(st.none()),_t=()=>be.get().each(ge);return{clear:()=>{_t(),be.set(st.none())},isSet:()=>be.get().isSome(),get:()=>be.get(),set:zn=>{_t(),be.set(st.some(zn))}}},In=()=>{const ge=to(Ut);return{...ge,on:_t=>ge.get().each(_t)}},is=(ge,be)=>{const _t=In();ge.undoManager.add();const tn=ht.trim(ge.selection.getContent({format:"text"})),un=ls=>{ls.setEnabled("next",ct(ge,be)),ls.setEnabled("prev",vt(ge,be))},Pn=ls=>{const Cs=ls.getData(),xs=be.get();be.set({...xs,matchCase:Cs.matchcase,wholeWord:Cs.wholewords,inSelection:Cs.inselection})},pn=(ls,Cs)=>{Ot(["replace","replaceall","prev","next"],Br=>ls.setEnabled(Br,!Cs))},zn=ls=>{ge.windowManager.alert("Could not find the specified string.",()=>{ls.focus("findtext")})},oo=(ls,Cs)=>{Q.browser.isSafari()&&Q.deviceType.isTouch()&&(Cs==="find"||Cs==="replace"||Cs==="replaceall")&&ls.focus(Cs)},wo=ls=>{K(ge,be,!1),pn(ls,!0),un(ls)},Os=ls=>{const Cs=ls.getData(),xs=be.get();if(!Cs.findtext.length){wo(ls);return}if(xs.text===Cs.findtext&&xs.matchCase===Cs.matchcase&&xs.wholeWord===Cs.wholewords)cc(ge,be);else{const Lr=qr(ge,be,Cs.findtext,Cs.matchcase,Cs.wholewords,Cs.inselection);Lr<=0&&zn(ls),pn(ls,Lr===0)}un(ls)},hr=be.get(),qo={findtext:tn,replacetext:"",wholewords:hr.wholeWord,matchcase:hr.matchCase,inselection:hr.inSelection},Xc={title:"Find and Replace",size:"normal",body:{type:"panel",items:[{type:"bar",items:[{type:"input",name:"findtext",placeholder:"Find",maximized:!0,inputMode:"search"},{type:"button",name:"prev",text:"Previous",icon:"action-prev",enabled:!1,borderless:!0},{type:"button",name:"next",text:"Next",icon:"action-next",enabled:!1,borderless:!0}]},{type:"input",name:"replacetext",placeholder:"Replace with",inputMode:"search"}]},buttons:[{type:"menu",name:"options",icon:"preferences",tooltip:"Preferences",align:"start",items:[{type:"togglemenuitem",name:"matchcase",text:"Match case"},{type:"togglemenuitem",name:"wholewords",text:"Find whole words only"},{type:"togglemenuitem",name:"inselection",text:"Find in selection"}]},{type:"custom",name:"find",text:"Find",primary:!0},{type:"custom",name:"replace",text:"Replace",enabled:!1},{type:"custom",name:"replaceall",text:"Replace all",enabled:!1}],initialData:qo,onChange:(ls,Cs)=>{Cs.name==="findtext"&&be.get().count>0&&wo(ls)},onAction:(ls,Cs)=>{const xs=ls.getData();switch(Cs.name){case"find":Os(ls);break;case"replace":we(ge,be,xs.replacetext)?un(ls):wo(ls);break;case"replaceall":we(ge,be,xs.replacetext,!0,!0),wo(ls);break;case"prev":Qs(ge,be),un(ls);break;case"next":cc(ge,be),un(ls);break;case"matchcase":case"wholewords":case"inselection":Pn(ls),wo(ls);break}oo(ls,Cs.name)},onSubmit:ls=>{Os(ls),oo(ls,"find")},onClose:()=>{ge.focus(),K(ge,be),ge.undoManager.add()}};_t.set(ge.windowManager.open(Xc,{inline:"toolbar"}))},ts=(ge,be)=>{ge.addCommand("SearchReplace",()=>{is(ge,be)})},xo=(ge,be)=>()=>{is(ge,be)},ir=(ge,be)=>{ge.ui.registry.addMenuItem("searchreplace",{text:"Find and replace...",shortcut:"Meta+F",onAction:xo(ge,be),icon:"search"}),ge.ui.registry.addButton("searchreplace",{tooltip:"Find and replace",onAction:xo(ge,be),icon:"search"}),ge.shortcuts.add("Meta+F","",xo(ge,be))};var Lt=()=>{yn.add("searchreplace",ge=>{const be=Ht({index:-1,count:0,text:"",matchCase:!1,wholeWord:!1,inSelection:!1});return ts(ge,be),ir(ge,be),jn(ge,be)})};Lt()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=(C,k,I)=>{var V;return I(C,k.prototype)?!0:((V=C.constructor)===null||V===void 0?void 0:V.name)===k.name},dn=C=>{const k=typeof C;return C===null?"null":k==="object"&&Array.isArray(C)?"array":k==="object"&&yn(C,String,(I,V)=>V.isPrototypeOf(I))?"string":k},Sn=C=>k=>dn(k)===C,Qt=C=>k=>typeof k===C,Dn=C=>k=>C===k,xn=Sn("string"),Nt=Sn("array"),Et=Qt("boolean"),pt=Dn(void 0),hn=C=>C==null,rn=C=>!hn(C),Ut=Qt("function"),Ct=Qt("number"),Mt=()=>{},cn=(C,k)=>I=>C(k(I)),Ze=C=>()=>C,st=C=>C,Te=(C,k)=>C===k;function Q(C,...k){return(...I)=>{const V=k.concat(I);return C.apply(null,V)}}const ht=C=>{C()},It=Ze(!1),yt=Ze(!0);class Y{constructor(k,I){this.tag=k,this.value=I}static some(k){return new Y(!0,k)}static none(){return Y.singletonNone}fold(k,I){return this.tag?I(this.value):k()}isSome(){return this.tag}isNone(){return!this.tag}map(k){return this.tag?Y.some(k(this.value)):Y.none()}bind(k){return this.tag?k(this.value):Y.none()}exists(k){return this.tag&&k(this.value)}forall(k){return!this.tag||k(this.value)}filter(k){return!this.tag||k(this.value)?this:Y.none()}getOr(k){return this.tag?this.value:k}or(k){return this.tag?this:k}getOrThunk(k){return this.tag?this.value:k()}orThunk(k){return this.tag?this:k()}getOrDie(k){if(this.tag)return this.value;throw new Error(k??"Called getOrDie on None")}static from(k){return rn(k)?Y.some(k):Y.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(k){this.tag&&k(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Y.singletonNone=new Y(!1);const Ot=Object.keys,Bn=Object.hasOwnProperty,$t=(C,k)=>{const I=Ot(C);for(let V=0,_e=I.length;V<_e;V++){const mt=I[V],jt=C[mt];k(jt,mt)}},ye=C=>(k,I)=>{C[I]=k},ee=(C,k,I,V)=>{$t(C,(_e,mt)=>{(k(_e,mt)?I:V)(_e,mt)})},at=(C,k)=>{const I={};return ee(C,k,ye(I),Mt),I},Le=(C,k)=>{const I=[];return $t(C,(V,_e)=>{I.push(k(V,_e))}),I},Me=C=>Le(C,st),Rt=C=>Ot(C).length,_=(C,k)=>he(C,k)?Y.from(C[k]):Y.none(),he=(C,k)=>Bn.call(C,k),Ue=(C,k)=>he(C,k)&&C[k]!==void 0&&C[k]!==null,Oe=Array.prototype.indexOf,fe=Array.prototype.push,Kt=(C,k)=>Oe.call(C,k),nn=(C,k)=>Kt(C,k)>-1,Fe=(C,k)=>{for(let I=0,V=C.length;I<V;I++){const _e=C[I];if(k(_e,I))return!0}return!1},Vt=(C,k)=>{const I=[];for(let V=0;V<C;V++)I.push(k(V));return I},kt=(C,k)=>{const I=C.length,V=new Array(I);for(let _e=0;_e<I;_e++){const mt=C[_e];V[_e]=k(mt,_e)}return V},Ie=(C,k)=>{for(let I=0,V=C.length;I<V;I++){const _e=C[I];k(_e,I)}},R=(C,k)=>{for(let I=C.length-1;I>=0;I--){const V=C[I];k(V,I)}},Hn=(C,k)=>{const I=[],V=[];for(let _e=0,mt=C.length;_e<mt;_e++){const jt=C[_e];(k(jt,_e)?I:V).push(jt)}return{pass:I,fail:V}},Ae=(C,k)=>{const I=[];for(let V=0,_e=C.length;V<_e;V++){const mt=C[V];k(mt,V)&&I.push(mt)}return I},Se=(C,k,I)=>(R(C,(V,_e)=>{I=k(I,V,_e)}),I),We=(C,k,I)=>(Ie(C,(V,_e)=>{I=k(I,V,_e)}),I),Ee=(C,k,I)=>{for(let V=0,_e=C.length;V<_e;V++){const mt=C[V];if(k(mt,V))return Y.some(mt);if(I(mt,V))break}return Y.none()},ae=(C,k)=>Ee(C,k,It),se=C=>{const k=[];for(let I=0,V=C.length;I<V;++I){if(!Nt(C[I]))throw new Error("Arr.flatten item "+I+" was not an array, input: "+C);fe.apply(k,C[I])}return k},re=(C,k)=>se(kt(C,k)),H=(C,k)=>{for(let I=0,V=C.length;I<V;++I){const _e=C[I];if(k(_e,I)!==!0)return!1}return!0},q=(C,k)=>{const I={};for(let V=0,_e=C.length;V<_e;V++){const mt=C[V];I[String(mt)]=k(mt,V)}return I},z=(C,k)=>k>=0&&k<C.length?Y.some(C[k]):Y.none(),Z=C=>z(C,0),Ne=C=>z(C,C.length-1),Pe=(C,k)=>{for(let I=0;I<C.length;I++){const V=k(C[I],I);if(V.isSome())return V}return Y.none()},Wt=(C,k)=>{const V=(k||document).createElement("div");if(V.innerHTML=C,!V.hasChildNodes()||V.childNodes.length>1){const _e="HTML does not have a single root node";throw console.error(_e,C),new Error(_e)}return uo(V.childNodes[0])},ot=(C,k)=>{const V=(k||document).createElement(C);return uo(V)},Qn=(C,k)=>{const V=(k||document).createTextNode(C);return uo(V)},uo=C=>{if(C==null)throw new Error("Node cannot be null or undefined");return{dom:C}},kn={fromHtml:Wt,fromTag:ot,fromText:Qn,fromDom:uo,fromPoint:(C,k,I)=>Y.from(C.dom.elementFromPoint(k,I)).map(uo)};typeof window<"u"||Function("return this;")();const ao=8,Re=9,Ye=11,Bt=1,an=3,An=C=>C.dom.nodeName.toLowerCase(),Tn=C=>C.dom.nodeType,Do=C=>k=>Tn(k)===C,ks=C=>Tn(C)===ao||An(C)==="#comment",qe=Do(Bt),ze=Do(an),sn=Do(Re),on=Do(Ye),qt=C=>k=>qe(k)&&An(k)===C,Kn=(C,k)=>{const I=C.dom;if(I.nodeType!==Bt)return!1;{const V=I;if(V.matches!==void 0)return V.matches(k);if(V.msMatchesSelector!==void 0)return V.msMatchesSelector(k);if(V.webkitMatchesSelector!==void 0)return V.webkitMatchesSelector(k);if(V.mozMatchesSelector!==void 0)return V.mozMatchesSelector(k);throw new Error("Browser lacks native selectors")}},Ts=C=>C.nodeType!==Bt&&C.nodeType!==Re&&C.nodeType!==Ye||C.childElementCount===0,_r=(C,k)=>{const I=k===void 0?document:k.dom;return Ts(I)?[]:kt(I.querySelectorAll(C),kn.fromDom)},ga=(C,k)=>{const I=k===void 0?document:k.dom;return Ts(I)?Y.none():Y.from(I.querySelector(C)).map(kn.fromDom)},bs=(C,k)=>C.dom===k.dom,wc=Kn,ys=C=>kn.fromDom(C.dom.ownerDocument),cs=C=>sn(C)?C:ys(C),go=C=>Y.from(C.dom.parentNode).map(kn.fromDom),gr=(C,k)=>{const I=Ut(k)?k:It;let V=C.dom;const _e=[];for(;V.parentNode!==null&&V.parentNode!==void 0;){const mt=V.parentNode,jt=kn.fromDom(mt);if(_e.push(jt),I(jt)===!0)break;V=mt}return _e},Gr=C=>Y.from(C.dom.previousSibling).map(kn.fromDom),Hs=C=>Y.from(C.dom.nextSibling).map(kn.fromDom),ha=C=>kt(C.dom.childNodes,kn.fromDom),qr=(C,k)=>{const I=C.dom.childNodes;return Y.from(I[k]).map(kn.fromDom)},cc=C=>qr(C,0),Qs=C=>on(C)&&rn(C.dom.host),we=Ut(Element.prototype.attachShadow)&&Ut(Node.prototype.getRootNode)?C=>kn.fromDom(C.dom.getRootNode()):cs,K=C=>{const k=we(C);return Qs(k)?Y.some(k):Y.none()},ct=C=>kn.fromDom(C.dom.host),vt=C=>{const k=ze(C)?C.dom.parentNode:C.dom;if(k==null||k.ownerDocument===null)return!1;const I=k.ownerDocument;return K(kn.fromDom(k)).fold(()=>I.body.contains(k),cn(vt,ct))},jn=(C,k)=>Ae(ha(C),k),to=(C,k)=>{let I=[];return Ie(ha(C),V=>{k(V)&&(I=I.concat([V])),I=I.concat(to(V,k))}),I},In=(C,k)=>jn(C,I=>Kn(I,k)),is=(C,k)=>_r(k,C);var ts=(C,k,I,V,_e)=>C(I,V)?Y.some(I):Ut(_e)&&_e(I)?Y.none():k(I,V,_e);const xo=(C,k,I)=>{let V=C.dom;const _e=Ut(I)?I:It;for(;V.parentNode;){V=V.parentNode;const mt=kn.fromDom(V);if(k(mt))return Y.some(mt);if(_e(mt))break}return Y.none()},ir=(C,k)=>{const I=_e=>k(kn.fromDom(_e));return ae(C.dom.childNodes,I).map(kn.fromDom)},Lt=(C,k,I)=>xo(C,V=>Kn(V,k),I),ge=(C,k)=>ir(C,I=>Kn(I,k)),be=(C,k)=>ga(k,C),_t=(C,k,I)=>ts((_e,mt)=>Kn(_e,mt),Lt,C,k,I),tn=(C,k,I)=>{if(xn(I)||Et(I)||Ct(I))C.setAttribute(k,I+"");else throw console.error("Invalid call to Attribute.set. Key ",k,":: Value ",I,":: Element ",C),new Error("Attribute value was not simple")},un=(C,k,I)=>{tn(C.dom,k,I)},Pn=(C,k)=>{const I=C.dom;$t(k,(V,_e)=>{tn(I,_e,V)})},pn=(C,k)=>{const I=C.dom.getAttribute(k);return I===null?void 0:I},zn=(C,k)=>Y.from(pn(C,k)),oo=(C,k)=>{C.dom.removeAttribute(k)},wo=C=>We(C.dom.attributes,(k,I)=>(k[I.name]=I.value,k),{}),Os=(C,k,I=Te)=>C.exists(V=>I(V,k)),hr=C=>{const k=[],I=V=>{k.push(V)};for(let V=0;V<C.length;V++)C[V].each(I);return k},qo=(C,k,I)=>C.isSome()&&k.isSome()?Y.some(I(C.getOrDie(),k.getOrDie())):Y.none(),Xc=C=>C.bind(st),ls=(C,k)=>C?Y.some(k):Y.none(),Cs=(C,k)=>C.substring(k),xs=(C,k,I)=>k===""||C.length>=k.length&&C.substr(I,I+k.length)===k,Lr=(C,k)=>Br(C,k)?Cs(C,k.length):C,Br=(C,k)=>xs(C,k,0),La=(C=>k=>k.replace(C,""))(/^\s+|\s+$/g),Jc=C=>C.length>0,_i=C=>!Jc(C),Qc=(C,k=10)=>{const I=parseInt(C,k);return isNaN(I)?Y.none():Y.some(I)},zi=C=>{const k=parseFloat(C);return isNaN(k)?Y.none():Y.some(k)},Us=C=>C.style!==void 0&&Ut(C.style.getPropertyValue),gi=(C,k,I)=>{if(!xn(I))throw console.error("Invalid call to CSS.set. Property ",k,":: Value ",I,":: Element ",C),new Error("CSS value must be a string: "+I);Us(C)&&C.style.setProperty(k,I)},pa=(C,k)=>{Us(C)&&C.style.removeProperty(k)},ic=(C,k,I)=>{const V=C.dom;gi(V,k,I)},hi=(C,k)=>{const I=C.dom,_e=window.getComputedStyle(I).getPropertyValue(k);return _e===""&&!vt(C)?Ic(I,k):_e},Ic=(C,k)=>Us(C)?C.style.getPropertyValue(k):"",aa=(C,k)=>{const I=C.dom,V=Ic(I,k);return Y.from(V).filter(_e=>_e.length>0)},Ai=(C,k)=>{const I=C.dom;pa(I,k),Os(zn(C,"style").map(La),"")&&oo(C,"style")},Cc=(C,k,I=0)=>zn(C,k).map(V=>parseInt(V,10)).getOr(I),Vi=(C,k)=>er(C,k,yt),er=(C,k,I)=>re(ha(C),V=>Kn(V,k)?I(V)?[V]:[]:er(V,k,I)),ba=["tfoot","thead","tbody","colgroup"],X=C=>nn(ba,C),xe=(C,k)=>({rows:C,columns:k}),He=(C,k,I)=>({element:C,rowspan:k,colspan:I}),wt=(C,k,I,V,_e,mt)=>({element:C,rowspan:k,colspan:I,row:V,column:_e,isLocked:mt}),Gt=(C,k,I)=>({element:C,cells:k,section:I}),mo=(C,k,I,V)=>({startRow:C,startCol:k,finishRow:I,finishCol:V}),Ko=(C,k,I)=>({element:C,colspan:k,column:I}),Ar=(C,k)=>({element:C,columns:k}),zs=(C,k,I=It)=>{if(I(k))return Y.none();if(nn(C,An(k)))return Y.some(k);const V=_e=>Kn(_e,"table")||I(_e);return Lt(k,C.join(","),V)},$r=(C,k)=>zs(["td","th"],C,k),Or=C=>Vi(C,"th,td"),Pr=C=>Kn(C,"colgroup")?In(C,"col"):re(ta(C),k=>In(k,"col")),Ha=(C,k)=>_t(C,"table",k),Kr=C=>Vi(C,"tr"),ta=C=>Ha(C).fold(Ze([]),k=>In(k,"colgroup")),ei=(C,k)=>kt(C,I=>{if(An(I)==="colgroup"){const V=kt(Pr(I),_e=>{const mt=Cc(_e,"span",1);return He(_e,1,mt)});return Gt(I,V,"colgroup")}else{const V=kt(Or(I),_e=>{const mt=Cc(_e,"rowspan",1),jt=Cc(_e,"colspan",1);return He(_e,mt,jt)});return Gt(I,V,k(I))}}),ti=C=>go(C).map(k=>{const I=An(k);return X(I)?I:"tbody"}).getOr("tbody"),ko=C=>{const k=Kr(C),V=[...ta(C),...k];return ei(V,ti)},us="data-snooker-locked-cols",ar=C=>zn(C,us).bind(k=>Y.from(k.match(/\d+/g))).map(k=>q(k,yt)),$=(C,k)=>C+","+k,J=(C,k,I)=>Y.from(C.access[$(k,I)]),de=(C,k,I)=>{const V=Xe(C,_e=>I(k,_e.element));return V.length>0?Y.some(V[0]):Y.none()},Xe=(C,k)=>{const I=re(C.all,V=>V.cells);return Ae(I,k)},Nn=C=>{const k={};let I=0;return Ie(C.cells,V=>{const _e=V.colspan;Vt(_e,mt=>{const jt=I+mt;k[jt]=Ko(V.element,_e,jt)}),I+=_e}),k},Mo=C=>{const k={},I=[],_e=Z(C).map(ri=>ri.element).bind(Ha).bind(ar).getOr({});let mt=0,jt=0,Mn=0;const{pass:Lo,fail:Go}=Hn(C,ri=>ri.section==="colgroup");Ie(Go,ri=>{const ml=[];Ie(ri.cells,Mu=>{let hd=0;for(;k[$(Mn,hd)]!==void 0;)hd++;const fh=Ue(_e,hd.toString()),pd=wt(Mu.element,Mu.rowspan,Mu.colspan,Mn,hd,fh);for(let Nu=0;Nu<Mu.colspan;Nu++)for(let Km=0;Km<Mu.rowspan;Km++){const Bu=Mn+Km,yi=hd+Nu,gh=$(Bu,yi);k[gh]=pd,jt=Math.max(jt,yi+1)}ml.push(pd)}),mt++,I.push(Gt(ri.element,ml,ri.section)),Mn++});const{columns:ur,colgroups:js}=Ne(Lo).map(ri=>{const ml=Nn(ri);return{colgroups:[Ar(ri.element,Me(ml))],columns:ml}}).getOrThunk(()=>({colgroups:[],columns:{}}));return{grid:xe(mt,jt),access:k,all:I,columns:ur,colgroups:js}},tr={fromTable:C=>{const k=ko(C);return Mo(k)},generate:Mo,getAt:J,findItem:de,filterItems:Xe,justCells:C=>re(C.all,k=>k.cells),justColumns:C=>Me(C.columns),hasColumns:C=>Ot(C.columns).length>0,getColumnAt:(C,k)=>Y.from(C.columns[k])};var Zr=tinymce.util.Tools.resolve("tinymce.util.Tools");const sl=(C,k,I)=>{const V=C.select("td,th",k);let _e;for(let mt=0;mt<V.length;mt++){const jt=C.getStyle(V[mt],I);if(pt(_e)&&(_e=jt),_e!==jt)return""}return _e},Po=(C,k,I)=>{Zr.each("left center right".split(" "),V=>{V!==I&&C.formatter.remove("align"+V,{},k)}),I&&C.formatter.apply("align"+I,{},k)},ne=(C,k,I)=>{Zr.each("top middle bottom".split(" "),V=>{V!==I&&C.formatter.remove("valign"+V,{},k)}),I&&C.formatter.apply("valign"+I,{},k)},me=(C,k,I)=>{C.dispatch("TableModified",{...I,table:k})},Qe=(C,k)=>zi(C).getOr(k),dt=(C,k,I)=>Qe(hi(C,k),I),Un=(C,k,I,V)=>{const _e=dt(C,`padding-${I}`,0),mt=dt(C,`padding-${V}`,0),jt=dt(C,`border-${I}-width`,0),Mn=dt(C,`border-${V}-width`,0);return k-_e-mt-jt-Mn},so=(C,k)=>{const I=C.dom,V=I.getBoundingClientRect().width||I.offsetWidth;return k==="border-box"?V:Un(C,V,"left","right")},Yo=C=>so(C,"content-box");var Ui=tinymce.util.Tools.resolve("tinymce.Env");const Qo="tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol",Ds=Vt(5,C=>{const k=`${C+1}px`;return{title:k,value:k}}),Aa=kt(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],C=>({title:C,value:C.toLowerCase()})),lc="100%",Wi=C=>{var k;const I=C.dom,V=(k=I.getParent(C.selection.getStart(),I.isBlock))!==null&&k!==void 0?k:C.getBody();return Yo(kn.fromDom(V))+"px"},br=(C,k)=>Mm(C)||!Lc(C)?k:Xl(C)?{...k,width:Wi(C)}:{...k,width:lc},rr=(C,k)=>Mm(C)||Lc(C)?k:Xl(C)?{...k,width:Wi(C)}:{...k,width:lc},Rs=C=>k=>k.options.get(C),zr=C=>{const k=C.options.register;k("table_border_widths",{processor:"object[]",default:Ds}),k("table_border_styles",{processor:"object[]",default:Aa}),k("table_cell_advtab",{processor:"boolean",default:!0}),k("table_row_advtab",{processor:"boolean",default:!0}),k("table_advtab",{processor:"boolean",default:!0}),k("table_appearance_options",{processor:"boolean",default:!0}),k("table_grid",{processor:"boolean",default:!Ui.deviceType.isTouch()}),k("table_cell_class_list",{processor:"object[]",default:[]}),k("table_row_class_list",{processor:"object[]",default:[]}),k("table_class_list",{processor:"object[]",default:[]}),k("table_toolbar",{processor:"string",default:Qo}),k("table_background_color_map",{processor:"object[]",default:[]}),k("table_border_color_map",{processor:"object[]",default:[]})},Sc=Rs("table_sizing_mode"),Ol=Rs("table_border_widths"),Yr=Rs("table_border_styles"),Yl=Rs("table_cell_advtab"),Su=Rs("table_row_advtab"),uc=Rs("table_advtab"),xu=Rs("table_appearance_options"),Yg=Rs("table_grid"),Lc=Rs("table_style_by_css"),Dl=Rs("table_cell_class_list"),cd=Rs("table_row_class_list"),za=Rs("table_class_list"),rl=Rs("table_toolbar"),ku=Rs("table_background_color_map"),zd=Rs("table_border_color_map"),Xl=C=>Sc(C)==="fixed",Mm=C=>Sc(C)==="responsive",Vd=C=>{const k=C.options,I=k.get("table_default_styles");return k.isSet("table_default_styles")?I:br(C,I)},Oi=C=>{const k=C.options,I=k.get("table_default_attributes");return k.isSet("table_default_attributes")?I:rr(C,I)},Xg=C=>C.nodeName.toLowerCase(),Nm=C=>kn.fromDom(C.getBody()),Tu=C=>k=>bs(k,Nm(C)),Ud=C=>C?C.replace(/px$/,""):"",Di=C=>/^\d+(\.\d+)?$/.test(C)?C+"px":C,ve=C=>kn.fromDom(C.selection.getStart()),Jl=C=>kn.fromDom(C.selection.getEnd()),Ri=(C,k)=>k.column>=C.startCol&&k.column+k.colspan-1<=C.finishCol&&k.row>=C.startRow&&k.row+k.rowspan-1<=C.finishRow,Bm=(C,k)=>{let I=!0;const V=Q(Ri,k);for(let _e=k.startRow;_e<=k.finishRow;_e++)for(let mt=k.startCol;mt<=k.finishCol;mt++)I=I&&tr.getAt(C,_e,mt).exists(V);return I?Y.some(k):Y.none()},$m=(C,k)=>mo(Math.min(C.row,k.row),Math.min(C.column,k.column),Math.max(C.row+C.rowspan-1,k.row+k.rowspan-1),Math.max(C.column+C.colspan-1,k.column+k.colspan-1)),Jg=(C,k,I)=>{const V=tr.findItem(C,k,bs),_e=tr.findItem(C,I,bs);return V.bind(mt=>_e.map(jt=>$m(mt,jt)))},Ps=(C,k,I)=>Jg(C,k,I).bind(V=>Bm(C,V)),Ya=(C,k,I)=>{const V=Lf(C);return Ps(V,k,I)},Lf=tr.fromTable,Zi=(C,k)=>{go(C).each(V=>{V.dom.insertBefore(k.dom,C.dom)})},Pm=(C,k)=>{Hs(C).fold(()=>{go(C).each(_e=>{xc(_e,k)})},V=>{Zi(V,k)})},Eu=(C,k)=>{cc(C).fold(()=>{xc(C,k)},V=>{C.dom.insertBefore(k.dom,V.dom)})},xc=(C,k)=>{C.dom.appendChild(k.dom)},Hf=(C,k)=>{Zi(C,k),xc(k,C)},id=(C,k)=>{Ie(k,(I,V)=>{const _e=V===0?C:k[V-1];Pm(_e,I)})},Qg=(C,k)=>{Ie(k,I=>{xc(C,I)})},Hc=C=>{const k=C.dom;k.parentNode!==null&&k.parentNode.removeChild(k)},Wd=C=>{const k=ha(C);k.length>0&&id(C,k),Hc(C)},ld=((C,k)=>{const I=mt=>{if(!C(mt))throw new Error("Can only get "+k+" value of a "+k+" node");return V(mt).getOr("")},V=mt=>C(mt)?Y.from(mt.dom.nodeValue):Y.none();return{get:I,getOption:V,set:(mt,jt)=>{if(!C(mt))throw new Error("Can only set raw "+k+" value of a "+k+" node");mt.dom.nodeValue=jt}}})(ze,"text"),va=C=>ld.get(C),Zd=(C,k)=>ld.set(C,k);var zf=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Im=()=>{const C=Go=>kn.fromDom(Go.dom.cloneNode(!1)),k=Go=>cs(Go).dom,I=Go=>qe(Go)?An(Go)==="body"?!0:nn(zf,An(Go)):!1,V=Go=>qe(Go)?nn(["br","img","hr","input"],An(Go)):!1,_e=Go=>qe(Go)&&pn(Go,"contenteditable")==="false",mt=(Go,ur)=>Go.dom.compareDocumentPosition(ur.dom),jt=(Go,ur)=>{const js=wo(Go);Pn(ur,js)},Mn=Go=>{const ur=An(Go);return nn(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],ur)},Lo=Go=>qe(Go)?zn(Go,"lang"):Y.none();return{up:Ze({selector:Lt,closest:_t,predicate:xo,all:gr}),down:Ze({selector:is,predicate:to}),styles:Ze({get:hi,getRaw:aa,set:ic,remove:Ai}),attrs:Ze({get:pn,set:un,remove:oo,copyTo:jt}),insert:Ze({before:Zi,after:Pm,afterAll:id,append:xc,appendAll:Qg,prepend:Eu,wrap:Hf}),remove:Ze({unwrap:Wd,remove:Hc}),create:Ze({nu:kn.fromTag,clone:C,text:kn.fromText}),query:Ze({comparePosition:mt,prevSibling:Gr,nextSibling:Hs}),property:Ze({children:ha,name:An,parent:go,document:k,isText:ze,isComment:ks,isElement:qe,isSpecial:Mn,getLanguage:Lo,getText:va,setText:Zd,isBoundary:I,isEmptyTag:V,isNonEditable:_e}),eq:bs,is:wc}};const _u=(C,k,I,V)=>{const _e=I[0],mt=I.slice(1);return V(C,k,_e,mt)},eh=(C,k,I)=>I.length>0?_u(C,k,I,Lm):Y.none(),Lm=(C,k,I,V)=>{const _e=k(C,I);return Se(V,(mt,jt)=>{const Mn=k(C,jt);return kc(C,mt,Mn)},_e)},kc=(C,k,I)=>k.bind(V=>I.filter(Q(C.eq,V))),th=eh,al=Im(),ud=(C,k)=>th(al,(I,V)=>C(V),k),Ql=C=>Lt(C,"table"),ji=(C,k)=>{const I=is(C,k);return I.length>0?Y.some(I):Y.none()},nh=(C,k,I)=>be(C,k).bind(V=>be(C,I).bind(_e=>ud(Ql,[V,_e]).map(mt=>({first:V,last:_e,table:mt})))),oh=(C,k)=>ji(C,k),Vf=(C,k,I)=>nh(C,k,I).bind(V=>{const _e=Lo=>bs(C,Lo),mt="thead,tfoot,tbody,table",jt=Lt(V.first,mt,_e),Mn=Lt(V.last,mt,_e);return jt.bind(Lo=>Mn.bind(Go=>bs(Lo,Go)?Ya(V.table,V.first,V.last):Y.none()))}),cl=C=>kt(C,kn.fromDom),E="data-mce-selected",B="td["+E+"],th["+E+"]",j="data-mce-first-selected",ke="td["+j+"],th["+j+"]",Ve="data-mce-last-selected",bn="td["+Ve+"],th["+Ve+"]",Co={selected:E,selectedSelector:B,firstSelected:j,firstSelectedSelector:ke,lastSelected:Ve,lastSelectedSelector:bn},ns=C=>Ha(C).bind(k=>oh(k,Co.firstSelectedSelector)).fold(Ze(C),k=>k[0]),jo=C=>(k,I)=>{const V=An(k),_e=V==="col"||V==="colgroup"?ns(k):k;return _t(_e,C,I)},no=jo("th,td,caption"),os=jo("th,td"),Dr=C=>cl(C.model.table.getSelectedCells()),Xa=(C,k)=>{const I=os(C),V=I.bind(_e=>Ha(_e)).map(_e=>Kr(_e));return qo(I,V,(_e,mt)=>Ae(mt,jt=>Fe(cl(jt.dom.cells),Mn=>pn(Mn,k)==="1"||bs(Mn,_e)))).getOr([])},na=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],Hm=C=>({value:C}),D0=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Fo=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Vr=C=>D0.test(C)||Fo.test(C),Fs=C=>Lr(C,"#").toUpperCase(),dc=C=>Vr(C)?Y.some({value:Fs(C)}):Y.none(),Va=C=>{const k=C.toString(16);return(k.length===1?"0"+k:k).toUpperCase()},Uf=C=>{const k=Va(C.red)+Va(C.green)+Va(C.blue);return Hm(k)},Wf=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,sh=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,eu=(C,k,I,V)=>({red:C,green:k,blue:I,alpha:V}),Zf=(C,k,I,V)=>{const _e=parseInt(C,10),mt=parseInt(k,10),jt=parseInt(I,10),Mn=parseFloat(V);return eu(_e,mt,jt,Mn)},R0=C=>{if(C==="transparent")return Y.some(eu(0,0,0,0));const k=Wf.exec(C);if(k!==null)return Y.some(Zf(k[1],k[2],k[3],"1"));const I=sh.exec(C);return I!==null?Y.some(Zf(I[1],I[2],I[3],I[4])):Y.none()},DC=C=>dc(C).orThunk(()=>R0(C).map(Uf)).getOrThunk(()=>{const k=document.createElement("canvas");k.height=1,k.width=1;const I=k.getContext("2d");I.clearRect(0,0,k.width,k.height),I.fillStyle="#FFFFFF",I.fillStyle=C,I.fillRect(0,0,1,1);const V=I.getImageData(0,0,1,1).data,_e=V[0],mt=V[1],jt=V[2],Mn=V[3];return Uf(eu(_e,mt,jt,Mn))}),Xr=C=>R0(C).map(Uf).map(k=>"#"+k.value).getOr(C),rh=C=>{let k=C;return{get:()=>k,set:_e=>{k=_e}}},u1=C=>{const k=rh(Y.none()),I=()=>k.get().each(C);return{clear:()=>{I(),k.set(Y.none())},isSet:()=>k.get().isSome(),get:()=>k.get(),set:Mn=>{I(),k.set(Y.some(Mn))}}},Sp=()=>u1(C=>C.unbind()),jf=(C,k,I)=>V=>{const _e=Sp(),mt=_i(I),jt=()=>{const Mn=Dr(C),Lo=Go=>C.formatter.match(k,{value:I},Go.dom,mt);mt?(V.setActive(!Fe(Mn,Lo)),_e.set(C.formatter.formatChanged(k,Go=>V.setActive(!Go),!0))):(V.setActive(H(Mn,Lo)),_e.set(C.formatter.formatChanged(k,V.setActive,!1,{value:I})))};return C.initialized?jt():C.on("init",jt),_e.clear},d1=C=>Ue(C,"menu"),dd=C=>kt(C,k=>{const I=k.text||k.title||"";return d1(k)?{text:I,items:dd(k.menu)}:{text:I,value:k.value}}),vr=(C,k,I,V)=>kt(k,_e=>{const mt=_e.text||_e.title;return d1(_e)?{type:"nestedmenuitem",text:mt,getSubmenuItems:()=>vr(C,_e.menu,I,V)}:{text:mt,type:"togglemenuitem",onAction:()=>V(_e.value),onSetup:jf(C,I,_e.value)}}),Ho=(C,k)=>I=>{C.execCommand("mceTableApplyCellStyle",!1,{[k]:I})},mc=C=>re(C,k=>d1(k)?[{...k,menu:mc(k.menu)}]:Jc(k.value)?[k]:[]),tu=(C,k,I,V)=>_e=>_e(vr(C,k,I,V)),Au=(C,k,I)=>{const V=kt(k,_e=>({text:_e.title,value:"#"+DC(_e.value).value,type:"choiceitem"}));return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:V.length>0?V:void 0,allowCustomColors:!1},onAction:_e=>{const mt=_e.value==="remove"?"":_e.value;C.execCommand("mceTableApplyCellStyle",!1,{[I]:mt})}}]},ah=C=>()=>{const I=C.queryCommandValue("mceTableRowType")==="header"?"body":"header";C.execCommand("mceTableRowType",!1,{type:I})},zm=C=>()=>{const I=C.queryCommandValue("mceTableColType")==="th"?"td":"th";C.execCommand("mceTableColType",!1,{type:I})},m1=C=>{const k=dd(Dl(C));return k.length>0?Y.some({name:"class",type:"listbox",label:"Class",items:k}):Y.none()},f1=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:na}],Vm=C=>f1.concat(m1(C).toArray()),ch=(C,k)=>{const V=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(dd(Yr(C)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:k==="cell"?[{name:"borderwidth",type:"input",label:"Border width"}].concat(V):V}},Rl={normal:(C,k)=>{const I=C.dom;return{setAttrib:(jt,Mn)=>{I.setAttrib(k,jt,Mn)},setStyle:(jt,Mn)=>{I.setStyle(k,jt,Mn)},setFormat:(jt,Mn)=>{Mn===""?C.formatter.remove(jt,{value:null},k,!0):C.formatter.apply(jt,{value:Mn},k)}}}},Ml=qt("th"),M0=(C,k)=>C&&k?"sectionCells":C?"section":"cells",md=C=>{const k=C.section==="thead",I=Os(Ou(C.cells),"th");return C.section==="tfoot"?{type:"footer"}:k||I?{type:"header",subType:M0(k,I)}:{type:"body"}},Ou=C=>{const k=Ae(C,I=>Ml(I.element));return k.length===0?Y.some("td"):k.length===C.length?Y.some("th"):Y.none()},Gf=C=>{const k=kt(C,_e=>md(_e).type),I=nn(k,"header"),V=nn(k,"footer");if(!I&&!V)return Y.some("body");{const _e=nn(k,"body");return I&&!_e&&!V?Y.some("header"):!I&&!_e&&V?Y.some("footer"):Y.none()}},fd=C=>{let k=!1,I;return(...V)=>(k||(k=!0,I=C.apply(null,V)),I)},ih=(C,k)=>Pe(C.all,I=>ae(I.cells,V=>bs(k,V.element))),ya=(C,k,I)=>{const V=kt(k.selection,mt=>$r(mt).bind(jt=>ih(C,jt)).filter(I)),_e=hr(V);return ls(_e.length>0,_e)},Gi=(C,k)=>k.mergable,Wm=(C,k)=>k.unmergable,$n=(C,k)=>ya(C,k,yt),Zm=(C,k)=>ih(C,k).exists(I=>!I.isLocked),il=(C,k)=>H(k,I=>Zm(C,I)),lh=(C,k)=>Gi(C,k).filter(I=>il(C,I.cells)),uh=(C,k)=>Wm(C,k).filter(I=>il(C,I));({...{generate:C=>{if(!Nt(C))throw new Error("cases must be an array");if(C.length===0)throw new Error("there must be at least one case");const k=[],I={};return Ie(C,(V,_e)=>{const mt=Ot(V);if(mt.length!==1)throw new Error("one and only one name per case");const jt=mt[0],Mn=V[jt];if(I[jt]!==void 0)throw new Error("duplicate key detected:"+jt);if(jt==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Nt(Mn))throw new Error("case arguments must be an array");k.push(jt),I[jt]=(...Lo)=>{const Go=Lo.length;if(Go!==Mn.length)throw new Error("Wrong number of arguments to case "+jt+". Expected "+Mn.length+" ("+Mn+"), got "+Go);return{fold:(...js)=>{if(js.length!==C.length)throw new Error("Wrong number of arguments to fold. Expected "+C.length+", got "+js.length);return js[_e].apply(null,Lo)},match:js=>{const nr=Ot(js);if(k.length!==nr.length)throw new Error("Wrong number of arguments to match. Expected: "+k.join(",")+`
Actual: `+nr.join(","));if(!H(k,ml=>nn(nr,ml)))throw new Error("Not all branches were specified when using match. Specified: "+nr.join(", ")+`
Required: `+k.join(", "));return js[jt].apply(null,Lo)},log:js=>{console.log(js,{constructors:k,constructor:jt,params:Lo})}}}}),I}}.generate([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}])});const lo=(C,k)=>{const I=tr.fromTable(C);return $n(I,k).bind(_e=>{const mt=_e[_e.length-1],jt=_e[0].row,Mn=mt.row+mt.rowspan,Lo=I.all.slice(jt,Mn);return Gf(Lo)}).getOr("")},ni=C=>Br(C,"rgb")?Xr(C):C,Zt=C=>{const k=kn.fromDom(C);return{borderwidth:aa(k,"border-width").getOr(""),borderstyle:aa(k,"border-style").getOr(""),bordercolor:aa(k,"border-color").map(ni).getOr(""),backgroundcolor:aa(k,"background-color").map(ni).getOr("")}},g1=C=>{const k=C[0],I=C.slice(1);return Ie(I,V=>{Ie(Ot(k),_e=>{$t(V,(mt,jt)=>{const Mn=k[_e];Mn!==""&&_e===jt&&Mn!==mt&&(k[_e]="")})})}),k},h1=(C,k,I,V)=>ae(C,_e=>!pt(I.formatter.matchNode(V,k+_e))).getOr(""),ll=Q(h1,["left","center","right"],"align"),oi=Q(h1,["top","middle","bottom"],"valign"),jm=(C,k)=>{const I=Vd(C),V=Oi(C),_e=()=>({borderstyle:_(I,"border-style").getOr(""),bordercolor:ni(_(I,"border-color").getOr("")),backgroundcolor:ni(_(I,"background-color").getOr(""))}),mt={height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""},jt=()=>{const ur=I["border-width"];return Lc(C)&&ur?{border:ur}:_(V,"border").fold(()=>({}),js=>({border:js}))},Mn=k?_e():{},Lo=()=>{const ur=_(I,"border-spacing").or(_(V,"cellspacing")).fold(()=>({}),nr=>({cellspacing:nr})),js=_(I,"border-padding").or(_(V,"cellpadding")).fold(()=>({}),nr=>({cellpadding:nr}));return{...ur,...js}};return{...mt,...I,...V,...Mn,...jt(),...Lo()}},jr=C=>Ha(kn.fromDom(C)).map(k=>{const I={selection:cl(C.cells)};return lo(k,I)}).getOr(""),Oa=(C,k,I)=>{const V=(Mn,Lo)=>{const Go=aa(kn.fromDom(Lo),"border-width");return Lc(C)&&Go.isSome()?Go.getOr(""):Mn.getAttrib(Lo,"border")||sl(C.dom,Lo,"border-width")||sl(C.dom,Lo,"border")||""},_e=C.dom,mt=Lc(C)?_e.getStyle(k,"border-spacing")||_e.getAttrib(k,"cellspacing"):_e.getAttrib(k,"cellspacing")||_e.getStyle(k,"border-spacing"),jt=Lc(C)?sl(_e,k,"padding")||_e.getAttrib(k,"cellpadding"):_e.getAttrib(k,"cellpadding")||sl(_e,k,"padding");return{width:_e.getStyle(k,"width")||_e.getAttrib(k,"width"),height:_e.getStyle(k,"height")||_e.getAttrib(k,"height"),cellspacing:mt??"",cellpadding:jt??"",border:V(_e,k),caption:!!_e.select("caption",k)[0],class:_e.getAttrib(k,"class",""),align:ll(C,k),...I?Zt(k):{}}},si=(C,k,I)=>{const V=C.dom;return{height:V.getStyle(k,"height")||V.getAttrib(k,"height"),class:V.getAttrib(k,"class",""),type:jr(k),align:ll(C,k),...I?Zt(k):{}}},lr=(C,k,I,V)=>{const _e=C.dom,mt=V.getOr(k),jt=(Mn,Lo)=>_e.getStyle(Mn,Lo)||_e.getAttrib(Mn,Lo);return{width:jt(mt,"width"),height:jt(k,"height"),scope:_e.getAttrib(k,"scope"),celltype:Xg(k),class:_e.getAttrib(k,"class",""),halign:ll(C,k),valign:oi(C,k),...I?Zt(k):{}}},Ru=(C,k)=>{const I=tr.fromTable(C),V=tr.justCells(I),_e=Ae(V,mt=>Fe(k,jt=>bs(mt.element,jt)));return kt(_e,mt=>({element:mt.element.dom,column:tr.getColumnAt(I,mt.column).map(jt=>jt.element.dom)}))},p1=(C,k,I,V)=>{V("scope")&&C.setAttrib("scope",I.scope),V("class")&&C.setAttrib("class",I.class),V("height")&&C.setStyle("height",Di(I.height)),V("width")&&k.setStyle("width",Di(I.width))},nu=(C,k,I)=>{I("backgroundcolor")&&C.setFormat("tablecellbackgroundcolor",k.backgroundcolor),I("bordercolor")&&C.setFormat("tablecellbordercolor",k.bordercolor),I("borderstyle")&&C.setFormat("tablecellborderstyle",k.borderstyle),I("borderwidth")&&C.setFormat("tablecellborderwidth",Di(k.borderwidth))},dh=(C,k,I,V)=>{const _e=k.length===1;Ie(k,mt=>{const jt=mt.element,Mn=_e?yt:V,Lo=Rl.normal(C,jt),Go=mt.column.map(ur=>Rl.normal(C,ur)).getOr(Lo);p1(Lo,Go,I,Mn),Yl(C)&&nu(Lo,I,Mn),V("halign")&&Po(C,jt,I.halign),V("valign")&&ne(C,jt,I.valign)})},Gm=(C,k)=>{C.execCommand("mceTableCellType",!1,{type:k.celltype,no_events:!0})},ia=(C,k,I,V)=>{const _e=at(V,(mt,jt)=>I[jt]!==mt);Rt(_e)>0&&k.length>=1&&Ha(k[0]).each(mt=>{const jt=Ru(mt,k),Mn=Rt(at(_e,(Go,ur)=>ur!=="scope"&&ur!=="celltype"))>0,Lo=he(_e,"celltype");(Mn||he(_e,"scope"))&&dh(C,jt,V,Q(he,_e)),Lo&&Gm(C,V),me(C,mt.dom,{structure:Lo,style:Mn})})},mh=(C,k,I,V)=>{const _e=V.getData();V.close(),C.undoManager.transact(()=>{ia(C,k,I,_e),C.focus()})},qm=(C,k)=>{const I=Ha(k[0]).map(V=>kt(Ru(V,k),_e=>lr(C,_e.element,Yl(C),_e.column)));return g1(I.getOrDie())},Ms=C=>{const k=Dr(C);if(k.length===0)return;const I=qm(C,k),V={type:"tabpanel",tabs:[{title:"General",name:"general",items:Vm(C)},ch(C,"cell")]},_e={type:"panel",items:[{type:"grid",columns:2,items:Vm(C)}]};C.windowManager.open({title:"Cell Properties",size:"normal",body:Yl(C)?V:_e,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:I,onSubmit:Q(mh,C,k,I)})},ou=C=>{const k=dd(cd(C));return k.length>0?Y.some({name:"class",type:"listbox",label:"Class",items:k}):Y.none()},Tc=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],su=C=>Tc.concat(ou(C).toArray()),pi=(C,k,I)=>{I("class")&&C.setAttrib("class",k.class),I("height")&&C.setStyle("height",Di(k.height))},b1=(C,k,I)=>{I("backgroundcolor")&&C.setStyle("background-color",k.backgroundcolor),I("bordercolor")&&C.setStyle("border-color",k.bordercolor),I("borderstyle")&&C.setStyle("border-style",k.borderstyle)},Qa=(C,k,I,V)=>{const mt=k.length===1?yt:V;Ie(k,jt=>{const Mn=Rl.normal(C,jt);pi(Mn,I,mt),Su(C)&&b1(Mn,I,mt),V("align")&&Po(C,jt,I.align)})},Ec=(C,k)=>{C.execCommand("mceTableRowType",!1,{type:k.type,no_events:!0})},xp=(C,k,I,V)=>{const _e=at(V,(mt,jt)=>I[jt]!==mt);if(Rt(_e)>0){const mt=he(_e,"type"),jt=mt?Rt(_e)>1:!0;jt&&Qa(C,k,V,Q(he,_e)),mt&&Ec(C,V),Ha(kn.fromDom(k[0])).each(Mn=>me(C,Mn.dom,{structure:mt,style:jt}))}},At=(C,k,I,V)=>{const _e=V.getData();V.close(),C.undoManager.transact(()=>{xp(C,k,I,_e),C.focus()})},Mi=C=>{const k=Xa(ve(C),Co.selected);if(k.length===0)return;const I=kt(k,jt=>si(C,jt.dom,Su(C))),V=g1(I),_e={type:"tabpanel",tabs:[{title:"General",name:"general",items:su(C)},ch(C,"row")]},mt={type:"panel",items:[{type:"grid",columns:2,items:su(C)}]};C.windowManager.open({title:"Row Properties",size:"normal",body:Su(C)?_e:mt,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:V,onSubmit:Q(At,C,kt(k,jt=>jt.dom),V)})},N0=(C,k,I)=>{const V=I?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],_e=[{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}],mt=xu(C)?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],jt=[{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}],Mn=k.length>0?[{type:"listbox",name:"class",label:"Class",items:k}]:[];return V.concat(_e).concat(mt).concat(jt).concat(Mn)},la=(C,k,I,V)=>{if(k.tagName==="TD"||k.tagName==="TH")xn(I)&&rn(V)?C.setStyle(k,I,V):C.setStyles(k,I);else if(k.children)for(let _e=0;_e<k.children.length;_e++)la(C,k.children[_e],I,V)},qf=(C,k,I)=>{const V=C.dom,_e={},mt={};if(pt(I.class)||(_e.class=I.class),mt.height=Di(I.height),Lc(C)?mt.width=Di(I.width):V.getAttrib(k,"width")&&(_e.width=Ud(I.width)),Lc(C)?(mt["border-width"]=Di(I.border),mt["border-spacing"]=Di(I.cellspacing)):(_e.border=I.border,_e.cellpadding=I.cellpadding,_e.cellspacing=I.cellspacing),Lc(C)&&k.children)for(let jt=0;jt<k.children.length;jt++)la(V,k.children[jt],{"border-width":Di(I.border),padding:Di(I.cellpadding)}),uc(C)&&la(V,k.children[jt],{"border-color":I.bordercolor});if(uc(C)){const jt=I;mt["background-color"]=jt.backgroundcolor,mt["border-color"]=jt.bordercolor,mt["border-style"]=jt.borderstyle}_e.style=V.serializeStyle({...Vd(C),...mt}),V.setAttribs(k,{...Oi(C),..._e})},gd=(C,k,I,V)=>{const _e=C.dom,mt=V.getData(),jt=at(mt,(Mn,Lo)=>I[Lo]!==Mn);V.close(),mt.class===""&&delete mt.class,C.undoManager.transact(()=>{if(!k){const Mn=Qc(mt.cols).getOr(1),Lo=Qc(mt.rows).getOr(1);C.execCommand("mceInsertTable",!1,{rows:Lo,columns:Mn}),k=os(ve(C),Tu(C)).bind(Go=>Ha(Go,Tu(C))).map(Go=>Go.dom).getOrDie()}if(Rt(jt)>0){qf(C,k,mt);const Mn=_e.select("caption",k)[0];(Mn&&!mt.caption||!Mn&&mt.caption)&&C.execCommand("mceTableToggleCaption"),Po(C,k,mt.align)}if(C.focus(),C.addVisual(),Rt(jt)>0){const Mn=he(jt,"caption"),Lo=Mn?Rt(jt)>1:!0;me(C,k,{structure:Mn,style:Lo})}})},wa=(C,k)=>{const I=C.dom;let V,_e=jm(C,uc(C));k?(_e.cols="1",_e.rows="1",uc(C)&&(_e.borderstyle="",_e.bordercolor="",_e.backgroundcolor="")):(V=I.getParent(C.selection.getStart(),"table",C.getBody()),V?_e=Oa(C,V,uc(C)):uc(C)&&(_e.borderstyle="",_e.bordercolor="",_e.backgroundcolor=""));const mt=dd(za(C));mt.length>0&&_e.class&&(_e.class=_e.class.replace(/\s*mce\-item\-table\s*/g,""));const jt={type:"grid",columns:2,items:N0(C,mt,k)},Mn=()=>({type:"panel",items:[jt]}),Lo=()=>({type:"tabpanel",tabs:[{title:"General",name:"general",items:[jt]},ch(C,"table")]}),Go=uc(C)?Lo():Mn();C.windowManager.open({title:"Table Properties",size:"normal",body:Go,onSubmit:Q(gd,C,V,_e),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:_e})},B0=C=>{$t({mceTableProps:Q(wa,C,!1),mceTableRowProps:Q(Mi,C),mceTableCellProps:Q(Ms,C)},(k,I)=>C.addCommand(I,()=>k())),C.addCommand("mceInsertTableDialog",k=>{wa(C,!0)})},ul=(C,k)=>ge(C,k).isSome(),ru=st,bi=C=>{const k=(V,_e)=>zn(V,_e).exists(mt=>parseInt(mt,10)>1),I=V=>k(V,"rowspan")||k(V,"colspan");return C.length>0&&H(C,I)?Y.some(C):Y.none()},Ns=(C,k,I)=>k.length<=1?Y.none():Vf(C,I.firstSelectedSelector,I.lastSelectedSelector).map(V=>({bounds:V,cells:k})),qi=C=>({element:C,mergable:Y.none(),unmergable:Y.none(),selection:[C]}),jd=(C,k,I)=>({element:I,mergable:Ns(k,C,Co),unmergable:bi(C),selection:ru(C)}),ec=C=>{const k=rh(Y.none()),I=rh([]);let V=Y.none();const _e=qt("caption"),mt=_o=>V.forall(or=>!or[_o]),jt=()=>no(ve(C),Tu(C)),Mn=()=>no(Jl(C),Tu(C)),Lo=()=>jt().bind(_o=>Xc(qo(Ha(_o),Mn().bind(Ha),(or,Ua)=>bs(or,Ua)?_e(_o)?Y.some(qi(_o)):Y.some(jd(Dr(C),or,_o)):Y.none()))),Go=_o=>Ha(_o.element).map(Ua=>{const zc=tr.fromTable(Ua),Nl=$n(zc,_o).getOr([]),Vc=We(Nl,(Ni,$u)=>($u.isLocked&&(Ni.onAny=!0,$u.column===0?Ni.onFirst=!0:$u.column+$u.colspan>=zc.grid.columns&&(Ni.onLast=!0)),Ni),{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:lh(zc,_o).isSome(),unmergeable:uh(zc,_o).isSome(),locked:Vc}}),ur=()=>{k.set(fd(Lo)()),V=k.get().bind(Go),Ie(I.get(),ht)},js=_o=>(_o(),I.set(I.get().concat([_o])),()=>{I.set(Ae(I.get(),or=>or!==_o))}),nr=(_o,or)=>js(()=>k.get().fold(()=>{_o.setEnabled(!1)},Ua=>{_o.setEnabled(!or(Ua))})),ri=(_o,or,Ua)=>js(()=>k.get().fold(()=>{_o.setEnabled(!1),_o.setActive(!1)},zc=>{_o.setEnabled(!or(zc)),_o.setActive(Ua(zc))})),ml=_o=>V.exists(or=>or.locked[_o]),Mu=_o=>nr(_o,or=>!1),hd=_o=>nr(_o,or=>_e(or.element)),fh=_o=>or=>nr(or,Ua=>_e(Ua.element)||ml(_o)),pd=_o=>or=>nr(or,Ua=>_e(Ua.element)||_o().isNone()),Nu=(_o,or)=>Ua=>nr(Ua,zc=>_e(zc.element)||_o().isNone()||ml(or)),Km=_o=>nr(_o,or=>mt("mergeable")),Bu=_o=>nr(_o,or=>mt("unmergeable")),yi=_o=>ri(_o,It,or=>Ha(or.element,Tu(C)).exists(zc=>ul(zc,"caption"))),gh=(_o,or)=>Ua=>ri(Ua,zc=>_e(zc.element),()=>C.queryCommandValue(_o)===or),Tp=gh("mceTableRowType","header"),$0=gh("mceTableColType","th");return C.on("NodeChange ExecCommand TableSelectorChange",ur),{onSetupTable:Mu,onSetupCellOrRow:hd,onSetupColumn:fh,onSetupPasteable:pd,onSetupPasteableColumn:Nu,onSetupMergeable:Km,onSetupUnmergeable:Bu,resetTargets:ur,onSetupTableWithCaption:yi,onSetupTableRowHeaders:Tp,onSetupTableColumnHeaders:$0,targets:k.get}};var Kf=tinymce.util.Tools.resolve("tinymce.FakeClipboard");const Yf="x-tinymce/dom-table-",Xf=Yf+"rows",vi=Yf+"columns",kp=C=>{var k;const I=(k=Kf.read())!==null&&k!==void 0?k:[];return Pe(I,V=>Y.from(V.getType(C)))},Ke=()=>kp(Xf),Da=()=>kp(vi),v1=(C,k)=>{C.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:Mn=>Mn("inserttable | cell row column | advtablesort | tableprops deletetable")});const I=Mn=>()=>C.execCommand(Mn),V=(Mn,Lo)=>{C.queryCommandSupported(Lo.command)&&C.ui.registry.addButton(Mn,{...Lo,onAction:Ut(Lo.onAction)?Lo.onAction:I(Lo.command)})},_e=(Mn,Lo)=>{C.queryCommandSupported(Lo.command)&&C.ui.registry.addToggleButton(Mn,{...Lo,onAction:Ut(Lo.onAction)?Lo.onAction:I(Lo.command)})};V("tableprops",{tooltip:"Table properties",command:"mceTableProps",icon:"table",onSetup:k.onSetupTable}),V("tabledelete",{tooltip:"Delete table",command:"mceTableDelete",icon:"table-delete-table",onSetup:k.onSetupTable}),V("tablecellprops",{tooltip:"Cell properties",command:"mceTableCellProps",icon:"table-cell-properties",onSetup:k.onSetupCellOrRow}),V("tablemergecells",{tooltip:"Merge cells",command:"mceTableMergeCells",icon:"table-merge-cells",onSetup:k.onSetupMergeable}),V("tablesplitcells",{tooltip:"Split cell",command:"mceTableSplitCells",icon:"table-split-cells",onSetup:k.onSetupUnmergeable}),V("tableinsertrowbefore",{tooltip:"Insert row before",command:"mceTableInsertRowBefore",icon:"table-insert-row-above",onSetup:k.onSetupCellOrRow}),V("tableinsertrowafter",{tooltip:"Insert row after",command:"mceTableInsertRowAfter",icon:"table-insert-row-after",onSetup:k.onSetupCellOrRow}),V("tabledeleterow",{tooltip:"Delete row",command:"mceTableDeleteRow",icon:"table-delete-row",onSetup:k.onSetupCellOrRow}),V("tablerowprops",{tooltip:"Row properties",command:"mceTableRowProps",icon:"table-row-properties",onSetup:k.onSetupCellOrRow}),V("tableinsertcolbefore",{tooltip:"Insert column before",command:"mceTableInsertColBefore",icon:"table-insert-column-before",onSetup:k.onSetupColumn("onFirst")}),V("tableinsertcolafter",{tooltip:"Insert column after",command:"mceTableInsertColAfter",icon:"table-insert-column-after",onSetup:k.onSetupColumn("onLast")}),V("tabledeletecol",{tooltip:"Delete column",command:"mceTableDeleteCol",icon:"table-delete-column",onSetup:k.onSetupColumn("onAny")}),V("tablecutrow",{tooltip:"Cut row",command:"mceTableCutRow",icon:"cut-row",onSetup:k.onSetupCellOrRow}),V("tablecopyrow",{tooltip:"Copy row",command:"mceTableCopyRow",icon:"duplicate-row",onSetup:k.onSetupCellOrRow}),V("tablepasterowbefore",{tooltip:"Paste row before",command:"mceTablePasteRowBefore",icon:"paste-row-before",onSetup:k.onSetupPasteable(Ke)}),V("tablepasterowafter",{tooltip:"Paste row after",command:"mceTablePasteRowAfter",icon:"paste-row-after",onSetup:k.onSetupPasteable(Ke)}),V("tablecutcol",{tooltip:"Cut column",command:"mceTableCutCol",icon:"cut-column",onSetup:k.onSetupColumn("onAny")}),V("tablecopycol",{tooltip:"Copy column",command:"mceTableCopyCol",icon:"duplicate-column",onSetup:k.onSetupColumn("onAny")}),V("tablepastecolbefore",{tooltip:"Paste column before",command:"mceTablePasteColBefore",icon:"paste-column-before",onSetup:k.onSetupPasteableColumn(Da,"onFirst")}),V("tablepastecolafter",{tooltip:"Paste column after",command:"mceTablePasteColAfter",icon:"paste-column-after",onSetup:k.onSetupPasteableColumn(Da,"onLast")}),V("tableinsertdialog",{tooltip:"Insert table",command:"mceInsertTableDialog",icon:"table"});const mt=mc(za(C));mt.length!==0&&C.queryCommandSupported("mceTableToggleClass")&&C.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:tu(C,mt,"tableclass",Mn=>C.execCommand("mceTableToggleClass",!1,Mn)),onSetup:k.onSetupTable});const jt=mc(Dl(C));jt.length!==0&&C.queryCommandSupported("mceTableCellToggleClass")&&C.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:tu(C,jt,"tablecellclass",Mn=>C.execCommand("mceTableCellToggleClass",!1,Mn)),onSetup:k.onSetupCellOrRow}),C.queryCommandSupported("mceTableApplyCellStyle")&&(C.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:tu(C,na,"tablecellverticalalign",Ho(C,"vertical-align")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:tu(C,Ol(C),"tablecellborderwidth",Ho(C,"border-width")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:tu(C,Yr(C),"tablecellborderstyle",Ho(C,"border-style")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:Mn=>Mn(Au(C,ku(C),"background-color")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:Mn=>Mn(Au(C,zd(C),"border-color")),onSetup:k.onSetupCellOrRow})),_e("tablecaption",{tooltip:"Table caption",icon:"table-caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),_e("tablerowheader",{tooltip:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:ah(C),onSetup:k.onSetupTableRowHeaders}),_e("tablecolheader",{tooltip:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:zm(C),onSetup:k.onSetupTableColumnHeaders})},Sr=C=>{const k=V=>C.dom.is(V,"table")&&C.getBody().contains(V),I=rl(C);I.length>0&&C.ui.registry.addContextToolbar("table",{predicate:k,items:I,scope:"node",position:"node"})},dl=(C,k)=>{const I=js=>()=>C.execCommand(js),V=(js,nr)=>C.queryCommandSupported(nr.command)?(C.ui.registry.addMenuItem(js,{...nr,onAction:Ut(nr.onAction)?nr.onAction:I(nr.command)}),!0):!1,_e=(js,nr)=>{C.queryCommandSupported(nr.command)&&C.ui.registry.addToggleMenuItem(js,{...nr,onAction:Ut(nr.onAction)?nr.onAction:I(nr.command)})},mt=js=>{C.execCommand("mceInsertTable",!1,{rows:js.numRows,columns:js.numColumns})},jt=[V("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",command:"mceTableInsertRowBefore",onSetup:k.onSetupCellOrRow}),V("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",command:"mceTableInsertRowAfter",onSetup:k.onSetupCellOrRow}),V("tabledeleterow",{text:"Delete row",icon:"table-delete-row",command:"mceTableDeleteRow",onSetup:k.onSetupCellOrRow}),V("tablerowprops",{text:"Row properties",icon:"table-row-properties",command:"mceTableRowProps",onSetup:k.onSetupCellOrRow}),V("tablecutrow",{text:"Cut row",icon:"cut-row",command:"mceTableCutRow",onSetup:k.onSetupCellOrRow}),V("tablecopyrow",{text:"Copy row",icon:"duplicate-row",command:"mceTableCopyRow",onSetup:k.onSetupCellOrRow}),V("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",command:"mceTablePasteRowBefore",onSetup:k.onSetupPasteable(Ke)}),V("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",command:"mceTablePasteRowAfter",onSetup:k.onSetupPasteable(Ke)})],Mn=[V("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",command:"mceTableInsertColBefore",onSetup:k.onSetupColumn("onFirst")}),V("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",command:"mceTableInsertColAfter",onSetup:k.onSetupColumn("onLast")}),V("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",command:"mceTableDeleteCol",onSetup:k.onSetupColumn("onAny")}),V("tablecutcolumn",{text:"Cut column",icon:"cut-column",command:"mceTableCutCol",onSetup:k.onSetupColumn("onAny")}),V("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",command:"mceTableCopyCol",onSetup:k.onSetupColumn("onAny")}),V("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",command:"mceTablePasteColBefore",onSetup:k.onSetupPasteableColumn(Da,"onFirst")}),V("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",command:"mceTablePasteColAfter",onSetup:k.onSetupPasteableColumn(Da,"onLast")})],Lo=[V("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",command:"mceTableCellProps",onSetup:k.onSetupCellOrRow}),V("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",command:"mceTableMergeCells",onSetup:k.onSetupMergeable}),V("tablesplitcells",{text:"Split cell",icon:"table-split-cells",command:"mceTableSplitCells",onSetup:k.onSetupUnmergeable})];Yg(C)?C.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:()=>[{type:"fancymenuitem",fancytype:"inserttable",onAction:mt}]}):C.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:I("mceInsertTableDialog")}),C.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:I("mceInsertTableDialog")}),V("tableprops",{text:"Table properties",onSetup:k.onSetupTable,command:"mceTableProps"}),V("deletetable",{text:"Delete table",icon:"table-delete-table",onSetup:k.onSetupTable,command:"mceTableDelete"}),nn(jt,!0)&&C.ui.registry.addNestedMenuItem("row",{type:"nestedmenuitem",text:"Row",getSubmenuItems:Ze("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")}),nn(Mn,!0)&&C.ui.registry.addNestedMenuItem("column",{type:"nestedmenuitem",text:"Column",getSubmenuItems:Ze("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")}),nn(Lo,!0)&&C.ui.registry.addNestedMenuItem("cell",{type:"nestedmenuitem",text:"Cell",getSubmenuItems:Ze("tablecellprops tablemergecells tablesplitcells")}),C.ui.registry.addContextMenu("table",{update:()=>(k.resetTargets(),k.targets().fold(Ze(""),js=>An(js.element)==="caption"?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"))});const Go=mc(za(C));Go.length!==0&&C.queryCommandSupported("mceTableToggleClass")&&C.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:()=>vr(C,Go,"tableclass",js=>C.execCommand("mceTableToggleClass",!1,js)),onSetup:k.onSetupTable});const ur=mc(Dl(C));ur.length!==0&&C.queryCommandSupported("mceTableCellToggleClass")&&C.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:()=>vr(C,ur,"tablecellclass",js=>C.execCommand("mceTableCellToggleClass",!1,js)),onSetup:k.onSetupCellOrRow}),C.queryCommandSupported("mceTableApplyCellStyle")&&(C.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:()=>vr(C,na,"tablecellverticalalign",Ho(C,"vertical-align")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:()=>vr(C,Ol(C),"tablecellborderwidth",Ho(C,"border-width")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:()=>vr(C,Yr(C),"tablecellborderstyle",Ho(C,"border-style")),onSetup:k.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:()=>Au(C,ku(C),"background-color"),onSetup:k.onSetupCellOrRow}),C.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:()=>Au(C,zd(C),"border-color"),onSetup:k.onSetupCellOrRow})),_e("tablecaption",{icon:"table-caption",text:"Table caption",command:"mceTableToggleCaption",onSetup:k.onSetupTableWithCaption}),_e("tablerowheader",{text:"Row header",icon:"table-top-header",command:"mceTableRowType",onAction:ah(C),onSetup:k.onSetupTableRowHeaders}),_e("tablecolheader",{text:"Column header",icon:"table-left-header",command:"mceTableColType",onAction:zm(C),onSetup:k.onSetupTableRowHeaders})},Ra=C=>{const k=ec(C);zr(C),B0(C),dl(C,k),v1(C,k),Sr(C)};var Ma=()=>{Ht.add("table",Ra)};Ma()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const yn=(z,Z,Ne)=>{var Pe;return Ne(z,Z.prototype)?!0:((Pe=z.constructor)===null||Pe===void 0?void 0:Pe.name)===Z.name},dn=z=>{const Z=typeof z;return z===null?"null":Z==="object"&&Array.isArray(z)?"array":Z==="object"&&yn(z,String,(Ne,Pe)=>Pe.isPrototypeOf(Ne))?"string":Z},Sn=z=>Z=>dn(Z)===z,Qt=z=>Z=>typeof Z===z,Dn=Sn("string"),xn=Sn("object"),Nt=Sn("array"),Et=z=>z==null,pt=z=>!Et(z),hn=Qt("function"),rn=(z,Z)=>{if(Nt(z)){for(let Ne=0,Pe=z.length;Ne<Pe;++Ne)if(!Z(z[Ne]))return!1;return!0}return!1},Ut=z=>()=>z;function Ct(z,...Z){return(...Ne)=>{const Pe=Z.concat(Ne);return z.apply(null,Pe)}}const Mt=Ut(!1),cn=z=>z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");var Ze=tinymce.util.Tools.resolve("tinymce.util.Tools");const st=z=>Z=>Z.options.get(z),Te=z=>{const Z=z.options.register;Z("template_cdate_classes",{processor:"string",default:"cdate"}),Z("template_mdate_classes",{processor:"string",default:"mdate"}),Z("template_selected_content_classes",{processor:"string",default:"selcontent"}),Z("template_preview_replace_values",{processor:"object"}),Z("template_replace_values",{processor:"object"}),Z("templates",{processor:Ne=>Dn(Ne)||rn(Ne,xn)||hn(Ne),default:[]}),Z("template_cdate_format",{processor:"string",default:z.translate("%Y-%m-%d")}),Z("template_mdate_format",{processor:"string",default:z.translate("%Y-%m-%d")})},Q=st("template_cdate_classes"),ht=st("template_mdate_classes"),It=st("template_selected_content_classes"),yt=st("template_preview_replace_values"),Y=st("template_replace_values"),Ot=st("templates"),Bn=st("template_cdate_format"),$t=st("template_mdate_format"),ye=st("content_style"),ee=st("content_css_cors"),at=st("body_class"),Le=(z,Z)=>{if(z=""+z,z.length<Z)for(let Ne=0;Ne<Z-z.length;Ne++)z="0"+z;return z},Me=(z,Z,Ne=new Date)=>{const Pe="Sun Mon Tue Wed Thu Fri Sat Sun".split(" "),Wt="Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday".split(" "),ot="Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),Qn="January February March April May June July August September October November December".split(" ");return Z=Z.replace("%D","%m/%d/%Y"),Z=Z.replace("%r","%I:%M:%S %p"),Z=Z.replace("%Y",""+Ne.getFullYear()),Z=Z.replace("%y",""+Ne.getYear()),Z=Z.replace("%m",Le(Ne.getMonth()+1,2)),Z=Z.replace("%d",Le(Ne.getDate(),2)),Z=Z.replace("%H",""+Le(Ne.getHours(),2)),Z=Z.replace("%M",""+Le(Ne.getMinutes(),2)),Z=Z.replace("%S",""+Le(Ne.getSeconds(),2)),Z=Z.replace("%I",""+((Ne.getHours()+11)%12+1)),Z=Z.replace("%p",Ne.getHours()<12?"AM":"PM"),Z=Z.replace("%B",""+z.translate(Qn[Ne.getMonth()])),Z=Z.replace("%b",""+z.translate(ot[Ne.getMonth()])),Z=Z.replace("%A",""+z.translate(Wt[Ne.getDay()])),Z=Z.replace("%a",""+z.translate(Pe[Ne.getDay()])),Z=Z.replace("%%","%"),Z};class Rt{constructor(Z,Ne){this.tag=Z,this.value=Ne}static some(Z){return new Rt(!0,Z)}static none(){return Rt.singletonNone}fold(Z,Ne){return this.tag?Ne(this.value):Z()}isSome(){return this.tag}isNone(){return!this.tag}map(Z){return this.tag?Rt.some(Z(this.value)):Rt.none()}bind(Z){return this.tag?Z(this.value):Rt.none()}exists(Z){return this.tag&&Z(this.value)}forall(Z){return!this.tag||Z(this.value)}filter(Z){return!this.tag||Z(this.value)?this:Rt.none()}getOr(Z){return this.tag?this.value:Z}or(Z){return this.tag?this:Z}getOrThunk(Z){return this.tag?this.value:Z()}orThunk(Z){return this.tag?this:Z()}getOrDie(Z){if(this.tag)return this.value;throw new Error(Z??"Called getOrDie on None")}static from(Z){return pt(Z)?Rt.some(Z):Rt.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(Z){this.tag&&Z(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}Rt.singletonNone=new Rt(!1);const _=(z,Z)=>{for(let Ne=0,Pe=z.length;Ne<Pe;Ne++){const Wt=z[Ne];if(Z(Wt,Ne))return!0}return!1},he=(z,Z)=>{const Ne=z.length,Pe=new Array(Ne);for(let Wt=0;Wt<Ne;Wt++){const ot=z[Wt];Pe[Wt]=Z(ot,Wt)}return Pe},Ue=(z,Z,Ne)=>{for(let Pe=0,Wt=z.length;Pe<Wt;Pe++){const ot=z[Pe];if(Z(ot,Pe))return Rt.some(ot);if(Ne(ot,Pe))break}return Rt.none()},Oe=(z,Z)=>Ue(z,Z,Mt),fe=Object.hasOwnProperty,Kt=(z,Z)=>nn(z,Z)?Rt.from(z[Z]):Rt.none(),nn=(z,Z)=>fe.call(z,Z),Fe={'"':"&quot;","<":"&lt;",">":"&gt;","&":"&amp;","'":"&#039;"},Vt=z=>z.replace(/["'<>&]/g,Z=>Kt(Fe,Z).getOr(Z)),kt=(z,Z,Ne)=>_(Ne.split(/\s+/),Pe=>z.hasClass(Z,Pe)),Ie=(z,Z)=>()=>{const Ne=Ot(z);hn(Ne)?Ne(Z):Dn(Ne)?fetch(Ne).then(Pe=>{Pe.ok&&Pe.json().then(Z)}):Z(Ne)},R=(z,Z)=>(Ze.each(Z,(Ne,Pe)=>{hn(Ne)&&(Ne=Ne(Pe)),z=z.replace(new RegExp("\\{\\$"+cn(Pe)+"\\}","g"),Ne)}),z),Hn=(z,Z)=>{const Ne=z.dom,Pe=Y(z);Ze.each(Ne.select("*",Z),Wt=>{Ze.each(Pe,(ot,Qn)=>{Ne.hasClass(Wt,Qn)&&hn(ot)&&ot(Wt)})})},Ae=(z,Z,Ne)=>{const Pe=z.dom,Wt=z.selection.getContent();Ne=R(Ne,Y(z));let ot=Pe.create("div",{},Ne);const Qn=Pe.select(".mceTmpl",ot);Qn&&Qn.length>0&&(ot=Pe.create("div"),ot.appendChild(Qn[0].cloneNode(!0))),Ze.each(Pe.select("*",ot),uo=>{kt(Pe,uo,Q(z))&&(uo.innerHTML=Me(z,Bn(z))),kt(Pe,uo,ht(z))&&(uo.innerHTML=Me(z,$t(z))),kt(Pe,uo,It(z))&&(uo.innerHTML=Wt)}),Hn(z,ot),z.execCommand("mceInsertContent",!1,ot.innerHTML),z.addVisual()};var Se=tinymce.util.Tools.resolve("tinymce.Env");const We=(z,Z)=>{var Ne;if(Z.indexOf("<html>")===-1){let Pe="";const Wt=(Ne=ye(z))!==null&&Ne!==void 0?Ne:"",ot=ee(z)?' crossorigin="anonymous"':"";Ze.each(z.contentCSS,Ye=>{Pe+='<link type="text/css" rel="stylesheet" href="'+z.documentBaseURI.toAbsolute(Ye)+'"'+ot+">"}),Wt&&(Pe+='<style type="text/css">'+Wt+"</style>");const Qn=at(z),uo=z.dom.encode,kn='<script>document.addEventListener && document.addEventListener("click", function(e) {for (var elm = e.target; elm; elm = elm.parentNode) {if (elm.nodeName === "A" && !('+(Se.os.isMacOS()||Se.os.isiOS()?"e.metaKey":"e.ctrlKey && !e.altKey")+")) {e.preventDefault();}}}, false);<\/script> ",ao=z.getBody().dir,Re=ao?' dir="'+uo(ao)+'"':"";Z='<!DOCTYPE html><html><head><base href="'+uo(z.documentBaseURI.getURI())+'">'+Pe+kn+'</head><body class="'+uo(Qn)+'"'+Re+">"+Z+"</body></html>"}return R(Z,yt(z))},Ee=(z,Z)=>{const Ne=()=>{if(!Z||Z.length===0){const Re=z.translate("No templates defined.");return z.notificationManager.open({text:Re,type:"info"}),Rt.none()}return Rt.from(Ze.map(Z,(Re,Ye)=>{const Bt=an=>an.url!==void 0;return{selected:Ye===0,text:Re.title,value:{url:Bt(Re)?Rt.from(Re.url):Rt.none(),content:Bt(Re)?Rt.none():Rt.from(Re.content),description:Re.description}}}))},Pe=Re=>he(Re,Ye=>({text:Ye.text,value:Ye.text})),Wt=(Re,Ye)=>Oe(Re,Bt=>Bt.text===Ye),ot=Re=>{z.windowManager.alert("Could not load the specified template.",()=>Re.focus("template"))},Qn=Re=>Re.value.url.fold(()=>Promise.resolve(Re.value.content.getOr("")),Ye=>fetch(Ye).then(Bt=>Bt.ok?Bt.text():Promise.reject())),uo=(Re,Ye)=>(Bt,an)=>{if(an.name==="template"){const An=Bt.getData().template;Wt(Re,An).each(Tn=>{Bt.block("Loading..."),Qn(Tn).then(Do=>{Ye(Bt,Tn,Do)}).catch(()=>{Ye(Bt,Tn,""),Bt.setEnabled("save",!1),ot(Bt)})})}},eo=Re=>Ye=>{const Bt=Ye.getData();Wt(Re,Bt.template).each(an=>{Qn(an).then(An=>{z.execCommand("mceInsertTemplate",!1,An),Ye.close()}).catch(()=>{Ye.setEnabled("save",!1),ot(Ye)})})},kn=Re=>{const Ye=Pe(Re),Bt=(Tn,Do)=>({title:"Insert Template",size:"large",body:{type:"panel",items:Tn},initialData:Do,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:eo(Re),onChange:uo(Re,an)}),an=(Tn,Do,ks)=>{const qe=We(z,ks),ze=[{type:"selectbox",name:"template",label:"Templates",items:Ye},{type:"htmlpanel",html:`<p aria-live="polite">${Vt(Do.value.description)}</p>`},{label:"Preview",type:"iframe",name:"preview",sandboxed:!1,transparent:!1}],sn={template:Do.text,preview:qe};Tn.unblock(),Tn.redial(Bt(ze,sn)),Tn.focus("template")},An=z.windowManager.open(Bt([],{template:"",preview:""}));An.block("Loading..."),Qn(Re[0]).then(Tn=>{an(An,Re[0],Tn)}).catch(()=>{an(An,Re[0],""),An.setEnabled("save",!1),ot(An)})};Ne().each(kn)},ae=z=>Z=>{Ee(z,Z)},se=z=>{z.addCommand("mceInsertTemplate",Ct(Ae,z)),z.addCommand("mceTemplate",Ie(z,ae(z)))},re=z=>{z.on("PreProcess",Z=>{const Ne=z.dom,Pe=$t(z);Ze.each(Ne.select("div",Z.node),Wt=>{Ne.hasClass(Wt,"mceTmpl")&&(Ze.each(Ne.select("*",Wt),ot=>{kt(Ne,ot,ht(z))&&(ot.innerHTML=Me(z,Pe))}),Hn(z,Wt))})})},H=z=>{const Z=()=>z.execCommand("mceTemplate");z.ui.registry.addButton("template",{icon:"template",tooltip:"Insert template",onAction:Z}),z.ui.registry.addMenuItem("template",{icon:"template",text:"Insert template...",onAction:Z})};var q=()=>{Ht.add("template",z=>{Te(z),H(z),se(z),re(z)})};q()})();(function(){const Ht=Ut=>{let Ct=Ut;return{get:()=>Ct,set:Ze=>{Ct=Ze}}};var yn=tinymce.util.Tools.resolve("tinymce.PluginManager");const dn=(Ut,Ct)=>{Ut.dispatch("VisualBlocks",{state:Ct})},Sn=(Ut,Ct,Mt)=>{Ut.dom.toggleClass(Ut.getBody(),"mce-visualblocks"),Mt.set(!Mt.get()),dn(Ut,Mt.get())},Qt=(Ut,Ct,Mt)=>{Ut.addCommand("mceVisualBlocks",()=>{Sn(Ut,Ct,Mt)})},Dn=Ut=>Ct=>Ct.options.get(Ut),xn=Ut=>{const Ct=Ut.options.register;Ct("visualblocks_default_state",{processor:"boolean",default:!1})},Nt=Dn("visualblocks_default_state"),Et=(Ut,Ct,Mt)=>{Ut.on("PreviewFormats AfterPreviewFormats",cn=>{Mt.get()&&Ut.dom.toggleClass(Ut.getBody(),"mce-visualblocks",cn.type==="afterpreviewformats")}),Ut.on("init",()=>{Nt(Ut)&&Sn(Ut,Ct,Mt)})},pt=(Ut,Ct)=>Mt=>{Mt.setActive(Ct.get());const cn=Ze=>Mt.setActive(Ze.state);return Ut.on("VisualBlocks",cn),()=>Ut.off("VisualBlocks",cn)},hn=(Ut,Ct)=>{const Mt=()=>Ut.execCommand("mceVisualBlocks");Ut.ui.registry.addToggleButton("visualblocks",{icon:"visualblocks",tooltip:"Show blocks",onAction:Mt,onSetup:pt(Ut,Ct)}),Ut.ui.registry.addToggleMenuItem("visualblocks",{text:"Show blocks",icon:"visualblocks",onAction:Mt,onSetup:pt(Ut,Ct)})};var rn=()=>{yn.add("visualblocks",(Ut,Ct)=>{xn(Ut);const Mt=Ht(!1);Qt(Ut,Ct,Mt),hn(Ut,Mt),Et(Ut,Ct,Mt)})};rn()})();(function(){const Ht=qe=>{let ze=qe;return{get:()=>ze,set:qt=>{ze=qt}}};var yn=tinymce.util.Tools.resolve("tinymce.PluginManager");const dn=qe=>({isEnabled:()=>qe.get()}),Sn=(qe,ze)=>qe.dispatch("VisualChars",{state:ze}),Qt=(qe,ze,sn)=>{var on;return sn(qe,ze.prototype)?!0:((on=qe.constructor)===null||on===void 0?void 0:on.name)===ze.name},Dn=qe=>{const ze=typeof qe;return qe===null?"null":ze==="object"&&Array.isArray(qe)?"array":ze==="object"&&Qt(qe,String,(sn,on)=>on.isPrototypeOf(sn))?"string":ze},xn=qe=>ze=>Dn(ze)===qe,Nt=qe=>ze=>typeof ze===qe,Et=qe=>ze=>qe===ze,pt=xn("string"),hn=Et(null),rn=Nt("boolean"),Ut=qe=>qe==null,Ct=qe=>!Ut(qe),Mt=Nt("number");class cn{constructor(ze,sn){this.tag=ze,this.value=sn}static some(ze){return new cn(!0,ze)}static none(){return cn.singletonNone}fold(ze,sn){return this.tag?sn(this.value):ze()}isSome(){return this.tag}isNone(){return!this.tag}map(ze){return this.tag?cn.some(ze(this.value)):cn.none()}bind(ze){return this.tag?ze(this.value):cn.none()}exists(ze){return this.tag&&ze(this.value)}forall(ze){return!this.tag||ze(this.value)}filter(ze){return!this.tag||ze(this.value)?this:cn.none()}getOr(ze){return this.tag?this.value:ze}or(ze){return this.tag?this:ze}getOrThunk(ze){return this.tag?this.value:ze()}orThunk(ze){return this.tag?this:ze()}getOrDie(ze){if(this.tag)return this.value;throw new Error(ze??"Called getOrDie on None")}static from(ze){return Ct(ze)?cn.some(ze):cn.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(ze){this.tag&&ze(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}cn.singletonNone=new cn(!1);const Ze=(qe,ze)=>{const sn=qe.length,on=new Array(sn);for(let qt=0;qt<sn;qt++){const Kn=qe[qt];on[qt]=ze(Kn,qt)}return on},st=(qe,ze)=>{for(let sn=0,on=qe.length;sn<on;sn++){const qt=qe[sn];ze(qt,sn)}},Te=(qe,ze)=>{const sn=[];for(let on=0,qt=qe.length;on<qt;on++){const Kn=qe[on];ze(Kn,on)&&sn.push(Kn)}return sn},Q=Object.keys,ht=(qe,ze)=>{const sn=Q(qe);for(let on=0,qt=sn.length;on<qt;on++){const Kn=sn[on],Ts=qe[Kn];ze(Ts,Kn)}};typeof window<"u"||Function("return this;")();const It=3,yt=qe=>qe.dom.nodeType,Y=qe=>qe.dom.nodeValue,Bn=(qe=>ze=>yt(ze)===qe)(It),$t=(qe,ze,sn)=>{if(pt(sn)||rn(sn)||Mt(sn))qe.setAttribute(ze,sn+"");else throw console.error("Invalid call to Attribute.set. Key ",ze,":: Value ",sn,":: Element ",qe),new Error("Attribute value was not simple")},ye=(qe,ze,sn)=>{$t(qe.dom,ze,sn)},ee=(qe,ze)=>{const sn=qe.dom.getAttribute(ze);return sn===null?void 0:sn},at=(qe,ze)=>{qe.dom.removeAttribute(ze)},Le=(qe,ze)=>{const sn=ee(qe,ze);return sn===void 0||sn===""?[]:sn.split(" ")},Me=(qe,ze,sn)=>{const qt=Le(qe,ze).concat([sn]);return ye(qe,ze,qt.join(" ")),!0},Rt=(qe,ze,sn)=>{const on=Te(Le(qe,ze),qt=>qt!==sn);return on.length>0?ye(qe,ze,on.join(" ")):at(qe,ze),!1},_=qe=>qe.dom.classList!==void 0,he=qe=>Le(qe,"class"),Ue=(qe,ze)=>Me(qe,"class",ze),Oe=(qe,ze)=>Rt(qe,"class",ze),fe=(qe,ze)=>{_(qe)?qe.dom.classList.add(ze):Ue(qe,ze)},Kt=qe=>{(_(qe)?qe.dom.classList:he(qe)).length===0&&at(qe,"class")},nn=(qe,ze)=>{_(qe)?qe.dom.classList.remove(ze):Oe(qe,ze),Kt(qe)},Fe=(qe,ze)=>{const on=(ze||document).createElement("div");if(on.innerHTML=qe,!on.hasChildNodes()||on.childNodes.length>1){const qt="HTML does not have a single root node";throw console.error(qt,qe),new Error(qt)}return Ie(on.childNodes[0])},Vt=(qe,ze)=>{const on=(ze||document).createElement(qe);return Ie(on)},kt=(qe,ze)=>{const on=(ze||document).createTextNode(qe);return Ie(on)},Ie=qe=>{if(qe==null)throw new Error("Node cannot be null or undefined");return{dom:qe}},Hn={fromHtml:Fe,fromTag:Vt,fromText:kt,fromDom:Ie,fromPoint:(qe,ze,sn)=>cn.from(qe.dom.elementFromPoint(ze,sn)).map(Ie)},Ae={" ":"nbsp","­":"shy"},Se=(qe,ze)=>{let sn="";return ht(qe,(on,qt)=>{sn+=qt}),new RegExp("["+sn+"]",ze?"g":"")},We=qe=>{let ze="";return ht(qe,sn=>{ze&&(ze+=","),ze+="span.mce-"+sn}),ze},Ee=Se(Ae),ae=Se(Ae,!0),se=We(Ae),re="mce-nbsp",H=qe=>'<span data-mce-bogus="1" class="mce-'+Ae[qe]+'">'+qe+"</span>",q=qe=>{const ze=Y(qe);return Bn(qe)&&pt(ze)&&Ee.test(ze)},z=(qe,ze)=>{let sn=[];const on=qe.dom,qt=Ze(on.childNodes,Hn.fromDom);return st(qt,Kn=>{ze(Kn)&&(sn=sn.concat([Kn])),sn=sn.concat(z(Kn,ze))}),sn},Z=(qe,ze)=>{for(;qe.parentNode;){if(qe.parentNode===ze)return ze;qe=qe.parentNode}},Ne=qe=>qe.replace(ae,H),Pe=qe=>qe.nodeName.toLowerCase()==="span"&&qe.classList.contains("mce-nbsp-wrap"),Wt=(qe,ze)=>{const sn=qe.dom,on=z(Hn.fromDom(ze),q);st(on,qt=>{var Kn;const Ts=qt.dom.parentNode;if(Pe(Ts))fe(Hn.fromDom(Ts),re);else{const _r=Ne(sn.encode((Kn=Y(qt))!==null&&Kn!==void 0?Kn:"")),ga=sn.create("div",{},_r);let bs;for(;bs=ga.lastChild;)sn.insertAfter(bs,qt.dom);qe.dom.remove(qt.dom)}})},ot=(qe,ze)=>{const sn=qe.dom.select(se,ze);st(sn,on=>{Pe(on)?nn(Hn.fromDom(on),re):qe.dom.remove(on,!0)})},Qn=qe=>{const ze=qe.getBody(),sn=qe.selection.getBookmark();let on=Z(qe.selection.getNode(),ze);on=on!==void 0?on:ze,ot(qe,on),Wt(qe,on),qe.selection.moveToBookmark(sn)},uo=(qe,ze)=>{Sn(qe,ze.get());const sn=qe.getBody();ze.get()===!0?Wt(qe,sn):ot(qe,sn)},eo=(qe,ze)=>{ze.set(!ze.get());const sn=qe.selection.getBookmark();uo(qe,ze),qe.selection.moveToBookmark(sn)},kn=(qe,ze)=>{qe.addCommand("mceVisualChars",()=>{eo(qe,ze)})},ao=qe=>ze=>ze.options.get(qe),Re=qe=>{const ze=qe.options.register;ze("visualchars_default_state",{processor:"boolean",default:!1})},Ye=ao("visualchars_default_state"),Bt=(qe,ze)=>{qe.on("init",()=>{uo(qe,ze)})},an=(qe,ze)=>{let sn=null;return{cancel:()=>{hn(sn)||(clearTimeout(sn),sn=null)},throttle:(...Kn)=>{hn(sn)&&(sn=setTimeout(()=>{sn=null,qe.apply(null,Kn)},ze))}}},An=(qe,ze)=>{const sn=an(()=>{Qn(qe)},300);qe.on("keydown",on=>{ze.get()===!0&&(on.keyCode===13?Qn(qe):sn.throttle())}),qe.on("remove",sn.cancel)},Tn=(qe,ze)=>sn=>{sn.setActive(ze.get());const on=qt=>sn.setActive(qt.state);return qe.on("VisualChars",on),()=>qe.off("VisualChars",on)},Do=(qe,ze)=>{const sn=()=>qe.execCommand("mceVisualChars");qe.ui.registry.addToggleButton("visualchars",{tooltip:"Show invisible characters",icon:"visualchars",onAction:sn,onSetup:Tn(qe,ze)}),qe.ui.registry.addToggleMenuItem("visualchars",{text:"Show invisible characters",icon:"visualchars",onAction:sn,onSetup:Tn(qe,ze)})};var ks=()=>{yn.add("visualchars",qe=>{Re(qe);const ze=Ht(Ye(qe));return kn(qe,ze),Do(qe,ze),An(qe,ze),Bt(qe,ze),dn(ze)})};ks()})();(function(){var Ht=tinymce.util.Tools.resolve("tinymce.PluginManager");const dn=(ae=>se=>ae===se)(null),Sn=ae=>ae,Qt="\uFEFF",Dn=ae=>ae.replace(/\uFEFF/g,""),xn=(ae,se)=>{const re=ae.length,H=new Array(re);for(let q=0;q<re;q++){const z=ae[q];H[q]=se(z,q)}return H},Et={aletter:"[A-Za-zªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-׳ؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆༀཀ-ཇཉ-ཬྈ-ྌႠ-Ⴥა-ჺჼᄀ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᨀ-ᨖᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᯀ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⒶ-ⓩⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⴀ-ⴥⴰ-ⵥⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〻〼ㄅ-ㄭㄱ-ㆎㆠ-ㆺꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐꞑꞠ-ꞩꟺ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚﾠ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ]",midnumlet:"[-'\\.‘’․﹒＇．]",midletter:"[:··״‧︓﹕：]",midnum:"[±+*/,;;։،؍٬߸⁄︐︔﹐﹔，；]",numeric:"[0-9٠-٩٫۰-۹߀-߉०-९০-৯੦-੯૦-૯୦-୯௦-௯౦-౯೦-೯൦-൯๐-๙໐-໙༠-༩၀-၉႐-႙០-៩᠐-᠙᥆-᥏᧐-᧙᪀-᪉᪐-᪙᭐-᭙᮰-᮹᱀-᱉᱐-᱙꘠-꘩꣐-꣙꤀-꤉꧐-꧙꩐-꩙꯰-꯹]",cr:"\\r",lf:"\\n",newline:"[\v\f\u2028\u2029]",extend:"[̀-ͯ҃-҉֑-ׇֽֿׁׂׅׄؐ-ًؚ-ٰٟۖ-ۜ۟-۪ۤۧۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ऀ-ःऺ-़ा-ॏ॑-ॗॢॣঁ-ঃ়া-ৄেৈো-্ৗৢৣਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑੰੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢૣଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୢୣஂா-ூெ-ைொ-்ௗఁ-ఃా-ౄె-ైొ-్ౕౖౢౣಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢೣംഃാ-ൄെ-ൈൊ-്ൗൢൣංඃ්ා-ුූෘ-ෟෲෳัิ-ฺ็-๎ັິ-ູົຼ່-ໍ༹༘༙༵༷༾༿ཱ-྄྆྇ྍ-ྗྙ-ྼ࿆ါ-ှၖ-ၙၞ-ၠၢ-ၤၧ-ၭၱ-ၴႂ-ႍႏႚ-ႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒᝓᝲᝳា-៓៝᠋-᠍ᢩᤠ-ᤫᤰ-᤻ᦰ-ᧀᧈᧉᨗ-ᨛᩕ-ᩞ᩠-᩿᩼ᬀ-ᬄ᬴-᭄᭫-᭳ᮀ-ᮂᮡ-᯦᮪-᯳ᰤ-᰷᳐-᳔᳒-᳨᳭ᳲ᷀-ᷦ᷼-᷿‌‍⃐-⃰⳯-⵿⳱ⷠ-〪ⷿ-゙゚〯꙯-꙲꙼꙽꛰꛱ꠂ꠆ꠋꠣ-ꠧꢀꢁꢴ-꣄꣠-꣱ꤦ-꤭ꥇ-꥓ꦀ-ꦃ꦳-꧀ꨩ-ꨶꩃꩌꩍꩻꪰꪲ-ꪴꪷꪸꪾ꪿꫁ꯣ-ꯪ꯬꯭ﬞ︀-️︠-︦ﾞﾟ]",format:"[­؀-؃۝܏឴឵‎‏‪-‮⁠-⁤⁪-⁯\uFEFF￹-￻]",katakana:"[〱-〵゛゜゠-ヺー-ヿㇰ-ㇿ㋐-㋾㌀-㍗ｦ-ﾝ]",extendnumlet:"[=_‿⁀⁔︳︴﹍-﹏＿∀-⋿<>]",punctuation:"[!-#%-*,-\\/:;?@\\[-\\]_{}¡«·»¿;·՚-՟։֊־׀׃׆׳״؉؊،؍؛؞؟٪-٭۔܀-܍߷-߹࠰-࠾࡞।॥॰෴๏๚๛༄-༒༺-༽྅࿐-࿔࿙࿚၊-၏჻፡-፨᐀᙭᙮᚛᚜᛫-᛭᜵᜶។-៖៘-៚᠀-᠊᥄᥅᨞᨟᪠-᪦᪨-᪭᭚-᭠᯼-᯿᰻-᰿᱾᱿᳓‐-‧‰-⁃⁅-⁑⁓-⁞⁽⁾₍₎〈〉❨-❵⟅⟆⟦-⟯⦃-⦘⧘-⧛⧼⧽⳹-⳼⳾⳿⵰⸀-⸮⸰⸱、-〃〈-】〔-〟〰〽゠・꓾꓿꘍-꘏꙳꙾꛲-꛷꡴-꡷꣎꣏꣸-꣺꤮꤯꥟꧁-꧍꧞꧟꩜-꩟꫞꫟꯫﴾﴿︐-︙︰-﹒﹔-﹡﹣﹨﹪﹫！-＃％-＊，-／：；？＠［-］＿｛｝｟-･]"},pt={ALETTER:0,MIDNUMLET:1,MIDLETTER:2,MIDNUM:3,NUMERIC:4,CR:5,LF:6,NEWLINE:7,EXTEND:8,FORMAT:9,KATAKANA:10,EXTENDNUMLET:11,AT:12,OTHER:13},hn=[new RegExp(Et.aletter),new RegExp(Et.midnumlet),new RegExp(Et.midletter),new RegExp(Et.midnum),new RegExp(Et.numeric),new RegExp(Et.cr),new RegExp(Et.lf),new RegExp(Et.newline),new RegExp(Et.extend),new RegExp(Et.format),new RegExp(Et.katakana),new RegExp(Et.extendnumlet),new RegExp("@")],rn="",Ut=new RegExp("^"+Et.punctuation+"$"),Ct=/^\s+$/,Mt=hn,cn=pt.OTHER,Ze=ae=>{let se=cn;const re=Mt.length;for(let H=0;H<re;++H){const q=Mt[H];if(q&&q.test(ae)){se=H;break}}return se},st=ae=>{const se={};return re=>{if(se[re])return se[re];{const H=ae(re);return se[re]=H,H}}},Te=ae=>{const se=st(Ze);return xn(ae,se)},Q=(ae,se)=>{const re=ae[se],H=ae[se+1];if(se<0||se>ae.length-1&&se!==0||re===pt.ALETTER&&H===pt.ALETTER)return!1;const q=ae[se+2];if(re===pt.ALETTER&&(H===pt.MIDLETTER||H===pt.MIDNUMLET||H===pt.AT)&&q===pt.ALETTER)return!1;const z=ae[se-1];return(re===pt.MIDLETTER||re===pt.MIDNUMLET||H===pt.AT)&&H===pt.ALETTER&&z===pt.ALETTER||(re===pt.NUMERIC||re===pt.ALETTER)&&(H===pt.NUMERIC||H===pt.ALETTER)||(re===pt.MIDNUM||re===pt.MIDNUMLET)&&H===pt.NUMERIC&&z===pt.NUMERIC||re===pt.NUMERIC&&(H===pt.MIDNUM||H===pt.MIDNUMLET)&&q===pt.NUMERIC||re===pt.EXTEND||re===pt.FORMAT||z===pt.EXTEND||z===pt.FORMAT||H===pt.EXTEND||H===pt.FORMAT||re===pt.CR&&H===pt.LF?!1:re===pt.NEWLINE||re===pt.CR||re===pt.LF||H===pt.NEWLINE||H===pt.CR||H===pt.LF?!0:!(re===pt.KATAKANA&&H===pt.KATAKANA||H===pt.EXTENDNUMLET&&(re===pt.ALETTER||re===pt.NUMERIC||re===pt.KATAKANA||re===pt.EXTENDNUMLET)||re===pt.EXTENDNUMLET&&(H===pt.ALETTER||H===pt.NUMERIC||H===pt.KATAKANA)||re===pt.AT)},ht=rn,It=Ct,yt=Ut,Y=ae=>ae==="http"||ae==="https",Ot=(ae,se)=>{let re;for(re=se;re<ae.length&&!It.test(ae[re]);re++);return re},Bn=(ae,se)=>{const re=Ot(ae,se+1);return ae.slice(se+1,re).join(ht).substr(0,3)==="://"?re:se},$t=(ae,se,re,H)=>{const q=[];let z=[];for(let Z=0;Z<re.length;++Z)if(z.push(ae[Z]),Q(re,Z)){const Ne=se[Z];if((H.includeWhitespace||!It.test(Ne))&&(H.includePunctuation||!yt.test(Ne))){const Pe=Z-z.length+1,Wt=Z+1,ot=se.slice(Pe,Wt).join(ht);if(Y(ot)){const Qn=Bn(se,Z),uo=ae.slice(Wt,Qn);Array.prototype.push.apply(z,uo),Z=Qn}q.push(z)}z=[]}return q},ye=()=>({includeWhitespace:!1,includePunctuation:!1}),at=(ae,se,re)=>{re={...ye(),...re};const H=[],q=[];for(let Z=0;Z<ae.length;Z++){const Ne=se(ae[Z]);Ne!==Qt&&(H.push(ae[Z]),q.push(Ne))}const z=Te(q);return $t(H,q,z,re)};var Le=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker");const Me=(ae,se)=>{const re=se.getBlockElements(),H=se.getVoidElements(),q=Wt=>re[Wt.nodeName]||H[Wt.nodeName],z=[];let Z="";const Ne=new Le(ae,ae);let Pe;for(;Pe=Ne.next();)Pe.nodeType===3?Z+=Dn(Pe.data):q(Pe)&&Z.length&&(z.push(Z),Z="");return Z.length&&z.push(Z),z},Rt=ae=>ae.replace(/\u200B/g,""),_=ae=>ae.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length,he=(ae,se)=>{const re=Rt(Me(ae,se).join(`
`));return at(re.split(""),Sn).length},Ue=(ae,se)=>{const re=Me(ae,se).join("");return _(re)},Oe=(ae,se)=>{const re=Me(ae,se).join("").replace(/\s/g,"");return _(re)},fe=(ae,se)=>()=>se(ae.getBody(),ae.schema),Kt=(ae,se)=>()=>se(ae.selection.getRng().cloneContents(),ae.schema),nn=ae=>fe(ae,he),Fe=ae=>({body:{getWordCount:nn(ae),getCharacterCount:fe(ae,Ue),getCharacterCountWithoutSpaces:fe(ae,Oe)},selection:{getWordCount:Kt(ae,he),getCharacterCount:Kt(ae,Ue),getCharacterCountWithoutSpaces:Kt(ae,Oe)},getCount:nn(ae)}),Vt=(ae,se)=>{ae.windowManager.open({title:"Word Count",body:{type:"panel",items:[{type:"table",header:["Count","Document","Selection"],cells:[["Words",String(se.body.getWordCount()),String(se.selection.getWordCount())],["Characters (no spaces)",String(se.body.getCharacterCountWithoutSpaces()),String(se.selection.getCharacterCountWithoutSpaces())],["Characters",String(se.body.getCharacterCount()),String(se.selection.getCharacterCount())]]}]},buttons:[{type:"cancel",name:"close",text:"Close",primary:!0}]})},kt=(ae,se)=>{ae.addCommand("mceWordCount",()=>Vt(ae,se))},Ie=(ae,se)=>{let re=null;return{cancel:()=>{dn(re)||(clearTimeout(re),re=null)},throttle:(...z)=>{dn(re)&&(re=setTimeout(()=>{re=null,ae.apply(null,z)},se))}}};var R=tinymce.util.Tools.resolve("tinymce.util.Delay");const Hn=(ae,se)=>{ae.dispatch("wordCountUpdate",{wordCount:{words:se.body.getWordCount(),characters:se.body.getCharacterCount(),charactersWithoutSpaces:se.body.getCharacterCountWithoutSpaces()}})},Ae=(ae,se)=>{Hn(ae,se)},Se=(ae,se,re)=>{const H=Ie(()=>Ae(ae,se),re);ae.on("init",()=>{Ae(ae,se),R.setEditorTimeout(ae,()=>{ae.on("SetContent BeforeAddUndo Undo Redo ViewUpdate keyup",H.throttle)},0),ae.on("remove",H.cancel)})},We=ae=>{const se=()=>ae.execCommand("mceWordCount");ae.ui.registry.addButton("wordcount",{tooltip:"Word count",icon:"character-count",onAction:se}),ae.ui.registry.addMenuItem("wordcount",{text:"Word count",icon:"character-count",onAction:se})};var Ee=(ae=300)=>{Ht.add("wordcount",se=>{const re=Fe(se);return kt(se,re),We(se),Se(se,re,ae),re})};Ee()})();const Xj={__name:"Editor",props:{modelValue:String},emits:["update:modelValue"],setup(Ht,{emit:yn}){const dn=Ht,Sn=If(null),Qt=If([]),Dn=If({}),xn={language_url:"/tinymce/langs/zh-Hans.js",language:"zh-Hans",skin_url:"/tinymce/skins/ui/oxide",content_css:"/tinymce/skins/content/default/content.min.css",menubar:!1,autoresize_bottom_margin:50,max_height:500,min_height:450,toolbar_mode:"none",plugins:"wordcount visualchars visualblocks template searchreplace save quickbars preview pagebreak nonbreaking media insertdatetime importcss image help fullscreen directionality codesample code charmap link code table lists advlist anchor autolink autoresize autosave",toolbar:"formats undo redo fontsizeselect fontselect ltr rtl searchreplace media imageUpload | outdent indent aligncenter alignleft alignright alignjustify lineheight underline quicklink h2 h3 blockquote numlist bullist table removeformat forecolor backcolor bold italic strikethrough hr link preview fullscreen help ",content_style:"p {margin: 5px 0; font-size: 14px}",fontsize_formats:"12px 14px 16px 18px 24px 36px 48px 56px 72px",font_formats:"微软雅黑=Microsoft YaHei,Helvetica Neue,PingFang SC,sans-serif;苹果苹方= PingFang SC, Microsoft YaHei, sans- serif; 宋体 = simsun, serif; 仿宋体 = FangSong, serif; 黑体 = SimHei, sans - serif; Arial = arial, helvetica, sans - serif;Arial Black = arialblack, avant garde;Book Antiqua = book antiqua, palatino; ",branding:!1,elementpath:!1,resize:!1,statusbar:!1,setup:Et=>{Et.ui.registry.addButton("imageUpload",{toolTip:"插入图片",icon:"image",onAction(){Sn.value.open(),Dn.value=pt=>{Qt.value=pt.value.map(hn=>hn.url),console.log(Qt.value),Qt.value.forEach(hn=>{Et.insertContent(`<img src='${hn}' style="width:100%;" />`)})}}})}};$j.init;const Nt=If(dn.modelValue);return eO(dn,Et=>Nt.value=Et.modelValue),eO(Nt,Et=>yn("update:modelValue",Et)),(Et,pt)=>(Hd(),Kg(Q4,null,[Ro(Ls(Yj),{modelValue:Nt.value,"onUpdate:modelValue":pt[0]||(pt[0]=hn=>Nt.value=hn),"tag-name":"div",init:xn},null,8,["modelValue"]),Ro(YV,{limit:100,onChoose:Dn.value,ref_key:"selectImgRef",ref:Sn,showPlusIcon:!1},null,8,["onChoose"])],64))}};const Jj={class:"search-item"},Qj={class:"search-input"},eG={class:"goods-info"},tG={class:"text-info"},nG={key:0,style:{display:"flex","align-items":"center","flex-direction":"column"}},oG={key:1},sG={key:0},rG={key:1},aG={class:"close-btn"},cG={__name:"list",setup(Ht){const{searchForm:yn,loading:dn,tableData:Sn,total:Qt,changePage:Dn,getData:xn,handleDel:Nt}=lj({searchForm:{title:"",tab:"all",category_id:null},getList:nj,del:oj}),{formDrawerRef:Et,formRef:pt,isEdit:hn,Form:rn,handleCreate:Ut,handleEdit:Ct,onSubmit:Mt}=uj({Form:{title:"",category_id:0,cover:"",desc:"",unit:"件",stock:0,min_stock:0,status:1,stock_display:1,min_price:1,min_oprice:1,goods_banner:[],content:null},getData:xn,add:sj,edit:WW}),cn=[{key:"all",name:"全部"},{key:"checking",name:"审核中"},{key:"saling",name:"销售中"},{key:"off",name:"已下架"},{key:"min_stock",name:"库存预警"},{key:"delete",name:"回收站"}],Ze=If([]),st=()=>{rj().then(Oe=>{Ze.value=Oe.data})},Te=If(!0),Q=()=>{yn.title="",yn.category_id=null,xn()},ht=If([]),It=Oe=>{Oe.value.length>1?ht.value=Oe.value.map(fe=>fe.url):rn.value.cover=Oe.value[0].url,rn.value.goods_banner=[...ht.value]},yt=If([]),Y=Oe=>{yt.value=Oe.map(fe=>fe.id)},Ot=()=>{ZW(yt.value,1)},Bn=()=>{ZW(yt.value,0)},$t=If(null),ye=If(0),ee=Oe=>{rn.value.goods_banner=Oe.goods_banner.map(fe=>fe.url),ye.value=Oe.id,$t.value.open()},at=Oe=>{rn.value.goods_banner=rn.value.goods_banner.filter(fe=>fe!=Oe)},Le=()=>{aj(ye.value,rn.value.goods_banner).then(Oe=>{UW("设置成功",2e3,"success"),$t.value.close(),xn()})},Me=If(null),Rt=Oe=>{rn.value.content=Oe.content,ye.value=Oe.id,Me.value.open()},_=()=>{WW(ye.value,rn.value).then(Oe=>{UW("设置成功",2e3,"success"),Me.value.close(),xn()})},he=Oe=>{cj(Oe).then(fe=>{xn()})},Ue=Oe=>{ij(Oe).then(fe=>{console.log(fe),xn()})};return XW(()=>{xn(),st()}),(Oe,fe)=>{const Kt=Sj,nn=xj,Fe=ej,Vt=wj,kt=Cj,Ie=pj,R=GV("ArrowDownBold"),Hn=bj,Ae=GV("ArrowUpBold"),Se=kj,We=Ej,Ee=_j,ae=Tj,se=Aj,re=Oj,H=Dj,q=Mj,z=Nj,Z=Rj,Ne=JZ,Pe=GV("CircleCloseFilled"),Wt=yj;return Hd(),Kg("div",null,[Ro(nn,{modelValue:Ls(yn).tab,"onUpdate:modelValue":fe[0]||(fe[0]=ot=>Ls(yn).tab=ot),onTabChange:Ls(xn)},{default:$s(()=>[(Hd(),Kg(Q4,null,pF(cn,(ot,Qn)=>Ro(Kt,{label:ot.name,name:ot.key,key:Qn},null,8,["label","name"])),64))]),_:1},8,["modelValue","onTabChange"]),Ro(re,{shadow:"always"},{default:$s(()=>[Ff("div",Jj,[Ff("div",Qj,[Ro(Fe,{size:"small","prefix-icon":"Search",modelValue:Ls(yn).title,"onUpdate:modelValue":fe[1]||(fe[1]=ot=>Ls(yn).title=ot),placeholder:"商品名称",clearable:"",onChange:Ls(xn)},null,8,["modelValue","onChange"]),J4(Ro(kt,{onChange:Ls(xn),modelValue:Ls(yn).category_id,"onUpdate:modelValue":fe[2]||(fe[2]=ot=>Ls(yn).category_id=ot),placeholder:"请选择商品分类",size:"small"},{default:$s(()=>[(Hd(!0),Kg(Q4,null,pF(Ze.value,ot=>(Hd(),qV(Vt,{key:ot.id,label:ot.name,value:ot.id},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"]),[[hF,!Te.value]])]),Ff("div",null,[Ro(Ie,{size:"small",onClick:Q,plain:""},{default:$s(()=>[Al("清空")]),_:1}),Ro(Ie,{class:"type-btn",link:"",type:"primary",onClick:fe[3]||(fe[3]=ot=>Te.value=!Te.value)},{default:$s(()=>[Ff("p",null,O0(Te.value?"展开":"收起"),1),J4(Ro(Hn,null,{default:$s(()=>[Ro(R)]),_:1},512),[[hF,Te.value]]),J4(Ro(Hn,null,{default:$s(()=>[Ro(Ae)]),_:1},512),[[hF,!Te.value]])]),_:1})])]),Ro(tj,{layout:Ls(yn).tab!="delete"?"create,delete,refresh,put,down":"callback,destroy",onDelete:fe[4]||(fe[4]=ot=>Ls(Nt)(yt.value)),onCreate:Ls(Ut),onRefresh:Ls(xn),onPut:Ot,onDown:Bn,onCallback:fe[5]||(fe[5]=ot=>he(yt.value)),onDestroy:fe[6]||(fe[6]=ot=>Ue(yt.value))},null,8,["layout","onCreate","onRefresh"]),J4((Hd(),qV(ae,{"max-height":"480px",data:Ls(Sn),stripe:"",style:{width:"100%"},onSelectionChange:Y},{default:$s(()=>[Ro(Se,{type:"selection"}),Ro(Se,{prop:"title",label:"商品",width:"240"},{default:$s(({row:ot})=>[Ff("div",eG,[Ro(We,{style:{width:"50px",height:"50px"},src:ot.cover,fit:"cover"},null,8,["src"]),Ff("div",tG,[Ff("h4",null,O0(ot.title),1),Ff("div",null,[Ff("span",null,"￥ "+O0(ot.min_price),1),Al(" | "),Ff("small",null,"￥ "+O0(ot.min_oprice),1)]),Ff("p",null,"分类: "+O0(ot.category.name),1),Ff("p",null,"创建时间: "+O0(ot.create_time),1)])])]),_:1}),Ro(Se,{prop:"sale_count",label:"实际销量",width:"100",align:"center"}),Ro(Se,{prop:"review_count",label:"商品状态",width:"150",align:"center"},{default:$s(({row:ot})=>[Ro(Ee,{size:"small",type:ot.status==1?"":"danger"},{default:$s(()=>[Al(O0(ot.status==1?"上架":"仓库"),1)]),_:2},1032,["type"])]),_:1}),Ro(Se,{prop:"review_count",label:"审核状态",width:"180",align:"center"},{default:$s(({row:ot})=>[ot.ischeck==0?(Hd(),Kg("div",nG,[Ro(Ie,{size:"small",type:"success",plain:""},{default:$s(()=>[Al("审核通过")]),_:1}),Ro(Ie,{size:"small",style:{margin:"8px 0 0"},type:"danger",plain:""},{default:$s(()=>[Al("审核拒绝")]),_:1})])):(Hd(),Kg("div",oG,O0(ot.ischeck==1?"通过":"拒绝"),1))]),_:1}),Ro(Se,{prop:"stock",label:"总库存",width:"100",align:"center"}),Ro(Se,{fixed:"right",label:"操作",width:"auto",align:"center"},{default:$s(({row:ot})=>[Ls(yn).tab!="delete"?(Hd(),Kg("div",sG,[Ro(Ie,{link:"",type:"primary",size:"small",onClick:QZ(Qn=>Ls(Ct)(ot),["stop"])},{default:$s(()=>[Al("修改")]),_:2},1032,["onClick"]),Ro(Ie,{link:"",type:"primary",size:"small",style:KV({color:ot.goods_skus.length>0?"":"red"})},{default:$s(()=>[Al("商品规格")]),_:2},1032,["style"]),Ro(Ie,{link:"",type:"primary",size:"small",onClick:Qn=>ee(ot),style:KV({color:ot.goods_banner.length>0?"":"red"})},{default:$s(()=>[Al("设置轮播图")]),_:2},1032,["onClick","style"]),Ro(Ie,{link:"",type:"primary",size:"small",style:KV({color:ot.content==null?"red":""}),onClick:Qn=>Rt(ot)},{default:$s(()=>[Al("商品详情")]),_:2},1032,["style","onClick"]),Ro(Ie,{link:"",type:"primary",size:"small"},{default:$s(()=>[Al("删除")]),_:1})])):(Hd(),Kg("div",rG,"暂无操作"))]),_:1})]),_:1},8,["data"])),[[Wt,Ls(dn)]]),Ro(se,{small:"",background:"",layout:"prev, pager, next",total:Ls(Qt),onCurrentChange:Ls(Dn)},null,8,["total","onCurrentChange"])]),_:1}),Ro(Ne,{ref_key:"formDrawerRef",ref:Et,title:Ls(hn)?"编辑":"新增","confirm-text":"提交",destroyOnClose:"",onSubmit:Ls(Mt)},{default:$s(()=>[Ro(Z,{ref_key:"formRef",ref:pt,model:Ls(rn),"status-icon":"","label-width":"auto"},{default:$s(()=>[Ro(H,{label:"规格名称",prop:"name"},{default:$s(()=>[Ro(Fe,{modelValue:Ls(rn).title,"onUpdate:modelValue":fe[7]||(fe[7]=ot=>Ls(rn).title=ot),placeholder:"请输入商品名称"},null,8,["modelValue"])]),_:1}),Ro(H,{label:"封面"},{default:$s(()=>[Ro(YV,{onChoose:It})]),_:1}),Ro(H,{label:"商品分类"},{default:$s(()=>[Ro(kt,{modelValue:Ls(rn).category_id,"onUpdate:modelValue":fe[8]||(fe[8]=ot=>Ls(rn).category_id=ot),placeholder:"请选择商品分类"},{default:$s(()=>[(Hd(!0),Kg(Q4,null,pF(Ze.value,ot=>(Hd(),qV(Vt,{key:ot.id,label:ot.name,value:ot.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),Ro(H,{label:"商品描述"},{default:$s(()=>[Ro(Fe,{modelValue:Ls(rn).desc,"onUpdate:modelValue":fe[9]||(fe[9]=ot=>Ls(rn).desc=ot),type:"textarea",rows:3,placeholder:"请输入商品描述(选填)"},null,8,["modelValue"])]),_:1}),Ro(H,{label:"商品单位"},{default:$s(()=>[Ro(Fe,{modelValue:Ls(rn).unit,"onUpdate:modelValue":fe[10]||(fe[10]=ot=>Ls(rn).unit=ot),placeholder:"请输入商品单位"},null,8,["modelValue"])]),_:1}),Ro(H,{label:"总库存"},{default:$s(()=>[Ro(Fe,{modelValue:Ls(rn).stock,"onUpdate:modelValue":fe[11]||(fe[11]=ot=>Ls(rn).stock=ot),style:{width:"200px"}},{append:$s(()=>[Al("件")]),_:1},8,["modelValue"])]),_:1}),Ro(H,{label:"库存预警"},{default:$s(()=>[Ro(Fe,{modelValue:Ls(rn).min_stock,"onUpdate:modelValue":fe[12]||(fe[12]=ot=>Ls(rn).min_stock=ot),style:{width:"200px"}},{append:$s(()=>[Al("件")]),_:1},8,["modelValue"])]),_:1}),Ro(H,{label:"最低销售价"},{default:$s(()=>[Ro(Fe,{modelValue:Ls(rn).min_price,"onUpdate:modelValue":fe[13]||(fe[13]=ot=>Ls(rn).min_price=ot),style:{width:"200px"}},{append:$s(()=>[Al("元")]),_:1},8,["modelValue"])]),_:1}),Ro(H,{label:"最低原价"},{default:$s(()=>[Ro(Fe,{modelValue:Ls(rn).min_oprice,"onUpdate:modelValue":fe[14]||(fe[14]=ot=>Ls(rn).min_oprice=ot),style:{width:"200px"}},{append:$s(()=>[Al("元")]),_:1},8,["modelValue"])]),_:1}),Ro(H,{label:"库存显示"},{default:$s(()=>[Ro(z,{modelValue:Ls(rn).stock_display,"onUpdate:modelValue":fe[15]||(fe[15]=ot=>Ls(rn).stock_display=ot)},{default:$s(()=>[Ro(q,{label:1,border:""},{default:$s(()=>[Al("是")]),_:1}),Ro(q,{label:0,border:""},{default:$s(()=>[Al("否")]),_:1})]),_:1},8,["modelValue"])]),_:1}),Ro(H,{label:"库存显示"},{default:$s(()=>[Ro(z,{modelValue:Ls(rn).status,"onUpdate:modelValue":fe[16]||(fe[16]=ot=>Ls(rn).status=ot)},{default:$s(()=>[Ro(q,{label:0,border:""},{default:$s(()=>[Al("放入仓库")]),_:1}),Ro(q,{label:1,border:""},{default:$s(()=>[Al("立即上架")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","onSubmit"]),Ro(Ne,{ref_key:"bannerDrawerRef",ref:$t,title:"设置轮播图","confirm-text":"提交",destroyOnClose:"",onSubmit:Le},{default:$s(()=>[Ro(Z,{model:Ls(rn),"status-icon":"","label-width":"auto"},{default:$s(()=>[Ro(H,{label:"轮播图",class:"goods_banner"},{default:$s(()=>[(Hd(!0),Kg(Q4,null,pF(Ls(rn).goods_banner,ot=>J4((Hd(),Kg("div",aG,[Ro(We,{lazy:"",src:ot,fit:"cover"},null,8,["src"]),Ro(Hn,{onClick:Qn=>at(ot)},{default:$s(()=>[Ro(Pe)]),_:2},1032,["onClick"])],512)),[[hF,Ls(rn).goods_banner.length>0]])),256)),Ro(YV,{limit:5,onChoose:It})]),_:1})]),_:1},8,["model"])]),_:1},512),Ro(Ne,{ref_key:"goodsDetailRef",ref:Me,title:"设置商品详情","confirm-text":"提交",destroyOnClose:"",onSubmit:_},{default:$s(()=>[Ro(Z,{model:Ls(rn),"status-icon":"","label-width":"auto"},{default:$s(()=>[Ro(Xj,{modelValue:Ls(rn).content,"onUpdate:modelValue":fe[17]||(fe[17]=ot=>Ls(rn).content=ot)},null,8,["modelValue"])]),_:1},8,["model"])]),_:1},512)])}}},fq=vj(cG,[["__scopeId","data-v-473b2325"]]);export{fq as default};
