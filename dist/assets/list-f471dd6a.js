/* empty css             *//* empty css                  */import{_ as K}from"./formDrawer-615cee08.js";/* empty css                */import"./el-form-item-4ed993c7.js";/* empty css                 *//* empty css                *//* empty css                        *//* empty css                    *//* empty css               *//* empty css                   *//* empty css                   *//* empty css                  *//* empty css                  */import{b as h,E as M}from"./index-7aff1b23.js";/* empty css                        */import{F as j,E as A}from"./msgTip-a00a6396.js";/* empty css                  *//* empty css                      */import{g as te}from"./goods-6bf41e91.js";import{u as J,a as oe}from"./useCommon-3fca7f65.js";import{_ as Q}from"./_plugin-vue_export-helper-c27b6911.js";import{a as T,E as N}from"./index-4bd039ef.js";import{E as W}from"./index-d6a34864.js";import{E as ae}from"./index-61f461ba.js";import{r as g,o as X,m as S,n as P,K as e,C as t,q as c,H as C,u as o,D as U,B as H,I as R,a7 as O}from"./index-d45ed081.js";import{E as ne}from"./index-fcefa1a6.js";import{v as q}from"./directive-7bc345b5.js";import{E as Y}from"./index-c440b37e.js";import{t as le}from"./tableHeader-f66fb168.js";import{E as re}from"./index-d4c13dda.js";import{a as se,E as ie}from"./index-ae57328d.js";import"./index-1cb0abaf.js";import"./js.cookie-cf83ad76.js";import"./queryParams-4c57c9da.js";import"./index-6998b886.js";import"./_initCloneObject-4b55852b.js";import"./index-184e15d9.js";import"./index-b06f2c24.js";import"./refs-726771dd.js";import"./index-151d4a8e.js";import"./strings-5238cde9.js";/* empty css                */const ce=()=>h({url:"/category",method:"get"}),me=(a,r)=>h({url:`/category/${a}`,method:"post",data:r}),_e=a=>h({url:"/category",method:"post",data:a}),de=a=>h({url:`/category/${a}/delete`,method:"post"}),pe=(a,r)=>h({url:`/category/${a}/update_status`,method:"post",data:{status:r}}),ue=a=>h({url:`/app_category_item/list?category_id=${a}`,method:"get"}),fe=a=>h({url:`/app_category_item/${a}/delete`,method:"post"});function ge(a,r){return h.post("/app_category_item",{category_id:a,goods_ids:r})}const he={class:"search-item"},ve={class:"search-input"},ye={class:"goods-info"},be={class:"text-info"},Ce={style:{color:"red"}},we={class:"dialog-footer"},xe={__name:"selectGoods",setup(a,{expose:r}){const s=g(!1),{searchForm:d,loading:w,tableData:V,total:x,changePage:v,getData:E}=J({searchForm:{title:""},getList:te}),p=g(0),k=g([]),m=()=>{ge(p.value,k.value).then(f=>{j("关联成功",2e3,"success"),s.value=!1})};r({open:()=>{s.value=!0}});const u=f=>{console.log(f),p.value=f[0].category_id,k.value=f.map(n=>n.id)};return X(()=>{E()}),(f,n)=>{const D=A,i=T,y=W,b=N,$=ae,B=M,F=O,z=ne,L=q;return S(),P("div",null,[e(z,{modelValue:s.value,"onUpdate:modelValue":n[2]||(n[2]=l=>s.value=l),title:"商品推荐",width:"85%",top:"2vh"},{footer:t(()=>[c("span",we,[e(F,{type:"primary",onClick:m,color:"#4339ca"},{default:t(()=>[C("确定")]),_:1}),e(F,{onClick:n[1]||(n[1]=l=>s.value=!1)},{default:t(()=>[C("取消")]),_:1})])]),default:t(()=>[e(B,{shadow:"always"},{default:t(()=>[c("div",he,[c("div",ve,[e(D,{size:"small","prefix-icon":"Search",modelValue:o(d).title,"onUpdate:modelValue":n[0]||(n[0]=l=>o(d).title=l),placeholder:"商品名称",clearable:"",onChange:o(E)},null,8,["modelValue","onChange"])])]),U((S(),H(b,{"max-height":"480px",data:o(V),stripe:"",style:{width:"100%"},onSelectionChange:u},{default:t(()=>[e(i,{type:"selection"}),e(i,{prop:"title",label:"商品",width:"auto"},{default:t(({row:l})=>[c("div",ye,[e(y,{style:{width:"50px",height:"50px"},src:l.cover,fit:"cover"},null,8,["src"]),c("div",be,[c("h4",null,R(l.title),1),c("p",null,"分类: "+R(l.category.name),1),c("p",null,"创建时间: "+R(l.create_time),1)])])]),_:1}),e(i,{prop:"stock",label:"总库存",width:"300",align:"center"}),e(i,{label:"价格(元)",width:"300",align:"center"},{default:t(({row:l})=>[c("div",null,[c("span",Ce,"￥ "+R(l.min_price),1),C(" | "),c("small",null,"￥ "+R(l.min_oprice),1)])]),_:1})]),_:1},8,["data"])),[[L,o(w)]]),e($,{small:"",background:"",layout:"prev, pager, next",total:o(x),onCurrentChange:o(v)},null,8,["total","onCurrentChange"])]),_:1})]),_:1},8,["modelValue"])])}}},Ee=Q(xe,[["__scopeId","data-v-9b0fb88b"]]),ke={__name:"categoeyFormDrawer",setup(a,{expose:r}){const s=g(0),d=g([]),w=g(null),V=m=>{s.value=m.id,x().then(I=>{w.value.open()})},x=()=>ue(s.value).then(m=>{d.value=m.data}),v=g(!1),E=m=>{v.value=!0,fe(m).then(I=>{j("删除成功",2e3,"success"),x()}).finally(()=>{v.value=!1})},p=g(null),k=()=>{p.value.open()};return r({open:V}),(m,I)=>{const u=T,f=W,n=O,D=Y,i=N,y=q;return S(),P("div",null,[e(K,{ref_key:"formDrawerRef",ref:w,"confirm-text":"关联",title:"推荐产品",destroyOnClose:"",onSubmit:k},{default:t(()=>[U((S(),H(i,{data:d.value,border:"",style:{width:"100%"}},{default:t(()=>[e(u,{align:"center",prop:"goods_id",label:"编号",width:"80"}),e(u,{align:"center",prop:"date",label:"商品封面",width:"200"},{default:t(({row:b})=>[e(f,{style:{width:"70px",height:"70px"},src:b.cover,fit:"cover"},null,8,["src"])]),_:1}),e(u,{align:"center",prop:"name",label:"商品名称",width:"180"}),e(u,{align:"center",label:"操作",width:"100"},{default:t(({row:b})=>[e(D,{title:"确认删除吗?","confirm-button-text":"确定","cancel-button-text":"取消",onConfirm:$=>E(b.id)},{reference:t(()=>[e(n,{link:"",type:"primary",size:"small"},{default:t(()=>[C("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[y,v.value]])]),_:1},512),e(Ee,{ref_key:"selectGoodsRef",ref:p},null,512)])}}};const De={__name:"list",setup(a){const{loading:r,tableData:s,getData:d,handleDel:w,handleChange:V}=J({getList:ce,del:de,changeStatus:pe,onGetListSuccess:n=>{s.value=n.data}}),{formDrawerRef:x,formRef:v,isEdit:E,Form:p,handleCreate:k,handleEdit:m,onSubmit:I}=oe({Form:{name:"",status:1},getData:d,add:_e,edit:me}),u=g(null),f=n=>{u.value.open(n)};return X(()=>{d()}),(n,D)=>{const i=T,y=O,b=re,$=Y,B=N,F=M,z=A,L=se,l=ie,Z=K,ee=q;return S(),P("div",null,[e(F,{shadow:"always"},{default:t(()=>[e(le,{onCreate:o(k),onRefresh:o(d)},null,8,["onCreate","onRefresh"]),U((S(),H(B,{"max-height":"480px",data:o(s),stripe:"",style:{width:"100%"}},{default:t(()=>[e(i,{prop:"name",width:"auto"}),e(i,{width:"100",align:"center"},{default:t(_=>[e(y,{link:"",type:"primary",size:"small",onClick:G=>f(_.row)},{default:t(()=>[C("推荐产品")]),_:2},1032,["onClick"])]),_:1}),e(i,{width:"50"},{default:t(({row:_})=>[e(b,{disabled:_.super==1,onChange:G=>o(V)(G,_),"model-value":_.status,"active-value":1,"inactive-value":0,"active-color":"#4339ca"},null,8,["disabled","onChange","model-value"])]),_:1}),e(i,{fixed:"right",width:"120",align:"center"},{default:t(_=>[e(y,{link:"",type:"primary",size:"small",onClick:G=>o(m)(_.row)},{default:t(()=>[C("编辑")]),_:2},1032,["onClick"]),e($,{title:"确认删除吗?","confirm-button-text":"确定","cancel-button-text":"取消",onConfirm:G=>o(w)(_.row.id)},{reference:t(()=>[e(y,{link:"",type:"primary",size:"small"},{default:t(()=>[C("删除")]),_:1})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])),[[ee,o(r)]])]),_:1}),e(Z,{ref_key:"formDrawerRef",ref:x,title:o(E)?"编辑":"新增","confirm-text":"提交",destroyOnClose:"",onSubmit:o(I)},{default:t(()=>[e(l,{ref_key:"formRef",ref:v,model:o(p),"status-icon":"","label-width":"auto"},{default:t(()=>[e(L,{label:"分类名称"},{default:t(()=>[e(z,{modelValue:o(p).name,"onUpdate:modelValue":D[0]||(D[0]=_=>o(p).name=_),placeholder:"请输入分类名称"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["title","onSubmit"]),e(ke,{ref_key:"goodsFormDrawerRef",ref:u},null,512)])}}},gt=Q(De,[["__scopeId","data-v-3f4c450f"]]);export{gt as default};
