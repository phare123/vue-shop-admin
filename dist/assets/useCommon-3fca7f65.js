import{F as i}from"./msgTip-a00a6396.js";import{r as n,ac as h}from"./index-d45ed081.js";function S(e={}){const t=n(!1),f=n([]),s=n(1),l=n(0);let c=null;e.searchForm&&(c=h({...e.searchForm}));const o=a=>{s.value=a,r()},r=()=>{t.value=!0,e.getList(s.value,c).then(a=>{e.onGetListSuccess&&typeof e.onGetListSuccess=="function"?e.onGetListSuccess(a):(l.value=a.data.totalCount,f.value=a.data.list)}).finally(a=>t.value=!1)};return{loading:t,tableData:f,currentPage:s,total:l,searchForm:c,changePage:o,getData:r,handleDel:a=>{e.del(a).then(d=>{i("删除成功",3e3,"success"),r()}).catch(d=>{i("删除失败",2e3,"error")})},handleChange:(a,d)=>{d.status=a,e.changeStatus(d.id,a).then(m=>{r(),i("修改成功",2e3,"success")})}}}function D(e={}){const t=n(null),f=n(null),s=n(!1),l=n({}),c=()=>{l.value={},s.value=!1,t.value.open()},o=n(0);return{formDrawerRef:t,formRef:f,isEdit:s,Form:l,handleCreate:c,tableId:o,handleEdit:u=>{s.value=!0,o.value=u.id,l.value=u,t.value.open()},onSubmit:()=>{let u;e.beforeSubmit&&typeof e.beforeSubmit=="function"?u=e.beforeSubmit(l.value):u=l.value,t.value.startLoading(),s.value?e.edit(o.value,u).then(a=>{i("编辑成功",2e3,"success"),t.value.close(),e.getData()}).finally(a=>t.value.endLoading()):e.add(u).then(a=>{i("提交成功",2e3,"success"),t.value.close(),e.getData()}).finally(a=>t.value.endLoading())}}}export{D as a,S as u};
